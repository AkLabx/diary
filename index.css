@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base body styles for the new theme */
body {
    @apply bg-[#FBF8F3] dark:bg-slate-900 font-serif text-slate-700 dark:text-slate-300;
}

/* Custom scrollbar to match the new aesthetic */
::-webkit-scrollbar {
  width: 8px;
}
::-webkit-scrollbar-track {
  background: #F4EFE9; /* A slightly darker shade for the track */
}
::-webkit-scrollbar-thumb {
  background: #DCD1C1; /* A muted color for the thumb */
  border-radius: 10px;
}
::-webkit-scrollbar-thumb:hover {
  background: #C9BBAA;
}

/* Dark mode scrollbar */
.dark ::-webkit-scrollbar-track {
    background: #0f172a; /* slate-900 */
}
.dark ::-webkit-scrollbar-thumb {
    background: #475569; /* slate-600 */
}
.dark ::-webkit-scrollbar-thumb:hover {
    background: #64748b; /* slate-500 */
}

/* Styles for the "paper" editor canvas */
.paper-canvas {
    background-color: #fff;
    background-image:
        linear-gradient(90deg, transparent 98%, #f0ebe5 98%),
        linear-gradient(180deg, #fdfbf8 98%, #f0ebe5 98%);
    background-size: 20px 20px;
    border: 1px solid #EAE1D6;
    box-shadow: 0 10px 30px rgba(0,0,0,0.05);
}

.dark .paper-canvas {
    background-color: #1e293b; /* slate-800 */
     background-image:
        linear-gradient(90deg, transparent 98%, #29364a 98%),
        linear-gradient(180deg, #1e293b 98%, #29364a 98%);
    border-color: #334155; /* slate-700 */
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

/* Custom styles for React Quill to match the new design */
.prose-editor {
    height: 100%;
    display: flex;
    flex-direction: column;
}

.prose-editor .ql-toolbar {
  display: none; /* Hide default toolbar as we use a custom one */
}

.prose-editor .ql-container {
  border: none !important;
  font-size: 1.125rem; /* 18px for a better reading experience */
  flex-grow: 1;
}

.prose-editor .ql-editor {
  height: 100%; /* <-- FIX: Ensure editor content area fills its container */
  padding: 2rem 3rem;
  color: #334155; /* slate-700 */
  line-height: 1.7;
  caret-color: #6366f1; /* indigo-500 */
  animation: caret-blink 1.25s step-end infinite;
}

/* 
  FIX: Directly apply font styles to the Quill editor content area.
  This uses more specific selectors to reliably override Quill's default
  font styles, ensuring the content font matches the selected style.
*/
.font-serif .prose-editor .ql-editor {
    font-family: 'Lora', serif;
}

.font-sans .prose-editor .ql-editor {
    font-family: 'Inter', sans-serif;
}

.font-mono .prose-editor .ql-editor {
    font-family: 'Inconsolata', monospace;
}

.dark .prose-editor .ql-editor {
  color: #cbd5e1; /* slate-300 */
  caret-color: #818cf8; /* indigo-400 */
}

.prose-editor .ql-editor.ql-blank::before {
  color: #94a3b8; /* slate-400 */
  font-style: italic;
  left: 3rem;
  top: 2rem;
}

/* Smooth caret animation */
@keyframes caret-blink {
  from, to { border-color: transparent }
  50% { border-color: inherit; }
}

.prose-editor .ql-editor > * {
  transition: all 0.1s ease-in-out;
}

/* Placeholder style for encrypted images while they load */
.secure-diary-image {
    background-color: #f1f5f9; /* slate-100 */
    min-width: 50px;
    min-height: 50px;
}

.dark .secure-diary-image {
    background-color: #334155; /* slate-700 */
}

/*
  FIX: Resolved content overflow issue in DiaryEntryView.
  Content from the editor, especially with inline styles or long strings,
  could overflow its container. These more general rules ensure that all
  content wraps and scales correctly for a clean layout.
*/
.prose {
  /* Enforce word wrapping on the entire content block. This handles long,
     unbroken strings of text in any element (paragraphs, headers, etc.). */
  overflow-wrap: break-word;
  word-break: break-word;
  /* NEW: Establish a new block formatting context. This is a robust way
     to ensure the container properly wraps around all its content, including
     floated elements like images, which prevents them from overflowing. */
  display: flow-root;
}

.prose img {
  /* Force images to be responsive. The `!important` is critical to override
     inline `width` styles set by the rich text editor that might be wider
     than the container. */
  max-width: 100% !important;
  height: auto !important;
}