import Qv from"compromise";import{BlobWriter as fS,ZipWriter as hS,TextReader as Zv}from"@zip.js/zip.js";function pS(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var li=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $h(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mS(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var E5={exports:{}},Hh={},A5={exports:{}},Bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ed=Symbol.for("react.element"),gS=Symbol.for("react.portal"),vS=Symbol.for("react.fragment"),yS=Symbol.for("react.strict_mode"),wS=Symbol.for("react.profiler"),bS=Symbol.for("react.provider"),xS=Symbol.for("react.context"),_S=Symbol.for("react.forward_ref"),SS=Symbol.for("react.suspense"),kS=Symbol.for("react.memo"),NS=Symbol.for("react.lazy"),ey=Symbol.iterator;function ES(t){return t===null||typeof t!="object"?null:(t=ey&&t[ey]||t["@@iterator"],typeof t=="function"?t:null)}var j5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O5=Object.assign,L5={};function Ql(t,e,r){this.props=t,this.context=e,this.refs=L5,this.updater=r||j5}Ql.prototype.isReactComponent={};Ql.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ql.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function P5(){}P5.prototype=Ql.prototype;function n1(t,e,r){this.props=t,this.context=e,this.refs=L5,this.updater=r||j5}var i1=n1.prototype=new P5;i1.constructor=n1;O5(i1,Ql.prototype);i1.isPureReactComponent=!0;var ty=Array.isArray,T5=Object.prototype.hasOwnProperty,a1={current:null},C5={key:!0,ref:!0,__self:!0,__source:!0};function R5(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)T5.call(e,n)&&!C5.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:ed,type:t,key:a,ref:o,props:i,_owner:a1.current}}function AS(t,e){return{$$typeof:ed,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function o1(t){return typeof t=="object"&&t!==null&&t.$$typeof===ed}function jS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var ry=/\/+/g;function c0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jS(""+t.key):e.toString(36)}function Cf(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ed:case gS:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+c0(o,0):n,ty(i)?(r="",t!=null&&(r=t.replace(ry,"$&/")+"/"),Cf(i,e,r,"",function(u){return u})):i!=null&&(o1(i)&&(i=AS(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ry,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",ty(t))for(var s=0;s<t.length;s++){a=t[s];var l=n+c0(a,s);o+=Cf(a,e,r,l,i)}else if(l=ES(t),typeof l=="function")for(t=l.call(t),s=0;!(a=t.next()).done;)a=a.value,l=n+c0(a,s++),o+=Cf(a,e,r,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gd(t,e,r){if(t==null)return t;var n=[],i=0;return Cf(t,n,"","",function(a){return e.call(r,a,i++)}),n}function OS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dn={current:null},Rf={transition:null},LS={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:Rf,ReactCurrentOwner:a1};function I5(){throw Error("act(...) is not supported in production builds of React.")}Bt.Children={map:Gd,forEach:function(t,e,r){Gd(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Gd(t,function(){e++}),e},toArray:function(t){return Gd(t,function(e){return e})||[]},only:function(t){if(!o1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Bt.Component=Ql;Bt.Fragment=vS;Bt.Profiler=wS;Bt.PureComponent=n1;Bt.StrictMode=yS;Bt.Suspense=SS;Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LS;Bt.act=I5;Bt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=O5({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=a1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)T5.call(e,l)&&!C5.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:ed,type:t.type,key:i,ref:a,props:n,_owner:o}};Bt.createContext=function(t){return t={$$typeof:xS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bS,_context:t},t.Consumer=t};Bt.createElement=R5;Bt.createFactory=function(t){var e=R5.bind(null,t);return e.type=t,e};Bt.createRef=function(){return{current:null}};Bt.forwardRef=function(t){return{$$typeof:_S,render:t}};Bt.isValidElement=o1;Bt.lazy=function(t){return{$$typeof:NS,_payload:{_status:-1,_result:t},_init:OS}};Bt.memo=function(t,e){return{$$typeof:kS,type:t,compare:e===void 0?null:e}};Bt.startTransition=function(t){var e=Rf.transition;Rf.transition={};try{t()}finally{Rf.transition=e}};Bt.unstable_act=I5;Bt.useCallback=function(t,e){return Dn.current.useCallback(t,e)};Bt.useContext=function(t){return Dn.current.useContext(t)};Bt.useDebugValue=function(){};Bt.useDeferredValue=function(t){return Dn.current.useDeferredValue(t)};Bt.useEffect=function(t,e){return Dn.current.useEffect(t,e)};Bt.useId=function(){return Dn.current.useId()};Bt.useImperativeHandle=function(t,e,r){return Dn.current.useImperativeHandle(t,e,r)};Bt.useInsertionEffect=function(t,e){return Dn.current.useInsertionEffect(t,e)};Bt.useLayoutEffect=function(t,e){return Dn.current.useLayoutEffect(t,e)};Bt.useMemo=function(t,e){return Dn.current.useMemo(t,e)};Bt.useReducer=function(t,e,r){return Dn.current.useReducer(t,e,r)};Bt.useRef=function(t){return Dn.current.useRef(t)};Bt.useState=function(t){return Dn.current.useState(t)};Bt.useSyncExternalStore=function(t,e,r){return Dn.current.useSyncExternalStore(t,e,r)};Bt.useTransition=function(){return Dn.current.useTransition()};Bt.version="18.3.1";A5.exports=Bt;var te=A5.exports;const PS=$h(te);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS=te,CS=Symbol.for("react.element"),RS=Symbol.for("react.fragment"),IS=Object.prototype.hasOwnProperty,DS=TS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MS={key:!0,ref:!0,__self:!0,__source:!0};function D5(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)IS.call(e,n)&&!MS.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:CS,type:t,key:a,ref:o,props:i,_owner:DS.current}}Hh.Fragment=RS;Hh.jsx=D5;Hh.jsxs=D5;E5.exports=Hh;var x=E5.exports,gm={},M5={exports:{}},hi={},F5={exports:{}},B5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,G){var H=X.length;X.push(G);e:for(;0<H;){var B=H-1>>>1,L=X[B];if(0<i(L,G))X[B]=G,X[H]=L,H=B;else break e}}function r(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var G=X[0],H=X.pop();if(H!==G){X[0]=H;e:for(var B=0,L=X.length,D=L>>>1;B<D;){var z=2*(B+1)-1,q=X[z],U=z+1,K=X[U];if(0>i(q,H))U<L&&0>i(K,q)?(X[B]=K,X[U]=H,B=U):(X[B]=q,X[z]=H,B=z);else if(U<L&&0>i(K,H))X[B]=K,X[U]=H,B=U;else break e}}return G}function i(X,G){var H=X.sortIndex-G.sortIndex;return H!==0?H:X.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],h=1,d=null,f=3,c=!1,y=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(X){for(var G=r(u);G!==null;){if(G.callback===null)n(u);else if(G.startTime<=X)n(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=r(u)}}function _(X){if(v=!1,b(X),!y)if(r(l)!==null)y=!0,Z(E);else{var G=r(u);G!==null&&Q(_,G.startTime-X)}}function E(X,G){y=!1,v&&(v=!1,p(P),P=-1),c=!0;var H=f;try{for(b(G),d=r(l);d!==null&&(!(d.expirationTime>G)||X&&!k());){var B=d.callback;if(typeof B=="function"){d.callback=null,f=d.priorityLevel;var L=B(d.expirationTime<=G);G=t.unstable_now(),typeof L=="function"?d.callback=L:d===r(l)&&n(l),b(G)}else n(l);d=r(l)}if(d!==null)var D=!0;else{var z=r(u);z!==null&&Q(_,z.startTime-G),D=!1}return D}finally{d=null,f=H,c=!1}}var C=!1,A=null,P=-1,F=5,T=-1;function k(){return!(t.unstable_now()-T<F)}function j(){if(A!==null){var X=t.unstable_now();T=X;var G=!0;try{G=A(!0,X)}finally{G?I():(C=!1,A=null)}}else C=!1}var I;if(typeof g=="function")I=function(){g(j)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,$=R.port2;R.port1.onmessage=j,I=function(){$.postMessage(null)}}else I=function(){w(j,0)};function Z(X){A=X,C||(C=!0,I())}function Q(X,G){P=w(function(){X(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){y||c||(y=!0,Z(E))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(X){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var H=f;f=G;try{return X()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,G){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var H=f;f=X;try{return G()}finally{f=H}},t.unstable_scheduleCallback=function(X,G,H){var B=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?B+H:B):H=B,X){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=H+L,X={id:h++,callback:G,priorityLevel:X,startTime:H,expirationTime:L,sortIndex:-1},H>B?(X.sortIndex=H,e(u,X),r(l)===null&&X===r(u)&&(v?(p(P),P=-1):v=!0,Q(_,H-B))):(X.sortIndex=L,e(l,X),y||c||(y=!0,Z(E))),X},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(X){var G=f;return function(){var H=f;f=G;try{return X.apply(this,arguments)}finally{f=H}}}})(B5);F5.exports=B5;var FS=F5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS=te,fi=FS;function We(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U5=new Set,jc={};function Es(t,e){ql(t,e),ql(t+"Capture",e)}function ql(t,e){for(jc[t]=e,t=0;t<e.length;t++)U5.add(e[t])}var Ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vm=Object.prototype.hasOwnProperty,US=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ny={},iy={};function zS(t){return vm.call(iy,t)?!0:vm.call(ny,t)?!1:US.test(t)?iy[t]=!0:(ny[t]=!0,!1)}function qS(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $S(t,e,r,n){if(e===null||typeof e>"u"||qS(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mn(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dn[t]=new Mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dn[e]=new Mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dn[t]=new Mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dn[t]=new Mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dn[t]=new Mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dn[t]=new Mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dn[t]=new Mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dn[t]=new Mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dn[t]=new Mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var s1=/[\-:]([a-z])/g;function l1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(s1,l1);dn[e]=new Mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(s1,l1);dn[e]=new Mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(s1,l1);dn[e]=new Mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dn[t]=new Mn(t,1,!1,t.toLowerCase(),null,!1,!1)});dn.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dn[t]=new Mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function u1(t,e,r,n){var i=dn.hasOwnProperty(e)?dn[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($S(e,r,i,n)&&(r=null),n||i===null?zS(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var qa=BS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kd=Symbol.for("react.element"),gl=Symbol.for("react.portal"),vl=Symbol.for("react.fragment"),c1=Symbol.for("react.strict_mode"),ym=Symbol.for("react.profiler"),z5=Symbol.for("react.provider"),q5=Symbol.for("react.context"),d1=Symbol.for("react.forward_ref"),wm=Symbol.for("react.suspense"),bm=Symbol.for("react.suspense_list"),f1=Symbol.for("react.memo"),fo=Symbol.for("react.lazy"),$5=Symbol.for("react.offscreen"),ay=Symbol.iterator;function zu(t){return t===null||typeof t!="object"?null:(t=ay&&t[ay]||t["@@iterator"],typeof t=="function"?t:null)}var Or=Object.assign,d0;function uc(t){if(d0===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);d0=e&&e[1]||""}return`
`+d0+t}var f0=!1;function h0(t,e){if(!t||f0)return"";f0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{f0=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?uc(t):""}function HS(t){switch(t.tag){case 5:return uc(t.type);case 16:return uc("Lazy");case 13:return uc("Suspense");case 19:return uc("SuspenseList");case 0:case 2:case 15:return t=h0(t.type,!1),t;case 11:return t=h0(t.type.render,!1),t;case 1:return t=h0(t.type,!0),t;default:return""}}function xm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vl:return"Fragment";case gl:return"Portal";case ym:return"Profiler";case c1:return"StrictMode";case wm:return"Suspense";case bm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case q5:return(t.displayName||"Context")+".Consumer";case z5:return(t._context.displayName||"Context")+".Provider";case d1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case f1:return e=t.displayName||null,e!==null?e:xm(t.type)||"Memo";case fo:e=t._payload,t=t._init;try{return xm(t(e))}catch{}}return null}function WS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xm(e);case 8:return e===c1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Po(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function H5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VS(t){var e=H5(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yd(t){t._valueTracker||(t._valueTracker=VS(t))}function W5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=H5(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function nh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _m(t,e){var r=e.checked;return Or({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function oy(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Po(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function V5(t,e){e=e.checked,e!=null&&u1(t,"checked",e,!1)}function Sm(t,e){V5(t,e);var r=Po(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?km(t,e.type,r):e.hasOwnProperty("defaultValue")&&km(t,e.type,Po(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sy(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function km(t,e,r){(e!=="number"||nh(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var cc=Array.isArray;function Ll(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Po(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Nm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(We(91));return Or({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ly(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(We(92));if(cc(r)){if(1<r.length)throw Error(We(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Po(r)}}function G5(t,e){var r=Po(e.value),n=Po(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function uy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function K5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Em(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?K5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jd,Y5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jd=Jd||document.createElement("div"),Jd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Oc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var gc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GS=["Webkit","ms","Moz","O"];Object.keys(gc).forEach(function(t){GS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gc[e]=gc[t]})});function J5(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||gc.hasOwnProperty(t)&&gc[t]?(""+e).trim():e+"px"}function X5(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=J5(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var KS=Or({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Am(t,e){if(e){if(KS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(We(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(We(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(We(61))}if(e.style!=null&&typeof e.style!="object")throw Error(We(62))}}function jm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Om=null;function h1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lm=null,Pl=null,Tl=null;function cy(t){if(t=nd(t)){if(typeof Lm!="function")throw Error(We(280));var e=t.stateNode;e&&(e=Yh(e),Lm(t.stateNode,t.type,e))}}function Q5(t){Pl?Tl?Tl.push(t):Tl=[t]:Pl=t}function Z5(){if(Pl){var t=Pl,e=Tl;if(Tl=Pl=null,cy(t),e)for(t=0;t<e.length;t++)cy(e[t])}}function eb(t,e){return t(e)}function tb(){}var p0=!1;function rb(t,e,r){if(p0)return t(e,r);p0=!0;try{return eb(t,e,r)}finally{p0=!1,(Pl!==null||Tl!==null)&&(tb(),Z5())}}function Lc(t,e){var r=t.stateNode;if(r===null)return null;var n=Yh(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(We(231,e,typeof r));return r}var Pm=!1;if(Ma)try{var qu={};Object.defineProperty(qu,"passive",{get:function(){Pm=!0}}),window.addEventListener("test",qu,qu),window.removeEventListener("test",qu,qu)}catch{Pm=!1}function YS(t,e,r,n,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var vc=!1,ih=null,ah=!1,Tm=null,JS={onError:function(t){vc=!0,ih=t}};function XS(t,e,r,n,i,a,o,s,l){vc=!1,ih=null,YS.apply(JS,arguments)}function QS(t,e,r,n,i,a,o,s,l){if(XS.apply(this,arguments),vc){if(vc){var u=ih;vc=!1,ih=null}else throw Error(We(198));ah||(ah=!0,Tm=u)}}function As(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function nb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dy(t){if(As(t)!==t)throw Error(We(188))}function ZS(t){var e=t.alternate;if(!e){if(e=As(t),e===null)throw Error(We(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return dy(i),t;if(a===n)return dy(i),e;a=a.sibling}throw Error(We(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o)throw Error(We(189))}}if(r.alternate!==n)throw Error(We(190))}if(r.tag!==3)throw Error(We(188));return r.stateNode.current===r?t:e}function ib(t){return t=ZS(t),t!==null?ab(t):null}function ab(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ab(t);if(e!==null)return e;t=t.sibling}return null}var ob=fi.unstable_scheduleCallback,fy=fi.unstable_cancelCallback,ek=fi.unstable_shouldYield,tk=fi.unstable_requestPaint,Dr=fi.unstable_now,rk=fi.unstable_getCurrentPriorityLevel,p1=fi.unstable_ImmediatePriority,sb=fi.unstable_UserBlockingPriority,oh=fi.unstable_NormalPriority,nk=fi.unstable_LowPriority,lb=fi.unstable_IdlePriority,Wh=null,da=null;function ik(t){if(da&&typeof da.onCommitFiberRoot=="function")try{da.onCommitFiberRoot(Wh,t,void 0,(t.current.flags&128)===128)}catch{}}var Ki=Math.clz32?Math.clz32:sk,ak=Math.log,ok=Math.LN2;function sk(t){return t>>>=0,t===0?32:31-(ak(t)/ok|0)|0}var Xd=64,Qd=4194304;function dc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var s=o&~i;s!==0?n=dc(s):(a&=o,a!==0&&(n=dc(a)))}else o=r&~i,o!==0?n=dc(o):a!==0&&(n=dc(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ki(e),i=1<<r,n|=t[r],e&=~i;return n}function lk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uk(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Ki(a),s=1<<o,l=i[o];l===-1?(!(s&r)||s&n)&&(i[o]=lk(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}function Cm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ub(){var t=Xd;return Xd<<=1,!(Xd&4194240)&&(Xd=64),t}function m0(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function td(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ki(e),t[e]=r}function ck(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Ki(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function m1(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ki(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var ar=0;function cb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var db,g1,fb,hb,pb,Rm=!1,Zd=[],So=null,ko=null,No=null,Pc=new Map,Tc=new Map,po=[],dk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hy(t,e){switch(t){case"focusin":case"focusout":So=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":No=null;break;case"pointerover":case"pointerout":Pc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(e.pointerId)}}function $u(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=nd(e),e!==null&&g1(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function fk(t,e,r,n,i){switch(e){case"focusin":return So=$u(So,t,e,r,n,i),!0;case"dragenter":return ko=$u(ko,t,e,r,n,i),!0;case"mouseover":return No=$u(No,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return Pc.set(a,$u(Pc.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Tc.set(a,$u(Tc.get(a)||null,t,e,r,n,i)),!0}return!1}function mb(t){var e=cs(t.target);if(e!==null){var r=As(e);if(r!==null){if(e=r.tag,e===13){if(e=nb(r),e!==null){t.blockedOn=e,pb(t.priority,function(){fb(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function If(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Im(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Om=n,r.target.dispatchEvent(n),Om=null}else return e=nd(r),e!==null&&g1(e),t.blockedOn=r,!1;e.shift()}return!0}function py(t,e,r){If(t)&&r.delete(e)}function hk(){Rm=!1,So!==null&&If(So)&&(So=null),ko!==null&&If(ko)&&(ko=null),No!==null&&If(No)&&(No=null),Pc.forEach(py),Tc.forEach(py)}function Hu(t,e){t.blockedOn===e&&(t.blockedOn=null,Rm||(Rm=!0,fi.unstable_scheduleCallback(fi.unstable_NormalPriority,hk)))}function Cc(t){function e(i){return Hu(i,t)}if(0<Zd.length){Hu(Zd[0],t);for(var r=1;r<Zd.length;r++){var n=Zd[r];n.blockedOn===t&&(n.blockedOn=null)}}for(So!==null&&Hu(So,t),ko!==null&&Hu(ko,t),No!==null&&Hu(No,t),Pc.forEach(e),Tc.forEach(e),r=0;r<po.length;r++)n=po[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<po.length&&(r=po[0],r.blockedOn===null);)mb(r),r.blockedOn===null&&po.shift()}var Cl=qa.ReactCurrentBatchConfig,lh=!0;function pk(t,e,r,n){var i=ar,a=Cl.transition;Cl.transition=null;try{ar=1,v1(t,e,r,n)}finally{ar=i,Cl.transition=a}}function mk(t,e,r,n){var i=ar,a=Cl.transition;Cl.transition=null;try{ar=4,v1(t,e,r,n)}finally{ar=i,Cl.transition=a}}function v1(t,e,r,n){if(lh){var i=Im(t,e,r,n);if(i===null)N0(t,e,n,uh,r),hy(t,n);else if(fk(i,t,e,r,n))n.stopPropagation();else if(hy(t,n),e&4&&-1<dk.indexOf(t)){for(;i!==null;){var a=nd(i);if(a!==null&&db(a),a=Im(t,e,r,n),a===null&&N0(t,e,n,uh,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else N0(t,e,n,null,r)}}var uh=null;function Im(t,e,r,n){if(uh=null,t=h1(n),t=cs(t),t!==null)if(e=As(t),e===null)t=null;else if(r=e.tag,r===13){if(t=nb(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uh=t,null}function gb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rk()){case p1:return 1;case sb:return 4;case oh:case nk:return 16;case lb:return 536870912;default:return 16}default:return 16}}var wo=null,y1=null,Df=null;function vb(){if(Df)return Df;var t,e=y1,r=e.length,n,i="value"in wo?wo.value:wo.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return Df=i.slice(t,1<n?1-n:void 0)}function Mf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ef(){return!0}function my(){return!1}function pi(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ef:my,this.isPropagationStopped=my,this}return Or(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ef)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ef)},persist:function(){},isPersistent:ef}),e}var Zl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},w1=pi(Zl),rd=Or({},Zl,{view:0,detail:0}),gk=pi(rd),g0,v0,Wu,Vh=Or({},rd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:b1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wu&&(Wu&&t.type==="mousemove"?(g0=t.screenX-Wu.screenX,v0=t.screenY-Wu.screenY):v0=g0=0,Wu=t),g0)},movementY:function(t){return"movementY"in t?t.movementY:v0}}),gy=pi(Vh),vk=Or({},Vh,{dataTransfer:0}),yk=pi(vk),wk=Or({},rd,{relatedTarget:0}),y0=pi(wk),bk=Or({},Zl,{animationName:0,elapsedTime:0,pseudoElement:0}),xk=pi(bk),_k=Or({},Zl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sk=pi(_k),kk=Or({},Zl,{data:0}),vy=pi(kk),Nk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ek={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ak={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ak[t])?!!e[t]:!1}function b1(){return jk}var Ok=Or({},rd,{key:function(t){if(t.key){var e=Nk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ek[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:b1,charCode:function(t){return t.type==="keypress"?Mf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Lk=pi(Ok),Pk=Or({},Vh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yy=pi(Pk),Tk=Or({},rd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:b1}),Ck=pi(Tk),Rk=Or({},Zl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ik=pi(Rk),Dk=Or({},Vh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mk=pi(Dk),Fk=[9,13,27,32],x1=Ma&&"CompositionEvent"in window,yc=null;Ma&&"documentMode"in document&&(yc=document.documentMode);var Bk=Ma&&"TextEvent"in window&&!yc,yb=Ma&&(!x1||yc&&8<yc&&11>=yc),wy=" ",by=!1;function wb(t,e){switch(t){case"keyup":return Fk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yl=!1;function Uk(t,e){switch(t){case"compositionend":return bb(e);case"keypress":return e.which!==32?null:(by=!0,wy);case"textInput":return t=e.data,t===wy&&by?null:t;default:return null}}function zk(t,e){if(yl)return t==="compositionend"||!x1&&wb(t,e)?(t=vb(),Df=y1=wo=null,yl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yb&&e.locale!=="ko"?null:e.data;default:return null}}var qk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qk[t.type]:e==="textarea"}function xb(t,e,r,n){Q5(n),e=ch(e,"onChange"),0<e.length&&(r=new w1("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var wc=null,Rc=null;function $k(t){Tb(t,0)}function Gh(t){var e=xl(t);if(W5(e))return t}function Hk(t,e){if(t==="change")return e}var _b=!1;if(Ma){var w0;if(Ma){var b0="oninput"in document;if(!b0){var _y=document.createElement("div");_y.setAttribute("oninput","return;"),b0=typeof _y.oninput=="function"}w0=b0}else w0=!1;_b=w0&&(!document.documentMode||9<document.documentMode)}function Sy(){wc&&(wc.detachEvent("onpropertychange",Sb),Rc=wc=null)}function Sb(t){if(t.propertyName==="value"&&Gh(Rc)){var e=[];xb(e,Rc,t,h1(t)),rb($k,e)}}function Wk(t,e,r){t==="focusin"?(Sy(),wc=e,Rc=r,wc.attachEvent("onpropertychange",Sb)):t==="focusout"&&Sy()}function Vk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gh(Rc)}function Gk(t,e){if(t==="click")return Gh(e)}function Kk(t,e){if(t==="input"||t==="change")return Gh(e)}function Yk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ji=typeof Object.is=="function"?Object.is:Yk;function Ic(t,e){if(Ji(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!vm.call(e,i)||!Ji(t[i],e[i]))return!1}return!0}function ky(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ny(t,e){var r=ky(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ky(r)}}function kb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Nb(){for(var t=window,e=nh();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=nh(t.document)}return e}function _1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Jk(t){var e=Nb(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&kb(r.ownerDocument.documentElement,r)){if(n!==null&&_1(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=Ny(r,a);var o=Ny(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xk=Ma&&"documentMode"in document&&11>=document.documentMode,wl=null,Dm=null,bc=null,Mm=!1;function Ey(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Mm||wl==null||wl!==nh(n)||(n=wl,"selectionStart"in n&&_1(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),bc&&Ic(bc,n)||(bc=n,n=ch(Dm,"onSelect"),0<n.length&&(e=new w1("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=wl)))}function tf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var bl={animationend:tf("Animation","AnimationEnd"),animationiteration:tf("Animation","AnimationIteration"),animationstart:tf("Animation","AnimationStart"),transitionend:tf("Transition","TransitionEnd")},x0={},Eb={};Ma&&(Eb=document.createElement("div").style,"AnimationEvent"in window||(delete bl.animationend.animation,delete bl.animationiteration.animation,delete bl.animationstart.animation),"TransitionEvent"in window||delete bl.transitionend.transition);function Kh(t){if(x0[t])return x0[t];if(!bl[t])return t;var e=bl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Eb)return x0[t]=e[r];return t}var Ab=Kh("animationend"),jb=Kh("animationiteration"),Ob=Kh("animationstart"),Lb=Kh("transitionend"),Pb=new Map,Ay="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Do(t,e){Pb.set(t,e),Es(e,[t])}for(var _0=0;_0<Ay.length;_0++){var S0=Ay[_0],Qk=S0.toLowerCase(),Zk=S0[0].toUpperCase()+S0.slice(1);Do(Qk,"on"+Zk)}Do(Ab,"onAnimationEnd");Do(jb,"onAnimationIteration");Do(Ob,"onAnimationStart");Do("dblclick","onDoubleClick");Do("focusin","onFocus");Do("focusout","onBlur");Do(Lb,"onTransitionEnd");ql("onMouseEnter",["mouseout","mouseover"]);ql("onMouseLeave",["mouseout","mouseover"]);ql("onPointerEnter",["pointerout","pointerover"]);ql("onPointerLeave",["pointerout","pointerover"]);Es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Es("onBeforeInput",["compositionend","keypress","textInput","paste"]);Es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eN=new Set("cancel close invalid load scroll toggle".split(" ").concat(fc));function jy(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,QS(n,e,void 0,t),t.currentTarget=null}function Tb(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;jy(i,s,u),a=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;jy(i,s,u),a=l}}}if(ah)throw t=Tm,ah=!1,Tm=null,t}function gr(t,e){var r=e[qm];r===void 0&&(r=e[qm]=new Set);var n=t+"__bubble";r.has(n)||(Cb(e,t,2,!1),r.add(n))}function k0(t,e,r){var n=0;e&&(n|=4),Cb(r,t,n,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function Dc(t){if(!t[rf]){t[rf]=!0,U5.forEach(function(r){r!=="selectionchange"&&(eN.has(r)||k0(r,!1,t),k0(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rf]||(e[rf]=!0,k0("selectionchange",!1,e))}}function Cb(t,e,r,n){switch(gb(e)){case 1:var i=pk;break;case 4:i=mk;break;default:i=v1}r=i.bind(null,e,r,t),i=void 0,!Pm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function N0(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=cs(s),o===null)return;if(l=o.tag,l===5||l===6){n=a=o;continue e}s=s.parentNode}}n=n.return}rb(function(){var u=a,h=h1(r),d=[];e:{var f=Pb.get(t);if(f!==void 0){var c=w1,y=t;switch(t){case"keypress":if(Mf(r)===0)break e;case"keydown":case"keyup":c=Lk;break;case"focusin":y="focus",c=y0;break;case"focusout":y="blur",c=y0;break;case"beforeblur":case"afterblur":c=y0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=gy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=yk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Ck;break;case Ab:case jb:case Ob:c=xk;break;case Lb:c=Ik;break;case"scroll":c=gk;break;case"wheel":c=Mk;break;case"copy":case"cut":case"paste":c=Sk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=yy}var v=(e&4)!==0,w=!v&&t==="scroll",p=v?f!==null?f+"Capture":null:f;v=[];for(var g=u,b;g!==null;){b=g;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,p!==null&&(_=Lc(g,p),_!=null&&v.push(Mc(g,_,b)))),w)break;g=g.return}0<v.length&&(f=new c(f,y,null,r,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",c=t==="mouseout"||t==="pointerout",f&&r!==Om&&(y=r.relatedTarget||r.fromElement)&&(cs(y)||y[Fa]))break e;if((c||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,c?(y=r.relatedTarget||r.toElement,c=u,y=y?cs(y):null,y!==null&&(w=As(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(c=null,y=u),c!==y)){if(v=gy,_="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=yy,_="onPointerLeave",p="onPointerEnter",g="pointer"),w=c==null?f:xl(c),b=y==null?f:xl(y),f=new v(_,g+"leave",c,r,h),f.target=w,f.relatedTarget=b,_=null,cs(h)===u&&(v=new v(p,g+"enter",y,r,h),v.target=b,v.relatedTarget=w,_=v),w=_,c&&y)t:{for(v=c,p=y,g=0,b=v;b;b=el(b))g++;for(b=0,_=p;_;_=el(_))b++;for(;0<g-b;)v=el(v),g--;for(;0<b-g;)p=el(p),b--;for(;g--;){if(v===p||p!==null&&v===p.alternate)break t;v=el(v),p=el(p)}v=null}else v=null;c!==null&&Oy(d,f,c,v,!1),y!==null&&w!==null&&Oy(d,w,y,v,!0)}}e:{if(f=u?xl(u):window,c=f.nodeName&&f.nodeName.toLowerCase(),c==="select"||c==="input"&&f.type==="file")var E=Hk;else if(xy(f))if(_b)E=Kk;else{E=Vk;var C=Wk}else(c=f.nodeName)&&c.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=Gk);if(E&&(E=E(t,u))){xb(d,E,r,h);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&km(f,"number",f.value)}switch(C=u?xl(u):window,t){case"focusin":(xy(C)||C.contentEditable==="true")&&(wl=C,Dm=u,bc=null);break;case"focusout":bc=Dm=wl=null;break;case"mousedown":Mm=!0;break;case"contextmenu":case"mouseup":case"dragend":Mm=!1,Ey(d,r,h);break;case"selectionchange":if(Xk)break;case"keydown":case"keyup":Ey(d,r,h)}var A;if(x1)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else yl?wb(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(yb&&r.locale!=="ko"&&(yl||P!=="onCompositionStart"?P==="onCompositionEnd"&&yl&&(A=vb()):(wo=h,y1="value"in wo?wo.value:wo.textContent,yl=!0)),C=ch(u,P),0<C.length&&(P=new vy(P,t,null,r,h),d.push({event:P,listeners:C}),A?P.data=A:(A=bb(r),A!==null&&(P.data=A)))),(A=Bk?Uk(t,r):zk(t,r))&&(u=ch(u,"onBeforeInput"),0<u.length&&(h=new vy("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:u}),h.data=A))}Tb(d,e)})}function Mc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ch(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Lc(t,r),a!=null&&n.unshift(Mc(t,a,i)),a=Lc(t,e),a!=null&&n.push(Mc(t,a,i))),t=t.return}return n}function el(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Oy(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,i?(l=Lc(r,a),l!=null&&o.unshift(Mc(r,l,s))):i||(l=Lc(r,a),l!=null&&o.push(Mc(r,l,s)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var tN=/\r\n?/g,rN=/\u0000|\uFFFD/g;function Ly(t){return(typeof t=="string"?t:""+t).replace(tN,`
`).replace(rN,"")}function nf(t,e,r){if(e=Ly(e),Ly(t)!==e&&r)throw Error(We(425))}function dh(){}var Fm=null,Bm=null;function Um(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zm=typeof setTimeout=="function"?setTimeout:void 0,nN=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,iN=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(t){return Py.resolve(null).then(t).catch(aN)}:zm;function aN(t){setTimeout(function(){throw t})}function E0(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Cc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Cc(e)}function Eo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ty(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var eu=Math.random().toString(36).slice(2),ua="__reactFiber$"+eu,Fc="__reactProps$"+eu,Fa="__reactContainer$"+eu,qm="__reactEvents$"+eu,oN="__reactListeners$"+eu,sN="__reactHandles$"+eu;function cs(t){var e=t[ua];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Fa]||r[ua]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Ty(t);t!==null;){if(r=t[ua])return r;t=Ty(t)}return e}t=r,r=t.parentNode}return null}function nd(t){return t=t[ua]||t[Fa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(We(33))}function Yh(t){return t[Fc]||null}var $m=[],_l=-1;function Mo(t){return{current:t}}function wr(t){0>_l||(t.current=$m[_l],$m[_l]=null,_l--)}function pr(t,e){_l++,$m[_l]=t.current,t.current=e}var To={},Sn=Mo(To),Gn=Mo(!1),ys=To;function $l(t,e){var r=t.type.contextTypes;if(!r)return To;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Kn(t){return t=t.childContextTypes,t!=null}function fh(){wr(Gn),wr(Sn)}function Cy(t,e,r){if(Sn.current!==To)throw Error(We(168));pr(Sn,e),pr(Gn,r)}function Rb(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(We(108,WS(t)||"Unknown",i));return Or({},r,n)}function hh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||To,ys=Sn.current,pr(Sn,t),pr(Gn,Gn.current),!0}function Ry(t,e,r){var n=t.stateNode;if(!n)throw Error(We(169));r?(t=Rb(t,e,ys),n.__reactInternalMemoizedMergedChildContext=t,wr(Gn),wr(Sn),pr(Sn,t)):wr(Gn),pr(Gn,r)}var Ca=null,Jh=!1,A0=!1;function Ib(t){Ca===null?Ca=[t]:Ca.push(t)}function lN(t){Jh=!0,Ib(t)}function Fo(){if(!A0&&Ca!==null){A0=!0;var t=0,e=ar;try{var r=Ca;for(ar=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Ca=null,Jh=!1}catch(i){throw Ca!==null&&(Ca=Ca.slice(t+1)),ob(p1,Fo),i}finally{ar=e,A0=!1}}return null}var Sl=[],kl=0,ph=null,mh=0,Si=[],ki=0,ws=null,Ra=1,Ia="";function Zo(t,e){Sl[kl++]=mh,Sl[kl++]=ph,ph=t,mh=e}function Db(t,e,r){Si[ki++]=Ra,Si[ki++]=Ia,Si[ki++]=ws,ws=t;var n=Ra;t=Ia;var i=32-Ki(n)-1;n&=~(1<<i),r+=1;var a=32-Ki(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Ra=1<<32-Ki(e)+i|r<<i|n,Ia=a+t}else Ra=1<<a|r<<i|n,Ia=t}function S1(t){t.return!==null&&(Zo(t,1),Db(t,1,0))}function k1(t){for(;t===ph;)ph=Sl[--kl],Sl[kl]=null,mh=Sl[--kl],Sl[kl]=null;for(;t===ws;)ws=Si[--ki],Si[ki]=null,Ia=Si[--ki],Si[ki]=null,Ra=Si[--ki],Si[ki]=null}var di=null,ui=null,xr=!1,Gi=null;function Mb(t,e){var r=Ni(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Iy(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,di=t,ui=Eo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,di=t,ui=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ws!==null?{id:Ra,overflow:Ia}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ni(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,di=t,ui=null,!0):!1;default:return!1}}function Hm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wm(t){if(xr){var e=ui;if(e){var r=e;if(!Iy(t,e)){if(Hm(t))throw Error(We(418));e=Eo(r.nextSibling);var n=di;e&&Iy(t,e)?Mb(n,r):(t.flags=t.flags&-4097|2,xr=!1,di=t)}}else{if(Hm(t))throw Error(We(418));t.flags=t.flags&-4097|2,xr=!1,di=t}}}function Dy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;di=t}function af(t){if(t!==di)return!1;if(!xr)return Dy(t),xr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Um(t.type,t.memoizedProps)),e&&(e=ui)){if(Hm(t))throw Fb(),Error(We(418));for(;e;)Mb(t,e),e=Eo(e.nextSibling)}if(Dy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(We(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ui=Eo(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ui=null}}else ui=di?Eo(t.stateNode.nextSibling):null;return!0}function Fb(){for(var t=ui;t;)t=Eo(t.nextSibling)}function Hl(){ui=di=null,xr=!1}function N1(t){Gi===null?Gi=[t]:Gi.push(t)}var uN=qa.ReactCurrentBatchConfig;function Vu(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(We(309));var n=r.stateNode}if(!n)throw Error(We(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(We(284));if(!r._owner)throw Error(We(290,t))}return t}function of(t,e){throw t=Object.prototype.toString.call(e),Error(We(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function My(t){var e=t._init;return e(t._payload)}function Bb(t){function e(p,g){if(t){var b=p.deletions;b===null?(p.deletions=[g],p.flags|=16):b.push(g)}}function r(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function n(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=Lo(p,g),p.index=0,p.sibling=null,p}function a(p,g,b){return p.index=b,t?(b=p.alternate,b!==null?(b=b.index,b<g?(p.flags|=2,g):b):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function s(p,g,b,_){return g===null||g.tag!==6?(g=R0(b,p.mode,_),g.return=p,g):(g=i(g,b),g.return=p,g)}function l(p,g,b,_){var E=b.type;return E===vl?h(p,g,b.props.children,_,b.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===fo&&My(E)===g.type)?(_=i(g,b.props),_.ref=Vu(p,g,b),_.return=p,_):(_=Hf(b.type,b.key,b.props,null,p.mode,_),_.ref=Vu(p,g,b),_.return=p,_)}function u(p,g,b,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=I0(b,p.mode,_),g.return=p,g):(g=i(g,b.children||[]),g.return=p,g)}function h(p,g,b,_,E){return g===null||g.tag!==7?(g=gs(b,p.mode,_,E),g.return=p,g):(g=i(g,b),g.return=p,g)}function d(p,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=R0(""+g,p.mode,b),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Kd:return b=Hf(g.type,g.key,g.props,null,p.mode,b),b.ref=Vu(p,null,g),b.return=p,b;case gl:return g=I0(g,p.mode,b),g.return=p,g;case fo:var _=g._init;return d(p,_(g._payload),b)}if(cc(g)||zu(g))return g=gs(g,p.mode,b,null),g.return=p,g;of(p,g)}return null}function f(p,g,b,_){var E=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:s(p,g,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Kd:return b.key===E?l(p,g,b,_):null;case gl:return b.key===E?u(p,g,b,_):null;case fo:return E=b._init,f(p,g,E(b._payload),_)}if(cc(b)||zu(b))return E!==null?null:h(p,g,b,_,null);of(p,b)}return null}function c(p,g,b,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(b)||null,s(g,p,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Kd:return p=p.get(_.key===null?b:_.key)||null,l(g,p,_,E);case gl:return p=p.get(_.key===null?b:_.key)||null,u(g,p,_,E);case fo:var C=_._init;return c(p,g,b,C(_._payload),E)}if(cc(_)||zu(_))return p=p.get(b)||null,h(g,p,_,E,null);of(g,_)}return null}function y(p,g,b,_){for(var E=null,C=null,A=g,P=g=0,F=null;A!==null&&P<b.length;P++){A.index>P?(F=A,A=null):F=A.sibling;var T=f(p,A,b[P],_);if(T===null){A===null&&(A=F);break}t&&A&&T.alternate===null&&e(p,A),g=a(T,g,P),C===null?E=T:C.sibling=T,C=T,A=F}if(P===b.length)return r(p,A),xr&&Zo(p,P),E;if(A===null){for(;P<b.length;P++)A=d(p,b[P],_),A!==null&&(g=a(A,g,P),C===null?E=A:C.sibling=A,C=A);return xr&&Zo(p,P),E}for(A=n(p,A);P<b.length;P++)F=c(A,p,P,b[P],_),F!==null&&(t&&F.alternate!==null&&A.delete(F.key===null?P:F.key),g=a(F,g,P),C===null?E=F:C.sibling=F,C=F);return t&&A.forEach(function(k){return e(p,k)}),xr&&Zo(p,P),E}function v(p,g,b,_){var E=zu(b);if(typeof E!="function")throw Error(We(150));if(b=E.call(b),b==null)throw Error(We(151));for(var C=E=null,A=g,P=g=0,F=null,T=b.next();A!==null&&!T.done;P++,T=b.next()){A.index>P?(F=A,A=null):F=A.sibling;var k=f(p,A,T.value,_);if(k===null){A===null&&(A=F);break}t&&A&&k.alternate===null&&e(p,A),g=a(k,g,P),C===null?E=k:C.sibling=k,C=k,A=F}if(T.done)return r(p,A),xr&&Zo(p,P),E;if(A===null){for(;!T.done;P++,T=b.next())T=d(p,T.value,_),T!==null&&(g=a(T,g,P),C===null?E=T:C.sibling=T,C=T);return xr&&Zo(p,P),E}for(A=n(p,A);!T.done;P++,T=b.next())T=c(A,p,P,T.value,_),T!==null&&(t&&T.alternate!==null&&A.delete(T.key===null?P:T.key),g=a(T,g,P),C===null?E=T:C.sibling=T,C=T);return t&&A.forEach(function(j){return e(p,j)}),xr&&Zo(p,P),E}function w(p,g,b,_){if(typeof b=="object"&&b!==null&&b.type===vl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Kd:e:{for(var E=b.key,C=g;C!==null;){if(C.key===E){if(E=b.type,E===vl){if(C.tag===7){r(p,C.sibling),g=i(C,b.props.children),g.return=p,p=g;break e}}else if(C.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===fo&&My(E)===C.type){r(p,C.sibling),g=i(C,b.props),g.ref=Vu(p,C,b),g.return=p,p=g;break e}r(p,C);break}else e(p,C);C=C.sibling}b.type===vl?(g=gs(b.props.children,p.mode,_,b.key),g.return=p,p=g):(_=Hf(b.type,b.key,b.props,null,p.mode,_),_.ref=Vu(p,g,b),_.return=p,p=_)}return o(p);case gl:e:{for(C=b.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){r(p,g.sibling),g=i(g,b.children||[]),g.return=p,p=g;break e}else{r(p,g);break}else e(p,g);g=g.sibling}g=I0(b,p.mode,_),g.return=p,p=g}return o(p);case fo:return C=b._init,w(p,g,C(b._payload),_)}if(cc(b))return y(p,g,b,_);if(zu(b))return v(p,g,b,_);of(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(r(p,g.sibling),g=i(g,b),g.return=p,p=g):(r(p,g),g=R0(b,p.mode,_),g.return=p,p=g),o(p)):r(p,g)}return w}var Wl=Bb(!0),Ub=Bb(!1),gh=Mo(null),vh=null,Nl=null,E1=null;function A1(){E1=Nl=vh=null}function j1(t){var e=gh.current;wr(gh),t._currentValue=e}function Vm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Rl(t,e){vh=t,E1=Nl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vn=!0),t.firstContext=null)}function Ai(t){var e=t._currentValue;if(E1!==t)if(t={context:t,memoizedValue:e,next:null},Nl===null){if(vh===null)throw Error(We(308));Nl=t,vh.dependencies={lanes:0,firstContext:t}}else Nl=Nl.next=t;return e}var ds=null;function O1(t){ds===null?ds=[t]:ds.push(t)}function zb(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,O1(e)):(r.next=i.next,i.next=r),e.interleaved=r,Ba(t,n)}function Ba(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ho=!1;function L1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Da(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ao(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Gt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ba(t,r)}return i=n.interleaved,i===null?(e.next=e,O1(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ba(t,r)}function Ff(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,m1(t,r)}}function Fy(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function yh(t,e,r,n){var i=t.updateQueue;ho=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?a=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,s=h.lastBaseUpdate,s!==o&&(s===null?h.firstBaseUpdate=u:s.next=u,h.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;o=0,h=u=l=null,s=a;do{var f=s.lane,c=s.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:c,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=t,v=s;switch(f=e,c=r,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(c,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(c,d,f):y,f==null)break e;d=Or({},d,f);break e;case 2:ho=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else c={eventTime:c,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},h===null?(u=h=c,l=d):h=h.next=c,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);xs|=o,t.lanes=o,t.memoizedState=d}}function By(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(We(191,i));i.call(n)}}}var id={},fa=Mo(id),Bc=Mo(id),Uc=Mo(id);function fs(t){if(t===id)throw Error(We(174));return t}function P1(t,e){switch(pr(Uc,e),pr(Bc,t),pr(fa,id),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Em(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Em(e,t)}wr(fa),pr(fa,e)}function Vl(){wr(fa),wr(Bc),wr(Uc)}function $b(t){fs(Uc.current);var e=fs(fa.current),r=Em(e,t.type);e!==r&&(pr(Bc,t),pr(fa,r))}function T1(t){Bc.current===t&&(wr(fa),wr(Bc))}var Er=Mo(0);function wh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var j0=[];function C1(){for(var t=0;t<j0.length;t++)j0[t]._workInProgressVersionPrimary=null;j0.length=0}var Bf=qa.ReactCurrentDispatcher,O0=qa.ReactCurrentBatchConfig,bs=0,Ar=null,Yr=null,rn=null,bh=!1,xc=!1,zc=0,cN=0;function mn(){throw Error(We(321))}function R1(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ji(t[r],e[r]))return!1;return!0}function I1(t,e,r,n,i,a){if(bs=a,Ar=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bf.current=t===null||t.memoizedState===null?pN:mN,t=r(n,i),xc){a=0;do{if(xc=!1,zc=0,25<=a)throw Error(We(301));a+=1,rn=Yr=null,e.updateQueue=null,Bf.current=gN,t=r(n,i)}while(xc)}if(Bf.current=xh,e=Yr!==null&&Yr.next!==null,bs=0,rn=Yr=Ar=null,bh=!1,e)throw Error(We(300));return t}function D1(){var t=zc!==0;return zc=0,t}function la(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Ar.memoizedState=rn=t:rn=rn.next=t,rn}function ji(){if(Yr===null){var t=Ar.alternate;t=t!==null?t.memoizedState:null}else t=Yr.next;var e=rn===null?Ar.memoizedState:rn.next;if(e!==null)rn=e,Yr=t;else{if(t===null)throw Error(We(310));Yr=t,t={memoizedState:Yr.memoizedState,baseState:Yr.baseState,baseQueue:Yr.baseQueue,queue:Yr.queue,next:null},rn===null?Ar.memoizedState=rn=t:rn=rn.next=t}return rn}function qc(t,e){return typeof e=="function"?e(t):e}function L0(t){var e=ji(),r=e.queue;if(r===null)throw Error(We(311));r.lastRenderedReducer=t;var n=Yr,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var s=o=null,l=null,u=a;do{var h=u.lane;if((bs&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=n):l=l.next=d,Ar.lanes|=h,xs|=h}u=u.next}while(u!==null&&u!==a);l===null?o=n:l.next=s,Ji(n,e.memoizedState)||(Vn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,Ar.lanes|=a,xs|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function P0(t){var e=ji(),r=e.queue;if(r===null)throw Error(We(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Ji(a,e.memoizedState)||(Vn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function Hb(){}function Wb(t,e){var r=Ar,n=ji(),i=e(),a=!Ji(n.memoizedState,i);if(a&&(n.memoizedState=i,Vn=!0),n=n.queue,M1(Kb.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||rn!==null&&rn.memoizedState.tag&1){if(r.flags|=2048,$c(9,Gb.bind(null,r,n,i,e),void 0,null),an===null)throw Error(We(349));bs&30||Vb(r,e,i)}return i}function Vb(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ar.updateQueue,e===null?(e={lastEffect:null,stores:null},Ar.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Gb(t,e,r,n){e.value=r,e.getSnapshot=n,Yb(e)&&Jb(t)}function Kb(t,e,r){return r(function(){Yb(e)&&Jb(t)})}function Yb(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ji(t,r)}catch{return!0}}function Jb(t){var e=Ba(t,1);e!==null&&Yi(e,t,1,-1)}function Uy(t){var e=la();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qc,lastRenderedState:t},e.queue=t,t=t.dispatch=hN.bind(null,Ar,t),[e.memoizedState,t]}function $c(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ar.updateQueue,e===null?(e={lastEffect:null,stores:null},Ar.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Xb(){return ji().memoizedState}function Uf(t,e,r,n){var i=la();Ar.flags|=t,i.memoizedState=$c(1|e,r,void 0,n===void 0?null:n)}function Xh(t,e,r,n){var i=ji();n=n===void 0?null:n;var a=void 0;if(Yr!==null){var o=Yr.memoizedState;if(a=o.destroy,n!==null&&R1(n,o.deps)){i.memoizedState=$c(e,r,a,n);return}}Ar.flags|=t,i.memoizedState=$c(1|e,r,a,n)}function zy(t,e){return Uf(8390656,8,t,e)}function M1(t,e){return Xh(2048,8,t,e)}function Qb(t,e){return Xh(4,2,t,e)}function Zb(t,e){return Xh(4,4,t,e)}function ex(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tx(t,e,r){return r=r!=null?r.concat([t]):null,Xh(4,4,ex.bind(null,e,t),r)}function F1(){}function rx(t,e){var r=ji();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&R1(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function nx(t,e){var r=ji();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&R1(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function ix(t,e,r){return bs&21?(Ji(r,e)||(r=ub(),Ar.lanes|=r,xs|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vn=!0),t.memoizedState=r)}function dN(t,e){var r=ar;ar=r!==0&&4>r?r:4,t(!0);var n=O0.transition;O0.transition={};try{t(!1),e()}finally{ar=r,O0.transition=n}}function ax(){return ji().memoizedState}function fN(t,e,r){var n=Oo(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ox(t))sx(e,r);else if(r=zb(t,e,r,n),r!==null){var i=Cn();Yi(r,t,n,i),lx(r,e,n)}}function hN(t,e,r){var n=Oo(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ox(t))sx(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,r);if(i.hasEagerState=!0,i.eagerState=s,Ji(s,o)){var l=e.interleaved;l===null?(i.next=i,O1(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=zb(t,e,i,n),r!==null&&(i=Cn(),Yi(r,t,n,i),lx(r,e,n))}}function ox(t){var e=t.alternate;return t===Ar||e!==null&&e===Ar}function sx(t,e){xc=bh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function lx(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,m1(t,r)}}var xh={readContext:Ai,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},pN={readContext:Ai,useCallback:function(t,e){return la().memoizedState=[t,e===void 0?null:e],t},useContext:Ai,useEffect:zy,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Uf(4194308,4,ex.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Uf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uf(4,2,t,e)},useMemo:function(t,e){var r=la();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=la();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=fN.bind(null,Ar,t),[n.memoizedState,t]},useRef:function(t){var e=la();return t={current:t},e.memoizedState=t},useState:Uy,useDebugValue:F1,useDeferredValue:function(t){return la().memoizedState=t},useTransition:function(){var t=Uy(!1),e=t[0];return t=dN.bind(null,t[1]),la().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ar,i=la();if(xr){if(r===void 0)throw Error(We(407));r=r()}else{if(r=e(),an===null)throw Error(We(349));bs&30||Vb(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,zy(Kb.bind(null,n,a,t),[t]),n.flags|=2048,$c(9,Gb.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=la(),e=an.identifierPrefix;if(xr){var r=Ia,n=Ra;r=(n&~(1<<32-Ki(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=zc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=cN++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mN={readContext:Ai,useCallback:rx,useContext:Ai,useEffect:M1,useImperativeHandle:tx,useInsertionEffect:Qb,useLayoutEffect:Zb,useMemo:nx,useReducer:L0,useRef:Xb,useState:function(){return L0(qc)},useDebugValue:F1,useDeferredValue:function(t){var e=ji();return ix(e,Yr.memoizedState,t)},useTransition:function(){var t=L0(qc)[0],e=ji().memoizedState;return[t,e]},useMutableSource:Hb,useSyncExternalStore:Wb,useId:ax,unstable_isNewReconciler:!1},gN={readContext:Ai,useCallback:rx,useContext:Ai,useEffect:M1,useImperativeHandle:tx,useInsertionEffect:Qb,useLayoutEffect:Zb,useMemo:nx,useReducer:P0,useRef:Xb,useState:function(){return P0(qc)},useDebugValue:F1,useDeferredValue:function(t){var e=ji();return Yr===null?e.memoizedState=t:ix(e,Yr.memoizedState,t)},useTransition:function(){var t=P0(qc)[0],e=ji().memoizedState;return[t,e]},useMutableSource:Hb,useSyncExternalStore:Wb,useId:ax,unstable_isNewReconciler:!1};function qi(t,e){if(t&&t.defaultProps){e=Or({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Gm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Or({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Qh={isMounted:function(t){return(t=t._reactInternals)?As(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Cn(),i=Oo(t),a=Da(n,i);a.payload=e,r!=null&&(a.callback=r),e=Ao(t,a,i),e!==null&&(Yi(e,t,i,n),Ff(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Cn(),i=Oo(t),a=Da(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Ao(t,a,i),e!==null&&(Yi(e,t,i,n),Ff(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Cn(),n=Oo(t),i=Da(r,n);i.tag=2,e!=null&&(i.callback=e),e=Ao(t,i,n),e!==null&&(Yi(e,t,n,r),Ff(e,t,n))}};function qy(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Ic(r,n)||!Ic(i,a):!0}function ux(t,e,r){var n=!1,i=To,a=e.contextType;return typeof a=="object"&&a!==null?a=Ai(a):(i=Kn(e)?ys:Sn.current,n=e.contextTypes,a=(n=n!=null)?$l(t,i):To),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qh,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function $y(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Qh.enqueueReplaceState(e,e.state,null)}function Km(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},L1(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Ai(a):(a=Kn(e)?ys:Sn.current,i.context=$l(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Gm(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Qh.enqueueReplaceState(i,i.state,null),yh(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gl(t,e){try{var r="",n=e;do r+=HS(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function T0(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Ym(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var vN=typeof WeakMap=="function"?WeakMap:Map;function cx(t,e,r){r=Da(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Sh||(Sh=!0,ag=n),Ym(t,e)},r}function dx(t,e,r){r=Da(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Ym(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Ym(t,e),typeof n!="function"&&(jo===null?jo=new Set([this]):jo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Hy(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new vN;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=PN.bind(null,t,e,r),e.then(t,t))}function Wy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Vy(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Da(-1,1),e.tag=2,Ao(r,e,1))),r.lanes|=1),t)}var yN=qa.ReactCurrentOwner,Vn=!1;function Ln(t,e,r,n){e.child=t===null?Ub(e,null,r,n):Wl(e,t.child,r,n)}function Gy(t,e,r,n,i){r=r.render;var a=e.ref;return Rl(e,i),n=I1(t,e,r,n,a,i),r=D1(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ua(t,e,i)):(xr&&r&&S1(e),e.flags|=1,Ln(t,e,n,i),e.child)}function Ky(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!V1(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,fx(t,e,a,n,i)):(t=Hf(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Ic,r(o,n)&&t.ref===e.ref)return Ua(t,e,i)}return e.flags|=1,t=Lo(a,n),t.ref=e.ref,t.return=e,e.child=t}function fx(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(Ic(a,n)&&t.ref===e.ref)if(Vn=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(Vn=!0);else return e.lanes=t.lanes,Ua(t,e,i)}return Jm(t,e,r,n,i)}function hx(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pr(Al,ii),ii|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pr(Al,ii),ii|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,pr(Al,ii),ii|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,pr(Al,ii),ii|=n;return Ln(t,e,i,r),e.child}function px(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Jm(t,e,r,n,i){var a=Kn(r)?ys:Sn.current;return a=$l(e,a),Rl(e,i),r=I1(t,e,r,n,a,i),n=D1(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ua(t,e,i)):(xr&&n&&S1(e),e.flags|=1,Ln(t,e,r,i),e.child)}function Yy(t,e,r,n,i){if(Kn(r)){var a=!0;hh(e)}else a=!1;if(Rl(e,i),e.stateNode===null)zf(t,e),ux(e,r,n),Km(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ai(u):(u=Kn(r)?ys:Sn.current,u=$l(e,u));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==u)&&$y(e,o,n,u),ho=!1;var f=e.memoizedState;o.state=f,yh(e,n,o,i),l=e.memoizedState,s!==n||f!==l||Gn.current||ho?(typeof h=="function"&&(Gm(e,r,h,n),l=e.memoizedState),(s=ho||qy(e,r,s,n,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,qb(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:qi(e.type,s),o.props=u,d=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ai(l):(l=Kn(r)?ys:Sn.current,l=$l(e,l));var c=r.getDerivedStateFromProps;(h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||f!==l)&&$y(e,o,n,l),ho=!1,f=e.memoizedState,o.state=f,yh(e,n,o,i);var y=e.memoizedState;s!==d||f!==y||Gn.current||ho?(typeof c=="function"&&(Gm(e,r,c,n),y=e.memoizedState),(u=ho||qy(e,r,u,n,f,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),o.props=n,o.state=y,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Xm(t,e,r,n,a,i)}function Xm(t,e,r,n,i,a){px(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Ry(e,r,!1),Ua(t,e,a);n=e.stateNode,yN.current=e;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Wl(e,t.child,null,a),e.child=Wl(e,null,s,a)):Ln(t,e,s,a),e.memoizedState=n.state,i&&Ry(e,r,!0),e.child}function mx(t){var e=t.stateNode;e.pendingContext?Cy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cy(t,e.context,!1),P1(t,e.containerInfo)}function Jy(t,e,r,n,i){return Hl(),N1(i),e.flags|=256,Ln(t,e,r,n),e.child}var Qm={dehydrated:null,treeContext:null,retryLane:0};function Zm(t){return{baseLanes:t,cachePool:null,transitions:null}}function gx(t,e,r){var n=e.pendingProps,i=Er.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),pr(Er,i&1),t===null)return Wm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=tp(o,n,0,null),t=gs(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Zm(r),e.memoizedState=Qm,t):B1(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return wN(t,e,o,n,s,i,r);if(a){a=n.fallback,o=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Lo(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=Lo(s,a):(a=gs(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?Zm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Qm,n}return a=t.child,t=a.sibling,n=Lo(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function B1(t,e){return e=tp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function sf(t,e,r,n){return n!==null&&N1(n),Wl(e,t.child,null,r),t=B1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wN(t,e,r,n,i,a,o){if(r)return e.flags&256?(e.flags&=-257,n=T0(Error(We(422))),sf(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=tp({mode:"visible",children:n.children},i,0,null),a=gs(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Wl(e,t.child,null,o),e.child.memoizedState=Zm(o),e.memoizedState=Qm,a);if(!(e.mode&1))return sf(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,a=Error(We(419)),n=T0(a,n,void 0),sf(t,e,o,n)}if(s=(o&t.childLanes)!==0,Vn||s){if(n=an,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ba(t,i),Yi(n,t,i,-1))}return W1(),n=T0(Error(We(421))),sf(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=TN.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ui=Eo(i.nextSibling),di=e,xr=!0,Gi=null,t!==null&&(Si[ki++]=Ra,Si[ki++]=Ia,Si[ki++]=ws,Ra=t.id,Ia=t.overflow,ws=e),e=B1(e,n.children),e.flags|=4096,e)}function Xy(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Vm(t.return,e,r)}function C0(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function vx(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Ln(t,e,n.children,r),n=Er.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xy(t,r,e);else if(t.tag===19)Xy(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(pr(Er,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&wh(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),C0(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&wh(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}C0(e,!0,r,null,a);break;case"together":C0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ua(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),xs|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(We(153));if(e.child!==null){for(t=e.child,r=Lo(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Lo(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function bN(t,e,r){switch(e.tag){case 3:mx(e),Hl();break;case 5:$b(e);break;case 1:Kn(e.type)&&hh(e);break;case 4:P1(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;pr(gh,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(pr(Er,Er.current&1),e.flags|=128,null):r&e.child.childLanes?gx(t,e,r):(pr(Er,Er.current&1),t=Ua(t,e,r),t!==null?t.sibling:null);pr(Er,Er.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return vx(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pr(Er,Er.current),n)break;return null;case 22:case 23:return e.lanes=0,hx(t,e,r)}return Ua(t,e,r)}var yx,eg,wx,bx;yx=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};eg=function(){};wx=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,fs(fa.current);var a=null;switch(r){case"input":i=_m(t,i),n=_m(t,n),a=[];break;case"select":i=Or({},i,{value:void 0}),n=Or({},n,{value:void 0}),a=[];break;case"textarea":i=Nm(t,i),n=Nm(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=dh)}Am(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(jc.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(s=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(a||(a=[]),a.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(jc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&gr("scroll",t),a||s===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};bx=function(t,e,r,n){r!==n&&(e.flags|=4)};function Gu(t,e){if(!xr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function gn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function xN(t,e,r){var n=e.pendingProps;switch(k1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(e),null;case 1:return Kn(e.type)&&fh(),gn(e),null;case 3:return n=e.stateNode,Vl(),wr(Gn),wr(Sn),C1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(af(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gi!==null&&(lg(Gi),Gi=null))),eg(t,e),gn(e),null;case 5:T1(e);var i=fs(Uc.current);if(r=e.type,t!==null&&e.stateNode!=null)wx(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(We(166));return gn(e),null}if(t=fs(fa.current),af(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[ua]=e,n[Fc]=a,t=(e.mode&1)!==0,r){case"dialog":gr("cancel",n),gr("close",n);break;case"iframe":case"object":case"embed":gr("load",n);break;case"video":case"audio":for(i=0;i<fc.length;i++)gr(fc[i],n);break;case"source":gr("error",n);break;case"img":case"image":case"link":gr("error",n),gr("load",n);break;case"details":gr("toggle",n);break;case"input":oy(n,a),gr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},gr("invalid",n);break;case"textarea":ly(n,a),gr("invalid",n)}Am(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?n.textContent!==s&&(a.suppressHydrationWarning!==!0&&nf(n.textContent,s,t),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&nf(n.textContent,s,t),i=["children",""+s]):jc.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&gr("scroll",n)}switch(r){case"input":Yd(n),sy(n,a,!0);break;case"textarea":Yd(n),uy(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=dh)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=K5(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[ua]=e,t[Fc]=n,yx(t,e,!1,!1),e.stateNode=t;e:{switch(o=jm(r,n),r){case"dialog":gr("cancel",t),gr("close",t),i=n;break;case"iframe":case"object":case"embed":gr("load",t),i=n;break;case"video":case"audio":for(i=0;i<fc.length;i++)gr(fc[i],t);i=n;break;case"source":gr("error",t),i=n;break;case"img":case"image":case"link":gr("error",t),gr("load",t),i=n;break;case"details":gr("toggle",t),i=n;break;case"input":oy(t,n),i=_m(t,n),gr("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Or({},n,{value:void 0}),gr("invalid",t);break;case"textarea":ly(t,n),i=Nm(t,n),gr("invalid",t);break;default:i=n}Am(r,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?X5(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Y5(t,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Oc(t,l):typeof l=="number"&&Oc(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(jc.hasOwnProperty(a)?l!=null&&a==="onScroll"&&gr("scroll",t):l!=null&&u1(t,a,l,o))}switch(r){case"input":Yd(t),sy(t,n,!1);break;case"textarea":Yd(t),uy(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Po(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Ll(t,!!n.multiple,a,!1):n.defaultValue!=null&&Ll(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=dh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gn(e),null;case 6:if(t&&e.stateNode!=null)bx(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(We(166));if(r=fs(Uc.current),fs(fa.current),af(e)){if(n=e.stateNode,r=e.memoizedProps,n[ua]=e,(a=n.nodeValue!==r)&&(t=di,t!==null))switch(t.tag){case 3:nf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nf(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ua]=e,e.stateNode=n}return gn(e),null;case 13:if(wr(Er),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xr&&ui!==null&&e.mode&1&&!(e.flags&128))Fb(),Hl(),e.flags|=98560,a=!1;else if(a=af(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(We(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(We(317));a[ua]=e}else Hl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gn(e),a=!1}else Gi!==null&&(lg(Gi),Gi=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Er.current&1?Jr===0&&(Jr=3):W1())),e.updateQueue!==null&&(e.flags|=4),gn(e),null);case 4:return Vl(),eg(t,e),t===null&&Dc(e.stateNode.containerInfo),gn(e),null;case 10:return j1(e.type._context),gn(e),null;case 17:return Kn(e.type)&&fh(),gn(e),null;case 19:if(wr(Er),a=e.memoizedState,a===null)return gn(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Gu(a,!1);else{if(Jr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wh(t),o!==null){for(e.flags|=128,Gu(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return pr(Er,Er.current&1|2),e.child}t=t.sibling}a.tail!==null&&Dr()>Kl&&(e.flags|=128,n=!0,Gu(a,!1),e.lanes=4194304)}else{if(!n)if(t=wh(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Gu(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!xr)return gn(e),null}else 2*Dr()-a.renderingStartTime>Kl&&r!==1073741824&&(e.flags|=128,n=!0,Gu(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Dr(),e.sibling=null,r=Er.current,pr(Er,n?r&1|2:r&1),e):(gn(e),null);case 22:case 23:return H1(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ii&1073741824&&(gn(e),e.subtreeFlags&6&&(e.flags|=8192)):gn(e),null;case 24:return null;case 25:return null}throw Error(We(156,e.tag))}function _N(t,e){switch(k1(e),e.tag){case 1:return Kn(e.type)&&fh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vl(),wr(Gn),wr(Sn),C1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return T1(e),null;case 13:if(wr(Er),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(We(340));Hl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return wr(Er),null;case 4:return Vl(),null;case 10:return j1(e.type._context),null;case 22:case 23:return H1(),null;case 24:return null;default:return null}}var lf=!1,xn=!1,SN=typeof WeakSet=="function"?WeakSet:Set,ct=null;function El(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Cr(t,e,n)}else r.current=null}function tg(t,e,r){try{r()}catch(n){Cr(t,e,n)}}var Qy=!1;function kN(t,e){if(Fm=lh,t=Nb(),_1(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var c;d!==r||i!==0&&d.nodeType!==3||(s=o+i),d!==a||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(c=d.firstChild)!==null;)f=d,d=c;for(;;){if(d===t)break t;if(f===r&&++u===i&&(s=o),f===a&&++h===n&&(l=o),(c=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=c}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Bm={focusedElem:t,selectionRange:r},lh=!1,ct=e;ct!==null;)if(e=ct,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ct=t;else for(;ct!==null;){e=ct;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,w=y.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:qi(e.type,v),w);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(We(163))}}catch(_){Cr(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,ct=t;break}ct=e.return}return y=Qy,Qy=!1,y}function _c(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&tg(e,r,a)}i=i.next}while(i!==n)}}function Zh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function rg(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function xx(t){var e=t.alternate;e!==null&&(t.alternate=null,xx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ua],delete e[Fc],delete e[qm],delete e[oN],delete e[sN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _x(t){return t.tag===5||t.tag===3||t.tag===4}function Zy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_x(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ng(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=dh));else if(n!==4&&(t=t.child,t!==null))for(ng(t,e,r),t=t.sibling;t!==null;)ng(t,e,r),t=t.sibling}function ig(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(ig(t,e,r),t=t.sibling;t!==null;)ig(t,e,r),t=t.sibling}var un=null,Wi=!1;function oo(t,e,r){for(r=r.child;r!==null;)Sx(t,e,r),r=r.sibling}function Sx(t,e,r){if(da&&typeof da.onCommitFiberUnmount=="function")try{da.onCommitFiberUnmount(Wh,r)}catch{}switch(r.tag){case 5:xn||El(r,e);case 6:var n=un,i=Wi;un=null,oo(t,e,r),un=n,Wi=i,un!==null&&(Wi?(t=un,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):un.removeChild(r.stateNode));break;case 18:un!==null&&(Wi?(t=un,r=r.stateNode,t.nodeType===8?E0(t.parentNode,r):t.nodeType===1&&E0(t,r),Cc(t)):E0(un,r.stateNode));break;case 4:n=un,i=Wi,un=r.stateNode.containerInfo,Wi=!0,oo(t,e,r),un=n,Wi=i;break;case 0:case 11:case 14:case 15:if(!xn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&tg(r,e,o),i=i.next}while(i!==n)}oo(t,e,r);break;case 1:if(!xn&&(El(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Cr(r,e,s)}oo(t,e,r);break;case 21:oo(t,e,r);break;case 22:r.mode&1?(xn=(n=xn)||r.memoizedState!==null,oo(t,e,r),xn=n):oo(t,e,r);break;default:oo(t,e,r)}}function e2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new SN),e.forEach(function(n){var i=CN.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Mi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:un=s.stateNode,Wi=!1;break e;case 3:un=s.stateNode.containerInfo,Wi=!0;break e;case 4:un=s.stateNode.containerInfo,Wi=!0;break e}s=s.return}if(un===null)throw Error(We(160));Sx(a,o,i),un=null,Wi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Cr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kx(e,t),e=e.sibling}function kx(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mi(e,t),aa(t),n&4){try{_c(3,t,t.return),Zh(3,t)}catch(v){Cr(t,t.return,v)}try{_c(5,t,t.return)}catch(v){Cr(t,t.return,v)}}break;case 1:Mi(e,t),aa(t),n&512&&r!==null&&El(r,r.return);break;case 5:if(Mi(e,t),aa(t),n&512&&r!==null&&El(r,r.return),t.flags&32){var i=t.stateNode;try{Oc(i,"")}catch(v){Cr(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&V5(i,a),jm(s,o);var u=jm(s,a);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?X5(i,d):h==="dangerouslySetInnerHTML"?Y5(i,d):h==="children"?Oc(i,d):u1(i,h,d,u)}switch(s){case"input":Sm(i,a);break;case"textarea":G5(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var c=a.value;c!=null?Ll(i,!!a.multiple,c,!1):f!==!!a.multiple&&(a.defaultValue!=null?Ll(i,!!a.multiple,a.defaultValue,!0):Ll(i,!!a.multiple,a.multiple?[]:"",!1))}i[Fc]=a}catch(v){Cr(t,t.return,v)}}break;case 6:if(Mi(e,t),aa(t),n&4){if(t.stateNode===null)throw Error(We(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){Cr(t,t.return,v)}}break;case 3:if(Mi(e,t),aa(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Cc(e.containerInfo)}catch(v){Cr(t,t.return,v)}break;case 4:Mi(e,t),aa(t);break;case 13:Mi(e,t),aa(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(q1=Dr())),n&4&&e2(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(xn=(u=xn)||h,Mi(e,t),xn=u):Mi(e,t),aa(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ct=t,h=t.child;h!==null;){for(d=ct=h;ct!==null;){switch(f=ct,c=f.child,f.tag){case 0:case 11:case 14:case 15:_c(4,f,f.return);break;case 1:El(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Cr(n,r,v)}}break;case 5:El(f,f.return);break;case 22:if(f.memoizedState!==null){r2(d);continue}}c!==null?(c.return=f,ct=c):r2(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=J5("display",o))}catch(v){Cr(t,t.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){Cr(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Mi(e,t),aa(t),n&4&&e2(t);break;case 21:break;default:Mi(e,t),aa(t)}}function aa(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(_x(r)){var n=r;break e}r=r.return}throw Error(We(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Oc(i,""),n.flags&=-33);var a=Zy(t);ig(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,s=Zy(t);ng(t,s,o);break;default:throw Error(We(161))}}catch(l){Cr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NN(t,e,r){ct=t,Nx(t)}function Nx(t,e,r){for(var n=(t.mode&1)!==0;ct!==null;){var i=ct,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||lf;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||xn;s=lf;var u=xn;if(lf=o,(xn=l)&&!u)for(ct=i;ct!==null;)o=ct,l=o.child,o.tag===22&&o.memoizedState!==null?n2(i):l!==null?(l.return=o,ct=l):n2(i);for(;a!==null;)ct=a,Nx(a),a=a.sibling;ct=i,lf=s,xn=u}t2(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ct=a):t2(t)}}function t2(t){for(;ct!==null;){var e=ct;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xn||Zh(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!xn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:qi(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&By(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}By(e,o,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Cc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(We(163))}xn||e.flags&512&&rg(e)}catch(f){Cr(e,e.return,f)}}if(e===t){ct=null;break}if(r=e.sibling,r!==null){r.return=e.return,ct=r;break}ct=e.return}}function r2(t){for(;ct!==null;){var e=ct;if(e===t){ct=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ct=r;break}ct=e.return}}function n2(t){for(;ct!==null;){var e=ct;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Zh(4,e)}catch(l){Cr(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Cr(e,i,l)}}var a=e.return;try{rg(e)}catch(l){Cr(e,a,l)}break;case 5:var o=e.return;try{rg(e)}catch(l){Cr(e,o,l)}}}catch(l){Cr(e,e.return,l)}if(e===t){ct=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ct=s;break}ct=e.return}}var EN=Math.ceil,_h=qa.ReactCurrentDispatcher,U1=qa.ReactCurrentOwner,Ei=qa.ReactCurrentBatchConfig,Gt=0,an=null,Vr=null,cn=0,ii=0,Al=Mo(0),Jr=0,Hc=null,xs=0,ep=0,z1=0,Sc=null,Wn=null,q1=0,Kl=1/0,Pa=null,Sh=!1,ag=null,jo=null,uf=!1,bo=null,kh=0,kc=0,og=null,qf=-1,$f=0;function Cn(){return Gt&6?Dr():qf!==-1?qf:qf=Dr()}function Oo(t){return t.mode&1?Gt&2&&cn!==0?cn&-cn:uN.transition!==null?($f===0&&($f=ub()),$f):(t=ar,t!==0||(t=window.event,t=t===void 0?16:gb(t.type)),t):1}function Yi(t,e,r,n){if(50<kc)throw kc=0,og=null,Error(We(185));td(t,r,n),(!(Gt&2)||t!==an)&&(t===an&&(!(Gt&2)&&(ep|=r),Jr===4&&mo(t,cn)),Yn(t,n),r===1&&Gt===0&&!(e.mode&1)&&(Kl=Dr()+500,Jh&&Fo()))}function Yn(t,e){var r=t.callbackNode;uk(t,e);var n=sh(t,t===an?cn:0);if(n===0)r!==null&&fy(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&fy(r),e===1)t.tag===0?lN(i2.bind(null,t)):Ib(i2.bind(null,t)),iN(function(){!(Gt&6)&&Fo()}),r=null;else{switch(cb(n)){case 1:r=p1;break;case 4:r=sb;break;case 16:r=oh;break;case 536870912:r=lb;break;default:r=oh}r=Cx(r,Ex.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Ex(t,e){if(qf=-1,$f=0,Gt&6)throw Error(We(327));var r=t.callbackNode;if(Il()&&t.callbackNode!==r)return null;var n=sh(t,t===an?cn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Nh(t,n);else{e=n;var i=Gt;Gt|=2;var a=jx();(an!==t||cn!==e)&&(Pa=null,Kl=Dr()+500,ms(t,e));do try{ON();break}catch(s){Ax(t,s)}while(!0);A1(),_h.current=a,Gt=i,Vr!==null?e=0:(an=null,cn=0,e=Jr)}if(e!==0){if(e===2&&(i=Cm(t),i!==0&&(n=i,e=sg(t,i))),e===1)throw r=Hc,ms(t,0),mo(t,n),Yn(t,Dr()),r;if(e===6)mo(t,n);else{if(i=t.current.alternate,!(n&30)&&!AN(i)&&(e=Nh(t,n),e===2&&(a=Cm(t),a!==0&&(n=a,e=sg(t,a))),e===1))throw r=Hc,ms(t,0),mo(t,n),Yn(t,Dr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(We(345));case 2:es(t,Wn,Pa);break;case 3:if(mo(t,n),(n&130023424)===n&&(e=q1+500-Dr(),10<e)){if(sh(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Cn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zm(es.bind(null,t,Wn,Pa),e);break}es(t,Wn,Pa);break;case 4:if(mo(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Ki(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=Dr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*EN(n/1960))-n,10<n){t.timeoutHandle=zm(es.bind(null,t,Wn,Pa),n);break}es(t,Wn,Pa);break;case 5:es(t,Wn,Pa);break;default:throw Error(We(329))}}}return Yn(t,Dr()),t.callbackNode===r?Ex.bind(null,t):null}function sg(t,e){var r=Sc;return t.current.memoizedState.isDehydrated&&(ms(t,e).flags|=256),t=Nh(t,e),t!==2&&(e=Wn,Wn=r,e!==null&&lg(e)),t}function lg(t){Wn===null?Wn=t:Wn.push.apply(Wn,t)}function AN(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Ji(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mo(t,e){for(e&=~z1,e&=~ep,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ki(e),n=1<<r;t[r]=-1,e&=~n}}function i2(t){if(Gt&6)throw Error(We(327));Il();var e=sh(t,0);if(!(e&1))return Yn(t,Dr()),null;var r=Nh(t,e);if(t.tag!==0&&r===2){var n=Cm(t);n!==0&&(e=n,r=sg(t,n))}if(r===1)throw r=Hc,ms(t,0),mo(t,e),Yn(t,Dr()),r;if(r===6)throw Error(We(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,es(t,Wn,Pa),Yn(t,Dr()),null}function $1(t,e){var r=Gt;Gt|=1;try{return t(e)}finally{Gt=r,Gt===0&&(Kl=Dr()+500,Jh&&Fo())}}function _s(t){bo!==null&&bo.tag===0&&!(Gt&6)&&Il();var e=Gt;Gt|=1;var r=Ei.transition,n=ar;try{if(Ei.transition=null,ar=1,t)return t()}finally{ar=n,Ei.transition=r,Gt=e,!(Gt&6)&&Fo()}}function H1(){ii=Al.current,wr(Al)}function ms(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,nN(r)),Vr!==null)for(r=Vr.return;r!==null;){var n=r;switch(k1(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&fh();break;case 3:Vl(),wr(Gn),wr(Sn),C1();break;case 5:T1(n);break;case 4:Vl();break;case 13:wr(Er);break;case 19:wr(Er);break;case 10:j1(n.type._context);break;case 22:case 23:H1()}r=r.return}if(an=t,Vr=t=Lo(t.current,null),cn=ii=e,Jr=0,Hc=null,z1=ep=xs=0,Wn=Sc=null,ds!==null){for(e=0;e<ds.length;e++)if(r=ds[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}ds=null}return t}function Ax(t,e){do{var r=Vr;try{if(A1(),Bf.current=xh,bh){for(var n=Ar.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}bh=!1}if(bs=0,rn=Yr=Ar=null,xc=!1,zc=0,U1.current=null,r===null||r.return===null){Jr=1,Hc=e,Vr=null;break}e:{var a=t,o=r.return,s=r,l=e;if(e=cn,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=s,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var c=Wy(o);if(c!==null){c.flags&=-257,Vy(c,o,s,a,e),c.mode&1&&Hy(a,u,e),e=c,l=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){Hy(a,u,e),W1();break e}l=Error(We(426))}}else if(xr&&s.mode&1){var w=Wy(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Vy(w,o,s,a,e),N1(Gl(l,s));break e}}a=l=Gl(l,s),Jr!==4&&(Jr=2),Sc===null?Sc=[a]:Sc.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var p=cx(a,l,e);Fy(a,p);break e;case 1:s=l;var g=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(jo===null||!jo.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var _=dx(a,s,e);Fy(a,_);break e}}a=a.return}while(a!==null)}Lx(r)}catch(E){e=E,Vr===r&&r!==null&&(Vr=r=r.return);continue}break}while(!0)}function jx(){var t=_h.current;return _h.current=xh,t===null?xh:t}function W1(){(Jr===0||Jr===3||Jr===2)&&(Jr=4),an===null||!(xs&268435455)&&!(ep&268435455)||mo(an,cn)}function Nh(t,e){var r=Gt;Gt|=2;var n=jx();(an!==t||cn!==e)&&(Pa=null,ms(t,e));do try{jN();break}catch(i){Ax(t,i)}while(!0);if(A1(),Gt=r,_h.current=n,Vr!==null)throw Error(We(261));return an=null,cn=0,Jr}function jN(){for(;Vr!==null;)Ox(Vr)}function ON(){for(;Vr!==null&&!ek();)Ox(Vr)}function Ox(t){var e=Tx(t.alternate,t,ii);t.memoizedProps=t.pendingProps,e===null?Lx(t):Vr=e,U1.current=null}function Lx(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=_N(r,e),r!==null){r.flags&=32767,Vr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Jr=6,Vr=null;return}}else if(r=xN(r,e,ii),r!==null){Vr=r;return}if(e=e.sibling,e!==null){Vr=e;return}Vr=e=t}while(e!==null);Jr===0&&(Jr=5)}function es(t,e,r){var n=ar,i=Ei.transition;try{Ei.transition=null,ar=1,LN(t,e,r,n)}finally{Ei.transition=i,ar=n}return null}function LN(t,e,r,n){do Il();while(bo!==null);if(Gt&6)throw Error(We(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(We(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(ck(t,a),t===an&&(Vr=an=null,cn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||uf||(uf=!0,Cx(oh,function(){return Il(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ei.transition,Ei.transition=null;var o=ar;ar=1;var s=Gt;Gt|=4,U1.current=null,kN(t,r),kx(r,t),Jk(Bm),lh=!!Fm,Bm=Fm=null,t.current=r,NN(r),tk(),Gt=s,ar=o,Ei.transition=a}else t.current=r;if(uf&&(uf=!1,bo=t,kh=i),a=t.pendingLanes,a===0&&(jo=null),ik(r.stateNode),Yn(t,Dr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Sh)throw Sh=!1,t=ag,ag=null,t;return kh&1&&t.tag!==0&&Il(),a=t.pendingLanes,a&1?t===og?kc++:(kc=0,og=t):kc=0,Fo(),null}function Il(){if(bo!==null){var t=cb(kh),e=Ei.transition,r=ar;try{if(Ei.transition=null,ar=16>t?16:t,bo===null)var n=!1;else{if(t=bo,bo=null,kh=0,Gt&6)throw Error(We(331));var i=Gt;for(Gt|=4,ct=t.current;ct!==null;){var a=ct,o=a.child;if(ct.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(ct=u;ct!==null;){var h=ct;switch(h.tag){case 0:case 11:case 15:_c(8,h,a)}var d=h.child;if(d!==null)d.return=h,ct=d;else for(;ct!==null;){h=ct;var f=h.sibling,c=h.return;if(xx(h),h===u){ct=null;break}if(f!==null){f.return=c,ct=f;break}ct=c}}}var y=a.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}ct=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ct=o;else e:for(;ct!==null;){if(a=ct,a.flags&2048)switch(a.tag){case 0:case 11:case 15:_c(9,a,a.return)}var p=a.sibling;if(p!==null){p.return=a.return,ct=p;break e}ct=a.return}}var g=t.current;for(ct=g;ct!==null;){o=ct;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ct=b;else e:for(o=g;ct!==null;){if(s=ct,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Zh(9,s)}}catch(E){Cr(s,s.return,E)}if(s===o){ct=null;break e}var _=s.sibling;if(_!==null){_.return=s.return,ct=_;break e}ct=s.return}}if(Gt=i,Fo(),da&&typeof da.onPostCommitFiberRoot=="function")try{da.onPostCommitFiberRoot(Wh,t)}catch{}n=!0}return n}finally{ar=r,Ei.transition=e}}return!1}function a2(t,e,r){e=Gl(r,e),e=cx(t,e,1),t=Ao(t,e,1),e=Cn(),t!==null&&(td(t,1,e),Yn(t,e))}function Cr(t,e,r){if(t.tag===3)a2(t,t,r);else for(;e!==null;){if(e.tag===3){a2(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(jo===null||!jo.has(n))){t=Gl(r,t),t=dx(e,t,1),e=Ao(e,t,1),t=Cn(),e!==null&&(td(e,1,t),Yn(e,t));break}}e=e.return}}function PN(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Cn(),t.pingedLanes|=t.suspendedLanes&r,an===t&&(cn&r)===r&&(Jr===4||Jr===3&&(cn&130023424)===cn&&500>Dr()-q1?ms(t,0):z1|=r),Yn(t,e)}function Px(t,e){e===0&&(t.mode&1?(e=Qd,Qd<<=1,!(Qd&130023424)&&(Qd=4194304)):e=1);var r=Cn();t=Ba(t,e),t!==null&&(td(t,e,r),Yn(t,r))}function TN(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Px(t,r)}function CN(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(We(314))}n!==null&&n.delete(e),Px(t,r)}var Tx;Tx=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gn.current)Vn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Vn=!1,bN(t,e,r);Vn=!!(t.flags&131072)}else Vn=!1,xr&&e.flags&1048576&&Db(e,mh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;zf(t,e),t=e.pendingProps;var i=$l(e,Sn.current);Rl(e,r),i=I1(null,e,n,t,i,r);var a=D1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kn(n)?(a=!0,hh(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,L1(e),i.updater=Qh,e.stateNode=i,i._reactInternals=e,Km(e,n,t,r),e=Xm(null,e,n,!0,a,r)):(e.tag=0,xr&&a&&S1(e),Ln(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(zf(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=IN(n),t=qi(n,t),i){case 0:e=Jm(null,e,n,t,r);break e;case 1:e=Yy(null,e,n,t,r);break e;case 11:e=Gy(null,e,n,t,r);break e;case 14:e=Ky(null,e,n,qi(n.type,t),r);break e}throw Error(We(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:qi(n,i),Jm(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:qi(n,i),Yy(t,e,n,i,r);case 3:e:{if(mx(e),t===null)throw Error(We(387));n=e.pendingProps,a=e.memoizedState,i=a.element,qb(t,e),yh(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Gl(Error(We(423)),e),e=Jy(t,e,n,r,i);break e}else if(n!==i){i=Gl(Error(We(424)),e),e=Jy(t,e,n,r,i);break e}else for(ui=Eo(e.stateNode.containerInfo.firstChild),di=e,xr=!0,Gi=null,r=Ub(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Hl(),n===i){e=Ua(t,e,r);break e}Ln(t,e,n,r)}e=e.child}return e;case 5:return $b(e),t===null&&Wm(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Um(n,i)?o=null:a!==null&&Um(n,a)&&(e.flags|=32),px(t,e),Ln(t,e,o,r),e.child;case 6:return t===null&&Wm(e),null;case 13:return gx(t,e,r);case 4:return P1(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Wl(e,null,n,r):Ln(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:qi(n,i),Gy(t,e,n,i,r);case 7:return Ln(t,e,e.pendingProps,r),e.child;case 8:return Ln(t,e,e.pendingProps.children,r),e.child;case 12:return Ln(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,pr(gh,n._currentValue),n._currentValue=o,a!==null)if(Ji(a.value,o)){if(a.children===i.children&&!Gn.current){e=Ua(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=Da(-1,r&-r),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Vm(a.return,r,e),s.lanes|=r;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(We(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),Vm(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Ln(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Rl(e,r),i=Ai(i),n=n(i),e.flags|=1,Ln(t,e,n,r),e.child;case 14:return n=e.type,i=qi(n,e.pendingProps),i=qi(n.type,i),Ky(t,e,n,i,r);case 15:return fx(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:qi(n,i),zf(t,e),e.tag=1,Kn(n)?(t=!0,hh(e)):t=!1,Rl(e,r),ux(e,n,i),Km(e,n,i,r),Xm(null,e,n,!0,t,r);case 19:return vx(t,e,r);case 22:return hx(t,e,r)}throw Error(We(156,e.tag))};function Cx(t,e){return ob(t,e)}function RN(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ni(t,e,r,n){return new RN(t,e,r,n)}function V1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function IN(t){if(typeof t=="function")return V1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===d1)return 11;if(t===f1)return 14}return 2}function Lo(t,e){var r=t.alternate;return r===null?(r=Ni(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Hf(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")V1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vl:return gs(r.children,i,a,e);case c1:o=8,i|=8;break;case ym:return t=Ni(12,r,e,i|2),t.elementType=ym,t.lanes=a,t;case wm:return t=Ni(13,r,e,i),t.elementType=wm,t.lanes=a,t;case bm:return t=Ni(19,r,e,i),t.elementType=bm,t.lanes=a,t;case $5:return tp(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z5:o=10;break e;case q5:o=9;break e;case d1:o=11;break e;case f1:o=14;break e;case fo:o=16,n=null;break e}throw Error(We(130,t==null?t:typeof t,""))}return e=Ni(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function gs(t,e,r,n){return t=Ni(7,t,n,e),t.lanes=r,t}function tp(t,e,r,n){return t=Ni(22,t,n,e),t.elementType=$5,t.lanes=r,t.stateNode={isHidden:!1},t}function R0(t,e,r){return t=Ni(6,t,null,e),t.lanes=r,t}function I0(t,e,r){return e=Ni(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function DN(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=m0(0),this.expirationTimes=m0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=m0(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function G1(t,e,r,n,i,a,o,s,l){return t=new DN(t,e,r,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ni(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},L1(a),t}function MN(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gl,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Rx(t){if(!t)return To;t=t._reactInternals;e:{if(As(t)!==t||t.tag!==1)throw Error(We(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(We(171))}if(t.tag===1){var r=t.type;if(Kn(r))return Rb(t,r,e)}return e}function Ix(t,e,r,n,i,a,o,s,l){return t=G1(r,n,!0,t,i,a,o,s,l),t.context=Rx(null),r=t.current,n=Cn(),i=Oo(r),a=Da(n,i),a.callback=e??null,Ao(r,a,i),t.current.lanes=i,td(t,i,n),Yn(t,n),t}function rp(t,e,r,n){var i=e.current,a=Cn(),o=Oo(i);return r=Rx(r),e.context===null?e.context=r:e.pendingContext=r,e=Da(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ao(i,e,o),t!==null&&(Yi(t,i,o,a),Ff(t,i,o)),o}function Eh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function o2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function K1(t,e){o2(t,e),(t=t.alternate)&&o2(t,e)}function FN(){return null}var Dx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Y1(t){this._internalRoot=t}np.prototype.render=Y1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(We(409));rp(t,e,null,null)};np.prototype.unmount=Y1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_s(function(){rp(null,t,null,null)}),e[Fa]=null}};function np(t){this._internalRoot=t}np.prototype.unstable_scheduleHydration=function(t){if(t){var e=hb();t={blockedOn:null,target:t,priority:e};for(var r=0;r<po.length&&e!==0&&e<po[r].priority;r++);po.splice(r,0,t),r===0&&mb(t)}};function J1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ip(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function s2(){}function BN(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=Eh(o);a.call(u)}}var o=Ix(e,n,t,0,null,!1,!1,"",s2);return t._reactRootContainer=o,t[Fa]=o.current,Dc(t.nodeType===8?t.parentNode:t),_s(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var u=Eh(l);s.call(u)}}var l=G1(t,0,!1,null,null,!1,!1,"",s2);return t._reactRootContainer=l,t[Fa]=l.current,Dc(t.nodeType===8?t.parentNode:t),_s(function(){rp(e,l,r,n)}),l}function ap(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=Eh(o);s.call(l)}}rp(e,o,t,i)}else o=BN(r,e,t,i,n);return Eh(o)}db=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=dc(e.pendingLanes);r!==0&&(m1(e,r|1),Yn(e,Dr()),!(Gt&6)&&(Kl=Dr()+500,Fo()))}break;case 13:_s(function(){var n=Ba(t,1);if(n!==null){var i=Cn();Yi(n,t,1,i)}}),K1(t,1)}};g1=function(t){if(t.tag===13){var e=Ba(t,134217728);if(e!==null){var r=Cn();Yi(e,t,134217728,r)}K1(t,134217728)}};fb=function(t){if(t.tag===13){var e=Oo(t),r=Ba(t,e);if(r!==null){var n=Cn();Yi(r,t,e,n)}K1(t,e)}};hb=function(){return ar};pb=function(t,e){var r=ar;try{return ar=t,e()}finally{ar=r}};Lm=function(t,e,r){switch(e){case"input":if(Sm(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Yh(n);if(!i)throw Error(We(90));W5(n),Sm(n,i)}}}break;case"textarea":G5(t,r);break;case"select":e=r.value,e!=null&&Ll(t,!!r.multiple,e,!1)}};eb=$1;tb=_s;var UN={usingClientEntryPoint:!1,Events:[nd,xl,Yh,Q5,Z5,$1]},Ku={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zN={bundleType:Ku.bundleType,version:Ku.version,rendererPackageName:Ku.rendererPackageName,rendererConfig:Ku.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ib(t),t===null?null:t.stateNode},findFiberByHostInstance:Ku.findFiberByHostInstance||FN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{Wh=cf.inject(zN),da=cf}catch{}}hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UN;hi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!J1(e))throw Error(We(200));return MN(t,e,null,r)};hi.createRoot=function(t,e){if(!J1(t))throw Error(We(299));var r=!1,n="",i=Dx;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=G1(t,1,!1,null,null,r,!1,n,i),t[Fa]=e.current,Dc(t.nodeType===8?t.parentNode:t),new Y1(e)};hi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(We(188)):(t=Object.keys(t).join(","),Error(We(268,t)));return t=ib(e),t=t===null?null:t.stateNode,t};hi.flushSync=function(t){return _s(t)};hi.hydrate=function(t,e,r){if(!ip(e))throw Error(We(200));return ap(null,t,e,!0,r)};hi.hydrateRoot=function(t,e,r){if(!J1(t))throw Error(We(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=Dx;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Ix(e,null,t,1,r??null,i,!1,a,o),t[Fa]=e.current,Dc(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new np(e)};hi.render=function(t,e,r){if(!ip(e))throw Error(We(200));return ap(null,t,e,!1,r)};hi.unmountComponentAtNode=function(t){if(!ip(t))throw Error(We(40));return t._reactRootContainer?(_s(function(){ap(null,null,t,!1,function(){t._reactRootContainer=null,t[Fa]=null})}),!0):!1};hi.unstable_batchedUpdates=$1;hi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ip(r))throw Error(We(200));if(t==null||t._reactInternals===void 0)throw Error(We(38));return ap(t,e,r,!1,n)};hi.version="18.3.1-next-f1338f8080-20240426";function Mx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mx)}catch(t){console.error(t)}}Mx(),M5.exports=hi;var op=M5.exports;const Fx=$h(op);var l2=op;gm.createRoot=l2.createRoot,gm.hydrateRoot=l2.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Bx=t=>{throw TypeError(t)},qN=(t,e,r)=>e.has(t)||Bx("Cannot "+r),D0=(t,e,r)=>(qN(t,e,"read from private field"),r?r.call(t):e.get(t)),$N=(t,e,r)=>e.has(t)?Bx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),u2="popstate";function HN(t={}){function e(i,a){let{pathname:o="/",search:s="",hash:l=""}=$a(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Wc("",{pathname:o,search:s,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){let o=i.document.querySelector("base"),s="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");s=u===-1?l:l.slice(0,u)}return s+"#"+(typeof a=="string"?a:ma(a))}function n(i,a){jr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return VN(e,r,n,t)}function Mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WN(){return Math.random().toString(36).substring(2,10)}function c2(t,e){return{usr:t.state,key:t.key,idx:e}}function Wc(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?$a(e):e,state:r,key:e&&e.key||n||WN()}}function ma({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function $a(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function VN(t,e,r,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,s="POP",l=null,u=h();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function h(){return(o.state||{idx:null}).idx}function d(){s="POP";let w=h(),p=w==null?null:w-u;u=w,l&&l({action:s,location:v.location,delta:p})}function f(w,p){s="PUSH";let g=Wc(v.location,w,p);r&&r(g,w),u=h()+1;let b=c2(g,u),_=v.createHref(g);try{o.pushState(b,"",_)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(_)}a&&l&&l({action:s,location:v.location,delta:1})}function c(w,p){s="REPLACE";let g=Wc(v.location,w,p);r&&r(g,w),u=h();let b=c2(g,u),_=v.createHref(g);o.replaceState(b,"",_),a&&l&&l({action:s,location:v.location,delta:0})}function y(w){return Ux(w)}let v={get action(){return s},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(u2,d),l=w,()=>{i.removeEventListener(u2,d),l=null}},createHref(w){return e(i,w)},createURL:y,encodeLocation(w){let p=y(w);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:c,go(w){return o.go(w)}};return v}function Ux(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Mt(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:ma(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}var hc,d2=class{constructor(t){if($N(this,hc,new Map),t)for(let[e,r]of t)this.set(e,r)}get(t){if(D0(this,hc).has(t))return D0(this,hc).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){D0(this,hc).set(t,e)}};hc=new WeakMap;var GN=new Set(["lazy","caseSensitive","path","id","index","children"]);function KN(t){return GN.has(t)}var YN=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function JN(t){return YN.has(t)}function XN(t){return t.index===!0}function Vc(t,e,r=[],n={},i=!1){return t.map((a,o)=>{let s=[...r,String(o)],l=typeof a.id=="string"?a.id:s.join("-");if(Mt(a.index!==!0||!a.children,"Cannot specify children on an index route"),Mt(i||!n[l],`Found a route id collision on id "${l}".  Route id's must be globally unique within Data Router usages`),XN(a)){let u={...a,id:l};return n[l]=f2(u,e(u)),u}else{let u={...a,id:l,children:void 0};return n[l]=f2(u,e(u)),a.children&&(u.children=Vc(a.children,e,s,n,i)),u}})}function f2(t,e){return Object.assign(t,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...t.lazy,...e.lazy}}:{}})}function go(t,e,r="/"){return pc(t,e,r,!1)}function pc(t,e,r,n){let i=typeof e=="string"?$a(e):e,a=Jn(i.pathname||"/",r);if(a==null)return null;let o=zx(t);ZN(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let u=cE(a);s=lE(o[l],u,n)}return s}function QN(t,e){let{route:r,pathname:n,params:i}=t;return{id:r.id,pathname:n,params:i,data:e[r.id],loaderData:e[r.id],handle:r.handle}}function zx(t,e=[],r=[],n="",i=!1){let a=(o,s,l=i,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&l)return;Mt(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let d=ha([n,h.relativePath]),f=r.concat(h);o.children&&o.children.length>0&&(Mt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),zx(o.children,e,f,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:oE(d,o.index),routesMeta:f})};return t.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,s);else for(let u of qx(o.path))a(o,s,!0,u)}),e}function qx(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=qx(n.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function ZN(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:sE(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var eE=/^:[\w-]+$/,tE=3,rE=2,nE=1,iE=10,aE=-2,h2=t=>t==="*";function oE(t,e){let r=t.split("/"),n=r.length;return r.some(h2)&&(n+=aE),e&&(n+=rE),r.filter(i=>!h2(i)).reduce((i,a)=>i+(eE.test(a)?tE:a===""?nE:iE),n)}function sE(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function lE(t,e,r=!1){let{routesMeta:n}=t,i={},a="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],u=s===n.length-1,h=a==="/"?e:e.slice(a.length)||"/",d=Ah({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),f=l.route;if(!d&&u&&r&&!n[n.length-1].route.index&&(d=Ah({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:ha([a,d.pathname]),pathnameBase:pE(ha([a,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(a=ha([a,d.pathnameBase]))}return o}function Ah(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=uE(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((u,{paramName:h,isOptional:d},f)=>{if(h==="*"){let y=s[f]||"";o=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const c=s[f];return d&&!c?u[h]=void 0:u[h]=(c||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function uE(t,e=!1,r=!0){jr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(n.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function cE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Jn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function dE({basename:t,pathname:e}){return e==="/"?t:ha([t,e])}var fE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sp=t=>fE.test(t);function hE(t,e="/"){let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?$a(t):t,a;if(r)if(sp(r))a=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),jr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${r}`)}r.startsWith("/")?a=p2(r.substring(1),"/"):a=p2(r,e)}else a=e;return{pathname:a,search:mE(n),hash:gE(i)}}function p2(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function M0(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $x(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function lp(t){let e=$x(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function up(t,e,r,n=!1){let i;typeof t=="string"?i=$a(t):(i={...t},Mt(!i.pathname||!i.pathname.includes("?"),M0("?","pathname","search",i)),Mt(!i.pathname||!i.pathname.includes("#"),M0("#","pathname","hash",i)),Mt(!i.search||!i.search.includes("#"),M0("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=r;else{let d=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}s=d>=0?e[d]:"/"}let l=hE(i,s),u=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}var ha=t=>t.join("/").replace(/\/\/+/g,"/"),pE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,jh=class{constructor(t,e,r,n=!1){this.status=t,this.statusText=e||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function Gc(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function X1(t){return t.filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var xo=Symbol("Uninstrumented");function vE(t,e){let r={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};t.forEach(i=>i({id:e.id,index:e.index,path:e.path,instrument(a){let o=Object.keys(r);for(let s of o)a[s]&&r[s].push(a[s])}}));let n={};if(typeof e.lazy=="function"&&r.lazy.length>0){let i=jl(r.lazy,e.lazy,()=>{});i&&(n.lazy=i)}if(typeof e.lazy=="object"){let i=e.lazy;["middleware","loader","action"].forEach(a=>{let o=i[a],s=r[`lazy.${a}`];if(typeof o=="function"&&s.length>0){let l=jl(s,o,()=>{});l&&(n.lazy=Object.assign(n.lazy||{},{[a]:l}))}})}return["loader","action"].forEach(i=>{let a=e[i];if(typeof a=="function"&&r[i].length>0){let o=a[xo]??a,s=jl(r[i],o,(...l)=>m2(l[0]));s&&(s[xo]=o,n[i]=s)}}),e.middleware&&e.middleware.length>0&&r.middleware.length>0&&(n.middleware=e.middleware.map(i=>{let a=i[xo]??i,o=jl(r.middleware,a,(...s)=>m2(s[0]));return o?(o[xo]=a,o):i})),n}function yE(t,e){let r={navigate:[],fetch:[]};if(e.forEach(n=>n({instrument(i){let a=Object.keys(i);for(let o of a)i[o]&&r[o].push(i[o])}})),r.navigate.length>0){let n=t.navigate[xo]??t.navigate,i=jl(r.navigate,n,(...a)=>{let[o,s]=a;return{to:typeof o=="number"||typeof o=="string"?o:o?ma(o):".",...g2(t,s??{})}});i&&(i[xo]=n,t.navigate=i)}if(r.fetch.length>0){let n=t.fetch[xo]??t.fetch,i=jl(r.fetch,n,(...a)=>{let[o,,s,l]=a;return{href:s??".",fetcherKey:o,...g2(t,l??{})}});i&&(i[xo]=n,t.fetch=i)}return t}function jl(t,e,r){return t.length===0?null:async(...n)=>{let i=await Hx(t,r(...n),()=>e(...n),t.length-1);if(i.type==="error")throw i.value;return i.value}}async function Hx(t,e,r,n){let i=t[n],a;if(i){let o,s=async()=>(o?console.error("You cannot call instrumented handlers more than once"):o=Hx(t,e,r,n-1),a=await o,Mt(a,"Expected a result"),a.type==="error"&&a.value instanceof Error?{status:"error",error:a.value}:{status:"success",error:void 0});try{await i(s,e)}catch(l){console.error("An instrumentation function threw an error:",l)}o||await s(),await o}else try{a={type:"success",value:await r()}}catch(o){a={type:"error",value:o}}return a||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function m2(t){let{request:e,context:r,params:n,unstable_pattern:i}=t;return{request:wE(e),params:{...n},unstable_pattern:i,context:bE(r)}}function g2(t,e){return{currentUrl:ma(t.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function wE(t){return{method:t.method,url:t.url,headers:{get:(...e)=>t.headers.get(...e)}}}function bE(t){if(_E(t)){let e={...t};return Object.freeze(e),e}else return{get:e=>t.get(e)}}var xE=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _E(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===xE}var Wx=["POST","PUT","PATCH","DELETE"],SE=new Set(Wx),kE=["GET",...Wx],NE=new Set(kE),EE=new Set([301,302,303,307,308]),AE=new Set([307,308]),F0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},jE={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},cl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},OE=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Vx="remix-router-transitions",Gx=Symbol("ResetLoaderData");function LE(t){const e=t.window?t.window:typeof window<"u"?window:void 0,r=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Mt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=t.hydrationRouteProperties||[],i=t.mapRouteProperties||OE,a=i;if(t.unstable_instrumentations){let ue=t.unstable_instrumentations;a=we=>({...i(we),...vE(ue.map(Ee=>Ee.route).filter(Boolean),we)})}let o={},s=Vc(t.routes,a,void 0,o),l,u=t.basename||"/";u.startsWith("/")||(u=`/${u}`);let h=t.dataStrategy||IE,d={...t.future},f=null,c=new Set,y=null,v=null,w=null,p=t.hydrationData!=null,g=go(s,t.history.location,u),b=!1,_=null,E;if(g==null&&!t.patchRoutesOnNavigation){let ue=_i(404,{pathname:t.history.location.pathname}),{matches:we,route:Ee}=df(s);E=!0,g=we,_={[Ee.id]:ue}}else if(g&&!t.hydrationData&&Jt(g,s,t.history.location.pathname).active&&(g=null),g)if(g.some(ue=>ue.route.lazy))E=!1;else if(!g.some(ue=>Q1(ue.route)))E=!0;else{let ue=t.hydrationData?t.hydrationData.loaderData:null,we=t.hydrationData?t.hydrationData.errors:null;if(we){let Ee=g.findIndex(Ie=>we[Ie.route.id]!==void 0);E=g.slice(0,Ee+1).every(Ie=>!cg(Ie.route,ue,we))}else E=g.every(Ee=>!cg(Ee.route,ue,we))}else{E=!1,g=[];let ue=Jt(null,s,t.history.location.pathname);ue.active&&ue.matches&&(b=!0,g=ue.matches)}let C,A={historyAction:t.history.action,location:t.history.location,matches:g,initialized:E,navigation:F0,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||_,fetchers:new Map,blockers:new Map},P="POP",F=!1,T,k=!1,j=new Map,I=null,R=!1,$=!1,Z=new Set,Q=new Map,X=0,G=-1,H=new Map,B=new Set,L=new Map,D=new Map,z=new Set,q=new Map,U,K=null;function ne(){if(f=t.history.listen(({action:ue,location:we,delta:Ee})=>{if(U){U(),U=void 0;return}jr(q.size===0||Ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ie=Ht({currentLocation:A.location,nextLocation:we,historyAction:ue});if(Ie&&Ee!=null){let Ue=new Promise(et=>{U=et});t.history.go(Ee*-1),Xr(Ie,{state:"blocked",location:we,proceed(){Xr(Ie,{state:"proceeding",proceed:void 0,reset:void 0,location:we}),Ue.then(()=>t.history.go(Ee))},reset(){let et=new Map(A.blockers);et.set(Ie,cl),ye({blockers:et})}});return}return _e(ue,we)}),r){JE(e,j);let ue=()=>XE(e,j);e.addEventListener("pagehide",ue),I=()=>e.removeEventListener("pagehide",ue)}return A.initialized||_e("POP",A.location,{initialHydration:!0}),C}function ie(){f&&f(),I&&I(),c.clear(),T&&T.abort(),A.fetchers.forEach((ue,we)=>qe(we)),A.blockers.forEach((ue,we)=>xt(we))}function he(ue){return c.add(ue),()=>c.delete(ue)}function ye(ue,we={}){ue.matches&&(ue.matches=ue.matches.map(Ue=>{let et=o[Ue.route.id],ut=Ue.route;return ut.element!==et.element||ut.errorElement!==et.errorElement||ut.hydrateFallbackElement!==et.hydrateFallbackElement?{...Ue,route:et}:Ue})),A={...A,...ue};let Ee=[],Ie=[];A.fetchers.forEach((Ue,et)=>{Ue.state==="idle"&&(z.has(et)?Ee.push(et):Ie.push(et))}),z.forEach(Ue=>{!A.fetchers.has(Ue)&&!Q.has(Ue)&&Ee.push(Ue)}),[...c].forEach(Ue=>Ue(A,{deletedFetchers:Ee,viewTransitionOpts:we.viewTransitionOpts,flushSync:we.flushSync===!0})),Ee.forEach(Ue=>qe(Ue)),Ie.forEach(Ue=>A.fetchers.delete(Ue))}function Oe(ue,we,{flushSync:Ee}={}){var ht,st;let Ie=A.actionData!=null&&A.navigation.formMethod!=null&&Pn(A.navigation.formMethod)&&A.navigation.state==="loading"&&((ht=ue.state)==null?void 0:ht._isRedirect)!==!0,Ue;we.actionData?Object.keys(we.actionData).length>0?Ue=we.actionData:Ue=null:Ie?Ue=A.actionData:Ue=null;let et=we.loaderData?E2(A.loaderData,we.loaderData,we.matches||[],we.errors):A.loaderData,ut=A.blockers;ut.size>0&&(ut=new Map(ut),ut.forEach((mt,It)=>ut.set(It,cl)));let tt=R?!1:zt(ue,we.matches||A.matches),it=F===!0||A.navigation.formMethod!=null&&Pn(A.navigation.formMethod)&&((st=ue.state)==null?void 0:st._isRedirect)!==!0;l&&(s=l,l=void 0),R||P==="POP"||(P==="PUSH"?t.history.push(ue,ue.state):P==="REPLACE"&&t.history.replace(ue,ue.state));let Qe;if(P==="POP"){let mt=j.get(A.location.pathname);mt&&mt.has(ue.pathname)?Qe={currentLocation:A.location,nextLocation:ue}:j.has(ue.pathname)&&(Qe={currentLocation:ue,nextLocation:A.location})}else if(k){let mt=j.get(A.location.pathname);mt?mt.add(ue.pathname):(mt=new Set([ue.pathname]),j.set(A.location.pathname,mt)),Qe={currentLocation:A.location,nextLocation:ue}}ye({...we,actionData:Ue,loaderData:et,historyAction:P,location:ue,initialized:!0,navigation:F0,revalidation:"idle",restoreScrollPosition:tt,preventScrollReset:it,blockers:ut},{viewTransitionOpts:Qe,flushSync:Ee===!0}),P="POP",F=!1,k=!1,R=!1,$=!1,K==null||K.resolve(),K=null}async function Le(ue,we){if(typeof ue=="number"){t.history.go(ue);return}let Ee=ug(A.location,A.matches,u,ue,we==null?void 0:we.fromRouteId,we==null?void 0:we.relative),{path:Ie,submission:Ue,error:et}=v2(!1,Ee,we),ut=A.location,tt=Wc(A.location,Ie,we&&we.state);tt={...tt,...t.history.encodeLocation(tt)};let it=we&&we.replace!=null?we.replace:void 0,Qe="PUSH";it===!0?Qe="REPLACE":it===!1||Ue!=null&&Pn(Ue.formMethod)&&Ue.formAction===A.location.pathname+A.location.search&&(Qe="REPLACE");let ht=we&&"preventScrollReset"in we?we.preventScrollReset===!0:void 0,st=(we&&we.flushSync)===!0,mt=Ht({currentLocation:ut,nextLocation:tt,historyAction:Qe});if(mt){Xr(mt,{state:"blocked",location:tt,proceed(){Xr(mt,{state:"proceeding",proceed:void 0,reset:void 0,location:tt}),Le(ue,we)},reset(){let It=new Map(A.blockers);It.set(mt,cl),ye({blockers:It})}});return}await _e(Qe,tt,{submission:Ue,pendingError:et,preventScrollReset:ht,replace:we&&we.replace,enableViewTransition:we&&we.viewTransition,flushSync:st})}function He(){K||(K=QE()),Ve(),ye({revalidation:"loading"});let ue=K.promise;return A.navigation.state==="submitting"?ue:A.navigation.state==="idle"?(_e(A.historyAction,A.location,{startUninterruptedRevalidation:!0}),ue):(_e(P||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation,enableViewTransition:k===!0}),ue)}async function _e(ue,we,Ee){T&&T.abort(),T=null,P=ue,R=(Ee&&Ee.startUninterruptedRevalidation)===!0,Nt(A.location,A.matches),F=(Ee&&Ee.preventScrollReset)===!0,k=(Ee&&Ee.enableViewTransition)===!0;let Ie=l||s,Ue=Ee&&Ee.overrideNavigation,et=Ee!=null&&Ee.initialHydration&&A.matches&&A.matches.length>0&&!b?A.matches:go(Ie,we,u),ut=(Ee&&Ee.flushSync)===!0;if(et&&A.initialized&&!$&&$E(A.location,we)&&!(Ee&&Ee.submission&&Pn(Ee.submission.formMethod))){Oe(we,{matches:et},{flushSync:ut});return}let tt=Jt(et,Ie,we.pathname);if(tt.active&&tt.matches&&(et=tt.matches),!et){let{error:Ge,notFoundMatches:ce,route:De}=_r(we.pathname);Oe(we,{matches:ce,loaderData:{},errors:{[De.id]:Ge}},{flushSync:ut});return}T=new AbortController;let it=dl(t.history,we,T.signal,Ee&&Ee.submission),Qe=t.getContext?await t.getContext():new d2,ht;if(Ee&&Ee.pendingError)ht=[vo(et).route.id,{type:"error",error:Ee.pendingError}];else if(Ee&&Ee.submission&&Pn(Ee.submission.formMethod)){let Ge=await se(it,we,Ee.submission,et,Qe,tt.active,Ee&&Ee.initialHydration===!0,{replace:Ee.replace,flushSync:ut});if(Ge.shortCircuited)return;if(Ge.pendingActionResult){let[ce,De]=Ge.pendingActionResult;if(ai(De)&&Gc(De.error)&&De.error.status===404){T=null,Oe(we,{matches:Ge.matches,loaderData:{},errors:{[ce]:De.error}});return}}et=Ge.matches||et,ht=Ge.pendingActionResult,Ue=B0(we,Ee.submission),ut=!1,tt.active=!1,it=dl(t.history,it.url,it.signal)}let{shortCircuited:st,matches:mt,loaderData:It,errors:Zt}=await rt(it,we,et,Qe,tt.active,Ue,Ee&&Ee.submission,Ee&&Ee.fetcherSubmission,Ee&&Ee.replace,Ee&&Ee.initialHydration===!0,ut,ht);st||(T=null,Oe(we,{matches:mt||et,...A2(ht),loaderData:It,errors:Zt}))}async function se(ue,we,Ee,Ie,Ue,et,ut,tt={}){Ve();let it=KE(we,Ee);if(ye({navigation:it},{flushSync:tt.flushSync===!0}),et){let st=await Qt(Ie,we.pathname,ue.signal);if(st.type==="aborted")return{shortCircuited:!0};if(st.type==="error"){if(st.partialMatches.length===0){let{matches:It,route:Zt}=df(s);return{matches:It,pendingActionResult:[Zt.id,{type:"error",error:st.error}]}}let mt=vo(st.partialMatches).route.id;return{matches:st.partialMatches,pendingActionResult:[mt,{type:"error",error:st.error}]}}else if(st.matches)Ie=st.matches;else{let{notFoundMatches:mt,error:It,route:Zt}=_r(we.pathname);return{matches:mt,pendingActionResult:[Zt.id,{type:"error",error:It}]}}}let Qe,ht=Wf(Ie,we);if(!ht.route.action&&!ht.route.lazy)Qe={type:"error",error:_i(405,{method:ue.method,pathname:we.pathname,routeId:ht.route.id})};else{let st=Dl(a,o,ue,Ie,ht,ut?[]:n,Ue),mt=await Ce(ue,st,Ue,null);if(Qe=mt[ht.route.id],!Qe){for(let It of Ie)if(mt[It.route.id]){Qe=mt[It.route.id];break}}if(ue.signal.aborted)return{shortCircuited:!0}}if(hs(Qe)){let st;return tt&&tt.replace!=null?st=tt.replace:st=S2(Qe.response.headers.get("Location"),new URL(ue.url),u)===A.location.pathname+A.location.search,await Se(ue,Qe,!0,{submission:Ee,replace:st}),{shortCircuited:!0}}if(ai(Qe)){let st=vo(Ie,ht.route.id);return(tt&&tt.replace)!==!0&&(P="PUSH"),{matches:Ie,pendingActionResult:[st.route.id,Qe,ht.route.id]}}return{matches:Ie,pendingActionResult:[ht.route.id,Qe]}}async function rt(ue,we,Ee,Ie,Ue,et,ut,tt,it,Qe,ht,st){let mt=et||B0(we,ut),It=ut||tt||O2(mt),Zt=!R&&!Qe;if(Ue){if(Zt){let Sr=ve(st);ye({navigation:mt,...Sr!==void 0?{actionData:Sr}:{}},{flushSync:ht})}let Rt=await Qt(Ee,we.pathname,ue.signal);if(Rt.type==="aborted")return{shortCircuited:!0};if(Rt.type==="error"){if(Rt.partialMatches.length===0){let{matches:Qn,route:Pi}=df(s);return{matches:Qn,loaderData:{},errors:{[Pi.id]:Rt.error}}}let Sr=vo(Rt.partialMatches).route.id;return{matches:Rt.partialMatches,loaderData:{},errors:{[Sr]:Rt.error}}}else if(Rt.matches)Ee=Rt.matches;else{let{error:Sr,notFoundMatches:Qn,route:Pi}=_r(we.pathname);return{matches:Qn,loaderData:{},errors:{[Pi.id]:Sr}}}}let Ge=l||s,{dsMatches:ce,revalidatingFetchers:De}=y2(ue,Ie,a,o,t.history,A,Ee,It,we,Qe?[]:n,Qe===!0,$,Z,z,L,B,Ge,u,t.patchRoutesOnNavigation!=null,st);if(G=++X,!t.dataStrategy&&!ce.some(Rt=>Rt.shouldLoad)&&!ce.some(Rt=>Rt.route.middleware&&Rt.route.middleware.length>0)&&De.length===0){let Rt=wt();return Oe(we,{matches:Ee,loaderData:{},errors:st&&ai(st[1])?{[st[0]]:st[1].error}:null,...A2(st),...Rt?{fetchers:new Map(A.fetchers)}:{}},{flushSync:ht}),{shortCircuited:!0}}if(Zt){let Rt={};if(!Ue){Rt.navigation=mt;let Sr=ve(st);Sr!==void 0&&(Rt.actionData=Sr)}De.length>0&&(Rt.fetchers=de(De)),ye(Rt,{flushSync:ht})}De.forEach(Rt=>{lt(Rt.key),Rt.controller&&Q.set(Rt.key,Rt.controller)});let Je=()=>De.forEach(Rt=>lt(Rt.key));T&&T.signal.addEventListener("abort",Je);let{loaderResults:qt,fetcherResults:er}=await Pe(ce,De,ue,Ie);if(ue.signal.aborted)return{shortCircuited:!0};T&&T.signal.removeEventListener("abort",Je),De.forEach(Rt=>Q.delete(Rt.key));let $t=ff(qt);if($t)return await Se(ue,$t.result,!0,{replace:it}),{shortCircuited:!0};if($t=ff(er),$t)return B.add($t.key),await Se(ue,$t.result,!0,{replace:it}),{shortCircuited:!0};let{loaderData:mr,errors:Ur}=N2(A,Ee,qt,st,De,er);Qe&&A.errors&&(Ur={...A.errors,...Ur});let Qr=wt(),Fn=Pt(G),cr=Qr||Fn||De.length>0;return{matches:Ee,loaderData:mr,errors:Ur,...cr?{fetchers:new Map(A.fetchers)}:{}}}function ve(ue){if(ue&&!ai(ue[1]))return{[ue[0]]:ue[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function de(ue){return ue.forEach(we=>{let Ee=A.fetchers.get(we.key),Ie=Yu(void 0,Ee?Ee.data:void 0);A.fetchers.set(we.key,Ie)}),new Map(A.fetchers)}async function ge(ue,we,Ee,Ie){lt(ue);let Ue=(Ie&&Ie.flushSync)===!0,et=l||s,ut=ug(A.location,A.matches,u,Ee,we,Ie==null?void 0:Ie.relative),tt=go(et,ut,u),it=Jt(tt,et,ut);if(it.active&&it.matches&&(tt=it.matches),!tt){nt(ue,we,_i(404,{pathname:ut}),{flushSync:Ue});return}let{path:Qe,submission:ht,error:st}=v2(!0,ut,Ie);if(st){nt(ue,we,st,{flushSync:Ue});return}let mt=t.getContext?await t.getContext():new d2,It=(Ie&&Ie.preventScrollReset)===!0;if(ht&&Pn(ht.formMethod)){await Ne(ue,we,Qe,tt,mt,it.active,Ue,It,ht);return}L.set(ue,{routeId:we,path:Qe}),await ae(ue,we,Qe,tt,mt,it.active,Ue,It,ht)}async function Ne(ue,we,Ee,Ie,Ue,et,ut,tt,it){Ve(),L.delete(ue);let Qe=A.fetchers.get(ue);Ye(ue,YE(it,Qe),{flushSync:ut});let ht=new AbortController,st=dl(t.history,Ee,ht.signal,it);if(et){let At=await Qt(Ie,new URL(st.url).pathname,st.signal,ue);if(At.type==="aborted")return;if(At.type==="error"){nt(ue,we,At.error,{flushSync:ut});return}else if(At.matches)Ie=At.matches;else{nt(ue,we,_i(404,{pathname:Ee}),{flushSync:ut});return}}let mt=Wf(Ie,Ee);if(!mt.route.action&&!mt.route.lazy){let At=_i(405,{method:it.formMethod,pathname:Ee,routeId:we});nt(ue,we,At,{flushSync:ut});return}Q.set(ue,ht);let It=X,Zt=Dl(a,o,st,Ie,mt,n,Ue),Ge=await Ce(st,Zt,Ue,ue),ce=Ge[mt.route.id];if(!ce){for(let At of Zt)if(Ge[At.route.id]){ce=Ge[At.route.id];break}}if(st.signal.aborted){Q.get(ue)===ht&&Q.delete(ue);return}if(z.has(ue)){if(hs(ce)||ai(ce)){Ye(ue,Oa(void 0));return}}else{if(hs(ce))if(Q.delete(ue),G>It){Ye(ue,Oa(void 0));return}else return B.add(ue),Ye(ue,Yu(it)),Se(st,ce,!1,{fetcherSubmission:it,preventScrollReset:tt});if(ai(ce)){nt(ue,we,ce.error);return}}let De=A.navigation.location||A.location,Je=dl(t.history,De,ht.signal),qt=l||s,er=A.navigation.state!=="idle"?go(qt,A.navigation.location,u):A.matches;Mt(er,"Didn't find any matches after fetcher action");let $t=++X;H.set(ue,$t);let mr=Yu(it,ce.data);A.fetchers.set(ue,mr);let{dsMatches:Ur,revalidatingFetchers:Qr}=y2(Je,Ue,a,o,t.history,A,er,it,De,n,!1,$,Z,z,L,B,qt,u,t.patchRoutesOnNavigation!=null,[mt.route.id,ce]);Qr.filter(At=>At.key!==ue).forEach(At=>{let va=At.key,Uo=A.fetchers.get(va),Ps=Yu(void 0,Uo?Uo.data:void 0);A.fetchers.set(va,Ps),lt(va),At.controller&&Q.set(va,At.controller)}),ye({fetchers:new Map(A.fetchers)});let Fn=()=>Qr.forEach(At=>lt(At.key));ht.signal.addEventListener("abort",Fn);let{loaderResults:cr,fetcherResults:Rt}=await Pe(Ur,Qr,Je,Ue);if(ht.signal.aborted)return;if(ht.signal.removeEventListener("abort",Fn),H.delete(ue),Q.delete(ue),Qr.forEach(At=>Q.delete(At.key)),A.fetchers.has(ue)){let At=Oa(ce.data);A.fetchers.set(ue,At)}let Sr=ff(cr);if(Sr)return Se(Je,Sr.result,!1,{preventScrollReset:tt});if(Sr=ff(Rt),Sr)return B.add(Sr.key),Se(Je,Sr.result,!1,{preventScrollReset:tt});let{loaderData:Qn,errors:Pi}=N2(A,er,cr,void 0,Qr,Rt);Pt($t),A.navigation.state==="loading"&&$t>G?(Mt(P,"Expected pending action"),T&&T.abort(),Oe(A.navigation.location,{matches:er,loaderData:Qn,errors:Pi,fetchers:new Map(A.fetchers)})):(ye({errors:Pi,loaderData:E2(A.loaderData,Qn,er,Pi),fetchers:new Map(A.fetchers)}),$=!1)}async function ae(ue,we,Ee,Ie,Ue,et,ut,tt,it){let Qe=A.fetchers.get(ue);Ye(ue,Yu(it,Qe?Qe.data:void 0),{flushSync:ut});let ht=new AbortController,st=dl(t.history,Ee,ht.signal);if(et){let De=await Qt(Ie,new URL(st.url).pathname,st.signal,ue);if(De.type==="aborted")return;if(De.type==="error"){nt(ue,we,De.error,{flushSync:ut});return}else if(De.matches)Ie=De.matches;else{nt(ue,we,_i(404,{pathname:Ee}),{flushSync:ut});return}}let mt=Wf(Ie,Ee);Q.set(ue,ht);let It=X,Zt=Dl(a,o,st,Ie,mt,n,Ue),ce=(await Ce(st,Zt,Ue,ue))[mt.route.id];if(Q.get(ue)===ht&&Q.delete(ue),!st.signal.aborted){if(z.has(ue)){Ye(ue,Oa(void 0));return}if(hs(ce))if(G>It){Ye(ue,Oa(void 0));return}else{B.add(ue),await Se(st,ce,!1,{preventScrollReset:tt});return}if(ai(ce)){nt(ue,we,ce.error);return}Ye(ue,Oa(ce.data))}}async function Se(ue,we,Ee,{submission:Ie,fetcherSubmission:Ue,preventScrollReset:et,replace:ut}={}){we.response.headers.has("X-Remix-Revalidate")&&($=!0);let tt=we.response.headers.get("Location");Mt(tt,"Expected a Location header on the redirect Response"),tt=S2(tt,new URL(ue.url),u);let it=Wc(A.location,tt,{_isRedirect:!0});if(r){let Zt=!1;if(we.response.headers.has("X-Remix-Reload-Document"))Zt=!0;else if(sp(tt)){const Ge=Ux(tt,!0);Zt=Ge.origin!==e.location.origin||Jn(Ge.pathname,u)==null}if(Zt){ut?e.location.replace(tt):e.location.assign(tt);return}}T=null;let Qe=ut===!0||we.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ht,formAction:st,formEncType:mt}=A.navigation;!Ie&&!Ue&&ht&&st&&mt&&(Ie=O2(A.navigation));let It=Ie||Ue;if(AE.has(we.response.status)&&It&&Pn(It.formMethod))await _e(Qe,it,{submission:{...It,formAction:tt},preventScrollReset:et||F,enableViewTransition:Ee?k:void 0});else{let Zt=B0(it,Ie);await _e(Qe,it,{overrideNavigation:Zt,fetcherSubmission:Ue,preventScrollReset:et||F,enableViewTransition:Ee?k:void 0})}}async function Ce(ue,we,Ee,Ie){let Ue,et={};try{Ue=await ME(h,ue,we,Ie,Ee,!1)}catch(ut){return we.filter(tt=>tt.shouldLoad).forEach(tt=>{et[tt.route.id]={type:"error",error:ut}}),et}if(ue.signal.aborted)return et;for(let[ut,tt]of Object.entries(Ue))if(VE(tt)){let it=tt.result;et[ut]={type:"redirect",response:zE(it,ue,ut,we,u)}}else et[ut]=await UE(tt);return et}async function Pe(ue,we,Ee,Ie){let Ue=Ce(Ee,ue,Ie,null),et=Promise.all(we.map(async it=>{if(it.matches&&it.match&&it.request&&it.controller){let ht=(await Ce(it.request,it.matches,Ie,it.key))[it.match.route.id];return{[it.key]:ht}}else return Promise.resolve({[it.key]:{type:"error",error:_i(404,{pathname:it.path})}})})),ut=await Ue,tt=(await et).reduce((it,Qe)=>Object.assign(it,Qe),{});return{loaderResults:ut,fetcherResults:tt}}function Ve(){$=!0,L.forEach((ue,we)=>{Q.has(we)&&Z.add(we),lt(we)})}function Ye(ue,we,Ee={}){A.fetchers.set(ue,we),ye({fetchers:new Map(A.fetchers)},{flushSync:(Ee&&Ee.flushSync)===!0})}function nt(ue,we,Ee,Ie={}){let Ue=vo(A.matches,we);qe(ue),ye({errors:{[Ue.route.id]:Ee},fetchers:new Map(A.fetchers)},{flushSync:(Ie&&Ie.flushSync)===!0})}function pt(ue){return D.set(ue,(D.get(ue)||0)+1),z.has(ue)&&z.delete(ue),A.fetchers.get(ue)||jE}function Ze(ue,we){lt(ue,we==null?void 0:we.reason),Ye(ue,Oa(null))}function qe(ue){let we=A.fetchers.get(ue);Q.has(ue)&&!(we&&we.state==="loading"&&H.has(ue))&&lt(ue),L.delete(ue),H.delete(ue),B.delete(ue),z.delete(ue),Z.delete(ue),A.fetchers.delete(ue)}function Lt(ue){let we=(D.get(ue)||0)-1;we<=0?(D.delete(ue),z.add(ue)):D.set(ue,we),ye({fetchers:new Map(A.fetchers)})}function lt(ue,we){let Ee=Q.get(ue);Ee&&(Ee.abort(we),Q.delete(ue))}function Dt(ue){for(let we of ue){let Ee=pt(we),Ie=Oa(Ee.data);A.fetchers.set(we,Ie)}}function wt(){let ue=[],we=!1;for(let Ee of B){let Ie=A.fetchers.get(Ee);Mt(Ie,`Expected fetcher: ${Ee}`),Ie.state==="loading"&&(B.delete(Ee),ue.push(Ee),we=!0)}return Dt(ue),we}function Pt(ue){let we=[];for(let[Ee,Ie]of H)if(Ie<ue){let Ue=A.fetchers.get(Ee);Mt(Ue,`Expected fetcher: ${Ee}`),Ue.state==="loading"&&(lt(Ee),H.delete(Ee),we.push(Ee))}return Dt(we),we.length>0}function br(ue,we){let Ee=A.blockers.get(ue)||cl;return q.get(ue)!==we&&q.set(ue,we),Ee}function xt(ue){A.blockers.delete(ue),q.delete(ue)}function Xr(ue,we){let Ee=A.blockers.get(ue)||cl;Mt(Ee.state==="unblocked"&&we.state==="blocked"||Ee.state==="blocked"&&we.state==="blocked"||Ee.state==="blocked"&&we.state==="proceeding"||Ee.state==="blocked"&&we.state==="unblocked"||Ee.state==="proceeding"&&we.state==="unblocked",`Invalid blocker state transition: ${Ee.state} -> ${we.state}`);let Ie=new Map(A.blockers);Ie.set(ue,we),ye({blockers:Ie})}function Ht({currentLocation:ue,nextLocation:we,historyAction:Ee}){if(q.size===0)return;q.size>1&&jr(!1,"A router only supports one blocker at a time");let Ie=Array.from(q.entries()),[Ue,et]=Ie[Ie.length-1],ut=A.blockers.get(Ue);if(!(ut&&ut.state==="proceeding")&&et({currentLocation:ue,nextLocation:we,historyAction:Ee}))return Ue}function _r(ue){let we=_i(404,{pathname:ue}),Ee=l||s,{matches:Ie,route:Ue}=df(Ee);return{notFoundMatches:Ie,route:Ue,error:we}}function fn(ue,we,Ee){if(y=ue,w=we,v=Ee||null,!p&&A.navigation===F0){p=!0;let Ie=zt(A.location,A.matches);Ie!=null&&ye({restoreScrollPosition:Ie})}return()=>{y=null,w=null,v=null}}function Yt(ue,we){return v&&v(ue,we.map(Ie=>QN(Ie,A.loaderData)))||ue.key}function Nt(ue,we){if(y&&w){let Ee=Yt(ue,we);y[Ee]=w()}}function zt(ue,we){if(y){let Ee=Yt(ue,we),Ie=y[Ee];if(typeof Ie=="number")return Ie}return null}function Jt(ue,we,Ee){if(t.patchRoutesOnNavigation)if(ue){if(Object.keys(ue[0].params).length>0)return{active:!0,matches:pc(we,Ee,u,!0)}}else return{active:!0,matches:pc(we,Ee,u,!0)||[]};return{active:!1,matches:null}}async function Qt(ue,we,Ee,Ie){if(!t.patchRoutesOnNavigation)return{type:"success",matches:ue};let Ue=ue;for(;;){let et=l==null,ut=l||s,tt=o;try{await t.patchRoutesOnNavigation({signal:Ee,path:we,matches:Ue,fetcherKey:Ie,patch:(ht,st)=>{Ee.aborted||w2(ht,st,ut,tt,a,!1)}})}catch(ht){return{type:"error",error:ht,partialMatches:Ue}}finally{et&&!Ee.aborted&&(s=[...s])}if(Ee.aborted)return{type:"aborted"};let it=go(ut,we,u),Qe=null;if(it){if(Object.keys(it[0].params).length===0)return{type:"success",matches:it};if(Qe=pc(ut,we,u,!0),!(Qe&&Ue.length<Qe.length&&kn(Ue,Qe.slice(0,Ue.length))))return{type:"success",matches:it}}if(Qe||(Qe=pc(ut,we,u,!0)),!Qe||kn(Ue,Qe))return{type:"success",matches:null};Ue=Qe}}function kn(ue,we){return ue.length===we.length&&ue.every((Ee,Ie)=>Ee.route.id===we[Ie].route.id)}function Nn(ue){o={},l=Vc(ue,a,void 0,o)}function vt(ue,we,Ee=!1){let Ie=l==null;w2(ue,we,l||s,o,a,Ee),Ie&&(s=[...s],ye({}))}return C={get basename(){return u},get future(){return d},get state(){return A},get routes(){return s},get window(){return e},initialize:ne,subscribe:he,enableScrollRestoration:fn,navigate:Le,fetch:ge,revalidate:He,createHref:ue=>t.history.createHref(ue),encodeLocation:ue=>t.history.encodeLocation(ue),getFetcher:pt,resetFetcher:Ze,deleteFetcher:Lt,dispose:ie,getBlocker:br,deleteBlocker:xt,patchRoutes:vt,_internalFetchControllers:Q,_internalSetRoutes:Nn,_internalSetStateDoNotUseOrYouWillBreakYourApp(ue){ye(ue)}},t.unstable_instrumentations&&(C=yE(C,t.unstable_instrumentations.map(ue=>ue.router).filter(Boolean))),C}function PE(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function ug(t,e,r,n,i,a){let o,s;if(i){o=[];for(let u of e)if(o.push(u),u.route.id===i){s=u;break}}else o=e,s=e[e.length-1];let l=up(n||".",lp(o),Jn(t.pathname,r)||t.pathname,a==="path");if(n==null&&(l.search=t.search,l.hash=t.hash),(n==null||n===""||n===".")&&s){let u=Z1(l.search);if(s.route.index&&!u)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!s.route.index&&u){let h=new URLSearchParams(l.search),d=h.getAll("index");h.delete("index"),d.filter(c=>c).forEach(c=>h.append("index",c));let f=h.toString();l.search=f?`?${f}`:""}}return r!=="/"&&(l.pathname=dE({basename:r,pathname:l.pathname})),ma(l)}function v2(t,e,r){if(!r||!PE(r))return{path:e};if(r.formMethod&&!GE(r.formMethod))return{path:e,error:_i(405,{method:r.formMethod})};let n=()=>({path:e,error:_i(400,{type:"invalid-body"})}),a=(r.formMethod||"get").toUpperCase(),o=Zx(e);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Pn(a))return n();let d=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,[c,y])=>`${f}${c}=${y}
`,""):String(r.body);return{path:e,submission:{formMethod:a,formAction:o,formEncType:r.formEncType,formData:void 0,json:void 0,text:d}}}else if(r.formEncType==="application/json"){if(!Pn(a))return n();try{let d=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:e,submission:{formMethod:a,formAction:o,formEncType:r.formEncType,formData:void 0,json:d,text:void 0}}}catch{return n()}}}Mt(typeof FormData=="function","FormData is not available in this environment");let s,l;if(r.formData)s=fg(r.formData),l=r.formData;else if(r.body instanceof FormData)s=fg(r.body),l=r.body;else if(r.body instanceof URLSearchParams)s=r.body,l=k2(s);else if(r.body==null)s=new URLSearchParams,l=new FormData;else try{s=new URLSearchParams(r.body),l=k2(s)}catch{return n()}let u={formMethod:a,formAction:o,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(Pn(u.formMethod))return{path:e,submission:u};let h=$a(e);return t&&h.search&&Z1(h.search)&&s.append("index",""),h.search=`?${s}`,{path:ma(h),submission:u}}function y2(t,e,r,n,i,a,o,s,l,u,h,d,f,c,y,v,w,p,g,b){var R;let _=b?ai(b[1])?b[1].error:b[1].data:void 0,E=i.createURL(a.location),C=i.createURL(l),A;if(h&&a.errors){let $=Object.keys(a.errors)[0];A=o.findIndex(Z=>Z.route.id===$)}else if(b&&ai(b[1])){let $=b[0];A=o.findIndex(Z=>Z.route.id===$)-1}let P=b?b[1].statusCode:void 0,F=P&&P>=400,T={currentUrl:E,currentParams:((R=a.matches[0])==null?void 0:R.params)||{},nextUrl:C,nextParams:o[0].params,...s,actionResult:_,actionStatus:P},k=X1(o.map($=>$.route.path)),j=o.map(($,Z)=>{let{route:Q}=$,X=null;if(A!=null&&Z>A?X=!1:Q.lazy?X=!0:Q1(Q)?h?X=cg(Q,a.loaderData,a.errors):TE(a.loaderData,a.matches[Z],$)&&(X=!0):X=!1,X!==null)return dg(r,n,t,k,$,u,e,X);let G=F?!1:d||E.pathname+E.search===C.pathname+C.search||E.search!==C.search||CE(a.matches[Z],$),H={...T,defaultShouldRevalidate:G},B=Oh($,H);return dg(r,n,t,k,$,u,e,B,H)}),I=[];return y.forEach(($,Z)=>{if(h||!o.some(z=>z.route.id===$.routeId)||c.has(Z))return;let Q=a.fetchers.get(Z),X=Q&&Q.state!=="idle"&&Q.data===void 0,G=go(w,$.path,p);if(!G){if(g&&X)return;I.push({key:Z,routeId:$.routeId,path:$.path,matches:null,match:null,request:null,controller:null});return}if(v.has(Z))return;let H=Wf(G,$.path),B=new AbortController,L=dl(i,$.path,B.signal),D=null;if(f.has(Z))f.delete(Z),D=Dl(r,n,L,G,H,u,e);else if(X)d&&(D=Dl(r,n,L,G,H,u,e));else{let z={...T,defaultShouldRevalidate:F?!1:d};Oh(H,z)&&(D=Dl(r,n,L,G,H,u,e,z))}D&&I.push({key:Z,routeId:$.routeId,path:$.path,matches:D,match:H,request:L,controller:B})}),{dsMatches:j,revalidatingFetchers:I}}function Q1(t){return t.loader!=null||t.middleware!=null&&t.middleware.length>0}function cg(t,e,r){if(t.lazy)return!0;if(!Q1(t))return!1;let n=e!=null&&t.id in e,i=r!=null&&r[t.id]!==void 0;return!n&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!n&&!i}function TE(t,e,r){let n=!e||r.route.id!==e.route.id,i=!t.hasOwnProperty(r.route.id);return n||i}function CE(t,e){let r=t.route.path;return t.pathname!==e.pathname||r!=null&&r.endsWith("*")&&t.params["*"]!==e.params["*"]}function Oh(t,e){if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate(e);if(typeof r=="boolean")return r}return e.defaultShouldRevalidate}function w2(t,e,r,n,i,a){let o;if(t){let u=n[t];Mt(u,`No route found to patch children into: routeId = ${t}`),u.children||(u.children=[]),o=u.children}else o=r;let s=[],l=[];if(e.forEach(u=>{let h=o.find(d=>Kx(u,d));h?l.push({existingRoute:h,newRoute:u}):s.push(u)}),s.length>0){let u=Vc(s,i,[t||"_","patch",String((o==null?void 0:o.length)||"0")],n);o.push(...u)}if(a&&l.length>0)for(let u=0;u<l.length;u++){let{existingRoute:h,newRoute:d}=l[u],f=h,[c]=Vc([d],i,[],{},!0);Object.assign(f,{element:c.element?c.element:f.element,errorElement:c.errorElement?c.errorElement:f.errorElement,hydrateFallbackElement:c.hydrateFallbackElement?c.hydrateFallbackElement:f.hydrateFallbackElement})}}function Kx(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((r,n)=>{var i;return(i=e.children)==null?void 0:i.some(a=>Kx(r,a))}):!1}var b2=new WeakMap,Yx=({key:t,route:e,manifest:r,mapRouteProperties:n})=>{let i=r[e.id];if(Mt(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let a=i.lazy[t];if(!a)return;let o=b2.get(i);o||(o={},b2.set(i,o));let s=o[t];if(s)return s;let l=(async()=>{let u=KN(t),d=i[t]!==void 0&&t!=="hasErrorBoundary";if(u)jr(!u,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),o[t]=Promise.resolve();else if(d)jr(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let f=await a();f!=null&&(Object.assign(i,{[t]:f}),Object.assign(i,n(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(f=>f===void 0)&&(i.lazy=void 0))})();return o[t]=l,l},x2=new WeakMap;function RE(t,e,r,n,i){let a=r[t.id];if(Mt(a,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let h=x2.get(a);if(h)return{lazyRoutePromise:h,lazyHandlerPromise:h};let d=(async()=>{Mt(typeof t.lazy=="function","No lazy route function found");let f=await t.lazy(),c={};for(let y in f){let v=f[y];if(v===void 0)continue;let w=JN(y),g=a[y]!==void 0&&y!=="hasErrorBoundary";w?jr(!w,"Route property "+y+" is not a supported property to be returned from a lazy route function. This property will be ignored."):g?jr(!g,`Route "${a.id}" has a static property "${y}" defined but its lazy function is also returning a value for this property. The lazy route property "${y}" will be ignored.`):c[y]=v}Object.assign(a,c),Object.assign(a,{...n(a),lazy:void 0})})();return x2.set(a,d),d.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:d}}let o=Object.keys(t.lazy),s=[],l;for(let h of o){if(i&&i.includes(h))continue;let d=Yx({key:h,route:t,manifest:r,mapRouteProperties:n});d&&(s.push(d),h===e&&(l=d))}let u=s.length>0?Promise.all(s).then(()=>{}):void 0;return u==null||u.catch(()=>{}),l==null||l.catch(()=>{}),{lazyRoutePromise:u,lazyHandlerPromise:l}}async function _2(t){let e=t.matches.filter(i=>i.shouldLoad),r={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,a)=>{r[e[a].route.id]=i}),r}async function IE(t){return t.matches.some(e=>e.route.middleware)?Jx(t,()=>_2(t)):_2(t)}function Jx(t,e){return DE(t,e,n=>n,HE,r);function r(n,i,a){if(a)return Promise.resolve(Object.assign(a.value,{[i]:{type:"error",result:n}}));{let{matches:o}=t,s=Math.min(Math.max(o.findIndex(u=>u.route.id===i),0),Math.max(o.findIndex(u=>u.unstable_shouldCallHandler()),0)),l=vo(o,o[s].route.id).route.id;return Promise.resolve({[l]:{type:"error",result:n}})}}}async function DE(t,e,r,n,i){let{matches:a,request:o,params:s,context:l,unstable_pattern:u}=t,h=a.flatMap(f=>f.route.middleware?f.route.middleware.map(c=>[f.route.id,c]):[]);return await Xx({request:o,params:s,context:l,unstable_pattern:u},h,e,r,n,i)}async function Xx(t,e,r,n,i,a,o=0){let{request:s}=t;if(s.signal.aborted)throw s.signal.reason??new Error(`Request aborted: ${s.method} ${s.url}`);let l=e[o];if(!l)return await r();let[u,h]=l,d,f=async()=>{if(d)throw new Error("You may only call `next()` once per middleware");try{return d={value:await Xx(t,e,r,n,i,a,o+1)},d.value}catch(c){return d={value:await a(c,u,d)},d.value}};try{let c=await h(t,f),y=c!=null?n(c):void 0;return i(y)?y:d?y??d.value:(d={value:await f()},d.value)}catch(c){return await a(c,u,d)}}function Qx(t,e,r,n,i){let a=Yx({key:"middleware",route:n.route,manifest:e,mapRouteProperties:t}),o=RE(n.route,Pn(r.method)?"action":"loader",e,t,i);return{middleware:a,route:o.lazyRoutePromise,handler:o.lazyHandlerPromise}}function dg(t,e,r,n,i,a,o,s,l=null){let u=!1,h=Qx(t,e,r,i,a);return{...i,_lazyPromises:h,shouldLoad:s,unstable_shouldRevalidateArgs:l,unstable_shouldCallHandler(d){return u=!0,l?typeof d=="boolean"?Oh(i,{...l,defaultShouldRevalidate:d}):Oh(i,l):s},resolve(d){let{lazy:f,loader:c,middleware:y}=i.route,v=u||s||d&&!Pn(r.method)&&(f||c),w=y&&y.length>0&&!c&&!f;return v&&(Pn(r.method)||!w)?FE({request:r,unstable_pattern:n,match:i,lazyHandlerPromise:h==null?void 0:h.handler,lazyRoutePromise:h==null?void 0:h.route,handlerOverride:d,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}}}function Dl(t,e,r,n,i,a,o,s=null){return n.map(l=>l.route.id!==i.route.id?{...l,shouldLoad:!1,unstable_shouldRevalidateArgs:s,unstable_shouldCallHandler:()=>!1,_lazyPromises:Qx(t,e,r,l,a),resolve:()=>Promise.resolve({type:"data",result:void 0})}:dg(t,e,r,X1(n.map(u=>u.route.path)),l,a,o,!0,s))}async function ME(t,e,r,n,i,a){r.some(u=>{var h;return(h=u._lazyPromises)==null?void 0:h.middleware})&&await Promise.all(r.map(u=>{var h;return(h=u._lazyPromises)==null?void 0:h.middleware}));let o={request:e,unstable_pattern:X1(r.map(u=>u.route.path)),params:r[0].params,context:i,matches:r},l=await t({...o,fetcherKey:n,runClientMiddleware:u=>{let h=o;return Jx(h,()=>u({...h,fetcherKey:n,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(r.flatMap(u=>{var h,d;return[(h=u._lazyPromises)==null?void 0:h.handler,(d=u._lazyPromises)==null?void 0:d.route]}))}catch{}return l}async function FE({request:t,unstable_pattern:e,match:r,lazyHandlerPromise:n,lazyRoutePromise:i,handlerOverride:a,scopedContext:o}){let s,l,u=Pn(t.method),h=u?"action":"loader",d=f=>{let c,y=new Promise((p,g)=>c=g);l=()=>c(),t.signal.addEventListener("abort",l);let v=p=>typeof f!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${h}" [routeId: ${r.route.id}]`)):f({request:t,unstable_pattern:e,params:r.params,context:o},...p!==void 0?[p]:[]),w=(async()=>{try{return{type:"data",result:await(a?a(g=>v(g)):v())}}catch(p){return{type:"error",result:p}}})();return Promise.race([w,y])};try{let f=u?r.route.action:r.route.loader;if(n||i)if(f){let c,[y]=await Promise.all([d(f).catch(v=>{c=v}),n,i]);if(c!==void 0)throw c;s=y}else{await n;let c=u?r.route.action:r.route.loader;if(c)[s]=await Promise.all([d(c),i]);else if(h==="action"){let y=new URL(t.url),v=y.pathname+y.search;throw _i(405,{method:t.method,pathname:v,routeId:r.route.id})}else return{type:"data",result:void 0}}else if(f)s=await d(f);else{let c=new URL(t.url),y=c.pathname+c.search;throw _i(404,{pathname:y})}}catch(f){return{type:"error",result:f}}finally{l&&t.signal.removeEventListener("abort",l)}return s}async function BE(t){let e=t.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?t.body==null?null:t.json():t.text()}async function UE(t){var n,i,a,o,s,l;let{result:e,type:r}=t;if(e4(e)){let u;try{u=await BE(e)}catch(h){return{type:"error",error:h}}return r==="error"?{type:"error",error:new jh(e.status,e.statusText,u),statusCode:e.status,headers:e.headers}:{type:"data",data:u,statusCode:e.status,headers:e.headers}}return r==="error"?j2(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(n=e.init)==null?void 0:n.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new jh(((a=e.init)==null?void 0:a.status)||500,void 0,e.data),statusCode:Gc(e)?e.status:void 0,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Gc(e)?e.status:void 0}:j2(e)?{type:"data",data:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function zE(t,e,r,n,i){let a=t.headers.get("Location");if(Mt(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!sp(a)){let o=n.slice(0,n.findIndex(s=>s.route.id===r)+1);a=ug(new URL(e.url),o,i,a),t.headers.set("Location",a)}return t}function S2(t,e,r){if(sp(t)){let n=t,i=n.startsWith("//")?new URL(e.protocol+n):new URL(n),a=Jn(i.pathname,r)!=null;if(i.origin===e.origin&&a)return i.pathname+i.search+i.hash}return t}function dl(t,e,r,n){let i=t.createURL(Zx(e)).toString(),a={signal:r};if(n&&Pn(n.formMethod)){let{formMethod:o,formEncType:s}=n;a.method=o.toUpperCase(),s==="application/json"?(a.headers=new Headers({"Content-Type":s}),a.body=JSON.stringify(n.json)):s==="text/plain"?a.body=n.text:s==="application/x-www-form-urlencoded"&&n.formData?a.body=fg(n.formData):a.body=n.formData}return new Request(i,a)}function fg(t){let e=new URLSearchParams;for(let[r,n]of t.entries())e.append(r,typeof n=="string"?n:n.name);return e}function k2(t){let e=new FormData;for(let[r,n]of t.entries())e.append(r,n);return e}function qE(t,e,r,n=!1,i=!1){let a={},o=null,s,l=!1,u={},h=r&&ai(r[1])?r[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let f=d.route.id,c=e[f];if(Mt(!hs(c),"Cannot handle redirect results in processLoaderData"),ai(c)){let y=c.error;if(h!==void 0&&(y=h,h=void 0),o=o||{},i)o[f]=y;else{let v=vo(t,f);o[v.route.id]==null&&(o[v.route.id]=y)}n||(a[f]=Gx),l||(l=!0,s=Gc(c.error)?c.error.status:500),c.headers&&(u[f]=c.headers)}else a[f]=c.data,c.statusCode&&c.statusCode!==200&&!l&&(s=c.statusCode),c.headers&&(u[f]=c.headers)}),h!==void 0&&r&&(o={[r[0]]:h},r[2]&&(a[r[2]]=void 0)),{loaderData:a,errors:o,statusCode:s||200,loaderHeaders:u}}function N2(t,e,r,n,i,a){let{loaderData:o,errors:s}=qE(e,r,n);return i.filter(l=>!l.matches||l.matches.some(u=>u.shouldLoad)).forEach(l=>{let{key:u,match:h,controller:d}=l;if(d&&d.signal.aborted)return;let f=a[u];if(Mt(f,"Did not find corresponding fetcher result"),ai(f)){let c=vo(t.matches,h==null?void 0:h.route.id);s&&s[c.route.id]||(s={...s,[c.route.id]:f.error}),t.fetchers.delete(u)}else if(hs(f))Mt(!1,"Unhandled fetcher revalidation redirect");else{let c=Oa(f.data);t.fetchers.set(u,c)}}),{loaderData:o,errors:s}}function E2(t,e,r,n){let i=Object.entries(e).filter(([,a])=>a!==Gx).reduce((a,[o,s])=>(a[o]=s,a),{});for(let a of r){let o=a.route.id;if(!e.hasOwnProperty(o)&&t.hasOwnProperty(o)&&a.route.loader&&(i[o]=t[o]),n&&n.hasOwnProperty(o))break}return i}function A2(t){return t?ai(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function vo(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function df(t){let e=t.length===1?t[0]:t.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function _i(t,{pathname:e,routeId:r,method:n,type:i,message:a}={}){let o="Unknown Server Error",s="Unknown @remix-run/router error";return t===400?(o="Bad Request",n&&e&&r?s=`You made a ${n} request to "${e}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:i==="invalid-body"&&(s="Unable to encode submission body")):t===403?(o="Forbidden",s=`Route "${r}" does not match URL "${e}"`):t===404?(o="Not Found",s=`No route matches URL "${e}"`):t===405&&(o="Method Not Allowed",n&&e&&r?s=`You made a ${n.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(s=`Invalid request method "${n.toUpperCase()}"`)),new jh(t||500,o,new Error(s),!0)}function ff(t){let e=Object.entries(t);for(let r=e.length-1;r>=0;r--){let[n,i]=e[r];if(hs(i))return{key:n,result:i}}}function Zx(t){let e=typeof t=="string"?$a(t):t;return ma({...e,hash:""})}function $E(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function HE(t){return t!=null&&typeof t=="object"&&Object.entries(t).every(([e,r])=>typeof e=="string"&&WE(r))}function WE(t){return t!=null&&typeof t=="object"&&"type"in t&&"result"in t&&(t.type==="data"||t.type==="error")}function VE(t){return e4(t.result)&&EE.has(t.result.status)}function ai(t){return t.type==="error"}function hs(t){return(t&&t.type)==="redirect"}function j2(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function e4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function GE(t){return NE.has(t.toUpperCase())}function Pn(t){return SE.has(t.toUpperCase())}function Z1(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Wf(t,e){let r=typeof e=="string"?$a(e).search:e.search;if(t[t.length-1].route.index&&Z1(r||""))return t[t.length-1];let n=$x(t);return n[n.length-1]}function O2(t){let{formMethod:e,formAction:r,formEncType:n,text:i,formData:a,json:o}=t;if(!(!e||!r||!n)){if(i!=null)return{formMethod:e,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:e,formAction:r,formEncType:n,formData:a,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:r,formEncType:n,formData:void 0,json:o,text:void 0}}}function B0(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function KE(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Yu(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function YE(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Oa(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function JE(t,e){try{let r=t.sessionStorage.getItem(Vx);if(r){let n=JSON.parse(r);for(let[i,a]of Object.entries(n||{}))a&&Array.isArray(a)&&e.set(i,new Set(a||[]))}}catch{}}function XE(t,e){if(e.size>0){let r={};for(let[n,i]of e)r[n]=[...i];try{t.sessionStorage.setItem(Vx,JSON.stringify(r))}catch(n){jr(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function QE(){let t,e,r=new Promise((n,i)=>{t=async a=>{n(a);try{await r}catch{}},e=async a=>{i(a);try{await r}catch{}}});return{promise:r,resolve:t,reject:e}}var js=te.createContext(null);js.displayName="DataRouter";var ad=te.createContext(null);ad.displayName="DataRouterState";te.createContext(!1);var ev=te.createContext({isTransitioning:!1});ev.displayName="ViewTransition";var t4=te.createContext(new Map);t4.displayName="Fetchers";var ZE=te.createContext(null);ZE.displayName="Await";var Xi=te.createContext(null);Xi.displayName="Navigation";var cp=te.createContext(null);cp.displayName="Location";var Li=te.createContext({outlet:null,matches:[],isDataRoute:!1});Li.displayName="Route";var tv=te.createContext(null);tv.displayName="RouteError";function e6(t,{relative:e}={}){Mt(tu(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=te.useContext(Xi),{hash:i,pathname:a,search:o}=od(t,{relative:e}),s=a;return r!=="/"&&(s=a==="/"?r:ha([r,a])),n.createHref({pathname:s,search:o,hash:i})}function tu(){return te.useContext(cp)!=null}function Qi(){return Mt(tu(),"useLocation() may be used only in the context of a <Router> component."),te.useContext(cp).location}var r4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function n4(t){te.useContext(Xi).static||te.useLayoutEffect(t)}function Ha(){let{isDataRoute:t}=te.useContext(Li);return t?m6():t6()}function t6(){Mt(tu(),"useNavigate() may be used only in the context of a <Router> component.");let t=te.useContext(js),{basename:e,navigator:r}=te.useContext(Xi),{matches:n}=te.useContext(Li),{pathname:i}=Qi(),a=JSON.stringify(lp(n)),o=te.useRef(!1);return n4(()=>{o.current=!0}),te.useCallback((l,u={})=>{if(jr(o.current,r4),!o.current)return;if(typeof l=="number"){r.go(l);return}let h=up(l,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ha([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,a,i,t])}var i4=te.createContext(null);function r6(){return te.useContext(i4)}function n6(t){let e=te.useContext(Li).outlet;return te.useMemo(()=>e&&te.createElement(i4.Provider,{value:t},e),[e,t])}function a4(){let{matches:t}=te.useContext(Li),e=t[t.length-1];return e?e.params:{}}function od(t,{relative:e}={}){let{matches:r}=te.useContext(Li),{pathname:n}=Qi(),i=JSON.stringify(lp(r));return te.useMemo(()=>up(t,JSON.parse(i),n,e==="path"),[t,i,n,e])}function i6(t,e,r,n,i){Mt(tu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=te.useContext(Xi),{matches:o}=te.useContext(Li),s=o[o.length-1],l=s?s.params:{},u=s?s.pathname:"/",h=s?s.pathnameBase:"/",d=s&&s.route;{let g=d&&d.path||"";l4(u,!d||g.endsWith("*")||g.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${g}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${g}"> to <Route path="${g==="/"?"*":`${g}/*`}">.`)}let f=Qi(),c;c=f;let y=c.pathname||"/",v=y;if(h!=="/"){let g=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(g.length).join("/")}let w=go(t,{pathname:v});return jr(d||w!=null,`No routes matched location "${c.pathname}${c.search}${c.hash}" `),jr(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${c.pathname}${c.search}${c.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),u6(w&&w.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:ha([h,a.encodeLocation?a.encodeLocation(g.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?h:ha([h,a.encodeLocation?a.encodeLocation(g.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:g.pathnameBase])})),o,r,n,i)}function a6(){let t=f6(),e=Gc(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=te.createElement(te.Fragment,null,te.createElement("p",null," Hey developer "),te.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",te.createElement("code",{style:a},"ErrorBoundary")," or"," ",te.createElement("code",{style:a},"errorElement")," prop on your route.")),te.createElement(te.Fragment,null,te.createElement("h2",null,"Unexpected Application Error!"),te.createElement("h3",{style:{fontStyle:"italic"}},e),r?te.createElement("pre",{style:i},r):null,o)}var o6=te.createElement(a6,null),s6=class extends te.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?te.createElement(Li.Provider,{value:this.props.routeContext},te.createElement(tv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function l6({routeContext:t,match:e,children:r}){let n=te.useContext(js);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),te.createElement(Li.Provider,{value:t},r)}function u6(t,e=[],r=null,n=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=r==null?void 0:r.errors;if(o!=null){let h=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);Mt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let s=!1,l=-1;if(r)for(let h=0;h<a.length;h++){let d=a[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=h),d.route.id){let{loaderData:f,errors:c}=r,y=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!c||c[d.route.id]===void 0);if(d.route.lazy||y){s=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}let u=r&&n?(h,d)=>{var f,c;n(h,{location:r.location,params:((c=(f=r.matches)==null?void 0:f[0])==null?void 0:c.params)??{},errorInfo:d})}:void 0;return a.reduceRight((h,d,f)=>{let c,y=!1,v=null,w=null;r&&(c=o&&d.route.id?o[d.route.id]:void 0,v=d.route.errorElement||o6,s&&(l<0&&f===0?(l4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,w=null):l===f&&(y=!0,w=d.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,f+1)),g=()=>{let b;return c?b=v:y?b=w:d.route.Component?b=te.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=h,te.createElement(l6,{match:d,routeContext:{outlet:h,matches:p,isDataRoute:r!=null},children:b})};return r&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?te.createElement(s6,{location:r.location,revalidation:r.revalidation,component:v,error:c,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0},onError:u}):g()},null)}function rv(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function o4(t){let e=te.useContext(js);return Mt(e,rv(t)),e}function s4(t){let e=te.useContext(ad);return Mt(e,rv(t)),e}function c6(t){let e=te.useContext(Li);return Mt(e,rv(t)),e}function nv(t){let e=c6(t),r=e.matches[e.matches.length-1];return Mt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function d6(){return nv("useRouteId")}function f6(){var n;let t=te.useContext(tv),e=s4("useRouteError"),r=nv("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}var h6=0;function p6(t){let{router:e,basename:r}=o4("useBlocker"),n=s4("useBlocker"),[i,a]=te.useState(""),o=te.useCallback(s=>{if(typeof t!="function")return!!t;if(r==="/")return t(s);let{currentLocation:l,nextLocation:u,historyAction:h}=s;return t({currentLocation:{...l,pathname:Jn(l.pathname,r)||l.pathname},nextLocation:{...u,pathname:Jn(u.pathname,r)||u.pathname},historyAction:h})},[r,t]);return te.useEffect(()=>{let s=String(++h6);return a(s),()=>e.deleteBlocker(s)},[e]),te.useEffect(()=>{i!==""&&e.getBlocker(i,o)},[e,i,o]),i&&n.blockers.has(i)?n.blockers.get(i):cl}function m6(){let{router:t}=o4("useNavigate"),e=nv("useNavigate"),r=te.useRef(!1);return n4(()=>{r.current=!0}),te.useCallback(async(i,a={})=>{jr(r.current,r4),r.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var L2={};function l4(t,e,r){!e&&!L2[t]&&(L2[t]=!0,jr(!1,r))}var P2={};function T2(t,e){!t&&!P2[e]&&(P2[e]=!0,console.warn(e))}function g6(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&jr(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:te.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&jr(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:te.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&jr(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:te.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var v6=["HydrateFallback","hydrateFallbackElement"],y6=class{constructor(){this.status="pending",this.promise=new Promise((e,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}};function w6({router:t,flushSync:e,unstable_onError:r}){let[n,i]=te.useState(t.state),[a,o]=te.useState(),[s,l]=te.useState({isTransitioning:!1}),[u,h]=te.useState(),[d,f]=te.useState(),[c,y]=te.useState(),v=te.useRef(new Map),w=te.useCallback(E=>{i(C=>(E.errors&&r&&Object.entries(E.errors).forEach(([A,P])=>{var F,T;((F=C.errors)==null?void 0:F[A])!==P&&r(P,{location:E.location,params:((T=E.matches[0])==null?void 0:T.params)??{}})}),E))},[r]),p=te.useCallback((E,{deletedFetchers:C,flushSync:A,viewTransitionOpts:P})=>{E.fetchers.forEach((T,k)=>{T.data!==void 0&&v.current.set(k,T.data)}),C.forEach(T=>v.current.delete(T)),T2(A===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let F=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(T2(P==null||F,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!P||!F){e&&A?e(()=>w(E)):te.startTransition(()=>w(E));return}if(e&&A){e(()=>{d&&(u&&u.resolve(),d.skipTransition()),l({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let T=t.window.document.startViewTransition(()=>{e(()=>w(E))});T.finished.finally(()=>{e(()=>{h(void 0),f(void 0),o(void 0),l({isTransitioning:!1})})}),e(()=>f(T));return}d?(u&&u.resolve(),d.skipTransition(),y({state:E,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(o(E),l({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[t.window,e,d,u,w]);te.useLayoutEffect(()=>t.subscribe(p),[t,p]),te.useEffect(()=>{s.isTransitioning&&!s.flushSync&&h(new y6)},[s]),te.useEffect(()=>{if(u&&a&&t.window){let E=a,C=u.promise,A=t.window.document.startViewTransition(async()=>{te.startTransition(()=>w(E)),await C});A.finished.finally(()=>{h(void 0),f(void 0),o(void 0),l({isTransitioning:!1})}),f(A)}},[a,u,t.window,w]),te.useEffect(()=>{u&&a&&n.location.key===a.location.key&&u.resolve()},[u,d,n.location,a]),te.useEffect(()=>{!s.isTransitioning&&c&&(o(c.state),l({isTransitioning:!0,flushSync:!1,currentLocation:c.currentLocation,nextLocation:c.nextLocation}),y(void 0))},[s.isTransitioning,c]);let g=te.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:E=>t.navigate(E),push:(E,C,A)=>t.navigate(E,{state:C,preventScrollReset:A==null?void 0:A.preventScrollReset}),replace:(E,C,A)=>t.navigate(E,{replace:!0,state:C,preventScrollReset:A==null?void 0:A.preventScrollReset})}),[t]),b=t.basename||"/",_=te.useMemo(()=>({router:t,navigator:g,static:!1,basename:b,unstable_onError:r}),[t,g,b,r]);return te.createElement(te.Fragment,null,te.createElement(js.Provider,{value:_},te.createElement(ad.Provider,{value:n},te.createElement(t4.Provider,{value:v.current},te.createElement(ev.Provider,{value:s},te.createElement(S6,{basename:b,location:n.location,navigationType:n.historyAction,navigator:g},te.createElement(b6,{routes:t.routes,future:t.future,state:n,unstable_onError:r})))))),null)}var b6=te.memo(x6);function x6({routes:t,future:e,state:r,unstable_onError:n}){return i6(t,void 0,r,n,e)}function hg({to:t,replace:e,state:r,relative:n}){Mt(tu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=te.useContext(Xi);jr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=te.useContext(Li),{pathname:o}=Qi(),s=Ha(),l=up(t,lp(a),o,n==="path"),u=JSON.stringify(l);return te.useEffect(()=>{s(JSON.parse(u),{replace:e,state:r,relative:n})},[s,u,n,e,r]),null}function _6(t){return n6(t.context)}function S6({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:i,static:a=!1}){Mt(!tu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),s=te.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof r=="string"&&(r=$a(r));let{pathname:l="/",search:u="",hash:h="",state:d=null,key:f="default"}=r,c=te.useMemo(()=>{let y=Jn(l,o);return y==null?null:{location:{pathname:y,search:u,hash:h,state:d,key:f},navigationType:n}},[o,l,u,h,d,f,n]);return jr(c!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),c==null?null:te.createElement(Xi.Provider,{value:s},te.createElement(cp.Provider,{children:e,value:c}))}var Vf="get",Gf="application/x-www-form-urlencoded";function dp(t){return t!=null&&typeof t.tagName=="string"}function k6(t){return dp(t)&&t.tagName.toLowerCase()==="button"}function N6(t){return dp(t)&&t.tagName.toLowerCase()==="form"}function E6(t){return dp(t)&&t.tagName.toLowerCase()==="input"}function A6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function j6(t,e){return t.button===0&&(!e||e==="_self")&&!A6(t)}var hf=null;function O6(){if(hf===null)try{new FormData(document.createElement("form"),0),hf=!1}catch{hf=!0}return hf}var L6=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function U0(t){return t!=null&&!L6.has(t)?(jr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gf}"`),null):t}function P6(t,e){let r,n,i,a,o;if(N6(t)){let s=t.getAttribute("action");n=s?Jn(s,e):null,r=t.getAttribute("method")||Vf,i=U0(t.getAttribute("enctype"))||Gf,a=new FormData(t)}else if(k6(t)||E6(t)&&(t.type==="submit"||t.type==="image")){let s=t.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||s.getAttribute("action");if(n=l?Jn(l,e):null,r=t.getAttribute("formmethod")||s.getAttribute("method")||Vf,i=U0(t.getAttribute("formenctype"))||U0(s.getAttribute("enctype"))||Gf,a=new FormData(s,t),!O6()){let{name:u,type:h,value:d}=t;if(h==="image"){let f=u?`${u}.`:"";a.append(`${f}x`,"0"),a.append(`${f}y`,"0")}else u&&a.append(u,d)}}else{if(dp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Vf,n=null,i=Gf,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function iv(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function T6(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&Jn(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function C6(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function R6(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function I6(t,e,r){let n=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await C6(a,r);return o.links?o.links():[]}return[]}));return B6(n.flat(1).filter(R6).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function C2(t,e,r,n,i,a){let o=(l,u)=>r[u]?l.route.id!==r[u].route.id:!0,s=(l,u)=>{var h;return r[u].pathname!==l.pathname||((h=r[u].route.path)==null?void 0:h.endsWith("*"))&&r[u].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,u)=>o(l,u)||s(l,u)):a==="data"?e.filter((l,u)=>{var d;let h=n.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,u)||s(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=r[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function D6(t,e,{includeHydrateFallback:r}={}){return M6(t.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function M6(t){return[...new Set(t)]}function F6(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function B6(t,e){let r=new Set;return new Set(e),t.reduce((n,i)=>{let a=JSON.stringify(F6(i));return r.has(a)||(r.add(a),n.push({key:a,link:i})),n},[])}function u4(){let t=te.useContext(js);return iv(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function U6(){let t=te.useContext(ad);return iv(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var av=te.createContext(void 0);av.displayName="FrameworkContext";function c4(){let t=te.useContext(av);return iv(t,"You must render this element inside a <HydratedRouter> element"),t}function z6(t,e){let r=te.useContext(av),[n,i]=te.useState(!1),[a,o]=te.useState(!1),{onFocus:s,onBlur:l,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=e,f=te.useRef(null);te.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let v=p=>{p.forEach(g=>{o(g.isIntersecting)})},w=new IntersectionObserver(v,{threshold:.5});return f.current&&w.observe(f.current),()=>{w.disconnect()}}},[t]),te.useEffect(()=>{if(n){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[n]);let c=()=>{i(!0)},y=()=>{i(!1),o(!1)};return r?t!=="intent"?[a,f,{}]:[a,f,{onFocus:Ju(s,c),onBlur:Ju(l,y),onMouseEnter:Ju(u,c),onMouseLeave:Ju(h,y),onTouchStart:Ju(d,c)}]:[!1,f,{}]}function Ju(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function q6({page:t,...e}){let{router:r}=u4(),n=te.useMemo(()=>go(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?te.createElement(H6,{page:t,matches:n,...e}):null}function $6(t){let{manifest:e,routeModules:r}=c4(),[n,i]=te.useState([]);return te.useEffect(()=>{let a=!1;return I6(t,e,r).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,r]),n}function H6({page:t,matches:e,...r}){let n=Qi(),{manifest:i,routeModules:a}=c4(),{basename:o}=u4(),{loaderData:s,matches:l}=U6(),u=te.useMemo(()=>C2(t,e,l,i,n,"data"),[t,e,l,i,n]),h=te.useMemo(()=>C2(t,e,l,i,n,"assets"),[t,e,l,i,n]),d=te.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let y=new Set,v=!1;if(e.forEach(p=>{var b;let g=i.routes[p.route.id];!g||!g.hasLoader||(!u.some(_=>_.route.id===p.route.id)&&p.route.id in s&&((b=a[p.route.id])!=null&&b.shouldRevalidate)||g.hasClientLoader?v=!0:y.add(p.route.id))}),y.size===0)return[];let w=T6(t,o,"data");return v&&y.size>0&&w.searchParams.set("_routes",e.filter(p=>y.has(p.route.id)).map(p=>p.route.id).join(",")),[w.pathname+w.search]},[o,s,n,i,u,e,t,a]),f=te.useMemo(()=>D6(h,i),[h,i]),c=$6(h);return te.createElement(te.Fragment,null,d.map(y=>te.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),f.map(y=>te.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),c.map(({key:y,link:v})=>te.createElement("link",{key:y,nonce:r.nonce,...v})))}function W6(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var d4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{d4&&(window.__reactRouterVersion="7.9.6")}catch{}function V6(t,e){return LE({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:HN({window:e==null?void 0:e.window}),hydrationData:G6(),routes:t,mapRouteProperties:g6,hydrationRouteProperties:v6,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function G6(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:K6(t.errors)}),t}function K6(t){if(!t)return null;let e=Object.entries(t),r={};for(let[n,i]of e)if(i&&i.__type==="RouteErrorResponse")r[n]=new jh(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let o=new a(i.message);o.stack="",r[n]=o}catch{}}if(r[n]==null){let a=new Error(i.message);a.stack="",r[n]=a}}else r[n]=i;return r}var f4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yl=te.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:i,reloadDocument:a,replace:o,state:s,target:l,to:u,preventScrollReset:h,viewTransition:d,...f},c){let{basename:y}=te.useContext(Xi),v=typeof u=="string"&&f4.test(u),w,p=!1;if(typeof u=="string"&&v&&(w=u,d4))try{let F=new URL(window.location.href),T=u.startsWith("//")?new URL(F.protocol+u):new URL(u),k=Jn(T.pathname,y);T.origin===F.origin&&k!=null?u=k+T.search+T.hash:p=!0}catch{jr(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=e6(u,{relative:i}),[b,_,E]=z6(n,f),C=X6(u,{replace:o,state:s,target:l,preventScrollReset:h,relative:i,viewTransition:d});function A(F){e&&e(F),F.defaultPrevented||C(F)}let P=te.createElement("a",{...f,...E,href:w||g,onClick:p||a?e:A,ref:W6(c,_),target:l,"data-discover":!v&&r==="render"?"true":void 0});return b&&!v?te.createElement(te.Fragment,null,P,te.createElement(q6,{page:g})):P});Yl.displayName="Link";var pg=te.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:i=!1,style:a,to:o,viewTransition:s,children:l,...u},h){let d=od(o,{relative:u.relative}),f=Qi(),c=te.useContext(ad),{navigator:y,basename:v}=te.useContext(Xi),w=c!=null&&rA(d)&&s===!0,p=y.encodeLocation?y.encodeLocation(d).pathname:d.pathname,g=f.pathname,b=c&&c.navigation&&c.navigation.location?c.navigation.location.pathname:null;r||(g=g.toLowerCase(),b=b?b.toLowerCase():null,p=p.toLowerCase()),b&&v&&(b=Jn(b,v)||b);const _=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let E=g===p||!i&&g.startsWith(p)&&g.charAt(_)==="/",C=b!=null&&(b===p||!i&&b.startsWith(p)&&b.charAt(p.length)==="/"),A={isActive:E,isPending:C,isTransitioning:w},P=E?e:void 0,F;typeof n=="function"?F=n(A):F=[n,E?"active":null,C?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let T=typeof a=="function"?a(A):a;return te.createElement(Yl,{...u,"aria-current":P,className:F,ref:h,style:T,to:o,viewTransition:s},typeof l=="function"?l(A):l)});pg.displayName="NavLink";var Y6=te.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:i,state:a,method:o=Vf,action:s,onSubmit:l,relative:u,preventScrollReset:h,viewTransition:d,...f},c)=>{let y=eA(),v=tA(s,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",p=typeof s=="string"&&f4.test(s),g=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let _=b.nativeEvent.submitter,E=(_==null?void 0:_.getAttribute("formmethod"))||o;y(_||b.currentTarget,{fetcherKey:e,method:E,navigate:r,replace:i,state:a,relative:u,preventScrollReset:h,viewTransition:d})};return te.createElement("form",{ref:c,method:w,action:v,onSubmit:n?l:g,...f,"data-discover":!p&&t==="render"?"true":void 0})});Y6.displayName="Form";function J6(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h4(t){let e=te.useContext(js);return Mt(e,J6(t)),e}function X6(t,{target:e,replace:r,state:n,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=Ha(),l=Qi(),u=od(t,{relative:a});return te.useCallback(h=>{if(j6(h,e)){h.preventDefault();let d=r!==void 0?r:ma(l)===ma(u);s(t,{replace:d,state:n,preventScrollReset:i,relative:a,viewTransition:o})}},[l,s,u,r,n,e,t,i,a,o])}var Q6=0,Z6=()=>`__${String(++Q6)}__`;function eA(){let{router:t}=h4("useSubmit"),{basename:e}=te.useContext(Xi),r=d6();return te.useCallback(async(n,i={})=>{let{action:a,method:o,encType:s,formData:l,body:u}=P6(n,e);if(i.navigate===!1){let h=i.fetcherKey||Z6();await t.fetch(h,r,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,r])}function tA(t,{relative:e}={}){let{basename:r}=te.useContext(Xi),n=te.useContext(Li);Mt(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...od(t||".",{relative:e})},o=Qi();if(t==null){a.search=o.search;let s=new URLSearchParams(a.search),l=s.getAll("index");if(l.some(h=>h==="")){s.delete("index"),l.filter(d=>d).forEach(d=>s.append("index",d));let h=s.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:ha([r,a.pathname])),ma(a)}function rA(t,{relative:e}={}){let r=te.useContext(ev);Mt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=h4("useViewTransitionState"),i=od(t,{relative:e});if(!r.isTransitioning)return!1;let a=Jn(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Jn(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Ah(i.pathname,o)!=null||Ah(i.pathname,a)!=null}function nA(t){return te.createElement(w6,{flushSync:op.flushSync,...t})}var mg=function(t,e){return mg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},mg(t,e)};function ov(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");mg(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Hr=function(){return Hr=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Hr.apply(this,arguments)};function ru(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function p4(t,e,r,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function m4(t,e){return function(r,n){e(r,n,t)}}function g4(t,e,r,n,i,a){function o(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var s=n.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,h=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,f=!1,c=r.length-1;c>=0;c--){var y={};for(var v in n)y[v]=v==="access"?{}:n[v];for(var v in n.access)y.access[v]=n.access[v];y.addInitializer=function(p){if(f)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(p||null))};var w=(0,r[c])(s==="accessor"?{get:h.get,set:h.set}:h[l],y);if(s==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(d=o(w.get))&&(h.get=d),(d=o(w.set))&&(h.set=d),(d=o(w.init))&&i.unshift(d)}else(d=o(w))&&(s==="field"?i.unshift(d):h[l]=d)}u&&Object.defineProperty(u,n.name,h),f=!0}function v4(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function y4(t){return typeof t=="symbol"?t:"".concat(t)}function w4(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function b4(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function dt(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(h){try{u(n.next(h))}catch(d){o(d)}}function l(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?a(h.value):i(h.value).then(s,l)}u((n=n.apply(t,e||[])).next())})}function x4(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(h){return l([u,h])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(h){u=[6,h],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var fp=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function _4(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&fp(e,t,r)}function Lh(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sv(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function S4(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(sv(arguments[e]));return t}function k4(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function N4(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function Jl(t){return this instanceof Jl?(this.v=t,this):new Jl(t)}function E4(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(c){return function(y){return Promise.resolve(y).then(c,d)}}function s(c,y){n[c]&&(i[c]=function(v){return new Promise(function(w,p){a.push([c,v,w,p])>1||l(c,v)})},y&&(i[c]=y(i[c])))}function l(c,y){try{u(n[c](y))}catch(v){f(a[0][3],v)}}function u(c){c.value instanceof Jl?Promise.resolve(c.value.v).then(h,d):f(a[0][2],c)}function h(c){l("next",c)}function d(c){l("throw",c)}function f(c,y){c(y),a.shift(),a.length&&l(a[0][0],a[0][1])}}function A4(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=t[i]?function(o){return(r=!r)?{value:Jl(t[i](o)),done:!1}:a?a(o):o}:a}}function j4(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Lh=="function"?Lh(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(o){return new Promise(function(s,l){o=t[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}function O4(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var iA=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},gg=function(t){return gg=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},gg(t)};function L4(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=gg(t),n=0;n<r.length;n++)r[n]!=="default"&&fp(e,t,r[n]);return iA(e,t),e}function P4(t){return t&&t.__esModule?t:{default:t}}function T4(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function C4(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function R4(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function I4(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var aA=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function D4(t){function e(a){t.error=t.hasError?new aA(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function M4(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,a,o){return n?e?".jsx":".js":i&&(!a||!o)?r:i+a+"."+o.toLowerCase()+"js"}):t}const oA={__extends:ov,__assign:Hr,__rest:ru,__decorate:p4,__param:m4,__esDecorate:g4,__runInitializers:v4,__propKey:y4,__setFunctionName:w4,__metadata:b4,__awaiter:dt,__generator:x4,__createBinding:fp,__exportStar:_4,__values:Lh,__read:sv,__spread:S4,__spreadArrays:k4,__spreadArray:N4,__await:Jl,__asyncGenerator:E4,__asyncDelegator:A4,__asyncValues:j4,__makeTemplateObject:O4,__importStar:L4,__importDefault:P4,__classPrivateFieldGet:T4,__classPrivateFieldSet:C4,__classPrivateFieldIn:R4,__addDisposableResource:I4,__disposeResources:D4,__rewriteRelativeImportExtension:M4},sA=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:I4,get __assign(){return Hr},__asyncDelegator:A4,__asyncGenerator:E4,__asyncValues:j4,__await:Jl,__awaiter:dt,__classPrivateFieldGet:T4,__classPrivateFieldIn:R4,__classPrivateFieldSet:C4,__createBinding:fp,__decorate:p4,__disposeResources:D4,__esDecorate:g4,__exportStar:_4,__extends:ov,__generator:x4,__importDefault:P4,__importStar:L4,__makeTemplateObject:O4,__metadata:b4,__param:m4,__propKey:y4,__read:sv,__rest:ru,__rewriteRelativeImportExtension:M4,__runInitializers:v4,__setFunctionName:w4,__spread:S4,__spreadArray:N4,__spreadArrays:k4,__values:Lh,default:oA},Symbol.toStringTag,{value:"Module"})),lA=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class lv extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class uA extends lv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class R2 extends lv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class I2 extends lv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var vg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(vg||(vg={}));class cA{constructor(e,{headers:r={},customFetch:n,region:i=vg.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=lA(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return dt(this,arguments,void 0,function*(r,n={}){var i;let a,o;try{const{headers:s,method:l,body:u,signal:h,timeout:d}=n;let f={},{region:c}=n;c||(c=this.region);const y=new URL(`${this.url}/${r}`);c&&c!=="any"&&(f["x-region"]=c,y.searchParams.set("forceFunctionRegion",c));let v;u&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(f["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(f["Content-Type"]="application/json",v=JSON.stringify(u)):v=u;let w=h;d&&(o=new AbortController,a=setTimeout(()=>o.abort(),d),h?(w=o.signal,h.addEventListener("abort",()=>o.abort())):w=o.signal);const p=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),s),body:v,signal:w}).catch(E=>{throw new uA(E)}),g=p.headers.get("x-relay-error");if(g&&g==="true")throw new R2(p);if(!p.ok)throw new I2(p);let b=((i=p.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield p.json():b==="application/octet-stream"||b==="application/pdf"?_=yield p.blob():b==="text/event-stream"?_=p:b==="multipart/form-data"?_=yield p.formData():_=yield p.text(),{data:_,error:null,response:p}}catch(s){return{data:null,error:s,response:s instanceof I2||s instanceof R2?s.context:void 0}}finally{a&&clearTimeout(a)}})}}var Tn={};const nu=mS(sA);var pf={},mf={},gf={},vf={},yf={},wf={},D2;function F4(){if(D2)return wf;D2=1,Object.defineProperty(wf,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return wf.default=t,wf}var M2;function B4(){if(M2)return yf;M2=1,Object.defineProperty(yf,"__esModule",{value:!0});const e=nu.__importDefault(F4());class r{constructor(i){var a,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let s=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,h,d,f;let c=null,y=null,v=null,w=l.status,p=l.statusText;if(l.ok){if(this.method!=="HEAD"){const E=await l.text();E===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?y=E:y=JSON.parse(E))}const b=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),_=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");b&&_&&_.length>1&&(v=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(c={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,v=null,w=406,p="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const b=await l.text();try{c=JSON.parse(b),Array.isArray(c)&&l.status===404&&(y=[],c=null,w=200,p="OK")}catch{l.status===404&&b===""?(w=204,p="No Content"):c={message:b}}if(c&&this.isMaybeSingle&&(!((f=c==null?void 0:c.details)===null||f===void 0)&&f.includes("0 rows"))&&(c=null,w=200,p="OK"),c&&this.shouldThrowOnError)throw new e.default(c)}return{error:c,data:y,count:v,status:w,statusText:p}});return this.shouldThrowOnError||(s=s.catch(l=>{var u,h,d,f,c,y;let v="";const w=l==null?void 0:l.cause;if(w){const p=(u=w==null?void 0:w.message)!==null&&u!==void 0?u:"",g=(h=w==null?void 0:w.code)!==null&&h!==void 0?h:"";v=`${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"FetchError"}: ${l==null?void 0:l.message}`,v+=`

Caused by: ${(f=w==null?void 0:w.name)!==null&&f!==void 0?f:"Error"}: ${p}`,g&&(v+=` (${g})`),w!=null&&w.stack&&(v+=`
${w.stack}`)}else v=(c=l==null?void 0:l.stack)!==null&&c!==void 0?c:"";return{error:{message:`${(y=l==null?void 0:l.name)!==null&&y!==void 0?y:"FetchError"}: ${l==null?void 0:l.message}`,details:v,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(i,a)}returns(){return this}overrideTypes(){return this}}return yf.default=r,yf}var F2;function U4(){if(F2)return vf;F2=1,Object.defineProperty(vf,"__esModule",{value:!0});const e=nu.__importDefault(B4());class r extends e.default{select(i){let a=!1;const o=(i??"*").split("").map(s=>/\s/.test(s)&&!a?"":(s==='"'&&(a=!a),s)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:s,referencedTable:l=s}={}){const u=l?`${l}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const s=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:s=o}={}){const l=typeof s>"u"?"offset":`${s}.offset`,u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:s=!1,wal:l=!1,format:u="text"}={}){var h;const d=[i?"analyze":null,a?"verbose":null,o?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${f}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return vf.default=r,vf}var B2;function uv(){if(B2)return gf;B2=1,Object.defineProperty(gf,"__esModule",{value:!0});const e=nu.__importDefault(U4()),r=new RegExp("[,()]");class n extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}regexMatch(a,o){return this.url.searchParams.append(a,`match.${o}`),this}regexIMatch(a,o){return this.url.searchParams.append(a,`imatch.${o}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}isDistinct(a,o){return this.url.searchParams.append(a,`isdistinct.${o}`),this}in(a,o){const s=Array.from(new Set(o)).map(l=>typeof l=="string"&&r.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`in.(${s})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:s,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const h=s===void 0?"":`(${s})`;return this.url.searchParams.append(a,`${u}fts${h}.${o}`),this}match(a){return Object.entries(a).forEach(([o,s])=>{this.url.searchParams.append(o,`eq.${s}`)}),this}not(a,o,s){return this.url.searchParams.append(a,`not.${o}.${s}`),this}or(a,{foreignTable:o,referencedTable:s=o}={}){const l=s?`${s}.or`:"or";return this.url.searchParams.append(l,`(${a})`),this}filter(a,o,s){return this.url.searchParams.append(a,`${o}.${s}`),this}}return gf.default=n,gf}var U2;function z4(){if(U2)return mf;U2=1,Object.defineProperty(mf,"__esModule",{value:!0});const e=nu.__importDefault(uv());class r{constructor(i,{headers:a={},schema:o,fetch:s}){this.url=i,this.headers=new Headers(a),this.schema=o,this.fetch=s}select(i,a){const{head:o=!1,count:s}=a??{},l=o?"HEAD":"GET";let u=!1;const h=(i??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",h),s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:o=!0}={}){var s;const l="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((h,d)=>h.concat(Object.keys(d)),[]);if(u.length>0){const h=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:s,defaultToNull:l=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((f,c)=>f.concat(Object.keys(c)),[]);if(d.length>0){const f=[...new Set(d)].map(c=>`"${c}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:a}={}){var o;const s="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var a;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return mf.default=r,mf}var z2;function dA(){if(z2)return pf;z2=1,Object.defineProperty(pf,"__esModule",{value:!0});const t=nu,e=t.__importDefault(z4()),r=t.__importDefault(uv());class n{constructor(a,{headers:o={},schema:s,fetch:l}={}){this.url=a,this.headers=new Headers(o),this.schemaName=s,this.fetch=l}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:s=!1,get:l=!1,count:u}={}){var h;let d;const f=new URL(`${this.url}/rpc/${a}`);let c;s||l?(d=s?"HEAD":"GET",Object.entries(o).filter(([v,w])=>w!==void 0).map(([v,w])=>[v,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([v,w])=>{f.searchParams.append(v,w)})):(d="POST",c=o);const y=new Headers(this.headers);return u&&y.set("Prefer",`count=${u}`),new r.default({method:d,url:f,headers:y,schema:this.schemaName,body:c,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return pf.default=n,pf}Object.defineProperty(Tn,"__esModule",{value:!0});var q4=Tn.PostgrestError=Q4=Tn.PostgrestBuilder=J4=Tn.PostgrestTransformBuilder=K4=Tn.PostgrestFilterBuilder=V4=Tn.PostgrestQueryBuilder=H4=Tn.PostgrestClient=void 0;const iu=nu,$4=iu.__importDefault(dA());var H4=Tn.PostgrestClient=$4.default;const W4=iu.__importDefault(z4());var V4=Tn.PostgrestQueryBuilder=W4.default;const G4=iu.__importDefault(uv());var K4=Tn.PostgrestFilterBuilder=G4.default;const Y4=iu.__importDefault(U4());var J4=Tn.PostgrestTransformBuilder=Y4.default;const X4=iu.__importDefault(B4());var Q4=Tn.PostgrestBuilder=X4.default;const Z4=iu.__importDefault(F4());q4=Tn.PostgrestError=Z4.default;var e_=Tn.default={PostgrestClient:$4.default,PostgrestQueryBuilder:W4.default,PostgrestFilterBuilder:G4.default,PostgrestTransformBuilder:Y4.default,PostgrestBuilder:X4.default,PostgrestError:Z4.default};const fA=pS({__proto__:null,get PostgrestBuilder(){return Q4},get PostgrestClient(){return H4},get PostgrestError(){return q4},get PostgrestFilterBuilder(){return K4},get PostgrestQueryBuilder(){return V4},get PostgrestTransformBuilder(){return J4},default:e_},[Tn]),{PostgrestClient:hA,PostgrestQueryBuilder:B9,PostgrestFilterBuilder:U9,PostgrestTransformBuilder:z9,PostgrestBuilder:q9,PostgrestError:$9}=e_||fA;class pA{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const mA="2.86.0",gA=`realtime-js/${mA}`,t_="1.0.0",vA="2.0.0",q2=t_,yg=1e4,yA=1e3,wA=100;var as;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(as||(as={}));var Kr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Kr||(Kr={}));var Vi;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vi||(Vi={}));var wg;(function(t){t.websocket="websocket"})(wg||(wg={}));var os;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(os||(os={}));class bA{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var i,a;const o=e.topic,s=(i=e.ref)!==null&&i!==void 0?i:"",l=(a=e.join_ref)!==null&&a!==void 0?a:"",u=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(h).length===0?"":JSON.stringify(h);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+s.length+o.length+u.length+d.length,c=new ArrayBuffer(this.HEADER_LENGTH+f);let y=new DataView(c),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,l.length),y.setUint8(v++,s.length),y.setUint8(v++,o.length),y.setUint8(v++,u.length),y.setUint8(v++,d.length),y.setUint8(v++,r),Array.from(l,p=>y.setUint8(v++,p.charCodeAt(0))),Array.from(s,p=>y.setUint8(v++,p.charCodeAt(0))),Array.from(o,p=>y.setUint8(v++,p.charCodeAt(0))),Array.from(u,p=>y.setUint8(v++,p.charCodeAt(0))),Array.from(d,p=>y.setUint8(v++,p.charCodeAt(0)));var w=new Uint8Array(c.byteLength+n.byteLength);return w.set(new Uint8Array(c),0),w.set(new Uint8Array(n),c.byteLength),w.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,a,o,s,l]=n;return r({join_ref:i,ref:a,topic:o,event:s,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,i)}}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),a=r.getUint8(2),o=r.getUint8(3),s=r.getUint8(4);let l=this.HEADER_LENGTH+4;const u=n.decode(e.slice(l,l+i));l=l+i;const h=n.decode(e.slice(l,l+a));l=l+a;const d=n.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),c=s===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,y={type:this.BROADCAST_EVENT,event:h,payload:c};return o>0&&(y.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class r_{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var hr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(hr||(hr={}));const $2=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((a,o)=>(a[o]=xA(o,t,e,i),a),{}):{}},xA=(t,e,r,n)=>{const i=e.find(s=>s.name===t),a=i==null?void 0:i.type,o=r[t];return a&&!n.includes(a)?n_(a,o):bg(o)},n_=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return NA(e,r)}switch(t){case hr.bool:return _A(e);case hr.float4:case hr.float8:case hr.int2:case hr.int4:case hr.int8:case hr.numeric:case hr.oid:return SA(e);case hr.json:case hr.jsonb:return kA(e);case hr.timestamp:return EA(e);case hr.abstime:case hr.date:case hr.daterange:case hr.int4range:case hr.int8range:case hr.money:case hr.reltime:case hr.text:case hr.time:case hr.timestamptz:case hr.timetz:case hr.tsrange:case hr.tstzrange:return bg(e);default:return bg(e)}},bg=t=>t,_A=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},SA=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},kA=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},NA=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(s=>n_(e,s))}return t},EA=t=>typeof t=="string"?t.replace(" ","T"):t,i_=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class z0{constructor(e,r,n={},i=yg){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var H2;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(H2||(H2={}));class Nc{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nc.syncState(this.state,i,a,o),this.pendingDiffs.forEach(l=>{this.state=Nc.syncDiff(this.state,l,a,o)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Nc.syncDiff(this.state,i,a,o),s())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const a=this.cloneDeep(e),o=this.transformState(r),s={},l={};return this.map(a,(u,h)=>{o[u]||(l[u]=h)}),this.map(o,(u,h)=>{const d=a[u];if(d){const f=h.map(w=>w.presence_ref),c=d.map(w=>w.presence_ref),y=h.filter(w=>c.indexOf(w.presence_ref)<0),v=d.filter(w=>f.indexOf(w.presence_ref)<0);y.length>0&&(s[u]=y),v.length>0&&(l[u]=v)}else s[u]=h}),this.syncDiff(a,{joins:s,leaves:l},n,i)}static syncDiff(e,r,n,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(s,l)=>{var u;const h=(u=e[s])!==null&&u!==void 0?u:[];if(e[s]=this.cloneDeep(l),h.length>0){const d=e[s].map(c=>c.presence_ref),f=h.filter(c=>d.indexOf(c.presence_ref)<0);e[s].unshift(...f)}n(s,h,l)}),this.map(o,(s,l)=>{let u=e[s];if(!u)return;const h=l.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),e[s]=u,i(s,u,l),u.length===0&&delete e[s]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var W2;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(W2||(W2={}));var Ec;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ec||(Ec={}));var Ta;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ta||(Ta={}));class cv{constructor(e,r={config:{}},n){var i,a;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Kr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new z0(this,Vi.join,this.params,this.timeout),this.rejoinTimer=new r_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Kr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Kr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Kr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Kr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Kr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vi.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new Nc(this),this.broadcastEndpointURL=i_(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Kr.closed){const{config:{broadcast:o,presence:s,private:l}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(c=>c.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Ec.PRESENCE]&&this.bindings[Ec.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},s),{enabled:h}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(c=>e==null?void 0:e(Ta.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(Ta.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:c})=>{var y;if(this.socket.setAuth(),c===void 0){e==null||e(Ta.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,w=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,p=[];for(let g=0;g<w;g++){const b=v[g],{filter:{event:_,schema:E,table:C,filter:A}}=b,P=c&&c[g];if(P&&P.event===_&&P.schema===E&&P.table===C&&P.filter===A)p.push(Object.assign(Object.assign({},b),{id:P.id}));else{this.unsubscribe(),this.state=Kr.errored,e==null||e(Ta.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Ta.SUBSCRIBED);return}}).receive("error",c=>{this.state=Kr.errored,e==null||e(Ta.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ta.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Kr.joined&&e===Ec.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let l=s.statusText;try{const u=await s.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,s,l;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(s=(o=this.params)===null||o===void 0?void 0:o.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Kr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vi.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new z0(this,Vi.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Kr.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new z0(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>wA){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,a;const o=e.toLocaleLowerCase(),{close:s,error:l,leave:u,join:h}=Vi;if(n&&[s,l,u,h].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(c=>{var y,v,w;return((y=c.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(v=c.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(c=>c.callback(f,n)):(a=this.bindings[o])===null||a===void 0||a.filter(c=>{var y,v,w,p,g,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in c){const _=c.id,E=(y=c.filter)===null||y===void 0?void 0:y.event;return _&&((v=r.ids)===null||v===void 0?void 0:v.includes(_))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(g=(p=c==null?void 0:c.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return _==="*"||_===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return c.type.toLocaleLowerCase()===o}).map(c=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:v,table:w,commit_timestamp:p,type:g,errors:b}=y;f=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:p,eventType:g,new:{},old:{},errors:b}),this._getPayloadRecords(y))}c.callback(f,n)})}_isClosed(){return this.state===Kr.closed}_isJoined(){return this.state===Kr.joined}_isJoining(){return this.state===Kr.joining}_isLeaving(){return this.state===Kr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&cv.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vi.close,{},e)}_onError(e){this._on(Vi.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Kr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=$2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=$2(e.columns,e.old_record)),r}}const q0=()=>{},bf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},AA=[1e3,2e3,5e3,1e4],jA=1e4,OA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class LA{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yg,this.transport=null,this.heartbeatIntervalMs=bf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=q0,this.ref=0,this.reconnectTimer=null,this.vsn=q2,this.logger=q0,this.conn=null,this.sendBuffer=[],this.serializer=new bA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${wg.websocket}`,this.httpEndpoint=i_(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=pA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case as.connecting:return os.Connecting;case as.open:return os.Open;case as.closing:return os.Closing;default:return os.Closed}}isConnected(){return this.connectionState()===os.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new cv(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:i,ref:a}=e,o=()=>{this.encode(e,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(yA,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},bf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:o}=r,s=o?`(${o})`:"",l=a.status||"";this.log("receive",`${l} ${n} ${i} ${s}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===as.open||this.conn.readyState===as.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vi.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([OA],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:gA};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Vi.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new r_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},bf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,a,o,s,l,u,h,d,f,c;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:yg,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:bf.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(s=e==null?void 0:e.heartbeatCallback)!==null&&s!==void 0?s:q0,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:q2,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:y=>AA[y-1]||jA,this.vsn){case t_:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(y,v)=>v(JSON.stringify(y)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(y,v)=>v(JSON.parse(y));break;case vA:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(c=e==null?void 0:e.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class hp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Nr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class PA extends hp{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class xg extends hp{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const dv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),TA=()=>Response,_g=t=>{if(Array.isArray(t))return t.map(r=>_g(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=_g(n)}),e},CA=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},RA=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),$0=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},IA=(t,e,r)=>dt(void 0,void 0,void 0,function*(){const n=yield TA();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const a=t.status||500,o=(i==null?void 0:i.statusCode)||a+"";e(new PA($0(i),a,o))}).catch(i=>{e(new xg($0(i),i))}):e(new xg($0(t),t))}),DA=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(CA(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function sd(t,e,r,n,i,a){return dt(this,void 0,void 0,function*(){return new Promise((o,s)=>{t(r,DA(e,n,i,a)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>IA(l,s,n))})})}function Kc(t,e,r,n){return dt(this,void 0,void 0,function*(){return sd(t,"GET",e,r,n)})}function $i(t,e,r,n,i){return dt(this,void 0,void 0,function*(){return sd(t,"POST",e,n,i,r)})}function Sg(t,e,r,n,i){return dt(this,void 0,void 0,function*(){return sd(t,"PUT",e,n,i,r)})}function MA(t,e,r,n){return dt(this,void 0,void 0,function*(){return sd(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function fv(t,e,r,n,i){return dt(this,void 0,void 0,function*(){return sd(t,"DELETE",e,n,i,r)})}class FA{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return dt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Nr(e))return{data:null,error:e};throw e}})}}var a_;class BA{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[a_]="BlobDownloadBuilder",this.promise=null}asStream(){return new FA(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return dt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Nr(e))return{data:null,error:e};throw e}})}}a_=Symbol.toStringTag;const UA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},V2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zA{constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=dv(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return dt(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},V2),i);let s=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),l&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(l))):(a=n,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),i!=null&&i.headers&&(s=Object.assign(Object.assign({},s),i.headers));const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),d=yield(e=="PUT"?Sg:$i)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:s},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}upload(e,r,n){return dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return dt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:V2.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const d=yield Sg(this.fetch,s.toString(),l,{headers:h});return{data:{path:a,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Nr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return dt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield $i(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),s=o.searchParams.get("token");if(!s)throw new hp("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:s},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nr(n))return{data:null,error:n};throw n}})}update(e,r,n){return dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return dt(this,void 0,void 0,function*(){try{return{data:yield $i(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nr(i))return{data:null,error:i};throw i}})}copy(e,r,n){return dt(this,void 0,void 0,function*(){try{return{data:{path:(yield $i(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return dt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield $i(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return dt(this,void 0,void 0,function*(){try{const i=yield $i(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nr(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"",s=this._getFinalPath(e),l=()=>Kc(this.fetch,`${this.url}/${i}/${s}${o}`,{headers:this.headers,noResolveJson:!0});return new BA(l,this.shouldThrowOnError)}info(e){return dt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Kc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:_g(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nr(n))return{data:null,error:n};throw n}})}exists(e){return dt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield MA(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nr(n)&&n instanceof xg){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const s=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${u}`)}}}remove(e){return dt(this,void 0,void 0,function*(){try{return{data:yield fv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}list(e,r,n){return dt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},UA),r),{prefix:e||""});return{data:yield $i(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nr(i))return{data:null,error:i};throw i}})}listV2(e,r){return dt(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield $i(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nr(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const o_="2.86.0",s_={"X-Client-Info":`storage-js/${o_}`};class qA{constructor(e,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},s_),r),this.fetch=dv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return dt(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Kc(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}getBucket(e){return dt(this,void 0,void 0,function*(){try{return{data:yield Kc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}createBucket(e){return dt(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield $i(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nr(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return dt(this,void 0,void 0,function*(){try{return{data:yield Sg(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return dt(this,void 0,void 0,function*(){try{return{data:yield $i(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return dt(this,void 0,void 0,function*(){try{return{data:yield fv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Yc=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function $A(t,e,r){const n=new URL(e,t);if(r)for(const[i,a]of Object.entries(r))a!==void 0&&n.searchParams.set(i,a);return n.toString()}async function HA(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function WA(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:a,headers:o}){const s=$A(t.baseUrl,n,i),l=await HA(t.auth),u=await e(s,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...l,...o},body:a?JSON.stringify(a):void 0}),h=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),f=d&&h?JSON.parse(h):h;if(!u.ok){const c=d?f:void 0,y=c==null?void 0:c.error;throw new Yc((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:c})}return{status:u.status,headers:u.headers,data:f}}}}function xf(t){return t.join("")}var VA=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:xf(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xf(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xf(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xf(t.namespace)}`}),!0}catch(e){if(e instanceof Yc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Yc&&r.status===409)return;throw r}}};function tl(t){return t.join("")}var GA=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${tl(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${tl(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${tl(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${tl(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${tl(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${tl(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Yc&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Yc&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},KA=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=WA({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new VA(this.client,e),this.tableOps=new GA(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class YA{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},s_),r),this.fetch=dv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return dt(this,void 0,void 0,function*(){try{return{data:yield $i(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}listBuckets(e){return dt(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Kc(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return dt(this,void 0,void 0,function*(){try{return{data:yield fv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}from(e){if(!RA(e))throw new hp("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new KA({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>dt(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const hv={"X-Client-Info":`storage-js/${o_}`,"Content-Type":"application/json"};class l_ extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function oi(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class H0 extends l_{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class JA extends l_{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var G2;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(G2||(G2={}));const pv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),XA=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},K2=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),QA=(t,e,r)=>dt(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const i=t.status||500,a=t;if(typeof a.json=="function")a.json().then(o=>{const s=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new H0(K2(o),i,s))}).catch(()=>{const o=i+"",s=a.statusText||`HTTP ${i} error`;e(new H0(s,i,o))});else{const o=i+"",s=a.statusText||`HTTP ${i} error`;e(new H0(s,i,o))}}else e(new JA(K2(t),t))}),ZA=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(XA(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function e8(t,e,r,n,i,a){return dt(this,void 0,void 0,function*(){return new Promise((o,s)=>{t(r,ZA(e,n,i,a)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>QA(l,s,n))})})}function si(t,e,r,n,i){return dt(this,void 0,void 0,function*(){return e8(t,"POST",e,n,i,r)})}class t8{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hv),r),this.fetch=pv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return dt(this,void 0,void 0,function*(){try{return{data:(yield si(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oi(r))return{data:null,error:r};throw r}})}getIndex(e,r){return dt(this,void 0,void 0,function*(){try{return{data:yield si(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(oi(n))return{data:null,error:n};throw n}})}listIndexes(e){return dt(this,void 0,void 0,function*(){try{return{data:yield si(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oi(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return dt(this,void 0,void 0,function*(){try{return{data:(yield si(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(oi(n))return{data:null,error:n};throw n}})}}class r8{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hv),r),this.fetch=pv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return dt(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield si(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oi(r))return{data:null,error:r};throw r}})}getVectors(e){return dt(this,void 0,void 0,function*(){try{return{data:yield si(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oi(r))return{data:null,error:r};throw r}})}listVectors(e){return dt(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield si(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oi(r))return{data:null,error:r};throw r}})}queryVectors(e){return dt(this,void 0,void 0,function*(){try{return{data:yield si(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oi(r))return{data:null,error:r};throw r}})}deleteVectors(e){return dt(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield si(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oi(r))return{data:null,error:r};throw r}})}}class n8{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hv),r),this.fetch=pv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return dt(this,void 0,void 0,function*(){try{return{data:(yield si(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oi(r))return{data:null,error:r};throw r}})}getBucket(e){return dt(this,void 0,void 0,function*(){try{return{data:yield si(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oi(r))return{data:null,error:r};throw r}})}listBuckets(){return dt(this,arguments,void 0,function*(e={}){try{return{data:yield si(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oi(r))return{data:null,error:r};throw r}})}deleteBucket(e){return dt(this,void 0,void 0,function*(){try{return{data:(yield si(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oi(r))return{data:null,error:r};throw r}})}}class i8 extends n8{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new a8(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return dt(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return dt(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return dt(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return dt(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class a8 extends t8{constructor(e,r,n,i){super(e,r,i),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return dt(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return dt(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return dt(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return dt(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new o8(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class o8 extends r8{constructor(e,r,n,i,a){super(e,r,a),this.vectorBucketName=n,this.indexName=i}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return dt(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return dt(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return dt(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return dt(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return dt(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class s8 extends qA{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new zA(this.url,this.headers,e,this.fetch)}get vectors(){return new i8(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new YA(this.url+"/iceberg",this.headers,this.fetch)}}const l8="2.86.0";let mc="";typeof Deno<"u"?mc="deno":typeof document<"u"?mc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mc="react-native":mc="node";const u8={"X-Client-Info":`supabase-js-${mc}/${l8}`},c8={headers:u8},d8={schema:"public"},f8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},h8={},p8=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),m8=()=>Headers,g8=(t,e,r)=>{const n=p8(r),i=m8();return async(a,o)=>{var s;const l=(s=await e())!==null&&s!==void 0?s:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(a,Object.assign(Object.assign({},o),{headers:u}))}};function v8(t){return t.endsWith("/")?t:t+"/"}function y8(t,e){var r,n;const{db:i,auth:a,realtime:o,global:s}=t,{db:l,auth:u,realtime:h,global:d}=e,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=s==null?void 0:s.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function w8(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(v8(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const u_="2.86.0",fl=30*1e3,kg=3,W0=kg*fl,b8="http://localhost:9999",x8="supabase.auth.token",_8={"X-Client-Info":`gotrue-js/${u_}`},Ng="X-Supabase-Api-Version",c_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},S8=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,k8=10*60*1e3;class Jc extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function gt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class N8 extends Jc{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function E8(t){return gt(t)&&t.name==="AuthApiError"}class ss extends Jc{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Bo extends Jc{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class ni extends Bo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function A8(t){return gt(t)&&t.name==="AuthSessionMissingError"}class rl extends Bo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _f extends Bo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Sf extends Bo{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function j8(t){return gt(t)&&t.name==="AuthImplicitGrantRedirectError"}class Y2 extends Bo{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Eg extends Bo{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function V0(t){return gt(t)&&t.name==="AuthRetryableFetchError"}class J2 extends Bo{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Ag extends Bo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ph="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),X2=` 	
\r=`.split(""),O8=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<X2.length;e+=1)t[X2[e].charCodeAt(0)]=-2;for(let e=0;e<Ph.length;e+=1)t[Ph[e].charCodeAt(0)]=e;return t})();function Q2(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ph[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ph[n]),e.queuedBits-=6}}function d_(t,e,r){const n=O8[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Z2(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{T8(o,n,r)};for(let o=0;o<t.length;o+=1)d_(t.charCodeAt(o),i,a);return e.join("")}function L8(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function P8(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}L8(n,e)}}function T8(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Ml(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)d_(t.charCodeAt(i),r,n);return new Uint8Array(e)}function C8(t){const e=[];return P8(t,r=>e.push(r)),new Uint8Array(e)}function ps(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>Q2(i,r,n)),Q2(null,r,n),e.join("")}function R8(t){return Math.round(Date.now()/1e3)+t}function I8(){return Symbol("auth-callback")}const ln=()=>typeof window<"u"&&typeof document<"u",Xo={tested:!1,writable:!1},f_=()=>{if(!ln())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xo.tested)return Xo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Xo.tested=!0,Xo.writable=!0}catch{Xo.tested=!0,Xo.writable=!1}return Xo.writable};function D8(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const h_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),M8=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",hl=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Qo=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},so=async(t,e)=>{await t.removeItem(e)};class pp{constructor(){this.promise=new pp.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}pp.promiseConstructor=Promise;function G0(t){const e=t.split(".");if(e.length!==3)throw new Ag("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!S8.test(e[n]))throw new Ag("JWT not in base64url format");return{header:JSON.parse(Z2(e[0])),payload:JSON.parse(Z2(e[1])),signature:Ml(e[2]),raw:{header:e[0],payload:e[1]}}}async function F8(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function B8(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function U8(t){return("0"+t.toString(16)).substr(-2)}function z8(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,U8).join("")}async function q8(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function $8(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await q8(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function nl(t,e,r=!1){const n=z8();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await hl(t,`${e}-code-verifier`,i);const a=await $8(n);return[a,n===a?"plain":"s256"]}const H8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function W8(t){const e=t.headers.get(Ng);if(!e||!e.match(H8))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function V8(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function G8(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const K8=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function il(t){if(!K8.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function K0(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Y8(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function ew(t){return JSON.parse(JSON.stringify(t))}const ts=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),J8=[502,503,504];async function tw(t){var e;if(!M8(t))throw new Eg(ts(t),0);if(J8.includes(t.status))throw new Eg(ts(t),t.status);let r;try{r=await t.json()}catch(a){throw new ss(ts(a),a)}let n;const i=W8(t);if(i&&i.getTime()>=c_["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new J2(ts(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new ni}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new J2(ts(r),t.status,r.weak_password.reasons);throw new N8(ts(r),t.status||500,n)}const X8=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function _t(t,e,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[Ng]||(a[Ng]=c_["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Q8(t,e,r+s,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Q8(t,e,r,n,i,a){const o=X8(e,n,i,a);let s;try{s=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new Eg(ts(l),0)}if(s.ok||await tw(s),n!=null&&n.noResolveJson)return s;try{return await s.json()}catch(l){await tw(l)}}function Ui(t){var e;let r=null;tj(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=R8(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function rw(t){const e=Ui(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function yo(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Z8(t){return{data:t,error:null}}function ej(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=t,o=ru(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},l=Object.assign({},o);return{data:{properties:s,user:l},error:null}}function nw(t){return t}function tj(t){return t.access_token&&t.refresh_token&&t.expires_in}const Y0=["global","local","others"];class rj{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=h_(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Y0[0]){if(Y0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Y0.join(", ")}`);try{return await _t(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(gt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await _t(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:yo})}catch(n){if(gt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=ru(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await _t(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ej,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(gt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await _t(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:yo})}catch(r){if(gt(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,a,o,s,l;try{const u={nextPage:null,lastPage:0,total:0},h=await _t(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:nw});if(h.error)throw h.error;const d=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,c=(l=(s=h.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return c.length>0&&(c.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(gt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){il(e);try{return await _t(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:yo})}catch(r){if(gt(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){il(e);try{return await _t(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:yo})}catch(n){if(gt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){il(e);try{return await _t(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:yo})}catch(n){if(gt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){il(e.userId);try{const{data:r,error:n}=await _t(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(gt(r))return{data:null,error:r};throw r}}async _deleteFactor(e){il(e.userId),il(e.id);try{return{data:await _t(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(gt(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,a,o,s,l;try{const u={nextPage:null,lastPage:0,total:0},h=await _t(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:nw});if(h.error)throw h.error;const d=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,c=(l=(s=h.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return c.length>0&&(c.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(gt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await _t(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(gt(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await _t(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(gt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await _t(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await _t(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(gt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await _t(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(gt(r))return{data:null,error:r};throw r}}}function iw(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const al={debug:!!(globalThis&&f_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class p_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class nj extends p_{}async function ij(t,e,r){al.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),al.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){al.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{al.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw al.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new nj(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(al.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function aj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function m_(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function oj(t){return parseInt(t,16)}function sj(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function lj(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:s,requestId:l,resources:u,scheme:h,uri:d,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const c=m_(t.address),y=h?`${h}://${n}`:n,v=t.statement?`${t.statement}
`:"",w=`${y} wants you to sign in with your Ethereum account:
${c}

${v}`;let p=`URI: ${d}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(p+=`
Expiration Time: ${i.toISOString()}`),s&&(p+=`
Not Before: ${s.toISOString()}`),l&&(p+=`
Request ID: ${l}`),u){let g=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);g+=`
- ${b}`}p+=g}return`${w}
${p}`}class Wr extends Error{constructor({message:e,code:r,cause:n,name:i}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Th extends Wr{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function uj({error:t,options:e}){var r,n,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Wr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Wr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Wr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Wr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Wr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Wr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new Wr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Wr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(g_(o)){if(a.rp.id!==o)return new Wr({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Wr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Wr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Wr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Wr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function cj({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Wr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Wr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(g_(n)){if(r.rpId!==n)return new Wr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Wr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Wr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Wr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class dj{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const fj=new dj;function hj(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=ru(t,["challenge","user","excludeCredentials"]),a=Ml(e).buffer,o=Object.assign(Object.assign({},r),{id:Ml(r.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:a,user:o});if(n&&n.length>0){s.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];s.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:Ml(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function pj(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=ru(t,["challenge","allowCredentials"]),i=Ml(e).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const s=r[o];a.allowCredentials[o]=Object.assign(Object.assign({},s),{id:Ml(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return a}function mj(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:ps(new Uint8Array(t.response.attestationObject)),clientDataJSON:ps(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function gj(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ps(new Uint8Array(i.authenticatorData)),clientDataJSON:ps(new Uint8Array(i.clientDataJSON)),signature:ps(new Uint8Array(i.signature)),userHandle:i.userHandle?ps(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function g_(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function aw(){var t,e;return!!(ln()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function vj(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Th("Browser returned unexpected credential type",e)}:{data:null,error:new Th("Empty credential response",e)}}catch(e){return{data:null,error:uj({error:e,options:t})}}}async function yj(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Th("Browser returned unexpected credential type",e)}:{data:null,error:new Th("Empty credential response",e)}}catch(e){return{data:null,error:cj({error:e,options:t})}}}const wj={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},bj={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ch(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))n[a]=o;else if(r(o))n[a]=o;else if(e(o)){const s=n[a];e(s)?n[a]=Ch(s,o):n[a]=Ch(o)}else n[a]=o}return n}function xj(t,e){return Ch(wj,t,e||{})}function _j(t,e){return Ch(bj,t,e||{})}class Sj{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},a){try{const{data:o,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:s};const l=i??fj.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=xj(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:d}=await vj({publicKey:u,signal:l});return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}case"request":{const u=_j(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:d}=await yj(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}}}catch(o){return gt(o)?{data:null,error:o}:{data:null,error:new ss("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new Jc("rpId is required for WebAuthn authentication")};try{if(!aw())return{data:null,error:new ss("Browser does not support WebAuthn",null)};const{data:o,error:s}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!o)return{data:null,error:s};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return gt(o)?{data:null,error:o}:{data:null,error:new ss("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new Jc("rpId is required for WebAuthn registration")};try{if(!aw())return{data:null,error:new ss("Browser does not support WebAuthn",null)};const{data:o,error:s}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(h=>{var d;return(d=h.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:s};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return gt(o)?{data:null,error:o}:{data:null,error:new ss("Unexpected error in register",o)}}}}aj();const kj={url:b8,storageKey:x8,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_8,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function ow(t,e,r){return await r()}const ol={};class Xc{get jwks(){var e,r;return(r=(e=ol[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){ol[this.storageKey]=Object.assign(Object.assign({},ol[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=ol[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ol[this.storageKey]=Object.assign(Object.assign({},ol[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},kj),e);if(this.storageKey=a.storageKey,this.instanceID=(r=Xc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Xc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&ln()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new rj({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=h_(a.fetch),this.lock=a.lock||ow,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:ln()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ij:this.lock=ow,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Sj(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:f_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=iw(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=iw(this.memoryStorage)),ln()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${u_}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(ln()&&(r=D8(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ln()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),j8(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return gt(r)?this._returnResult({error:r}):this._returnResult({error:new ss("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const a=await _t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ui}),{data:o,error:s}=a;if(s||!o)return this._returnResult({data:{user:null,session:null},error:s});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(gt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var r,n,i;try{let a;if("email"in e){const{email:h,password:d,options:f}=e;let c=null,y=null;this.flowType==="pkce"&&([c,y]=await nl(this.storage,this.storageKey)),a=await _t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:c,code_challenge_method:y},xform:Ui})}else if("phone"in e){const{phone:h,password:d,options:f}=e;a=await _t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ui})}else throw new _f("You must provide either an email or phone number and a password");const{data:o,error:s}=a;if(s||!o)return this._returnResult({data:{user:null,session:null},error:s});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(gt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:s}=e;r=await _t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:rw})}else if("phone"in e){const{phone:a,password:o,options:s}=e;r=await _t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:rw})}else throw new _f("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new rl;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(gt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,a,o,s,l,u,h,d,f;let c,y;if("message"in e)c=e.message,y=e.signature;else{const{chain:v,wallet:w,statement:p,options:g}=e;let b;if(ln())if(typeof w=="object")b=w;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")b=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=w}const _=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href),E=await b.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=m_(E[0]);let A=(n=g==null?void 0:g.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!A){const F=await b.request({method:"eth_chainId"});A=oj(F)}const P={domain:_.host,address:C,statement:p,uri:_.href,version:"1",chainId:A,nonce:(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=g==null?void 0:g.signInWithEthereum)===null||h===void 0?void 0:h.resources};c=lj(P),y=await b.request({method:"personal_sign",params:[sj(c),C]})}try{const{data:v,error:w}=await _t(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:c,signature:y},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ui});if(w)throw w;if(!v||!v.session||!v.user){const p=new rl;return this._returnResult({data:{user:null,session:null},error:p})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:w})}catch(v){if(gt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var r,n,i,a,o,s,l,u,h,d,f,c;let y,v;if("message"in e)y=e.message,v=e.signature;else{const{chain:w,wallet:p,statement:g,options:b}=e;let _;if(ln())if(typeof p=="object")_=p;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))_=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=p}const E=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const C=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),g?{statement:g}:null));let A;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")A=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)A=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)y=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),v=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${E.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(i=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(h=b==null?void 0:b.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const C=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=C}}try{const{data:w,error:p}=await _t(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:ps(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(c=e.options)===null||c===void 0?void 0:c.captchaToken}}:null),xform:Ui});if(p)throw p;if(!w||!w.session||!w.user){const g=new rl;return this._returnResult({data:{user:null,session:null},error:g})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:p})}catch(w){if(gt(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const r=await Qo(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:o}=await _t(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ui});if(await so(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const s=new rl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(gt(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:a,nonce:o}=e,s=await _t(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ui}),{data:l,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const h=new rl;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(gt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,a,o;try{if("email"in e){const{email:s,options:l}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await nl(this.storage,this.storageKey));const{error:d}=await _t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:s,options:l}=e,{data:u,error:h}=await _t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new _f("You must provide either an email or phone number.")}catch(s){if(gt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var r,n;try{let i,a;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:s}=await _t(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Ui});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(gt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,a,o;try{let s=null,l=null;this.flowType==="pkce"&&([s,l]=await nl(this.storage,this.storageKey));const u=await _t(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:Z8});return!((a=u.data)===null||a===void 0)&&a.url&&ln()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(s){if(gt(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new ni;const{error:i}=await _t(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(gt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:o}=await _t(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:o,error:s}=await _t(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:s})}throw new _f("You must provide either an email or phone number and a type")}catch(r){if(gt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Qo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<W0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Qo(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=K0()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Y8(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:yo}):await this._useSession(async r=>{var n,i,a;const{data:o,error:s}=r;if(s)throw s;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ni}:await _t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:yo})})}catch(r){if(gt(r))return A8(r)&&(await this._removeSession(),await so(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new ni;const o=i.session;let s=null,l=null;this.flowType==="pkce"&&e.email!=null&&([s,l]=await nl(this.storage,this.storageKey));const{data:u,error:h}=await _t(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:o.access_token,xform:yo});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(gt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ni;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:o}=G0(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{data:s,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s)return{data:{user:null,session:null},error:null};a=s}else{const{data:s,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(gt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:s}=r;if(s)throw s;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new ni;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(gt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!ln())throw new Sf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Sf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Y2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Sf("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Y2("No code detected.");const{data:g,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:s,expires_at:l,token_type:u}=e;if(!a||!s||!o||!u)throw new Sf("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(s);let f=h+d;l&&(f=parseInt(l));const c=f-h;c*1e3<=fl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${c}s, should have been closer to ${d}s`);const y=f-d;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,h);const{data:v,error:w}=await this._getUser(a);if(w)throw w;const p={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:e.type},error:null})}catch(n){if(gt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Qo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({error:a});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:s}=await this.admin.signOut(o,e);if(s&&!(E8(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await so(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=I8(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await nl(this.storage,this.storageKey,!0));try{return await _t(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(gt(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(gt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var o,s,l,u,h;const{data:d,error:f}=a;if(f)throw f;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await _t(this.fetch,"GET",c,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return ln()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(gt(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:o,provider:s,token:l,access_token:u,nonce:h}=e,d=await _t(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:s,id_token:l,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ui}),{data:f,error:c}=d;return c?this._returnResult({data:{user:null,session:null},error:c}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new rl}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:c}))}catch(i){if(gt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)throw o;return await _t(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(gt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await B8(async i=>(i>0&&await F8(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await _t(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ui})),(i,a)=>{const o=200*Math.pow(2,i);return a&&V0(a)&&Date.now()+o-n<fl})}catch(n){if(this._debug(r,"error",n),gt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),ln()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Qo(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Qo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await hl(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:K0()}else if(i&&!i.user&&!i.user){const o=await Qo(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await so(this.storage,this.storageKey+"-user"),await hl(this.storage,this.storageKey,i)):i.user=K0()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<W0;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${W0}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),V0(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:s}=await this._getUser(i.access_token);!s&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new ni;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new pp;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new ni;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const s={data:a.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(a){if(this._debug(i,"error",a),gt(a)){const o={data:null,error:a};return V0(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,r)}catch(l){a.push(l)}});if(await Promise.all(o),a.length>0){for(let s=0;s<a.length;s+=1)console.error(a[s]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await hl(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=ew(i);await hl(this.storage,this.storageKey,a)}else{const i=ew(r);await hl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await so(this.storage,this.storageKey),await so(this.storage,this.storageKey+"-code-verifier"),await so(this.storage,this.storageKey+"-user"),this.userStorage&&await so(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ln()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),fl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/fl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${fl}ms, refresh threshold is ${kg} ticks`),i<=kg&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof p_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ln()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await nl(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(s.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?this._returnResult({data:null,error:a}):await _t(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(gt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await _t(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(gt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?mj(e.webauthn.credential_response):gj(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:l}=await _t(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:l}))})}catch(r){if(gt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=await _t(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:s}=o;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:hj(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:pj(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(gt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=G0(n.access_token);let o=null;a.aal&&(o=a.aal);let s=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(s="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:s,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await _t(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ni})})}catch(r){if(gt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new ni});const o=await _t(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return o.data&&o.data.redirect_url&&ln()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new ni});const o=await _t(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return o.data&&o.data.redirect_url&&ln()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await _t(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ni})})}catch(e){if(gt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await _t(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ni})})}catch(r){if(gt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(s=>s.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(s=>s.kid===e),n&&this.jwks_cached_at+k8>i)return n;const{data:a,error:o}=await _t(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(s=>s.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:c,error:y}=await this.getSession();if(y||!c.session)return this._returnResult({data:null,error:y});n=c.session.access_token}const{header:i,payload:a,signature:o,raw:{header:s,payload:l}}=G0(n);r!=null&&r.allowExpired||V8(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:c}=await this.getUser(n);if(c)throw c;return{data:{claims:a,header:i,signature:o},error:null}}const h=G8(i.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,C8(`${s}.${l}`)))throw new Ag("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}}Xc.nextInstanceID={};const Nj=Xc;class Ej extends Nj{constructor(e){super(e)}}class Aj{constructor(e,r,n){var i,a,o;this.supabaseUrl=e,this.supabaseKey=r;const s=w8(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,u={db:d8,realtime:h8,auth:Object.assign(Object.assign({},f8),{storageKey:l}),global:c8},h=y8(n??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=g8(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new hA(new URL("rest/v1",s).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new s8(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new cA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:o,flowType:s,lock:l,debug:u,throwOnError:h},d,f){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ej({url:this.authUrl.href,headers:Object.assign(Object.assign({},c),d),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:s,lock:l,debug:u,throwOnError:h,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new LA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const jj=(t,e,r)=>new Aj(t,e,r);function Oj(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Oj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Lj="https://ccgiozknvlknbrkzfcdx.supabase.co",Pj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNjZ2lvemtudmxrbmJya3pmY2R4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4NTY3NTMsImV4cCI6MjA3ODQzMjc1M30.lmmuGnynbY_n_4UlsrGw5ofRd6p9QLKCcrfHf7itEg8",Kt=jj(Lj,Pj),Tj={success:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),error:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),info:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},Cj={success:"bg-green-50 border-green-200 dark:bg-green-900/50 dark:border-green-700 text-green-800 dark:text-green-200",error:"bg-red-50 border-red-200 dark:bg-red-900/50 dark:border-red-700 text-red-800 dark:text-red-200",info:"bg-blue-50 border-blue-200 dark:bg-blue-900/50 dark:border-blue-700 text-blue-800 dark:text-blue-200"},Rj=({toast:t,onDismiss:e})=>{const[r,n]=te.useState(!1);te.useEffect(()=>{const o=setTimeout(()=>{n(!0),setTimeout(()=>e(t.id),300)},5e3);return()=>clearTimeout(o)},[t.id,e]);const i=()=>{n(!0),setTimeout(()=>e(t.id),300)},a=r?"animate-toast-out":"animate-toast-in";return x.jsxs("div",{role:"alert",className:`w-full p-4 rounded-lg shadow-lg border flex items-start gap-4 ${Cj[t.type]} ${a}`,children:[x.jsx("div",{className:"flex-shrink-0",children:Tj[t.type]}),x.jsx("div",{className:"flex-1 text-sm font-medium",children:t.message}),x.jsx("button",{onClick:i,className:"p-1 rounded-md -m-1 hover:bg-black/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-current","aria-label":"Dismiss",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})},Ij=({toasts:t,onDismiss:e})=>x.jsx("div",{className:"fixed top-5 right-5 z-50 space-y-3 w-full max-w-sm","aria-live":"assertive",children:t.map(r=>x.jsx(Rj,{toast:r,onDismiss:e},r.id))}),v_=te.createContext(void 0),Dj=({children:t})=>{const[e,r]=te.useState([]),[n,i]=te.useState(null);te.useEffect(()=>{const s=document.getElementById("portal-root");s&&i(s)},[]);const a=te.useCallback((s,l="info")=>{const u=Date.now().toString()+Math.random().toString();r(h=>[...h,{id:u,message:s,type:l}])},[]),o=te.useCallback(s=>{r(l=>l.filter(u=>u.id!==s))},[]);return x.jsxs(v_.Provider,{value:{addToast:a},children:[t,n&&Fx.createPortal(x.jsx(Ij,{toasts:e,onDismiss:o}),n)]})},mp=()=>{const t=te.useContext(v_);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},Mj=({focusState:t,emailProgress:e,typingCounter:r,isPasswordVisible:n=!1})=>{const i=()=>t==="email"?`rotate(${Math.max(-8,Math.min(8,e*16-8))}deg)`:"rotate(0deg)",a=()=>t==="password"?"translate(0px, 5px)":t==="email"?`translate(${r%2===0?-1.5:1.5}px, 5px)`:"translate(0px, 0px)",o=()=>t==="password"?n?"translateY(15px)":"translateY(0px)":"translateY(100px)";return x.jsxs("svg",{width:"140",height:"140",viewBox:"0 0 100 100",className:"mx-auto -mb-6",style:{zIndex:10,position:"relative",overflow:"hidden"},"aria-hidden":"true",children:[x.jsxs("defs",{children:[x.jsxs("linearGradient",{id:"furGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[x.jsx("stop",{offset:"0%",stopColor:"#D97706"})," ",x.jsx("stop",{offset:"100%",stopColor:"#92400E"})," "]}),x.jsxs("linearGradient",{id:"skinGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[x.jsx("stop",{offset:"0%",stopColor:"#FEF3C7"})," ",x.jsx("stop",{offset:"100%",stopColor:"#FDE68A"})," "]}),x.jsxs("radialGradient",{id:"eyeShine",cx:"30%",cy:"30%",r:"50%",children:[x.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0.9"}),x.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]}),x.jsxs("filter",{id:"softShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[x.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"3"}),x.jsx("feOffset",{dx:"0",dy:"4",result:"offsetblur"}),x.jsx("feComponentTransfer",{children:x.jsx("feFuncA",{type:"linear",slope:"0.2"})}),x.jsxs("feMerge",{children:[x.jsx("feMergeNode",{}),x.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),x.jsxs("g",{id:"head-group",style:{transition:"transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",transform:i(),transformOrigin:"50px 55px"},filter:"url(#softShadow)",children:[x.jsx("circle",{cx:"18",cy:"50",r:"12",fill:"url(#furGradient)"}),x.jsx("circle",{cx:"82",cy:"50",r:"12",fill:"url(#furGradient)"}),x.jsx("ellipse",{cx:"50",cy:"55",rx:"38",ry:"34",fill:"url(#furGradient)"}),x.jsx("path",{d:"M50 35 C 35 35, 25 45, 25 60 C 25 75, 35 85, 50 85 C 65 85, 75 75, 75 60 C 75 45, 65 35, 50 35 Z",fill:"url(#skinGradient)"}),x.jsx("circle",{cx:"18",cy:"50",r:"7",fill:"#FDE68A",opacity:"0.8"}),x.jsx("circle",{cx:"82",cy:"50",r:"7",fill:"#FDE68A",opacity:"0.8"}),x.jsx("path",{d:"M46 22 Q 50 15, 54 22",stroke:"url(#furGradient)",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),x.jsxs("g",{id:"eyes",transform:"translate(0, 2)",children:[x.jsx("circle",{cx:"36",cy:"52",r:"9",fill:"white"}),x.jsx("circle",{cx:"64",cy:"52",r:"9",fill:"white"}),x.jsxs("g",{style:{transition:"transform 0.1s ease-out",transform:a()},children:[x.jsx("circle",{cx:"36",cy:"52",r:"4",fill:"#1E293B"}),x.jsx("circle",{cx:"64",cy:"52",r:"4",fill:"#1E293B"}),x.jsx("circle",{cx:"38",cy:"50",r:"2",fill:"white",opacity:"0.6"}),x.jsx("circle",{cx:"66",cy:"50",r:"2",fill:"white",opacity:"0.6"})]})]}),x.jsx("ellipse",{cx:"50",cy:"68",rx:"5",ry:"3",fill:"#1E293B",opacity:"0.8"}),x.jsx("path",{d:"M42 76 Q 50 82, 58 76",stroke:"#4B5563",strokeWidth:"2",fill:"transparent",strokeLinecap:"round",style:{transition:"d 0.3s"}})]}),x.jsxs("g",{id:"hands-group",style:{transition:"transform 0.5s cubic-bezier(0.25, 1, 0.5, 1)",transform:o()},filter:"url(#softShadow)",children:[x.jsx("path",{d:"M10 100 L 15 60 Q 15 45, 30 45 Q 45 45, 45 60 L 45 100 Z",fill:"url(#furGradient)",stroke:"#78350F",strokeWidth:"1"}),x.jsx("path",{d:"M30 45 L 30 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),x.jsx("path",{d:"M37 47 L 37 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),x.jsx("path",{d:"M23 47 L 23 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),x.jsx("path",{d:"M90 100 L 85 60 Q 85 45, 70 45 Q 55 45, 55 60 L 55 100 Z",fill:"url(#furGradient)",stroke:"#78350F",strokeWidth:"1"}),x.jsx("path",{d:"M70 45 L 70 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),x.jsx("path",{d:"M63 47 L 63 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),x.jsx("path",{d:"M77 47 L 77 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"})]})]})},Fj=()=>{const t=Ha(),[e,r]=te.useState(!1),[n,i]=te.useState(""),[a,o]=te.useState(""),[s,l]=te.useState(!1),[u,h]=te.useState(null),{addToast:d}=mp(),[f,c]=te.useState("idle"),[y,v]=te.useState(0),[w,p]=te.useState(!1),g=()=>c("email"),b=()=>c("password"),_=()=>c("idle"),E=()=>{v(R=>R+1)},C=te.useMemo(()=>{if(!a)return 0;let R=0;return a.length>=6&&R++,a.length>=10&&R++,/[A-Z]/.test(a)&&R++,(/[0-9]/.test(a)||/[^A-Za-z0-9]/.test(a))&&R++,R},[a]),A=()=>{switch(C){case 0:return"Too Short";case 1:return"Weak";case 2:return"Fair";case 3:return"Good";case 4:return"Strong";default:return""}},P=()=>{switch(C){case 0:case 1:return"bg-red-500";case 2:return"bg-yellow-500";case 3:return"bg-blue-500";case 4:return"bg-green-500";default:return"bg-slate-200"}},F=async()=>{const{error:R}=await Kt.auth.signUp({email:n,password:a,options:{emailRedirectTo:"https://aklabx.github.io/diary/"}});if(R)throw R;d("Check your email for the confirmation link!","success")},T=async()=>{const{error:R}=await Kt.auth.signInWithPassword({email:n,password:a});if(R)throw R},k=async()=>{r(!0),h(null);try{const{error:R}=await Kt.auth.signInWithOAuth({provider:"google",options:{redirectTo:"https://aklabx.github.io/diary/"}});if(R)throw R}catch(R){h(R.error_description||R.message),r(!1)}},j=async R=>{R.preventDefault(),r(!0),h(null);try{s?await F():await T()}catch($){h($.error_description||$.message)}finally{r(!1)}},I=Math.min(n.length/30,1);return x.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[#FBF8F3] dark:bg-slate-900 animate-fade-in relative p-4",children:[x.jsxs("button",{onClick:()=>t("/"),className:"absolute top-6 left-6 flex items-center gap-2 text-slate-500 hover:text-indigo-600 transition-colors font-medium",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Home"]}),x.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-700",children:[x.jsx(Mj,{focusState:f,emailProgress:I,typingCounter:y,isPasswordVisible:w}),x.jsxs("div",{className:"text-center",children:[x.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Diary"}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:s?"Create a secure, encrypted account.":"Sign in to access your journal."})]}),u&&x.jsx("p",{className:"text-center text-red-500 bg-red-50 dark:bg-red-900/20 dark:text-red-300 p-3 rounded-md",children:u}),x.jsxs("form",{className:"space-y-6",onSubmit:j,children:[x.jsx("input",{type:"email",placeholder:"Your email",value:n,required:!0,onChange:R=>{i(R.target.value),E()},onFocus:g,onBlur:_,onKeyDown:E,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 transition-all",autoComplete:"username"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:w?"text":"password",placeholder:"Your password (min 6 characters)",value:a,required:!0,minLength:6,onChange:R=>{o(R.target.value),E()},onFocus:b,onBlur:_,onKeyDown:E,className:"w-full px-4 py-3 pr-12 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 transition-all",autoComplete:s?"new-password":"current-password"}),x.jsx("button",{type:"button",onClick:()=>p(!w),className:"absolute inset-y-0 right-0 flex items-center px-4 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors",tabIndex:-1,"aria-label":w?"Hide password":"Show password",children:w?x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),x.jsx("path",{fillRule:"evenodd",d:"M.458 10C3.732 4.943 9.522 3 10 3s6.268 1.943 9.542 7c-3.274 5.057-9.042 7-9.542 7S3.732 15.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.27 8.138 15.522 6 10 6c-1.55 0-2.998.48-4.257 1.254l-1.74-1.741zM10 12a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"}),x.jsx("path",{d:"M2.042 10c.832 2.345 3.16 4 5.918 4 1.55 0 2.998-.48 4.257-1.254l-1.473-1.473A3.999 3.999 0 0110 14c-2.209 0-4-1.791-4-4a3.999 3.999 0 011.21-2.828L5.293 5.293A10.014 10.014 0 00.458 10c1.274 1.862 4.022 4 9.542 4 1.105 0 2.158-.149 3.168-.43L10.373 12.16A4.003 4.003 0 0110 12z"})]})})]}),s&&a.length>0&&x.jsxs("div",{className:"space-y-2 animate-fade-in",children:[x.jsxs("div",{className:"flex gap-1 h-1.5 w-full",children:[x.jsx("div",{className:`h-full rounded-full flex-1 transition-all duration-300 ${C>=1?P():"bg-slate-100 dark:bg-slate-700"}`}),x.jsx("div",{className:`h-full rounded-full flex-1 transition-all duration-300 ${C>=2?P():"bg-slate-100 dark:bg-slate-700"}`}),x.jsx("div",{className:`h-full rounded-full flex-1 transition-all duration-300 ${C>=3?P():"bg-slate-100 dark:bg-slate-700"}`}),x.jsx("div",{className:`h-full rounded-full flex-1 transition-all duration-300 ${C>=4?P():"bg-slate-100 dark:bg-slate-700"}`})]}),x.jsxs("div",{className:"flex justify-between text-xs",children:[x.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Strength"}),x.jsx("span",{className:`font-medium ${C<2?"text-red-500":C<4?"text-blue-500":"text-green-500"}`,children:A()})]})]}),x.jsx("button",{type:"submit",disabled:e,className:"w-full px-4 py-3 font-bold text-white bg-indigo-500 rounded-xl hover:bg-indigo-600 disabled:bg-indigo-300 transition-all transform active:scale-95 shadow-lg shadow-indigo-500/30",children:e?"Loading...":s?"Sign Up":"Sign In"})]}),x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute inset-0 flex items-center",children:x.jsx("div",{className:"w-full border-t border-slate-200 dark:border-slate-600"})}),x.jsx("div",{className:"relative flex justify-center text-sm",children:x.jsx("span",{className:"px-2 bg-.white dark:bg-slate-800 text-slate-500 dark:text-slate-400",children:"Or continue with"})})]}),x.jsxs("button",{type:"button",onClick:k,disabled:e,className:"w-full flex items-center justify-center gap-3 px-4 py-3 border border-slate-200 rounded-xl hover:bg-slate-50 disabled:bg-slate-50 dark:border-slate-600 dark:hover:bg-slate-700 dark:disabled:bg-slate-700 transition-colors",children:[x.jsxs("svg",{className:"w-5 h-5","aria-hidden":"true",viewBox:"0 0 24 24",children:[x.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),x.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.8 0-5.2-1.89-6.06-4.44H2.36v2.84C4.01 20.44 7.7 23 12 23z",fill:"#34A853"}),x.jsx("path",{d:"M5.94 14.06c-.18-.54-.28-1.11-.28-1.69s.1-1.15.28-1.69V7.84H2.36C1.5 9.49 1 11.18 1 12.87s.5 3.38 1.36 4.96l3.58-2.77z",fill:"#FBBC05"}),x.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 1.33 14.97 0 12 0 7.7 0 4.01 2.56 2.36 6.21l3.58 2.84C6.8 4.73 9.2 2.84 12 5.38z",fill:"#EA4335"})]}),x.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Sign in with Google"})]}),x.jsxs("p",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:[s?"Already have an account? ":"Don't have an account? ",x.jsx("button",{onClick:()=>{l(!s),h(null)},className:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300",children:s?"Sign In":"Sign Up"})]})]})]})},Bj=()=>{const t=Ha(),[e,r]=te.useState(0),n=["Thoughts","Secrets","Memories","Dreams"],[i,a]=te.useState(0),[o,s]=te.useState(""),[l,u]=te.useState(!1),[h,d]=te.useState(null);te.useEffect(()=>{const y=v=>{console.log("beforeinstallprompt fired",v),v.preventDefault(),d(v)};return window.addEventListener("beforeinstallprompt",y),()=>window.removeEventListener("beforeinstallprompt",y)},[]);const f=async()=>{if(!h){console.log("No install prompt available");return}h.prompt();const{outcome:y}=await h.userChoice;console.log(`User response to the install prompt: ${y}`),d(null)};te.useEffect(()=>{const y=n[i],w=setTimeout(()=>{if(!l&&o===y)setTimeout(()=>u(!0),2e3);else if(l&&o==="")u(!1),a(p=>(p+1)%n.length);else{const p=l?y.substring(0,o.length-1):y.substring(0,o.length+1);s(p)}},l?50:100);return()=>clearTimeout(w)},[o,l,i]),te.useEffect(()=>{const y=()=>{r(0),setTimeout(()=>r(1),2500),setTimeout(()=>r(2),4e3),setTimeout(()=>r(0),6e3)};y();const v=setInterval(y,6e3);return()=>clearInterval(v)},[]);const c=()=>{t("/login")};return x.jsxs("div",{className:"min-h-screen bg-[#FBF8F3] text-slate-800 font-sans overflow-x-hidden selection:bg-indigo-200",children:[x.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none overflow-hidden",children:[x.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] rounded-full bg-indigo-200/30 blur-[100px]"}),x.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] rounded-full bg-orange-100/50 blur-[100px]"})]}),x.jsxs("nav",{className:"relative z-20 flex items-center justify-between px-6 py-6 max-w-6xl mx-auto",children:[x.jsxs("div",{className:"text-2xl font-bold font-serif tracking-tight flex items-center gap-2 text-slate-800",children:[x.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-lg shadow-indigo-900/5 border border-slate-100",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-indigo-600",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),x.jsx("span",{children:"Diary"})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[h&&x.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-3 py-2 sm:px-5 sm:py-2.5 rounded-full text-indigo-700 font-semibold bg-white shadow-sm border border-indigo-100 hover:bg-indigo-50 transition-all hover:scale-105 text-sm sm:text-base",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),x.jsx("span",{className:"sm:hidden",children:"Install"}),x.jsx("span",{className:"hidden sm:inline",children:"Install App"})]}),x.jsx("button",{onClick:c,className:"px-8 py-2.5 rounded-full text-white font-semibold bg-gradient-to-br from-indigo-400 to-purple-600 shadow-[inset_0_2px_4px_rgba(255,255,255,0.3),inset_0_-2px_4px_rgba(0,0,0,0.2),0_8px_20px_-6px_rgba(124,58,237,0.5)] hover:scale-105 transition-transform border border-indigo-300/50",children:"Log In"})]})]}),x.jsxs("main",{className:"relative z-10 w-full flex flex-col items-center",children:[x.jsxs("section",{className:"max-w-6xl mx-auto px-6 pb-20 pt-10 w-full flex flex-col items-center",children:[x.jsxs("div",{className:"w-full flex justify-center perspective-1000 py-12 sm:py-16 relative",children:[x.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 w-56 h-8 bg-black/20 blur-2xl rounded-[100%]"}),x.jsxs("div",{className:"relative w-[280px] h-[580px] bg-slate-900 rounded-[3.5rem] border-[6px] border-slate-950 shadow-[0_0_0_1.5px_rgba(255,255,255,0.15),0_50px_100px_-20px_rgba(0,0,0,0.5)] animate-float-phone preserve-3d",children:[x.jsx("div",{className:"absolute inset-0 rounded-[3.2rem] bg-gradient-to-tr from-white/10 via-transparent to-transparent pointer-events-none z-20"}),x.jsx("div",{className:"absolute top-24 -right-[7px] w-[7px] h-16 bg-slate-800 rounded-r-md border-l border-slate-950 shadow-sm"}),x.jsx("div",{className:"absolute top-24 -left-[7px] w-[7px] h-10 bg-slate-800 rounded-l-md border-r border-slate-950 shadow-sm"}),x.jsx("div",{className:"absolute top-36 -left-[7px] w-[7px] h-10 bg-slate-800 rounded-l-md border-r border-slate-950 shadow-sm"}),x.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1/3 h-7 bg-black rounded-b-2xl z-30 flex justify-center items-center",children:x.jsx("div",{className:"w-12 h-1.5 bg-slate-800/50 rounded-full"})}),x.jsxs("div",{className:"absolute inset-[6px] bg-[#FBF8F3] rounded-[3.1rem] overflow-hidden flex flex-col shadow-inner",children:[x.jsxs("div",{className:"h-20 bg-white flex items-end pb-4 px-6 justify-between border-b border-slate-100",children:[x.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 animate-pulse"}),x.jsx("div",{className:"h-4 w-24 bg-slate-100 rounded"})]}),x.jsxs("div",{className:"flex-1 p-5 space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("div",{className:"h-6 w-3/4 bg-slate-200/50 rounded"}),x.jsx("div",{className:"h-3 w-1/2 bg-slate-200/30 rounded"})]}),x.jsxs("div",{className:"p-5 rounded-2xl bg-white shadow-sm border border-slate-100 min-h-[220px] font-serif text-lg relative overflow-hidden flex flex-col",children:[x.jsx("div",{className:"text-xs font-sans uppercase tracking-wider text-slate-300 mb-4",children:"Nov 18, 2025"}),e===0&&x.jsxs("div",{className:"text-slate-700 leading-relaxed",children:["My deepest secret is",x.jsx("span",{className:"typing-cursor border-indigo-500",children:"|"})]}),e===1&&x.jsx("div",{className:"break-all animate-matrix text-emerald-600 font-mono text-xs leading-relaxed opacity-80",children:"0x9F3a2B1c8D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e"}),e===2&&x.jsxs("div",{className:"flex flex-1 items-center justify-center flex-col gap-3",children:[x.jsx("div",{className:"w-16 h-16 bg-indigo-50 rounded-full flex items-center justify-center",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-indigo-500",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),x.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:"Secure"})]})]})]}),x.jsx("div",{className:"h-6 w-full flex justify-center items-start pt-1",children:x.jsx("div",{className:"w-1/3 h-1 bg-slate-300 rounded-full"})})]})]})]}),x.jsxs("div",{className:"text-center space-y-8 max-w-2xl",children:[x.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-bold font-serif leading-[1.1] tracking-tight text-slate-900",children:["Your ",x.jsx("span",{className:"text-indigo-600 inline-block min-w-[200px] border-b-4 border-indigo-200",children:o}),x.jsx("br",{}),"Encrypted. Forever."]}),x.jsxs("p",{className:"text-lg sm:text-xl text-slate-500 leading-relaxed max-w-lg mx-auto",children:["Write freely in a beautiful, private space. Secured with military-grade encryption that only ",x.jsx("strong",{children:"you"})," hold the keys to."]}),x.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 justify-center pt-4",children:[x.jsxs("button",{onClick:c,className:"px-8 py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-bold text-lg transition-all hover:scale-105 hover:-translate-y-1 shadow-xl shadow-indigo-200 flex items-center gap-2",children:["Get Started for Free",x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),h&&x.jsxs("button",{onClick:f,className:"px-8 py-4 bg-white text-indigo-700 border-2 border-indigo-100 rounded-2xl font-bold text-lg transition-all hover:scale-105 hover:-translate-y-1 shadow-lg hover:shadow-xl flex items-center gap-2",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M10.75 2.75a.75.75 0 00-1.5 0v8.614L6.295 8.235a.75.75 0 10-1.09 1.03l4.25 4.5a.75.75 0 001.09 0l4.25-4.5a.75.75 0 00-1.09-1.03l-2.965 3.129V2.75z"}),x.jsx("path",{d:"M3.5 12.75a.75.75 0 00-1.5 0v2.5A2.75 2.75 0 004.75 18h10.5A2.75 2.75 0 0018 15.25v-2.5a.75.75 0 00-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5z"})]}),"Download App"]})]}),x.jsxs("div",{className:"pt-10 flex flex-wrap justify-center gap-x-8 gap-y-4 opacity-60 text-slate-400 font-medium text-sm",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"End-to-End Encrypted"]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),"Biometric Lock"]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Local First"]})]})]})]}),x.jsx("section",{className:"w-full bg-white py-24 border-y border-slate-100",children:x.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[x.jsxs("div",{className:"text-center mb-16",children:[x.jsx("h2",{className:"text-3xl font-bold font-serif text-slate-900 mb-4",children:"How Your Privacy is Guaranteed"}),x.jsx("p",{className:"text-slate-500 max-w-lg mx-auto",children:"We don't rely on trust. We rely on math. Here is the lifecycle of your diary data."})]}),x.jsxs("div",{className:"relative border-l-2 border-indigo-100 ml-6 md:ml-12 space-y-16",children:[x.jsxs("div",{className:"relative pl-8 md:pl-12",children:[x.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-indigo-500 shadow-lg shadow-indigo-200 ring-4 ring-white"}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-8",children:[x.jsx("div",{className:"w-16 h-16 rounded-2xl bg-orange-50 flex items-center justify-center text-orange-500 flex-shrink-0",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"1. Local Key Generation"}),x.jsx("p",{className:"text-slate-600 leading-relaxed",children:"When you create your account, your browser generates a unique 256-bit encryption key. This process happens entirely on your device. We never see this key."})]})]})]}),x.jsxs("div",{className:"relative pl-8 md:pl-12",children:[x.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-white border-2 border-indigo-300"}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-8",children:[x.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-500 flex-shrink-0",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"2. The Biometric Vault"}),x.jsx("p",{className:"text-slate-600 leading-relaxed",children:"Your key is wrapped using your device's secure hardware (FaceID or TouchID). This allows you to unlock your diary instantly without typing a password, while keeping the key mathematically secure."})]})]})]}),x.jsxs("div",{className:"relative pl-8 md:pl-12",children:[x.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-white border-2 border-indigo-300"}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-8",children:[x.jsx("div",{className:"w-16 h-16 rounded-2xl bg-emerald-50 flex items-center justify-center text-emerald-500 flex-shrink-0",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"3. Zero-Knowledge Sync"}),x.jsxs("p",{className:"text-slate-600 leading-relaxed",children:["When you save an entry, it is encrypted ",x.jsx("i",{children:"before"}),' it leaves your browser. Our servers only receive a scrambled "blob" of data. We cannot decrypt it even if compelled by law.']})]})]})]})]})]})}),x.jsxs("section",{className:"max-w-6xl mx-auto px-6 py-24",children:[x.jsxs("div",{className:"text-center mb-16",children:[x.jsx("h2",{className:"text-3xl font-bold font-serif text-slate-900 mb-4",children:"More Than Just Text"}),x.jsx("p",{className:"text-slate-500",children:"A complete suite of tools to capture your life in high fidelity."})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[x.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[x.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-2xl flex items-center justify-center text-indigo-600 mb-6",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Rich Editor"}),x.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Format your thoughts with a beautiful, distraction-free editor. Supports custom fonts, lists, and dynamic layouts."})]}),x.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[x.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-2xl flex items-center justify-center text-pink-600 mb-6",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Secure Media"}),x.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Attach photos and images. They are encrypted with the same military-grade key as your text."})]}),x.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[x.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-2xl flex items-center justify-center text-purple-600 mb-6",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Voice Memos"}),x.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Record encrypted audio notes for when typing feels like too much work. Stored securely in the cloud."})]}),x.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[x.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-2xl flex items-center justify-center text-yellow-600 mb-6",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Mood Tracking"}),x.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Track your emotional journey over time. Filter entries by mood to see patterns in your life."})]}),x.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[x.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-2xl flex items-center justify-center text-blue-600 mb-6",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Smart Organization"}),x.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Organize entries with tags, journals, and location data (weather). Find any memory instantly."})]}),x.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[x.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center text-slate-600 mb-6",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Total Ownership"}),x.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Your data is yours. Export your entire diary history to JSON or ZIP at any time. No lock-in."})]})]})]}),x.jsxs("section",{className:"w-full bg-indigo-900 text-white py-20 mt-12 relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"}),x.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 bg-indigo-500/30 rounded-full blur-3xl translate-x-1/2 translate-y-1/2"}),x.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center relative z-10",children:[x.jsx("h2",{className:"text-4xl font-bold font-serif mb-6",children:"Ready to start writing?"}),x.jsx("p",{className:"text-indigo-200 text-lg mb-10 max-w-xl mx-auto",children:"Join thousands of others who have reclaimed their privacy. No credit card required."}),x.jsx("button",{onClick:c,className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:bg-indigo-50 transition-all hover:scale-105 shadow-xl",children:"Create Your Sanctuary"})]})]})]})]})},Uj=()=>x.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 font-serif text-slate-700 dark:text-slate-300",children:x.jsxs("div",{className:"max-w-4xl mx-auto p-8 sm:p-12",children:[x.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Privacy Policy"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Last updated: October 26, 2024"}),x.jsxs("article",{className:"prose prose-lg dark:prose-invert mt-8 max-w-none",children:[x.jsx("p",{children:"Welcome to Diary. Your privacy is critically important to us. This Privacy Policy outlines how your personal information is handled in our application."}),x.jsx("h2",{children:"The Core Principle: End-to-End Encryption"}),x.jsxs("p",{children:["The single most important thing to know about your privacy in this application is that ",x.jsx("strong",{children:"we cannot read your diary entries."})," All your entries are end-to-end encrypted on your device before they are sent to our servers for storage. This means:"]}),x.jsxs("ul",{children:[x.jsx("li",{children:"Your diary entries (titles and content) are encrypted using a key derived from a password only you know."}),x.jsx("li",{children:"This password is never sent to our servers or stored anywhere."}),x.jsx("li",{children:"The encryption and decryption happens exclusively on your device (in your browser)."}),x.jsx("li",{children:"Because we do not have your key, we cannot decrypt your data, and therefore cannot read it, share it, or provide it to any third party."})]}),x.jsx("h2",{children:"Information We Collect"}),x.jsx("p",{children:"We collect the absolute minimum information required to provide the service:"}),x.jsxs("ul",{children:[x.jsxs("li",{children:[x.jsx("strong",{children:"Account Information:"})," We store your email address for authentication purposes, provided by you or through a third-party OAuth provider like Google."]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Encryption Materials:"})," We store your salt and a key-check value. These are used to verify your password during login but cannot be used to derive your password or encryption key."]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Encrypted Diary Data:"})," Your diary entries are stored on our servers in an encrypted, unreadable format. We also store the associated Initialization Vector (IV), which is necessary for decryption but does not compromise security."]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Metadata:"})," To provide features like the calendar view and search, we store non-sensitive metadata such as entry creation dates, tags, and moods in an unencrypted format."]})]}),x.jsx("h2",{children:"How We Use Your Information ?"}),x.jsx("p",{children:"The information we collect is used solely to:"}),x.jsxs("ul",{children:[x.jsx("li",{children:"Provide, operate, and maintain the Diary service."}),x.jsx("li",{children:"Authenticate your access to your account."}),x.jsx("li",{children:"Securely store and retrieve your encrypted data."})]}),x.jsx("p",{children:"We do not analyze, profile, or sell your data. We cannot read it, so we cannot use it for advertising or any other purpose."}),x.jsx("h2",{children:"Third-Party Services"}),x.jsxs("ul",{children:[x.jsxs("li",{children:[x.jsx("strong",{children:"Supabase:"})," We use Supabase for our backend, which includes database storage and authentication. All data stored in the database is subject to the security principles described above."]}),x.jsxs("li",{children:[x.jsx("strong",{children:"OpenWeatherMap:"})," If you grant location access, we use your coordinates to fetch weather data from OpenWeatherMap. Your precise location is not stored by us."]})]}),x.jsx("h2",{children:"Your Rights"}),x.jsx("p",{children:"You have full control over your data."}),x.jsxs("ul",{children:[x.jsxs("li",{children:[x.jsx("strong",{children:"Data Export:"})," You can export all of your diary entries in a human-readable JSON format at any time from the Profile & Settings page."]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Data Deletion:"})," You can delete individual entries or your entire account. Deleting your account will permanently remove all associated data from our servers."]})]}),x.jsx("h2",{children:"Data Security"}),x.jsxs("p",{children:["We implement industry-standard security measures, including robust Row Level Security policies on our database, to prevent unauthorized access to your account metadata and encrypted data. However, the ultimate security of your diary rests on the strength and secrecy of your password. ",x.jsx("strong",{children:"If you lose your password, your data is irrecoverable, as we have no way to decrypt it for you."})]}),x.jsx("h2",{children:"Changes to This Privacy Policy"}),x.jsx("p",{children:"We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page. You are advised to review this Privacy Policy periodically for any changes."}),x.jsx("h2",{children:"Contact Us"}),x.jsx("p",{children:"If you have any questions about this Privacy Policy, please contact us."})]})]})}),zj=()=>x.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 font-serif text-slate-700 dark:text-slate-300",children:x.jsxs("div",{className:"max-w-4xl mx-auto p-8 sm:p-12",children:[x.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Terms of Use"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Last updated: October 26, 2024"}),x.jsxs("article",{className:"prose prose-lg dark:prose-invert mt-8 max-w-none",children:[x.jsx("h2",{children:"1. Acceptance of Terms"}),x.jsx("p",{children:'By accessing or using the Diary application ("Service"), you agree to be bound by these Terms of Use ("Terms"). If you disagree with any part of the terms, then you may not access the Service.'}),x.jsx("h2",{children:"2. User Accounts and Security"}),x.jsx("p",{children:"To use the Service, you must create an account. You are responsible for safeguarding the password that you use to access the Service and for any activities or actions under your password."}),x.jsxs("p",{children:[x.jsx("strong",{children:"Crucially, our service is end-to-end encrypted. Your password is your key. We do not store your password and have no way to recover it. If you lose your password, you will permanently lose access to all of your data."})," You agree not to disclose your password to any third party. You must notify us immediately upon becoming aware of any breach of security or unauthorized use of your account."]}),x.jsx("h2",{children:"3. User Content"}),x.jsx("p",{children:'You retain full ownership of all the content, including text and metadata, that you create in your diary ("User Content"). We claim no ownership rights over your User Content.'}),x.jsx("p",{children:"You are solely responsible for the User Content that you post on or through the Service. You represent and warrant that the posting of your User Content on or through the Service does not violate the privacy rights, publicity rights, copyrights, contract rights, or any other rights of any person."}),x.jsx("h2",{children:"4. Prohibited Conduct"}),x.jsx("p",{children:"You agree not to use the Service for any unlawful purpose or to engage in any activity that is illegal, harmful, or otherwise objectionable. You may not use the Service to store or transmit any content that is infringing, libelous, or otherwise unlawful or tortious, or to store or transmit material in violation of third-party privacy rights."}),x.jsx("h2",{children:"5. Termination"}),x.jsx("p",{children:"We may terminate or suspend your account immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms."}),x.jsx("p",{children:"Upon termination, your right to use the Service will immediately cease. If you wish to terminate your account, you may do so by signing out and deleting your account, which will result in the permanent deletion of your data."}),x.jsx("h2",{children:"6. Disclaimers"}),x.jsx("p",{children:'The Service is provided on an "AS IS" and "AS AVAILABLE" basis. The Service is provided without warranties of any kind, whether express or implied, including, but not limited to, implied warranties of merchantability, fitness for a particular purpose, non-infringement, or course of performance.'}),x.jsx("h2",{children:"7. Limitation of Liability"}),x.jsx("p",{children:"In no event shall Diary, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from (i) your access to or use of or inability to access or use the Service; (ii) any conduct or content of any third party on the Service; (iii) any content obtained from the Service; and (iv) unauthorized access, use or alteration of your transmissions or content, whether based on warranty, contract, tort (including negligence) or any other legal theory, whether or not we have been informed of the possibility of such damage, and even if a remedy set forth herein is found to have failed of its essential purpose."}),x.jsx("h2",{children:"8. Changes to Terms"}),x.jsx("p",{children:"We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material we will try to provide at least 30 days' notice prior to any new terms taking effect. What constitutes a material change will be determined at our sole discretion."}),x.jsx("h2",{children:"Contact Us"}),x.jsx("p",{children:"If you have any questions about these Terms, please contact us."})]})]})}),qj=()=>x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900 font-sans",children:x.jsxs("div",{className:"text-center p-8",children:[x.jsx("h1",{className:"text-6xl font-bold text-indigo-600 mb-4",children:"404"}),x.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-6",children:"Page Not Found"}),x.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-8 max-w-md mx-auto",children:"The page you are looking for doesn't exist or has been moved."}),x.jsx(Yl,{to:"/",className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full font-semibold transition-colors shadow-lg shadow-indigo-200 dark:shadow-none",children:"Go Back Home"})]})}),y_="DAILY_DIARY_KEY_CHECK_v1",Ss=t=>btoa(String.fromCharCode(...new Uint8Array(t))),ks=t=>Uint8Array.from(atob(t),e=>e.charCodeAt(0)).buffer,w_=new TextEncoder,$j=new TextDecoder,Hj=()=>{const t=window.crypto.getRandomValues(new Uint8Array(16));return Ss(t.buffer)},b_=async(t,e)=>{const r=w_.encode(t);let n=1e5,i=e;if(e.startsWith("v1:")){const s=e.split(":");if(s.length===3){const l=parseInt(s[1],10);isNaN(l)||(n=l,i=s[2])}}const a=ks(i),o=await window.crypto.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey"]);return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:a,iterations:n,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])},mv=async(t,e)=>{const r=window.crypto.getRandomValues(new Uint8Array(12)),n=w_.encode(e),i=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,n);return{iv:Ss(r.buffer),data:Ss(i)}},gv=async(t,e,r)=>{const n=ks(r),i=ks(e),a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},t,i);return $j.decode(a)},Wj=async(t,e)=>{const r=window.crypto.getRandomValues(new Uint8Array(12)),n=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,e);return{iv:Ss(r.buffer),data:n}},Vj=async(t,e,r)=>{const n=ks(r);return await window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},t,e)};async function Gj(t,e){const{data:r,error:n}=await Kt.from("profiles").select("*").eq("id",e).single();if(n||!r)return console.error("Profile not found for user:",e),null;const i=r;try{const a=await b_(t,i.salt);return await gv(a,i.key_check_value,i.key_check_iv)===y_?a:null}catch(a){return console.error("Key derivation or verification failed:",a),null}}const vv=async t=>{const e=await window.crypto.subtle.exportKey("raw",t);return Ss(e)},Kj=async t=>{const e=ks(t);return window.crypto.subtle.importKey("raw",e,{name:"AES-GCM"},!0,["encrypt","decrypt"])},x_=te.createContext(void 0),Yj=({children:t})=>{const[e,r]=te.useState(null),n=te.useCallback(()=>{r(null)},[]),i={key:e,setKey:r,deriveAndVerifyKey:Gj,encrypt:mv,decrypt:gv,encryptBinary:Wj,decryptBinary:Vj,lock:n};return x.jsx(x_.Provider,{value:i,children:t})},Os=()=>{const t=te.useContext(x_);if(t===void 0)throw new Error("useCrypto must be used within a CryptoProvider");return t},Jj="227b57dcb9e272db9e362fee3a14b924";async function Xj(t,e){const r=`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${e}&appid=${Jj}&units=metric`;try{const n=await fetch(r);if(!n.ok)throw new Error(`Weather API request failed with status ${n.status}`);const i=await n.json();return{temp:i.main.temp,description:i.weather[0].description,icon:i.weather[0].icon,location:i.name}}catch(n){return console.error("Could not fetch weather data:",n),null}}const Qj=t=>{try{const r=new DOMParser().parseFromString(t,"text/html").body.textContent||"";if(console.log("SmartTags: Analyzing text length:",r.length),r.length<3)return[];const n=[],i=/#(\w+)/g;let a;for(;(a=i.exec(r))!==null;)a[1].length>1&&n.push(a[1]);if(Qv){const l=Qv(r),u=l.topics().out("array"),h=l.places().out("array"),d=l.people().out("array"),f=l.organizations().out("array"),c=l.match("#ProperNoun").out("array");n.push(...u,...h,...d,...f,...c)}else console.warn("SmartTags: 'compromise' library not loaded. Only hashtags will work.");const o=n.map(l=>l.trim()).map(l=>l.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9]+$/g,"")).filter(l=>l.length>2).map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()),s=Array.from(new Set(o));return console.log("SmartTags: Suggestions found:",s),s}catch(e){return console.error("SmartTags: Error generating tags",e),[]}};function jg(t){if(!t)return[];const e=[];return new DOMParser().parseFromString(t,"text/html").querySelectorAll("img.secure-diary-image").forEach(a=>{const o=a,s=o.getAttribute("data-secure-metadata")||o.getAttribute("alt");if(s)try{const l=JSON.parse(s);l&&l.path&&e.push(l.path)}catch(l){console.warn("Failed to parse image metadata during cleanup extraction",l)}}),e}function Zj(t,e){const r=new Set(jg(t)),n=new Set(jg(e)),i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),i}const eO=({isVisible:t,onClose:e,journals:r,activeJournal:n,onSelectJournal:i})=>{const a=[{path:"/app",end:!0,label:"Timeline",icon:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})},{path:"/app/calendar",label:"Calendar",icon:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{path:"/app/search",label:"Search",icon:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})},{path:"/app/profile",label:"Profile",icon:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}],o=()=>{window.innerWidth<768&&e()};return x.jsxs("aside",{className:`bg-[#F4EFE9] dark:bg-slate-900 border-r border-[#EAE1D6] dark:border-slate-800 flex flex-col transition-transform duration-300 ease-in-out w-64 fixed md:absolute md:top-0 md:left-0 z-30 h-full ${t?"translate-x-0":"-translate-x-full"}`,children:[x.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#EAE1D6] dark:border-slate-800",children:[x.jsx("h1",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Diary"}),x.jsx("button",{onClick:e,className:"p-2 rounded-md hover:bg-slate-200/50 dark:hover:bg-slate-700/50",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),x.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[x.jsxs(pg,{to:"/app/new",onClick:o,className:"w-full flex items-center gap-3 p-3 rounded-lg text-white font-semibold transition-colors bg-indigo-500 hover:bg-indigo-600 shadow-sm mb-6",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),x.jsx("span",{children:"New Entry"})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"px-3 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2",children:"Views"}),a.map(s=>x.jsxs(pg,{to:s.path,end:s.end,onClick:o,className:({isActive:l})=>`w-full flex items-center gap-3 p-2.5 rounded-lg text-left text-sm font-medium transition-colors ${l?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-200/50 dark:hover:bg-slate-800"}`,children:[s.icon,x.jsx("span",{children:s.label})]},s.path))]}),x.jsxs("div",{className:"pt-6",children:[x.jsxs("h3",{className:"px-3 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 flex items-center justify-between",children:[x.jsx("span",{children:"Journals"}),x.jsx("span",{className:"bg-slate-200 dark:bg-slate-700 text-[10px] px-1.5 py-0.5 rounded-full text-slate-600 dark:text-slate-300",children:r.length})]}),x.jsxs("div",{className:"space-y-1",children:[x.jsxs("button",{onClick:()=>{i(null),o()},className:`w-full flex items-center gap-3 p-2.5 rounded-lg text-left text-sm font-medium transition-colors ${n===null?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-200/50 dark:hover:bg-slate-800"}`,children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 opacity-70",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"})}),x.jsx("span",{children:"All Entries"})]}),r.map(s=>x.jsxs("button",{onClick:()=>{i(s),o()},className:`w-full flex items-center gap-3 p-2.5 rounded-lg text-left text-sm font-medium transition-colors ${n===s?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-200/50 dark:hover:bg-slate-800"}`,children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 opacity-70",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"})}),x.jsx("span",{className:"truncate",children:s})]},s))]})]})]})]})};function sr(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function za(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function tO(t,e){const r=sr(t);return isNaN(e)?za(t,NaN):(r.setDate(r.getDate()+e),r)}const __=6048e5,rO=864e5,kf=43200,sw=1440;let nO={};function ld(){return nO}function Ns(t,e){var s,l,u,h;const r=ld(),n=(e==null?void 0:e.weekStartsOn)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((h=(u=r.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,i=sr(t),a=i.getDay(),o=(a<n?7:0)+a-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Rh(t){return Ns(t,{weekStartsOn:1})}function S_(t){const e=sr(t),r=e.getFullYear(),n=za(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=Rh(n),a=za(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=Rh(a);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Ih(t){const e=sr(t);return e.setHours(0,0,0,0),e}function Dh(t){const e=sr(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function iO(t,e){const r=Ih(t),n=Ih(e),i=+r-Dh(r),a=+n-Dh(n);return Math.round((i-a)/rO)}function aO(t){const e=S_(t),r=za(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Rh(r)}function Kf(t,e){const r=sr(t),n=sr(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function gp(t){return za(t,Date.now())}function k_(t,e){const r=Ih(t),n=Ih(e);return+r==+n}function oO(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function sO(t){if(!oO(t)&&typeof t!="number")return!1;const e=sr(t);return!isNaN(Number(e))}function lO(t,e){const r=sr(t),n=sr(e),i=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return i*12+a}function uO(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function cO(t,e){return+sr(t)-+sr(e)}function dO(t){const e=sr(t);return e.setHours(23,59,59,999),e}function fO(t){const e=sr(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function hO(t){const e=sr(t);return+dO(e)==+fO(e)}function pO(t,e){const r=sr(t),n=sr(e),i=Kf(r,n),a=Math.abs(lO(r,n));let o;if(a<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*a);let s=Kf(r,n)===-i;hO(sr(t))&&a===1&&Kf(t,n)===1&&(s=!1),o=i*(a-Number(s))}return o===0?0:o}function mO(t,e,r){const n=cO(t,e)/1e3;return uO(r==null?void 0:r.roundingMethod)(n)}function gO(t){const e=sr(t),r=za(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const vO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},yO=(t,e,r)=>{let n;const i=vO[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function J0(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const wO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_O={date:J0({formats:wO,defaultWidth:"full"}),time:J0({formats:bO,defaultWidth:"full"}),dateTime:J0({formats:xO,defaultWidth:"full"})},SO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},kO=(t,e,r,n)=>SO[t];function Xu(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,s=r!=null&&r.width?String(r.width):o;i=t.formattingValues[s]||t.formattingValues[o]}else{const o=t.defaultWidth,s=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[s]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const NO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},EO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},AO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},OO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},LO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},PO=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},TO={ordinalNumber:PO,era:Xu({values:NO,defaultWidth:"wide"}),quarter:Xu({values:EO,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Xu({values:AO,defaultWidth:"wide"}),day:Xu({values:jO,defaultWidth:"wide"}),dayPeriod:Xu({values:OO,defaultWidth:"wide",formattingValues:LO,defaultFormattingWidth:"wide"})};function Qu(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],s=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(s)?RO(s,d=>d.test(o)):CO(s,d=>d.test(o));let u;u=t.valueCallback?t.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const h=e.slice(o.length);return{value:u,rest:h}}}function CO(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function RO(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function IO(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const s=e.slice(i.length);return{value:o,rest:s}}}const DO=/^(\d+)(th|st|nd|rd)?/i,MO=/\d+/i,FO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},BO={any:[/^b/i,/^(a|c)/i]},UO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},zO={any:[/1/i,/2/i,/3/i,/4/i]},qO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},$O={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},HO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},WO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},VO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},GO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},KO={ordinalNumber:IO({matchPattern:DO,parsePattern:MO,valueCallback:t=>parseInt(t,10)}),era:Qu({matchPatterns:FO,defaultMatchWidth:"wide",parsePatterns:BO,defaultParseWidth:"any"}),quarter:Qu({matchPatterns:UO,defaultMatchWidth:"wide",parsePatterns:zO,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qu({matchPatterns:qO,defaultMatchWidth:"wide",parsePatterns:$O,defaultParseWidth:"any"}),day:Qu({matchPatterns:HO,defaultMatchWidth:"wide",parsePatterns:WO,defaultParseWidth:"any"}),dayPeriod:Qu({matchPatterns:VO,defaultMatchWidth:"any",parsePatterns:GO,defaultParseWidth:"any"})},N_={code:"en-US",formatDistance:yO,formatLong:_O,formatRelative:kO,localize:TO,match:KO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function YO(t){const e=sr(t);return iO(e,gO(e))+1}function JO(t){const e=sr(t),r=+Rh(e)-+aO(e);return Math.round(r/__)+1}function E_(t,e){var h,d,f,c;const r=sr(t),n=r.getFullYear(),i=ld(),a=(e==null?void 0:e.firstWeekContainsDate)??((d=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((c=(f=i.locale)==null?void 0:f.options)==null?void 0:c.firstWeekContainsDate)??1,o=za(t,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const s=Ns(o,e),l=za(t,0);l.setFullYear(n,0,a),l.setHours(0,0,0,0);const u=Ns(l,e);return r.getTime()>=s.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function XO(t,e){var s,l,u,h;const r=ld(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(u=r.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,i=E_(t,e),a=za(t,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),Ns(a,e)}function QO(t,e){const r=sr(t),n=+Ns(r,e)-+XO(r,e);return Math.round(n/__)+1}function nr(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const lo={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return nr(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):nr(r+1,2)},d(t,e){return nr(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return nr(t.getHours()%12||12,e.length)},H(t,e){return nr(t.getHours(),e.length)},m(t,e){return nr(t.getMinutes(),e.length)},s(t,e){return nr(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return nr(i,e.length)}},sl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lw={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return lo.y(t,e)},Y:function(t,e,r,n){const i=E_(t,n),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return nr(o,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):nr(a,e.length)},R:function(t,e){const r=S_(t);return nr(r,e.length)},u:function(t,e){const r=t.getFullYear();return nr(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return nr(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return nr(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return lo.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return nr(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=QO(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):nr(i,e.length)},I:function(t,e,r){const n=JO(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):nr(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):lo.d(t,e)},D:function(t,e,r){const n=YO(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):nr(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return nr(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return nr(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return nr(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=sl.noon:n===0?i=sl.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=sl.evening:n>=12?i=sl.afternoon:n>=4?i=sl.morning:i=sl.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return lo.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):lo.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):nr(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):nr(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):lo.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):lo.s(t,e)},S:function(t,e){return lo.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return cw(n);case"XXXX":case"XX":return rs(n);case"XXXXX":case"XXX":default:return rs(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return cw(n);case"xxxx":case"xx":return rs(n);case"xxxxx":case"xxx":default:return rs(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+uw(n,":");case"OOOO":default:return"GMT"+rs(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+uw(n,":");case"zzzz":default:return"GMT"+rs(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return nr(n,e.length)},T:function(t,e,r){const n=t.getTime();return nr(n,e.length)}};function uw(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),a=n%60;return a===0?r+String(i):r+String(i)+e+nr(a,2)}function cw(t,e){return t%60===0?(t>0?"-":"+")+nr(Math.abs(t)/60,2):rs(t,e)}function rs(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=nr(Math.trunc(n/60),2),a=nr(n%60,2);return r+i+e+a}const dw=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},A_=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ZO=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return dw(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",dw(n,e)).replace("{{time}}",A_(i,e))},eL={p:A_,P:ZO},tL=/^D+$/,rL=/^Y+$/,nL=["D","DD","YY","YYYY"];function iL(t){return tL.test(t)}function aL(t){return rL.test(t)}function oL(t,e,r){const n=sL(t,e,r);if(console.warn(n),nL.includes(t))throw new RangeError(n)}function sL(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const lL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cL=/^'([^]*?)'?$/,dL=/''/g,fL=/[a-zA-Z]/;function Qc(t,e,r){var h,d,f,c;const n=ld(),i=n.locale??N_,a=n.firstWeekContainsDate??((d=(h=n.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,o=n.weekStartsOn??((c=(f=n.locale)==null?void 0:f.options)==null?void 0:c.weekStartsOn)??0,s=sr(t);if(!sO(s))throw new RangeError("Invalid time value");let l=e.match(uL).map(y=>{const v=y[0];if(v==="p"||v==="P"){const w=eL[v];return w(y,i.formatLong)}return y}).join("").match(lL).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const v=y[0];if(v==="'")return{isToken:!1,value:hL(y)};if(lw[v])return{isToken:!0,value:y};if(v.match(fL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(l=i.localize.preprocessor(s,l));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return l.map(y=>{if(!y.isToken)return y.value;const v=y.value;(aL(v)||iL(v))&&oL(v,e,String(t));const w=lw[v[0]];return w(s,v,i.localize,u)}).join("")}function hL(t){const e=t.match(cL);return e?e[1].replace(dL,"'"):t}function pL(t,e,r){const n=ld(),i=(r==null?void 0:r.locale)??n.locale??N_,a=2520,o=Kf(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const s=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,u;o>0?(l=sr(e),u=sr(t)):(l=sr(t),u=sr(e));const h=mO(u,l),d=(Dh(u)-Dh(l))/1e3,f=Math.round((h-d)/60);let c;if(f<2)return r!=null&&r.includeSeconds?h<5?i.formatDistance("lessThanXSeconds",5,s):h<10?i.formatDistance("lessThanXSeconds",10,s):h<20?i.formatDistance("lessThanXSeconds",20,s):h<40?i.formatDistance("halfAMinute",0,s):h<60?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",1,s):f===0?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",f,s);if(f<45)return i.formatDistance("xMinutes",f,s);if(f<90)return i.formatDistance("aboutXHours",1,s);if(f<sw){const y=Math.round(f/60);return i.formatDistance("aboutXHours",y,s)}else{if(f<a)return i.formatDistance("xDays",1,s);if(f<kf){const y=Math.round(f/sw);return i.formatDistance("xDays",y,s)}else if(f<kf*2)return c=Math.round(f/kf),i.formatDistance("aboutXMonths",c,s)}if(c=pO(u,l),c<12){const y=Math.round(f/kf);return i.formatDistance("xMonths",y,s)}else{const y=c%12,v=Math.trunc(c/12);return y<3?i.formatDistance("aboutXYears",v,s):y<9?i.formatDistance("overXYears",v,s):i.formatDistance("almostXYears",v+1,s)}}function j_(t,e){return pL(t,gp(t),e)}function mL(t,e,r){const n=Ns(t,r),i=Ns(e,r);return+n==+i}function gL(t,e){return mL(t,gp(t),e)}function vL(t){return k_(t,gp(t))}function yL(t,e){return tO(t,-1)}function wL(t){return k_(t,yL(gp(t)))}const bL=({status:t})=>{const e={encrypting:{text:"Encrypting...",icon:x.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})},synced:{text:"Synced",icon:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})},error:{text:"Error",icon:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}},{text:r,icon:n}=e[t];return x.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400",children:[n,x.jsx("span",{className:"hidden sm:inline",children:r})]})},xL=({isEditing:t,onSave:e,onCancel:r,currentDate:n,weather:i,theme:a,onToggleTheme:o,saveStatus:s,profile:l,onShowProfile:u,isToolsPanelVisible:h,onToggleToolsPanel:d,isLeftSidebarVisible:f})=>{const[c,y]=te.useState(new Date),[v,w]=te.useState(null),{lock:p}=Os();return te.useEffect(()=>{const g=setInterval(()=>{y(new Date)},6e4);return()=>clearInterval(g)},[]),te.useEffect(()=>{let g=!0;return(async()=>{if(!(l!=null&&l.avatar_url)){g&&w(null);return}if(l.avatar_url.startsWith("http"))g&&w(l.avatar_url);else try{const{data:_,error:E}=await Kt.storage.from("avatars").createSignedUrl(l.avatar_url,3600);if(E)throw E;g&&(_!=null&&_.signedUrl)&&w(_.signedUrl)}catch(_){console.error("Error resolving avatar URL in TopBar:",_),g&&w(null)}})(),()=>{g=!1}},[l==null?void 0:l.avatar_url]),x.jsx("header",{className:"bg-white/80 dark:bg-slate-900/50 backdrop-blur-sm border-b border-[#EAE1D6] dark:border-slate-800 min-h-[4rem] flex-shrink-0 relative z-20 transition-all duration-200",children:x.jsxs("div",{className:"min-h-[4rem] flex flex-wrap items-center justify-between px-4 sm:px-6 py-2 gap-y-2",children:[x.jsxs("div",{className:`flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-slate-600 dark:text-slate-300 transition-all duration-300 ${f?"":"pl-12 md:pl-16"} ${t?"hidden md:flex":"flex"}`,children:[x.jsx("span",{className:"font-semibold",children:Qc(c,"p")}),x.jsx("span",{className:"font-semibold",children:Qc(n,"MMMM d, yyyy")}),i&&x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full"}),x.jsxs("span",{children:[i.location,", ",Math.round(i.temp),"C"]})]})]}),x.jsx("div",{className:`flex items-center gap-3 ${t&&!f?"pl-12 md:pl-0":""}`,children:t?x.jsxs(x.Fragment,{children:[x.jsx(bL,{status:s}),x.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-semibold rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),x.jsx("button",{onClick:e,className:"px-4 py-1.5 text-sm font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 transition-colors shadow-sm",children:"Save"})]}):x.jsx("div",{className:"hidden md:block h-9"})}),x.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 ml-auto md:ml-0",children:[t&&x.jsx("button",{onClick:d,title:"Toggle Tools Panel",className:`p-2 rounded-full transition-colors ${h?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-600":"hover:bg-slate-200/50 dark:hover:bg-slate-700/50 text-slate-500"}`,children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),x.jsx("button",{onClick:p,title:"Lock Diary",className:"p-2 rounded-full hover:bg-slate-200/50 dark:hover:bg-slate-700/50 text-slate-500 dark:text-slate-400",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),x.jsx("button",{onClick:o,title:"Toggle Theme",className:"p-2 rounded-full hover:bg-slate-200/50 dark:hover:bg-slate-700/50 text-slate-500 dark:text-slate-400",children:a==="dark"?x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 14.464A1 1 0 106.465 13.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zm-1.414-2.12a1 1 0 011.414 0l.707.707a1 1 0 11-1.414 1.414l-.707-.707a1 1 0 010-1.414zM4 11a1 1 0 100-2H3a1 1 0 100 2h1z",clipRule:"evenodd"})})}),x.jsx("button",{onClick:u,title:"Profile & Settings",className:"w-9 h-9 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden flex items-center justify-center hover:ring-2 ring-indigo-500 ring-offset-2 ring-offset-white dark:ring-offset-slate-900 transition-all",children:v?x.jsx("img",{src:v,alt:"User avatar",className:"w-full h-full object-cover"}):x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})})]})]})})},_L="modulepreload",SL=function(t){return"/diary/"+t},fw={},Og=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=SL(l),l in fw)return;fw[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":_L,u||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),u)return new Promise((f,c)=>{d.addEventListener("load",f),d.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};function ir(t){"@babel/helpers - typeof";return ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(t)}var _n=Uint8Array,ci=Uint16Array,yv=Int32Array,vp=new _n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),yp=new _n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Lg=new _n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O_=function(t,e){for(var r=new ci(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new yv(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return{b:r,r:i}},L_=O_(vp,2),P_=L_.b,Pg=L_.r;P_[28]=258,Pg[258]=28;var T_=O_(yp,0),kL=T_.b,hw=T_.r,Tg=new ci(32768);for(var yr=0;yr<32768;++yr){var uo=(yr&43690)>>1|(yr&21845)<<1;uo=(uo&52428)>>2|(uo&13107)<<2,uo=(uo&61680)>>4|(uo&3855)<<4,Tg[yr]=((uo&65280)>>8|(uo&255)<<8)>>1}var pa=function(t,e,r){for(var n=t.length,i=0,a=new ci(e);i<n;++i)t[i]&&++a[t[i]-1];var o=new ci(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(r){s=new ci(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var u=i<<4|t[i],h=e-t[i],d=o[t[i]-1]++<<h,f=d|(1<<h)-1;d<=f;++d)s[Tg[d]>>l]=u}else for(s=new ci(n),i=0;i<n;++i)t[i]&&(s[i]=Tg[o[t[i]-1]++]>>15-t[i]);return s},Co=new _n(288);for(var yr=0;yr<144;++yr)Co[yr]=8;for(var yr=144;yr<256;++yr)Co[yr]=9;for(var yr=256;yr<280;++yr)Co[yr]=7;for(var yr=280;yr<288;++yr)Co[yr]=8;var Zc=new _n(32);for(var yr=0;yr<32;++yr)Zc[yr]=5;var NL=pa(Co,9,0),EL=pa(Co,9,1),AL=pa(Zc,5,0),jL=pa(Zc,5,1),X0=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Fi=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},Q0=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},wv=function(t){return(t+7)/8|0},C_=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new _n(t.subarray(e,r))},OL=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Hi=function(t,e,r){var n=new Error(e||OL[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Hi),!r)throw n;return n},LL=function(t,e,r,n){var i=t.length,a=0;if(!i||e.f&&!e.l)return r||new _n(0);var o=!r,s=o||e.i!=2,l=e.i;o&&(r=new _n(i*3));var u=function(ye){var Oe=r.length;if(ye>Oe){var Le=new _n(Math.max(Oe*2,ye));Le.set(r),r=Le}},h=e.f||0,d=e.p||0,f=e.b||0,c=e.l,y=e.d,v=e.m,w=e.n,p=i*8;do{if(!c){h=Fi(t,d,1);var g=Fi(t,d+1,3);if(d+=3,g)if(g==1)c=EL,y=jL,v=9,w=5;else if(g==2){var C=Fi(t,d,31)+257,A=Fi(t,d+10,15)+4,P=C+Fi(t,d+5,31)+1;d+=14;for(var F=new _n(P),T=new _n(19),k=0;k<A;++k)T[Lg[k]]=Fi(t,d+k*3,7);d+=A*3;for(var j=X0(T),I=(1<<j)-1,R=pa(T,j,1),k=0;k<P;){var $=R[Fi(t,d,I)];d+=$&15;var b=$>>4;if(b<16)F[k++]=b;else{var Z=0,Q=0;for(b==16?(Q=3+Fi(t,d,3),d+=2,Z=F[k-1]):b==17?(Q=3+Fi(t,d,7),d+=3):b==18&&(Q=11+Fi(t,d,127),d+=7);Q--;)F[k++]=Z}}var X=F.subarray(0,C),G=F.subarray(C);v=X0(X),w=X0(G),c=pa(X,v,1),y=pa(G,w,1)}else Hi(1);else{var b=wv(d)+4,_=t[b-4]|t[b-3]<<8,E=b+_;if(E>i){l&&Hi(0);break}s&&u(f+_),r.set(t.subarray(b,E),f),e.b=f+=_,e.p=d=E*8,e.f=h;continue}if(d>p){l&&Hi(0);break}}s&&u(f+131072);for(var H=(1<<v)-1,B=(1<<w)-1,L=d;;L=d){var Z=c[Q0(t,d)&H],D=Z>>4;if(d+=Z&15,d>p){l&&Hi(0);break}if(Z||Hi(2),D<256)r[f++]=D;else if(D==256){L=d,c=null;break}else{var z=D-254;if(D>264){var k=D-257,q=vp[k];z=Fi(t,d,(1<<q)-1)+P_[k],d+=q}var U=y[Q0(t,d)&B],K=U>>4;U||Hi(3),d+=U&15;var G=kL[K];if(K>3){var q=yp[K];G+=Q0(t,d)&(1<<q)-1,d+=q}if(d>p){l&&Hi(0);break}s&&u(f+131072);var ne=f+z;if(f<G){var ie=a-G,he=Math.min(G,ne);for(ie+f<0&&Hi(3);f<he;++f)r[f]=n[ie+f]}for(;f<ne;++f)r[f]=r[f-G]}}e.l=c,e.p=L,e.b=f,e.f=h,c&&(h=1,e.m=v,e.d=y,e.n=w)}while(!h);return f!=r.length&&o?C_(r,0,f):r.subarray(0,f)},Aa=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Zu=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Z0=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,a=r.slice();if(!i)return{t:I_,l:0};if(i==1){var o=new _n(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(E,C){return E.f-C.f}),r.push({s:-1,f:25001});var s=r[0],l=r[1],u=0,h=1,d=2;for(r[0]={s:-1,f:s.f+l.f,l:s,r:l};h!=i-1;)s=r[r[u].f<r[d].f?u++:d++],l=r[u!=h&&r[u].f<r[d].f?u++:d++],r[h++]={s:-1,f:s.f+l.f,l:s,r:l};for(var f=a[0].s,n=1;n<i;++n)a[n].s>f&&(f=a[n].s);var c=new ci(f+1),y=Cg(r[h-1],c,0);if(y>e){var n=0,v=0,w=y-e,p=1<<w;for(a.sort(function(C,A){return c[A.s]-c[C.s]||C.f-A.f});n<i;++n){var g=a[n].s;if(c[g]>e)v+=p-(1<<y-c[g]),c[g]=e;else break}for(v>>=w;v>0;){var b=a[n].s;c[b]<e?v-=1<<e-c[b]++-1:++n}for(;n>=0&&v;--n){var _=a[n].s;c[_]==e&&(--c[_],++v)}y=e}return{t:new _n(c),l:y}},Cg=function(t,e,r){return t.s==-1?Math.max(Cg(t.l,e,r+1),Cg(t.r,e,r+1)):e[t.s]=r},pw=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new ci(++e),n=0,i=t[0],a=1,o=function(l){r[n++]=l},s=1;s<=e;++s)if(t[s]==i&&s!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=t[s]}return{c:r.subarray(0,n),n:e}},ec=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},R_=function(t,e,r){var n=r.length,i=wv(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var a=0;a<n;++a)t[i+a+4]=r[a];return(i+4+n)*8},mw=function(t,e,r,n,i,a,o,s,l,u,h){Aa(e,h++,r),++i[256];for(var d=Z0(i,15),f=d.t,c=d.l,y=Z0(a,15),v=y.t,w=y.l,p=pw(f),g=p.c,b=p.n,_=pw(v),E=_.c,C=_.n,A=new ci(19),P=0;P<g.length;++P)++A[g[P]&31];for(var P=0;P<E.length;++P)++A[E[P]&31];for(var F=Z0(A,7),T=F.t,k=F.l,j=19;j>4&&!T[Lg[j-1]];--j);var I=u+5<<3,R=ec(i,Co)+ec(a,Zc)+o,$=ec(i,f)+ec(a,v)+o+14+3*j+ec(A,T)+2*A[16]+3*A[17]+7*A[18];if(l>=0&&I<=R&&I<=$)return R_(e,h,t.subarray(l,l+u));var Z,Q,X,G;if(Aa(e,h,1+($<R)),h+=2,$<R){Z=pa(f,c,0),Q=f,X=pa(v,w,0),G=v;var H=pa(T,k,0);Aa(e,h,b-257),Aa(e,h+5,C-1),Aa(e,h+10,j-4),h+=14;for(var P=0;P<j;++P)Aa(e,h+3*P,T[Lg[P]]);h+=3*j;for(var B=[g,E],L=0;L<2;++L)for(var D=B[L],P=0;P<D.length;++P){var z=D[P]&31;Aa(e,h,H[z]),h+=T[z],z>15&&(Aa(e,h,D[P]>>5&127),h+=D[P]>>12)}}else Z=NL,Q=Co,X=AL,G=Zc;for(var P=0;P<s;++P){var q=n[P];if(q>255){var z=q>>18&31;Zu(e,h,Z[z+257]),h+=Q[z+257],z>7&&(Aa(e,h,q>>23&31),h+=vp[z]);var U=q&31;Zu(e,h,X[U]),h+=G[U],U>3&&(Zu(e,h,q>>5&8191),h+=yp[U])}else Zu(e,h,Z[q]),h+=Q[q]}return Zu(e,h,Z[256]),h+Q[256]},PL=new yv([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),I_=new _n(0),TL=function(t,e,r,n,i,a){var o=a.z||t.length,s=new _n(n+o+5*(1+Math.ceil(o/7e3))+i),l=s.subarray(n,s.length-i),u=a.l,h=(a.r||0)&7;if(e){h&&(l[0]=a.r>>3);for(var d=PL[e-1],f=d>>13,c=d&8191,y=(1<<r)-1,v=a.p||new ci(32768),w=a.h||new ci(y+1),p=Math.ceil(r/3),g=2*p,b=function(He){return(t[He]^t[He+1]<<p^t[He+2]<<g)&y},_=new yv(25e3),E=new ci(288),C=new ci(32),A=0,P=0,F=a.i||0,T=0,k=a.w||0,j=0;F+2<o;++F){var I=b(F),R=F&32767,$=w[I];if(v[R]=$,w[I]=R,k<=F){var Z=o-F;if((A>7e3||T>24576)&&(Z>423||!u)){h=mw(t,l,0,_,E,C,P,T,j,F-j,h),T=A=P=0,j=F;for(var Q=0;Q<286;++Q)E[Q]=0;for(var Q=0;Q<30;++Q)C[Q]=0}var X=2,G=0,H=c,B=R-$&32767;if(Z>2&&I==b(F-B))for(var L=Math.min(f,Z)-1,D=Math.min(32767,F),z=Math.min(258,Z);B<=D&&--H&&R!=$;){if(t[F+X]==t[F+X-B]){for(var q=0;q<z&&t[F+q]==t[F+q-B];++q);if(q>X){if(X=q,G=B,q>L)break;for(var U=Math.min(B,q-2),K=0,Q=0;Q<U;++Q){var ne=F-B+Q&32767,ie=v[ne],he=ne-ie&32767;he>K&&(K=he,$=ne)}}}R=$,$=v[R],B+=R-$&32767}if(G){_[T++]=268435456|Pg[X]<<18|hw[G];var ye=Pg[X]&31,Oe=hw[G]&31;P+=vp[ye]+yp[Oe],++E[257+ye],++C[Oe],k=F+X,++A}else _[T++]=t[F],++E[t[F]]}}for(F=Math.max(F,k);F<o;++F)_[T++]=t[F],++E[t[F]];h=mw(t,l,u,_,E,C,P,T,j,F-j,h),u||(a.r=h&7|l[h/8|0]<<3,h-=7,a.h=w,a.p=v,a.i=F,a.w=k)}else{for(var F=a.w||0;F<o+u;F+=65535){var Le=F+65535;Le>=o&&(l[h/8|0]=u,Le=o),h=R_(l,h+1,t.subarray(F,Le))}a.i=o}return C_(s,0,n+wv(h)+i)},D_=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,a=r.length|0,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=n+=r[o];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},CL=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new _n(a.length+t.length);o.set(a),o.set(t,a.length),t=o,i.w=a.length}return TL(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},M_=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},RL=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=D_();i.p(e.dictionary),M_(t,2,i.d())}},IL=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Hi(6,"invalid zlib data"),(t[1]>>5&1)==1&&Hi(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Rg(t,e){e||(e={});var r=D_();r.p(t);var n=CL(t,e,e.dictionary?6:2,4);return RL(n,e),M_(n,n.length-4,r.d()),n}function DL(t,e){return LL(t.subarray(IL(t),-4),{i:2},e,e)}var ML=typeof TextDecoder<"u"&&new TextDecoder,FL=0;try{ML.decode(I_,{stream:!0}),FL=1}catch{}var kt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function em(){kt.console&&typeof kt.console.log=="function"&&kt.console.log.apply(kt.console,arguments)}var ur={log:em,warn:function(t){kt.console&&(typeof kt.console.warn=="function"?kt.console.warn.apply(kt.console,arguments):em.call(null,arguments))},error:function(t){kt.console&&(typeof kt.console.error=="function"?kt.console.error.apply(kt.console,arguments):em(t))}};function tm(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){ns(n.response,e,r)},n.onerror=function(){ur.error("could not download file")},n.send()}function gw(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Nf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Ac,Ig,ns=kt.saveAs||((typeof window>"u"?"undefined":ir(window))!=="object"||window!==kt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=kt.URL||kt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?gw(i.href)?tm(t,e,r):Nf(i,i.target="_blank"):Nf(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Nf(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(gw(t))tm(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Nf(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:ir(a)!=="object"&&(ur.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return tm(t,e,r);var i=t.type==="application/octet-stream",a=/constructor/i.test(kt.HTMLElement)||kt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":ir(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var h=s.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=h:location=h,n=null},s.readAsDataURL(t)}else{var l=kt.URL||kt.webkitURL,u=l.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function F_(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,a=r[n].process,o=i.exec(t);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+s+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function rm(t,e){var r=t[0],n=t[1],i=t[2],a=t[3];r=vn(r,n,i,a,e[0],7,-680876936),a=vn(a,r,n,i,e[1],12,-389564586),i=vn(i,a,r,n,e[2],17,606105819),n=vn(n,i,a,r,e[3],22,-1044525330),r=vn(r,n,i,a,e[4],7,-176418897),a=vn(a,r,n,i,e[5],12,1200080426),i=vn(i,a,r,n,e[6],17,-1473231341),n=vn(n,i,a,r,e[7],22,-45705983),r=vn(r,n,i,a,e[8],7,1770035416),a=vn(a,r,n,i,e[9],12,-1958414417),i=vn(i,a,r,n,e[10],17,-42063),n=vn(n,i,a,r,e[11],22,-1990404162),r=vn(r,n,i,a,e[12],7,1804603682),a=vn(a,r,n,i,e[13],12,-40341101),i=vn(i,a,r,n,e[14],17,-1502002290),r=yn(r,n=vn(n,i,a,r,e[15],22,1236535329),i,a,e[1],5,-165796510),a=yn(a,r,n,i,e[6],9,-1069501632),i=yn(i,a,r,n,e[11],14,643717713),n=yn(n,i,a,r,e[0],20,-373897302),r=yn(r,n,i,a,e[5],5,-701558691),a=yn(a,r,n,i,e[10],9,38016083),i=yn(i,a,r,n,e[15],14,-660478335),n=yn(n,i,a,r,e[4],20,-405537848),r=yn(r,n,i,a,e[9],5,568446438),a=yn(a,r,n,i,e[14],9,-1019803690),i=yn(i,a,r,n,e[3],14,-187363961),n=yn(n,i,a,r,e[8],20,1163531501),r=yn(r,n,i,a,e[13],5,-1444681467),a=yn(a,r,n,i,e[2],9,-51403784),i=yn(i,a,r,n,e[7],14,1735328473),r=wn(r,n=yn(n,i,a,r,e[12],20,-1926607734),i,a,e[5],4,-378558),a=wn(a,r,n,i,e[8],11,-2022574463),i=wn(i,a,r,n,e[11],16,1839030562),n=wn(n,i,a,r,e[14],23,-35309556),r=wn(r,n,i,a,e[1],4,-1530992060),a=wn(a,r,n,i,e[4],11,1272893353),i=wn(i,a,r,n,e[7],16,-155497632),n=wn(n,i,a,r,e[10],23,-1094730640),r=wn(r,n,i,a,e[13],4,681279174),a=wn(a,r,n,i,e[0],11,-358537222),i=wn(i,a,r,n,e[3],16,-722521979),n=wn(n,i,a,r,e[6],23,76029189),r=wn(r,n,i,a,e[9],4,-640364487),a=wn(a,r,n,i,e[12],11,-421815835),i=wn(i,a,r,n,e[15],16,530742520),r=bn(r,n=wn(n,i,a,r,e[2],23,-995338651),i,a,e[0],6,-198630844),a=bn(a,r,n,i,e[7],10,1126891415),i=bn(i,a,r,n,e[14],15,-1416354905),n=bn(n,i,a,r,e[5],21,-57434055),r=bn(r,n,i,a,e[12],6,1700485571),a=bn(a,r,n,i,e[3],10,-1894986606),i=bn(i,a,r,n,e[10],15,-1051523),n=bn(n,i,a,r,e[1],21,-2054922799),r=bn(r,n,i,a,e[8],6,1873313359),a=bn(a,r,n,i,e[15],10,-30611744),i=bn(i,a,r,n,e[6],15,-1560198380),n=bn(n,i,a,r,e[13],21,1309151649),r=bn(r,n,i,a,e[4],6,-145523070),a=bn(a,r,n,i,e[11],10,-1120210379),i=bn(i,a,r,n,e[2],15,718787259),n=bn(n,i,a,r,e[9],21,-343485551),t[0]=_o(r,t[0]),t[1]=_o(n,t[1]),t[2]=_o(i,t[2]),t[3]=_o(a,t[3])}function wp(t,e,r,n,i,a){return e=_o(_o(e,t),_o(n,a)),_o(e<<i|e>>>32-i,r)}function vn(t,e,r,n,i,a,o){return wp(e&r|~e&n,t,e,i,a,o)}function yn(t,e,r,n,i,a,o){return wp(e&n|r&~n,t,e,i,a,o)}function wn(t,e,r,n,i,a,o){return wp(e^r^n,t,e,i,a,o)}function bn(t,e,r,n,i,a,o){return wp(r^(e|~n),t,e,i,a,o)}function B_(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)rm(n,BL(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(rm(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,rm(n,i),n}function BL(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Ac=kt.atob.bind(kt),Ig=kt.btoa.bind(kt);var vw="0123456789abcdef".split("");function UL(t){for(var e="",r=0;r<4;r++)e+=vw[t>>8*r+4&15]+vw[t>>8*r&15];return e}function zL(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Dg(t){return B_(t).map(zL).join("")}var qL=function(t){for(var e=0;e<t.length;e++)t[e]=UL(t[e]);return t.join("")}(B_("hello"))!="5d41402abc4b2a76b9719d911017c592";function _o(t,e){if(qL){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Mg(t,e){var r,n,i,a;if(t!==r){for(var o=(i=t,a=1+(256/t.length>>0),new Array(a+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var u=0;for(l=0;l<256;l++){var h=s[l];u=(u+h+o.charCodeAt(l))%256,s[l]=s[u],s[u]=h}r=t,n=s}else s=n;var d=e.length,f=0,c=0,y="";for(l=0;l<d;l++)c=(c+(h=s[f=(f+1)%256]))%256,s[f]=s[c],s[c]=h,o=s[(s[f]+s[c])%256],y+=String.fromCharCode(e.charCodeAt(l)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var yw={print:4,modify:8,copy:16,"annot-forms":32};function pl(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(s){if(yw.perm!==void 0)throw new Error("Invalid permission: "+s);i+=yw[s]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=Dg(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Mg(this.encryptionKey,this.padding)}function ml(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[n]}return e}function ww(t){if(ir(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var a=Math.random().toString(35);return e[r][a]=[n,!!i],a},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[r]){var o=e[r][a];try{o[0].apply(t,n)}catch(s){kt.console&&ur.error("jsPDF PubSub Error",s.message,s)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Mh(t){if(!(this instanceof Mh))return new Mh(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function U_(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function ls(t,e,r,n,i){if(!(this instanceof ls))return new ls(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,U_.call(this,n,i)}function Ol(t,e,r,n,i){if(!(this instanceof Ol))return new Ol(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,U_.call(this,n,i)}function St(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],o=[],s=1,l=16,u="S",h=null;ir(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,a=t.compress||t.compressPdf||a,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),s=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(a===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,f={},c={internal:{},__private__:{}};c.__private__.PubSub=ww;var y="1.3",v=c.__private__.getPdfVersion=function(){return y};c.__private__.setPdfVersion=function(N){y=N};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};c.__private__.getPageFormats=function(){return w};var p=c.__private__.getPageFormat=function(N){return w[N]};i=i||"a4";var g={COMPAT:"compat",ADVANCED:"advanced"},b=g.COMPAT;function _(){this.saveGraphicsState(),se(new vt(qe,0,0,-qe,0,Ka()*qe).toString()+" cm"),this.setFontSize(this.getFontSize()/qe),u="n",b=g.ADVANCED}function E(){this.restoreGraphicsState(),u="S",b=g.COMPAT}var C=c.__private__.combineFontStyleAndFontWeight=function(N,V){if(N=="bold"&&V=="normal"||N=="bold"&&V==400||N=="normal"&&V=="italic"||N=="bold"&&V=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return V&&(N=V==400||V==="normal"?N==="italic"?"italic":"normal":V!=700&&V!=="bold"||N!=="normal"?(V==700?"bold":V)+""+N:"bold"),N};c.advancedAPI=function(N){var V=b===g.COMPAT;return V&&_.call(this),typeof N!="function"||(N(this),V&&E.call(this)),this},c.compatAPI=function(N){var V=b===g.ADVANCED;return V&&E.call(this),typeof N!="function"||(N(this),V&&_.call(this)),this},c.isAdvancedAPI=function(){return b===g.ADVANCED};var A,P=function(N){if(b!==g.ADVANCED)throw new Error(N+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=c.roundToPrecision=c.__private__.roundToPrecision=function(N,V){var le=e||V;if(isNaN(N)||isNaN(le))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return N.toFixed(le).replace(/0+$/,"")};A=c.hpf=c.__private__.hpf=typeof l=="number"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return F(N,l)}:l==="smart"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return F(N,N>-1&&N<1?16:5)}:function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return F(N,16)};var T=c.f2=c.__private__.f2=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f2");return F(N,2)},k=c.__private__.f3=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f3");return F(N,3)},j=c.scale=c.__private__.scale=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.scale");return b===g.COMPAT?N*qe:b===g.ADVANCED?N:void 0},I=function(N){return b===g.COMPAT?Ka()-N:b===g.ADVANCED?N:void 0},R=function(N){return j(I(N))};c.__private__.setPrecision=c.setPrecision=function(N){typeof parseInt(N,10)=="number"&&(e=parseInt(N,10))};var $,Z="00000000000000000000000000000000",Q=c.__private__.getFileId=function(){return Z},X=c.__private__.setFileId=function(N){return Z=N!==void 0&&/^[a-fA-F0-9]{32}$/.test(N)?N.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(hn=new pl(h.userPermissions,h.userPassword,h.ownerPassword,Z)),Z};c.setFileId=function(N){return X(N),this},c.getFileId=function(){return Q()};var G=c.__private__.convertDateToPDFDate=function(N){var V=N.getTimezoneOffset(),le=V<0?"+":"-",fe=Math.floor(Math.abs(V/60)),ke=Math.abs(V%60),Re=[le,z(fe),"'",z(ke),"'"].join("");return["D:",N.getFullYear(),z(N.getMonth()+1),z(N.getDate()),z(N.getHours()),z(N.getMinutes()),z(N.getSeconds()),Re].join("")},H=c.__private__.convertPDFDateToDate=function(N){var V=parseInt(N.substr(2,4),10),le=parseInt(N.substr(6,2),10)-1,fe=parseInt(N.substr(8,2),10),ke=parseInt(N.substr(10,2),10),Re=parseInt(N.substr(12,2),10),$e=parseInt(N.substr(14,2),10);return new Date(V,le,fe,ke,Re,$e,0)},B=c.__private__.setCreationDate=function(N){var V;if(N===void 0&&(N=new Date),N instanceof Date)V=G(N);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(N))throw new Error("Invalid argument passed to jsPDF.setCreationDate");V=N}return $=V},L=c.__private__.getCreationDate=function(N){var V=$;return N==="jsDate"&&(V=H($)),V};c.setCreationDate=function(N){return B(N),this},c.getCreationDate=function(N){return L(N)};var D,z=c.__private__.padd2=function(N){return("0"+parseInt(N)).slice(-2)},q=c.__private__.padd2Hex=function(N){return("00"+(N=N.toString())).substr(N.length)},U=0,K=[],ne=[],ie=0,he=[],ye=[],Oe=!1,Le=ne,He=function(){U=0,ie=0,ne=[],K=[],he=[],tt=Ue(),it=Ue()};c.__private__.setCustomOutputDestination=function(N){Oe=!0,Le=N};var _e=function(N){Oe||(Le=N)};c.__private__.resetCustomOutputDestination=function(){Oe=!1,Le=ne};var se=c.__private__.out=function(N){return N=N.toString(),ie+=N.length+1,Le.push(N),Le},rt=c.__private__.write=function(N){return se(arguments.length===1?N.toString():Array.prototype.join.call(arguments," "))},ve=c.__private__.getArrayBuffer=function(N){for(var V=N.length,le=new ArrayBuffer(V),fe=new Uint8Array(le);V--;)fe[V]=N.charCodeAt(V);return le},de=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];c.__private__.getStandardFonts=function(){return de};var ge=t.fontSize||16;c.__private__.setFontSize=c.setFontSize=function(N){return ge=b===g.ADVANCED?N/qe:N,this};var Ne,ae=c.__private__.getFontSize=c.getFontSize=function(){return b===g.COMPAT?ge:ge*qe},Se=t.R2L||!1;c.__private__.setR2L=c.setR2L=function(N){return Se=N,this},c.__private__.getR2L=c.getR2L=function(){return Se};var Ce,Pe=c.__private__.setZoomMode=function(N){var V=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(N))Ne=N;else if(isNaN(N)){if(V.indexOf(N)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+N+'" is not recognized.');Ne=N}else Ne=parseInt(N,10)};c.__private__.getZoomMode=function(){return Ne};var Ve,Ye=c.__private__.setPageMode=function(N){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(N)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+N+'" is not recognized.');Ce=N};c.__private__.getPageMode=function(){return Ce};var nt=c.__private__.setLayoutMode=function(N){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(N)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+N+'" is not recognized.');Ve=N};c.__private__.getLayoutMode=function(){return Ve},c.__private__.setDisplayMode=c.setDisplayMode=function(N,V,le){return Pe(N),nt(V),Ye(le),this};var pt={title:"",subject:"",author:"",keywords:"",creator:""};c.__private__.getDocumentProperty=function(N){if(Object.keys(pt).indexOf(N)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pt[N]},c.__private__.getDocumentProperties=function(){return pt},c.__private__.setDocumentProperties=c.setProperties=c.setDocumentProperties=function(N){for(var V in pt)pt.hasOwnProperty(V)&&N[V]&&(pt[V]=N[V]);return this},c.__private__.setDocumentProperty=function(N,V){if(Object.keys(pt).indexOf(N)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pt[N]=V};var Ze,qe,Lt,lt,Dt,wt={},Pt={},br=[],xt={},Xr={},Ht={},_r={},fn=null,Yt=0,Nt=[],zt=new ww(c),Jt=t.hotfixes||[],Qt={},kn={},Nn=[],vt=function N(V,le,fe,ke,Re,$e){if(!(this instanceof N))return new N(V,le,fe,ke,Re,$e);isNaN(V)&&(V=1),isNaN(le)&&(le=0),isNaN(fe)&&(fe=0),isNaN(ke)&&(ke=1),isNaN(Re)&&(Re=0),isNaN($e)&&($e=0),this._matrix=[V,le,fe,ke,Re,$e]};Object.defineProperty(vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vt.prototype.join=function(N){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(N)},vt.prototype.multiply=function(N){var V=N.sx*this.sx+N.shy*this.shx,le=N.sx*this.shy+N.shy*this.sy,fe=N.shx*this.sx+N.sy*this.shx,ke=N.shx*this.shy+N.sy*this.sy,Re=N.tx*this.sx+N.ty*this.shx+this.tx,$e=N.tx*this.shy+N.ty*this.sy+this.ty;return new vt(V,le,fe,ke,Re,$e)},vt.prototype.decompose=function(){var N=this.sx,V=this.shy,le=this.shx,fe=this.sy,ke=this.tx,Re=this.ty,$e=Math.sqrt(N*N+V*V),at=(N/=$e)*le+(V/=$e)*fe;le-=N*at,fe-=V*at;var yt=Math.sqrt(le*le+fe*fe);return at/=yt,N*(fe/=yt)<V*(le/=yt)&&(N=-N,V=-V,at=-at,$e=-$e),{scale:new vt($e,0,0,yt,0,0),translate:new vt(1,0,0,1,ke,Re),rotate:new vt(N,V,-V,N,0,0),skew:new vt(1,0,at,1,0,0)}},vt.prototype.toString=function(N){return this.join(" ")},vt.prototype.inversed=function(){var N=this.sx,V=this.shy,le=this.shx,fe=this.sy,ke=this.tx,Re=this.ty,$e=1/(N*fe-V*le),at=fe*$e,yt=-V*$e,Tt=-le*$e,jt=N*$e;return new vt(at,yt,Tt,jt,-at*ke-Tt*Re,-yt*ke-jt*Re)},vt.prototype.applyToPoint=function(N){var V=N.x*this.sx+N.y*this.shx+this.tx,le=N.x*this.shy+N.y*this.sy+this.ty;return new Fs(V,le)},vt.prototype.applyToRectangle=function(N){var V=this.applyToPoint(N),le=this.applyToPoint(new Fs(N.x+N.w,N.y+N.h));return new xu(V.x,V.y,le.x-V.x,le.y-V.y)},vt.prototype.clone=function(){var N=this.sx,V=this.shy,le=this.shx,fe=this.sy,ke=this.tx,Re=this.ty;return new vt(N,V,le,fe,ke,Re)},c.Matrix=vt;var ue=c.matrixMult=function(N,V){return V.multiply(N)},we=new vt(1,0,0,1,0,0);c.unitMatrix=c.identityMatrix=we;var Ee=function(N,V){if(!Xr[N]){var le=(V instanceof ls?"Sh":"P")+(Object.keys(xt).length+1).toString(10);V.id=le,Xr[N]=le,xt[le]=V,zt.publish("addPattern",V)}};c.ShadingPattern=ls,c.TilingPattern=Ol,c.addShadingPattern=function(N,V){return P("addShadingPattern()"),Ee(N,V),this},c.beginTilingPattern=function(N){P("beginTilingPattern()"),xd(N.boundingBox[0],N.boundingBox[1],N.boundingBox[2]-N.boundingBox[0],N.boundingBox[3]-N.boundingBox[1],N.matrix)},c.endTilingPattern=function(N,V){P("endTilingPattern()"),V.stream=ye[D].join(`
`),Ee(N,V),zt.publish("endTilingPattern",V),Nn.pop().restore()};var Ie=c.__private__.newObject=function(){var N=Ue();return et(N,!0),N},Ue=c.__private__.newObjectDeferred=function(){return U++,K[U]=function(){return ie},U},et=function(N,V){return V=typeof V=="boolean"&&V,K[N]=ie,V&&se(N+" 0 obj"),N},ut=c.__private__.newAdditionalObject=function(){var N={objId:Ue(),content:""};return he.push(N),N},tt=Ue(),it=Ue(),Qe=c.__private__.decodeColorString=function(N){var V=N.split(" ");if(V.length!==2||V[1]!=="g"&&V[1]!=="G")V.length===5&&(V[4]==="k"||V[4]==="K")&&(V=[(1-V[0])*(1-V[3]),(1-V[1])*(1-V[3]),(1-V[2])*(1-V[3]),"r"]);else{var le=parseFloat(V[0]);V=[le,le,le,"r"]}for(var fe="#",ke=0;ke<3;ke++)fe+=("0"+Math.floor(255*parseFloat(V[ke])).toString(16)).slice(-2);return fe},ht=c.__private__.encodeColorString=function(N){var V;typeof N=="string"&&(N={ch1:N});var le=N.ch1,fe=N.ch2,ke=N.ch3,Re=N.ch4,$e=N.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof le=="string"&&le.charAt(0)!=="#"){var at=new F_(le);if(at.ok)le=at.toHex();else if(!/^\d*\.?\d*$/.test(le))throw new Error('Invalid color "'+le+'" passed to jsPDF.encodeColorString.')}if(typeof le=="string"&&/^#[0-9A-Fa-f]{3}$/.test(le)&&(le="#"+le[1]+le[1]+le[2]+le[2]+le[3]+le[3]),typeof le=="string"&&/^#[0-9A-Fa-f]{6}$/.test(le)){var yt=parseInt(le.substr(1),16);le=yt>>16&255,fe=yt>>8&255,ke=255&yt}if(fe===void 0||Re===void 0&&le===fe&&fe===ke)if(typeof le=="string")V=le+" "+$e[0];else switch(N.precision){case 2:V=T(le/255)+" "+$e[0];break;case 3:default:V=k(le/255)+" "+$e[0]}else if(Re===void 0||ir(Re)==="object"){if(Re&&!isNaN(Re.a)&&Re.a===0)return V=["1.","1.","1.",$e[1]].join(" ");if(typeof le=="string")V=[le,fe,ke,$e[1]].join(" ");else switch(N.precision){case 2:V=[T(le/255),T(fe/255),T(ke/255),$e[1]].join(" ");break;default:case 3:V=[k(le/255),k(fe/255),k(ke/255),$e[1]].join(" ")}}else if(typeof le=="string")V=[le,fe,ke,Re,$e[2]].join(" ");else switch(N.precision){case 2:V=[T(le),T(fe),T(ke),T(Re),$e[2]].join(" ");break;case 3:default:V=[k(le),k(fe),k(ke),k(Re),$e[2]].join(" ")}return V},st=c.__private__.getFilters=function(){return o},mt=c.__private__.putStream=function(N){var V=(N=N||{}).data||"",le=N.filters||st(),fe=N.alreadyAppliedFilters||[],ke=N.addLength1||!1,Re=V.length,$e=N.objectId,at=function(pn){return pn};if(h!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(at=hn.encryptor($e,0));var yt={};le===!0&&(le=["FlateEncode"]);var Tt=N.additionalKeyValues||[],jt=(yt=St.API.processDataByFilters!==void 0?St.API.processDataByFilters(V,le):{data:V,reverseChain:[]}).reverseChain+(Array.isArray(fe)?fe.join(" "):fe.toString());if(yt.data.length!==0&&(Tt.push({key:"Length",value:yt.data.length}),ke===!0&&Tt.push({key:"Length1",value:Re})),jt.length!=0)if(jt.split("/").length-1==1)Tt.push({key:"Filter",value:jt});else{Tt.push({key:"Filter",value:"["+jt+"]"});for(var Wt=0;Wt<Tt.length;Wt+=1)if(Tt[Wt].key==="DecodeParms"){for(var kr=[],Lr=0;Lr<yt.reverseChain.split("/").length-1;Lr+=1)kr.push("null");kr.push(Tt[Wt].value),Tt[Wt].value="["+kr.join(" ")+"]"}}se("<<");for(var zr=0;zr<Tt.length;zr++)se("/"+Tt[zr].key+" "+Tt[zr].value);se(">>"),yt.data.length!==0&&(se("stream"),se(at(yt.data)),se("endstream"))},It=c.__private__.putPage=function(N){var V=N.number,le=N.data,fe=N.objId,ke=N.contentsObjId;et(fe,!0),se("<</Type /Page"),se("/Parent "+N.rootDictionaryObjId+" 0 R"),se("/Resources "+N.resourceDictionaryObjId+" 0 R"),se("/MediaBox ["+parseFloat(A(N.mediaBox.bottomLeftX))+" "+parseFloat(A(N.mediaBox.bottomLeftY))+" "+A(N.mediaBox.topRightX)+" "+A(N.mediaBox.topRightY)+"]"),N.cropBox!==null&&se("/CropBox ["+A(N.cropBox.bottomLeftX)+" "+A(N.cropBox.bottomLeftY)+" "+A(N.cropBox.topRightX)+" "+A(N.cropBox.topRightY)+"]"),N.bleedBox!==null&&se("/BleedBox ["+A(N.bleedBox.bottomLeftX)+" "+A(N.bleedBox.bottomLeftY)+" "+A(N.bleedBox.topRightX)+" "+A(N.bleedBox.topRightY)+"]"),N.trimBox!==null&&se("/TrimBox ["+A(N.trimBox.bottomLeftX)+" "+A(N.trimBox.bottomLeftY)+" "+A(N.trimBox.topRightX)+" "+A(N.trimBox.topRightY)+"]"),N.artBox!==null&&se("/ArtBox ["+A(N.artBox.bottomLeftX)+" "+A(N.artBox.bottomLeftY)+" "+A(N.artBox.topRightX)+" "+A(N.artBox.topRightY)+"]"),typeof N.userUnit=="number"&&N.userUnit!==1&&se("/UserUnit "+N.userUnit),zt.publish("putPage",{objId:fe,pageContext:Nt[V],pageNumber:V,page:le}),se("/Contents "+ke+" 0 R"),se(">>"),se("endobj");var Re=le.join(`
`);return b===g.ADVANCED&&(Re+=`
Q`),et(ke,!0),mt({data:Re,filters:st(),objectId:ke}),se("endobj"),fe},Zt=c.__private__.putPages=function(){var N,V,le=[];for(N=1;N<=Yt;N++)Nt[N].objId=Ue(),Nt[N].contentsObjId=Ue();for(N=1;N<=Yt;N++)le.push(It({number:N,data:ye[N],objId:Nt[N].objId,contentsObjId:Nt[N].contentsObjId,mediaBox:Nt[N].mediaBox,cropBox:Nt[N].cropBox,bleedBox:Nt[N].bleedBox,trimBox:Nt[N].trimBox,artBox:Nt[N].artBox,userUnit:Nt[N].userUnit,rootDictionaryObjId:tt,resourceDictionaryObjId:it}));et(tt,!0),se("<</Type /Pages");var fe="/Kids [";for(V=0;V<Yt;V++)fe+=le[V]+" 0 R ";se(fe+"]"),se("/Count "+Yt),se(">>"),se("endobj"),zt.publish("postPutPages")},Ge=function(N){zt.publish("putFont",{font:N,out:se,newObject:Ie,putStream:mt}),N.isAlreadyPutted!==!0&&(N.objectNumber=Ie(),se("<<"),se("/Type /Font"),se("/BaseFont /"+ml(N.postScriptName)),se("/Subtype /Type1"),typeof N.encoding=="string"&&se("/Encoding /"+N.encoding),se("/FirstChar 32"),se("/LastChar 255"),se(">>"),se("endobj"))},ce=function(){for(var N in wt)wt.hasOwnProperty(N)&&(d===!1||d===!0&&f.hasOwnProperty(N))&&Ge(wt[N])},De=function(N){N.objectNumber=Ie();var V=[];V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Form"}),V.push({key:"BBox",value:"["+[A(N.x),A(N.y),A(N.x+N.width),A(N.y+N.height)].join(" ")+"]"}),V.push({key:"Matrix",value:"["+N.matrix.toString()+"]"});var le=N.pages[1].join(`
`);mt({data:le,additionalKeyValues:V,objectId:N.objectNumber}),se("endobj")},Je=function(){for(var N in Qt)Qt.hasOwnProperty(N)&&De(Qt[N])},qt=function(N,V){var le,fe=[],ke=1/(V-1);for(le=0;le<1;le+=ke)fe.push(le);if(fe.push(1),N[0].offset!=0){var Re={offset:0,color:N[0].color};N.unshift(Re)}if(N[N.length-1].offset!=1){var $e={offset:1,color:N[N.length-1].color};N.push($e)}for(var at="",yt=0,Tt=0;Tt<fe.length;Tt++){for(le=fe[Tt];le>N[yt+1].offset;)yt++;var jt=N[yt].offset,Wt=(le-jt)/(N[yt+1].offset-jt),kr=N[yt].color,Lr=N[yt+1].color;at+=q(Math.round((1-Wt)*kr[0]+Wt*Lr[0]).toString(16))+q(Math.round((1-Wt)*kr[1]+Wt*Lr[1]).toString(16))+q(Math.round((1-Wt)*kr[2]+Wt*Lr[2]).toString(16))}return at.trim()},er=function(N,V){V||(V=21);var le=Ie(),fe=qt(N.colors,V),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+V+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),mt({data:fe,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:le}),se("endobj"),N.objectNumber=Ie(),se("<< /ShadingType "+N.type),se("/ColorSpace /DeviceRGB");var Re="/Coords ["+A(parseFloat(N.coords[0]))+" "+A(parseFloat(N.coords[1]))+" ";N.type===2?Re+=A(parseFloat(N.coords[2]))+" "+A(parseFloat(N.coords[3])):Re+=A(parseFloat(N.coords[2]))+" "+A(parseFloat(N.coords[3]))+" "+A(parseFloat(N.coords[4]))+" "+A(parseFloat(N.coords[5])),se(Re+="]"),N.matrix&&se("/Matrix ["+N.matrix.toString()+"]"),se("/Function "+le+" 0 R"),se("/Extend [true true]"),se(">>"),se("endobj")},$t=function(N,V){var le=Ue(),fe=Ie();V.push({resourcesOid:le,objectOid:fe}),N.objectNumber=fe;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+N.boundingBox.map(A).join(" ")+"]"}),ke.push({key:"XStep",value:A(N.xStep)}),ke.push({key:"YStep",value:A(N.yStep)}),ke.push({key:"Resources",value:le+" 0 R"}),N.matrix&&ke.push({key:"Matrix",value:"["+N.matrix.toString()+"]"}),mt({data:N.stream,additionalKeyValues:ke,objectId:N.objectNumber}),se("endobj")},mr=function(N){var V;for(V in xt)xt.hasOwnProperty(V)&&(xt[V]instanceof ls?er(xt[V]):xt[V]instanceof Ol&&$t(xt[V],N))},Ur=function(N){for(var V in N.objectNumber=Ie(),se("<<"),N)switch(V){case"opacity":se("/ca "+T(N[V]));break;case"stroke-opacity":se("/CA "+T(N[V]))}se(">>"),se("endobj")},Qr=function(){var N;for(N in Ht)Ht.hasOwnProperty(N)&&Ur(Ht[N])},Fn=function(){for(var N in se("/XObject <<"),Qt)Qt.hasOwnProperty(N)&&Qt[N].objectNumber>=0&&se("/"+N+" "+Qt[N].objectNumber+" 0 R");zt.publish("putXobjectDict"),se(">>")},cr=function(){hn.oid=Ie(),se("<<"),se("/Filter /Standard"),se("/V "+hn.v),se("/R "+hn.r),se("/U <"+hn.toHexString(hn.U)+">"),se("/O <"+hn.toHexString(hn.O)+">"),se("/P "+hn.P),se(">>"),se("endobj")},Rt=function(){for(var N in se("/Font <<"),wt)wt.hasOwnProperty(N)&&(d===!1||d===!0&&f.hasOwnProperty(N))&&se("/"+N+" "+wt[N].objectNumber+" 0 R");se(">>")},Sr=function(){if(Object.keys(xt).length>0){for(var N in se("/Shading <<"),xt)xt.hasOwnProperty(N)&&xt[N]instanceof ls&&xt[N].objectNumber>=0&&se("/"+N+" "+xt[N].objectNumber+" 0 R");zt.publish("putShadingPatternDict"),se(">>")}},Qn=function(N){if(Object.keys(xt).length>0){for(var V in se("/Pattern <<"),xt)xt.hasOwnProperty(V)&&xt[V]instanceof c.TilingPattern&&xt[V].objectNumber>=0&&xt[V].objectNumber<N&&se("/"+V+" "+xt[V].objectNumber+" 0 R");zt.publish("putTilingPatternDict"),se(">>")}},Pi=function(){if(Object.keys(Ht).length>0){var N;for(N in se("/ExtGState <<"),Ht)Ht.hasOwnProperty(N)&&Ht[N].objectNumber>=0&&se("/"+N+" "+Ht[N].objectNumber+" 0 R");zt.publish("putGStateDict"),se(">>")}},At=function(N){et(N.resourcesOid,!0),se("<<"),se("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Rt(),Sr(),Qn(N.objectOid),Pi(),Fn(),se(">>"),se("endobj")},va=function(){var N=[];ce(),Qr(),Je(),mr(N),zt.publish("putResources"),N.forEach(At),At({resourcesOid:it,objectOid:Number.MAX_SAFE_INTEGER}),zt.publish("postPutResources")},Uo=function(){zt.publish("putAdditionalObjects");for(var N=0;N<he.length;N++){var V=he[N];et(V.objId,!0),se(V.content),se("endobj")}zt.publish("postPutAdditionalObjects")},Ps=function(N){Pt[N.fontName]=Pt[N.fontName]||{},Pt[N.fontName][N.fontStyle]=N.id},fu=function(N,V,le,fe,ke){var Re={id:"F"+(Object.keys(wt).length+1).toString(10),postScriptName:N,fontName:V,fontStyle:le,encoding:fe,isStandardFont:ke||!1,metadata:{}};return zt.publish("addFont",{font:Re,instance:this}),wt[Re.id]=Re,Ps(Re),Re.id},jp=function(N){for(var V=0,le=de.length;V<le;V++){var fe=fu.call(this,N[V][0],N[V][1],N[V][2],de[V][3],!0);d===!1&&(f[fe]=!0);var ke=N[V][0].split("-");Ps({id:fe,fontName:ke[0],fontStyle:ke[1]||""})}zt.publish("addFonts",{fonts:wt,dictionary:Pt})},Ti=function(N){return N.foo=function(){try{return N.apply(this,arguments)}catch(fe){var V=fe.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var le="Error in function "+V.split(`
`)[0].split("<")[0]+": "+fe.message;if(!kt.console)throw new Error(le);kt.console.error(le,fe),kt.alert&&alert(le)}},N.foo.bar=N,N.foo},Ts=function(N,V){var le,fe,ke,Re,$e,at,yt,Tt,jt;if(ke=(V=V||{}).sourceEncoding||"Unicode",$e=V.outputEncoding,(V.autoencode||$e)&&wt[Ze].metadata&&wt[Ze].metadata[ke]&&wt[Ze].metadata[ke].encoding&&(Re=wt[Ze].metadata[ke].encoding,!$e&&wt[Ze].encoding&&($e=wt[Ze].encoding),!$e&&Re.codePages&&($e=Re.codePages[0]),typeof $e=="string"&&($e=Re[$e]),$e)){for(yt=!1,at=[],le=0,fe=N.length;le<fe;le++)(Tt=$e[N.charCodeAt(le)])?at.push(String.fromCharCode(Tt)):at.push(N[le]),at[le].charCodeAt(0)>>8&&(yt=!0);N=at.join("")}for(le=N.length;yt===void 0&&le!==0;)N.charCodeAt(le-1)>>8&&(yt=!0),le--;if(!yt)return N;for(at=V.noBOM?[]:[254,255],le=0,fe=N.length;le<fe;le++){if((jt=(Tt=N.charCodeAt(le))>>8)>>8)throw new Error("Character at position "+le+" of string '"+N+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");at.push(jt),at.push(Tt-(jt<<8))}return String.fromCharCode.apply(void 0,at)},Bn=c.__private__.pdfEscape=c.pdfEscape=function(N,V){return Ts(N,V).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hu=c.__private__.beginPage=function(N){ye[++Yt]=[],Nt[Yt]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(N[0]),topRightY:Number(N[1])}},cd(Yt),_e(ye[D])},ud=function(N,V){var le,fe,ke;switch(r=V||r,typeof N=="string"&&(le=p(N.toLowerCase()),Array.isArray(le)&&(fe=le[0],ke=le[1])),Array.isArray(N)&&(fe=N[0]*qe,ke=N[1]*qe),isNaN(fe)&&(fe=i[0],ke=i[1]),(fe>14400||ke>14400)&&(ur.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),fe=Math.min(14400,fe),ke=Math.min(14400,ke)),i=[fe,ke],r.substr(0,1)){case"l":ke>fe&&(i=[ke,fe]);break;case"p":fe>ke&&(i=[ke,fe])}hu(i),gd(vu),se(Ci),wu!==0&&se(wu+" J"),bu!==0&&se(bu+" j"),zt.publish("addPage",{pageNumber:Yt})},Op=function(N){N>0&&N<=Yt&&(ye.splice(N,1),Nt.splice(N,1),Yt--,D>Yt&&(D=Yt),this.setPage(D))},cd=function(N){N>0&&N<=Yt&&(D=N)},Lp=c.__private__.getNumberOfPages=c.getNumberOfPages=function(){return ye.length-1},dd=function(N,V,le){var fe,ke=void 0;return le=le||{},N=N!==void 0?N:wt[Ze].fontName,V=V!==void 0?V:wt[Ze].fontStyle,fe=N.toLowerCase(),Pt[fe]!==void 0&&Pt[fe][V]!==void 0?ke=Pt[fe][V]:Pt[N]!==void 0&&Pt[N][V]!==void 0?ke=Pt[N][V]:le.disableWarning===!1&&ur.warn("Unable to look up font label for font '"+N+"', '"+V+"'. Refer to getFontList() for available fonts."),ke||le.noFallback||(ke=Pt.times[V])==null&&(ke=Pt.times.normal),ke},Pp=c.__private__.putInfo=function(){var N=Ie(),V=function(fe){return fe};for(var le in h!==null&&(V=hn.encryptor(N,0)),se("<<"),se("/Producer ("+Bn(V("jsPDF "+St.version))+")"),pt)pt.hasOwnProperty(le)&&pt[le]&&se("/"+le.substr(0,1).toUpperCase()+le.substr(1)+" ("+Bn(V(pt[le]))+")");se("/CreationDate ("+Bn(V($))+")"),se(">>"),se("endobj")},pu=c.__private__.putCatalog=function(N){var V=(N=N||{}).rootDictionaryObjId||tt;switch(Ie(),se("<<"),se("/Type /Catalog"),se("/Pages "+V+" 0 R"),Ne||(Ne="fullwidth"),Ne){case"fullwidth":se("/OpenAction [3 0 R /FitH null]");break;case"fullheight":se("/OpenAction [3 0 R /FitV null]");break;case"fullpage":se("/OpenAction [3 0 R /Fit]");break;case"original":se("/OpenAction [3 0 R /XYZ null null 1]");break;default:var le=""+Ne;le.substr(le.length-1)==="%"&&(Ne=parseInt(Ne)/100),typeof Ne=="number"&&se("/OpenAction [3 0 R /XYZ null null "+T(Ne)+"]")}switch(Ve||(Ve="continuous"),Ve){case"continuous":se("/PageLayout /OneColumn");break;case"single":se("/PageLayout /SinglePage");break;case"two":case"twoleft":se("/PageLayout /TwoColumnLeft");break;case"tworight":se("/PageLayout /TwoColumnRight")}Ce&&se("/PageMode /"+Ce),zt.publish("putCatalog"),se(">>"),se("endobj")},Tp=c.__private__.putTrailer=function(){se("trailer"),se("<<"),se("/Size "+(U+1)),se("/Root "+U+" 0 R"),se("/Info "+(U-1)+" 0 R"),h!==null&&se("/Encrypt "+hn.oid+" 0 R"),se("/ID [ <"+Z+"> <"+Z+"> ]"),se(">>")},Cp=c.__private__.putHeader=function(){se("%PDF-"+y),se("%")},Rp=c.__private__.putXRef=function(){var N="0000000000";se("xref"),se("0 "+(U+1)),se("0000000000 65535 f ");for(var V=1;V<=U;V++)typeof K[V]=="function"?se((N+K[V]()).slice(-10)+" 00000 n "):K[V]!==void 0?se((N+K[V]).slice(-10)+" 00000 n "):se("0000000000 00000 n ")},ya=c.__private__.buildDocument=function(){He(),_e(ne),zt.publish("buildDocument"),Cp(),Zt(),Uo(),va(),h!==null&&cr(),Pp(),pu();var N=ie;return Rp(),Tp(),se("startxref"),se(""+N),se("%%EOF"),_e(ye[D]),ne.join(`
`)},Cs=c.__private__.getBlob=function(N){return new Blob([ve(N)],{type:"application/pdf"})},Rs=c.output=c.__private__.output=Ti(function(N,V){switch(typeof(V=V||{})=="string"?V={filename:V}:V.filename=V.filename||"generated.pdf",N){case void 0:return ya();case"save":c.save(V.filename);break;case"arraybuffer":return ve(ya());case"blob":return Cs(ya());case"bloburi":case"bloburl":if(kt.URL!==void 0&&typeof kt.URL.createObjectURL=="function")return kt.URL&&kt.URL.createObjectURL(Cs(ya()))||void 0;ur.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var le="",fe=ya();try{le=Ig(fe)}catch{le=Ig(unescape(encodeURIComponent(fe)))}return"data:application/pdf;filename="+V.filename+";base64,"+le;case"pdfobjectnewwindow":if(Object.prototype.toString.call(kt)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Re=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';V.pdfObjectUrl&&(ke=V.pdfObjectUrl,Re="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Re+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(V)+");<\/script></body></html>",at=kt.open();return at!==null&&at.document.write($e),at}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(kt)==="[object Window]"){var yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(V.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+V.filename+'" width="500px" height="400px" /></body></html>',Tt=kt.open();if(Tt!==null){Tt.document.write(yt);var jt=this;Tt.document.documentElement.querySelector("#pdfViewer").onload=function(){Tt.document.title=V.filename,Tt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(jt.output("bloburl"))}}return Tt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(kt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",V)+'"></iframe></body></html>',kr=kt.open();if(kr!==null&&(kr.document.write(Wt),kr.document.title=V.filename),kr||typeof safari>"u")return kr;break;case"datauri":case"dataurl":return kt.document.location.href=this.output("datauristring",V);default:return null}}),fd=function(N){return Array.isArray(Jt)===!0&&Jt.indexOf(N)>-1};switch(n){case"pt":qe=1;break;case"mm":qe=72/25.4;break;case"cm":qe=72/2.54;break;case"in":qe=72;break;case"px":qe=fd("px_scaling")==1?.75:96/72;break;case"pc":case"em":qe=12;break;case"ex":qe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);qe=n}var hn=null;B(),X();var Ip=function(N){return h!==null?hn.encryptor(N,0):function(V){return V}},hd=c.__private__.getPageInfo=c.getPageInfo=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nt[N].objId,pageNumber:N,pageContext:Nt[N]}},Et=c.__private__.getPageInfoByObjId=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var V in Nt)if(Nt[V].objId===N)break;return hd(V)},Dp=c.__private__.getCurrentPageInfo=c.getCurrentPageInfo=function(){return{objId:Nt[D].objId,pageNumber:D,pageContext:Nt[D]}};c.addPage=function(){return ud.apply(this,arguments),this},c.setPage=function(){return cd.apply(this,arguments),_e.call(this,ye[D]),this},c.insertPage=function(N){return this.addPage(),this.movePage(D,N),this},c.movePage=function(N,V){var le,fe;if(N>V){le=ye[N],fe=Nt[N];for(var ke=N;ke>V;ke--)ye[ke]=ye[ke-1],Nt[ke]=Nt[ke-1];ye[V]=le,Nt[V]=fe,this.setPage(V)}else if(N<V){le=ye[N],fe=Nt[N];for(var Re=N;Re<V;Re++)ye[Re]=ye[Re+1],Nt[Re]=Nt[Re+1];ye[V]=le,Nt[V]=fe,this.setPage(V)}return this},c.deletePage=function(){return Op.apply(this,arguments),this},c.__private__.text=c.text=function(N,V,le,fe,ke){var Re,$e,at,yt,Tt,jt,Wt,kr,Lr,zr=(fe=fe||{}).scope||this;if(typeof N=="number"&&typeof V=="number"&&(typeof le=="string"||Array.isArray(le))){var pn=le;le=V,V=N,N=pn}if(arguments[3]instanceof vt?(P("The transform parameter of text() with a Matrix value"),Lr=ke):(at=arguments[4],yt=arguments[5],ir(Wt=arguments[3])==="object"&&Wt!==null||(typeof at=="string"&&(yt=at,at=null),typeof Wt=="string"&&(yt=Wt,Wt=null),typeof Wt=="number"&&(at=Wt,Wt=null),fe={flags:Wt,angle:at,align:yt})),isNaN(V)||isNaN(le)||N==null)throw new Error("Invalid arguments passed to jsPDF.text");if(N.length===0)return zr;var Zr="",Ri=!1,Zn=typeof fe.lineHeightFactor=="number"?fe.lineHeightFactor:qo,na=zr.internal.scaleFactor;function _d(dr){return dr=dr.split("	").join(Array(fe.TabLen||9).join(" ")),Bn(dr,Wt)}function Nu(dr){for(var fr,Ir=dr.concat(),Gr=[],Sa=Ir.length;Sa--;)typeof(fr=Ir.shift())=="string"?Gr.push(fr):Array.isArray(dr)&&(fr.length===1||fr[1]===void 0&&fr[2]===void 0)?Gr.push(fr[0]):Gr.push([fr[0],fr[1],fr[2]]);return Gr}function Eu(dr,fr){var Ir;if(typeof dr=="string")Ir=fr(dr)[0];else if(Array.isArray(dr)){for(var Gr,Sa,Ru=dr.concat(),Ys=[],Ad=Ru.length;Ad--;)typeof(Gr=Ru.shift())=="string"?Ys.push(fr(Gr)[0]):Array.isArray(Gr)&&typeof Gr[0]=="string"&&(Sa=fr(Gr[0],Gr[1],Gr[2]),Ys.push([Sa[0],Sa[1],Sa[2]]));Ir=Ys}return Ir}var Us=!1,Au=!0;if(typeof N=="string")Us=!0;else if(Array.isArray(N)){var ju=N.concat();$e=[];for(var zs,on=ju.length;on--;)(typeof(zs=ju.shift())!="string"||Array.isArray(zs)&&typeof zs[0]!="string")&&(Au=!1);Us=Au}if(Us===!1)throw new Error('Type of text must be string or Array. "'+N+'" is not recognized.');typeof N=="string"&&(N=N.match(/[\r?\n]/)?N.split(/\r\n|\r|\n/g):[N]);var qs=ge/zr.internal.scaleFactor,$s=qs*(Zn-1);switch(fe.baseline){case"bottom":le-=$s;break;case"top":le+=qs-$s;break;case"hanging":le+=qs-2*$s;break;case"middle":le+=qs/2-$s}if((jt=fe.maxWidth||0)>0&&(typeof N=="string"?N=zr.splitTextToSize(N,jt):Object.prototype.toString.call(N)==="[object Array]"&&(N=N.reduce(function(dr,fr){return dr.concat(zr.splitTextToSize(fr,jt))},[]))),Re={text:N,x:V,y:le,options:fe,mutex:{pdfEscape:Bn,activeFontKey:Ze,fonts:wt,activeFontSize:ge}},zt.publish("preProcessText",Re),N=Re.text,at=(fe=Re.options).angle,!(Lr instanceof vt)&&at&&typeof at=="number"){at*=Math.PI/180,fe.rotationDirection===0&&(at=-at),b===g.ADVANCED&&(at=-at);var Hs=Math.cos(at),Ou=Math.sin(at);Lr=new vt(Hs,Ou,-Ou,Hs,0,0)}else at&&at instanceof vt&&(Lr=at);b!==g.ADVANCED||Lr||(Lr=we),(Tt=fe.charSpace||Ms)!==void 0&&(Zr+=A(j(Tt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(kr=fe.horizontalScale)!==void 0&&(Zr+=A(100*kr)+` Tz
`),fe.lang;var Un=-1,Vp=fe.renderingMode!==void 0?fe.renderingMode:fe.stroke,Lu=zr.internal.getCurrentPageInfo().pageContext;switch(Vp){case 0:case!1:case"fill":Un=0;break;case 1:case!0:case"stroke":Un=1;break;case 2:case"fillThenStroke":Un=2;break;case 3:case"invisible":Un=3;break;case 4:case"fillAndAddForClipping":Un=4;break;case 5:case"strokeAndAddPathForClipping":Un=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Un=6;break;case 7:case"addToPathForClipping":Un=7}var Sd=Lu.usedRenderingMode!==void 0?Lu.usedRenderingMode:-1;Un!==-1?Zr+=Un+` Tr
`:Sd!==-1&&(Zr+=`0 Tr
`),Un!==-1&&(Lu.usedRenderingMode=Un),yt=fe.align||"left";var mi,Ws=ge*Zn,kd=zr.internal.pageSize.getWidth(),Nd=wt[Ze];Tt=fe.charSpace||Ms,jt=fe.maxWidth||0,Wt=Object.assign({autoencode:!0,noBOM:!0},fe.flags);var Ya=[],Wo=function(dr){return zr.getStringUnitWidth(dr,{font:Nd,charSpace:Tt,fontSize:ge,doKerning:!1})*ge/na};if(Object.prototype.toString.call(N)==="[object Array]"){var zn;$e=Nu(N),yt!=="left"&&(mi=$e.map(Wo));var En,Ja=0;if(yt==="right"){V-=mi[0],N=[],on=$e.length;for(var ba=0;ba<on;ba++)ba===0?(En=ra(V),zn=wa(le)):(En=j(Ja-mi[ba]),zn=-Ws),N.push([$e[ba],En,zn]),Ja=mi[ba]}else if(yt==="center"){V-=mi[0]/2,N=[],on=$e.length;for(var xa=0;xa<on;xa++)xa===0?(En=ra(V),zn=wa(le)):(En=j((Ja-mi[xa])/2),zn=-Ws),N.push([$e[xa],En,zn]),Ja=mi[xa]}else if(yt==="left"){N=[],on=$e.length;for(var Vs=0;Vs<on;Vs++)N.push($e[Vs])}else if(yt==="justify"&&Nd.encoding==="Identity-H"){N=[],on=$e.length,jt=jt!==0?jt:kd;for(var _a=0,Rr=0;Rr<on;Rr++)if(zn=Rr===0?wa(le):-Ws,En=Rr===0?ra(V):_a,Rr<on-1){var Pu=j((jt-mi[Rr])/($e[Rr].split(" ").length-1)),An=$e[Rr].split(" ");N.push([An[0]+" ",En,zn]),_a=0;for(var gi=1;gi<An.length;gi++){var Gs=(Wo(An[gi-1]+" "+An[gi])-Wo(An[gi]))*na+Pu;gi==An.length-1?N.push([An[gi],Gs,0]):N.push([An[gi]+" ",Gs,0]),_a-=Gs}}else N.push([$e[Rr],En,zn]);N.push(["",_a,0])}else{if(yt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(N=[],on=$e.length,jt=jt!==0?jt:kd,Rr=0;Rr<on;Rr++)zn=Rr===0?wa(le):-Ws,En=Rr===0?ra(V):0,Rr<on-1?Ya.push(A(j((jt-mi[Rr])/($e[Rr].split(" ").length-1)))):Ya.push(0),N.push([$e[Rr],En,zn])}}var Ed=typeof fe.R2L=="boolean"?fe.R2L:Se;Ed===!0&&(N=Eu(N,function(dr,fr,Ir){return[dr.split("").reverse().join(""),fr,Ir]})),Re={text:N,x:V,y:le,options:fe,mutex:{pdfEscape:Bn,activeFontKey:Ze,fonts:wt,activeFontSize:ge}},zt.publish("postProcessText",Re),N=Re.text,Ri=Re.mutex.isHex||!1;var Tu=wt[Ze].encoding;Tu!=="WinAnsiEncoding"&&Tu!=="StandardEncoding"||(N=Eu(N,function(dr,fr,Ir){return[_d(dr),fr,Ir]})),$e=Nu(N),N=[];for(var Vo,Go,Xa,Ko=0,Ks=1,Yo=Array.isArray($e[0])?Ks:Ko,Qa="",Cu=function(dr,fr,Ir){var Gr="";return Ir instanceof vt?(Ir=typeof fe.angle=="number"?ue(Ir,new vt(1,0,0,1,dr,fr)):ue(new vt(1,0,0,1,dr,fr),Ir),b===g.ADVANCED&&(Ir=ue(new vt(1,0,0,-1,0,0),Ir)),Gr=Ir.join(" ")+` Tm
`):Gr=A(dr)+" "+A(fr)+` Td
`,Gr},vi=0;vi<$e.length;vi++){switch(Qa="",Yo){case Ks:Xa=(Ri?"<":"(")+$e[vi][0]+(Ri?">":")"),Vo=parseFloat($e[vi][1]),Go=parseFloat($e[vi][2]);break;case Ko:Xa=(Ri?"<":"(")+$e[vi]+(Ri?">":")"),Vo=ra(V),Go=wa(le)}Ya!==void 0&&Ya[vi]!==void 0&&(Qa=Ya[vi]+` Tw
`),vi===0?N.push(Qa+Cu(Vo,Go,Lr)+Xa):Yo===Ko?N.push(Qa+Xa):Yo===Ks&&N.push(Qa+Cu(Vo,Go,Lr)+Xa)}N=Yo===Ko?N.join(` Tj
T* `):N.join(` Tj
`),N+=` Tj
`;var yi=`BT
/`;return yi+=Ze+" "+ge+` Tf
`,yi+=A(ge*Zn)+` TL
`,yi+=$o+`
`,yi+=Zr,yi+=N,se(yi+="ET"),f[Ze]=!0,zr};var Mp=c.__private__.clip=c.clip=function(N){return se(N==="evenodd"?"W*":"W"),this};c.clipEvenOdd=function(){return Mp("evenodd")},c.__private__.discardPath=c.discardPath=function(){return se("n"),this};var ta=c.__private__.isValidStyle=function(N){var V=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(N)!==-1&&(V=!0),V};c.__private__.setDefaultPathOperation=c.setDefaultPathOperation=function(N){return ta(N)&&(u=N),this};var pd=c.__private__.getStyle=c.getStyle=function(N){var V=u;switch(N){case"D":case"S":V="S";break;case"F":V="f";break;case"FD":case"DF":V="B";break;case"f":case"f*":case"B":case"B*":V=N}return V},md=c.close=function(){return se("h"),this};c.stroke=function(){return se("S"),this},c.fill=function(N){return Is("f",N),this},c.fillEvenOdd=function(N){return Is("f*",N),this},c.fillStroke=function(N){return Is("B",N),this},c.fillStrokeEvenOdd=function(N){return Is("B*",N),this};var Is=function(N,V){ir(V)==="object"?Bp(V,N):se(N)},mu=function(N){N===null||b===g.ADVANCED&&N===void 0||(N=pd(N),se(N))};function Fp(N,V,le,fe,ke){var Re=new Ol(V||this.boundingBox,le||this.xStep,fe||this.yStep,this.gState,ke||this.matrix);Re.stream=this.stream;var $e=N+"$$"+this.cloneIndex+++"$$";return Ee($e,Re),Re}var Bp=function(N,V){var le=Xr[N.key],fe=xt[le];if(fe instanceof ls)se("q"),se(Up(V)),fe.gState&&c.setGState(fe.gState),se(N.matrix.toString()+" cm"),se("/"+le+" sh"),se("Q");else if(fe instanceof Ol){var ke=new vt(1,0,0,-1,0,Ka());N.matrix&&(ke=ke.multiply(N.matrix||we),le=Fp.call(fe,N.key,N.boundingBox,N.xStep,N.yStep,ke).id),se("q"),se("/Pattern cs"),se("/"+le+" scn"),fe.gState&&c.setGState(fe.gState),se(V),se("Q")}},Up=function(N){switch(N){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},gu=c.moveTo=function(N,V){return se(A(j(N))+" "+A(R(V))+" m"),this},zo=c.lineTo=function(N,V){return se(A(j(N))+" "+A(R(V))+" l"),this},Va=c.curveTo=function(N,V,le,fe,ke,Re){return se([A(j(N)),A(R(V)),A(j(le)),A(R(fe)),A(j(ke)),A(R(Re)),"c"].join(" ")),this};c.__private__.line=c.line=function(N,V,le,fe,ke){if(isNaN(N)||isNaN(V)||isNaN(le)||isNaN(fe)||!ta(ke))throw new Error("Invalid arguments passed to jsPDF.line");return b===g.COMPAT?this.lines([[le-N,fe-V]],N,V,[1,1],ke||"S"):this.lines([[le-N,fe-V]],N,V,[1,1]).stroke()},c.__private__.lines=c.lines=function(N,V,le,fe,ke,Re){var $e,at,yt,Tt,jt,Wt,kr,Lr,zr,pn,Zr,Ri;if(typeof N=="number"&&(Ri=le,le=V,V=N,N=Ri),fe=fe||[1,1],Re=Re||!1,isNaN(V)||isNaN(le)||!Array.isArray(N)||!Array.isArray(fe)||!ta(ke)||typeof Re!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(gu(V,le),$e=fe[0],at=fe[1],Tt=N.length,pn=V,Zr=le,yt=0;yt<Tt;yt++)(jt=N[yt]).length===2?(pn=jt[0]*$e+pn,Zr=jt[1]*at+Zr,zo(pn,Zr)):(Wt=jt[0]*$e+pn,kr=jt[1]*at+Zr,Lr=jt[2]*$e+pn,zr=jt[3]*at+Zr,pn=jt[4]*$e+pn,Zr=jt[5]*at+Zr,Va(Wt,kr,Lr,zr,pn,Zr));return Re&&md(),mu(ke),this},c.path=function(N){for(var V=0;V<N.length;V++){var le=N[V],fe=le.c;switch(le.op){case"m":gu(fe[0],fe[1]);break;case"l":zo(fe[0],fe[1]);break;case"c":Va.apply(this,fe);break;case"h":md()}}return this},c.__private__.rect=c.rect=function(N,V,le,fe,ke){if(isNaN(N)||isNaN(V)||isNaN(le)||isNaN(fe)||!ta(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return b===g.COMPAT&&(fe=-fe),se([A(j(N)),A(R(V)),A(j(le)),A(j(fe)),"re"].join(" ")),mu(ke),this},c.__private__.triangle=c.triangle=function(N,V,le,fe,ke,Re,$e){if(isNaN(N)||isNaN(V)||isNaN(le)||isNaN(fe)||isNaN(ke)||isNaN(Re)||!ta($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[le-N,fe-V],[ke-le,Re-fe],[N-ke,V-Re]],N,V,[1,1],$e,!0),this},c.__private__.roundedRect=c.roundedRect=function(N,V,le,fe,ke,Re,$e){if(isNaN(N)||isNaN(V)||isNaN(le)||isNaN(fe)||isNaN(ke)||isNaN(Re)||!ta($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var at=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*le),Re=Math.min(Re,.5*fe),this.lines([[le-2*ke,0],[ke*at,0,ke,Re-Re*at,ke,Re],[0,fe-2*Re],[0,Re*at,-ke*at,Re,-ke,Re],[2*ke-le,0],[-ke*at,0,-ke,-Re*at,-ke,-Re],[0,2*Re-fe],[0,-Re*at,ke*at,-Re,ke,-Re]],N+ke,V,[1,1],$e,!0),this},c.__private__.ellipse=c.ellipse=function(N,V,le,fe,ke){if(isNaN(N)||isNaN(V)||isNaN(le)||isNaN(fe)||!ta(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Re=4/3*(Math.SQRT2-1)*le,$e=4/3*(Math.SQRT2-1)*fe;return gu(N+le,V),Va(N+le,V-$e,N+Re,V-fe,N,V-fe),Va(N-Re,V-fe,N-le,V-$e,N-le,V),Va(N-le,V+$e,N-Re,V+fe,N,V+fe),Va(N+Re,V+fe,N+le,V+$e,N+le,V),mu(ke),this},c.__private__.circle=c.circle=function(N,V,le,fe){if(isNaN(N)||isNaN(V)||isNaN(le)||!ta(fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(N,V,le,le,fe)},c.setFont=function(N,V,le){return le&&(V=C(V,le)),Ze=dd(N,V,{disableWarning:!1}),this};var zp=c.__private__.getFont=c.getFont=function(){return wt[dd.apply(c,arguments)]};c.__private__.getFontList=c.getFontList=function(){var N,V,le={};for(N in Pt)if(Pt.hasOwnProperty(N))for(V in le[N]=[],Pt[N])Pt[N].hasOwnProperty(V)&&le[N].push(V);return le},c.addFont=function(N,V,le,fe,ke){var Re=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Re.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Re.indexOf(arguments[3])==-1&&(le=C(le,fe)),ke=ke||"Identity-H",fu.call(this,N,V,le,ke)};var qo,vu=t.lineWidth||.200025,Ds=c.__private__.getLineWidth=c.getLineWidth=function(){return vu},gd=c.__private__.setLineWidth=c.setLineWidth=function(N){return vu=N,se(A(j(N))+" w"),this};c.__private__.setLineDash=St.API.setLineDash=St.API.setLineDashPattern=function(N,V){if(N=N||[],V=V||0,isNaN(V)||!Array.isArray(N))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return N=N.map(function(le){return A(j(le))}).join(" "),V=A(j(V)),se("["+N+"] "+V+" d"),this};var vd=c.__private__.getLineHeight=c.getLineHeight=function(){return ge*qo};c.__private__.getLineHeight=c.getLineHeight=function(){return ge*qo};var yd=c.__private__.setLineHeightFactor=c.setLineHeightFactor=function(N){return typeof(N=N||1.15)=="number"&&(qo=N),this},wd=c.__private__.getLineHeightFactor=c.getLineHeightFactor=function(){return qo};yd(t.lineHeight);var ra=c.__private__.getHorizontalCoordinate=function(N){return j(N)},wa=c.__private__.getVerticalCoordinate=function(N){return b===g.ADVANCED?N:Nt[D].mediaBox.topRightY-Nt[D].mediaBox.bottomLeftY-j(N)},qp=c.__private__.getHorizontalCoordinateString=c.getHorizontalCoordinateString=function(N){return A(ra(N))},Ga=c.__private__.getVerticalCoordinateString=c.getVerticalCoordinateString=function(N){return A(wa(N))},Ci=t.strokeColor||"0 G";c.__private__.getStrokeColor=c.getDrawColor=function(){return Qe(Ci)},c.__private__.setStrokeColor=c.setDrawColor=function(N,V,le,fe){return Ci=ht({ch1:N,ch2:V,ch3:le,ch4:fe,pdfColorType:"draw",precision:2}),se(Ci),this};var yu=t.fillColor||"0 g";c.__private__.getFillColor=c.getFillColor=function(){return Qe(yu)},c.__private__.setFillColor=c.setFillColor=function(N,V,le,fe){return yu=ht({ch1:N,ch2:V,ch3:le,ch4:fe,pdfColorType:"fill",precision:2}),se(yu),this};var $o=t.textColor||"0 g",$p=c.__private__.getTextColor=c.getTextColor=function(){return Qe($o)};c.__private__.setTextColor=c.setTextColor=function(N,V,le,fe){return $o=ht({ch1:N,ch2:V,ch3:le,ch4:fe,pdfColorType:"text",precision:3}),this};var Ms=t.charSpace,Hp=c.__private__.getCharSpace=c.getCharSpace=function(){return parseFloat(Ms||0)};c.__private__.setCharSpace=c.setCharSpace=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ms=N,this};var wu=0;c.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},c.__private__.setLineCap=c.setLineCap=function(N){var V=c.CapJoinStyles[N];if(V===void 0)throw new Error("Line cap style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wu=V,se(V+" J"),this};var bu=0;c.__private__.setLineJoin=c.setLineJoin=function(N){var V=c.CapJoinStyles[N];if(V===void 0)throw new Error("Line join style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bu=V,se(V+" j"),this},c.__private__.setLineMiterLimit=c.__private__.setMiterLimit=c.setLineMiterLimit=c.setMiterLimit=function(N){if(N=N||0,isNaN(N))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return se(A(j(N))+" M"),this},c.GState=Mh,c.setGState=function(N){(N=typeof N=="string"?Ht[_r[N]]:bd(null,N)).equals(fn)||(se("/"+N.id+" gs"),fn=N)};var bd=function(N,V){if(!N||!_r[N]){var le=!1;for(var fe in Ht)if(Ht.hasOwnProperty(fe)&&Ht[fe].equals(V)){le=!0;break}if(le)V=Ht[fe];else{var ke="GS"+(Object.keys(Ht).length+1).toString(10);Ht[ke]=V,V.id=ke}return N&&(_r[N]=V.id),zt.publish("addGState",V),V}};c.addGState=function(N,V){return bd(N,V),this},c.saveGraphicsState=function(){return se("q"),br.push({key:Ze,size:ge,color:$o}),this},c.restoreGraphicsState=function(){se("Q");var N=br.pop();return Ze=N.key,ge=N.size,$o=N.color,fn=null,this},c.setCurrentTransformationMatrix=function(N){return se(N.toString()+" cm"),this},c.comment=function(N){return se("#"+N),this};var Fs=function(N,V){var le=N||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return le},set:function(Re){isNaN(Re)||(le=parseFloat(Re))}});var fe=V||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return fe},set:function(Re){isNaN(Re)||(fe=parseFloat(Re))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Re){ke=Re.toString()}}),this},xu=function(N,V,le,fe){Fs.call(this,N,V),this.type="rect";var ke=le||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function($e){isNaN($e)||(ke=parseFloat($e))}});var Re=fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Re},set:function($e){isNaN($e)||(Re=parseFloat($e))}}),this},_u=function(){this.page=Yt,this.currentPage=D,this.pages=ye.slice(0),this.pagesContext=Nt.slice(0),this.x=Lt,this.y=lt,this.matrix=Dt,this.width=Ho(D),this.height=Ka(D),this.outputDestination=Le,this.id="",this.objectNumber=-1};_u.prototype.restore=function(){Yt=this.page,D=this.currentPage,Nt=this.pagesContext,ye=this.pages,Lt=this.x,lt=this.y,Dt=this.matrix,Su(D,this.width),ku(D,this.height),Le=this.outputDestination};var xd=function(N,V,le,fe,ke){Nn.push(new _u),Yt=D=0,ye=[],Lt=N,lt=V,Dt=ke,hu([le,fe])},Wp=function(N){if(kn[N])Nn.pop().restore();else{var V=new _u,le="Xo"+(Object.keys(Qt).length+1).toString(10);V.id=le,kn[N]=le,Qt[le]=V,zt.publish("addFormObject",V),Nn.pop().restore()}};for(var Bs in c.beginFormObject=function(N,V,le,fe,ke){return xd(N,V,le,fe,ke),this},c.endFormObject=function(N){return Wp(N),this},c.doFormObject=function(N,V){var le=Qt[kn[N]];return se("q"),se(V.toString()+" cm"),se("/"+le.id+" Do"),se("Q"),this},c.getFormObject=function(N){var V=Qt[kn[N]];return{x:V.x,y:V.y,width:V.width,height:V.height,matrix:V.matrix}},c.save=function(N,V){return N=N||"generated.pdf",(V=V||{}).returnPromise=V.returnPromise||!1,V.returnPromise===!1?(ns(Cs(ya()),N),typeof ns.unload=="function"&&kt.setTimeout&&setTimeout(ns.unload,911),this):new Promise(function(le,fe){try{var ke=ns(Cs(ya()),N);typeof ns.unload=="function"&&kt.setTimeout&&setTimeout(ns.unload,911),le(ke)}catch(Re){fe(Re.message)}})},St.API)St.API.hasOwnProperty(Bs)&&(Bs==="events"&&St.API.events.length?function(N,V){var le,fe,ke;for(ke=V.length-1;ke!==-1;ke--)le=V[ke][0],fe=V[ke][1],N.subscribe.apply(N,[le].concat(typeof fe=="function"?[fe]:fe))}(zt,St.API.events):c[Bs]=St.API[Bs]);var Ho=c.getPageWidth=function(N){return(Nt[N=N||D].mediaBox.topRightX-Nt[N].mediaBox.bottomLeftX)/qe},Su=c.setPageWidth=function(N,V){Nt[N].mediaBox.topRightX=V*qe+Nt[N].mediaBox.bottomLeftX},Ka=c.getPageHeight=function(N){return(Nt[N=N||D].mediaBox.topRightY-Nt[N].mediaBox.bottomLeftY)/qe},ku=c.setPageHeight=function(N,V){Nt[N].mediaBox.topRightY=V*qe+Nt[N].mediaBox.bottomLeftY};return c.internal={pdfEscape:Bn,getStyle:pd,getFont:zp,getFontSize:ae,getCharSpace:Hp,getTextColor:$p,getLineHeight:vd,getLineHeightFactor:wd,getLineWidth:Ds,write:rt,getHorizontalCoordinate:ra,getVerticalCoordinate:wa,getCoordinateString:qp,getVerticalCoordinateString:Ga,collections:{},newObject:Ie,newAdditionalObject:ut,newObjectDeferred:Ue,newObjectDeferredBegin:et,getFilters:st,putStream:mt,events:zt,scaleFactor:qe,pageSize:{getWidth:function(){return Ho(D)},setWidth:function(N){Su(D,N)},getHeight:function(){return Ka(D)},setHeight:function(N){ku(D,N)}},encryptionOptions:h,encryption:hn,getEncryptor:Ip,output:Rs,getNumberOfPages:Lp,pages:ye,out:se,f2:T,f3:k,getPageInfo:hd,getPageInfoByObjId:Et,getCurrentPageInfo:Dp,getPDFVersion:v,Point:Fs,Rectangle:xu,Matrix:vt,hasHotfix:fd},Object.defineProperty(c.internal.pageSize,"width",{get:function(){return Ho(D)},set:function(N){Su(D,N)},enumerable:!0,configurable:!0}),Object.defineProperty(c.internal.pageSize,"height",{get:function(){return Ka(D)},set:function(N){ku(D,N)},enumerable:!0,configurable:!0}),jp.call(c,de),Ze="F1",ud(i,r),zt.publish("initialized"),c}pl.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},pl.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},pl.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},pl.prototype.processOwnerPassword=function(t,e){return Mg(Dg(e).substr(0,5),t)},pl.prototype.encryptor=function(t,e){var r=Dg(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Mg(r,n)}},Mh.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||ir(t)!==ir(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},St.API={events:[]},St.version="2.5.2";var Tr=St.API,bv=1,Ls=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ll=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ot=function(t){return t.toFixed(2)},co=function(t){return t.toFixed(5)};Tr.__acroform__={};var Xn=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},bw=function(t){return t*bv},sa=function(t){var e=new q_,r=ft.internal.getHeight(t)||0,n=ft.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Ot(n)),Number(Ot(r))],e},$L=Tr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},HL=Tr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},WL=Tr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Mr=Tr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return WL(t,e-1)},Fr=Tr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return $L(t,e-1)},Br=Tr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return HL(t,e-1)},VL=Tr.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],a=t[1],o=t[2],s=t[3],l={};return l.lowerLeft_X=r(i)||0,l.lowerLeft_Y=n(a+s)||0,l.upperRight_X=r(i+o)||0,l.upperRight_Y=n(a)||0,[Number(Ot(l.lowerLeft_X)),Number(Ot(l.lowerLeft_Y)),Number(Ot(l.upperRight_X)),Number(Ot(l.upperRight_Y))]},GL=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Fg(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Ot(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=sa(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},Fg=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(k){return k.split(`
`)}):i.map(function(k){return[k]});var a=r,o=ft.internal.getHeight(t)||0;o=o<0?-o:o;var s=ft.internal.getWidth(t)||0;s=s<0?-s:s;var l=function(k,j,I){if(k+1<i.length){var R=j+" "+i[k+1][0];return Ef(R,t,I).width<=s-4}return!1};a++;e:for(;a>0;){e="",a--;var u,h,d=Ef("3",t,a).height,f=t.multiline?o-a:(o-d)/2,c=f+=2,y=0,v=0,w=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ef(e,t,a=12).width+", FieldWidth:"+s+`
`;break}for(var p="",g=0,b=0;b<i.length;b++)if(i.hasOwnProperty(b)){var _=!1;if(i[b].length!==1&&w!==i[b].length-1){if((d+2)*(g+2)+2>o)continue e;p+=i[b][w],_=!0,v=b,b--}else{p=(p+=i[b][w]+" ").substr(p.length-1)==" "?p.substr(0,p.length-1):p;var E=parseInt(b),C=l(E,p,a),A=b>=i.length-1;if(C&&!A){p+=" ",w=0;continue}if(C||A){if(A)v=E;else if(t.multiline&&(d+2)*(g+2)+2>o)continue e}else{if(!t.multiline||(d+2)*(g+2)+2>o)continue e;v=E}}for(var P="",F=y;F<=v;F++){var T=i[F];if(t.multiline){if(F===v){P+=T[w]+" ",w=(w+1)%T.length;continue}if(F===y){P+=T[T.length-1]+" ";continue}}P+=T[0]+" "}switch(P=P.substr(P.length-1)==" "?P.substr(0,P.length-1):P,h=Ef(P,t,a).width,t.textAlign){case"right":u=s-h-2;break;case"center":u=(s-h)/2;break;case"left":default:u=2}e+=Ot(u)+" "+Ot(c)+` Td
`,e+="("+Ls(P)+`) Tj
`,e+=-Ot(u)+` 0 Td
`,c=-(a+2),h=0,y=_?v:v+1,g++,p=""}break}return n.text=e,n.fontSize=a,n},Ef=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},KL={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},YL=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},JL=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,i=t[r];e.internal.newObjectDeferredBegin(i.objId,!0),ir(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[n]}},XL=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Zi.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(KL)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");bv=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new $_,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&YL(a,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var a=!n;for(var o in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var s=n[o],l=[],u=s.Rect;if(s.Rect&&(s.Rect=VL(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=ft.createDefaultAppearanceStream(s),ir(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=u,s.hasAppearanceStream&&!s.appearanceStreamContent){var h=GL(s);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(s.appearanceStreamContent){var d="";for(var f in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(f)){var c=s.appearanceStreamContent[f];if(d+="/"+f+" ",d+="<<",Object.keys(c).length>=1||Array.isArray(c)){for(var o in c)if(c.hasOwnProperty(o)){var y=c[o];typeof y=="function"&&(y=y.call(i,s)),d+="/"+o+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=c)=="function"&&(y=y.call(i,s)),d+="/"+o+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:s.objId}),i.internal.out("endobj")}a&&JL(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},z_=Tr.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var i="[",a=0;a<t.length;a++)switch(a!==0&&(i+=" "),ir(t[a])){case"boolean":case"number":case"object":i+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+Ls(n(t[a].toString()))+")"):i+=t[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},nm=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Ls(n(t))+")"},ca=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ca.prototype.toString=function(){return this.objId+" 0 R"},ca.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ca.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:z_(i,this.objId,this.scope)}):i instanceof ca?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var q_=function(){ca.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Xn(q_,ca);var $_=function(){ca.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Ls(r(t))+")"}},set:function(r){t=r}})};Xn($_,ca);var Zi=function t(){ca.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(p){if(isNaN(p))throw new Error('Invalid value "'+p+'" for attribute F supplied.');e=p}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Mr(e,3)},set:function(p){p?this.F=Fr(e,3):this.F=Br(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(p){if(isNaN(p))throw new Error('Invalid value "'+p+'" for attribute Ff supplied.');r=p}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(p){n=p!==void 0?p:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(p){n[0]=p}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(p){n[1]=p}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(p){n[2]=p}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(p){n[3]=p}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(p){switch(p){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=p;break;default:throw new Error('Invalid value "'+p+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Fh)return;a="FieldObject"+t.FieldNum++}var p=function(g){return g};return this.scope&&(p=this.scope.internal.getEncryptor(this.objId)),"("+Ls(p(a))+")"},set:function(p){a=p.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(p){a=p}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(p){o=p}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(p){s=p}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(p){l=p}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/bv:u},set:function(p){u=p}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(p){h=p}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Fh||this instanceof vs))return nm(d,this.objId,this.scope)},set:function(p){p=p.toString(),d=p}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof nn?f:nm(f,this.objId,this.scope)},set:function(p){p=p.toString(),f=this instanceof nn?p:p.substr(0,1)==="("?ll(p.substr(1,p.length-2)):ll(p)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof nn?ll(f.substr(1,f.length-1)):f},set:function(p){p=p.toString(),f=this instanceof nn?"/"+p:p}});var c=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(c)return c},set:function(p){this.V=p}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(c)return this instanceof nn?c:nm(c,this.objId,this.scope)},set:function(p){p=p.toString(),c=this instanceof nn?p:p.substr(0,1)==="("?ll(p.substr(1,p.length-2)):ll(p)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof nn?ll(c.substr(1,c.length-1)):c},set:function(p){p=p.toString(),c=this instanceof nn?"/"+p:p}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(p){p=!!p,v=p}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(p){y=p}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,1)},set:function(p){p?this.Ff=Fr(this.Ff,1):this.Ff=Br(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,2)},set:function(p){p?this.Ff=Fr(this.Ff,2):this.Ff=Br(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,3)},set:function(p){p?this.Ff=Fr(this.Ff,3):this.Ff=Br(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(p){if([0,1,2].indexOf(p)===-1)throw new Error('Invalid value "'+p+'" for attribute Q supplied.');w=p}}),Object.defineProperty(this,"textAlign",{get:function(){var p;switch(w){case 0:default:p="left";break;case 1:p="center";break;case 2:p="right"}return p},configurable:!0,enumerable:!0,set:function(p){switch(p){case"right":case 2:w=2;break;case"center":case 1:w=1;break;case"left":case 0:default:w=0}}})};Xn(Zi,ca);var Fl=function(){Zi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return z_(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(a,o,s){s||(s=1);for(var l,u=[];l=o.exec(a);)u.push(l[s]);return u}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,18)},set:function(r){r?this.Ff=Fr(this.Ff,18):this.Ff=Br(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Fr(this.Ff,19):this.Ff=Br(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,20)},set:function(r){r?(this.Ff=Fr(this.Ff,20),e.sort()):this.Ff=Br(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,22)},set:function(r){r?this.Ff=Fr(this.Ff,22):this.Ff=Br(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,23)},set:function(r){r?this.Ff=Fr(this.Ff,23):this.Ff=Br(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,27)},set:function(r){r?this.Ff=Fr(this.Ff,27):this.Ff=Br(this.Ff,27)}}),this.hasAppearanceStream=!1};Xn(Fl,Zi);var Bl=function(){Fl.call(this),this.fontName="helvetica",this.combo=!1};Xn(Bl,Fl);var Ul=function(){Bl.call(this),this.combo=!0};Xn(Ul,Bl);var Yf=function(){Ul.call(this),this.edit=!0};Xn(Yf,Ul);var nn=function(){Zi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,15)},set:function(r){r?this.Ff=Fr(this.Ff,15):this.Ff=Br(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,16)},set:function(r){r?this.Ff=Fr(this.Ff,16):this.Ff=Br(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,17)},set:function(r){r?this.Ff=Fr(this.Ff,17):this.Ff=Br(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,26)},set:function(r){r?this.Ff=Fr(this.Ff,26):this.Ff=Br(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+Ls(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){ir(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Xn(nn,Zi);var Jf=function(){nn.call(this),this.pushButton=!0};Xn(Jf,nn);var zl=function(){nn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Xn(zl,nn);var Fh=function(){var t,e;Zi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),n)o.push("/"+a+" ("+Ls(i(n[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){ir(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ft.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xn(Fh,Zi),zl.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},zl.prototype.createOption=function(t){var e=new Fh;return e.Parent=this,e.optionName=t,this.Kids.push(e),QL.call(this.scope,e),e};var Xf=function(){nn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ft.CheckBox.createAppearanceStream()};Xn(Xf,nn);var vs=function(){Zi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,13)},set:function(e){e?this.Ff=Fr(this.Ff,13):this.Ff=Br(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,21)},set:function(e){e?this.Ff=Fr(this.Ff,21):this.Ff=Br(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,23)},set:function(e){e?this.Ff=Fr(this.Ff,23):this.Ff=Br(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,24)},set:function(e){e?this.Ff=Fr(this.Ff,24):this.Ff=Br(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,25)},set:function(e){e?this.Ff=Fr(this.Ff,25):this.Ff=Br(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,26)},set:function(e){e?this.Ff=Fr(this.Ff,26):this.Ff=Br(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xn(vs,Zi);var Qf=function(){vs.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,14)},set:function(t){t?this.Ff=Fr(this.Ff,14):this.Ff=Br(this.Ff,14)}}),this.password=!0};Xn(Qf,vs);var ft={CheckBox:{createAppearanceStream:function(){return{N:{On:ft.CheckBox.YesNormal},D:{On:ft.CheckBox.YesPushDown,Off:ft.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=sa(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=Fg(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Ot(ft.internal.getWidth(t))+" "+Ot(ft.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Ot(a.fontSize)+" Tf "+i),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=sa(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],a=ft.internal.getHeight(t),o=ft.internal.getWidth(t),s=Fg(t,t.caption);return i.push("1 g"),i.push("0 0 "+Ot(o)+" "+Ot(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Ot(o-1)+" "+Ot(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+Ot(s.fontSize)+" Tf "+n),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=sa(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ot(ft.internal.getWidth(t))+" "+Ot(ft.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ft.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ft.RadioButton.Circle.YesNormal,e.D[t]=ft.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=sa(t);e.scope=t.scope;var r=[],n=ft.internal.getWidth(t)<=ft.internal.getHeight(t)?ft.internal.getWidth(t)/4:ft.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=ft.internal.Bezier_C,a=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+co(ft.internal.getWidth(t)/2)+" "+co(ft.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=sa(t);e.scope=t.scope;var r=[],n=ft.internal.getWidth(t)<=ft.internal.getHeight(t)?ft.internal.getWidth(t)/4:ft.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*ft.internal.Bezier_C).toFixed(5)),o=Number((n*ft.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+co(ft.internal.getWidth(t)/2)+" "+co(ft.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+co(ft.internal.getWidth(t)/2)+" "+co(ft.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=sa(t);e.scope=t.scope;var r=[],n=ft.internal.getWidth(t)<=ft.internal.getHeight(t)?ft.internal.getWidth(t)/4:ft.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*ft.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+co(ft.internal.getWidth(t)/2)+" "+co(ft.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ft.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ft.RadioButton.Cross.YesNormal,e.D[t]=ft.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=sa(t);e.scope=t.scope;var r=[],n=ft.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Ot(ft.internal.getWidth(t)-2)+" "+Ot(ft.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Ot(n.x1.x)+" "+Ot(n.x1.y)+" m"),r.push(Ot(n.x2.x)+" "+Ot(n.x2.y)+" l"),r.push(Ot(n.x4.x)+" "+Ot(n.x4.y)+" m"),r.push(Ot(n.x3.x)+" "+Ot(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=sa(t);e.scope=t.scope;var r=ft.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Ot(ft.internal.getWidth(t))+" "+Ot(ft.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Ot(ft.internal.getWidth(t)-2)+" "+Ot(ft.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Ot(r.x1.x)+" "+Ot(r.x1.y)+" m"),n.push(Ot(r.x2.x)+" "+Ot(r.x2.y)+" l"),n.push(Ot(r.x4.x)+" "+Ot(r.x4.y)+" m"),n.push(Ot(r.x3.x)+" "+Ot(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=sa(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ot(ft.internal.getWidth(t))+" "+Ot(ft.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};ft.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ft.internal.getWidth(t),r=ft.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},ft.internal.getWidth=function(t){var e=0;return ir(t)==="object"&&(e=bw(t.Rect[2])),e},ft.internal.getHeight=function(t){var e=0;return ir(t)==="object"&&(e=bw(t.Rect[3])),e};var QL=Tr.addField=function(t){if(XL(this,t),!(t instanceof Zi))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Tr.AcroFormChoiceField=Fl,Tr.AcroFormListBox=Bl,Tr.AcroFormComboBox=Ul,Tr.AcroFormEditBox=Yf,Tr.AcroFormButton=nn,Tr.AcroFormPushButton=Jf,Tr.AcroFormRadioButton=zl,Tr.AcroFormCheckBox=Xf,Tr.AcroFormTextField=vs,Tr.AcroFormPasswordField=Qf,Tr.AcroFormAppearance=ft,Tr.AcroForm={ChoiceField:Fl,ListBox:Bl,ComboBox:Ul,EditBox:Yf,Button:nn,PushButton:Jf,RadioButton:zl,CheckBox:Xf,TextField:vs,PasswordField:Qf,Appearance:ft},St.AcroForm={ChoiceField:Fl,ListBox:Bl,ComboBox:Ul,EditBox:Yf,Button:nn,PushButton:Jf,RadioButton:zl,CheckBox:Xf,TextField:vs,PasswordField:Qf,Appearance:ft};St.AcroForm;function H_(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(k,j){var I,R,$,Z,Q,X=e;if((j=j||e)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(C(k))for(Q in r)for($=r[Q],I=0;I<$.length;I+=1){for(Z=!0,R=0;R<$[I].length;R+=1)if($[I][R]!==void 0&&$[I][R]!==k[R]){Z=!1;break}if(Z===!0){X=Q;break}}else for(Q in r)for($=r[Q],I=0;I<$.length;I+=1){for(Z=!0,R=0;R<$[I].length;R+=1)if($[I][R]!==void 0&&$[I][R]!==k.charCodeAt(R)){Z=!1;break}if(Z===!0){X=Q;break}}return X===e&&j!==e&&(X=j),X},i=function k(j){for(var I=this.internal.write,R=this.internal.putStream,$=(0,this.internal.getFilters)();$.indexOf("FlateEncode")!==-1;)$.splice($.indexOf("FlateEncode"),1);j.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:j.width}),Z.push({key:"Height",value:j.height}),j.colorSpace===w.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(j.palette.length/3-1)+" "+("sMask"in j&&j.sMask!==void 0?j.objectId+2:j.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+j.colorSpace}),j.colorSpace===w.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:j.bitsPerComponent}),"decodeParameters"in j&&j.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+j.decodeParameters+">>"}),"transparency"in j&&Array.isArray(j.transparency)){for(var Q="",X=0,G=j.transparency.length;X<G;X++)Q+=j.transparency[X]+" "+j.transparency[X]+" ";Z.push({key:"Mask",value:"["+Q+"]"})}j.sMask!==void 0&&Z.push({key:"SMask",value:j.objectId+1+" 0 R"});var H=j.filter!==void 0?["/"+j.filter]:void 0;if(R({data:j.data,additionalKeyValues:Z,alreadyAppliedFilters:H,objectId:j.objectId}),I("endobj"),"sMask"in j&&j.sMask!==void 0){var B="/Predictor "+j.predictor+" /Colors 1 /BitsPerComponent "+j.bitsPerComponent+" /Columns "+j.width,L={width:j.width,height:j.height,colorSpace:"DeviceGray",bitsPerComponent:j.bitsPerComponent,decodeParameters:B,data:j.sMask};"filter"in j&&(L.filter=j.filter),k.call(this,L)}if(j.colorSpace===w.INDEXED){var D=this.internal.newObject();R({data:P(new Uint8Array(j.palette)),objectId:D}),I("endobj")}},a=function(){var k=this.internal.collections.addImage_images;for(var j in k)i.call(this,k[j])},o=function(){var k,j=this.internal.collections.addImage_images,I=this.internal.write;for(var R in j)I("/I"+(k=j[R]).index,k.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var k=this.internal.collections.addImage_images;return s.call(this),k},u=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(k){return typeof t["process"+k.toUpperCase()]=="function"},d=function(k){return ir(k)==="object"&&k.nodeType===1},f=function(k,j){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var I=""+k.getAttribute("src");if(I.indexOf("data:image/")===0)return Ac(unescape(I).split("base64,").pop());var R=t.loadFile(I,!0);if(R!==void 0)return R}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var $;switch(j){case"PNG":$="image/png";break;case"WEBP":$="image/webp";break;case"JPEG":case"JPG":default:$="image/jpeg"}return Ac(k.toDataURL($,1).split("base64,").pop())}},c=function(k){var j=this.internal.collections.addImage_images;if(j){for(var I in j)if(k===j[I].alias)return j[I]}},y=function(k,j,I){return k||j||(k=-96,j=-96),k<0&&(k=-1*I.width*72/k/this.internal.scaleFactor),j<0&&(j=-1*I.height*72/j/this.internal.scaleFactor),k===0&&(k=j*I.width/I.height),j===0&&(j=k*I.height/I.width),[k,j]},v=function(k,j,I,R,$,Z){var Q=y.call(this,I,R,$),X=this.internal.getCoordinateString,G=this.internal.getVerticalCoordinateString,H=l.call(this);if(I=Q[0],R=Q[1],H[$.index]=$,Z){Z*=Math.PI/180;var B=Math.cos(Z),L=Math.sin(Z),D=function(q){return q.toFixed(4)},z=[D(B),D(L),D(-1*L),D(B),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,X(k),G(j+R),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([X(I),"0","0",X(R),"0","0","cm"].join(" "))):this.internal.write([X(I),"0","0",X(R),X(k),G(j+R),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+$.index+" Do"),this.internal.write("Q")},w=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var p=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},g=t.__addimage__.sHashCode=function(k){var j,I,R=0;if(typeof k=="string")for(I=k.length,j=0;j<I;j++)R=(R<<5)-R+k.charCodeAt(j),R|=0;else if(C(k))for(I=k.byteLength/2,j=0;j<I;j++)R=(R<<5)-R+k[j],R|=0;return R},b=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var j=!0;return k.length===0&&(j=!1),k.length%4!=0&&(j=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(j=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(j=!1),j},_=t.__addimage__.extractImageFromDataUrl=function(k){var j=(k=k||"").split("base64,"),I=null;if(j.length===2){var R=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(j[0]);Array.isArray(R)&&(I={mimeType:R[1],charset:R[2],data:j[1]})}return I},E=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(k){return E()&&k instanceof ArrayBuffer};var C=t.__addimage__.isArrayBufferView=function(k){return E()&&typeof Uint32Array<"u"&&(k instanceof Int8Array||k instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array)},A=t.__addimage__.binaryStringToUint8Array=function(k){for(var j=k.length,I=new Uint8Array(j),R=0;R<j;R++)I[R]=k.charCodeAt(R);return I},P=t.__addimage__.arrayBufferToBinaryString=function(k){for(var j="",I=C(k)?k:new Uint8Array(k),R=0;R<I.length;R+=8192)j+=String.fromCharCode.apply(null,I.subarray(R,R+8192));return j};t.addImage=function(){var k,j,I,R,$,Z,Q,X,G;if(typeof arguments[1]=="number"?(j=e,I=arguments[1],R=arguments[2],$=arguments[3],Z=arguments[4],Q=arguments[5],X=arguments[6],G=arguments[7]):(j=arguments[1],I=arguments[2],R=arguments[3],$=arguments[4],Z=arguments[5],Q=arguments[6],X=arguments[7],G=arguments[8]),ir(k=arguments[0])==="object"&&!d(k)&&"imageData"in k){var H=k;k=H.imageData,j=H.format||j||e,I=H.x||I||0,R=H.y||R||0,$=H.w||H.width||$,Z=H.h||H.height||Z,Q=H.alias||Q,X=H.compression||X,G=H.rotation||H.angle||G}var B=this.internal.getFilters();if(X===void 0&&B.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(I)||isNaN(R))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var L=F.call(this,k,j,Q,X);return v.call(this,I,R,$,Z,L,G),this};var F=function(k,j,I,R){var $,Z,Q;if(typeof k=="string"&&n(k)===e){k=unescape(k);var X=T(k,!1);(X!==""||(X=t.loadFile(k,!0))!==void 0)&&(k=X)}if(d(k)&&(k=f(k,j)),j=n(k,j),!h(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(((Q=I)==null||Q.length===0)&&(I=function(G){return typeof G=="string"||C(G)?g(G):C(G.data)?g(G.data):null}(k)),($=c.call(this,I))||(E()&&(k instanceof Uint8Array||j==="RGBA"||(Z=k,k=A(k))),$=this["process"+j.toUpperCase()](k,u.call(this),I,function(G){return G&&typeof G=="string"&&(G=G.toUpperCase()),G in t.image_compression?G:p.NONE}(R),Z)),!$)throw new Error("An unknown error occurred whilst processing the image.");return $},T=t.__addimage__.convertBase64ToBinaryString=function(k,j){var I;j=typeof j!="boolean"||j;var R,$="";if(typeof k=="string"){R=(I=_(k))!==null?I.data:k;try{$=Ac(R)}catch(Z){if(j)throw b(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return $};t.getImageProperties=function(k){var j,I,R="";if(d(k)&&(k=f(k)),typeof k=="string"&&n(k)===e&&((R=T(k,!1))===""&&(R=t.loadFile(k)||""),k=R),I=n(k),!h(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(!E()||k instanceof Uint8Array||(k=A(k)),!(j=this["process"+I.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return j.fileType=I,j}})(St.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};St.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,a,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,h=!1,d=0;d<u.length&&!h;d++)switch((n=u[d]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var f=0;f<u.length;f++){n=u[f];var c=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),p=this.internal.getEncryptor(v.objId),g=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+c(p(n.contents))+")",a+=" /Popup "+w.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+c(p(g))+") >>",v.content=a;var b=v.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(a+=" /Open true"),a+=" >>",w.content=a,this.internal.write(v.objId,"0 R",w.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var _=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+c(y(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var E=this.annotations._nameMap[n.options.name];n.options.pageNumber=E.page,n.options.top=E.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+c(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var C=s(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+C+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,a,o){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+i),h:u(n+a)},options:o,type:"link"})},t.textWithLink=function(r,n,i,a){var o,s,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var h=this.splitTextToSize(r,s).length;o=Math.ceil(u*h)}else s=l,o=u;return this.text(r,n,i,a),i+=.2*u,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,i-u,s,o,a),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(St.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(v){return e[v.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},s=t.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&i.indexOf(v.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(v){var w=0,p=r,g="",b=0;for(w=0;w<v.length;w+=1)p[v.charCodeAt(w)]!==void 0?(b++,typeof(p=p[v.charCodeAt(w)])=="number"&&(g+=String.fromCharCode(p),p=r,b=0),w===v.length-1&&(p=r,g+=v.charAt(w-(b-1)),w-=b-1,b=0)):(p=r,g+=v.charAt(w-b),w-=b,b=0);return g};t.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var f=t.__arabicParser__.getCorrectForm=function(v,w,p){return o(v)?a(v)===!1?-1:!u(v)||!o(w)&&!o(p)||!o(p)&&s(w)||s(v)&&!o(w)||s(v)&&l(w)||s(v)&&s(w)?0:h(v)&&o(w)&&!s(w)&&o(p)&&u(p)?3:s(v)||!o(p)?1:2:-1},c=function(v){var w=0,p=0,g=0,b="",_="",E="",C=(v=v||"").split("\\s+"),A=[];for(w=0;w<C.length;w+=1){for(A.push(""),p=0;p<C[w].length;p+=1)b=C[w][p],_=C[w][p-1],E=C[w][p+1],o(b)?(g=f(b,_,E),A[w]+=g!==-1?String.fromCharCode(e[b.charCodeAt(0)][g]):b):A[w]+=b;A[w]=d(A[w])}return A.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var v,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,p=[];if(Array.isArray(w)){var g=0;for(p=[],g=0;g<w.length;g+=1)Array.isArray(w[g])?p.push([c(w[g][0]),w[g][1],w[g][2]]):p.push([c(w[g])]);v=p}else v=c(w);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};t.events.push(["preProcessText",y])}(St.API),St.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(s){r=s}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(s){n=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(St.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var c=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(v){y=v}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){n.call(this);var h=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),f=u.scaleFactor||this.internal.scaleFactor,c=0,y=0,v=0,w=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var p=u.maxWidth;p>0?typeof l=="string"?l=this.splitTextToSize(l,p):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(b,_){return b.concat(w.splitTextToSize(_,p))},[])):l=Array.isArray(l)?l:[l];for(var g=0;g<l.length;g++)c<(v=this.getStringUnitWidth(l[g],{font:d})*h)&&(c=v);return c!==0&&(y=l.length),{w:c/=f,h:Math.max((y*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/f,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,c&&f&&(this.printHeaderRow(l.lineNumber,!0),l.y+=f[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,h,d,f){if(n.call(this),!h)throw new Error("No data for PDF table.");var c,y,v,w,p=[],g=[],b=[],_={},E={},C=[],A=[],P=(f=f||{}).autoSize||!1,F=f.printHeaders!==!1,T=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,k=f.margins||Object.assign({width:this.getPageWidth()},e),j=typeof f.padding=="number"?f.padding:3,I=f.headerBackgroundColor||"#c8c8c8",R=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=T,this.internal.__cell__.padding=j,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=R,this.setFontSize(T),d==null)g=p=Object.keys(h[0]),b=p.map(function(){return"left"});else if(Array.isArray(d)&&ir(d[0])==="object")for(p=d.map(function(H){return H.name}),g=d.map(function(H){return H.prompt||H.name||""}),b=d.map(function(H){return H.align||"left"}),c=0;c<d.length;c+=1)E[d[c].name]=d[c].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(g=p=d,b=p.map(function(){return"left"}));if(P||Array.isArray(d)&&typeof d[0]=="string")for(c=0;c<p.length;c+=1){for(_[w=p[c]]=h.map(function(H){return H[w]}),this.setFont(void 0,"bold"),C.push(this.getTextDimensions(g[c],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=_[w],this.setFont(void 0,"normal"),v=0;v<y.length;v+=1)C.push(this.getTextDimensions(y[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);E[w]=Math.max.apply(null,C)+j+j,C=[]}if(F){var $={};for(c=0;c<p.length;c+=1)$[p[c]]={},$[p[c]].text=g[c],$[p[c]].align=b[c];var Z=s.call(this,$,E);A=p.map(function(H){return new a(l,u,E[H],Z,$[H].text,void 0,$[H].align)}),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var Q=d.reduce(function(H,B){return H[B.name]=B.align,H},{});for(c=0;c<h.length;c+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:c,data:h[c]},this);var X=s.call(this,h[c],E);for(v=0;v<p.length;v+=1){var G=h[c][p[v]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:c,col:v,data:G},this),o.call(this,new a(l,u,E[p[v]],X,G,c+2,Q[p[v]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var s=function(l,u){var h=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(l).map(function(c){var y=l[c];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,u[c]-h-h)},this).map(function(c){return this.getLineHeightFactor()*c.length*d/f+h+h},this).reduce(function(c,y){return Math.max(c,y)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){h=this.internal.__cell__.tableHeaderRow[c].clone(),u&&(h.y=this.internal.__cell__.margins.top||0,f.push(h)),h.lineNumber=l;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(y)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),r=!1}}(St.API);var W_={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},V_=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Bg=H_(V_),G_=[100,200,300,400,500,600,700,800,900],ZL=H_(G_);function Ug(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return W_[a=a||"normal"]?a:"normal"}(t.style),n=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(a){return typeof Bg[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function xw(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var eP={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},_w={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Sw(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function tP(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",i=Object.assign({},eP,r.genericFontFamilies||{}),a=null,o=null,s=0;s<e.length;++s)if(i[(a=Ug(e[s])).family]&&(a.family=i[a.family]),t.hasOwnProperty(a.family)){o=t[a.family];break}if(!(o=o||t[n]))throw new Error("Could not find a font-family for the rule '"+Sw(a)+"' and default family '"+n+"'.");if(o=function(l,u){if(u[l])return u[l];var h=Bg[l],d=h<=Bg.normal?-1:1,f=xw(u,V_,h,d);if(!f)throw new Error("Could not find a matching font-stretch value for "+l);return f}(a.stretch,o),o=function(l,u){if(u[l])return u[l];for(var h=W_[l],d=0;d<h.length;++d)if(u[h[d]])return u[h[d]];throw new Error("Could not find a matching font-style for "+l)}(a.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var h=ZL[l],d=xw(u,G_,h,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(a.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Sw(a)+"'.");return o}function kw(t){return t.trimLeft()}function rP(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function nP(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Af,Nw,Ew,im=["times"];(function(t){var e,r,n,i,a,o,s,l,u,h=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new l,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new o,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new o,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,u=new h}]);var d=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=L;Object.defineProperty(this,"pdf",{get:function(){return D}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(_e){z=!!_e}});var q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return q},set:function(_e){q=!!_e}});var U=0;Object.defineProperty(this,"posX",{get:function(){return U},set:function(_e){isNaN(_e)||(U=_e)}});var K=0;Object.defineProperty(this,"posY",{get:function(){return K},set:function(_e){isNaN(_e)||(K=_e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(_e){var se;typeof _e=="number"?se=[_e,_e,_e,_e]:((se=new Array(4))[0]=_e[0],se[1]=_e.length>=2?_e[1]:se[0],se[2]=_e.length>=3?_e[2]:se[0],se[3]=_e.length>=4?_e[3]:se[1]),u.margin=se}});var ne=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ne},set:function(_e){ne=_e}});var ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return ie},set:function(_e){ie=_e}});var he=[];Object.defineProperty(this,"pageBreaks",{get:function(){return he},set:function(_e){he=_e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(_e){_e instanceof h&&(u=_e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(_e){u.path=_e}});var ye=[];Object.defineProperty(this,"ctxStack",{get:function(){return ye},set:function(_e){ye=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var se;se=f(_e),this.ctx.fillStyle=se.style,this.ctx.isFillTransparent=se.a===0,this.ctx.fillOpacity=se.a,this.pdf.setFillColor(se.r,se.g,se.b,{a:se.a}),this.pdf.setTextColor(se.r,se.g,se.b,{a:se.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var se=f(_e);this.ctx.strokeStyle=se.style,this.ctx.isStrokeTransparent=se.a===0,this.ctx.strokeOpacity=se.a,se.a===0?this.pdf.setDrawColor(255,255,255):(se.a,this.pdf.setDrawColor(se.r,se.g,se.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var Oe=null;function Le(_e,se){if(Oe===null){var rt=function(ve){var de=[];return Object.keys(ve).forEach(function(ge){ve[ge].forEach(function(Ne){var ae=null;switch(Ne){case"bold":ae={family:ge,weight:"bold"};break;case"italic":ae={family:ge,style:"italic"};break;case"bolditalic":ae={family:ge,weight:"bold",style:"italic"};break;case"":case"normal":ae={family:ge}}ae!==null&&(ae.ref={name:ge,style:Ne},de.push(ae))})}),de}(_e.getFontList());Oe=function(ve){for(var de={},ge=0;ge<ve.length;++ge){var Ne=Ug(ve[ge]),ae=Ne.family,Se=Ne.stretch,Ce=Ne.style,Pe=Ne.weight;de[ae]=de[ae]||{},de[ae][Se]=de[ae][Se]||{},de[ae][Se][Ce]=de[ae][Se][Ce]||{},de[ae][Se][Ce][Pe]=Ne}return de}(rt.concat(se))}return Oe}var He=null;Object.defineProperty(this,"fontFaces",{get:function(){return He},set:function(_e){Oe=null,He=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var se;if(this.ctx.font=_e,(se=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var rt=se[1],ve=(se[2],se[3]),de=se[4],ge=(se[5],se[6]),Ne=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(de)[2];de=Math.floor(Ne==="px"?parseFloat(de)*this.pdf.internal.scaleFactor:Ne==="em"?parseFloat(de)*this.pdf.getFontSize():parseFloat(de)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(de);var ae=function(pt){var Ze,qe,Lt=[],lt=pt.trim();if(lt==="")return im;if(lt in _w)return[_w[lt]];for(;lt!=="";){switch(qe=null,Ze=(lt=kw(lt)).charAt(0)){case'"':case"'":qe=rP(lt.substring(1),Ze);break;default:qe=nP(lt)}if(qe===null||(Lt.push(qe[0]),(lt=kw(qe[1]))!==""&&lt.charAt(0)!==","))return im;lt=lt.replace(/^,/,"")}return Lt}(ge);if(this.fontFaces){var Se=tP(Le(this.pdf,this.fontFaces),ae.map(function(pt){return{family:pt,stretch:"normal",weight:ve,style:rt}}));this.pdf.setFont(Se.ref.name,Se.ref.style)}else{var Ce="";(ve==="bold"||parseInt(ve,10)>=700||rt==="bold")&&(Ce="bold"),rt==="italic"&&(Ce+="italic"),Ce.length===0&&(Ce="normal");for(var Pe="",Ve={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ye=0;Ye<ae.length;Ye++){if(this.pdf.internal.getFont(ae[Ye],Ce,{noFallback:!0,disableWarning:!0})!==void 0){Pe=ae[Ye];break}if(Ce==="bolditalic"&&this.pdf.internal.getFont(ae[Ye],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Pe=ae[Ye],Ce="bold";else if(this.pdf.internal.getFont(ae[Ye],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Pe=ae[Ye],Ce="normal";break}}if(Pe===""){for(var nt=0;nt<ae.length;nt++)if(Ve[ae[nt]]){Pe=Ve[ae[nt]];break}}Pe=Pe===""?"Times":Pe,this.pdf.setFont(Pe,Ce)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,B.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,B.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=!!_e}})};d.prototype.setLineDash=function(L){this.lineDash=L},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){_.call(this,"fill",!1)},d.prototype.stroke=function(){_.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(L,D){if(isNaN(L)||isNaN(D))throw ur.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new o(L,D));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(L,D)},d.prototype.closePath=function(){var L=new o(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&ir(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){L=new o(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(L.x,L.y)},d.prototype.lineTo=function(L,D){if(isNaN(L)||isNaN(D))throw ur.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new o(L,D));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(z.x,z.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},d.prototype.quadraticCurveTo=function(L,D,z,q){if(isNaN(z)||isNaN(q)||isNaN(L)||isNaN(D))throw ur.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var U=this.ctx.transform.applyToPoint(new o(z,q)),K=this.ctx.transform.applyToPoint(new o(L,D));this.path.push({type:"qct",x1:K.x,y1:K.y,x:U.x,y:U.y}),this.ctx.lastPoint=new o(U.x,U.y)},d.prototype.bezierCurveTo=function(L,D,z,q,U,K){if(isNaN(U)||isNaN(K)||isNaN(L)||isNaN(D)||isNaN(z)||isNaN(q))throw ur.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ne=this.ctx.transform.applyToPoint(new o(U,K)),ie=this.ctx.transform.applyToPoint(new o(L,D)),he=this.ctx.transform.applyToPoint(new o(z,q));this.path.push({type:"bct",x1:ie.x,y1:ie.y,x2:he.x,y2:he.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},d.prototype.arc=function(L,D,z,q,U,K){if(isNaN(L)||isNaN(D)||isNaN(z)||isNaN(q)||isNaN(U))throw ur.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(K=!!K,!this.ctx.transform.isIdentity){var ne=this.ctx.transform.applyToPoint(new o(L,D));L=ne.x,D=ne.y;var ie=this.ctx.transform.applyToPoint(new o(0,z)),he=this.ctx.transform.applyToPoint(new o(0,0));z=Math.sqrt(Math.pow(ie.x-he.x,2)+Math.pow(ie.y-he.y,2))}Math.abs(U-q)>=2*Math.PI&&(q=0,U=2*Math.PI),this.path.push({type:"arc",x:L,y:D,radius:z,startAngle:q,endAngle:U,counterclockwise:K})},d.prototype.arcTo=function(L,D,z,q,U){throw new Error("arcTo not implemented.")},d.prototype.rect=function(L,D,z,q){if(isNaN(L)||isNaN(D)||isNaN(z)||isNaN(q))throw ur.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,D),this.lineTo(L+z,D),this.lineTo(L+z,D+q),this.lineTo(L,D+q),this.lineTo(L,D),this.lineTo(L+z,D),this.lineTo(L,D)},d.prototype.fillRect=function(L,D,z,q){if(isNaN(L)||isNaN(D)||isNaN(z)||isNaN(q))throw ur.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!c.call(this)){var U={};this.lineCap!=="butt"&&(U.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(U.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,D,z,q),this.fill(),U.hasOwnProperty("lineCap")&&(this.lineCap=U.lineCap),U.hasOwnProperty("lineJoin")&&(this.lineJoin=U.lineJoin)}},d.prototype.strokeRect=function(L,D,z,q){if(isNaN(L)||isNaN(D)||isNaN(z)||isNaN(q))throw ur.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(L,D,z,q),this.stroke())},d.prototype.clearRect=function(L,D,z,q){if(isNaN(L)||isNaN(D)||isNaN(z)||isNaN(q))throw ur.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,D,z,q))},d.prototype.save=function(L){L=typeof L!="boolean"||L;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var q=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=q}},d.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(D),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(L){var D,z,q,U;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))D=0,z=0,q=0,U=0;else{var K=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(K!==null)D=parseInt(K[1]),z=parseInt(K[2]),q=parseInt(K[3]),U=1;else if((K=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)D=parseInt(K[1]),z=parseInt(K[2]),q=parseInt(K[3]),U=parseFloat(K[4]);else{if(U=1,typeof L=="string"&&L.charAt(0)!=="#"){var ne=new F_(L);L=ne.ok?ne.toHex():"#000000"}L.length===4?(D=L.substring(1,2),D+=D,z=L.substring(2,3),z+=z,q=L.substring(3,4),q+=q):(D=L.substring(1,3),z=L.substring(3,5),q=L.substring(5,7)),D=parseInt(D,16),z=parseInt(z,16),q=parseInt(q,16)}}return{r:D,g:z,b:q,a:U,style:L}},c=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(L,D,z,q){if(isNaN(D)||isNaN(z)||typeof L!="string")throw ur.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(q=isNaN(q)?void 0:q,!c.call(this)){var U=X(this.ctx.transform.rotation),K=this.ctx.transform.scaleX;j.call(this,{text:L,x:D,y:z,scale:K,angle:U,align:this.textAlign,maxWidth:q})}},d.prototype.strokeText=function(L,D,z,q){if(isNaN(D)||isNaN(z)||typeof L!="string")throw ur.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){q=isNaN(q)?void 0:q;var U=X(this.ctx.transform.rotation),K=this.ctx.transform.scaleX;j.call(this,{text:L,x:D,y:z,scale:K,renderingMode:"stroke",angle:U,align:this.textAlign,maxWidth:q})}},d.prototype.measureText=function(L){if(typeof L!="string")throw ur.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,z=this.pdf.internal.scaleFactor,q=D.internal.getFontSize(),U=D.getStringUnitWidth(L)*q/D.internal.scaleFactor,K=function(ne){var ie=(ne=ne||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this};return new K({width:U*=Math.round(96*z/72*1e4)/1e4})},d.prototype.scale=function(L,D){if(isNaN(L)||isNaN(D))throw ur.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new l(L,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},d.prototype.rotate=function(L){if(isNaN(L))throw ur.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new l(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},d.prototype.translate=function(L,D){if(isNaN(L)||isNaN(D))throw ur.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new l(1,0,0,1,L,D);this.ctx.transform=this.ctx.transform.multiply(z)},d.prototype.transform=function(L,D,z,q,U,K){if(isNaN(L)||isNaN(D)||isNaN(z)||isNaN(q)||isNaN(U)||isNaN(K))throw ur.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ne=new l(L,D,z,q,U,K);this.ctx.transform=this.ctx.transform.multiply(ne)},d.prototype.setTransform=function(L,D,z,q,U,K){L=isNaN(L)?1:L,D=isNaN(D)?0:D,z=isNaN(z)?0:z,q=isNaN(q)?1:q,U=isNaN(U)?0:U,K=isNaN(K)?0:K,this.ctx.transform=new l(L,D,z,q,U,K)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(L,D,z,q,U,K,ne,ie,he){var ye=this.pdf.getImageProperties(L),Oe=1,Le=1,He=1,_e=1;q!==void 0&&ie!==void 0&&(He=ie/q,_e=he/U,Oe=ye.width/q*ie/q,Le=ye.height/U*he/U),K===void 0&&(K=D,ne=z,D=0,z=0),q!==void 0&&ie===void 0&&(ie=q,he=U),q===void 0&&ie===void 0&&(ie=ye.width,he=ye.height);for(var se,rt=this.ctx.transform.decompose(),ve=X(rt.rotate.shx),de=new l,ge=(de=(de=(de=de.multiply(rt.translate)).multiply(rt.skew)).multiply(rt.scale)).applyToRectangle(new s(K-D*He,ne-z*_e,q*Oe,U*Le)),Ne=w.call(this,ge),ae=[],Se=0;Se<Ne.length;Se+=1)ae.indexOf(Ne[Se])===-1&&ae.push(Ne[Se]);if(b(ae),this.autoPaging)for(var Ce=ae[0],Pe=ae[ae.length-1],Ve=Ce;Ve<Pe+1;Ve++){this.pdf.setPage(Ve);var Ye=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nt=Ve===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ze=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qe=Ve===1?0:pt+(Ve-2)*Ze;if(this.ctx.clip_path.length!==0){var Lt=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(se,this.posX+this.margin[3],-qe+nt+this.ctx.prevPageLastElemOffset),E.call(this,"fill",!0),this.path=Lt}var lt=JSON.parse(JSON.stringify(ge));lt=g([lt],this.posX+this.margin[3],-qe+nt+this.ctx.prevPageLastElemOffset)[0];var Dt=(Ve>Ce||Ve<Pe)&&v.call(this);Dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ye,Ze,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",lt.x,lt.y,lt.w,lt.h,null,null,ve),Dt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",ge.x,ge.y,ge.w,ge.h,null,null,ve)};var w=function(L,D,z){var q=[];D=D||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var U=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":q.push(Math.floor((L.y+U)/z)+1);break;case"arc":q.push(Math.floor((L.y+U-L.radius)/z)+1),q.push(Math.floor((L.y+U+L.radius)/z)+1);break;case"qct":var K=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);q.push(Math.floor((K.y+U)/z)+1),q.push(Math.floor((K.y+K.h+U)/z)+1);break;case"bct":var ne=H(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);q.push(Math.floor((ne.y+U)/z)+1),q.push(Math.floor((ne.y+ne.h+U)/z)+1);break;case"rect":q.push(Math.floor((L.y+U)/z)+1),q.push(Math.floor((L.y+L.h+U)/z)+1)}for(var ie=0;ie<q.length;ie+=1)for(;this.pdf.internal.getNumberOfPages()<q[ie];)p.call(this);return q},p=function(){var L=this.fillStyle,D=this.strokeStyle,z=this.font,q=this.lineCap,U=this.lineWidth,K=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=D,this.font=z,this.lineCap=q,this.lineWidth=U,this.lineJoin=K},g=function(L,D,z){for(var q=0;q<L.length;q++)switch(L[q].type){case"bct":L[q].x2+=D,L[q].y2+=z;case"qct":L[q].x1+=D,L[q].y1+=z;case"mt":case"lt":case"arc":default:L[q].x+=D,L[q].y+=z}return L},b=function(L){return L.sort(function(D,z){return D-z})},_=function(L,D){for(var z,q,U=this.fillStyle,K=this.strokeStyle,ne=this.lineCap,ie=this.lineWidth,he=Math.abs(ie*this.ctx.transform.scaleX),ye=this.lineJoin,Oe=JSON.parse(JSON.stringify(this.path)),Le=JSON.parse(JSON.stringify(this.path)),He=[],_e=0;_e<Le.length;_e++)if(Le[_e].x!==void 0)for(var se=w.call(this,Le[_e]),rt=0;rt<se.length;rt+=1)He.indexOf(se[rt])===-1&&He.push(se[rt]);for(var ve=0;ve<He.length;ve++)for(;this.pdf.internal.getNumberOfPages()<He[ve];)p.call(this);if(b(He),this.autoPaging)for(var de=He[0],ge=He[He.length-1],Ne=de;Ne<ge+1;Ne++){this.pdf.setPage(Ne),this.fillStyle=U,this.strokeStyle=K,this.lineCap=ne,this.lineWidth=he,this.lineJoin=ye;var ae=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Se=Ne===1?this.posY+this.margin[0]:this.margin[0],Ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ve=Ne===1?0:Ce+(Ne-2)*Pe;if(this.ctx.clip_path.length!==0){var Ye=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(z,this.posX+this.margin[3],-Ve+Se+this.ctx.prevPageLastElemOffset),E.call(this,L,!0),this.path=Ye}if(q=JSON.parse(JSON.stringify(Oe)),this.path=g(q,this.posX+this.margin[3],-Ve+Se+this.ctx.prevPageLastElemOffset),D===!1||Ne===0){var nt=(Ne>de||Ne<ge)&&v.call(this);nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ae,Pe,null).clip().discardPath()),E.call(this,L,D),nt&&this.pdf.restoreGraphicsState()}this.lineWidth=ie}else this.lineWidth=he,E.call(this,L,D),this.lineWidth=ie;this.path=Oe},E=function(L,D){if((L!=="stroke"||D||!y.call(this))&&(L==="stroke"||D||!c.call(this))){for(var z,q,U=[],K=this.path,ne=0;ne<K.length;ne++){var ie=K[ne];switch(ie.type){case"begin":U.push({begin:!0});break;case"close":U.push({close:!0});break;case"mt":U.push({start:ie,deltas:[],abs:[]});break;case"lt":var he=U.length;if(K[ne-1]&&!isNaN(K[ne-1].x)&&(z=[ie.x-K[ne-1].x,ie.y-K[ne-1].y],he>0)){for(;he>=0;he--)if(U[he-1].close!==!0&&U[he-1].begin!==!0){U[he-1].deltas.push(z),U[he-1].abs.push(ie);break}}break;case"bct":z=[ie.x1-K[ne-1].x,ie.y1-K[ne-1].y,ie.x2-K[ne-1].x,ie.y2-K[ne-1].y,ie.x-K[ne-1].x,ie.y-K[ne-1].y],U[U.length-1].deltas.push(z);break;case"qct":var ye=K[ne-1].x+2/3*(ie.x1-K[ne-1].x),Oe=K[ne-1].y+2/3*(ie.y1-K[ne-1].y),Le=ie.x+2/3*(ie.x1-ie.x),He=ie.y+2/3*(ie.y1-ie.y),_e=ie.x,se=ie.y;z=[ye-K[ne-1].x,Oe-K[ne-1].y,Le-K[ne-1].x,He-K[ne-1].y,_e-K[ne-1].x,se-K[ne-1].y],U[U.length-1].deltas.push(z);break;case"arc":U.push({deltas:[],abs:[],arc:!0}),Array.isArray(U[U.length-1].abs)&&U[U.length-1].abs.push(ie)}}q=D?null:L==="stroke"?"stroke":"fill";for(var rt=!1,ve=0;ve<U.length;ve++)if(U[ve].arc)for(var de=U[ve].abs,ge=0;ge<de.length;ge++){var Ne=de[ge];Ne.type==="arc"?P.call(this,Ne.x,Ne.y,Ne.radius,Ne.startAngle,Ne.endAngle,Ne.counterclockwise,void 0,D,!rt):I.call(this,Ne.x,Ne.y),rt=!0}else if(U[ve].close===!0)this.pdf.internal.out("h"),rt=!1;else if(U[ve].begin!==!0){var ae=U[ve].start.x,Se=U[ve].start.y;R.call(this,U[ve].deltas,ae,Se),rt=!0}q&&F.call(this,q),D&&T.call(this)}},C=function(L){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-z;case"top":return L+D-z;case"hanging":return L+D-2*z;case"middle":return L+D/2-z;case"ideographic":return L;case"alphabetic":default:return L}},A=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(D,z){this.colorStops.push([D,z])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var P=function(L,D,z,q,U,K,ne,ie,he){for(var ye=Z.call(this,z,q,U,K),Oe=0;Oe<ye.length;Oe++){var Le=ye[Oe];Oe===0&&(he?k.call(this,Le.x1+L,Le.y1+D):I.call(this,Le.x1+L,Le.y1+D)),$.call(this,L,D,Le.x2,Le.y2,Le.x3,Le.y3,Le.x4,Le.y4)}ie?T.call(this):F.call(this,ne)},F=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},T=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(L,D){this.pdf.internal.out(r(L)+" "+n(D)+" m")},j=function(L){var D;switch(L.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var z=this.pdf.getTextDimensions(L.text),q=C.call(this,L.y),U=A.call(this,q)-z.h,K=this.ctx.transform.applyToPoint(new o(L.x,q)),ne=this.ctx.transform.decompose(),ie=new l;ie=(ie=(ie=ie.multiply(ne.translate)).multiply(ne.skew)).multiply(ne.scale);for(var he,ye,Oe,Le=this.ctx.transform.applyToRectangle(new s(L.x,q,z.w,z.h)),He=ie.applyToRectangle(new s(L.x,U,z.w,z.h)),_e=w.call(this,He),se=[],rt=0;rt<_e.length;rt+=1)se.indexOf(_e[rt])===-1&&se.push(_e[rt]);if(b(se),this.autoPaging)for(var ve=se[0],de=se[se.length-1],ge=ve;ge<de+1;ge++){this.pdf.setPage(ge);var Ne=ge===1?this.posY+this.margin[0]:this.margin[0],ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Se=this.pdf.internal.pageSize.height-this.margin[2],Ce=Se-this.margin[0],Pe=this.pdf.internal.pageSize.width-this.margin[1],Ve=Pe-this.margin[3],Ye=ge===1?0:ae+(ge-2)*Ce;if(this.ctx.clip_path.length!==0){var nt=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(he,this.posX+this.margin[3],-1*Ye+Ne),E.call(this,"fill",!0),this.path=nt}var pt=g([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-Ye+Ne+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ye*L.scale),Oe=this.lineWidth,this.lineWidth=Oe*L.scale);var Ze=this.autoPaging!=="text";if(Ze||pt.y+pt.h<=Se){if(Ze||pt.y>=Ne&&pt.x<=Pe){var qe=Ze?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Pe-pt.x)[0],Lt=g([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-Ye+Ne+this.ctx.prevPageLastElemOffset)[0],lt=Ze&&(ge>ve||ge<de)&&v.call(this);lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ve,Ce,null).clip().discardPath()),this.pdf.text(qe,Lt.x,Lt.y,{angle:L.angle,align:D,renderingMode:L.renderingMode}),lt&&this.pdf.restoreGraphicsState()}}else pt.y<Se&&(this.ctx.prevPageLastElemOffset+=Se-pt.y);L.scale>=.01&&(this.pdf.setFontSize(ye),this.lineWidth=Oe)}else L.scale>=.01&&(ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ye*L.scale),Oe=this.lineWidth,this.lineWidth=Oe*L.scale),this.pdf.text(L.text,K.x+this.posX,K.y+this.posY,{angle:L.angle,align:D,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(ye),this.lineWidth=Oe)},I=function(L,D,z,q){z=z||0,q=q||0,this.pdf.internal.out(r(L+z)+" "+n(D+q)+" l")},R=function(L,D,z){return this.pdf.lines(L,D,z,null,null)},$=function(L,D,z,q,U,K,ne,ie){this.pdf.internal.out([e(i(z+L)),e(a(q+D)),e(i(U+L)),e(a(K+D)),e(i(ne+L)),e(a(ie+D)),"c"].join(" "))},Z=function(L,D,z,q){for(var U=2*Math.PI,K=Math.PI/2;D>z;)D-=U;var ne=Math.abs(z-D);ne<U&&q&&(ne=U-ne);for(var ie=[],he=q?-1:1,ye=D;ne>1e-5;){var Oe=ye+he*Math.min(ne,K);ie.push(Q.call(this,L,ye,Oe)),ne-=Math.abs(Oe-ye),ye=Oe}return ie},Q=function(L,D,z){var q=(z-D)/2,U=L*Math.cos(q),K=L*Math.sin(q),ne=U,ie=-K,he=ne*ne+ie*ie,ye=he+ne*U+ie*K,Oe=4/3*(Math.sqrt(2*he*ye)-ye)/(ne*K-ie*U),Le=ne-Oe*ie,He=ie+Oe*ne,_e=Le,se=-He,rt=q+D,ve=Math.cos(rt),de=Math.sin(rt);return{x1:L*Math.cos(D),y1:L*Math.sin(D),x2:Le*ve-He*de,y2:Le*de+He*ve,x3:_e*ve-se*de,y3:_e*de+se*ve,x4:L*Math.cos(z),y4:L*Math.sin(z)}},X=function(L){return 180*L/Math.PI},G=function(L,D,z,q,U,K){var ne=L+.5*(z-L),ie=D+.5*(q-D),he=U+.5*(z-U),ye=K+.5*(q-K),Oe=Math.min(L,U,ne,he),Le=Math.max(L,U,ne,he),He=Math.min(D,K,ie,ye),_e=Math.max(D,K,ie,ye);return new s(Oe,He,Le-Oe,_e-He)},H=function(L,D,z,q,U,K,ne,ie){var he,ye,Oe,Le,He,_e,se,rt,ve,de,ge,Ne,ae,Se,Ce=z-L,Pe=q-D,Ve=U-z,Ye=K-q,nt=ne-U,pt=ie-K;for(ye=0;ye<41;ye++)ve=(se=(Oe=L+(he=ye/40)*Ce)+he*((He=z+he*Ve)-Oe))+he*(He+he*(U+he*nt-He)-se),de=(rt=(Le=D+he*Pe)+he*((_e=q+he*Ye)-Le))+he*(_e+he*(K+he*pt-_e)-rt),ye==0?(ge=ve,Ne=de,ae=ve,Se=de):(ge=Math.min(ge,ve),Ne=Math.min(Ne,de),ae=Math.max(ae,ve),Se=Math.max(Se,de));return new s(Math.round(ge),Math.round(Ne),Math.round(ae-ge),Math.round(Se-Ne))},B=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,D,z=(L=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:D}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(St.API),function(t){var e=function(a){var o,s,l,u,h,d,f,c,y,v;for(s=[],l=0,u=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;u>l;l+=4)(h=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(d=(h=((h=((h=((h=(h-(v=h%85))/85)-(y=h%85))/85)-(c=h%85))/85)-(f=h%85))/85)%85,s.push(d+33,f+33,c+33,y+33,v+33)):s.push(122);return function(w,p){for(var g=p;g>0;g--)w.pop()}(s,o.length),String.fromCharCode.apply(String,s)+"~>"},r=function(a){var o,s,l,u,h,d=String,f="length",c=255,y="charCodeAt",v="slice",w="replace";for(a[v](-2),a=a[v](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),l=[],u=0,h=(a+=o="uuuuu"[v](a[f]%5||5))[f];h>u;u+=5)s=52200625*(a[y](u)-33)+614125*(a[y](u+1)-33)+7225*(a[y](u+2)-33)+85*(a[y](u+3)-33)+(a[y](u+4)-33),l.push(c&s>>24,c&s>>16,c&s>>8,c&s);return function(p,g){for(var b=g;b>0;b--)p.pop()}(l,o[f]),d.fromCharCode.apply(d,l)},n=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var s="",l=0;l<a.length;l+=2)s+=String.fromCharCode("0x"+(a[l]+a[l+1]));return s},i=function(a){for(var o=new Uint8Array(a.length),s=a.length;s--;)o[s]=a.charCodeAt(s);return a=(o=Rg(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(a,o){var s=0,l=a||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),s=0;s<o.length;s+=1)switch(o[s]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[s]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(St.API),function(t){t.loadFile=function(e,r,n){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(l,u,h){var d=new XMLHttpRequest,f=0,c=function(y){var v=y.length,w=[],p=String.fromCharCode;for(f=0;f<v;f+=1)w.push(p(255&y.charCodeAt(f)));return w.join("")};if(d.open("GET",l,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?h(c(this.responseText)):h(void 0)}),d.send(null),u&&d.status===200)return c(d.responseText)}(i,a,o)}catch{}return s}(e,r,n)},t.loadImageFile=t.loadFile}(St.API),function(t){function e(){return(kt.html2canvas?Promise.resolve(kt.html2canvas):Og(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(kt.DOMPurify?Promise.resolve(kt.DOMPurify):Og(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var s=ir(o);return s==="undefined"?"undefined":s==="string"||o instanceof String?"string":s==="number"||o instanceof Number?"number":s==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":s==="object"?"object":"unknown"},i=function(o,s){var l=document.createElement(o);for(var u in s.className&&(l.className=s.className),s.innerHTML&&s.dompurify&&(l.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)l.style[u]=s.style[u];return l},a=function o(s){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(s)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,s){return o.__proto__=s||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,s){return this.then(function(){switch(s=s||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function l(u,h){for(var d=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),f=u.firstChild;f;f=f.nextSibling)h!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,h));return u.nodeType===1&&(u.nodeName==="CANVAS"?(d.width=u.width,d.height=u.height,d.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(d.value=u.value),d.addEventListener("load",function(){d.scrollTop=u.scrollTop,d.scrollLeft=u.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,s(this.prop.container,l)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var l=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var c=u[f],y=c.src.find(function(v){return v.format==="truetype"});y&&l.addFont(y.url,c.ref.name,c.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),s(this.prop.container,d)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,s,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,s):this.outputPdf(o,s)},a.prototype.outputPdf=function(o,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,s)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var s=Object.keys(o||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(s)})},a.prototype.get=function(o,s){return this.then(function(){var l=o in a.template.prop?this.prop[o]:this.opt[o];return s?s(l):l})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function s(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||St.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:s(o.inner.width,o.k),height:s(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,s,l,u){return o!=null&&(this.progress.val=o),s!=null&&(this.progress.state=s),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,s,l,u){return this.setProgress(o?this.progress.val+o:null,s||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(o,s){var l=this;return this.thenCore(o,s,function(u,h){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,u),d}).then(u,h).then(function(d){return l.updateProgress(1),d})})},a.prototype.thenCore=function(o,s,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),s&&(s=s.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),h=l.call(u,o,s);return a.convert(h,this.__proto__)},a.prototype.thenExternal=function(o,s){return Promise.prototype.then.call(this,o,s)},a.prototype.thenList=function(o){var s=this;return o.forEach(function(l){s=s.thenCore(l)}),s},a.prototype.catch=function(o){o&&(o=o.bind(this));var s=Promise.prototype.catch.call(this,o);return a.convert(s,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,St.getPageSize=function(o,s,l){if(ir(o)==="object"){var u=o;o=u.orientation,s=u.unit||s,l=u.format||l}s=s||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var h,d=(""+l).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+s}var c,y=0,v=0;if(f.hasOwnProperty(d))y=f[d][1]/h,v=f[d][0]/h;else try{y=l[1],v=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",v>y&&(c=v,v=y,y=c);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>v&&(c=v,v=y,y=c)}return{width:v,height:y,unit:s,k:h,orientation:o}},t.html=function(o,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(Ug):null;var l=new a(s);return s.worker?l:l.from(o).doCallback()}}(St.API),St.API.addJS=function(t){return Ew=t,this.internal.events.subscribe("postPutResources",function(){Af=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Af+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Nw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ew+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Af!==void 0&&Nw!==void 0&&this.internal.out("/Names <</JavaScript "+Af+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],s=n.exec(o);if(s!=null){var l=s[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,h=[];for(a=0;a<u;a++){var d=r.internal.newObject();h.push(d);var f=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var c=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<h.length;a++)r.internal.write("(page_"+(a+1)+")"+h[a]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+c+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,a){var o={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var o=n.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var l=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(St.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,a,o,s){var l,u=this.decode.DCT_DECODE,h=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(d){for(var f,c=256*d.charCodeAt(4)+d.charCodeAt(5),y=d.length,v={width:0,height:0,numcomponents:1},w=4;w<y;w+=2){if(w+=c,e.indexOf(d.charCodeAt(w+1))!==-1){f=256*d.charCodeAt(w+5)+d.charCodeAt(w+6),v={width:256*d.charCodeAt(w+7)+d.charCodeAt(w+8),height:f,numcomponents:d.charCodeAt(w+9)};break}c=256*d.charCodeAt(w+2)+d.charCodeAt(w+3)}return v}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}h={data:r,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:u,index:n,alias:i}}return h}}(St.API);var ul,jf,Aw,jw,Ow,iP=function(){var t,e,r;function n(a){var o,s,l,u,h,d,f,c,y,v,w,p,g,b;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),y=(function(){var _,E;for(E=[],_=0;_<4;++_)E.push(String.fromCharCode(this.data[this.pos++]));return E}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),u=this.readUInt16()||100,d.delay=1e3*h/u,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),a=(d!=null?d.data:void 0)||this.imgData,p=0;0<=o?p<o:p>o;0<=o?++p:--p)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((v=l-this.transparency.indexed.length)>0)for(g=0;0<=v?g<v:g>v;0<=v?++g:--g)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":f=(w=this.read(o)).indexOf(0),c=String.fromCharCode.apply(String,w.slice(0,f)),this.text[c]=String.fromCharCode.apply(String,w.slice(f+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(b=this.colorType)===4||b===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(a){var o,s;for(s=[],o=0;0<=a?o<a:o>a;0<=a?++o:--o)s.push(this.data[this.pos++]);return s},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(a){var o=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*o),l=0,u=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function h(d,f,c,y){var v,w,p,g,b,_,E,C,A,P,F,T,k,j,I,R,$,Z,Q,X,G,H=Math.ceil((u.width-d)/c),B=Math.ceil((u.height-f)/y),L=u.width==H&&u.height==B;for(j=o*H,T=L?s:new Uint8Array(j*B),_=a.length,k=0,w=0;k<B&&l<_;){switch(a[l++]){case 0:for(g=$=0;$<j;g=$+=1)T[w++]=a[l++];break;case 1:for(g=Z=0;Z<j;g=Z+=1)v=a[l++],b=g<o?0:T[w-o],T[w++]=(v+b)%256;break;case 2:for(g=Q=0;Q<j;g=Q+=1)v=a[l++],p=(g-g%o)/o,I=k&&T[(k-1)*j+p*o+g%o],T[w++]=(I+v)%256;break;case 3:for(g=X=0;X<j;g=X+=1)v=a[l++],p=(g-g%o)/o,b=g<o?0:T[w-o],I=k&&T[(k-1)*j+p*o+g%o],T[w++]=(v+Math.floor((b+I)/2))%256;break;case 4:for(g=G=0;G<j;g=G+=1)v=a[l++],p=(g-g%o)/o,b=g<o?0:T[w-o],k===0?I=R=0:(I=T[(k-1)*j+p*o+g%o],R=p&&T[(k-1)*j+(p-1)*o+g%o]),E=b+I-R,C=Math.abs(E-b),P=Math.abs(E-I),F=Math.abs(E-R),A=C<=P&&C<=F?b:P<=F?I:R,T[w++]=(v+A)%256;break;default:throw new Error("Invalid filter algorithm: "+a[l-1])}if(!L){var D=((f+k*y)*u.width+d)*o,z=k*j;for(g=0;g<H;g+=1){for(var q=0;q<o;q+=1)s[D++]=T[z++];D+=(c-1)*o}}k++}}return a=DL(a),u.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),s},n.prototype.decodePalette=function(){var a,o,s,l,u,h,d,f,c;for(s=this.palette,h=this.transparency.indexed||[],u=new Uint8Array((h.length||0)+s.length),l=0,a=0,o=d=0,f=s.length;d<f;o=d+=3)u[l++]=s[o],u[l++]=s[o+1],u[l++]=s[o+2],u[l++]=(c=h[a++])!=null?c:255;return u},n.prototype.copyToImageData=function(a,o){var s,l,u,h,d,f,c,y,v,w,p;if(l=this.colors,v=null,s=this.hasAlphaChannel,this.palette.length&&(v=(p=this._decodedPalette)!=null?p:this._decodedPalette=this.decodePalette(),l=4,s=!0),y=(u=a.data||a).length,d=v||o,h=f=0,l===1)for(;h<y;)c=v?4*o[h/4]:f,w=d[c++],u[h++]=w,u[h++]=w,u[h++]=w,u[h++]=s?d[c++]:255,f=c;else for(;h<y;)c=v?4*o[h/4]:f,u[h++]=d[c++],u[h++]=d[c++],u[h++]=d[c++],u[h++]=s?d[c++]:255,f=c},n.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(kt)==="[object Window]"){try{e=kt.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(a){var o;if(i()===!0)return r.width=a.width,r.height=a.height,r.clearRect(0,0,a.width,a.height),r.putImageData(a,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(a){var o,s,l,u,h,d,f,c;if(this.animation){for(c=[],s=h=0,d=(f=this.animation.frames).length;h<d;s=++h)o=f[s],l=a.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,c.push(o.image=t(l));return c}},n.prototype.renderFrame=function(a,o){var s,l,u;return s=(l=this.animation.frames)[o],u=l[o-1],o===0&&a.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?a.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&a.putImageData(u.imageData,u.xOffset,u.yOffset),s.blendOp===0&&a.clearRect(s.xOffset,s.yOffset,s.width,s.height),a.drawImage(s.image,s.xOffset,s.yOffset)},n.prototype.animate=function(a){var o,s,l,u,h,d,f=this;return s=0,d=this.animation,u=d.numFrames,l=d.frames,h=d.numPlays,(o=function(){var c,y;if(c=s++%u,y=l[c],f.renderFrame(a,c),u>1&&s/u<h)return f.animation._timeout=setTimeout(o,y.delay)})()},n.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},n.prototype.render=function(a){var o,s;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,o=a.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(s=o.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),o.putImageData(s,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function aP(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var s=null,l=null;a&&(s=e,l=o,e+=3*o);var u=!0,h=[],d=0,f=null,c=0,y=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var v=t[e++];d=t[e++]|t[e++]<<8,f=t[e++],!(1&v)&&(f=null),c=v>>2&7,e++;break;case 254:for(;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var w=t[e++]|t[e++]<<8,p=t[e++]|t[e++]<<8,g=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,_=t[e++],E=_>>6&1,C=1<<(7&_)+1,A=s,P=l,F=!1;_>>7&&(F=!0,A=e,P=C,e+=3*C);var T=e;for(e++;;){var k;if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}h.push({x:w,y:p,width:g,height:b,has_local_palette:F,palette_offset:A,palette_size:P,data_offset:T,data_length:e-T,transparent_index:f,interlaced:!!E,delay:d,disposal:c});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return y},this.frameInfo=function(j){if(j<0||j>=h.length)throw new Error("Frame index out of range.");return h[j]},this.decodeAndBlitFrameBGRA=function(j,I){var R=this.frameInfo(j),$=R.width*R.height,Z=new Uint8Array($);Lw(t,R.data_offset,Z,$);var Q=R.palette_offset,X=R.transparent_index;X===null&&(X=256);var G=R.width,H=r-G,B=G,L=4*(R.y*r+R.x),D=4*((R.y+R.height)*r+R.x),z=L,q=4*H;R.interlaced===!0&&(q+=4*r*7);for(var U=8,K=0,ne=Z.length;K<ne;++K){var ie=Z[K];if(B===0&&(B=G,(z+=q)>=D&&(q=4*H+4*r*(U-1),z=L+(G+H)*(U<<1),U>>=1)),ie===X)z+=4;else{var he=t[Q+3*ie],ye=t[Q+3*ie+1],Oe=t[Q+3*ie+2];I[z++]=Oe,I[z++]=ye,I[z++]=he,I[z++]=255}--B}},this.decodeAndBlitFrameRGBA=function(j,I){var R=this.frameInfo(j),$=R.width*R.height,Z=new Uint8Array($);Lw(t,R.data_offset,Z,$);var Q=R.palette_offset,X=R.transparent_index;X===null&&(X=256);var G=R.width,H=r-G,B=G,L=4*(R.y*r+R.x),D=4*((R.y+R.height)*r+R.x),z=L,q=4*H;R.interlaced===!0&&(q+=4*r*7);for(var U=8,K=0,ne=Z.length;K<ne;++K){var ie=Z[K];if(B===0&&(B=G,(z+=q)>=D&&(q=4*H+4*r*(U-1),z=L+(G+H)*(U<<1),U>>=1)),ie===X)z+=4;else{var he=t[Q+3*ie],ye=t[Q+3*ie+1],Oe=t[Q+3*ie+2];I[z++]=he,I[z++]=ye,I[z++]=Oe,I[z++]=255}--B}}}function Lw(t,e,r,n){for(var i=t[e++],a=1<<i,o=a+1,s=o+1,l=i+1,u=(1<<l)-1,h=0,d=0,f=0,c=t[e++],y=new Int32Array(4096),v=null;;){for(;h<16&&c!==0;)d|=t[e++]<<h,h+=8,c===1?c=t[e++]:--c;if(h<l)break;var w=d&u;if(d>>=l,h-=l,w!==a){if(w===o)break;for(var p=w<s?w:v,g=0,b=p;b>a;)b=y[b]>>8,++g;var _=b;if(f+g+(p!==w?1:0)>n)return void ur.log("Warning, gif stream longer than expected.");r[f++]=_;var E=f+=g;for(p!==w&&(r[f++]=_),b=p;g--;)b=y[b],r[--E]=255&b,b>>=8;v!==null&&s<4096&&(y[s++]=v<<8|_,s>=u+1&&l<12&&(++l,u=u<<1|1)),v=w}else s=o+1,u=(1<<(l=i+1))-1,v=null}return f!==n&&ur.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function am(t){var e,r,n,i,a,o=Math.floor,s=new Array(64),l=new Array(64),u=new Array(64),h=new Array(64),d=new Array(65535),f=new Array(65535),c=new Array(64),y=new Array(64),v=[],w=0,p=7,g=new Array(64),b=new Array(64),_=new Array(64),E=new Array(256),C=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],j=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],$=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(L,D){for(var z=0,q=0,U=new Array,K=1;K<=16;K++){for(var ne=1;ne<=L[K];ne++)U[D[q]]=[],U[D[q]][0]=z,U[D[q]][1]=K,q++,z++;z*=2}return U}function Q(L){for(var D=L[0],z=L[1]-1;z>=0;)D&1<<z&&(w|=1<<p),z--,--p<0&&(w==255?(X(255),X(0)):X(w),p=7,w=0)}function X(L){v.push(L)}function G(L){X(L>>8&255),X(255&L)}function H(L,D,z,q,U){for(var K,ne=U[0],ie=U[240],he=function(de,ge){var Ne,ae,Se,Ce,Pe,Ve,Ye,nt,pt,Ze,qe=0;for(pt=0;pt<8;++pt){Ne=de[qe],ae=de[qe+1],Se=de[qe+2],Ce=de[qe+3],Pe=de[qe+4],Ve=de[qe+5],Ye=de[qe+6];var Lt=Ne+(nt=de[qe+7]),lt=Ne-nt,Dt=ae+Ye,wt=ae-Ye,Pt=Se+Ve,br=Se-Ve,xt=Ce+Pe,Xr=Ce-Pe,Ht=Lt+xt,_r=Lt-xt,fn=Dt+Pt,Yt=Dt-Pt;de[qe]=Ht+fn,de[qe+4]=Ht-fn;var Nt=.707106781*(Yt+_r);de[qe+2]=_r+Nt,de[qe+6]=_r-Nt;var zt=.382683433*((Ht=Xr+br)-(Yt=wt+lt)),Jt=.5411961*Ht+zt,Qt=1.306562965*Yt+zt,kn=.707106781*(fn=br+wt),Nn=lt+kn,vt=lt-kn;de[qe+5]=vt+Jt,de[qe+3]=vt-Jt,de[qe+1]=Nn+Qt,de[qe+7]=Nn-Qt,qe+=8}for(qe=0,pt=0;pt<8;++pt){Ne=de[qe],ae=de[qe+8],Se=de[qe+16],Ce=de[qe+24],Pe=de[qe+32],Ve=de[qe+40],Ye=de[qe+48];var ue=Ne+(nt=de[qe+56]),we=Ne-nt,Ee=ae+Ye,Ie=ae-Ye,Ue=Se+Ve,et=Se-Ve,ut=Ce+Pe,tt=Ce-Pe,it=ue+ut,Qe=ue-ut,ht=Ee+Ue,st=Ee-Ue;de[qe]=it+ht,de[qe+32]=it-ht;var mt=.707106781*(st+Qe);de[qe+16]=Qe+mt,de[qe+48]=Qe-mt;var It=.382683433*((it=tt+et)-(st=Ie+we)),Zt=.5411961*it+It,Ge=1.306562965*st+It,ce=.707106781*(ht=et+Ie),De=we+ce,Je=we-ce;de[qe+40]=Je+Zt,de[qe+24]=Je-Zt,de[qe+8]=De+Ge,de[qe+56]=De-Ge,qe++}for(pt=0;pt<64;++pt)Ze=de[pt]*ge[pt],c[pt]=Ze>0?Ze+.5|0:Ze-.5|0;return c}(L,D),ye=0;ye<64;++ye)y[A[ye]]=he[ye];var Oe=y[0]-z;z=y[0],Oe==0?Q(q[0]):(Q(q[f[K=32767+Oe]]),Q(d[K]));for(var Le=63;Le>0&&y[Le]==0;)Le--;if(Le==0)return Q(ne),z;for(var He,_e=1;_e<=Le;){for(var se=_e;y[_e]==0&&_e<=Le;)++_e;var rt=_e-se;if(rt>=16){He=rt>>4;for(var ve=1;ve<=He;++ve)Q(ie);rt&=15}K=32767+y[_e],Q(U[(rt<<4)+f[K]]),Q(d[K]),_e++}return Le!=63&&Q(ne),z}function B(L){L=Math.min(Math.max(L,1),100),a!=L&&(function(D){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],q=0;q<64;q++){var U=o((z[q]*D+50)/100);U=Math.min(Math.max(U,1),255),s[A[q]]=U}for(var K=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ne=0;ne<64;ne++){var ie=o((K[ne]*D+50)/100);ie=Math.min(Math.max(ie,1),255),l[A[ne]]=ie}for(var he=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ye=0,Oe=0;Oe<8;Oe++)for(var Le=0;Le<8;Le++)u[ye]=1/(s[A[ye]]*he[Oe]*he[Le]*8),h[ye]=1/(l[A[ye]]*he[Oe]*he[Le]*8),ye++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),a=L)}this.encode=function(L,D){D&&B(D),v=new Array,w=0,p=7,G(65496),G(65504),G(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),G(1),G(1),X(0),X(0),function(){G(65499),G(132),X(0);for(var ae=0;ae<64;ae++)X(s[ae]);X(1);for(var Se=0;Se<64;Se++)X(l[Se])}(),function(ae,Se){G(65472),G(17),X(8),G(Se),G(ae),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)}(L.width,L.height),function(){G(65476),G(418),X(0);for(var ae=0;ae<16;ae++)X(P[ae+1]);for(var Se=0;Se<=11;Se++)X(F[Se]);X(16);for(var Ce=0;Ce<16;Ce++)X(T[Ce+1]);for(var Pe=0;Pe<=161;Pe++)X(k[Pe]);X(1);for(var Ve=0;Ve<16;Ve++)X(j[Ve+1]);for(var Ye=0;Ye<=11;Ye++)X(I[Ye]);X(17);for(var nt=0;nt<16;nt++)X(R[nt+1]);for(var pt=0;pt<=161;pt++)X($[pt])}(),G(65498),G(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var z=0,q=0,U=0;w=0,p=7,this.encode.displayName="_encode_";for(var K,ne,ie,he,ye,Oe,Le,He,_e,se=L.data,rt=L.width,ve=L.height,de=4*rt,ge=0;ge<ve;){for(K=0;K<de;){for(ye=de*ge+K,Le=-1,He=0,_e=0;_e<64;_e++)Oe=ye+(He=_e>>3)*de+(Le=4*(7&_e)),ge+He>=ve&&(Oe-=de*(ge+1+He-ve)),K+Le>=de&&(Oe-=K+Le-de+4),ne=se[Oe++],ie=se[Oe++],he=se[Oe++],g[_e]=(C[ne]+C[ie+256>>0]+C[he+512>>0]>>16)-128,b[_e]=(C[ne+768>>0]+C[ie+1024>>0]+C[he+1280>>0]>>16)-128,_[_e]=(C[ne+1280>>0]+C[ie+1536>>0]+C[he+1792>>0]>>16)-128;z=H(g,u,z,e,n),q=H(b,h,q,r,i),U=H(_,h,U,r,i),K+=32}ge+=8}if(p>=0){var Ne=[];Ne[1]=p+1,Ne[0]=(1<<p+1)-1,Q(Ne)}return G(65497),new Uint8Array(v)},t=t||50,function(){for(var L=String.fromCharCode,D=0;D<256;D++)E[D]=L(D)}(),e=Z(P,F),r=Z(j,I),n=Z(T,k),i=Z(R,$),function(){for(var L=1,D=2,z=1;z<=15;z++){for(var q=L;q<D;q++)f[32767+q]=z,d[32767+q]=[],d[32767+q][1]=z,d[32767+q][0]=q;for(var U=-(D-1);U<=-L;U++)f[32767+U]=z,d[32767+U]=[],d[32767+U][1]=z,d[32767+U][0]=D-1+U;L<<=1,D<<=1}}(),function(){for(var L=0;L<256;L++)C[L]=19595*L,C[L+256>>0]=38470*L,C[L+512>>0]=7471*L+32768,C[L+768>>0]=-11059*L,C[L+1024>>0]=-21709*L,C[L+1280>>0]=32768*L+8421375,C[L+1536>>0]=-27439*L,C[L+1792>>0]=-5329*L}(),B(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Bi(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Pw(t){function e(P){if(!P)throw Error("assert :P")}function r(P,F,T){for(var k=0;4>k;k++)if(P[F+k]!=T.charCodeAt(k))return!0;return!1}function n(P,F,T,k,j){for(var I=0;I<j;I++)P[F+I]=T[k+I]}function i(P,F,T,k){for(var j=0;j<k;j++)P[F+j]=T}function a(P){return new Int32Array(P)}function o(P,F){for(var T=[],k=0;k<P;k++)T.push(new F);return T}function s(P,F){var T=[];return function k(j,I,R){for(var $=R[I],Z=0;Z<$&&(j.push(R.length>I+1?[]:new F),!(R.length<I+1));Z++)k(j[Z],I+1,R)}(T,0,P),T}var l=function(){var P=this;function F(m,S){for(var O=1<<S-1>>>0;m&O;)O>>>=1;return O?(m&O-1)+O:m}function T(m,S,O,M,W){e(!(M%O));do m[S+(M-=O)]=W;while(0<M)}function k(m,S,O,M,W){if(e(2328>=W),512>=W)var Y=a(512);else if((Y=a(W))==null)return 0;return function(J,ee,re,oe,pe,Ae){var je,xe,Be=ee,Te=1<<re,me=a(16),be=a(16);for(e(pe!=0),e(oe!=null),e(J!=null),e(0<re),xe=0;xe<pe;++xe){if(15<oe[xe])return 0;++me[oe[xe]]}if(me[0]==pe)return 0;for(be[1]=0,je=1;15>je;++je){if(me[je]>1<<je)return 0;be[je+1]=be[je]+me[je]}for(xe=0;xe<pe;++xe)je=oe[xe],0<oe[xe]&&(Ae[be[je]++]=xe);if(be[15]==1)return(oe=new j).g=0,oe.value=Ae[0],T(J,Be,1,Te,oe),Te;var Me,ze=-1,Fe=Te-1,ot=0,Ke=1,bt=1,Xe=1<<re;for(xe=0,je=1,pe=2;je<=re;++je,pe<<=1){if(Ke+=bt<<=1,0>(bt-=me[je]))return 0;for(;0<me[je];--me[je])(oe=new j).g=je,oe.value=Ae[xe++],T(J,Be+ot,pe,Xe,oe),ot=F(ot,je)}for(je=re+1,pe=2;15>=je;++je,pe<<=1){if(Ke+=bt<<=1,0>(bt-=me[je]))return 0;for(;0<me[je];--me[je]){if(oe=new j,(ot&Fe)!=ze){for(Be+=Xe,Me=1<<(ze=je)-re;15>ze&&!(0>=(Me-=me[ze]));)++ze,Me<<=1;Te+=Xe=1<<(Me=ze-re),J[ee+(ze=ot&Fe)].g=Me+re,J[ee+ze].value=Be-ee-ze}oe.g=je-re,oe.value=Ae[xe++],T(J,Be+(ot>>re),pe,Xe,oe),ot=F(ot,je)}}return Ke!=2*be[15]-1?0:Te}(m,S,O,M,W,Y)}function j(){this.value=this.g=0}function I(){this.value=this.g=0}function R(){this.G=o(5,j),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(on,I)}function $(m,S,O,M){e(m!=null),e(S!=null),e(2147483648>M),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=S,m.pa=O,m.Jd=S,m.Yc=O+M,m.Zc=4<=M?O+M-4+1:O,K(m)}function Z(m,S){for(var O=0;0<S--;)O|=ie(m,128)<<S;return O}function Q(m,S){var O=Z(m,S);return ne(m)?-O:O}function X(m,S,O,M){var W,Y=0;for(e(m!=null),e(S!=null),e(4294967288>M),m.Sb=M,m.Ra=0,m.u=0,m.h=0,4<M&&(M=4),W=0;W<M;++W)Y+=S[O+W]<<8*W;m.Ra=Y,m.bb=M,m.oa=S,m.pa=O}function G(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<Hs-8>>>0,++m.bb,m.u-=8;z(m)&&(m.h=1,m.u=0)}function H(m,S){if(e(0<=S),!m.h&&S<=$s){var O=D(m)&qs[S];return m.u+=S,G(m),O}return m.h=1,m.u=0}function B(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(m){return m.Ra>>>(m.u&Hs-1)>>>0}function z(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>Hs}function q(m,S){m.u=S,m.h=z(m)}function U(m){m.u>=Ou&&(e(m.u>=Ou),G(m))}function K(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function ne(m){return Z(m,1)}function ie(m,S){var O=m.Ca;0>m.b&&K(m);var M=m.b,W=O*S>>>8,Y=(m.I>>>M>W)+0;for(Y?(O-=W,m.I-=W+1<<M>>>0):O=W+1,M=O,W=0;256<=M;)W+=8,M>>=8;return M=7^W+Un[M],m.b-=M,m.Ca=(O<<M)-1,Y}function he(m,S,O){m[S+0]=O>>24&255,m[S+1]=O>>16&255,m[S+2]=O>>8&255,m[S+3]=O>>0&255}function ye(m,S){return m[S+0]<<0|m[S+1]<<8}function Oe(m,S){return ye(m,S)|m[S+2]<<16}function Le(m,S){return ye(m,S)|ye(m,S+2)<<16}function He(m,S){var O=1<<S;return e(m!=null),e(0<S),m.X=a(O),m.X==null?0:(m.Mb=32-S,m.Xa=S,1)}function _e(m,S){e(m!=null),e(S!=null),e(m.Xa==S.Xa),n(S.X,0,m.X,0,1<<S.Xa)}function se(){this.X=[],this.Xa=this.Mb=0}function rt(m,S,O,M){e(O!=null),e(M!=null);var W=O[0],Y=M[0];return W==0&&(W=(m*Y+S/2)/S),Y==0&&(Y=(S*W+m/2)/m),0>=W||0>=Y?0:(O[0]=W,M[0]=Y,1)}function ve(m,S){return m+(1<<S)-1>>>S}function de(m,S){return((4278255360&m)+(4278255360&S)>>>0&4278255360)+((16711935&m)+(16711935&S)>>>0&16711935)>>>0}function ge(m,S){P[S]=function(O,M,W,Y,J,ee,re){var oe;for(oe=0;oe<J;++oe){var pe=P[m](ee[re+oe-1],W,Y+oe);ee[re+oe]=de(O[M+oe],pe)}}}function Ne(){this.ud=this.hd=this.jd=0}function ae(m,S){return((4278124286&(m^S))>>>1)+(m&S)>>>0}function Se(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function Ce(m,S){return Se(m+(m-S+.5>>1))}function Pe(m,S,O){return Math.abs(S-O)-Math.abs(m-O)}function Ve(m,S,O,M,W,Y,J){for(M=Y[J-1],O=0;O<W;++O)Y[J+O]=M=de(m[S+O],M)}function Ye(m,S,O,M,W){var Y;for(Y=0;Y<O;++Y){var J=m[S+Y],ee=J>>8&255,re=16711935&(re=(re=16711935&J)+((ee<<16)+ee));M[W+Y]=(4278255360&J)+re>>>0}}function nt(m,S){S.jd=m>>0&255,S.hd=m>>8&255,S.ud=m>>16&255}function pt(m,S,O,M,W,Y){var J;for(J=0;J<M;++J){var ee=S[O+J],re=ee>>>8,oe=ee,pe=255&(pe=(pe=ee>>>16)+((m.jd<<24>>24)*(re<<24>>24)>>>5));oe=255&(oe=(oe=oe+((m.hd<<24>>24)*(re<<24>>24)>>>5))+((m.ud<<24>>24)*(pe<<24>>24)>>>5)),W[Y+J]=(4278255360&ee)+(pe<<16)+oe}}function Ze(m,S,O,M,W){P[S]=function(Y,J,ee,re,oe,pe,Ae,je,xe){for(re=Ae;re<je;++re)for(Ae=0;Ae<xe;++Ae)oe[pe++]=W(ee[M(Y[J++])])},P[m]=function(Y,J,ee,re,oe,pe,Ae){var je=8>>Y.b,xe=Y.Ea,Be=Y.K[0],Te=Y.w;if(8>je)for(Y=(1<<Y.b)-1,Te=(1<<je)-1;J<ee;++J){var me,be=0;for(me=0;me<xe;++me)me&Y||(be=M(re[oe++])),pe[Ae++]=W(Be[be&Te]),be>>=je}else P["VP8LMapColor"+O](re,oe,Be,Te,pe,Ae,J,ee,xe)}}function qe(m,S,O,M,W){for(O=S+O;S<O;){var Y=m[S++];M[W++]=Y>>16&255,M[W++]=Y>>8&255,M[W++]=Y>>0&255}}function Lt(m,S,O,M,W){for(O=S+O;S<O;){var Y=m[S++];M[W++]=Y>>16&255,M[W++]=Y>>8&255,M[W++]=Y>>0&255,M[W++]=Y>>24&255}}function lt(m,S,O,M,W){for(O=S+O;S<O;){var Y=(J=m[S++])>>16&240|J>>12&15,J=J>>0&240|J>>28&15;M[W++]=Y,M[W++]=J}}function Dt(m,S,O,M,W){for(O=S+O;S<O;){var Y=(J=m[S++])>>16&248|J>>13&7,J=J>>5&224|J>>3&31;M[W++]=Y,M[W++]=J}}function wt(m,S,O,M,W){for(O=S+O;S<O;){var Y=m[S++];M[W++]=Y>>0&255,M[W++]=Y>>8&255,M[W++]=Y>>16&255}}function Pt(m,S,O,M,W,Y){if(Y==0)for(O=S+O;S<O;)he(M,((Y=m[S++])[0]>>24|Y[1]>>8&65280|Y[2]<<8&16711680|Y[3]<<24)>>>0),W+=32;else n(M,W,m,S,O)}function br(m,S){P[S][0]=P[m+"0"],P[S][1]=P[m+"1"],P[S][2]=P[m+"2"],P[S][3]=P[m+"3"],P[S][4]=P[m+"4"],P[S][5]=P[m+"5"],P[S][6]=P[m+"6"],P[S][7]=P[m+"7"],P[S][8]=P[m+"8"],P[S][9]=P[m+"9"],P[S][10]=P[m+"10"],P[S][11]=P[m+"11"],P[S][12]=P[m+"12"],P[S][13]=P[m+"13"],P[S][14]=P[m+"0"],P[S][15]=P[m+"0"]}function xt(m){return m==Yp||m==Jp||m==Cd||m==Xp}function Xr(){this.eb=[],this.size=this.A=this.fb=0}function Ht(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function _r(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Xr,this.f.kb=new Ht,this.sd=null}function fn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Yt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Nt(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function zt(m,S){var O=m.T,M=S.ba.f.RGBA,W=M.eb,Y=M.fb+m.ka*M.A,J=bi[S.ba.S],ee=m.y,re=m.O,oe=m.f,pe=m.N,Ae=m.ea,je=m.W,xe=S.cc,Be=S.dc,Te=S.Mc,me=S.Nc,be=m.ka,Me=m.ka+m.T,ze=m.U,Fe=ze+1>>1;for(be==0?J(ee,re,null,null,oe,pe,Ae,je,oe,pe,Ae,je,W,Y,null,null,ze):(J(S.ec,S.fc,ee,re,xe,Be,Te,me,oe,pe,Ae,je,W,Y-M.A,W,Y,ze),++O);be+2<Me;be+=2)xe=oe,Be=pe,Te=Ae,me=je,pe+=m.Rc,je+=m.Rc,Y+=2*M.A,J(ee,(re+=2*m.fa)-m.fa,ee,re,xe,Be,Te,me,oe,pe,Ae,je,W,Y-M.A,W,Y,ze);return re+=m.fa,m.j+Me<m.o?(n(S.ec,S.fc,ee,re,ze),n(S.cc,S.dc,oe,pe,Fe),n(S.Mc,S.Nc,Ae,je,Fe),O--):1&Me||J(ee,re,null,null,oe,pe,Ae,je,oe,pe,Ae,je,W,Y+M.A,null,null,ze),O}function Jt(m,S,O){var M=m.F,W=[m.J];if(M!=null){var Y=m.U,J=S.ba.S,ee=J==Td||J==Cd;S=S.ba.f.RGBA;var re=[0],oe=m.ka;re[0]=m.T,m.Kb&&(oe==0?--re[0]:(--oe,W[0]-=m.width),m.j+m.ka+m.T==m.o&&(re[0]=m.o-m.j-oe));var pe=S.eb;oe=S.fb+oe*S.A,m=fr(M,W[0],m.width,Y,re,pe,oe+(ee?0:3),S.A),e(O==re),m&&xt(J)&&yi(pe,oe,ee,Y,re,S.A)}return 0}function Qt(m){var S=m.ma,O=S.ba.S,M=11>O,W=O==Ld||O==Pd||O==Td||O==Kp||O==12||xt(O);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!Au(S.Oa,m,W?11:12))return 0;if(W&&xt(O)&&$e(),m.da)alert("todo:use_scaling");else{if(M){if(S.Ib=Nt,m.Kb){if(O=m.U+1>>1,S.memory=a(m.U+2*O),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+m.U,S.Mc=S.cc,S.Nc=S.dc+O,S.Ib=zt,$e()}}else alert("todo:EmitYUV");W&&(S.Jb=Jt,M&&ke())}if(M&&!Rv){for(m=0;256>m;++m)G3[m]=89858*(m-128)+Id>>Rd,J3[m]=-22014*(m-128)+Id,Y3[m]=-45773*(m-128),K3[m]=113618*(m-128)+Id>>Rd;for(m=Du;m<e0;++m)S=76283*(m-16)+Id>>Rd,X3[m-Du]=Zn(S,255),Q3[m-Du]=Zn(S+8>>4,15);Rv=1}return 1}function kn(m){var S=m.ma,O=m.U,M=m.T;return e(!(1&m.ka)),0>=O||0>=M?0:(O=S.Ib(m,S),S.Jb!=null&&S.Jb(m,S,O),S.Dc+=O,1)}function Nn(m){m.ma.memory=null}function vt(m,S,O,M){return H(m,8)!=47?0:(S[0]=H(m,14)+1,O[0]=H(m,14)+1,M[0]=H(m,1),H(m,3)!=0?0:!m.h)}function ue(m,S){if(4>m)return m+1;var O=m-2>>1;return(2+(1&m)<<O)+H(S,O)+1}function we(m,S){return 120<S?S-120:1<=(O=((O=C3[S-1])>>4)*m+(8-(15&O)))?O:1;var O}function Ee(m,S,O){var M=D(O),W=m[S+=255&M].g-8;return 0<W&&(q(O,O.u+8),M=D(O),S+=m[S].value,S+=M&(1<<W)-1),q(O,O.u+m[S].g),m[S].value}function Ie(m,S,O){return O.g+=m.g,O.value+=m.value<<S>>>0,e(8>=O.g),m.g}function Ue(m,S,O){var M=m.xc;return e((S=M==0?0:m.vc[m.md*(O>>M)+(S>>M)])<m.Wb),m.Ya[S]}function et(m,S,O,M){var W=m.ab,Y=m.c*S,J=m.C;S=J+S;var ee=O,re=M;for(M=m.Ta,O=m.Ua;0<W--;){var oe=m.gc[W],pe=J,Ae=S,je=ee,xe=re,Be=(re=M,ee=O,oe.Ea);switch(e(pe<Ae),e(Ae<=oe.nc),oe.hc){case 2:Sd(je,xe,(Ae-pe)*Be,re,ee);break;case 0:var Te=pe,me=Ae,be=re,Me=ee,ze=(Xe=oe).Ea;Te==0&&(Vp(je,xe,null,null,1,be,Me),Ve(je,xe+1,0,0,ze-1,be,Me+1),xe+=ze,Me+=ze,++Te);for(var Fe=1<<Xe.b,ot=Fe-1,Ke=ve(ze,Xe.b),bt=Xe.K,Xe=Xe.w+(Te>>Xe.b)*Ke;Te<me;){var Xt=bt,tr=Xe,Vt=1;for(Lu(je,xe,be,Me-ze,1,be,Me);Vt<ze;){var Ut=(Vt&~ot)+Fe;Ut>ze&&(Ut=ze),(0,Ya[Xt[tr++]>>8&15])(je,xe+ +Vt,be,Me+Vt-ze,Ut-Vt,be,Me+Vt),Vt=Ut}xe+=ze,Me+=ze,++Te&ot||(Xe+=Ke)}Ae!=oe.nc&&n(re,ee-Be,re,ee+(Ae-pe-1)*Be,Be);break;case 1:for(Be=je,me=xe,ze=(je=oe.Ea)-(Me=je&~(be=(xe=1<<oe.b)-1)),Te=ve(je,oe.b),Fe=oe.K,oe=oe.w+(pe>>oe.b)*Te;pe<Ae;){for(ot=Fe,Ke=oe,bt=new Ne,Xe=me+Me,Xt=me+je;me<Xe;)nt(ot[Ke++],bt),Wo(bt,Be,me,xe,re,ee),me+=xe,ee+=xe;me<Xt&&(nt(ot[Ke++],bt),Wo(bt,Be,me,ze,re,ee),me+=ze,ee+=ze),++pe&be||(oe+=Te)}break;case 3:if(je==re&&xe==ee&&0<oe.b){for(me=re,je=Be=ee+(Ae-pe)*Be-(Me=(Ae-pe)*ve(oe.Ea,oe.b)),xe=re,be=ee,Te=[],Me=(ze=Me)-1;0<=Me;--Me)Te[Me]=xe[be+Me];for(Me=ze-1;0<=Me;--Me)me[je+Me]=Te[Me];mi(oe,pe,Ae,re,Be,re,ee)}else mi(oe,pe,Ae,je,xe,re,ee)}ee=M,re=O}re!=O&&n(M,O,ee,re,Y)}function ut(m,S){var O=m.V,M=m.Ba+m.c*m.C,W=S-m.C;if(e(S<=m.l.o),e(16>=W),0<W){var Y=m.l,J=m.Ta,ee=m.Ua,re=Y.width;if(et(m,W,O,M),W=ee=[ee],e((O=m.C)<(M=S)),e(Y.v<Y.va),M>Y.o&&(M=Y.o),O<Y.j){var oe=Y.j-O;O=Y.j,W[0]+=oe*re}if(O>=M?O=0:(W[0]+=4*Y.v,Y.ka=O-Y.j,Y.U=Y.va-Y.v,Y.T=M-O,O=1),O){if(ee=ee[0],11>(O=m.ca).S){var pe=O.f.RGBA,Ae=(M=O.S,W=Y.U,Y=Y.T,oe=pe.eb,pe.A),je=Y;for(pe=pe.fb+m.Ma*pe.A;0<je--;){var xe=J,Be=ee,Te=W,me=oe,be=pe;switch(M){case Od:zn(xe,Be,Te,me,be);break;case Ld:En(xe,Be,Te,me,be);break;case Yp:En(xe,Be,Te,me,be),yi(me,be,0,Te,1,0);break;case Nv:xa(xe,Be,Te,me,be);break;case Pd:Pt(xe,Be,Te,me,be,1);break;case Jp:Pt(xe,Be,Te,me,be,1),yi(me,be,0,Te,1,0);break;case Td:Pt(xe,Be,Te,me,be,0);break;case Cd:Pt(xe,Be,Te,me,be,0),yi(me,be,1,Te,1,0);break;case Kp:Ja(xe,Be,Te,me,be);break;case Xp:Ja(xe,Be,Te,me,be),dr(me,be,Te,1,0);break;case Ev:ba(xe,Be,Te,me,be);break;default:e(0)}ee+=re,pe+=Ae}m.Ma+=Y}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=O.height)}}m.C=S,e(m.C<=m.i)}function tt(m){var S;if(0<m.ua)return 0;for(S=0;S<m.Wb;++S){var O=m.Ya[S].G,M=m.Ya[S].H;if(0<O[1][M[1]+0].g||0<O[2][M[2]+0].g||0<O[3][M[3]+0].g)return 0}return 1}function it(m,S,O,M,W,Y){if(m.Z!=0){var J=m.qd,ee=m.rd;for(e(eo[m.Z]!=null);S<O;++S)eo[m.Z](J,ee,M,W,M,W,Y),J=M,ee=W,W+=Y;m.qd=J,m.rd=ee}}function Qe(m,S){var O=m.l.ma,M=O.Z==0||O.Z==1?m.l.j:m.C;if(M=m.C<M?M:m.C,e(S<=m.l.o),S>M){var W=m.l.width,Y=O.ca,J=O.tb+W*M,ee=m.V,re=m.Ba+m.c*M,oe=m.gc;e(m.ab==1),e(oe[0].hc==3),kd(oe[0],M,S,ee,re,Y,J),it(O,M,S,Y,J,W)}m.C=m.Ma=S}function ht(m,S,O,M,W,Y,J){var ee=m.$/M,re=m.$%M,oe=m.m,pe=m.s,Ae=O+m.$,je=Ae;W=O+M*W;var xe=O+M*Y,Be=280+pe.ua,Te=m.Pb?ee:16777216,me=0<pe.ua?pe.Wa:null,be=pe.wc,Me=Ae<xe?Ue(pe,re,ee):null;e(m.C<Y),e(xe<=W);var ze=!1;e:for(;;){for(;ze||Ae<xe;){var Fe=0;if(ee>=Te){var ot=Ae-O;e((Te=m).Pb),Te.wd=Te.m,Te.xd=ot,0<Te.s.ua&&_e(Te.s.Wa,Te.s.vb),Te=ee+I3}if(re&be||(Me=Ue(pe,re,ee)),e(Me!=null),Me.Qb&&(S[Ae]=Me.qb,ze=!0),!ze)if(U(oe),Me.jc){Fe=oe,ot=S;var Ke=Ae,bt=Me.pd[D(Fe)&on-1];e(Me.jc),256>bt.g?(q(Fe,Fe.u+bt.g),ot[Ke]=bt.value,Fe=0):(q(Fe,Fe.u+bt.g-256),e(256<=bt.value),Fe=bt.value),Fe==0&&(ze=!0)}else Fe=Ee(Me.G[0],Me.H[0],oe);if(oe.h)break;if(ze||256>Fe){if(!ze)if(Me.nd)S[Ae]=(Me.qb|Fe<<8)>>>0;else{if(U(oe),ze=Ee(Me.G[1],Me.H[1],oe),U(oe),ot=Ee(Me.G[2],Me.H[2],oe),Ke=Ee(Me.G[3],Me.H[3],oe),oe.h)break;S[Ae]=(Ke<<24|ze<<16|Fe<<8|ot)>>>0}if(ze=!1,++Ae,++re>=M&&(re=0,++ee,J!=null&&ee<=Y&&!(ee%16)&&J(m,ee),me!=null))for(;je<Ae;)Fe=S[je++],me.X[(506832829*Fe&4294967295)>>>me.Mb]=Fe}else if(280>Fe){if(Fe=ue(Fe-256,oe),ot=Ee(Me.G[4],Me.H[4],oe),U(oe),ot=we(M,ot=ue(ot,oe)),oe.h)break;if(Ae-O<ot||W-Ae<Fe)break e;for(Ke=0;Ke<Fe;++Ke)S[Ae+Ke]=S[Ae+Ke-ot];for(Ae+=Fe,re+=Fe;re>=M;)re-=M,++ee,J!=null&&ee<=Y&&!(ee%16)&&J(m,ee);if(e(Ae<=W),re&be&&(Me=Ue(pe,re,ee)),me!=null)for(;je<Ae;)Fe=S[je++],me.X[(506832829*Fe&4294967295)>>>me.Mb]=Fe}else{if(!(Fe<Be))break e;for(ze=Fe-280,e(me!=null);je<Ae;)Fe=S[je++],me.X[(506832829*Fe&4294967295)>>>me.Mb]=Fe;Fe=Ae,e(!(ze>>>(ot=me).Xa)),S[Fe]=ot.X[ze],ze=!0}ze||e(oe.h==z(oe))}if(m.Pb&&oe.h&&Ae<W)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&_e(m.s.vb,m.s.Wa);else{if(oe.h)break e;J!=null&&J(m,ee>Y?Y:ee),m.a=0,m.$=Ae-O}return 1}return m.a=3,0}function st(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var S=m.Wa;S!=null&&(S.X=null),m.vb=null,e(m!=null)}function mt(){var m=new Wp;return m==null?null:(m.a=0,m.xb=Ov,br("Predictor","VP8LPredictors"),br("Predictor","VP8LPredictors_C"),br("PredictorAdd","VP8LPredictorsAdd"),br("PredictorAdd","VP8LPredictorsAdd_C"),Sd=Ye,Wo=pt,zn=qe,En=Lt,Ja=lt,ba=Dt,xa=wt,P.VP8LMapColor32b=Ws,P.VP8LMapColor8b=Nd,m)}function It(m,S,O,M,W){var Y=1,J=[m],ee=[S],re=M.m,oe=M.s,pe=null,Ae=0;e:for(;;){if(O)for(;Y&&H(re,1);){var je=J,xe=ee,Be=M,Te=1,me=Be.m,be=Be.gc[Be.ab],Me=H(me,2);if(Be.Oc&1<<Me)Y=0;else{switch(Be.Oc|=1<<Me,be.hc=Me,be.Ea=je[0],be.nc=xe[0],be.K=[null],++Be.ab,e(4>=Be.ab),Me){case 0:case 1:be.b=H(me,3)+2,Te=It(ve(be.Ea,be.b),ve(be.nc,be.b),0,Be,be.K),be.K=be.K[0];break;case 3:var ze,Fe=H(me,8)+1,ot=16<Fe?0:4<Fe?1:2<Fe?2:3;if(je[0]=ve(be.Ea,ot),be.b=ot,ze=Te=It(Fe,1,0,Be,be.K)){var Ke,bt=Fe,Xe=be,Xt=1<<(8>>Xe.b),tr=a(Xt);if(tr==null)ze=0;else{var Vt=Xe.K[0],Ut=Xe.w;for(tr[0]=Xe.K[0][0],Ke=1;Ke<1*bt;++Ke)tr[Ke]=de(Vt[Ut+Ke],tr[Ke-1]);for(;Ke<4*Xt;++Ke)tr[Ke]=0;Xe.K[0]=null,Xe.K[0]=tr,ze=1}}Te=ze;break;case 2:break;default:e(0)}Y=Te}}if(J=J[0],ee=ee[0],Y&&H(re,1)&&!(Y=1<=(Ae=H(re,4))&&11>=Ae)){M.a=3;break e}var lr;if(lr=Y)t:{var or,Ct,qr,qn=M,$r=J,$n=ee,rr=Ae,ti=O,ri=qn.m,en=qn.s,sn=[null],jn=1,xi=0,ia=R3[rr];r:for(;;){if(ti&&H(ri,1)){var tn=H(ri,3)+2,Na=ve($r,tn),Jo=ve($n,tn),Js=Na*Jo;if(!It(Na,Jo,0,qn,sn))break r;for(sn=sn[0],en.xc=tn,or=0;or<Js;++or){var to=sn[or]>>8&65535;sn[or]=to,to>=jn&&(jn=to+1)}}if(ri.h)break r;for(Ct=0;5>Ct;++Ct){var Pr=Av[Ct];!Ct&&0<rr&&(Pr+=1<<rr),xi<Pr&&(xi=Pr)}var t0=o(jn*ia,j),Mv=jn,Fv=o(Mv,R);if(Fv==null)var Md=null;else e(65536>=Mv),Md=Fv;var Mu=a(xi);if(Md==null||Mu==null||t0==null){qn.a=1;break r}var Fd=t0;for(or=qr=0;or<jn;++or){var Di=Md[or],Xs=Di.G,Qs=Di.H,Bv=0,Bd=1,Uv=0;for(Ct=0;5>Ct;++Ct){Pr=Av[Ct],Xs[Ct]=Fd,Qs[Ct]=qr,!Ct&&0<rr&&(Pr+=1<<rr);i:{var Ud,r0=Pr,zd=qn,Fu=Mu,tS=Fd,rS=qr,n0=0,ro=zd.m,nS=H(ro,1);if(i(Fu,0,0,r0),nS){var iS=H(ro,1)+1,aS=H(ro,1),zv=H(ro,aS==0?1:8);Fu[zv]=1,iS==2&&(Fu[zv=H(ro,8)]=1);var qd=1}else{var qv=a(19),$v=H(ro,4)+4;if(19<$v){zd.a=3;var $d=0;break i}for(Ud=0;Ud<$v;++Ud)qv[T3[Ud]]=H(ro,3);var i0=void 0,Bu=void 0,Hv=zd,oS=qv,Hd=r0,Wv=Fu,a0=0,no=Hv.m,Vv=8,Gv=o(128,j);n:for(;k(Gv,0,7,oS,19);){if(H(no,1)){var sS=2+2*H(no,3);if((i0=2+H(no,sS))>Hd)break n}else i0=Hd;for(Bu=0;Bu<Hd&&i0--;){U(no);var Kv=Gv[0+(127&D(no))];q(no,no.u+Kv.g);var Zs=Kv.value;if(16>Zs)Wv[Bu++]=Zs,Zs!=0&&(Vv=Zs);else{var lS=Zs==16,Yv=Zs-16,uS=L3[Yv],Jv=H(no,O3[Yv])+uS;if(Bu+Jv>Hd)break n;for(var cS=lS?Vv:0;0<Jv--;)Wv[Bu++]=cS}}a0=1;break n}a0||(Hv.a=3),qd=a0}(qd=qd&&!ro.h)&&(n0=k(tS,rS,8,Fu,r0)),qd&&n0!=0?$d=n0:(zd.a=3,$d=0)}if($d==0)break r;if(Bd&&P3[Ct]==1&&(Bd=Fd[qr].g==0),Bv+=Fd[qr].g,qr+=$d,3>=Ct){var Uu,o0=Mu[0];for(Uu=1;Uu<Pr;++Uu)Mu[Uu]>o0&&(o0=Mu[Uu]);Uv+=o0}}if(Di.nd=Bd,Di.Qb=0,Bd&&(Di.qb=(Xs[3][Qs[3]+0].value<<24|Xs[1][Qs[1]+0].value<<16|Xs[2][Qs[2]+0].value)>>>0,Bv==0&&256>Xs[0][Qs[0]+0].value&&(Di.Qb=1,Di.qb+=Xs[0][Qs[0]+0].value<<8)),Di.jc=!Di.Qb&&6>Uv,Di.jc){var Wd,Ea=Di;for(Wd=0;Wd<on;++Wd){var io=Wd,ao=Ea.pd[io],Vd=Ea.G[0][Ea.H[0]+io];256<=Vd.value?(ao.g=Vd.g+256,ao.value=Vd.value):(ao.g=0,ao.value=0,io>>=Ie(Vd,8,ao),io>>=Ie(Ea.G[1][Ea.H[1]+io],16,ao),io>>=Ie(Ea.G[2][Ea.H[2]+io],0,ao),Ie(Ea.G[3][Ea.H[3]+io],24,ao))}}}en.vc=sn,en.Wb=jn,en.Ya=Md,en.yc=t0,lr=1;break t}lr=0}if(!(Y=lr)){M.a=3;break e}if(0<Ae){if(oe.ua=1<<Ae,!He(oe.Wa,Ae)){M.a=1,Y=0;break e}}else oe.ua=0;var s0=M,Xv=J,dS=ee,l0=s0.s,u0=l0.xc;if(s0.c=Xv,s0.i=dS,l0.md=ve(Xv,u0),l0.wc=u0==0?-1:(1<<u0)-1,O){M.xb=q3;break e}if((pe=a(J*ee))==null){M.a=1,Y=0;break e}Y=(Y=ht(M,pe,0,J,ee,ee,null))&&!re.h;break e}return Y?(W!=null?W[0]=pe:(e(pe==null),e(O)),M.$=0,O||st(oe)):st(oe),Y}function Zt(m,S){var O=m.c*m.i,M=O+S+16*S;return e(m.c<=S),m.V=a(M),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+O+S,1)}function Ge(m,S){var O=m.C,M=S-O,W=m.V,Y=m.Ba+m.c*O;for(e(S<=m.l.o);0<M;){var J=16<M?16:M,ee=m.l.ma,re=m.l.width,oe=re*J,pe=ee.ca,Ae=ee.tb+re*O,je=m.Ta,xe=m.Ua;et(m,J,W,Y),Ir(je,xe,pe,Ae,oe),it(ee,O,O+J,pe,Ae,re),M-=J,W+=J*m.c,O+=J}e(O==S),m.C=m.Ma=S}function ce(){this.ub=this.yd=this.td=this.Rb=0}function De(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Je(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function qt(){this.Yb=function(){var m=[];return function S(O,M,W){for(var Y=W[M],J=0;J<Y&&(O.push(W.length>M+1?[]:0),!(W.length<M+1));J++)S(O[J],M+1,W)}(m,0,[3,11]),m}()}function er(){this.jb=a(3),this.Wc=s([4,8],qt),this.Xc=s([4,17],qt)}function $t(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function mr(){this.ld=this.La=this.dd=this.tc=0}function Ur(){this.Na=this.la=0}function Qr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Fn(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function cr(){this.uc=this.M=this.Nb=0,this.wa=Array(new mr),this.Y=0,this.ya=Array(new Fn),this.aa=0,this.l=new Qn}function Rt(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Sr(){this.cb=this.a=0,this.sc="",this.m=new B,this.Od=new ce,this.Kc=new De,this.ed=new $t,this.Qa=new Je,this.Ic=this.$c=this.Aa=0,this.D=new cr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,B),this.ia=0,this.pb=o(4,Qr),this.Pa=new er,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Rt),this.Hd=0,this.rb=Array(new Ur),this.sb=0,this.wa=Array(new mr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Fn),this.L=this.aa=0,this.gd=s([4,2],mr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Pi(){var m=new Sr;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,Iu||(Iu=Ps)),m}function At(m,S,O){return m.a==0&&(m.a=S,m.sc=O,m.cb=0),0}function va(m,S,O){return 3<=O&&m[S+0]==157&&m[S+1]==1&&m[S+2]==42}function Uo(m,S){if(m==null)return 0;if(m.a=0,m.sc="OK",S==null)return At(m,2,"null VP8Io passed to VP8GetHeaders()");var O=S.data,M=S.w,W=S.ha;if(4>W)return At(m,7,"Truncated header.");var Y=O[M+0]|O[M+1]<<8|O[M+2]<<16,J=m.Od;if(J.Rb=!(1&Y),J.td=Y>>1&7,J.yd=Y>>4&1,J.ub=Y>>5,3<J.td)return At(m,3,"Incorrect keyframe parameters.");if(!J.yd)return At(m,4,"Frame not displayable.");M+=3,W-=3;var ee=m.Kc;if(J.Rb){if(7>W)return At(m,7,"cannot parse picture header");if(!va(O,M,W))return At(m,3,"Bad code word");ee.c=16383&(O[M+4]<<8|O[M+3]),ee.Td=O[M+4]>>6,ee.i=16383&(O[M+6]<<8|O[M+5]),ee.Ud=O[M+6]>>6,M+=7,W-=7,m.za=ee.c+15>>4,m.Ub=ee.i+15>>4,S.width=ee.c,S.height=ee.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,i((Y=m.Pa).jb,0,255,Y.jb.length),e((Y=m.Qa)!=null),Y.Cb=0,Y.Bb=0,Y.Fb=1,i(Y.Zb,0,0,Y.Zb.length),i(Y.Lb,0,0,Y.Lb)}if(J.ub>W)return At(m,7,"bad partition length");$(Y=m.m,O,M,J.ub),M+=J.ub,W-=J.ub,J.Rb&&(ee.Ld=ne(Y),ee.Kd=ne(Y)),ee=m.Qa;var re,oe=m.Pa;if(e(Y!=null),e(ee!=null),ee.Cb=ne(Y),ee.Cb){if(ee.Bb=ne(Y),ne(Y)){for(ee.Fb=ne(Y),re=0;4>re;++re)ee.Zb[re]=ne(Y)?Q(Y,7):0;for(re=0;4>re;++re)ee.Lb[re]=ne(Y)?Q(Y,6):0}if(ee.Bb)for(re=0;3>re;++re)oe.jb[re]=ne(Y)?Z(Y,8):255}else ee.Bb=0;if(Y.Ka)return At(m,3,"cannot parse segment header");if((ee=m.ed).zd=ne(Y),ee.Tb=Z(Y,6),ee.wb=Z(Y,3),ee.Pc=ne(Y),ee.Pc&&ne(Y)){for(oe=0;4>oe;++oe)ne(Y)&&(ee.vd[oe]=Q(Y,6));for(oe=0;4>oe;++oe)ne(Y)&&(ee.od[oe]=Q(Y,6))}if(m.L=ee.Tb==0?0:ee.zd?1:2,Y.Ka)return At(m,3,"cannot parse filter header");var pe=W;if(W=re=M,M=re+pe,ee=pe,m.Xb=(1<<Z(m.m,2))-1,pe<3*(oe=m.Xb))O=7;else{for(re+=3*oe,ee-=3*oe,pe=0;pe<oe;++pe){var Ae=O[W+0]|O[W+1]<<8|O[W+2]<<16;Ae>ee&&(Ae=ee),$(m.Jc[+pe],O,re,Ae),re+=Ae,ee-=Ae,W+=3}$(m.Jc[+oe],O,re,ee),O=re<M?0:5}if(O!=0)return At(m,O,"cannot parse partitions");for(O=Z(re=m.m,7),W=ne(re)?Q(re,4):0,M=ne(re)?Q(re,4):0,ee=ne(re)?Q(re,4):0,oe=ne(re)?Q(re,4):0,re=ne(re)?Q(re,4):0,pe=m.Qa,Ae=0;4>Ae;++Ae){if(pe.Cb){var je=pe.Zb[Ae];pe.Fb||(je+=O)}else{if(0<Ae){m.pb[Ae]=m.pb[0];continue}je=O}var xe=m.pb[Ae];xe.Sc[0]=Qp[Zn(je+W,127)],xe.Sc[1]=Zp[Zn(je+0,127)],xe.Eb[0]=2*Qp[Zn(je+M,127)],xe.Eb[1]=101581*Zp[Zn(je+ee,127)]>>16,8>xe.Eb[1]&&(xe.Eb[1]=8),xe.Qc[0]=Qp[Zn(je+oe,117)],xe.Qc[1]=Zp[Zn(je+re,127)],xe.lc=je+re}if(!J.Rb)return At(m,4,"Not a key frame.");for(ne(Y),J=m.Pa,O=0;4>O;++O){for(W=0;8>W;++W)for(M=0;3>M;++M)for(ee=0;11>ee;++ee)oe=ie(Y,U3[O][W][M][ee])?Z(Y,8):F3[O][W][M][ee],J.Wc[O][W].Yb[M][ee]=oe;for(W=0;17>W;++W)J.Xc[O][W]=J.Wc[O][z3[W]]}return m.kc=ne(Y),m.kc&&(m.Bd=Z(Y,8)),m.cb=1}function Ps(m,S,O,M,W,Y,J){var ee=S[W].Yb[O];for(O=0;16>W;++W){if(!ie(m,ee[O+0]))return W;for(;!ie(m,ee[O+1]);)if(ee=S[++W].Yb[0],O=0,W==16)return 16;var re=S[W+1].Yb;if(ie(m,ee[O+2])){var oe=m,pe=0;if(ie(oe,(je=ee)[(Ae=O)+3]))if(ie(oe,je[Ae+6])){for(ee=0,Ae=2*(pe=ie(oe,je[Ae+8]))+(je=ie(oe,je[Ae+9+pe])),pe=0,je=D3[Ae];je[ee];++ee)pe+=pe+ie(oe,je[ee]);pe+=3+(8<<Ae)}else ie(oe,je[Ae+7])?(pe=7+2*ie(oe,165),pe+=ie(oe,145)):pe=5+ie(oe,159);else pe=ie(oe,je[Ae+4])?3+ie(oe,je[Ae+5]):2;ee=re[2]}else pe=1,ee=re[1];re=J+M3[W],0>(oe=m).b&&K(oe);var Ae,je=oe.b,xe=(Ae=oe.Ca>>1)-(oe.I>>je)>>31;--oe.b,oe.Ca+=xe,oe.Ca|=1,oe.I-=(Ae+1&xe)<<je,Y[re]=((pe^xe)-xe)*M[(0<W)+0]}return 16}function fu(m){var S=m.rb[m.sb-1];S.la=0,S.Na=0,i(m.zc,0,0,m.zc.length),m.ja=0}function jp(m,S){if(m==null)return 0;if(S==null)return At(m,2,"NULL VP8Io parameter in VP8Decode().");if(!m.cb&&!Uo(m,S))return 0;if(e(m.cb),S.ac==null||S.ac(S)){S.ob&&(m.L=0);var O=Dd[m.L];if(m.L==2?(m.yb=0,m.zb=0):(m.yb=S.v-O>>4,m.zb=S.j-O>>4,0>m.yb&&(m.yb=0),0>m.zb&&(m.zb=0)),m.Va=S.o+15+O>>4,m.Hb=S.va+15+O>>4,m.Hb>m.za&&(m.Hb=m.za),m.Va>m.Ub&&(m.Va=m.Ub),0<m.L){var M=m.ed;for(O=0;4>O;++O){var W;if(m.Qa.Cb){var Y=m.Qa.Lb[O];m.Qa.Fb||(Y+=M.Tb)}else Y=M.Tb;for(W=0;1>=W;++W){var J=m.gd[O][W],ee=Y;if(M.Pc&&(ee+=M.vd[0],W&&(ee+=M.od[0])),0<(ee=0>ee?0:63<ee?63:ee)){var re=ee;0<M.wb&&(re=4<M.wb?re>>2:re>>1)>9-M.wb&&(re=9-M.wb),1>re&&(re=1),J.dd=re,J.tc=2*ee+re,J.ld=40<=ee?2:15<=ee?1:0}else J.tc=0;J.La=W}}}O=0}else At(m,6,"Frame setup failed"),O=m.a;if(O=O==0){if(O){m.$c=0,0<m.Aa||(m.Ic=eS);e:{O=m.Ic,M=4*(re=m.za);var oe=32*re,pe=re+1,Ae=0<m.L?re*(0<m.Aa?2:1):0,je=(m.Aa==2?2:1)*re;if((J=M+832+(W=3*(16*O+Dd[m.L])/2*oe)+(Y=m.Fa!=null&&0<m.Fa.length?m.Kc.c*m.Kc.i:0))!=J)O=0;else{if(J>m.Vb){if(m.Vb=0,m.Ec=a(J),m.Fc=0,m.Ec==null){O=At(m,1,"no memory during frame initialization.");break e}m.Vb=J}J=m.Ec,ee=m.Fc,m.Ac=J,m.Bc=ee,ee+=M,m.Gd=o(oe,Rt),m.Hd=0,m.rb=o(pe+1,Ur),m.sb=1,m.wa=Ae?o(Ae,mr):null,m.Y=0,m.D.Nb=0,m.D.wa=m.wa,m.D.Y=m.Y,0<m.Aa&&(m.D.Y+=re),e(!0),m.oc=J,m.pc=ee,ee+=832,m.ya=o(je,Fn),m.aa=0,m.D.ya=m.ya,m.D.aa=m.aa,m.Aa==2&&(m.D.aa+=re),m.R=16*re,m.B=8*re,re=(oe=Dd[m.L])*m.R,oe=oe/2*m.B,m.sa=J,m.ta=ee+re,m.qa=m.sa,m.ra=m.ta+16*O*m.R+oe,m.Ha=m.qa,m.Ia=m.ra+8*O*m.B+oe,m.$c=0,ee+=W,m.mb=Y?J:null,m.nb=Y?ee:null,e(ee+Y<=m.Fc+m.Vb),fu(m),i(m.Ac,m.Bc,0,M),O=1}}if(O){if(S.ka=0,S.y=m.sa,S.O=m.ta,S.f=m.qa,S.N=m.ra,S.ea=m.Ha,S.Vd=m.Ia,S.fa=m.R,S.Rc=m.B,S.F=null,S.J=0,!Ad){for(O=-255;255>=O;++O)Gr[255+O]=0>O?-O:O;for(O=-1020;1020>=O;++O)Sa[1020+O]=-128>O?-128:127<O?127:O;for(O=-112;112>=O;++O)Ru[112+O]=-16>O?-16:15<O?15:O;for(O=-255;510>=O;++O)Ys[255+O]=0>O?0:255<O?255:O;Ad=1}Vs=Pp,_a=Op,Pu=cd,An=Lp,gi=dd,Rr=ud,Gs=yu,Ed=$o,Tu=Hp,Vo=wu,Go=$p,Xa=Ms,Ko=bu,Ks=bd,Yo=wd,Qa=ra,Cu=wa,vi=qp,Ii[0]=ta,Ii[1]=Tp,Ii[2]=Dp,Ii[3]=Mp,Ii[4]=pd,Ii[5]=Is,Ii[6]=md,Ii[7]=mu,Ii[8]=Bp,Ii[9]=Fp,Za[0]=fd,Za[1]=Rp,Za[2]=ya,Za[3]=Cs,Za[4]=hn,Za[5]=Ip,Za[6]=hd,ka[0]=Va,ka[1]=Cp,ka[2]=Up,ka[3]=gu,ka[4]=qo,ka[5]=zp,ka[6]=vu,O=1}else O=0}O&&(O=function(xe,Be){for(xe.M=0;xe.M<xe.Va;++xe.M){var Te,me=xe.Jc[xe.M&xe.Xb],be=xe.m,Me=xe;for(Te=0;Te<Me.za;++Te){var ze=be,Fe=Me,ot=Fe.Ac,Ke=Fe.Bc+4*Te,bt=Fe.zc,Xe=Fe.ya[Fe.aa+Te];if(Fe.Qa.Bb?Xe.$b=ie(ze,Fe.Pa.jb[0])?2+ie(ze,Fe.Pa.jb[2]):ie(ze,Fe.Pa.jb[1]):Xe.$b=0,Fe.kc&&(Xe.Ad=ie(ze,Fe.Bd)),Xe.Za=!ie(ze,145)+0,Xe.Za){var Xt=Xe.Ob,tr=0;for(Fe=0;4>Fe;++Fe){var Vt,Ut=bt[0+Fe];for(Vt=0;4>Vt;++Vt){Ut=B3[ot[Ke+Vt]][Ut];for(var lr=jv[ie(ze,Ut[0])];0<lr;)lr=jv[2*lr+ie(ze,Ut[lr])];Ut=-lr,ot[Ke+Vt]=Ut}n(Xt,tr,ot,Ke,4),tr+=4,bt[0+Fe]=Ut}}else Ut=ie(ze,156)?ie(ze,128)?1:3:ie(ze,163)?2:0,Xe.Ob[0]=Ut,i(ot,Ke,Ut,4),i(bt,0,Ut,4);Xe.Dd=ie(ze,142)?ie(ze,114)?ie(ze,183)?1:3:2:0}if(Me.m.Ka)return At(xe,7,"Premature end-of-partition0 encountered.");for(;xe.ja<xe.za;++xe.ja){if(Me=me,ze=(be=xe).rb[be.sb-1],ot=be.rb[be.sb+be.ja],Te=be.ya[be.aa+be.ja],Ke=be.kc?Te.Ad:0)ze.la=ot.la=0,Te.Za||(ze.Na=ot.Na=0),Te.Hc=0,Te.Gc=0,Te.ia=0;else{var or,Ct;if(ze=ot,ot=Me,Ke=be.Pa.Xc,bt=be.ya[be.aa+be.ja],Xe=be.pb[bt.$b],Fe=bt.ad,Xt=0,tr=be.rb[be.sb-1],Ut=Vt=0,i(Fe,Xt,0,384),bt.Za)var qr=0,qn=Ke[3];else{lr=a(16);var $r=ze.Na+tr.Na;if($r=Iu(ot,Ke[1],$r,Xe.Eb,0,lr,0),ze.Na=tr.Na=(0<$r)+0,1<$r)Vs(lr,0,Fe,Xt);else{var $n=lr[0]+3>>3;for(lr=0;256>lr;lr+=16)Fe[Xt+lr]=$n}qr=1,qn=Ke[0]}var rr=15&ze.la,ti=15&tr.la;for(lr=0;4>lr;++lr){var ri=1&ti;for($n=Ct=0;4>$n;++$n)rr=rr>>1|(ri=($r=Iu(ot,qn,$r=ri+(1&rr),Xe.Sc,qr,Fe,Xt))>qr)<<7,Ct=Ct<<2|(3<$r?3:1<$r?2:Fe[Xt+0]!=0),Xt+=16;rr>>=4,ti=ti>>1|ri<<7,Vt=(Vt<<8|Ct)>>>0}for(qn=rr,qr=ti>>4,or=0;4>or;or+=2){for(Ct=0,rr=ze.la>>4+or,ti=tr.la>>4+or,lr=0;2>lr;++lr){for(ri=1&ti,$n=0;2>$n;++$n)$r=ri+(1&rr),rr=rr>>1|(ri=0<($r=Iu(ot,Ke[2],$r,Xe.Qc,0,Fe,Xt)))<<3,Ct=Ct<<2|(3<$r?3:1<$r?2:Fe[Xt+0]!=0),Xt+=16;rr>>=2,ti=ti>>1|ri<<5}Ut|=Ct<<4*or,qn|=rr<<4<<or,qr|=(240&ti)<<or}ze.la=qn,tr.la=qr,bt.Hc=Vt,bt.Gc=Ut,bt.ia=43690&Ut?0:Xe.ia,Ke=!(Vt|Ut)}if(0<be.L&&(be.wa[be.Y+be.ja]=be.gd[Te.$b][Te.Za],be.wa[be.Y+be.ja].La|=!Ke),Me.Ka)return At(xe,7,"Premature end-of-file encountered.")}if(fu(xe),be=Be,Me=1,Te=(me=xe).D,ze=0<me.L&&me.M>=me.zb&&me.M<=me.Va,me.Aa==0)e:{if(Te.M=me.M,Te.uc=ze,Eu(me,Te),Me=1,Te=(Ct=me.D).Nb,ze=(Ut=Dd[me.L])*me.R,ot=Ut/2*me.B,lr=16*Te*me.R,$n=8*Te*me.B,Ke=me.sa,bt=me.ta-ze+lr,Xe=me.qa,Fe=me.ra-ot+$n,Xt=me.Ha,tr=me.Ia-ot+$n,ti=(rr=Ct.M)==0,Vt=rr>=me.Va-1,me.Aa==2&&Eu(me,Ct),Ct.uc)for(ri=($r=me).D.M,e($r.D.uc),Ct=$r.yb;Ct<$r.Hb;++Ct){qr=Ct,qn=ri;var en=(sn=(Pr=$r).D).Nb;or=Pr.R;var sn=sn.wa[sn.Y+qr],jn=Pr.sa,xi=Pr.ta+16*en*or+16*qr,ia=sn.dd,tn=sn.tc;if(tn!=0)if(e(3<=tn),Pr.L==1)0<qr&&Qa(jn,xi,or,tn+4),sn.La&&vi(jn,xi,or,tn),0<qn&&Yo(jn,xi,or,tn+4),sn.La&&Cu(jn,xi,or,tn);else{var Na=Pr.B,Jo=Pr.qa,Js=Pr.ra+8*en*Na+8*qr,to=Pr.Ha,Pr=Pr.Ia+8*en*Na+8*qr;en=sn.ld,0<qr&&(Ed(jn,xi,or,tn+4,ia,en),Vo(Jo,Js,to,Pr,Na,tn+4,ia,en)),sn.La&&(Xa(jn,xi,or,tn,ia,en),Ks(Jo,Js,to,Pr,Na,tn,ia,en)),0<qn&&(Gs(jn,xi,or,tn+4,ia,en),Tu(Jo,Js,to,Pr,Na,tn+4,ia,en)),sn.La&&(Go(jn,xi,or,tn,ia,en),Ko(Jo,Js,to,Pr,Na,tn,ia,en))}}if(me.ia&&alert("todo:DitherRow"),be.put!=null){if(Ct=16*rr,rr=16*(rr+1),ti?(be.y=me.sa,be.O=me.ta+lr,be.f=me.qa,be.N=me.ra+$n,be.ea=me.Ha,be.W=me.Ia+$n):(Ct-=Ut,be.y=Ke,be.O=bt,be.f=Xe,be.N=Fe,be.ea=Xt,be.W=tr),Vt||(rr-=Ut),rr>be.o&&(rr=be.o),be.F=null,be.J=null,me.Fa!=null&&0<me.Fa.length&&Ct<rr&&(be.J=ku(me,be,Ct,rr-Ct),be.F=me.mb,be.F==null&&be.F.length==0)){Me=At(me,3,"Could not decode alpha data.");break e}Ct<be.j&&(Ut=be.j-Ct,Ct=be.j,e(!(1&Ut)),be.O+=me.R*Ut,be.N+=me.B*(Ut>>1),be.W+=me.B*(Ut>>1),be.F!=null&&(be.J+=be.width*Ut)),Ct<rr&&(be.O+=be.v,be.N+=be.v>>1,be.W+=be.v>>1,be.F!=null&&(be.J+=be.v),be.ka=Ct-be.j,be.U=be.va-be.v,be.T=rr-Ct,Me=be.put(be))}Te+1!=me.Ic||Vt||(n(me.sa,me.ta-ze,Ke,bt+16*me.R,ze),n(me.qa,me.ra-ot,Xe,Fe+8*me.B,ot),n(me.Ha,me.Ia-ot,Xt,tr+8*me.B,ot))}if(!Me)return At(xe,6,"Output aborted.")}return 1}(m,S)),S.bc!=null&&S.bc(S),O&=1}return O?(m.cb=0,O):0}function Ti(m,S,O,M,W){W=m[S+O+32*M]+(W>>3),m[S+O+32*M]=-256&W?0>W?0:255:W}function Ts(m,S,O,M,W,Y){Ti(m,S,0,O,M+W),Ti(m,S,1,O,M+Y),Ti(m,S,2,O,M-Y),Ti(m,S,3,O,M-W)}function Bn(m){return(20091*m>>16)+m}function hu(m,S,O,M){var W,Y=0,J=a(16);for(W=0;4>W;++W){var ee=m[S+0]+m[S+8],re=m[S+0]-m[S+8],oe=(35468*m[S+4]>>16)-Bn(m[S+12]),pe=Bn(m[S+4])+(35468*m[S+12]>>16);J[Y+0]=ee+pe,J[Y+1]=re+oe,J[Y+2]=re-oe,J[Y+3]=ee-pe,Y+=4,S++}for(W=Y=0;4>W;++W)ee=(m=J[Y+0]+4)+J[Y+8],re=m-J[Y+8],oe=(35468*J[Y+4]>>16)-Bn(J[Y+12]),Ti(O,M,0,0,ee+(pe=Bn(J[Y+4])+(35468*J[Y+12]>>16))),Ti(O,M,1,0,re+oe),Ti(O,M,2,0,re-oe),Ti(O,M,3,0,ee-pe),Y++,M+=32}function ud(m,S,O,M){var W=m[S+0]+4,Y=35468*m[S+4]>>16,J=Bn(m[S+4]),ee=35468*m[S+1]>>16;Ts(O,M,0,W+J,m=Bn(m[S+1]),ee),Ts(O,M,1,W+Y,m,ee),Ts(O,M,2,W-Y,m,ee),Ts(O,M,3,W-J,m,ee)}function Op(m,S,O,M,W){hu(m,S,O,M),W&&hu(m,S+16,O,M+4)}function cd(m,S,O,M){_a(m,S+0,O,M,1),_a(m,S+32,O,M+128,1)}function Lp(m,S,O,M){var W;for(m=m[S+0]+4,W=0;4>W;++W)for(S=0;4>S;++S)Ti(O,M,S,W,m)}function dd(m,S,O,M){m[S+0]&&An(m,S+0,O,M),m[S+16]&&An(m,S+16,O,M+4),m[S+32]&&An(m,S+32,O,M+128),m[S+48]&&An(m,S+48,O,M+128+4)}function Pp(m,S,O,M){var W,Y=a(16);for(W=0;4>W;++W){var J=m[S+0+W]+m[S+12+W],ee=m[S+4+W]+m[S+8+W],re=m[S+4+W]-m[S+8+W],oe=m[S+0+W]-m[S+12+W];Y[0+W]=J+ee,Y[8+W]=J-ee,Y[4+W]=oe+re,Y[12+W]=oe-re}for(W=0;4>W;++W)J=(m=Y[0+4*W]+3)+Y[3+4*W],ee=Y[1+4*W]+Y[2+4*W],re=Y[1+4*W]-Y[2+4*W],oe=m-Y[3+4*W],O[M+0]=J+ee>>3,O[M+16]=oe+re>>3,O[M+32]=J-ee>>3,O[M+48]=oe-re>>3,M+=64}function pu(m,S,O){var M,W=S-32,Y=ei,J=255-m[W-1];for(M=0;M<O;++M){var ee,re=Y,oe=J+m[S-1];for(ee=0;ee<O;++ee)m[S+ee]=re[oe+m[W+ee]];S+=32}}function Tp(m,S){pu(m,S,4)}function Cp(m,S){pu(m,S,8)}function Rp(m,S){pu(m,S,16)}function ya(m,S){var O;for(O=0;16>O;++O)n(m,S+32*O,m,S-32,16)}function Cs(m,S){var O;for(O=16;0<O;--O)i(m,S,m[S-1],16),S+=32}function Rs(m,S,O){var M;for(M=0;16>M;++M)i(S,O+32*M,m,16)}function fd(m,S){var O,M=16;for(O=0;16>O;++O)M+=m[S-1+32*O]+m[S+O-32];Rs(M>>5,m,S)}function hn(m,S){var O,M=8;for(O=0;16>O;++O)M+=m[S-1+32*O];Rs(M>>4,m,S)}function Ip(m,S){var O,M=8;for(O=0;16>O;++O)M+=m[S+O-32];Rs(M>>4,m,S)}function hd(m,S){Rs(128,m,S)}function Et(m,S,O){return m+2*S+O+2>>2}function Dp(m,S){var O,M=S-32;for(M=new Uint8Array([Et(m[M-1],m[M+0],m[M+1]),Et(m[M+0],m[M+1],m[M+2]),Et(m[M+1],m[M+2],m[M+3]),Et(m[M+2],m[M+3],m[M+4])]),O=0;4>O;++O)n(m,S+32*O,M,0,M.length)}function Mp(m,S){var O=m[S-1],M=m[S-1+32],W=m[S-1+64],Y=m[S-1+96];he(m,S+0,16843009*Et(m[S-1-32],O,M)),he(m,S+32,16843009*Et(O,M,W)),he(m,S+64,16843009*Et(M,W,Y)),he(m,S+96,16843009*Et(W,Y,Y))}function ta(m,S){var O,M=4;for(O=0;4>O;++O)M+=m[S+O-32]+m[S-1+32*O];for(M>>=3,O=0;4>O;++O)i(m,S+32*O,M,4)}function pd(m,S){var O=m[S-1+0],M=m[S-1+32],W=m[S-1+64],Y=m[S-1-32],J=m[S+0-32],ee=m[S+1-32],re=m[S+2-32],oe=m[S+3-32];m[S+0+96]=Et(M,W,m[S-1+96]),m[S+1+96]=m[S+0+64]=Et(O,M,W),m[S+2+96]=m[S+1+64]=m[S+0+32]=Et(Y,O,M),m[S+3+96]=m[S+2+64]=m[S+1+32]=m[S+0+0]=Et(J,Y,O),m[S+3+64]=m[S+2+32]=m[S+1+0]=Et(ee,J,Y),m[S+3+32]=m[S+2+0]=Et(re,ee,J),m[S+3+0]=Et(oe,re,ee)}function md(m,S){var O=m[S+1-32],M=m[S+2-32],W=m[S+3-32],Y=m[S+4-32],J=m[S+5-32],ee=m[S+6-32],re=m[S+7-32];m[S+0+0]=Et(m[S+0-32],O,M),m[S+1+0]=m[S+0+32]=Et(O,M,W),m[S+2+0]=m[S+1+32]=m[S+0+64]=Et(M,W,Y),m[S+3+0]=m[S+2+32]=m[S+1+64]=m[S+0+96]=Et(W,Y,J),m[S+3+32]=m[S+2+64]=m[S+1+96]=Et(Y,J,ee),m[S+3+64]=m[S+2+96]=Et(J,ee,re),m[S+3+96]=Et(ee,re,re)}function Is(m,S){var O=m[S-1+0],M=m[S-1+32],W=m[S-1+64],Y=m[S-1-32],J=m[S+0-32],ee=m[S+1-32],re=m[S+2-32],oe=m[S+3-32];m[S+0+0]=m[S+1+64]=Y+J+1>>1,m[S+1+0]=m[S+2+64]=J+ee+1>>1,m[S+2+0]=m[S+3+64]=ee+re+1>>1,m[S+3+0]=re+oe+1>>1,m[S+0+96]=Et(W,M,O),m[S+0+64]=Et(M,O,Y),m[S+0+32]=m[S+1+96]=Et(O,Y,J),m[S+1+32]=m[S+2+96]=Et(Y,J,ee),m[S+2+32]=m[S+3+96]=Et(J,ee,re),m[S+3+32]=Et(ee,re,oe)}function mu(m,S){var O=m[S+0-32],M=m[S+1-32],W=m[S+2-32],Y=m[S+3-32],J=m[S+4-32],ee=m[S+5-32],re=m[S+6-32],oe=m[S+7-32];m[S+0+0]=O+M+1>>1,m[S+1+0]=m[S+0+64]=M+W+1>>1,m[S+2+0]=m[S+1+64]=W+Y+1>>1,m[S+3+0]=m[S+2+64]=Y+J+1>>1,m[S+0+32]=Et(O,M,W),m[S+1+32]=m[S+0+96]=Et(M,W,Y),m[S+2+32]=m[S+1+96]=Et(W,Y,J),m[S+3+32]=m[S+2+96]=Et(Y,J,ee),m[S+3+64]=Et(J,ee,re),m[S+3+96]=Et(ee,re,oe)}function Fp(m,S){var O=m[S-1+0],M=m[S-1+32],W=m[S-1+64],Y=m[S-1+96];m[S+0+0]=O+M+1>>1,m[S+2+0]=m[S+0+32]=M+W+1>>1,m[S+2+32]=m[S+0+64]=W+Y+1>>1,m[S+1+0]=Et(O,M,W),m[S+3+0]=m[S+1+32]=Et(M,W,Y),m[S+3+32]=m[S+1+64]=Et(W,Y,Y),m[S+3+64]=m[S+2+64]=m[S+0+96]=m[S+1+96]=m[S+2+96]=m[S+3+96]=Y}function Bp(m,S){var O=m[S-1+0],M=m[S-1+32],W=m[S-1+64],Y=m[S-1+96],J=m[S-1-32],ee=m[S+0-32],re=m[S+1-32],oe=m[S+2-32];m[S+0+0]=m[S+2+32]=O+J+1>>1,m[S+0+32]=m[S+2+64]=M+O+1>>1,m[S+0+64]=m[S+2+96]=W+M+1>>1,m[S+0+96]=Y+W+1>>1,m[S+3+0]=Et(ee,re,oe),m[S+2+0]=Et(J,ee,re),m[S+1+0]=m[S+3+32]=Et(O,J,ee),m[S+1+32]=m[S+3+64]=Et(M,O,J),m[S+1+64]=m[S+3+96]=Et(W,M,O),m[S+1+96]=Et(Y,W,M)}function Up(m,S){var O;for(O=0;8>O;++O)n(m,S+32*O,m,S-32,8)}function gu(m,S){var O;for(O=0;8>O;++O)i(m,S,m[S-1],8),S+=32}function zo(m,S,O){var M;for(M=0;8>M;++M)i(S,O+32*M,m,8)}function Va(m,S){var O,M=8;for(O=0;8>O;++O)M+=m[S+O-32]+m[S-1+32*O];zo(M>>4,m,S)}function zp(m,S){var O,M=4;for(O=0;8>O;++O)M+=m[S+O-32];zo(M>>3,m,S)}function qo(m,S){var O,M=4;for(O=0;8>O;++O)M+=m[S-1+32*O];zo(M>>3,m,S)}function vu(m,S){zo(128,m,S)}function Ds(m,S,O){var M=m[S-O],W=m[S+0],Y=3*(W-M)+Gp[1020+m[S-2*O]-m[S+O]],J=jd[112+(Y+4>>3)];m[S-O]=ei[255+M+jd[112+(Y+3>>3)]],m[S+0]=ei[255+W-J]}function gd(m,S,O,M){var W=m[S+0],Y=m[S+O];return wi[255+m[S-2*O]-m[S-O]]>M||wi[255+Y-W]>M}function vd(m,S,O,M){return 4*wi[255+m[S-O]-m[S+0]]+wi[255+m[S-2*O]-m[S+O]]<=M}function yd(m,S,O,M,W){var Y=m[S-3*O],J=m[S-2*O],ee=m[S-O],re=m[S+0],oe=m[S+O],pe=m[S+2*O],Ae=m[S+3*O];return 4*wi[255+ee-re]+wi[255+J-oe]>M?0:wi[255+m[S-4*O]-Y]<=W&&wi[255+Y-J]<=W&&wi[255+J-ee]<=W&&wi[255+Ae-pe]<=W&&wi[255+pe-oe]<=W&&wi[255+oe-re]<=W}function wd(m,S,O,M){var W=2*M+1;for(M=0;16>M;++M)vd(m,S+M,O,W)&&Ds(m,S+M,O)}function ra(m,S,O,M){var W=2*M+1;for(M=0;16>M;++M)vd(m,S+M*O,1,W)&&Ds(m,S+M*O,1)}function wa(m,S,O,M){var W;for(W=3;0<W;--W)wd(m,S+=4*O,O,M)}function qp(m,S,O,M){var W;for(W=3;0<W;--W)ra(m,S+=4,O,M)}function Ga(m,S,O,M,W,Y,J,ee){for(Y=2*Y+1;0<W--;){if(yd(m,S,O,Y,J))if(gd(m,S,O,ee))Ds(m,S,O);else{var re=m,oe=S,pe=O,Ae=re[oe-2*pe],je=re[oe-pe],xe=re[oe+0],Be=re[oe+pe],Te=re[oe+2*pe],me=27*(Me=Gp[1020+3*(xe-je)+Gp[1020+Ae-Be]])+63>>7,be=18*Me+63>>7,Me=9*Me+63>>7;re[oe-3*pe]=ei[255+re[oe-3*pe]+Me],re[oe-2*pe]=ei[255+Ae+be],re[oe-pe]=ei[255+je+me],re[oe+0]=ei[255+xe-me],re[oe+pe]=ei[255+Be-be],re[oe+2*pe]=ei[255+Te-Me]}S+=M}}function Ci(m,S,O,M,W,Y,J,ee){for(Y=2*Y+1;0<W--;){if(yd(m,S,O,Y,J))if(gd(m,S,O,ee))Ds(m,S,O);else{var re=m,oe=S,pe=O,Ae=re[oe-pe],je=re[oe+0],xe=re[oe+pe],Be=jd[112+((Te=3*(je-Ae))+4>>3)],Te=jd[112+(Te+3>>3)],me=Be+1>>1;re[oe-2*pe]=ei[255+re[oe-2*pe]+me],re[oe-pe]=ei[255+Ae+Te],re[oe+0]=ei[255+je-Be],re[oe+pe]=ei[255+xe-me]}S+=M}}function yu(m,S,O,M,W,Y){Ga(m,S,O,1,16,M,W,Y)}function $o(m,S,O,M,W,Y){Ga(m,S,1,O,16,M,W,Y)}function $p(m,S,O,M,W,Y){var J;for(J=3;0<J;--J)Ci(m,S+=4*O,O,1,16,M,W,Y)}function Ms(m,S,O,M,W,Y){var J;for(J=3;0<J;--J)Ci(m,S+=4,1,O,16,M,W,Y)}function Hp(m,S,O,M,W,Y,J,ee){Ga(m,S,W,1,8,Y,J,ee),Ga(O,M,W,1,8,Y,J,ee)}function wu(m,S,O,M,W,Y,J,ee){Ga(m,S,1,W,8,Y,J,ee),Ga(O,M,1,W,8,Y,J,ee)}function bu(m,S,O,M,W,Y,J,ee){Ci(m,S+4*W,W,1,8,Y,J,ee),Ci(O,M+4*W,W,1,8,Y,J,ee)}function bd(m,S,O,M,W,Y,J,ee){Ci(m,S+4,1,W,8,Y,J,ee),Ci(O,M+4,1,W,8,Y,J,ee)}function Fs(){this.ba=new _r,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Yt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function xu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function _u(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xd(){this.ua=0,this.Wa=new se,this.vb=new se,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new R,this.yc=new j}function Wp(){this.xb=this.a=0,this.l=new Qn,this.ca=new _r,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xd,this.ab=0,this.gc=o(4,_u),this.Oc=0}function Bs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ho(m,S,O,M,W,Y,J){for(m=m==null?0:m[S+0],S=0;S<J;++S)W[Y+S]=m+O[M+S]&255,m=W[Y+S]}function Su(m,S,O,M,W,Y,J){var ee;if(m==null)Ho(null,null,O,M,W,Y,J);else for(ee=0;ee<J;++ee)W[Y+ee]=m[S+ee]+O[M+ee]&255}function Ka(m,S,O,M,W,Y,J){if(m==null)Ho(null,null,O,M,W,Y,J);else{var ee,re=m[S+0],oe=re,pe=re;for(ee=0;ee<J;++ee)oe=pe+(re=m[S+ee])-oe,pe=O[M+ee]+(-256&oe?0>oe?0:255:oe)&255,oe=re,W[Y+ee]=pe}}function ku(m,S,O,M){var W=S.width,Y=S.o;if(e(m!=null&&S!=null),0>O||0>=M||O+M>Y)return null;if(!m.Cc){if(m.ga==null){var J;if(m.ga=new Bs,(J=m.ga==null)||(J=S.width*S.o,e(m.Gb.length==0),m.Gb=a(J),m.Uc=0,m.Gb==null?J=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,J=1),J=!J),!J){J=m.ga;var ee=m.Fa,re=m.P,oe=m.qc,pe=m.mb,Ae=m.nb,je=re+1,xe=oe-1,Be=J.l;if(e(ee!=null&&pe!=null&&S!=null),eo[0]=null,eo[1]=Ho,eo[2]=Su,eo[3]=Ka,J.ca=pe,J.tb=Ae,J.c=S.width,J.i=S.height,e(0<J.c&&0<J.i),1>=oe)S=0;else if(J.$a=ee[re+0]>>0&3,J.Z=ee[re+0]>>2&3,J.Lc=ee[re+0]>>4&3,re=ee[re+0]>>6&3,0>J.$a||1<J.$a||4<=J.Z||1<J.Lc||re)S=0;else if(Be.put=kn,Be.ac=Qt,Be.bc=Nn,Be.ma=J,Be.width=S.width,Be.height=S.height,Be.Da=S.Da,Be.v=S.v,Be.va=S.va,Be.j=S.j,Be.o=S.o,J.$a)e:{e(J.$a==1),S=mt();t:for(;;){if(S==null){S=0;break e}if(e(J!=null),J.mc=S,S.c=J.c,S.i=J.i,S.l=J.l,S.l.ma=J,S.l.width=J.c,S.l.height=J.i,S.a=0,X(S.m,ee,je,xe),!It(J.c,J.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&tt(S.s)?(J.ic=1,ee=S.c*S.i,S.Ta=null,S.Ua=0,S.V=a(ee),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(J.ic=0,S=Zt(S,J.c)),!S))break t;S=1;break e}J.mc=null,S=0}else S=xe>=J.c*J.i;J=!S}if(J)return null;m.ga.Lc!=1?m.Ga=0:M=Y-O}e(m.ga!=null),e(O+M<=Y);e:{if(S=(ee=m.ga).c,Y=ee.l.o,ee.$a==0){if(je=m.rc,xe=m.Vc,Be=m.Fa,re=m.P+1+O*S,oe=m.mb,pe=m.nb+O*S,e(re<=m.P+m.qc),ee.Z!=0)for(e(eo[ee.Z]!=null),J=0;J<M;++J)eo[ee.Z](je,xe,Be,re,oe,pe,S),je=oe,xe=pe,pe+=S,re+=S;else for(J=0;J<M;++J)n(oe,pe,Be,re,S),je=oe,xe=pe,pe+=S,re+=S;m.rc=je,m.Vc=xe}else{if(e(ee.mc!=null),S=O+M,e((J=ee.mc)!=null),e(S<=J.i),J.C>=S)S=1;else if(ee.ic||ke(),ee.ic){ee=J.V,je=J.Ba,xe=J.c;var Te=J.i,me=(Be=1,re=J.$/xe,oe=J.$%xe,pe=J.m,Ae=J.s,J.$),be=xe*Te,Me=xe*S,ze=Ae.wc,Fe=me<Me?Ue(Ae,oe,re):null;e(me<=be),e(S<=Te),e(tt(Ae));t:for(;;){for(;!pe.h&&me<Me;){if(oe&ze||(Fe=Ue(Ae,oe,re)),e(Fe!=null),U(pe),256>(Te=Ee(Fe.G[0],Fe.H[0],pe)))ee[je+me]=Te,++me,++oe>=xe&&(oe=0,++re<=S&&!(re%16)&&Qe(J,re));else{if(!(280>Te)){Be=0;break t}Te=ue(Te-256,pe);var ot,Ke=Ee(Fe.G[4],Fe.H[4],pe);if(U(pe),!(me>=(Ke=we(xe,Ke=ue(Ke,pe)))&&be-me>=Te)){Be=0;break t}for(ot=0;ot<Te;++ot)ee[je+me+ot]=ee[je+me+ot-Ke];for(me+=Te,oe+=Te;oe>=xe;)oe-=xe,++re<=S&&!(re%16)&&Qe(J,re);me<Me&&oe&ze&&(Fe=Ue(Ae,oe,re))}e(pe.h==z(pe))}Qe(J,re>S?S:re);break t}!Be||pe.h&&me<be?(Be=0,J.a=pe.h?5:3):J.$=me,S=Be}else S=ht(J,J.V,J.Ba,J.c,J.i,S,Ge);if(!S){M=0;break e}}O+M>=Y&&(m.Cc=1),M=1}if(!M)return null;if(m.Cc&&((M=m.ga)!=null&&(M.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+O*W}function N(m,S,O,M,W,Y){for(;0<W--;){var J,ee=m,re=S+(O?1:0),oe=m,pe=S+(O?0:3);for(J=0;J<M;++J){var Ae=oe[pe+4*J];Ae!=255&&(Ae*=32897,ee[re+4*J+0]=ee[re+4*J+0]*Ae>>23,ee[re+4*J+1]=ee[re+4*J+1]*Ae>>23,ee[re+4*J+2]=ee[re+4*J+2]*Ae>>23)}S+=Y}}function V(m,S,O,M,W){for(;0<M--;){var Y;for(Y=0;Y<O;++Y){var J=m[S+2*Y+0],ee=15&(oe=m[S+2*Y+1]),re=4369*ee,oe=(240&oe|oe>>4)*re>>16;m[S+2*Y+0]=(240&J|J>>4)*re>>16&240|(15&J|J<<4)*re>>16>>4&15,m[S+2*Y+1]=240&oe|ee}S+=W}}function le(m,S,O,M,W,Y,J,ee){var re,oe,pe=255;for(oe=0;oe<W;++oe){for(re=0;re<M;++re){var Ae=m[S+re];Y[J+4*re]=Ae,pe&=Ae}S+=O,J+=ee}return pe!=255}function fe(m,S,O,M,W){var Y;for(Y=0;Y<W;++Y)O[M+Y]=m[S+Y]>>8}function ke(){yi=N,dr=V,fr=le,Ir=fe}function Re(m,S,O){P[m]=function(M,W,Y,J,ee,re,oe,pe,Ae,je,xe,Be,Te,me,be,Me,ze){var Fe,ot=ze-1>>1,Ke=ee[re+0]|oe[pe+0]<<16,bt=Ae[je+0]|xe[Be+0]<<16;e(M!=null);var Xe=3*Ke+bt+131074>>2;for(S(M[W+0],255&Xe,Xe>>16,Te,me),Y!=null&&(Xe=3*bt+Ke+131074>>2,S(Y[J+0],255&Xe,Xe>>16,be,Me)),Fe=1;Fe<=ot;++Fe){var Xt=ee[re+Fe]|oe[pe+Fe]<<16,tr=Ae[je+Fe]|xe[Be+Fe]<<16,Vt=Ke+Xt+bt+tr+524296,Ut=Vt+2*(Xt+bt)>>3;Xe=Ut+Ke>>1,Ke=(Vt=Vt+2*(Ke+tr)>>3)+Xt>>1,S(M[W+2*Fe-1],255&Xe,Xe>>16,Te,me+(2*Fe-1)*O),S(M[W+2*Fe-0],255&Ke,Ke>>16,Te,me+(2*Fe-0)*O),Y!=null&&(Xe=Vt+bt>>1,Ke=Ut+tr>>1,S(Y[J+2*Fe-1],255&Xe,Xe>>16,be,Me+(2*Fe-1)*O),S(Y[J+2*Fe+0],255&Ke,Ke>>16,be,Me+(2*Fe+0)*O)),Ke=Xt,bt=tr}1&ze||(Xe=3*Ke+bt+131074>>2,S(M[W+ze-1],255&Xe,Xe>>16,Te,me+(ze-1)*O),Y!=null&&(Xe=3*bt+Ke+131074>>2,S(Y[J+ze-1],255&Xe,Xe>>16,be,Me+(ze-1)*O)))}}function $e(){bi[Od]=$3,bi[Ld]=Lv,bi[Nv]=H3,bi[Pd]=Pv,bi[Td]=Tv,bi[Kp]=Cv,bi[Ev]=W3,bi[Yp]=Lv,bi[Jp]=Pv,bi[Cd]=Tv,bi[Xp]=Cv}function at(m){return m&-16384?0>m?0:255:m>>V3}function yt(m,S){return at((19077*m>>8)+(26149*S>>8)-14234)}function Tt(m,S,O){return at((19077*m>>8)-(6419*S>>8)-(13320*O>>8)+8708)}function jt(m,S){return at((19077*m>>8)+(33050*S>>8)-17685)}function Wt(m,S,O,M,W){M[W+0]=yt(m,O),M[W+1]=Tt(m,S,O),M[W+2]=jt(m,S)}function kr(m,S,O,M,W){M[W+0]=jt(m,S),M[W+1]=Tt(m,S,O),M[W+2]=yt(m,O)}function Lr(m,S,O,M,W){var Y=Tt(m,S,O);S=Y<<3&224|jt(m,S)>>3,M[W+0]=248&yt(m,O)|Y>>5,M[W+1]=S}function zr(m,S,O,M,W){var Y=240&jt(m,S)|15;M[W+0]=240&yt(m,O)|Tt(m,S,O)>>4,M[W+1]=Y}function pn(m,S,O,M,W){M[W+0]=255,Wt(m,S,O,M,W+1)}function Zr(m,S,O,M,W){kr(m,S,O,M,W),M[W+3]=255}function Ri(m,S,O,M,W){Wt(m,S,O,M,W),M[W+3]=255}function Zn(m,S){return 0>m?0:m>S?S:m}function na(m,S,O){P[m]=function(M,W,Y,J,ee,re,oe,pe,Ae){for(var je=pe+(-2&Ae)*O;pe!=je;)S(M[W+0],Y[J+0],ee[re+0],oe,pe),S(M[W+1],Y[J+0],ee[re+0],oe,pe+O),W+=2,++J,++re,pe+=2*O;1&Ae&&S(M[W+0],Y[J+0],ee[re+0],oe,pe)}}function _d(m,S,O){return O==0?m==0?S==0?6:5:S==0?4:0:O}function Nu(m,S,O,M,W){switch(m>>>30){case 3:_a(S,O,M,W,0);break;case 2:Rr(S,O,M,W);break;case 1:An(S,O,M,W)}}function Eu(m,S){var O,M,W=S.M,Y=S.Nb,J=m.oc,ee=m.pc+40,re=m.oc,oe=m.pc+584,pe=m.oc,Ae=m.pc+600;for(O=0;16>O;++O)J[ee+32*O-1]=129;for(O=0;8>O;++O)re[oe+32*O-1]=129,pe[Ae+32*O-1]=129;for(0<W?J[ee-1-32]=re[oe-1-32]=pe[Ae-1-32]=129:(i(J,ee-32-1,127,21),i(re,oe-32-1,127,9),i(pe,Ae-32-1,127,9)),M=0;M<m.za;++M){var je=S.ya[S.aa+M];if(0<M){for(O=-1;16>O;++O)n(J,ee+32*O-4,J,ee+32*O+12,4);for(O=-1;8>O;++O)n(re,oe+32*O-4,re,oe+32*O+4,4),n(pe,Ae+32*O-4,pe,Ae+32*O+4,4)}var xe=m.Gd,Be=m.Hd+M,Te=je.ad,me=je.Hc;if(0<W&&(n(J,ee-32,xe[Be].y,0,16),n(re,oe-32,xe[Be].f,0,8),n(pe,Ae-32,xe[Be].ea,0,8)),je.Za){var be=J,Me=ee-32+16;for(0<W&&(M>=m.za-1?i(be,Me,xe[Be].y[15],4):n(be,Me,xe[Be+1].y,0,4)),O=0;4>O;O++)be[Me+128+O]=be[Me+256+O]=be[Me+384+O]=be[Me+0+O];for(O=0;16>O;++O,me<<=2)be=J,Me=ee+Iv[O],Ii[je.Ob[O]](be,Me),Nu(me,Te,16*+O,be,Me)}else if(be=_d(M,W,je.Ob[0]),Za[be](J,ee),me!=0)for(O=0;16>O;++O,me<<=2)Nu(me,Te,16*+O,J,ee+Iv[O]);for(O=je.Gc,be=_d(M,W,je.Dd),ka[be](re,oe),ka[be](pe,Ae),me=Te,be=re,Me=oe,255&(je=O>>0)&&(170&je?Pu(me,256,be,Me):gi(me,256,be,Me)),je=pe,me=Ae,255&(O>>=8)&&(170&O?Pu(Te,320,je,me):gi(Te,320,je,me)),W<m.Ub-1&&(n(xe[Be].y,0,J,ee+480,16),n(xe[Be].f,0,re,oe+224,8),n(xe[Be].ea,0,pe,Ae+224,8)),O=8*Y*m.B,xe=m.sa,Be=m.ta+16*M+16*Y*m.R,Te=m.qa,je=m.ra+8*M+O,me=m.Ha,be=m.Ia+8*M+O,O=0;16>O;++O)n(xe,Be+O*m.R,J,ee+32*O,16);for(O=0;8>O;++O)n(Te,je+O*m.B,re,oe+32*O,8),n(me,be+O*m.B,pe,Ae+32*O,8)}}function Us(m,S,O,M,W,Y,J,ee,re){var oe=[0],pe=[0],Ae=0,je=re!=null?re.kd:0,xe=re??new xu;if(m==null||12>O)return 7;xe.data=m,xe.w=S,xe.ha=O,S=[S],O=[O],xe.gb=[xe.gb];e:{var Be=S,Te=O,me=xe.gb;if(e(m!=null),e(Te!=null),e(me!=null),me[0]=0,12<=Te[0]&&!r(m,Be[0],"RIFF")){if(r(m,Be[0]+8,"WEBP")){me=3;break e}var be=Le(m,Be[0]+4);if(12>be||4294967286<be){me=3;break e}if(je&&be>Te[0]-8){me=7;break e}me[0]=be,Be[0]+=12,Te[0]-=12}me=0}if(me!=0)return me;for(be=0<xe.gb[0],O=O[0];;){e:{var Me=m;Te=S,me=O;var ze=oe,Fe=pe,ot=Be=[0];if((Xe=Ae=[Ae])[0]=0,8>me[0])me=7;else{if(!r(Me,Te[0],"VP8X")){if(Le(Me,Te[0]+4)!=10){me=3;break e}if(18>me[0]){me=7;break e}var Ke=Le(Me,Te[0]+8),bt=1+Oe(Me,Te[0]+12);if(2147483648<=bt*(Me=1+Oe(Me,Te[0]+15))){me=3;break e}ot!=null&&(ot[0]=Ke),ze!=null&&(ze[0]=bt),Fe!=null&&(Fe[0]=Me),Te[0]+=18,me[0]-=18,Xe[0]=1}me=0}}if(Ae=Ae[0],Be=Be[0],me!=0)return me;if(Te=!!(2&Be),!be&&Ae)return 3;if(Y!=null&&(Y[0]=!!(16&Be)),J!=null&&(J[0]=Te),ee!=null&&(ee[0]=0),J=oe[0],Be=pe[0],Ae&&Te&&re==null){me=0;break}if(4>O){me=7;break}if(be&&Ae||!be&&!Ae&&!r(m,S[0],"ALPH")){O=[O],xe.na=[xe.na],xe.P=[xe.P],xe.Sa=[xe.Sa];e:{Ke=m,me=S,be=O;var Xe=xe.gb;ze=xe.na,Fe=xe.P,ot=xe.Sa,bt=22,e(Ke!=null),e(be!=null),Me=me[0];var Xt=be[0];for(e(ze!=null),e(ot!=null),ze[0]=null,Fe[0]=null,ot[0]=0;;){if(me[0]=Me,be[0]=Xt,8>Xt){me=7;break e}var tr=Le(Ke,Me+4);if(4294967286<tr){me=3;break e}var Vt=8+tr+1&-2;if(bt+=Vt,0<Xe&&bt>Xe){me=3;break e}if(!r(Ke,Me,"VP8 ")||!r(Ke,Me,"VP8L")){me=0;break e}if(Xt[0]<Vt){me=7;break e}r(Ke,Me,"ALPH")||(ze[0]=Ke,Fe[0]=Me+8,ot[0]=tr),Me+=Vt,Xt-=Vt}}if(O=O[0],xe.na=xe.na[0],xe.P=xe.P[0],xe.Sa=xe.Sa[0],me!=0)break}O=[O],xe.Ja=[xe.Ja],xe.xa=[xe.xa];e:if(Xe=m,me=S,be=O,ze=xe.gb[0],Fe=xe.Ja,ot=xe.xa,Ke=me[0],Me=!r(Xe,Ke,"VP8 "),bt=!r(Xe,Ke,"VP8L"),e(Xe!=null),e(be!=null),e(Fe!=null),e(ot!=null),8>be[0])me=7;else{if(Me||bt){if(Xe=Le(Xe,Ke+4),12<=ze&&Xe>ze-12){me=3;break e}if(je&&Xe>be[0]-8){me=7;break e}Fe[0]=Xe,me[0]+=8,be[0]-=8,ot[0]=bt}else ot[0]=5<=be[0]&&Xe[Ke+0]==47&&!(Xe[Ke+4]>>5),Fe[0]=be[0];me=0}if(O=O[0],xe.Ja=xe.Ja[0],xe.xa=xe.xa[0],S=S[0],me!=0)break;if(4294967286<xe.Ja)return 3;if(ee==null||Te||(ee[0]=xe.xa?2:1),J=[J],Be=[Be],xe.xa){if(5>O){me=7;break}ee=J,je=Be,Te=Y,m==null||5>O?m=0:5<=O&&m[S+0]==47&&!(m[S+4]>>5)?(be=[0],Xe=[0],ze=[0],X(Fe=new L,m,S,O),vt(Fe,be,Xe,ze)?(ee!=null&&(ee[0]=be[0]),je!=null&&(je[0]=Xe[0]),Te!=null&&(Te[0]=ze[0]),m=1):m=0):m=0}else{if(10>O){me=7;break}ee=Be,m==null||10>O||!va(m,S+3,O-3)?m=0:(je=m[S+0]|m[S+1]<<8|m[S+2]<<16,Te=16383&(m[S+7]<<8|m[S+6]),m=16383&(m[S+9]<<8|m[S+8]),1&je||3<(je>>1&7)||!(je>>4&1)||je>>5>=xe.Ja||!Te||!m?m=0:(J&&(J[0]=Te),ee&&(ee[0]=m),m=1))}if(!m||(J=J[0],Be=Be[0],Ae&&(oe[0]!=J||pe[0]!=Be)))return 3;re!=null&&(re[0]=xe,re.offset=S-re.w,e(4294967286>S-re.w),e(re.offset==re.ha-O));break}return me==0||me==7&&Ae&&re==null?(Y!=null&&(Y[0]|=xe.na!=null&&0<xe.na.length),M!=null&&(M[0]=J),W!=null&&(W[0]=Be),0):me}function Au(m,S,O){var M=S.width,W=S.height,Y=0,J=0,ee=M,re=W;if(S.Da=m!=null&&0<m.Da,S.Da&&(ee=m.cd,re=m.bd,Y=m.v,J=m.j,11>O||(Y&=-2,J&=-2),0>Y||0>J||0>=ee||0>=re||Y+ee>M||J+re>W))return 0;if(S.v=Y,S.j=J,S.va=Y+ee,S.o=J+re,S.U=ee,S.T=re,S.da=m!=null&&0<m.da,S.da){if(!rt(ee,re,O=[m.ib],Y=[m.hb]))return 0;S.ib=O[0],S.hb=Y[0]}return S.ob=m!=null&&m.ob,S.Kb=m==null||!m.Sd,S.da&&(S.ob=S.ib<3*M/4&&S.hb<3*W/4,S.Kb=0),1}function ju(m){if(m==null)return 2;if(11>m.S){var S=m.f.RGBA;S.fb+=(m.height-1)*S.A,S.A=-S.A}else S=m.f.kb,m=m.height,S.O+=(m-1)*S.fa,S.fa=-S.fa,S.N+=(m-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(m-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(m-1)*S.lb,S.lb=-S.lb);return 0}function zs(m,S,O,M){if(M==null||0>=m||0>=S)return 2;if(O!=null){if(O.Da){var W=O.cd,Y=O.bd,J=-2&O.v,ee=-2&O.j;if(0>J||0>ee||0>=W||0>=Y||J+W>m||ee+Y>S)return 2;m=W,S=Y}if(O.da){if(!rt(m,S,W=[O.ib],Y=[O.hb]))return 2;m=W[0],S=Y[0]}}M.width=m,M.height=S;e:{var re=M.width,oe=M.height;if(m=M.S,0>=re||0>=oe||!(m>=Od&&13>m))m=2;else{if(0>=M.Rd&&M.sd==null){J=Y=W=S=0;var pe=(ee=re*Dv[m])*oe;if(11>m||(Y=(oe+1)/2*(S=(re+1)/2),m==12&&(J=(W=re)*oe)),(oe=a(pe+2*Y+J))==null){m=1;break e}M.sd=oe,11>m?((re=M.f.RGBA).eb=oe,re.fb=0,re.A=ee,re.size=pe):((re=M.f.kb).y=oe,re.O=0,re.fa=ee,re.Fd=pe,re.f=oe,re.N=0+pe,re.Ab=S,re.Cd=Y,re.ea=oe,re.W=0+pe+Y,re.Db=S,re.Ed=Y,m==12&&(re.F=oe,re.J=0+pe+2*Y),re.Tc=J,re.lb=W)}if(S=1,W=M.S,Y=M.width,J=M.height,W>=Od&&13>W)if(11>W)m=M.f.RGBA,S&=(ee=Math.abs(m.A))*(J-1)+Y<=m.size,S&=ee>=Y*Dv[W],S&=m.eb!=null;else{m=M.f.kb,ee=(Y+1)/2,pe=(J+1)/2,re=Math.abs(m.fa),oe=Math.abs(m.Ab);var Ae=Math.abs(m.Db),je=Math.abs(m.lb),xe=je*(J-1)+Y;S&=re*(J-1)+Y<=m.Fd,S&=oe*(pe-1)+ee<=m.Cd,S=(S&=Ae*(pe-1)+ee<=m.Ed)&re>=Y&oe>=ee&Ae>=ee,S&=m.y!=null,S&=m.f!=null,S&=m.ea!=null,W==12&&(S&=je>=Y,S&=xe<=m.Tc,S&=m.F!=null)}else S=0;m=S?0:2}}return m!=0||O!=null&&O.fd&&(m=ju(M)),m}var on=64,qs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],$s=24,Hs=32,Ou=8,Un=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ge("Predictor0","PredictorAdd0"),P.Predictor0=function(){return 4278190080},P.Predictor1=function(m){return m},P.Predictor2=function(m,S,O){return S[O+0]},P.Predictor3=function(m,S,O){return S[O+1]},P.Predictor4=function(m,S,O){return S[O-1]},P.Predictor5=function(m,S,O){return ae(ae(m,S[O+1]),S[O+0])},P.Predictor6=function(m,S,O){return ae(m,S[O-1])},P.Predictor7=function(m,S,O){return ae(m,S[O+0])},P.Predictor8=function(m,S,O){return ae(S[O-1],S[O+0])},P.Predictor9=function(m,S,O){return ae(S[O+0],S[O+1])},P.Predictor10=function(m,S,O){return ae(ae(m,S[O-1]),ae(S[O+0],S[O+1]))},P.Predictor11=function(m,S,O){var M=S[O+0];return 0>=Pe(M>>24&255,m>>24&255,(S=S[O-1])>>24&255)+Pe(M>>16&255,m>>16&255,S>>16&255)+Pe(M>>8&255,m>>8&255,S>>8&255)+Pe(255&M,255&m,255&S)?M:m},P.Predictor12=function(m,S,O){var M=S[O+0];return(Se((m>>24&255)+(M>>24&255)-((S=S[O-1])>>24&255))<<24|Se((m>>16&255)+(M>>16&255)-(S>>16&255))<<16|Se((m>>8&255)+(M>>8&255)-(S>>8&255))<<8|Se((255&m)+(255&M)-(255&S)))>>>0},P.Predictor13=function(m,S,O){var M=S[O-1];return(Ce((m=ae(m,S[O+0]))>>24&255,M>>24&255)<<24|Ce(m>>16&255,M>>16&255)<<16|Ce(m>>8&255,M>>8&255)<<8|Ce(m>>0&255,M>>0&255))>>>0};var Vp=P.PredictorAdd0;P.PredictorAdd1=Ve,ge("Predictor2","PredictorAdd2"),ge("Predictor3","PredictorAdd3"),ge("Predictor4","PredictorAdd4"),ge("Predictor5","PredictorAdd5"),ge("Predictor6","PredictorAdd6"),ge("Predictor7","PredictorAdd7"),ge("Predictor8","PredictorAdd8"),ge("Predictor9","PredictorAdd9"),ge("Predictor10","PredictorAdd10"),ge("Predictor11","PredictorAdd11"),ge("Predictor12","PredictorAdd12"),ge("Predictor13","PredictorAdd13");var Lu=P.PredictorAdd2;Ze("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),Ze("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var Sd,mi=P.ColorIndexInverseTransform,Ws=P.MapARGB,kd=P.VP8LColorIndexInverseTransformAlpha,Nd=P.MapAlpha,Ya=P.VP8LPredictorsAdd=[];Ya.length=16,(P.VP8LPredictors=[]).length=16,(P.VP8LPredictorsAdd_C=[]).length=16,(P.VP8LPredictors_C=[]).length=16;var Wo,zn,En,Ja,ba,xa,Vs,_a,Rr,Pu,An,gi,Gs,Ed,Tu,Vo,Go,Xa,Ko,Ks,Yo,Qa,Cu,vi,yi,dr,fr,Ir,Gr=a(511),Sa=a(2041),Ru=a(225),Ys=a(767),Ad=0,Gp=Sa,jd=Ru,ei=Ys,wi=Gr,Od=0,Ld=1,Nv=2,Pd=3,Td=4,Kp=5,Ev=6,Yp=7,Jp=8,Cd=9,Xp=10,O3=[2,3,7],L3=[3,3,11],Av=[280,256,256,256,40],P3=[0,1,1,1,0],T3=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],C3=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],R3=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],I3=8,Qp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Zp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Iu=null,D3=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],M3=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],jv=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],F3=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],B3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],U3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],z3=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Za=[],Ii=[],ka=[],q3=1,Ov=2,eo=[],bi=[];Re("UpsampleRgbLinePair",Wt,3),Re("UpsampleBgrLinePair",kr,3),Re("UpsampleRgbaLinePair",Ri,4),Re("UpsampleBgraLinePair",Zr,4),Re("UpsampleArgbLinePair",pn,4),Re("UpsampleRgba4444LinePair",zr,2),Re("UpsampleRgb565LinePair",Lr,2);var $3=P.UpsampleRgbLinePair,H3=P.UpsampleBgrLinePair,Lv=P.UpsampleRgbaLinePair,Pv=P.UpsampleBgraLinePair,Tv=P.UpsampleArgbLinePair,Cv=P.UpsampleRgba4444LinePair,W3=P.UpsampleRgb565LinePair,Rd=16,Id=1<<Rd-1,Du=-227,e0=482,V3=6,Rv=0,G3=a(256),K3=a(256),Y3=a(256),J3=a(256),X3=a(e0-Du),Q3=a(e0-Du);na("YuvToRgbRow",Wt,3),na("YuvToBgrRow",kr,3),na("YuvToRgbaRow",Ri,4),na("YuvToBgraRow",Zr,4),na("YuvToArgbRow",pn,4),na("YuvToRgba4444Row",zr,2),na("YuvToRgb565Row",Lr,2);var Iv=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Dd=[0,2,8],Z3=[8,7,6,4,4,2,2,2,1,1,1,1],eS=1;this.WebPDecodeRGBA=function(m,S,O,M,W){var Y=Ld,J=new Fs,ee=new _r;J.ba=ee,ee.S=Y,ee.width=[ee.width],ee.height=[ee.height];var re=ee.width,oe=ee.height,pe=new fn;if(pe==null||m==null)var Ae=2;else e(pe!=null),Ae=Us(m,S,O,pe.width,pe.height,pe.Pd,pe.Qd,pe.format,null);if(Ae!=0?re=0:(re!=null&&(re[0]=pe.width[0]),oe!=null&&(oe[0]=pe.height[0]),re=1),re){ee.width=ee.width[0],ee.height=ee.height[0],M!=null&&(M[0]=ee.width),W!=null&&(W[0]=ee.height);e:{if(M=new Qn,(W=new xu).data=m,W.w=S,W.ha=O,W.kd=1,S=[0],e(W!=null),((m=Us(W.data,W.w,W.ha,null,null,null,S,null,W))==0||m==7)&&S[0]&&(m=4),(S=m)==0){if(e(J!=null),M.data=W.data,M.w=W.w+W.offset,M.ha=W.ha-W.offset,M.put=kn,M.ac=Qt,M.bc=Nn,M.ma=J,W.xa){if((m=mt())==null){J=1;break e}if(function(je,xe){var Be=[0],Te=[0],me=[0];t:for(;;){if(je==null)return 0;if(xe==null)return je.a=2,0;if(je.l=xe,je.a=0,X(je.m,xe.data,xe.w,xe.ha),!vt(je.m,Be,Te,me)){je.a=3;break t}if(je.xb=Ov,xe.width=Be[0],xe.height=Te[0],!It(Be[0],Te[0],1,je,null))break t;return 1}return e(je.a!=0),0}(m,M)){if(M=(S=zs(M.width,M.height,J.Oa,J.ba))==0){t:{M=m;r:for(;;){if(M==null){M=0;break t}if(e(M.s.yc!=null),e(M.s.Ya!=null),e(0<M.s.Wb),e((O=M.l)!=null),e((W=O.ma)!=null),M.xb!=0){if(M.ca=W.ba,M.tb=W.tb,e(M.ca!=null),!Au(W.Oa,O,Pd)){M.a=2;break r}if(!Zt(M,O.width)||O.da)break r;if((O.da||xt(M.ca.S))&&ke(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&ke()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!He(M.s.vb,M.s.Wa.Xa)){M.a=1;break r}M.xb=0}if(!ht(M,M.V,M.Ba,M.c,M.i,O.o,ut))break r;W.Dc=M.Ma,M=1;break t}e(M.a!=0),M=0}M=!M}M&&(S=m.a)}else S=m.a}else{if((m=new Pi)==null){J=1;break e}if(m.Fa=W.na,m.P=W.P,m.qc=W.Sa,Uo(m,M)){if((S=zs(M.width,M.height,J.Oa,J.ba))==0){if(m.Aa=0,O=J.Oa,e((W=m)!=null),O!=null){if(0<(re=0>(re=O.Md)?0:100<re?255:255*re/100)){for(oe=pe=0;4>oe;++oe)12>(Ae=W.pb[oe]).lc&&(Ae.ia=re*Z3[0>Ae.lc?0:Ae.lc]>>3),pe|=Ae.ia;pe&&(alert("todo:VP8InitRandom"),W.ia=1)}W.Ga=O.Id,100<W.Ga?W.Ga=100:0>W.Ga&&(W.Ga=0)}jp(m,M)||(S=m.a)}}else S=m.a}S==0&&J.Oa!=null&&J.Oa.fd&&(S=ju(J.ba))}J=S}Y=J!=0?null:11>Y?ee.f.RGBA.eb:ee.f.kb.y}else Y=null;return Y};var Dv=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(P,F){for(var T="",k=0;k<4;k++)T+=String.fromCharCode(P[F++]);return T}function h(P,F){return(P[F+0]<<0|P[F+1]<<8|P[F+2]<<16)>>>0}function d(P,F){return(P[F+0]<<0|P[F+1]<<8|P[F+2]<<16|P[F+3]<<24)>>>0}new l;var f=[0],c=[0],y=[],v=new l,w=t,p=function(P,F){var T={},k=0,j=!1,I=0,R=0;if(T.frames=[],!function(D,z,q,U){for(var K=0;K<U;K++)if(D[z+K]!=q.charCodeAt(K))return!0;return!1}(P,F,"RIFF",4)){var $,Z;for(d(P,F+=4),F+=8;F<P.length;){var Q=u(P,F),X=d(P,F+=4);F+=4;var G=X+(1&X);switch(Q){case"VP8 ":case"VP8L":T.frames[k]===void 0&&(T.frames[k]={}),(L=T.frames[k]).src_off=j?R:F-8,L.src_size=I+X+8,k++,j&&(j=!1,I=0,R=0);break;case"VP8X":(L=T.header={}).feature_flags=P[F];var H=F+4;L.canvas_width=1+h(P,H),H+=3,L.canvas_height=1+h(P,H),H+=3;break;case"ALPH":j=!0,I=G+8,R=F-8;break;case"ANIM":(L=T.header).bgcolor=d(P,F),H=F+4,L.loop_count=($=P)[(Z=H)+0]<<0|$[Z+1]<<8,H+=2;break;case"ANMF":var B,L;(L=T.frames[k]={}).offset_x=2*h(P,F),F+=3,L.offset_y=2*h(P,F),F+=3,L.width=1+h(P,F),F+=3,L.height=1+h(P,F),F+=3,L.duration=h(P,F),F+=3,B=P[F++],L.dispose=1&B,L.blend=B>>1&1}Q!="ANMF"&&(F+=G)}return T}}(w,0);p.response=w,p.rgbaoutput=!0,p.dataurl=!1;var g=p.header?p.header:null,b=p.frames?p.frames:null;if(g){g.loop_counter=g.loop_count,f=[g.canvas_height],c=[g.canvas_width];for(var _=0;_<b.length&&b[_].blend!=0;_++);}var E=b[0],C=v.WebPDecodeRGBA(w,E.src_off,E.src_size,c,f);E.rgba=C,E.imgwidth=c[0],E.imgheight=f[0];for(var A=0;A<c[0]*f[0]*4;A++)y[A]=C[A];return this.width=c,this.height=f,this.data=y,this}(function(t){var e=function(){return typeof Rg=="function"},r=function(f,c,y,v){var w=4,p=o;switch(v){case t.image_compression.FAST:w=1,p=a;break;case t.image_compression.MEDIUM:w=6,p=s;break;case t.image_compression.SLOW:w=9,p=l}f=n(f,c,y,p);var g=Rg(f,{level:w});return t.__addimage__.arrayBufferToBinaryString(g)},n=function(f,c,y,v){for(var w,p,g,b=f.length/c,_=new Uint8Array(f.length+b),E=h(),C=0;C<b;C+=1){if(g=C*c,w=f.subarray(g,g+c),v)_.set(v(w,y,p),g+C);else{for(var A,P=E.length,F=[];A<P;A+=1)F[A]=E[A](w,y,p);var T=d(F.concat());_.set(F[T],g+C)}p=w}return _},i=function(f){var c=Array.apply([],f);return c.unshift(0),c},a=function(f,c){var y,v=[],w=f.length;v[0]=1;for(var p=0;p<w;p+=1)y=f[p-c]||0,v[p+1]=f[p]-y+256&255;return v},o=function(f,c,y){var v,w=[],p=f.length;w[0]=2;for(var g=0;g<p;g+=1)v=y&&y[g]||0,w[g+1]=f[g]-v+256&255;return w},s=function(f,c,y){var v,w,p=[],g=f.length;p[0]=3;for(var b=0;b<g;b+=1)v=f[b-c]||0,w=y&&y[b]||0,p[b+1]=f[b]+256-(v+w>>>1)&255;return p},l=function(f,c,y){var v,w,p,g,b=[],_=f.length;b[0]=4;for(var E=0;E<_;E+=1)v=f[E-c]||0,w=y&&y[E]||0,p=y&&y[E-c]||0,g=u(v,w,p),b[E+1]=f[E]-g+256&255;return b},u=function(f,c,y){if(f===c&&c===y)return f;var v=Math.abs(c-y),w=Math.abs(f-y),p=Math.abs(f+c-y-y);return v<=w&&v<=p?f:w<=p?c:y},h=function(){return[i,a,o,s,l]},d=function(f){var c=f.map(function(y){return y.reduce(function(v,w){return v+Math.abs(w)},0)});return c.indexOf(Math.min.apply(null,c))};t.processPNG=function(f,c,y,v){var w,p,g,b,_,E,C,A,P,F,T,k,j,I,R,$=this.decode.FLATE_DECODE,Z="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(g=new iP(f)).imgData,p=g.bits,w=g.colorSpace,_=g.colors,[4,6].indexOf(g.colorType)!==-1){if(g.bits===8){P=(A=g.pixelBitlength==32?new Uint32Array(g.decodePixels().buffer):g.pixelBitlength==16?new Uint16Array(g.decodePixels().buffer):new Uint8Array(g.decodePixels().buffer)).length,T=new Uint8Array(P*g.colors),F=new Uint8Array(P);var Q,X=g.pixelBitlength-g.bits;for(I=0,R=0;I<P;I++){for(j=A[I],Q=0;Q<X;)T[R++]=j>>>Q&255,Q+=g.bits;F[I]=j>>>Q&255}}if(g.bits===16){P=(A=new Uint32Array(g.decodePixels().buffer)).length,T=new Uint8Array(P*(32/g.pixelBitlength)*g.colors),F=new Uint8Array(P*(32/g.pixelBitlength)),k=g.colors>1,I=0,R=0;for(var G=0;I<P;)j=A[I++],T[R++]=j>>>0&255,k&&(T[R++]=j>>>16&255,j=A[I++],T[R++]=j>>>0&255),F[G++]=j>>>16&255;p=8}v!==t.image_compression.NONE&&e()?(f=r(T,g.width*g.colors,g.colors,v),C=r(F,g.width,1,v)):(f=T,C=F,$=void 0)}if(g.colorType===3&&(w=this.color_spaces.INDEXED,E=g.palette,g.transparency.indexed)){var H=g.transparency.indexed,B=0;for(I=0,P=H.length;I<P;++I)B+=H[I];if((B/=255)===P-1&&H.indexOf(0)!==-1)b=[H.indexOf(0)];else if(B!==P){for(A=g.decodePixels(),F=new Uint8Array(A.length),I=0,P=A.length;I<P;I++)F[I]=H[A[I]];C=r(F,g.width,1)}}var L=function(D){var z;switch(D){case t.image_compression.FAST:z=11;break;case t.image_compression.MEDIUM:z=13;break;case t.image_compression.SLOW:z=14;break;default:z=12}return z}(v);return $===this.decode.FLATE_DECODE&&(Z="/Predictor "+L+" "),Z+="/Colors "+_+" /BitsPerComponent "+p+" /Columns "+g.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(C&&this.__addimage__.isArrayBuffer(C)||this.__addimage__.isArrayBufferView(C))&&(C=this.__addimage__.arrayBufferToBinaryString(C)),{alias:y,data:f,index:c,filter:$,decodeParameters:Z,transparency:b,palette:E,sMask:C,predictor:L,width:g.width,height:g.height,bitsPerComponent:p,colorSpace:w}}}})(St.API),function(t){t.processGIF89A=function(e,r,n,i){var a=new aP(e),o=a.width,s=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:s},h=new am(100).encode(u,100);return t.processJPEG.call(this,h,r,n,i)},t.processGIF87A=t.processGIF89A}(St.API),Bi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Bi.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){ur.log("bit decode error:"+r)}},Bi.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[a>>7-s&1];this.data[o+4*s]=l.blue,this.data[o+4*s+1]=l.green,this.data[o+4*s+2]=l.red,this.data[o+4*s+3]=255}r!==0&&(this.pos+=4-r)}},Bi.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*i*4,s=a>>4,l=15&a,u=this.palette[s];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Bi.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Bi.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,s=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,h=n*this.width*4+4*i;this.data[h]=l,this.data[h+1]=s,this.data[h+2]=o,this.data[h+3]=u}this.pos+=t}},Bi.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,l=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,h=i*this.width*4+4*a;this.data[h]=u,this.data[h+1]=l,this.data[h+2]=s,this.data[h+3]=255}this.pos+=t}},Bi.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Bi.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*r;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=o}},Bi.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,i){var a=new Bi(e,!1),o=a.width,s=a.height,l={data:a.getData(),width:o,height:s},u=new am(100).encode(l,100);return t.processJPEG.call(this,u,r,n,i)}}(St.API),Pw.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,i){var a=new Pw(e),o=a.width,s=a.height,l={data:a.getData(),width:o,height:s},u=new am(100).encode(l,100);return t.processJPEG.call(this,u,r,n,i)}}(St.API),St.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,l=0,u=0;u<i;u+=4){var h=n[u],d=n[u+1],f=n[u+2],c=n[u+3];a[s++]=h,a[s++]=d,a[s++]=f,o[l++]=c}var y=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},St.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ul=St.API,jf=ul.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=u.fof?u.fof:1,d=e.doKerning!==!1,f=0,c=t.length,y=0,v=s[0]||l,w=[];for(r=0;r<c;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?w.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+o*(1e3/a)||0)/1e3):(f=d&&ir(u[n])==="object"&&!isNaN(parseInt(u[n][y],10))?u[n][y]/h:0,w.push((s[n]||v)/l+f)),y=n;return w},Aw=ul.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return ul.processArabic&&(t=ul.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:jf.apply(this,arguments).reduce(function(a,o){return a+o},0)},jw=function(t,e,r,n){for(var i=[],a=0,o=t.length,s=0;a!==o&&s+e[a]<r;)s+=e[a],a++;i.push(t.slice(0,a));var l=a;for(s=0;a!==o;)s+e[a]>n&&(i.push(t.slice(l,a)),s=0,l=a),s+=e[a],a++;return l!==a&&i.push(t.slice(l,a)),i},Ow=function(t,e,r){r||(r={});var n,i,a,o,s,l,u,h=[],d=[h],f=r.textIndent||0,c=0,y=0,v=t.split(" "),w=jf.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var p=Array(l).join(" "),g=[];v.map(function(_){(_=_.split(/\s*\n/)).length>1?g=g.concat(_.map(function(E,C){return(C&&E.length?`
`:"")+E})):g.push(_[0])}),v=g,l=Aw.apply(this,[p,r])}for(a=0,o=v.length;a<o;a++){var b=0;if(n=v[a],l&&n[0]==`
`&&(n=n.substr(1),b=1),f+c+(y=(i=jf.apply(this,[n,r])).reduce(function(_,E){return _+E},0))>e||b){if(y>e){for(s=jw.apply(this,[n,i,e-(f+c),e]),h.push(s.shift()),h=[s.pop()];s.length;)d.push([s.shift()]);y=i.slice(n.length-(h[0]?h[0].length:0)).reduce(function(_,E){return _+E},0)}else h=[n];d.push(h),f=y+l,c=w}else h.push(n),f+=c+y,c=w}return u=l?function(_,E){return(E?p:"")+_.join(" ")}:function(_){return _.join(" ")},d.map(u)},ul.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var d=this.internal.getFont(h.fontName,h.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=r.lineIndent;var s,l,u=[];for(s=0,l=n.length;s<l;s++)u=u.concat(Ow.apply(this,[n[s],o,a]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},i=0;i<e.length;i++)r[e[i]]="0123456789abcdef"[i],n["0123456789abcdef"[i]]=e[i];var a=function(d){return"0x"+parseInt(d,10).toString(16)},o=t.__fontmetrics__.compress=function(d){var f,c,y,v,w=["{"];for(var p in d){if(f=d[p],isNaN(parseInt(p,10))?c="'"+p+"'":(p=parseInt(p,10),c=(c=a(p).slice(2)).slice(0,-1)+n[c.slice(-1)]),typeof f=="number")f<0?(y=a(f).slice(3),v="-"):(y=a(f).slice(2),v=""),y=v+y.slice(0,-1)+n[y.slice(-1)];else{if(ir(f)!=="object")throw new Error("Don't know what to do with value type "+ir(f)+".");y=o(f)}w.push(c+y)}return w.push("}"),w.join("")},s=t.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,c,y,v,w={},p=1,g=w,b=[],_="",E="",C=d.length-1,A=1;A<C;A+=1)(v=d[A])=="'"?f?(y=f.join(""),f=void 0):f=[]:f?f.push(v):v=="{"?(b.push([g,y]),g={},y=void 0):v=="}"?((c=b.pop())[0][c[1]]=g,y=void 0,g=c[0]):v=="-"?p=-1:y===void 0?r.hasOwnProperty(v)?(_+=r[v],y=parseInt(_,16)*p,p=1,_=""):_+=v:r.hasOwnProperty(v)?(E+=r[v],g[y]=parseInt(E,16)*p,p=1,y=void 0,E=""):E+=v;return w},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(d){var f=d.font,c=h.Unicode[f.postScriptName];c&&(f.metadata.Unicode={},f.metadata.Unicode.widths=c.widths,f.metadata.Unicode.kerning=c.kerning);var y=u.Unicode[f.postScriptName];y&&(f.metadata.Unicode.encoding=y,f.encoding=y.codePages[0])}])}(St.API),function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=r.charCodeAt(a);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,a=r.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e(Ac(s)),o.metadata=t.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,n)}}])}(St),function(t){function e(){return(kt.canvg?Promise.resolve(kt.canvg):Og(()=>import("./index.es-BZeigVj3.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}St.API.addSvgAsImage=function(r,n,i,a,o,s,l,u){if(isNaN(n)||isNaN(i))throw ur.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw ur.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=a,h.height=o;var d=h.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,h.width,h.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},c=this;return e().then(function(y){return y.fromString(d,r,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(f)}).then(function(){c.addImage(h.toDataURL("image/jpeg",1),n,i,a,o,l,u)})}}(),St.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},St.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),l=[],u=0,h=0,d=0;function f(y,v){var w,p=!1;for(w=0;w<y.length;w+=1)y[w]===v&&(p=!0);return p}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var c=s.length;for(d=0;d<c;d+=1)r[s[d]].value=r[s[d]].defaultValue,r[s[d]].explicitSet=!1}if(ir(t)==="object"){for(i in t)if(a=t[i],f(s,i)&&a!==void 0){if(r[i].type==="boolean"&&typeof a=="boolean")r[i].value=a;else if(r[i].type==="name"&&f(r[i].valueSet,a))r[i].value=a;else if(r[i].type==="integer"&&Number.isInteger(a))r[i].value=a;else if(r[i].type==="array"){for(u=0;u<a.length;u+=1)if(n=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(h=0;h<a[u].length;h+=1)typeof a[u][h]!="number"&&(n=!1);n===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}r[i].value="["+l.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,v=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?v.push("/"+y+" /"+r[y].value):v.push("/"+y+" "+r[y].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+o.length+s.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+s+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(St.API),function(t){var e=t.API,r=e.pdfEscape16=function(a,o){for(var s,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],h=[""],d=0,f=a.length;d<f;++d){if(s=o.metadata.characterToGlyph(a.charCodeAt(d)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=a.charCodeAt(d),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return h.join("");s=s.toString(16),h.push(u[4-s.length],s)}return h.join("")},n=function(a){var o,s,l,u,h,d,f;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,f=(s=Object.keys(a).sort(function(c,y){return c-y})).length;d<f;d++)o=s[d],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(u=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var s=o.font,l=o.out,u=o.newObject,h=o.putStream;if(s.metadata instanceof t.API.TTFFont&&s.encoding==="Identity-H"){for(var d=s.metadata.Unicode.widths,f=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),c="",y=0;y<f.length;y++)c+=String.fromCharCode(f[y]);var v=u();h({data:c,addLength1:!0,objectId:v}),l("endobj");var w=u();h({data:n(s.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var p=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+ml(s.fontName)),l("/FontFile2 "+v+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var g=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+ml(s.fontName)),l("/FontDescriptor "+p+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+w+" 0 R"),l("/BaseFont /"+ml(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+g+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var s=o.font,l=o.out,u=o.newObject,h=o.putStream;if(s.metadata instanceof t.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var d=s.metadata.rawData,f="",c=0;c<d.length;c++)f+=String.fromCharCode(d[c]);var y=u();h({data:f,addLength1:!0,objectId:y}),l("endobj");var v=u();h({data:n(s.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var w=u();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+y+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+ml(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=u();for(var p=0;p<s.metadata.hmtx.widths.length;p++)s.metadata.hmtx.widths[p]=parseInt(s.metadata.hmtx.widths[p]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+ml(s.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,s=a.text||"",l=a.x,u=a.y,h=a.options||{},d=a.mutex||{},f=d.pdfEscape,c=d.activeFontKey,y=d.fonts,v=c,w="",p=0,g="",b=y[v].encoding;if(y[v].encoding!=="Identity-H")return{text:s,x:l,y:u,options:h,mutex:d};for(g=s,v=c,Array.isArray(s)&&(g=s[0]),p=0;p<g.length;p+=1)y[v].metadata.hasOwnProperty("cmap")&&(o=y[v].metadata.cmap.unicode.codeMap[g[p].charCodeAt(0)]),o||g[p].charCodeAt(0)<256&&y[v].metadata.hasOwnProperty("Unicode")?w+=g[p]:w+="";var _="";return parseInt(v.slice(1))<14||b==="WinAnsiEncoding"?_=f(w,v).split("").map(function(E){return E.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(_=r(w,y[v])),d.isHex=!0,{text:_,x:l,y:u,options:h,mutex:d}};e.events.push(["postProcessText",function(a){var o=a.text||"",s=[],l={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?s.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):s.push(i(Object.assign({},l,{text:o[u]})).text);a.text=s}else a.text=i(Object.assign({},l,{text:o})).text}])}(St),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(St.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,a,o,s,l,u,h,d=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],p=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,b=0;this.__bidiEngine__={};var _=function(k){var j=k.charCodeAt(),I=j>>8,R=v[I];return R!==void 0?d[256*R+(255&j)]:I===252||I===253?"AL":p.test(I)?"L":I===8?"R":"N"},E=function(k){for(var j,I=0;I<k.length;I++){if((j=_(k.charAt(I)))==="L")return!1;if(j==="R")return!0}return!1},C=function(k,j,I,R){var $,Z,Q,X,G=j[R];switch(G){case"L":case"R":g=!1;break;case"N":case"AN":break;case"EN":g&&(G="AN");break;case"AL":g=!0,G="R";break;case"WS":G="N";break;case"CS":R<1||R+1>=j.length||($=I[R-1])!=="EN"&&$!=="AN"||(Z=j[R+1])!=="EN"&&Z!=="AN"?G="N":g&&(Z="AN"),G=Z===$?Z:"N";break;case"ES":G=($=R>0?I[R-1]:"B")==="EN"&&R+1<j.length&&j[R+1]==="EN"?"EN":"N";break;case"ET":if(R>0&&I[R-1]==="EN"){G="EN";break}if(g){G="N";break}for(Q=R+1,X=j.length;Q<X&&j[Q]==="ET";)Q++;G=Q<X&&j[Q]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(X=j.length,Q=R+1;Q<X&&j[Q]==="NSM";)Q++;if(Q<X){var H=k[R],B=H>=1425&&H<=2303||H===64286;if($=j[Q],B&&($==="R"||$==="AL")){G="R";break}}}G=R<1||($=j[R-1])==="B"?"N":I[R-1];break;case"B":g=!1,i=!0,G=b;break;case"S":a=!0,G="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"BN":G="N"}return G},A=function(k,j,I){var R=k.split("");return I&&P(R,I,{hiLevel:b}),R.reverse(),j&&j.reverse(),R.join("")},P=function(k,j,I){var R,$,Z,Q,X,G=-1,H=k.length,B=0,L=[],D=b?c:f,z=[];for(g=!1,i=!1,a=!1,$=0;$<H;$++)z[$]=_(k[$]);for(Z=0;Z<H;Z++){if(X=B,L[Z]=C(k,z,L,Z),R=240&(B=D[X][y[L[Z]]]),B&=15,j[Z]=Q=D[B][5],R>0)if(R===16){for($=G;$<Z;$++)j[$]=1;G=-1}else G=-1;if(D[B][6])G===-1&&(G=Z);else if(G>-1){for($=G;$<Z;$++)j[$]=Q;G=-1}z[Z]==="B"&&(j[Z]=0),I.hiLevel|=Q}a&&function(q,U,K){for(var ne=0;ne<K;ne++)if(q[ne]==="S"){U[ne]=b;for(var ie=ne-1;ie>=0&&q[ie]==="WS";ie--)U[ie]=b}}(z,j,H)},F=function(k,j,I,R,$){if(!($.hiLevel<k)){if(k===1&&b===1&&!i)return j.reverse(),void(I&&I.reverse());for(var Z,Q,X,G,H=j.length,B=0;B<H;){if(R[B]>=k){for(X=B+1;X<H&&R[X]>=k;)X++;for(G=B,Q=X-1;G<Q;G++,Q--)Z=j[G],j[G]=j[Q],j[Q]=Z,I&&(Z=I[G],I[G]=I[Q],I[Q]=Z);B=X}B++}}},T=function(k,j,I){var R=k.split(""),$={hiLevel:b};return I||(I=[]),P(R,I,$),function(Z,Q,X){if(X.hiLevel!==0&&h)for(var G,H=0;H<Z.length;H++)Q[H]===1&&(G=w.indexOf(Z[H]))>=0&&(Z[H]=w[G+1])}(R,I,$),F(2,R,j,I,$),F(1,R,j,I,$),R.join("")};return this.__bidiEngine__.doBidiReorder=function(k,j,I){if(function($,Z){if(Z)for(var Q=0;Q<$.length;Q++)Z[Q]=Q;s===void 0&&(s=E($)),u===void 0&&(u=E($))}(k,j),o||!l||u)if(o&&l&&s^u)b=s?1:0,k=A(k,j,I);else if(!o&&l&&u)b=s?1:0,k=T(k,j,I),k=A(k,j);else if(!o||s||l||u){if(o&&!l&&s^u)k=A(k,j),s?(b=0,k=T(k,j,I)):(b=1,k=T(k,j,I),k=A(k,j));else if(o&&s&&!l&&u)b=1,k=T(k,j,I),k=A(k,j);else if(!o&&!l&&s^u){var R=h;s?(b=1,k=T(k,j,I),b=0,h=!1,k=T(k,j,I),h=R):(b=0,k=T(k,j,I),k=A(k,j),b=1,h=!1,k=T(k,j,I),h=R,k=A(k,j))}}else b=0,k=T(k,j,I);else b=s?1:0,k=T(k,j,I);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,l=k.isOutputVisual,s=k.isInputRtl,u=k.isOutputRtl,h=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text,a=(n.x,n.y,n.options||{}),o=(n.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(o=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?o.push([r.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):o.push([r.doBidiReorder(i[s])]);n.text=o}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(St),St.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Ro(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new bP(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new oP(this.contents),this.head=new lP(this),this.name=new hP(this),this.cmap=new K_(this),this.toUnicode={},this.hhea=new uP(this),this.maxp=new pP(this),this.hmtx=new mP(this),this.post=new dP(this),this.os2=new cP(this),this.loca=new wP(this),this.glyf=new gP(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,l,u;for(u=[],o=0,s=(l=this.bbox).length;o<s;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,a,o,s;for(o=0,a=0,s=(e=""+e).length;0<=s?a<s:a>s;a=0<=s?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var ea,Ro=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,a,o,s,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^s)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*a+65536*o+256*s+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,a;for(a=[],n=0,i=e.length;n<i;n++)r=e[n],a.push(this.writeByte(r));return a},t}(),oP=function(){var t;function e(r){var n,i,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,a,o,s,l,u,h,d,f,c,y,v;for(v in c=Object.keys(r).length,l=Math.log(2),d=16*Math.floor(Math.log(c)/l),o=Math.floor(d/l),h=16*c-d,(i=new Ro).writeInt(this.scalarType),i.writeShort(c),i.writeShort(d),i.writeShort(o),i.writeShort(h),a=16*c,u=i.pos+a,s=null,y=[],r)for(f=r[v],i.writeString(v),i.writeInt(t(f)),i.writeInt(u),i.writeInt(f.length),y=y.concat(f),v==="head"&&(s=u),u+=f.length;u%4;)y.push(0),u++;return i.write(y),n=2981146554-t(i.data),i.pos=s+8,i.writeUInt32(n),i.data},t=function(r){var n,i,a,o;for(r=Y_.call(r);r.length%4;)r.push(0);for(a=new Ro(r),i=0,n=0,o=r.length;n<o;n=n+=4)i+=a.readUInt32();return 4294967295&i},e}(),sP={}.hasOwnProperty,ga=function(t,e){for(var r in e)sP.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};ea=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var lP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ga(e,ea),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new Ro).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),Tw=function(){function t(e,r){var n,i,a,o,s,l,u,h,d,f,c,y,v,w,p,g,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(c=e.readUInt16(),f=c/2,e.pos+=6,a=function(){var _,E;for(E=[],l=_=0;0<=f?_<f:_>f;l=0<=f?++_:--_)E.push(e.readUInt16());return E}(),e.pos+=2,v=function(){var _,E;for(E=[],l=_=0;0<=f?_<f:_>f;l=0<=f?++_:--_)E.push(e.readUInt16());return E}(),u=function(){var _,E;for(E=[],l=_=0;0<=f?_<f:_>f;l=0<=f?++_:--_)E.push(e.readUInt16());return E}(),h=function(){var _,E;for(E=[],l=_=0;0<=f?_<f:_>f;l=0<=f?++_:--_)E.push(e.readUInt16());return E}(),i=(this.length-e.pos+this.offset)/2,s=function(){var _,E;for(E=[],l=_=0;0<=i?_<i:_>i;l=0<=i?++_:--_)E.push(e.readUInt16());return E}(),l=p=0,b=a.length;p<b;l=++p)for(w=a[l],n=g=y=v[l];y<=w?g<=w:g>=w;n=y<=w?++g:--g)h[l]===0?o=n+u[l]:(o=s[h[l]/2+(n-y)-(f-l)]||0)!==0&&(o+=u[l]),this.codeMap[n]=65535&o}e.pos=d}return t.encode=function(e,r){var n,i,a,o,s,l,u,h,d,f,c,y,v,w,p,g,b,_,E,C,A,P,F,T,k,j,I,R,$,Z,Q,X,G,H,B,L,D,z,q,U,K,ne,ie,he,ye,Oe;switch(R=new Ro,o=Object.keys(e).sort(function(Le,He){return Le-He}),r){case"macroman":for(v=0,w=function(){var Le=[];for(y=0;y<256;++y)Le.push(0);return Le}(),g={0:0},a={},$=0,G=o.length;$<G;$++)g[ie=e[i=o[$]]]==null&&(g[ie]=++v),a[i]={old:e[i],new:g[e[i]]},w[i]=g[e[i]];return R.writeUInt16(1),R.writeUInt16(0),R.writeUInt32(12),R.writeUInt16(0),R.writeUInt16(262),R.writeUInt16(0),R.write(w),{charMap:a,subtable:R.data,maxGlyphID:v+1};case"unicode":for(j=[],d=[],b=0,g={},n={},p=u=null,Z=0,H=o.length;Z<H;Z++)g[E=e[i=o[Z]]]==null&&(g[E]=++b),n[i]={old:E,new:g[E]},s=g[E]-i,p!=null&&s===u||(p&&d.push(p),j.push(i),u=s),p=i;for(p&&d.push(p),d.push(65535),j.push(65535),T=2*(F=j.length),P=2*Math.pow(Math.log(F)/Math.LN2,2),f=Math.log(P/2)/Math.LN2,A=2*F-P,l=[],C=[],c=[],y=Q=0,B=j.length;Q<B;y=++Q){if(k=j[y],h=d[y],k===65535){l.push(0),C.push(0);break}if(k-(I=n[k].new)>=32768)for(l.push(0),C.push(2*(c.length+F-y)),i=X=k;k<=h?X<=h:X>=h;i=k<=h?++X:--X)c.push(n[i].new);else l.push(I-k),C.push(0)}for(R.writeUInt16(3),R.writeUInt16(1),R.writeUInt32(12),R.writeUInt16(4),R.writeUInt16(16+8*F+2*c.length),R.writeUInt16(0),R.writeUInt16(T),R.writeUInt16(P),R.writeUInt16(f),R.writeUInt16(A),K=0,L=d.length;K<L;K++)i=d[K],R.writeUInt16(i);for(R.writeUInt16(0),ne=0,D=j.length;ne<D;ne++)i=j[ne],R.writeUInt16(i);for(he=0,z=l.length;he<z;he++)s=l[he],R.writeUInt16(s);for(ye=0,q=C.length;ye<q;ye++)_=C[ye],R.writeUInt16(_);for(Oe=0,U=c.length;Oe<U;Oe++)v=c[Oe],R.writeUInt16(v);return{charMap:n,subtable:R.data,maxGlyphID:b+1}}},t}(),K_=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ga(e,ea),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,i,a;for(r.pos=this.offset,this.version=r.readUInt16(),a=r.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)n=new Tw(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var i,a;return n==null&&(n="macroman"),i=Tw.encode(r,n),(a=new Ro).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},e}(),uP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ga(e,ea),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),cP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ga(e,ea),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,i;for(i=[],n=0;n<10;++n)i.push(r.readByte());return i}(),this.charRange=function(){var n,i;for(i=[],n=0;n<4;++n)i.push(r.readInt());return i}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(r.readInt());return i}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),dP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ga(e,ea),e.prototype.tag="post",e.prototype.parse=function(r){var n,i,a;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(i=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],a=[];r.pos<this.offset+this.length;)n=r.readByte(),a.push(this.names.push(r.readString(n)));return a;case 151552:return i=r.readUInt16(),this.offsets=r.read(i);case 196608:break;case 262144:return this.map=(function(){var s,l,u;for(u=[],o=s=0,l=this.file.maxp.numGlyphs;0<=l?s<l:s>l;o=0<=l?++s:--s)u.push(r.readUInt32());return u}).call(this)}},e}(),fP=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},hP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ga(e,ea),e.prototype.tag="name",e.prototype.parse=function(r){var n,i,a,o,s,l,u,h,d,f,c;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),i=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)i.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(u={},o=d=0,f=i.length;d<f;o=++d)a=i[o],r.pos=a.offset,h=r.readString(a.length),s=new fP(h,a),u[c=a.nameID]==null&&(u[c]=[]),u[a.nameID].push(s);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),pP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ga(e,ea),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),mP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ga(e,ea),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,i,a,o,s,l,u;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,d;for(d=[],n=h=0;0<=a?h<a:h>a;n=0<=a?++h:--h)d.push(r.readInt16());return d}(),this.widths=(function(){var h,d,f,c;for(c=[],h=0,d=(f=this.metrics).length;h<d;h++)o=f[h],c.push(o.advance);return c}).call(this),i=this.widths[this.widths.length-1],u=[],n=s=0;0<=a?s<a:s>a;n=0<=a?++s:--s)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),Y_=[].slice,gP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ga(e,ea),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,i,a,o,s,l,u,h,d,f;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,i=o.indexOf(r),(a=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+i,s=(l=new Ro(n.read(a))).readShort(),h=l.readShort(),f=l.readShort(),u=l.readShort(),d=l.readShort(),this.cache[r]=s===-1?new yP(l,h,f,u,d):new vP(l,s,h,f,u,d),this.cache[r]))},e.prototype.encode=function(r,n,i){var a,o,s,l,u;for(s=[],o=[],l=0,u=n.length;l<u;l++)a=r[n[l]],o.push(s.length),a&&(s=s.concat(a.encode(i)));return o.push(s.length),{table:s,offsets:o}},e}(),vP=function(){function t(e,r,n,i,a,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),yP=function(){function t(e,r,n,i,a){var o,s;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Ro(Y_.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),wP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ga(e,ea),e.prototype.tag="loca",e.prototype.parse=function(r){var n,i;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(r.readUInt32());return o}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,s=0;s<i.length;++s)if(i[s]=a,o<n.length&&n[o]==s){++o,i[s]=a;var l=this.offsets[s],u=this.offsets[s+1]-l;u>0&&(a+=u)}for(var h=new Array(4*i.length),d=0;d<i.length;++d)h[4*d+3]=255&i[d],h[4*d+2]=(65280&i[d])>>8,h[4*d+1]=(16711680&i[d])>>16,h[4*d]=(4278190080&i[d])>>24;return h},e}(),bP=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,a;for(r in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,a,o,s,l;for(i={},o=0,s=e.length;o<s;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in r=[],i)(n=i[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in l=this.glyphsFor(r))n=l[a],i[a]=n;return i},t.prototype.encode=function(e,r){var n,i,a,o,s,l,u,h,d,f,c,y,v,w,p;for(i in n=K_.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),c={0:0},p=n.charMap)c[(l=p[i]).old]=l.new;for(y in f=n.maxGlyphID,o)y in c||(c[y]=f++);return h=function(g){var b,_;for(b in _={},g)_[g[b]]=b;return _}(c),d=Object.keys(h).sort(function(g,b){return g-b}),v=function(){var g,b,_;for(_=[],g=0,b=d.length;g<b;g++)s=d[g],_.push(h[s]);return _}(),a=this.font.glyf.encode(o,v,c),u=this.font.loca.encode(a.offsets,v),w={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},t}();St.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,a,o;if(Array.isArray(r))return"["+function(){var s,l,u;for(u=[],s=0,l=r.length;s<l;s++)n=r[s],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in a=["<<"],r)o=r[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+r},e}();const J_=t=>{const e=new St,r=e.internal.pageSize.getWidth(),n=20,i="#4F46E5",a="#334155",o="#0F172A";e.setFont("helvetica","bold"),e.setFontSize(22),e.setTextColor(i),e.text("Diary Recovery Kit",n,30),e.setFontSize(10),e.setTextColor("#64748B"),e.text(`Generated on: ${new Date().toLocaleDateString()}`,n,38),e.setDrawColor(239,68,68),e.setLineWidth(.5),e.rect(n,50,r-n*2,25),e.setFont("helvetica","bold"),e.setFontSize(12),e.setTextColor(220,38,38),e.text(" EXTREMELY SENSITIVE DOCUMENT",n+5,60),e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor(a),e.text("This document contains your Master Password and Encryption Keys.",n+5,68),e.text("Keep it safe. If you lose your password, this is the ONLY way to restore your data.",n+5,73);let s=95;e.setFont("helvetica","bold"),e.setFontSize(14),e.setTextColor(o),e.text("1. Login Credentials",n,s),s+=10,e.setFontSize(10),e.setTextColor("#64748B"),e.text("Email Address:",n,s),e.setFont("courier","bold"),e.setFontSize(12),e.setTextColor(o),e.text(t.email,n+40,s),s+=10,e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor("#64748B"),e.text("Master Password:",n,s),e.setFillColor(241,245,249),e.rect(n,s+5,r-n*2,15,"F"),e.setFont("courier","bold"),e.setFontSize(14),e.setTextColor(o),e.text(t.password,n+5,s+14),s+=40,e.setFont("helvetica","bold"),e.setFontSize(14),e.setTextColor(o),e.text("2. Emergency Technical Keys",n,s),s+=8,e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor(a),e.text("If the password mechanism ever changes or fails, these raw keys can mathematically",n,s),e.text("decrypt your data using standard AES-GCM algorithms.",n,s+5),s+=15,e.setFontSize(10),e.setTextColor("#64748B"),e.text("Encryption Salt:",n,s),e.setFont("courier","normal"),e.setFontSize(9),e.setTextColor(o),e.text(t.salt,n,s+6),s+=20,e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor("#64748B"),e.text("Raw Encryption Key (AES-GCM):",n,s),e.setFont("courier","normal"),e.setFontSize(9),e.setTextColor(o),e.text(t.rawKey,n,s+6),e.setFont("helvetica","italic"),e.setFontSize(8),e.setTextColor("#94A3B8"),e.text("Diary App - Zero Knowledge Architecture",r/2,280,{align:"center"}),e.save("Diary-Recovery-Kit.pdf")},xP=({onSuccess:t,session:e})=>{const[r,n]=te.useState(""),[i,a]=te.useState(!1),[o,s]=te.useState(!1),[l,u]=te.useState(null),[h,d]=te.useState(!1),[f,c]=te.useState(!1),[y,v]=te.useState(null),[w,p]=te.useState(!1),g=async E=>{var C,A,P;if(E.preventDefault(),r.length<6){u("Password must be at least 6 characters long.");return}s(!0),u(null);try{const F=e.user;if(!F)throw new Error("User not available.");const k=`v1:600000:${Hj()}`,j=await b_(r,k),{iv:I,data:R}=await mv(j,y_),$=(C=F.user_metadata)==null?void 0:C.full_name,Z=((A=F.user_metadata)==null?void 0:A.avatar_url)||((P=F.user_metadata)==null?void 0:P.picture),{error:Q}=await Kt.from("profiles").insert({id:F.id,salt:k,key_check_value:R,key_check_iv:I,full_name:$,avatar_url:Z});if(Q)throw Q;const X=await vv(j);v({key:j,rawKey:X,salt:k,password:r,email:F.email||"Unknown Email"})}catch(F){u(F.error_description||F.message||"An unknown error occurred during setup."),console.error("Encryption initialization failed:",F)}finally{s(!1)}},b=()=>{y&&(J_({email:y.email,password:y.password,salt:y.salt,rawKey:y.rawKey}),p(!0))},_=()=>{y&&t(y.key)};return y?x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900",children:x.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md border-t-4 border-green-500 animate-fade-in",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900 mb-4",children:x.jsx("svg",{className:"h-6 w-6 text-green-600 dark:text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),x.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Setup Complete!"}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Your secure diary is ready."})]}),x.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-md p-4",children:[x.jsxs("h3",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-200 flex items-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Important: Backup Required"]}),x.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-2",children:["Because we can't reset your password, you ",x.jsx("strong",{children:"must"})," download your Recovery Kit. It contains your password and raw encryption keys."]})]}),x.jsxs("button",{onClick:b,className:"w-full flex items-center justify-center gap-2 px-4 py-3 font-semibold text-white bg-slate-800 hover:bg-slate-700 dark:bg-slate-700 dark:hover:bg-slate-600 rounded-md transition-all shadow-lg",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Recovery Kit"]}),x.jsx("button",{onClick:_,disabled:!w,className:"w-full px-4 py-2 font-semibold text-indigo-600 bg-indigo-50 rounded-md hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-400 transition-colors dark:bg-transparent dark:text-indigo-400 dark:hover:text-indigo-300 dark:disabled:text-slate-600",children:w?"Continue to App":"Download Kit to Continue"})]})}):x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900",children:x.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Final Security Step"}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"To complete your secure setup, please create your password."})]}),x.jsx("p",{className:"text-xs text-center text-slate-600 dark:text-slate-300 bg-slate-50 dark:bg-slate-900/50 p-3 rounded-md border dark:border-slate-700",children:"This is required to create your unique encryption key. Your password is never stored, and this one-time step ensures your diary remains private and end-to-end encrypted."}),l&&x.jsx("p",{className:"text-center text-red-500 bg-red-50 p-3 rounded-md",children:l}),x.jsxs("form",{className:"space-y-6",onSubmit:g,children:[x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:i?"text":"password",placeholder:"Your password",value:r,required:!0,minLength:6,onChange:E=>n(E.target.value),className:"w-full px-4 py-2 pr-10 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",autoComplete:"new-password"}),x.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute inset-y-0 right-0 flex items-center px-3 text-slate-500 dark:text-slate-400","aria-label":i?"Hide password":"Show password",children:i?x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),x.jsx("path",{fillRule:"evenodd",d:"M.458 10C3.732 4.943 9.522 3 10 3s6.268 1.943 9.542 7c-3.274 5.057-9.042 7-9.542 7S3.732 15.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.27 8.138 15.522 6 10 6c-1.55 0-2.998.48-4.257 1.254l-1.74-1.741zM10 12a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"}),x.jsx("path",{d:"M2.042 10c.832 2.345 3.16 4 5.918 4 1.55 0 2.998-.48 4.257-1.254l-1.473-1.473A3.999 3.999 0 0110 14c-2.209 0-4-1.791-4-4a3.999 3.999 0 011.21-2.828L5.293 5.293A10.014 10.014 0 00.458 10c1.274 1.862 4.022 4 9.542 4 1.105 0 2.158-.149 3.168-.43L10.373 12.16A4.003 4.003 0 0110 12z"})]})})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("label",{className:"flex items-start gap-3 cursor-pointer text-sm text-slate-600 dark:text-slate-400",children:[x.jsx("input",{type:"checkbox",checked:h,onChange:E=>d(E.target.checked),className:"mt-1 h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-slate-300 dark:border-slate-600 dark:bg-slate-900 dark:checked:bg-indigo-500",required:!0}),x.jsxs("span",{children:["I have read and agree to the ",x.jsx(Yl,{to:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-indigo-600 hover:underline dark:text-indigo-400",children:"Privacy Policy"}),"."]})]}),x.jsxs("label",{className:"flex items-start gap-3 cursor-pointer text-sm text-slate-600 dark:text-slate-400",children:[x.jsx("input",{type:"checkbox",checked:f,onChange:E=>c(E.target.checked),className:"mt-1 h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-slate-300 dark:border-slate-600 dark:bg-slate-900 dark:checked:bg-indigo-500",required:!0}),x.jsxs("span",{children:["I have read and agree to the ",x.jsx(Yl,{to:"/terms",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-indigo-600 hover:underline dark:text-indigo-400",children:"Terms of Use"}),"."]})]})]}),x.jsx("button",{type:"submit",disabled:o||!h||!f,className:"w-full px-4 py-2 font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 disabled:bg-indigo-300 disabled:cursor-not-allowed transition-colors",children:o?"Securing...":"Initialize Diary"})]})]})})},X_=typeof PublicKeyCredential<"u"&&typeof PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable=="function",Q_=async()=>{if(!X_)return!1;try{return await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()}catch{return!1}},_P=t=>Uint8Array.from(t,e=>e.charCodeAt(0)),SP=async(t,e)=>{var v,w,p,g;if(!X_)throw new Error("WebAuthn not supported");const r=window.crypto.getRandomValues(new Uint8Array(32)),n=Ss(r.buffer),i=window.crypto.getRandomValues(new Uint8Array(32)),a=_P(e),o={publicKey:{challenge:i,rp:{name:"Diary App",id:window.location.hostname},user:{id:a,name:"diary-user",displayName:"Diary Owner"},pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required",residentKey:"required",requireResidentKey:!0},timeout:6e4,extensions:{prf:{eval:{first:r}}}}},s=await navigator.credentials.create(o);if(!s)throw new Error("Failed to create credential");const l=Ss(s.rawId);let u=null;const h=s.getClientExtensionResults();if((w=(v=h==null?void 0:h.prf)==null?void 0:v.results)!=null&&w.first)u=new Uint8Array(h.prf.results.first);else{const b={publicKey:{challenge:window.crypto.getRandomValues(new Uint8Array(32)),rpId:window.location.hostname,allowCredentials:[{type:"public-key",id:s.rawId}],userVerification:"required",extensions:{prf:{eval:{first:r}}}}},_=await navigator.credentials.get(b),E=_==null?void 0:_.getClientExtensionResults();(g=(p=E==null?void 0:E.prf)==null?void 0:p.results)!=null&&g.first&&(u=new Uint8Array(E.prf.results.first))}if(!u)throw new Error("Authenticator does not support PRF extension. Please ensure your device and browser support WebAuthn PRF.");const d=await window.crypto.subtle.importKey("raw",u,"AES-GCM",!1,["encrypt","decrypt"]),f=await vv(t),{iv:c,data:y}=await mv(d,f);return{credentialId:l,salt:n,encryptedKey:y,iv:c}},kP=async t=>{var u;const e=ks(t.salt),r=ks(t.credentialId),n={publicKey:{challenge:window.crypto.getRandomValues(new Uint8Array(32)),rpId:window.location.hostname,allowCredentials:[{type:"public-key",id:r}],userVerification:"required",extensions:{prf:{eval:{first:e}}}}},i=await navigator.credentials.get(n);if(!i)throw new Error("Authentication failed");const a=(u=i==null?void 0:i.getClientExtensionResults())==null?void 0:u.prf;if(!a||!a.results||!a.results.first)throw new Error("Could not retrieve PRF key from authenticator.");const o=new Uint8Array(a.results.first),s=await window.crypto.subtle.importKey("raw",o,"AES-GCM",!1,["encrypt","decrypt"]),l=await gv(s,t.encryptedKey,t.iv);return Kj(l)},NP=({onSuccess:t,session:e})=>{const[r,n]=te.useState(""),[i,a]=te.useState(!1),[o,s]=te.useState(!1),[l,u]=te.useState(null),{deriveAndVerifyKey:h}=Os(),[d,f]=te.useState(!1),[c,y]=te.useState(!1);te.useEffect(()=>{(async()=>{const g=await Q_();y(g),localStorage.getItem(`diary_bio_${e.user.id}`)&&f(!0)})()},[e.user.id]);const v=async p=>{p.preventDefault(),s(!0),u(null);try{const g=e.user;if(!g)throw new Error("User not available.");const b=await h(r,g.id);b?t(b):u("Incorrect password. Please try again.")}catch(g){u(g.error_description||g.message||"An unknown error occurred."),console.error("Key derivation failed:",g)}finally{s(!1)}},w=async()=>{s(!0),u(null);try{const p=localStorage.getItem(`diary_bio_${e.user.id}`);if(!p)throw new Error("No biometric data found.");const g=JSON.parse(p),b=await kP(g);t(b)}catch(p){console.error("Biometric unlock failed:",p),u("Biometric unlock failed. Please use your password.")}finally{s(!1)}};return x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900",children:x.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Unlock Your Diary"}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"For your security, please enter your password to continue."})]}),x.jsx("p",{className:"text-xs text-center text-slate-600 dark:text-slate-300 bg-slate-50 dark:bg-slate-900/50 p-3 rounded-md border dark:border-slate-700",children:"Your diary is end-to-end encrypted. We need your password to securely decrypt your entries."}),l&&x.jsx("p",{className:"text-center text-red-500 bg-red-50 p-3 rounded-md",children:l}),x.jsxs("form",{className:"space-y-6",onSubmit:v,children:[x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:i?"text":"password",placeholder:"Your password",value:r,required:!0,onChange:p=>n(p.target.value),className:"w-full px-4 py-2 pr-10 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200","aria-label":"Password for decryption",autoComplete:"current-password"}),x.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute inset-y-0 right-0 flex items-center px-3 text-slate-500 dark:text-slate-400","aria-label":i?"Hide password":"Show password",children:i?x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),x.jsx("path",{fillRule:"evenodd",d:"M.458 10C3.732 4.943 9.522 3 10 3s6.268 1.943 9.542 7c-3.274 5.057-9.042 7-9.542 7S3.732 15.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.27 8.138 15.522 6 10 6c-1.55 0-2.998.48-4.257 1.254l-1.74-1.741zM10 12a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"}),x.jsx("path",{d:"M2.042 10c.832 2.345 3.16 4 5.918 4 1.55 0 2.998-.48 4.257-1.254l-1.473-1.473A3.999 3.999 0 0110 14c-2.209 0-4-1.791-4-4a3.999 3.999 0 011.21-2.828L5.293 5.293A10.014 10.014 0 00.458 10c1.274 1.862 4.022 4 9.542 4 1.105 0 2.158-.149 3.168-.43L10.373 12.16A4.003 4.003 0 0110 12z"})]})})]}),x.jsx("button",{type:"submit",disabled:o,className:"w-full px-4 py-2 font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 disabled:bg-indigo-300",children:o?"Unlocking...":"Unlock with Password"})]}),c&&d&&x.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700 text-center",children:x.jsxs("button",{type:"button",onClick:w,disabled:o,className:"flex flex-col items-center justify-center gap-2 w-full p-4 rounded-lg border-2 border-dashed border-indigo-300 hover:border-indigo-500 hover:bg-indigo-50 dark:border-slate-600 dark:hover:border-indigo-400 dark:hover:bg-indigo-900/20 transition-all group",children:[x.jsx("div",{className:"h-12 w-12 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 group-hover:scale-110 transition-transform",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})})}),x.jsx("span",{className:"font-semibold text-indigo-600 dark:text-indigo-300",children:"Unlock with Biometrics"})]})})]})})},EP=({onClick:t})=>x.jsx("button",{onClick:t,className:"fixed top-3 left-4 z-40 p-2 rounded-md bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm hover:bg-slate-200/50 dark:hover:bg-slate-700/50","aria-label":"Open navigation menu",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),AP=({isOpen:t,existingTags:e,suggestedTags:r,onConfirm:n,onCancel:i})=>{const[a,o]=te.useState([]);if(te.useEffect(()=>{if(t){const u=Array.from(new Set([...e,...r]));o(u)}},[t,e,r]),!t)return null;const s=u=>{o(h=>h.filter(d=>d!==u))},l=document.getElementById("portal-root");return l?Fx.createPortal(x.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",role:"dialog","aria-modal":"true",children:x.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md border border-slate-200 dark:border-slate-700 overflow-hidden",children:[x.jsxs("div",{className:"p-6",children:[x.jsx("div",{className:"flex items-start justify-between mb-4",children:x.jsxs("div",{children:[x.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})}),"Smart Tags"]}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"We found some keywords in your entry. Review them before saving."})]})}),x.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-lg p-4 min-h-[100px] border border-slate-100 dark:border-slate-700",children:a.length>0?x.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(u=>{const h=!e.includes(u);return x.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium transition-colors group ${h?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/60 dark:text-indigo-200 border border-indigo-200 dark:border-indigo-800":"bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 border border-transparent"}`,children:[u,x.jsx("button",{onClick:()=>s(u),className:"hover:text-red-500 dark:hover:text-red-400 focus:outline-none opacity-60 group-hover:opacity-100 transition-opacity","aria-label":`Remove tag ${u}`,children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},u)})}):x.jsx("p",{className:"text-sm text-slate-400 italic text-center mt-4",children:"No tags selected."})}),x.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md border border-blue-100 dark:border-blue-800 flex gap-3",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),x.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-300",children:[x.jsx("p",{className:"font-semibold mb-1",children:"Privacy Check:"}),x.jsxs("p",{children:["1. Analysis happens ",x.jsx("strong",{children:"offline"})," on your device."]}),x.jsxs("p",{children:["2. Tags are saved as ",x.jsx("strong",{children:"unencrypted metadata"})," (for search)."]}),x.jsxs("p",{children:["3. Your diary body remains ",x.jsx("strong",{children:"fully encrypted"}),"."]})]})]})]}),x.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/80 px-6 py-4 flex justify-end gap-3 border-t border-slate-100 dark:border-slate-700",children:[x.jsx("button",{onClick:i,className:"px-4 py-2 text-sm font-semibold text-slate-600 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 transition-colors",children:"Save without suggestions"}),x.jsx("button",{onClick:()=>n(a),className:"px-6 py-2 text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg shadow-sm shadow-indigo-200 dark:shadow-none transition-all transform active:scale-95",children:"Confirm & Save"})]})]})}),l):null},jP="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Cw=()=>new Promise(t=>setTimeout(t,0)),OP=({session:t,theme:e,onToggleTheme:r})=>{const[n,i]=te.useState([]),[a,o]=te.useState(!0),{key:s,setKey:l,encrypt:u,decrypt:h,encryptBinary:d,lock:f}=Os(),[c,y]=te.useState("checking"),[v,w]=te.useState(null),[p,g]=te.useState(()=>window.innerWidth>=768),[b,_]=te.useState(!1),[E,C]=te.useState("synced"),[A,P]=te.useState(null),[F,T]=te.useState(!1),[k,j]=te.useState(null),[I,R]=te.useState([]),$=te.useRef(new Set),Z=te.useRef(null),{addToast:Q}=mp(),X=Ha(),G=Qi(),H=te.useCallback(ae=>{Z.current=ae},[]);te.useEffect(()=>{navigator.geolocation.getCurrentPosition(async ae=>{try{const Se=await Xj(ae.coords.latitude,ae.coords.longitude);P(Se)}catch(Se){console.error("Failed to fetch weather:",Se)}},ae=>{console.warn("Geolocation permission denied. Weather feature disabled.",ae.message)},{enableHighAccuracy:!1,timeout:1e4,maximumAge:1e3*60*60})},[]),te.useEffect(()=>{(async()=>{if(s){y("ready");return}try{const{data:Se}=await Kt.from("profiles").select("id").eq("id",t.user.id).maybeSingle();y(Se?"reauth":"needed")}catch(Se){console.error("Error checking profile:",Se),Q("Error accessing profile. Please log out and in again.","error"),await Kt.auth.signOut()}})()},[s,t.user.id,Q]);const B=ae=>{l(ae),y("ready")};te.useEffect(()=>{const ae=()=>{if(document.visibilityState==="hidden")localStorage.setItem("diary_last_active",Date.now().toString());else if(document.visibilityState==="visible"){const Se=localStorage.getItem("diary_last_active");Se&&(Date.now()-parseInt(Se,10)>12e4&&s&&(f(),Q("Diary locked for security.","info")),localStorage.removeItem("diary_last_active"))}};return document.addEventListener("visibilitychange",ae),()=>document.removeEventListener("visibilitychange",ae)},[s,f,Q]);const L=te.useCallback(async()=>{try{const{data:ae,error:Se}=await Kt.from("profiles").select("*").eq("id",t.user.id).single();if(Se)throw Se;w(ae)}catch(ae){console.error("Error fetching profile:",ae)}},[t.user.id]),D=te.useCallback(async()=>{if(s){o(!0);try{const{data:ae,error:Se}=await Kt.from("diaries").select("id, created_at, mood, tags, owner_id, journal").order("created_at",{ascending:!1});if(Se)throw Se;const Ce=(ae||[]).map(Pe=>({id:Pe.id,created_at:Pe.created_at,mood:Pe.mood,tags:Pe.tags,owner_id:Pe.owner_id,journal:Pe.journal||"Personal",title:"",content:"",isDecrypted:!1,isLoading:!1}));i(Ce)}catch(ae){console.error("Error fetching entries:",ae),Q("Could not fetch entries.","error")}finally{o(!1)}}},[s,Q]),z=te.useCallback(async ae=>{if($.current.has(ae)||!s)return;const Se=n.findIndex(Ce=>Ce.id===ae);if(Se!==-1&&!n[Se].isDecrypted){$.current.add(ae),i(Ce=>Ce.map(Pe=>Pe.id===ae?{...Pe,isLoading:!0}:Pe));try{const{data:Ce,error:Pe}=await Kt.from("diaries").select("encrypted_entry, iv").eq("id",ae).single();if(Pe)throw Pe;const Ve=await h(s,Ce.encrypted_entry,Ce.iv),{title:Ye,content:nt,audio:pt}=JSON.parse(Ve);i(Ze=>Ze.map(qe=>qe.id===ae?{...qe,title:Ye,content:nt,audio:pt,isDecrypted:!0,isLoading:!1}:qe))}catch(Ce){console.error(`Error decrypting entry ${ae}:`,Ce),i(Pe=>Pe.map(Ve=>Ve.id===ae?{...Ve,isLoading:!1}:Ve))}finally{$.current.delete(ae)}}},[n,s,h]);te.useEffect(()=>{c==="ready"&&(D(),L())},[D,L,c]);const q=te.useMemo(()=>{const ae=new Set;return n.forEach(Se=>{Se.journal?ae.add(Se.journal):ae.add("Personal")}),Array.from(ae).sort()},[n]),U=ae=>{const Ce=new DOMParser().parseFromString(ae,"text/html");return Ce.querySelectorAll("img.secure-diary-image").forEach(Ve=>{var Ye;(Ye=Ve.getAttribute("src"))!=null&&Ye.startsWith("blob:")&&Ve.setAttribute("src",jP)}),Ce.body.innerHTML},K=te.useCallback(async ae=>{if(!s){Q("Security session expired.","error");return}C("encrypting");try{const Se=ae.id?n.find(Lt=>Lt.id===ae.id):null,Ce=[];Se&&Se.audio&&(Array.isArray(Se.audio)?Ce.push(...Se.audio):Ce.push({...Se.audio,id:"legacy"}));let Pe=[];if(ae.audio){const Lt=new Set(ae.audio.map(Dt=>Dt.id)),lt=Ce.filter(Dt=>!Lt.has(Dt.id));if(lt.length>0){console.log(`Deleting ${lt.length} orphaned audio files...`);const Dt=lt.map(Pt=>Pt.path),{error:wt}=await Kt.storage.from("diary-audio").remove(Dt);wt&&console.error("Failed to cleanup audio files:",wt)}Pe=[...ae.audio]}else Pe=[...Ce];if(ae.tempAudioBlobs&&ae.tempAudioBlobs.length>0)for(const Lt of ae.tempAudioBlobs)try{const lt=await Lt.blob.arrayBuffer(),{iv:Dt,data:wt}=await d(s,lt),Pt=new Blob([wt],{type:"application/octet-stream"}),br=`${t.user.id}/${Date.now()}-${Lt.id}.bin`,{error:xt}=await Kt.storage.from("diary-audio").upload(br,Pt,{upsert:!0});if(xt)throw xt;Pe.push({id:Lt.id,path:br,iv:Dt,type:Lt.blob.type})}catch(lt){console.error("Audio upload failed",lt),Q("Failed to secure one or more audio notes.","error")}if(Se&&Se.content){const Lt=Zj(Se.content,ae.content);if(Lt.length>0){console.log(`Deleting ${Lt.length} removed images...`);const{error:lt}=await Kt.storage.from("diary-images").remove(Lt);lt&&console.error("Failed to cleanup image files:",lt)}}const Ve=U(ae.content),Ye=JSON.stringify({title:ae.title,content:Ve,audio:Pe}),{iv:nt,data:pt}=await u(s,Ye),Ze=!!ae.id,qe={encrypted_entry:pt,iv:nt,mood:ae.mood,tags:ae.tags,journal:ae.journal||"Personal",created_at:ae.created_at};if(Ze){const{error:Lt}=await Kt.from("diaries").update(qe).eq("id",ae.id);if(Lt)throw Lt;i(lt=>lt.map(Dt=>Dt.id===ae.id?{...Dt,...ae,audio:Pe,tempAudioBlobs:[],isDecrypted:!0}:Dt)),Q("Entry saved!","success"),X(`/app/entry/${ae.id}`)}else{const{data:Lt,error:lt}=await Kt.from("diaries").insert({...qe,owner_id:t.user.id}).select("id, created_at, mood, tags, owner_id, journal").single();if(lt)throw lt;const Dt={...Lt,...ae,audio:Pe,tempAudioBlobs:[],id:Lt.id,isDecrypted:!0,isLoading:!1};i(wt=>[Dt,...wt].sort((Pt,br)=>new Date(br.created_at).getTime()-new Date(Pt.created_at).getTime())),Q("Entry created!","success"),X(`/app/entry/${Lt.id}`)}C("synced"),T(!1),j(null)}catch(Se){console.error("Error saving entry:",Se),Q("Failed to save entry.","error"),C("error")}},[s,t.user.id,u,d,Q,n,X]),ne=te.useCallback(async ae=>{const Se=ae.tags||[],Pe=Qj(ae.content).filter(Ve=>!Se.some(Ye=>Ye.toLowerCase()===Ve.toLowerCase()));Pe.length>0?(j(ae),R(Pe),T(!0)):await K(ae)},[K]),ie=ae=>{if(k){const Se=k.title||"",Ce=k.content||"",Pe=k.created_at||new Date().toISOString();K({...k,title:Se,content:Ce,created_at:Pe,tags:ae})}},he=()=>{if(k){const ae=k.title||"",Se=k.content||"",Ce=k.created_at||new Date().toISOString();K({...k,title:ae,content:Se,created_at:Ce})}},ye=async ae=>{try{const Se=n.find(Pe=>Pe.id===ae);if(Se){if(Se.isDecrypted&&Se.content){const Pe=jg(Se.content);Pe.length>0&&(await Kt.storage.from("diary-images").remove(Pe),console.log(`Cleaned up ${Pe.length} image files.`))}if(Se.audio){const Pe=Array.isArray(Se.audio)?Se.audio:[Se.audio];if(Pe.length>0){const Ve=Pe.map(Ye=>Ye.path).filter(Boolean);Ve.length>0&&(await Kt.storage.from("diary-audio").remove(Ve),console.log(`Cleaned up ${Ve.length} audio files.`))}}}const{error:Ce}=await Kt.from("diaries").delete().eq("id",ae);if(Ce)throw Ce;i(Pe=>Pe.filter(Ve=>Ve.id!==ae)),Q("Entry deleted successfully.","success"),X("/app")}catch(Se){console.error("Error deleting entry:",Se),Q("Failed to delete entry.","error")}},Oe=async ae=>{try{const{data:Se,error:Ce}=await Kt.from("profiles").update(ae).eq("id",t.user.id).select().single();if(Ce)throw Ce;w(Se),Q("Profile updated successfully!","success")}catch(Se){Q("Failed to update profile.","error"),console.error("Error updating profile:",Se)}},Le=async ae=>{try{const Se=ae.name.split(".").pop(),Ce=`${t.user.id}/${Date.now()}.${Se}`,{error:Pe}=await Kt.storage.from("avatars").upload(Ce,ae,{upsert:!0});if(Pe)throw Pe;const{error:Ve}=await Kt.from("profiles").update({avatar_url:Ce}).eq("id",t.user.id);if(Ve)throw Ve;w(Ye=>Ye?{...Ye,avatar_url:Ce}:null)}catch(Se){throw console.error("Error uploading avatar:",Se),Se}},He=async ae=>{if(s)try{const{count:Se,error:Ce}=await Kt.from("diaries").select("*",{count:"exact",head:!0});if(Ce)throw Ce;const Pe=Se||0;if(Pe===0){Q("No entries to export.","info");return}const Ve=new fS("application/zip"),Ye=new hS(Ve),nt=50;let pt=0,Ze=[],qe="";for(let wt=0;wt<Pe;wt+=nt){ae(`Processing ${pt} / ${Pe}`),await Cw();const{data:Pt,error:br}=await Kt.from("diaries").select("*").order("created_at",{ascending:!1}).range(wt,wt+nt-1);if(br)throw br;if(Pt)for(const xt of Pt){try{const Xr=await h(s,xt.encrypted_entry,xt.iv),Ht=JSON.parse(Xr),_r=new Date(xt.created_at),fn=`${_r.getFullYear()}-${String(_r.getMonth()+1).padStart(2,"0")}`;qe&&fn!==qe&&Ze.length>0&&(await Ye.add(`${qe}.json`,new Zv(JSON.stringify(Ze,null,2))),Ze=[],await Cw()),qe=fn,Ze.push({id:xt.id,created_at:xt.created_at,title:Ht.title,content:Ht.content,tags:xt.tags,mood:xt.mood,journal:xt.journal,audio:Ht.audio?"Audio file attached":void 0})}catch(Xr){console.error(`Failed to export entry ${xt.id}`,Xr)}pt++}}Ze.length>0&&await Ye.add(`${qe}.json`,new Zv(JSON.stringify(Ze,null,2))),ae("Finalizing ZIP...");const Lt=await Ye.close(),lt=URL.createObjectURL(Lt),Dt=document.createElement("a");Dt.href=lt,Dt.download=`diary_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(Dt),Dt.click(),document.body.removeChild(Dt),URL.revokeObjectURL(lt),Q("Export complete!","success")}catch(Se){console.error("Export failed:",Se),Q("Export failed.","error")}},_e=async()=>{await Kt.auth.signOut(),X("/")};let se="timeline";G.pathname.includes("/calendar")?se="calendar":G.pathname.includes("/search")?se="search":G.pathname.includes("/profile")&&(se="profile");const ve=new URLSearchParams(G.search).get("journal"),de=ae=>{X(ae?`/app?journal=${encodeURIComponent(ae)}`:"/app")},ge=ae=>{X(ae==="timeline"?"/app":`/app/${ae}`)};if(c!=="ready"){let ae;switch(c){case"checking":ae=x.jsx("p",{children:"Initializing Secure Session..."});break;case"needed":ae=x.jsx(xP,{onSuccess:B,session:t});break;case"reauth":ae=x.jsx(NP,{onSuccess:B,session:t});break;default:ae=x.jsx("p",{children:"An unexpected error occurred."})}return x.jsx("main",{className:"flex items-center justify-center h-screen bg-[#FBF8F3] dark:bg-slate-900 text-slate-800 dark:text-slate-200",children:ae})}const Ne={entries:n,profile:v,loading:a,weather:A,uniqueJournals:q,refreshEntries:D,loadEntryContent:z,saveEntry:ne,deleteEntry:ye,updateProfile:Oe,uploadAvatar:Le,exportData:He,theme:e,onToggleTheme:r,key:s,encryptBinary:d,session:t,signOut:_e,registerSaveHandler:H,isToolsPanelVisible:b,setToolsPanelVisible:_};return x.jsxs("div",{className:"h-screen w-screen flex flex-col font-sans bg-[#FBF8F3] dark:bg-slate-900",children:[x.jsx(xL,{isEditing:G.pathname.includes("/edit")||G.pathname.includes("/new"),onSave:()=>{Z.current?Z.current():console.warn("No save handler registered")},onCancel:()=>X(-1),currentDate:new Date,weather:A,theme:e,onToggleTheme:r,saveStatus:E,profile:v,onShowProfile:()=>X("/app/profile"),isToolsPanelVisible:b,onToggleToolsPanel:()=>_(ae=>!ae),isLeftSidebarVisible:p}),!p&&x.jsx(EP,{onClick:()=>g(!0)}),p&&x.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-20 md:hidden",onClick:()=>g(!1),"aria-hidden":"true"}),x.jsxs("div",{className:`flex flex-1 overflow-hidden transition-all duration-300 ${p?"md:pl-64":"pl-0"} relative`,children:[x.jsx(eO,{isVisible:p,onClose:()=>g(!1),activeView:se,onChangeView:ge,onNewEntry:()=>X("/app/new"),journals:q,activeJournal:ve,onSelectJournal:de}),x.jsx("main",{className:"flex-1 p-4 sm:p-6 md:p-8 overflow-y-auto min-w-0 w-full relative",children:x.jsx(_6,{context:Ne})})]}),x.jsx(AP,{isOpen:F,existingTags:(k==null?void 0:k.tags)||[],suggestedTags:I,onConfirm:ie,onCancel:he})]})};function au(){return r6()}const LP=({entries:t,onSelectEntry:e})=>t.length===0?null:x.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-slate-800/50 dark:to-slate-800/50 p-6 rounded-lg border border-indigo-200 dark:border-slate-700 shadow-sm",children:[x.jsxs("h3",{className:"text-lg font-bold text-indigo-800 dark:text-indigo-300 mb-4 flex items-center gap-2",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l-3-3m0 0l3-3m-3 3h9"})]}),"On This Day..."]}),x.jsx("div",{className:"space-y-3",children:t.map(r=>{const n=new Date(r.created_at).getFullYear(),i=new Date().getFullYear()-n;return x.jsxs("div",{onClick:()=>e(r.id),className:"bg-white/60 dark:bg-slate-700/50 p-3 rounded-md cursor-pointer hover:bg-white dark:hover:bg-slate-700 transition-colors flex justify-between items-center",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:r.title}),x.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i," year",i>1?"s":""," ago"]})]}),x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]},r.id)})})]}),Z_=t=>{try{const e=new Date(t);return vL(e)?j_(e,{addSuffix:!0}):wL(e)?"Yesterday":gL(e,{weekStartsOn:0})?Qc(e,"EEEE"):Qc(e,"MMMM d, yyyy")}catch(e){return console.error("Error formatting date:",t,e),"Invalid date"}},PP=t=>{try{const e=new Date(t);return Qc(e,"EEEE, MMMM d, yyyy 'at' p")}catch(e){return console.error("Error formatting full date:",t,e),"Invalid date"}},TP=t=>{try{const e=new Date(t);return j_(e,{addSuffix:!0})}catch(e){return console.error("Error formatting relative time:",t,e),"Invalid time"}},CP=({entry:t,onLoadContent:e})=>{const r=te.useRef(null);te.useEffect(()=>{if(t.isDecrypted||t.isLoading)return;const i=new IntersectionObserver(a=>{a[0].isIntersecting&&(e(t.id),i.disconnect())},{rootMargin:"100px"});return r.current&&i.observe(r.current),()=>i.disconnect()},[t.id,t.isDecrypted,t.isLoading,e]);const n=i=>new DOMParser().parseFromString(i,"text/html").body.textContent||"";return x.jsxs(Yl,{ref:r,to:`/app/entry/${t.id}`,className:"block bg-white/50 dark:bg-slate-800/50 p-6 rounded-lg shadow-sm hover:shadow-lg transition-shadow duration-300 cursor-pointer border border-slate-200 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-600",children:[x.jsxs("div",{className:"flex justify-between items-start gap-4",children:[x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v11.494m0-11.494M12 6.253a4.093 4.093 0 00-3.32 6.19l-2.06 2.06a1 1 0 001.42 1.42l2.06-2.06A4.094 4.094 0 0012 17.747m0 0a4.093 4.093 0 003.32-6.19l2.06-2.06a1 1 0 00-1.42-1.42l-2.06 2.06A4.094 4.094 0 0012 6.253z"})}),x.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:t.journal||"Personal"})]}),t.isDecrypted?x.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:t.title||"Untitled"}):x.jsx("div",{className:"h-7 bg-slate-200 dark:bg-slate-700 rounded w-48 animate-pulse"})]}),x.jsxs("div",{className:"text-right flex-shrink-0",children:[x.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 whitespace-nowrap",title:new Date(t.created_at).toLocaleString(),children:Z_(t.created_at)}),t.mood&&x.jsx("span",{className:"text-lg block mt-1","aria-label":`Mood: ${t.mood}`,children:t.mood})]})]}),t.tags&&t.tags.length>0&&x.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.tags.map(i=>x.jsx("span",{className:"text-xs font-medium bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded-full dark:bg-indigo-900/50 dark:text-indigo-300",children:i},i))}),x.jsx("div",{className:"mt-3",children:t.isDecrypted?x.jsx("p",{className:"text-slate-600 dark:text-slate-300 line-clamp-2",children:n(t.content)}):x.jsxs("div",{className:"space-y-2 animate-pulse mt-2",children:[x.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full"}),x.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-5/6"})]})})]})},RP=({entries:t,onSelectEntry:e,onLoadContent:r,onThisDayEntries:n,profile:i,filteredDate:a,onClearFilter:o})=>t.length===0?a?x.jsxs("div",{className:"text-center py-20 flex flex-col items-center",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-20 w-20 text-slate-300 dark:text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 4h-4m-4-4h-4"})]}),x.jsxs("h2",{className:"mt-6 text-2xl font-bold text-slate-700 dark:text-slate-200",children:["No entries found for ",a.toLocaleDateString("default",{month:"long",day:"numeric",year:"numeric"}),"."]}),x.jsx("button",{onClick:o,className:"mt-4 text-indigo-600 dark:text-indigo-400 hover:underline font-semibold",children:"Show All Entries"})]}):x.jsxs("div",{className:"text-center py-20 flex flex-col items-center",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-20 w-20 text-slate-300 dark:text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v11.494m-9-5.747h18"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]}),x.jsxs("h2",{className:"mt-6 text-3xl font-bold text-slate-700 dark:text-slate-200",children:["Welcome to Diary, ",(i==null?void 0:i.full_name)||"friend","!"]}),x.jsx("p",{className:"mt-2 text-slate-500 dark:text-slate-400",children:"This is your private, encrypted space to reflect and record."}),x.jsx("p",{className:"mt-4 text-slate-500 dark:text-slate-400",children:'Click "New Entry" to write your first post.'})]}):x.jsxs("div",{className:"space-y-6",children:[a?x.jsxs("div",{className:"bg-indigo-50 dark:bg-slate-800/50 p-4 rounded-lg border border-indigo-200 dark:border-slate-700 flex justify-between items-center",children:[x.jsxs("h3",{className:"text-lg font-bold text-indigo-800 dark:text-indigo-300",children:["Showing entries for ",a.toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric"})]}),x.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-sm font-semibold text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"Show All"]})]}):x.jsx(LP,{entries:n,onSelectEntry:e}),!a&&x.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Welcome back, ",(i==null?void 0:i.full_name)||"friend","!"]}),x.jsx("div",{className:"space-y-4",children:t.map(s=>x.jsx(CP,{entry:s,onLoadContent:r},s.id))})]}),IP=()=>{const{entries:t,loadEntryContent:e,profile:r}=au(),[n,i]=te.useState(null),a=Qi(),o=Ha(),s=new URLSearchParams(a.search),l=s.get("journal"),u=s.get("date");te.useEffect(()=>{if(u){const c=new Date(u);isNaN(c.getTime())||i(c)}else i(null)},[u]);const h=te.useMemo(()=>{const c=new Date,y=c.getMonth(),v=c.getDate();return t.filter(w=>{const p=new Date(w.created_at);return p.getMonth()===y&&p.getDate()===v&&p.getFullYear()<c.getFullYear()}).sort((w,p)=>new Date(p.created_at).getTime()-new Date(w.created_at).getTime())},[t]);let d=t;if(l&&(d=d.filter(c=>(c.journal||"Personal")===l)),n){const c=n.toISOString().split("T")[0];d=d.filter(y=>{const v=new Date(y.created_at),w=v.getTimezoneOffset();return new Date(v.getTime()-w*60*1e3).toISOString().split("T")[0]===c})}const f=()=>{i(null),o("/app")};return x.jsx(RP,{entries:d,onThisDayEntries:h,onSelectEntry:()=>{},onLoadContent:e,profile:r,filteredDate:n,onClearFilter:f})},Rw=t=>new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().split("T")[0],DP=({entries:t,onSelectDate:e,onBack:r})=>{const[n,i]=te.useState(new Date),a=te.useMemo(()=>{const h=new Set;return t.forEach(d=>{h.add(Rw(new Date(d.created_at)))}),h},[t]),o=h=>{i(d=>{const f=new Date(d);return f.setMonth(f.getMonth()+h),f})},s=()=>x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsx("button",{onClick:()=>o(-1),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:"<"}),x.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200",children:n.toLocaleString("default",{month:"long",year:"numeric"})}),x.jsx("button",{onClick:()=>o(1),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:">"})]}),l=()=>{const h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return x.jsx("div",{className:"grid grid-cols-7 gap-1 text-center font-semibold text-slate-500 dark:text-slate-400 text-sm",children:h.map(d=>x.jsx("div",{children:d},d))})},u=()=>{const h=new Date(n.getFullYear(),n.getMonth(),1),d=new Date(n.getFullYear(),n.getMonth()+1,0),f=new Date(h);f.setDate(f.getDate()-h.getDay());const c=new Date(d);c.setDate(c.getDate()+(6-d.getDay()));const y=[];let v=[],w=f;for(;w<=c;){for(let p=0;p<7;p++){const g=new Date(w),b=Rw(g),_=a.has(b);v.push(x.jsxs("div",{className:`p-1 h-20 flex flex-col items-center justify-center rounded-lg transition-colors ${g.getMonth()!==n.getMonth()?"text-slate-300 dark:text-slate-600":"text-slate-700 dark:text-slate-300"} ${_?"cursor-pointer bg-indigo-100 hover:bg-indigo-200 dark:bg-indigo-500/20 dark:hover:bg-indigo-500/30":""}`,onClick:_?()=>e(g):void 0,children:[x.jsx("span",{className:`text-sm ${new Date().toDateString()===g.toDateString()?"bg-indigo-500 text-white rounded-full h-6 w-6 flex items-center justify-center":""}`,children:g.getDate()}),_&&x.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 dark:bg-indigo-400 rounded-full mt-1"})]},w.toString())),w.setDate(w.getDate()+1)}y.push(x.jsx("div",{className:"grid grid-cols-7 gap-1",children:v},w.toString())),v=[]}return x.jsx("div",{className:"space-y-1",children:y})};return x.jsxs("div",{className:"animate-fade-in",children:[x.jsxs("button",{onClick:r,className:"mb-6 flex items-center text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors group",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 transform group-hover:-translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Timeline"]}),x.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 sm:p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[s(),l(),x.jsx("div",{className:"mt-2",children:u()})]})]})},MP=()=>{const{entries:t}=au(),e=Ha(),r=n=>{const i=n.getTimezoneOffset(),o=new Date(n.getTime()-i*60*1e3).toISOString().split("T")[0];e(`/app?date=${o}`)};return x.jsx(DP,{entries:t,onSelectDate:r,onBack:()=>e("/app")})},FP=["","","","","","","",""],BP=({entries:t,onSelectEntry:e,onBack:r})=>{const[n,i]=te.useState(""),[a,o]=te.useState(null),[s,l]=te.useState([]),[u,h]=te.useState(""),[d,f]=te.useState(""),[c,y]=te.useState(!1),[v,w]=te.useState(!1),[p,g]=te.useState(!1),b=te.useRef(null),_=te.useRef(null),E=te.useRef(null);te.useEffect(()=>{const k=j=>{b.current&&!b.current.contains(j.target)&&y(!1),_.current&&!_.current.contains(j.target)&&w(!1),E.current&&!E.current.contains(j.target)&&g(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const C=te.useMemo(()=>{const k=new Set;return t.forEach(j=>{var I;(I=j.tags)==null||I.forEach(R=>k.add(R))}),Array.from(k).sort()},[t]),A=k=>new DOMParser().parseFromString(k,"text/html").body.textContent||"",P=te.useMemo(()=>n.trim()!==""||a||s.length>0||u||d?t.filter(j=>{const I=n.toLowerCase(),R=n.trim()===""||(j.title||"").toLowerCase().includes(I)||A(j.content||"").toLowerCase().includes(I),$=!a||j.mood===a,Z=s.length===0||s.every(X=>{var G;return(G=j.tags)==null?void 0:G.includes(X)});let Q=!0;if(u||d){const X=new Date(j.created_at);if(X.setHours(0,0,0,0),u){const G=new Date(u+"T00:00:00");X<G&&(Q=!1)}if(d){const G=new Date(d+"T00:00:00");X>G&&(Q=!1)}}return R&&$&&Z&&Q}):[],[t,n,a,s,u,d]),F=k=>{l(j=>j.includes(k)?j.filter(I=>I!==k):[...j,k])},T=n.trim()!==""||a||s.length>0||u||d;return x.jsxs("div",{className:"space-y-6 animate-fade-in",children:[x.jsxs("button",{onClick:r,className:"flex items-center text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors group",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 transform group-hover:-translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Timeline"]}),x.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[x.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Search Past Entries"}),x.jsxs("div",{className:"relative",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400 absolute left-4 top-1/2 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),x.jsx("input",{type:"search",placeholder:"Search by keywords, title, or date...",value:n,onChange:k=>i(k.target.value),className:"w-full pl-11 pr-4 py-3 border border-slate-300 dark:border-slate-600 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base dark:bg-slate-700 dark:text-slate-200 dark:placeholder-slate-400","aria-label":"Search diary entries"})]}),x.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[x.jsxs("div",{className:"relative",ref:b,children:[x.jsxs("button",{onClick:()=>y(k=>!k),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-slate-100 dark:bg-slate-700 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),x.jsx("span",{children:"Date Range"})]}),c&&x.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-slate-800 p-4 rounded-lg shadow-xl border dark:border-slate-700 z-10 w-64 space-y-3",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"From"}),x.jsx("input",{type:"date",value:u,onChange:k=>h(k.target.value),className:"w-full mt-1 border border-slate-300 rounded-md p-1.5 text-sm dark:bg-slate-700 dark:border-slate-600 dark:[color-scheme:dark]"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"To"}),x.jsx("input",{type:"date",value:d,onChange:k=>f(k.target.value),className:"w-full mt-1 border border-slate-300 rounded-md p-1.5 text-sm dark:bg-slate-700 dark:border-slate-600 dark:[color-scheme:dark]"})]})]})]}),x.jsxs("div",{className:"relative",ref:_,children:[x.jsxs("button",{onClick:()=>w(k=>!k),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-slate-100 dark:bg-slate-700 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600",children:[a?x.jsx("span",{className:"text-lg",children:a}):x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-.464 5.535a.5.5 S0 01.708 0 5 5 0 01-6.488 0 .5.5 0 01.708-.707A4 4 0 0013 12.5a.5.5 0 01.535.464z",clipRule:"evenodd"})}),x.jsx("span",{children:"Mood"})]}),v&&x.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-slate-800 p-2 rounded-lg shadow-xl border dark:border-slate-700 z-10 grid grid-cols-4 gap-2 w-64",children:FP.map(k=>x.jsx("button",{type:"button",onClick:()=>{o(k===a?null:k),w(!1)},className:`text-3xl p-2 rounded-md transition-all ${a===k?"bg-indigo-100 dark:bg-indigo-500/50 scale-110":"hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:k},k))})]}),x.jsxs("div",{className:"relative",ref:E,children:[x.jsxs("button",{onClick:()=>g(k=>!k),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-slate-100 dark:bg-slate-700 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M5.5 16a3.5 3.5 0 01-3.5-3.5V5.5A3.5 3.5 0 015.5 2h5.086a2 2 0 011.414.586l4.414 4.414a2 2 0 01.586 1.414V12.5A3.5 3.5 0 0113.5 16h-8z"})}),x.jsx("span",{children:"Tags"})]}),p&&x.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-slate-800 p-3 rounded-lg shadow-xl border dark:border-slate-700 z-10 w-64 max-h-60 overflow-y-auto",children:C.length>0?x.jsx("div",{className:"flex flex-col gap-2",children:C.map(k=>x.jsxs("label",{className:"flex items-center gap-2 p-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:s.includes(k),onChange:()=>F(k),className:"h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-slate-300 dark:border-slate-600 dark:bg-slate-900 dark:checked:bg-indigo-500"}),x.jsx("span",{className:"text-sm",children:k})]},k))}):x.jsx("p",{className:"text-sm text-slate-500",children:"No tags found."})})]})]})]}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Search Results"}),n.length>0&&x.jsx("p",{className:"text-xs text-slate-500 mb-4 bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded border border-yellow-200 dark:border-yellow-800",children:"Note: Text search only searches entries that have been viewed (decrypted) in this session. Tags and Moods search all entries."}),T?P.length>0?x.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(k=>x.jsxs("div",{onClick:()=>e(k.id),className:"bg-white dark:bg-slate-800 p-5 rounded-lg shadow-sm hover:shadow-lg transition-shadow duration-300 cursor-pointer border border-slate-200 dark:border-slate-700 flex flex-col",children:[x.jsxs("div",{className:"flex justify-between items-start gap-3",children:[k.isDecrypted?x.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100 line-clamp-1",children:k.title}):x.jsx("div",{className:"h-6 bg-slate-200 dark:bg-slate-700 rounded w-3/4 animate-pulse"}),k.mood&&x.jsx("span",{className:"text-2xl","aria-label":`Mood: ${k.mood}`,children:k.mood})]}),x.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1 mb-3",title:new Date(k.created_at).toLocaleString(),children:Z_(k.created_at)}),x.jsx("div",{className:"flex-grow",children:k.isDecrypted?x.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 line-clamp-3",children:A(k.content)}):x.jsxs("div",{className:"space-y-2 animate-pulse",children:[x.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-full"}),x.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-5/6"})]})})]},k.id))}):x.jsxs("div",{className:"text-center py-16",children:[x.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-300",children:"No Entries Found"}),x.jsx("p",{className:"mt-2 text-slate-500 dark:text-slate-400",children:"Try adjusting your search or filter criteria."})]}):x.jsx("div",{className:"text-center py-16",children:x.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Use the search bar or filters above to find your entries."})})]})]})},UP=()=>{const{entries:t}=au(),e=Ha();return x.jsx(BP,{entries:t,onSelectEntry:r=>e(`/app/entry/${r}`),onBack:()=>e("/app")})};var Iw=!1,us,zg,qg,Zf,eh,e3,th,$g,Hg,Wg,t3,Vg,Gg,r3,n3;function Hn(){if(!Iw){Iw=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),r=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(Vg=/\b(iPhone|iP[ao]d)/.exec(t),Gg=/\b(iP[ao]d)/.exec(t),Wg=/Android/i.exec(t),r3=/FBAN\/\w+;/i.exec(t),n3=/Mobile/i.exec(t),t3=!!/Win64/.exec(t),e){us=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,us&&document&&document.documentMode&&(us=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(t);e3=n?parseFloat(n[1])+4:us,zg=e[2]?parseFloat(e[2]):NaN,qg=e[3]?parseFloat(e[3]):NaN,Zf=e[4]?parseFloat(e[4]):NaN,Zf?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),eh=e&&e[1]?parseFloat(e[1]):NaN):eh=NaN}else us=zg=qg=eh=Zf=NaN;if(r){if(r[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);th=i?parseFloat(i[1].replace("_",".")):!0}else th=!1;$g=!!r[2],Hg=!!r[3]}else th=$g=Hg=!1}}var Kg={ie:function(){return Hn()||us},ieCompatibilityMode:function(){return Hn()||e3>us},ie64:function(){return Kg.ie()&&t3},firefox:function(){return Hn()||zg},opera:function(){return Hn()||qg},webkit:function(){return Hn()||Zf},safari:function(){return Kg.webkit()},chrome:function(){return Hn()||eh},windows:function(){return Hn()||$g},osx:function(){return Hn()||th},linux:function(){return Hn()||Hg},iphone:function(){return Hn()||Vg},mobile:function(){return Hn()||Vg||Gg||Wg||n3},nativeApp:function(){return Hn()||r3},android:function(){return Hn()||Wg},ipad:function(){return Hn()||Gg}},zP=Kg,qP=!!(typeof window<"u"&&window.document&&window.document.createElement),$P={canUseDOM:qP},HP=$P,i3=HP,a3;i3.canUseDOM&&(a3=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function WP(t,e){if(!i3.canUseDOM||e&&!("addEventListener"in document))return!1;var r="on"+t,n=r in document;if(!n){var i=document.createElement("div");i.setAttribute(r,"return;"),n=typeof i[r]=="function"}return!n&&a3&&t==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var VP=WP,GP=zP,KP=VP,Dw=10,Mw=40,Fw=800;function o3(t){var e=0,r=0,n=0,i=0;return"detail"in t&&(r=t.detail),"wheelDelta"in t&&(r=-t.wheelDelta/120),"wheelDeltaY"in t&&(r=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=r,r=0),n=e*Dw,i=r*Dw,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||i)&&t.deltaMode&&(t.deltaMode==1?(n*=Mw,i*=Mw):(n*=Fw,i*=Fw)),n&&!e&&(e=n<1?-1:1),i&&!r&&(r=i<1?-1:1),{spinX:e,spinY:r,pixelX:n,pixelY:i}}o3.getEventType=function(){return GP.firefox()?"DOMMouseScroll":KP("wheel")?"wheel":"mousewheel"};var YP=o3,JP=YP;const XP=$h(JP);function QP(t,e,r,n,i,a){a===void 0&&(a=0);var o=Xl(t,e,a),s=o.width,l=o.height,u=Math.min(s,r),h=Math.min(l,n);return u>h*i?{width:h*i,height:h}:{width:u,height:u/i}}function ZP(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function tc(t,e,r,n,i){i===void 0&&(i=0);var a=Xl(e.width,e.height,i),o=a.width,s=a.height;return{x:Bw(t.x,o,r.width,n),y:Bw(t.y,s,r.height,n)}}function Bw(t,e,r,n){var i=e*n/2-r/2;return bp(t,-i,i)}function Uw(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function zw(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function eT(t,e,r,n,i,a,o){a===void 0&&(a=0),o===void 0&&(o=!0);var s=o?tT:rT,l=Xl(e.width,e.height,a),u=Xl(e.naturalWidth,e.naturalHeight,a),h={x:s(100,((l.width-r.width/i)/2-t.x/i)/l.width*100),y:s(100,((l.height-r.height/i)/2-t.y/i)/l.height*100),width:s(100,r.width/l.width*100/i),height:s(100,r.height/l.height*100/i)},d=Math.round(s(u.width,h.width*u.width/100)),f=Math.round(s(u.height,h.height*u.height/100)),c=u.width>=u.height*n,y=c?{width:Math.round(f*n),height:f}:{width:d,height:Math.round(d/n)},v=Hr(Hr({},y),{x:Math.round(s(u.width-y.width,h.x*u.width/100)),y:Math.round(s(u.height-y.height,h.y*u.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:v}}function tT(t,e){return Math.min(t,Math.max(0,e))}function rT(t,e){return e}function nT(t,e,r,n,i,a){var o=Xl(e.width,e.height,r),s=bp(n.width/o.width*(100/t.width),i,a),l={x:s*o.width/2-n.width/2-o.width*s*(t.x/100),y:s*o.height/2-n.height/2-o.height*s*(t.y/100)};return{crop:l,zoom:s}}function iT(t,e,r){var n=ZP(e);return r.height>r.width?r.height/(t.height*n):r.width/(t.width*n)}function aT(t,e,r,n,i,a){r===void 0&&(r=0);var o=Xl(e.naturalWidth,e.naturalHeight,r),s=bp(iT(t,e,n),i,a),l=n.height>n.width?n.height/t.height:n.width/t.width,u={x:((o.width-t.width)/2-t.x)*l,y:((o.height-t.height)/2-t.y)*l};return{crop:u,zoom:s}}function qw(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function oT(t){return t*Math.PI/180}function Xl(t,e,r){var n=oT(r);return{width:Math.abs(Math.cos(n)*t)+Math.abs(Math.sin(n)*e),height:Math.abs(Math.sin(n)*t)+Math.abs(Math.cos(n)*e)}}function bp(t,e,r){return Math.min(Math.max(t,e),r)}function Of(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(r){return typeof r=="string"&&r.length>0}).join(" ").trim()}var sT=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,lT=1,uT=3,cT=1,dT=function(t){ov(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.cropperRef=te.createRef(),r.imageRef=te.createRef(),r.videoRef=te.createRef(),r.containerPosition={x:0,y:0},r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc=typeof document<"u"?document:null,r.currentWindow=typeof window<"u"?window:null,r.resizeObserver=null,r.previousCropSize=null,r.isInitialized=!1,r.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},r.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!r.containerRef)){var n=!0;r.resizeObserver=new window.ResizeObserver(function(i){if(n){n=!1;return}r.computeSizes()}),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(n){return n.preventDefault()},r.cleanEvents=function(){r.currentDoc&&(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturechange",r.onGestureChange),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd),r.currentDoc.removeEventListener("scroll",r.onScroll))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var n=r.computeSizes();n&&(r.previousCropSize=n,r.emitCropData(),r.setInitialCrop(n),r.isInitialized=!0),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(n){if(r.props.initialCroppedAreaPercentages){var i=nT(r.props.initialCroppedAreaPercentages,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),a=i.crop,o=i.zoom;r.props.onCropChange(a),r.props.onZoomChange&&r.props.onZoomChange(o)}else if(r.props.initialCroppedAreaPixels){var s=aT(r.props.initialCroppedAreaPixels,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),a=s.crop,o=s.zoom;r.props.onCropChange(a),r.props.onZoomChange&&r.props.onZoomChange(o)}},r.computeSizes=function(){var n,i,a,o,s,l,u=r.imageRef.current||r.videoRef.current;if(u&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect(),r.saveContainerPosition();var h=r.containerRect.width/r.containerRect.height,d=((n=r.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((i=r.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,f=((a=r.imageRef.current)===null||a===void 0?void 0:a.naturalHeight)||((o=r.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,c=u.offsetWidth<d||u.offsetHeight<f,y=d/f,v=void 0;if(c)switch(r.state.mediaObjectFit){default:case"contain":v=h>y?{width:r.containerRect.height*y,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/y};break;case"horizontal-cover":v={width:r.containerRect.width,height:r.containerRect.width/y};break;case"vertical-cover":v={width:r.containerRect.height*y,height:r.containerRect.height};break}else v={width:u.offsetWidth,height:u.offsetHeight};r.mediaSize=Hr(Hr({},v),{naturalWidth:d,naturalHeight:f}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var w=r.props.cropSize?r.props.cropSize:QP(r.mediaSize.width,r.mediaSize.height,r.containerRect.width,r.containerRect.height,r.props.aspect,r.props.rotation);return(((s=r.state.cropSize)===null||s===void 0?void 0:s.height)!==w.height||((l=r.state.cropSize)===null||l===void 0?void 0:l.width)!==w.width)&&r.props.onCropSizeChange&&r.props.onCropSizeChange(w),r.setState({cropSize:w},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(w),w}},r.saveContainerPosition=function(){if(r.containerRef){var n=r.containerRef.getBoundingClientRect();r.containerPosition={x:n.left,y:n.top}}},r.onMouseDown=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.saveContainerPosition(),r.onDragStart(e.getMousePoint(n)))},r.onMouseMove=function(n){return r.onDrag(e.getMousePoint(n))},r.onScroll=function(n){r.currentDoc&&(n.preventDefault(),r.saveContainerPosition())},r.onTouchStart=function(n){r.currentDoc&&(r.isTouching=!0,!(r.props.onTouchRequest&&!r.props.onTouchRequest(n))&&(r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),r.saveContainerPosition(),n.touches.length===2?r.onPinchStart(n):n.touches.length===1&&r.onDragStart(e.getTouchPoint(n.touches[0]))))},r.onTouchMove=function(n){n.preventDefault(),n.touches.length===2?r.onPinchMove(n):n.touches.length===1&&r.onDrag(e.getTouchPoint(n.touches[0]))},r.onGestureStart=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureChange),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureChange=function(n){if(n.preventDefault(),!r.isTouching){var i=e.getMousePoint(n),a=r.gestureZoomStart-1+n.scale;if(r.setNewZoom(a,i,{shouldUpdatePosition:!0}),r.props.onRotationChange){var o=r.gestureRotationStart+n.rotation;r.props.onRotationChange(o)}}},r.onGestureEnd=function(n){r.cleanEvents()},r.onDragStart=function(n){var i,a,o=n.x,s=n.y;r.dragStartPosition={x:o,y:s},r.dragStartCrop=Hr({},r.props.crop),(a=(i=r.props).onInteractionStart)===null||a===void 0||a.call(i)},r.onDrag=function(n){var i=n.x,a=n.y;r.currentWindow&&(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame(function(){if(r.state.cropSize&&!(i===void 0||a===void 0)){var o=i-r.dragStartPosition.x,s=a-r.dragStartPosition.y,l={x:r.dragStartCrop.x+o,y:r.dragStartCrop.y+s},u=r.props.restrictPosition?tc(l,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):l;r.props.onCropChange(u)}}))},r.onDragStopped=function(){var n,i;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),(i=(n=r.props).onInteractionEnd)===null||i===void 0||i.call(n)},r.onWheel=function(n){if(r.currentWindow&&!(r.props.onWheelRequest&&!r.props.onWheelRequest(n))){n.preventDefault();var i=e.getMousePoint(n),a=XP(n).pixelY,o=r.props.zoom-a*r.props.zoomSpeed/200;r.setNewZoom(o,i,{shouldUpdatePosition:!0}),r.state.hasWheelJustStarted||r.setState({hasWheelJustStarted:!0},function(){var s,l;return(l=(s=r.props).onInteractionStart)===null||l===void 0?void 0:l.call(s)}),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout(function(){return r.setState({hasWheelJustStarted:!1},function(){var s,l;return(l=(s=r.props).onInteractionEnd)===null||l===void 0?void 0:l.call(s)})},250)}},r.getPointOnContainer=function(n,i){var a=n.x,o=n.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(a-i.x),y:r.containerRect.height/2-(o-i.y)}},r.getPointOnMedia=function(n){var i=n.x,a=n.y,o=r.props,s=o.crop,l=o.zoom;return{x:(i+s.x)/l,y:(a+s.y)/l}},r.setNewZoom=function(n,i,a){var o=a===void 0?{}:a,s=o.shouldUpdatePosition,l=s===void 0?!0:s;if(!(!r.state.cropSize||!r.props.onZoomChange)){var u=bp(n,r.props.minZoom,r.props.maxZoom);if(l){var h=r.getPointOnContainer(i,r.containerPosition),d=r.getPointOnMedia(h),f={x:d.x*u-h.x,y:d.y*u-h.y},c=r.props.restrictPosition?tc(f,r.mediaSize,r.state.cropSize,u,r.props.rotation):f;r.props.onCropChange(c)}r.props.onZoomChange(u)}},r.getCropData=function(){if(!r.state.cropSize)return null;var n=r.props.restrictPosition?tc(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;return eT(n,r.mediaSize,r.state.cropSize,r.getAspect(),r.props.zoom,r.props.rotation,r.props.restrictPosition)},r.emitCropData=function(){var n=r.getCropData();if(n){var i=n.croppedAreaPercentages,a=n.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(i,a),r.props.onCropAreaChange&&r.props.onCropAreaChange(i,a)}},r.emitCropAreaChange=function(){var n=r.getCropData();if(n){var i=n.croppedAreaPercentages,a=n.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(i,a)}},r.recomputeCropPosition=function(){var n,i;if(r.state.cropSize){var a=r.props.crop;if(r.isInitialized&&(!((n=r.previousCropSize)===null||n===void 0)&&n.width)&&(!((i=r.previousCropSize)===null||i===void 0)&&i.height)){var o=Math.abs(r.previousCropSize.width-r.state.cropSize.width)>1e-6||Math.abs(r.previousCropSize.height-r.state.cropSize.height)>1e-6;if(o){var s=r.state.cropSize.width/r.previousCropSize.width,l=r.state.cropSize.height/r.previousCropSize.height;a={x:r.props.crop.x*s,y:r.props.crop.y*l}}}var u=r.props.restrictPosition?tc(a,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):a;r.previousCropSize=r.state.cropSize,r.props.onCropChange(u),r.emitCropData()}},r.onKeyDown=function(n){var i,a,o=r.props,s=o.crop,l=o.onCropChange,u=o.keyboardStep,h=o.zoom,d=o.rotation,f=u;if(r.state.cropSize){n.shiftKey&&(f*=.2);var c=Hr({},s);switch(n.key){case"ArrowUp":c.y-=f,n.preventDefault();break;case"ArrowDown":c.y+=f,n.preventDefault();break;case"ArrowLeft":c.x-=f,n.preventDefault();break;case"ArrowRight":c.x+=f,n.preventDefault();break;default:return}r.props.restrictPosition&&(c=tc(c,r.mediaSize,r.state.cropSize,h,d)),n.repeat||(a=(i=r.props).onInteractionStart)===null||a===void 0||a.call(i),l(c)}},r.onKeyUp=function(n){var i,a;switch(n.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":n.preventDefault();break;default:return}r.emitCropData(),(a=(i=r.props).onInteractionEnd)===null||a===void 0||a.call(i)},r}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=sT,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var r,n;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(r=this.resizeObserver)===null||r===void 0||r.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((n=this.styleRef.parentNode)===null||n===void 0||n.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(r){var n,i,a,o,s,l,u,h,d;r.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):r.aspect!==this.props.aspect?this.computeSizes():r.objectFit!==this.props.objectFit?this.computeSizes():r.zoom!==this.props.zoom?this.recomputeCropPosition():((n=r.cropSize)===null||n===void 0?void 0:n.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((a=r.cropSize)===null||a===void 0?void 0:a.width)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.width)?this.computeSizes():(((s=r.crop)===null||s===void 0?void 0:s.x)!==((l=this.props.crop)===null||l===void 0?void 0:l.x)||((u=r.crop)===null||u===void 0?void 0:u.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),r.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),r.video!==this.props.video&&((d=this.videoRef.current)===null||d===void 0||d.load());var f=this.getObjectFit();f!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:f},this.computeSizes)},e.prototype.getAspect=function(){var r=this.props,n=r.cropSize,i=r.aspect;return n?n.width/n.height:i},e.prototype.getObjectFit=function(){var r,n,i,a;if(this.props.objectFit==="cover"){var o=this.imageRef.current||this.videoRef.current;if(o&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var s=this.containerRect.width/this.containerRect.height,l=((r=this.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((n=this.videoRef.current)===null||n===void 0?void 0:n.videoWidth)||0,u=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((a=this.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,h=l/u;return h<s?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(r){var n=e.getTouchPoint(r.touches[0]),i=e.getTouchPoint(r.touches[1]);this.lastPinchDistance=Uw(n,i),this.lastPinchRotation=zw(n,i),this.onDragStart(qw(n,i))},e.prototype.onPinchMove=function(r){var n=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(r.touches[0]),a=e.getTouchPoint(r.touches[1]),o=qw(i,a);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var s=Uw(i,a),l=n.props.zoom*(s/n.lastPinchDistance);n.setNewZoom(l,o,{shouldUpdatePosition:!1}),n.lastPinchDistance=s;var u=zw(i,a),h=n.props.rotation+(u-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(h),n.lastPinchRotation=u})}},e.prototype.render=function(){var r=this,n,i=this.props,a=i.image,o=i.video,s=i.mediaProps,l=i.cropperProps,u=i.transform,h=i.crop,d=h.x,f=h.y,c=i.rotation,y=i.zoom,v=i.cropShape,w=i.showGrid,p=i.roundCropAreaPixels,g=i.style,b=g.containerStyle,_=g.cropAreaStyle,E=g.mediaStyle,C=i.classes,A=C.containerClassName,P=C.cropAreaClassName,F=C.mediaClassName,T=(n=this.state.mediaObjectFit)!==null&&n!==void 0?n:this.getObjectFit();return te.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(j){return r.containerRef=j},"data-testid":"container",style:b,className:Of("reactEasyCrop_Container",A)},a?te.createElement("img",Hr({alt:"",className:Of("reactEasyCrop_Image",T==="contain"&&"reactEasyCrop_Contain",T==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",T==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",F)},s,{src:a,ref:this.imageRef,style:Hr(Hr({},E),{transform:u||"translate(".concat(d,"px, ").concat(f,"px) rotate(").concat(c,"deg) scale(").concat(y,")")}),onLoad:this.onMediaLoad})):o&&te.createElement("video",Hr({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Of("reactEasyCrop_Video",T==="contain"&&"reactEasyCrop_Contain",T==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",T==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",F)},s,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Hr(Hr({},E),{transform:u||"translate(".concat(d,"px, ").concat(f,"px) rotate(").concat(c,"deg) scale(").concat(y,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map(function(k){return te.createElement("source",Hr({key:k.src},k))})),this.state.cropSize&&te.createElement("div",Hr({ref:this.cropperRef,style:Hr(Hr({},_),{width:p?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:p?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Of("reactEasyCrop_CropArea",v==="round"&&"reactEasyCrop_CropAreaRound",w&&"reactEasyCrop_CropAreaGrid",P)},l)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:uT,minZoom:lT,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:cT},e.getMousePoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},e.getTouchPoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},e}(te.Component);const fT=t=>new Promise((e,r)=>{const n=new Image;n.addEventListener("load",()=>e(n)),n.addEventListener("error",i=>r(i)),n.setAttribute("crossOrigin","anonymous"),n.src=t});async function hT(t,e,r="image/jpeg"){const n=await fT(t),i=document.createElement("canvas"),a=i.getContext("2d");if(!a)throw new Error("No 2d context");return i.width=e.width,i.height=e.height,a.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height),new Promise((o,s)=>{i.toBlob(l=>{if(!l){s(new Error("Canvas is empty"));return}o(l)},r)})}const pT=({session:t,profile:e,onUpdateProfile:r,onAvatarUpload:n,onExportData:i,onSignOut:a,theme:o,onToggleTheme:s})=>{const[l,u]=te.useState(""),[h,d]=te.useState(!1),[f,c]=te.useState(!1),[y,v]=te.useState(!1),[w,p]=te.useState(!1),[g,b]=te.useState(""),[_,E]=te.useState(!1),[C,A]=te.useState(""),[P,F]=te.useState(null),[T,k]=te.useState(!1),[j,I]=te.useState(!1),[R,$]=te.useState(!1),[Z,Q]=te.useState(!1),[X,G]=te.useState(null),[H,B]=te.useState(null),[L,D]=te.useState({x:0,y:0}),[z,q]=te.useState(1),[U,K]=te.useState(null),ne=te.useRef(null),{deriveAndVerifyKey:ie,key:he}=Os(),{addToast:ye}=mp();te.useEffect(()=>{u((e==null?void 0:e.full_name)||"")},[e==null?void 0:e.full_name]),te.useEffect(()=>{(async()=>{const Ne=await Q_();I(Ne);const ae=localStorage.getItem(`diary_bio_${t.user.id}`);$(!!ae)})()},[t.user.id]),te.useEffect(()=>{let ge=!0;return(async()=>{if(!(e!=null&&e.avatar_url)){ge&&G(null);return}if(e.avatar_url.startsWith("http"))ge&&G(e.avatar_url);else try{const{data:ae,error:Se}=await Kt.storage.from("avatars").createSignedUrl(e.avatar_url,3600);if(Se)throw Se;ge&&(ae!=null&&ae.signedUrl)&&G(ae.signedUrl)}catch(ae){console.error("Error resolving avatar URL. Check RLS policies.",ae),ge&&G(null)}})(),()=>{ge=!1}},[e==null?void 0:e.avatar_url]);const Oe=async ge=>{ge.preventDefault(),l.trim()!==(e==null?void 0:e.full_name)&&(v(!0),await r({full_name:l.trim()}),v(!1)),d(!1)},Le=ge=>{if(ge.target.files&&ge.target.files.length>0){const Ne=ge.target.files[0],ae=URL.createObjectURL(Ne);B(ae),q(1),D({x:0,y:0}),ge.target.value=""}},He=(ge,Ne)=>{K(Ne)},_e=async()=>{if(!(!H||!U))try{c(!0);const ge=await hT(H,U),Ne=new File([ge],"avatar.jpg",{type:"image/jpeg"});await n(Ne),B(null),ye("Profile picture updated successfully","success")}catch(ge){console.error(ge),ye(ge.message||"Failed to update profile picture","error")}finally{c(!1)}},se=()=>{B(null),c(!1)},rt=async()=>{p(!0),b("Preparing...");try{await i(ge=>b(ge))}catch(ge){console.error("Export failed",ge)}finally{p(!1),b("")}},ve=async ge=>{ge.preventDefault(),F(null),k(!0);try{const Ne=await ie(C,t.user.id);if(!Ne){F("Incorrect password."),k(!1);return}if(!e){F("Profile data unavailable."),k(!1);return}const ae=await vv(Ne);J_({email:t.user.email||"Unknown",password:C,salt:e.salt,rawKey:ae}),A(""),E(!1)}catch(Ne){console.error("Error generating kit:",Ne),F("An error occurred. Please try again.")}finally{k(!1)}},de=async()=>{if(!he){ye("Encryption key not available. Please re-login.","error");return}if(Q(!0),R)localStorage.removeItem(`diary_bio_${t.user.id}`),$(!1),ye("Biometric unlock disabled.","info");else try{const ge=await SP(he,t.user.id);localStorage.setItem(`diary_bio_${t.user.id}`,JSON.stringify(ge)),$(!0),ye("Biometric unlock enabled successfully!","success")}catch(ge){console.error("Bio enable failed",ge),ye(ge.message||"Failed to enable biometrics.","error")}Q(!1)};return x.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 animate-fade-in pb-24",children:[x.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-8",children:"Profile & Settings"}),x.jsx("div",{className:"bg-white/50 dark:bg-slate-800/50 p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:x.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[x.jsxs("div",{className:"relative flex-shrink-0",children:[x.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden flex items-center justify-center",children:X?x.jsx("img",{src:X,alt:"User avatar",className:"w-full h-full object-cover"}):x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),x.jsx("input",{ref:ne,type:"file",id:"avatar-upload",className:"hidden",onChange:Le,accept:"image/*"}),x.jsx("label",{htmlFor:"avatar-upload",className:"absolute -bottom-1 -right-1 bg-white dark:bg-slate-600 rounded-full p-1.5 cursor-pointer shadow-md hover:bg-slate-100 dark:hover:bg-slate-500 transition-colors",children:f?x.jsxs("svg",{className:"animate-spin h-5 w-5 text-slate-600 dark:text-slate-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-600 dark:text-slate-200",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]})})]}),x.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[h?x.jsxs("form",{onSubmit:Oe,className:"flex items-center gap-2",children:[x.jsx("input",{type:"text",value:l,onChange:ge=>u(ge.target.value),className:"w-full px-3 py-2 text-xl font-bold border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 disabled:opacity-75",autoFocus:!0,disabled:y}),x.jsx("button",{type:"submit",className:"px-3 py-2 text-sm font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 disabled:bg-indigo-400",disabled:y,children:y?"Saving...":"Save"})]}):x.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:(e==null?void 0:e.full_name)||"Your Name"}),x.jsx("button",{onClick:()=>d(!0),className:"p-1.5 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 flex-shrink-0 text-slate-500",children:x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]})})]}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:t.user.email})]})]})}),x.jsxs("div",{className:"mt-8 space-y-4",children:[x.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Dark Mode"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Toggle between light and dark themes."})]}),x.jsx("button",{onClick:s,className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${o==="dark"?"bg-indigo-500":"bg-slate-300"}`,children:x.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${o==="dark"?"translate-x-6":"translate-x-1"}`})})]}),j&&x.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Biometric Unlock"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Use FaceID or TouchID to unlock your diary."})]}),x.jsx("button",{onClick:de,disabled:Z,className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${R?"bg-green-500":"bg-slate-300"}`,children:x.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${R?"translate-x-6":"translate-x-1"}`})})]}),x.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Export Data (ZIP)"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Download entries as monthly JSON files."})]}),x.jsx("button",{onClick:rt,disabled:w,className:"px-4 py-2 text-sm font-semibold bg-slate-100 text-slate-700 rounded-md hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 min-w-[100px] justify-center",children:w?x.jsxs(x.Fragment,{children:[x.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),x.jsx("span",{children:g})]}):"Export"})]}),x.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Recovery Kit"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Download a backup of your encryption keys."})]}),x.jsxs("button",{onClick:()=>E(!0),className:"px-4 py-2 text-sm font-semibold bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-200 dark:hover:bg-yellow-900/50 flex items-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Backup Keys"]})]})]}),x.jsx("div",{className:"mt-12",children:x.jsx("button",{onClick:a,className:"w-full sm:w-auto px-6 py-2 font-semibold text-red-600 bg-red-100 rounded-md hover:bg-red-200 dark:bg-red-900/50 dark:text-red-300 dark:hover:bg-red-900/80 transition-colors",children:"Sign Out"})}),H&&x.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/90 p-4 animate-fade-in",children:[x.jsx("div",{className:"relative w-full max-w-lg h-[400px] bg-slate-800 rounded-lg overflow-hidden mb-4",children:x.jsx(dT,{image:H,crop:L,zoom:z,aspect:1,onCropChange:D,onCropComplete:He,onZoomChange:q,cropShape:"round",showGrid:!1})}),x.jsxs("div",{className:"w-full max-w-xs px-4 mb-6",children:[x.jsx("label",{className:"block text-xs text-slate-400 mb-1 text-center",children:"Zoom"}),x.jsx("input",{type:"range",value:z,min:1,max:3,step:.1,"aria-labelledby":"Zoom",onChange:ge=>q(Number(ge.target.value)),className:"w-full h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]}),x.jsxs("div",{className:"flex gap-4",children:[x.jsx("button",{onClick:se,disabled:f,className:"px-6 py-2 text-sm font-semibold text-slate-300 bg-slate-700 hover:bg-slate-600 rounded-md",children:"Cancel"}),x.jsx("button",{onClick:_e,disabled:f,className:"px-6 py-2 text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 rounded-md flex items-center gap-2",children:f?"Saving...":"Save Avatar"})]})]}),_&&x.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:x.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 animate-fade-in-down",children:[x.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 mb-2",children:"Verify Identity"}),x.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Please enter your master password to authenticate and generate your Recovery Kit. This will contain your raw encryption keys."}),x.jsxs("form",{onSubmit:ve,children:[x.jsx("input",{type:"password",placeholder:"Your Password",value:C,onChange:ge=>A(ge.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 mb-2",autoFocus:!0,autoComplete:"current-password"}),P&&x.jsx("p",{className:"text-red-500 text-sm mb-4",children:P}),x.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[x.jsx("button",{type:"button",onClick:()=>{E(!1),A(""),F(null)},className:"px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100 rounded-md dark:text-slate-300 dark:hover:bg-slate-700",children:"Cancel"}),x.jsx("button",{type:"submit",disabled:T||!C,className:"px-4 py-2 text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 rounded-md disabled:bg-indigo-400",children:T?"Generating...":"Download Kit"})]})]})]})})]})},mT=()=>{const{session:t,profile:e,updateProfile:r,uploadAvatar:n,exportData:i,signOut:a,theme:o,onToggleTheme:s}=au();return x.jsx(pT,{session:t,profile:e,onUpdateProfile:r,onAvatarUpload:n,onExportData:i,onSignOut:a,theme:o,onToggleTheme:s})};/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:s3,setPrototypeOf:$w,isFrozen:gT,getPrototypeOf:vT,getOwnPropertyDescriptor:yT}=Object;let{freeze:Rn,seal:Oi,create:Yg}=Object,{apply:Jg,construct:Xg}=typeof Reflect<"u"&&Reflect;Rn||(Rn=function(e){return e});Oi||(Oi=function(e){return e});Jg||(Jg=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return e.apply(r,i)});Xg||(Xg=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return new e(...n)});const Lf=In(Array.prototype.forEach),wT=In(Array.prototype.lastIndexOf),Hw=In(Array.prototype.pop),rc=In(Array.prototype.push),bT=In(Array.prototype.splice),rh=In(String.prototype.toLowerCase),om=In(String.prototype.toString),sm=In(String.prototype.match),nc=In(String.prototype.replace),xT=In(String.prototype.indexOf),_T=In(String.prototype.trim),zi=In(Object.prototype.hasOwnProperty),On=In(RegExp.prototype.test),ic=ST(TypeError);function In(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Jg(t,e,n)}}function ST(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Xg(t,r)}}function Ft(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rh;$w&&$w(t,null);let n=e.length;for(;n--;){let i=e[n];if(typeof i=="string"){const a=r(i);a!==i&&(gT(e)||(e[n]=a),i=a)}t[i]=!0}return t}function kT(t){for(let e=0;e<t.length;e++)zi(t,e)||(t[e]=null);return t}function La(t){const e=Yg(null);for(const[r,n]of s3(t))zi(t,r)&&(Array.isArray(n)?e[r]=kT(n):n&&typeof n=="object"&&n.constructor===Object?e[r]=La(n):e[r]=n);return e}function ac(t,e){for(;t!==null;){const n=yT(t,e);if(n){if(n.get)return In(n.get);if(typeof n.value=="function")return In(n.value)}t=vT(t)}function r(){return null}return r}const Ww=Rn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),lm=Rn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),um=Rn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),NT=Rn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),cm=Rn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ET=Rn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Vw=Rn(["#text"]),Gw=Rn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),dm=Rn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Kw=Rn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pf=Rn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),AT=Oi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),jT=Oi(/<%[\w\W]*|[\w\W]*%>/gm),OT=Oi(/\$\{[\w\W]*/gm),LT=Oi(/^data-[\-\w.\u00B7-\uFFFF]+$/),PT=Oi(/^aria-[\-\w]+$/),l3=Oi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),TT=Oi(/^(?:\w+script|data):/i),CT=Oi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),u3=Oi(/^html$/i),RT=Oi(/^[a-z][.\w]*(-[.\w]+)+$/i);var Yw=Object.freeze({__proto__:null,ARIA_ATTR:PT,ATTR_WHITESPACE:CT,CUSTOM_ELEMENT:RT,DATA_ATTR:LT,DOCTYPE_NAME:u3,ERB_EXPR:jT,IS_ALLOWED_URI:l3,IS_SCRIPT_OR_DATA:TT,MUSTACHE_EXPR:AT,TMPLIT_EXPR:OT});const oc={element:1,text:3,progressingInstruction:7,comment:8,document:9},IT=function(){return typeof window>"u"?null:window},DT=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(n=r.getAttribute(i));const a="dompurify"+(n?"#"+n:"");try{return e.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},Jw=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function c3(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:IT();const e=Ge=>c3(Ge);if(e.version="3.3.0",e.removed=[],!t||!t.document||t.document.nodeType!==oc.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const n=r,i=n.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:s,Element:l,NodeFilter:u,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:c}=t,y=l.prototype,v=ac(y,"cloneNode"),w=ac(y,"remove"),p=ac(y,"nextSibling"),g=ac(y,"childNodes"),b=ac(y,"parentNode");if(typeof o=="function"){const Ge=r.createElement("template");Ge.content&&Ge.content.ownerDocument&&(r=Ge.content.ownerDocument)}let _,E="";const{implementation:C,createNodeIterator:A,createDocumentFragment:P,getElementsByTagName:F}=r,{importNode:T}=n;let k=Jw();e.isSupported=typeof s3=="function"&&typeof b=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:j,ERB_EXPR:I,TMPLIT_EXPR:R,DATA_ATTR:$,ARIA_ATTR:Z,IS_SCRIPT_OR_DATA:Q,ATTR_WHITESPACE:X,CUSTOM_ELEMENT:G}=Yw;let{IS_ALLOWED_URI:H}=Yw,B=null;const L=Ft({},[...Ww,...lm,...um,...cm,...Vw]);let D=null;const z=Ft({},[...Gw,...dm,...Kw,...Pf]);let q=Object.seal(Yg(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),U=null,K=null;const ne=Object.seal(Yg(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ie=!0,he=!0,ye=!1,Oe=!0,Le=!1,He=!0,_e=!1,se=!1,rt=!1,ve=!1,de=!1,ge=!1,Ne=!0,ae=!1;const Se="user-content-";let Ce=!0,Pe=!1,Ve={},Ye=null;const nt=Ft({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let pt=null;const Ze=Ft({},["audio","video","img","source","image","track"]);let qe=null;const Lt=Ft({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),lt="http://www.w3.org/1998/Math/MathML",Dt="http://www.w3.org/2000/svg",wt="http://www.w3.org/1999/xhtml";let Pt=wt,br=!1,xt=null;const Xr=Ft({},[lt,Dt,wt],om);let Ht=Ft({},["mi","mo","mn","ms","mtext"]),_r=Ft({},["annotation-xml"]);const fn=Ft({},["title","style","font","a","script"]);let Yt=null;const Nt=["application/xhtml+xml","text/html"],zt="text/html";let Jt=null,Qt=null;const kn=r.createElement("form"),Nn=function(ce){return ce instanceof RegExp||ce instanceof Function},vt=function(){let ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Qt&&Qt===ce)){if((!ce||typeof ce!="object")&&(ce={}),ce=La(ce),Yt=Nt.indexOf(ce.PARSER_MEDIA_TYPE)===-1?zt:ce.PARSER_MEDIA_TYPE,Jt=Yt==="application/xhtml+xml"?om:rh,B=zi(ce,"ALLOWED_TAGS")?Ft({},ce.ALLOWED_TAGS,Jt):L,D=zi(ce,"ALLOWED_ATTR")?Ft({},ce.ALLOWED_ATTR,Jt):z,xt=zi(ce,"ALLOWED_NAMESPACES")?Ft({},ce.ALLOWED_NAMESPACES,om):Xr,qe=zi(ce,"ADD_URI_SAFE_ATTR")?Ft(La(Lt),ce.ADD_URI_SAFE_ATTR,Jt):Lt,pt=zi(ce,"ADD_DATA_URI_TAGS")?Ft(La(Ze),ce.ADD_DATA_URI_TAGS,Jt):Ze,Ye=zi(ce,"FORBID_CONTENTS")?Ft({},ce.FORBID_CONTENTS,Jt):nt,U=zi(ce,"FORBID_TAGS")?Ft({},ce.FORBID_TAGS,Jt):La({}),K=zi(ce,"FORBID_ATTR")?Ft({},ce.FORBID_ATTR,Jt):La({}),Ve=zi(ce,"USE_PROFILES")?ce.USE_PROFILES:!1,ie=ce.ALLOW_ARIA_ATTR!==!1,he=ce.ALLOW_DATA_ATTR!==!1,ye=ce.ALLOW_UNKNOWN_PROTOCOLS||!1,Oe=ce.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Le=ce.SAFE_FOR_TEMPLATES||!1,He=ce.SAFE_FOR_XML!==!1,_e=ce.WHOLE_DOCUMENT||!1,ve=ce.RETURN_DOM||!1,de=ce.RETURN_DOM_FRAGMENT||!1,ge=ce.RETURN_TRUSTED_TYPE||!1,rt=ce.FORCE_BODY||!1,Ne=ce.SANITIZE_DOM!==!1,ae=ce.SANITIZE_NAMED_PROPS||!1,Ce=ce.KEEP_CONTENT!==!1,Pe=ce.IN_PLACE||!1,H=ce.ALLOWED_URI_REGEXP||l3,Pt=ce.NAMESPACE||wt,Ht=ce.MATHML_TEXT_INTEGRATION_POINTS||Ht,_r=ce.HTML_INTEGRATION_POINTS||_r,q=ce.CUSTOM_ELEMENT_HANDLING||{},ce.CUSTOM_ELEMENT_HANDLING&&Nn(ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&Nn(ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&typeof ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Le&&(he=!1),de&&(ve=!0),Ve&&(B=Ft({},Vw),D=[],Ve.html===!0&&(Ft(B,Ww),Ft(D,Gw)),Ve.svg===!0&&(Ft(B,lm),Ft(D,dm),Ft(D,Pf)),Ve.svgFilters===!0&&(Ft(B,um),Ft(D,dm),Ft(D,Pf)),Ve.mathMl===!0&&(Ft(B,cm),Ft(D,Kw),Ft(D,Pf))),ce.ADD_TAGS&&(typeof ce.ADD_TAGS=="function"?ne.tagCheck=ce.ADD_TAGS:(B===L&&(B=La(B)),Ft(B,ce.ADD_TAGS,Jt))),ce.ADD_ATTR&&(typeof ce.ADD_ATTR=="function"?ne.attributeCheck=ce.ADD_ATTR:(D===z&&(D=La(D)),Ft(D,ce.ADD_ATTR,Jt))),ce.ADD_URI_SAFE_ATTR&&Ft(qe,ce.ADD_URI_SAFE_ATTR,Jt),ce.FORBID_CONTENTS&&(Ye===nt&&(Ye=La(Ye)),Ft(Ye,ce.FORBID_CONTENTS,Jt)),Ce&&(B["#text"]=!0),_e&&Ft(B,["html","head","body"]),B.table&&(Ft(B,["tbody"]),delete U.tbody),ce.TRUSTED_TYPES_POLICY){if(typeof ce.TRUSTED_TYPES_POLICY.createHTML!="function")throw ic('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ce.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ic('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_=ce.TRUSTED_TYPES_POLICY,E=_.createHTML("")}else _===void 0&&(_=DT(c,i)),_!==null&&typeof E=="string"&&(E=_.createHTML(""));Rn&&Rn(ce),Qt=ce}},ue=Ft({},[...lm,...um,...NT]),we=Ft({},[...cm,...ET]),Ee=function(ce){let De=b(ce);(!De||!De.tagName)&&(De={namespaceURI:Pt,tagName:"template"});const Je=rh(ce.tagName),qt=rh(De.tagName);return xt[ce.namespaceURI]?ce.namespaceURI===Dt?De.namespaceURI===wt?Je==="svg":De.namespaceURI===lt?Je==="svg"&&(qt==="annotation-xml"||Ht[qt]):!!ue[Je]:ce.namespaceURI===lt?De.namespaceURI===wt?Je==="math":De.namespaceURI===Dt?Je==="math"&&_r[qt]:!!we[Je]:ce.namespaceURI===wt?De.namespaceURI===Dt&&!_r[qt]||De.namespaceURI===lt&&!Ht[qt]?!1:!we[Je]&&(fn[Je]||!ue[Je]):!!(Yt==="application/xhtml+xml"&&xt[ce.namespaceURI]):!1},Ie=function(ce){rc(e.removed,{element:ce});try{b(ce).removeChild(ce)}catch{w(ce)}},Ue=function(ce,De){try{rc(e.removed,{attribute:De.getAttributeNode(ce),from:De})}catch{rc(e.removed,{attribute:null,from:De})}if(De.removeAttribute(ce),ce==="is")if(ve||de)try{Ie(De)}catch{}else try{De.setAttribute(ce,"")}catch{}},et=function(ce){let De=null,Je=null;if(rt)ce="<remove></remove>"+ce;else{const $t=sm(ce,/^[\r\n\t ]+/);Je=$t&&$t[0]}Yt==="application/xhtml+xml"&&Pt===wt&&(ce='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ce+"</body></html>");const qt=_?_.createHTML(ce):ce;if(Pt===wt)try{De=new f().parseFromString(qt,Yt)}catch{}if(!De||!De.documentElement){De=C.createDocument(Pt,"template",null);try{De.documentElement.innerHTML=br?E:qt}catch{}}const er=De.body||De.documentElement;return ce&&Je&&er.insertBefore(r.createTextNode(Je),er.childNodes[0]||null),Pt===wt?F.call(De,_e?"html":"body")[0]:_e?De.documentElement:er},ut=function(ce){return A.call(ce.ownerDocument||ce,ce,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},tt=function(ce){return ce instanceof d&&(typeof ce.nodeName!="string"||typeof ce.textContent!="string"||typeof ce.removeChild!="function"||!(ce.attributes instanceof h)||typeof ce.removeAttribute!="function"||typeof ce.setAttribute!="function"||typeof ce.namespaceURI!="string"||typeof ce.insertBefore!="function"||typeof ce.hasChildNodes!="function")},it=function(ce){return typeof s=="function"&&ce instanceof s};function Qe(Ge,ce,De){Lf(Ge,Je=>{Je.call(e,ce,De,Qt)})}const ht=function(ce){let De=null;if(Qe(k.beforeSanitizeElements,ce,null),tt(ce))return Ie(ce),!0;const Je=Jt(ce.nodeName);if(Qe(k.uponSanitizeElement,ce,{tagName:Je,allowedTags:B}),He&&ce.hasChildNodes()&&!it(ce.firstElementChild)&&On(/<[/\w!]/g,ce.innerHTML)&&On(/<[/\w!]/g,ce.textContent)||ce.nodeType===oc.progressingInstruction||He&&ce.nodeType===oc.comment&&On(/<[/\w]/g,ce.data))return Ie(ce),!0;if(!(ne.tagCheck instanceof Function&&ne.tagCheck(Je))&&(!B[Je]||U[Je])){if(!U[Je]&&mt(Je)&&(q.tagNameCheck instanceof RegExp&&On(q.tagNameCheck,Je)||q.tagNameCheck instanceof Function&&q.tagNameCheck(Je)))return!1;if(Ce&&!Ye[Je]){const qt=b(ce)||ce.parentNode,er=g(ce)||ce.childNodes;if(er&&qt){const $t=er.length;for(let mr=$t-1;mr>=0;--mr){const Ur=v(er[mr],!0);Ur.__removalCount=(ce.__removalCount||0)+1,qt.insertBefore(Ur,p(ce))}}}return Ie(ce),!0}return ce instanceof l&&!Ee(ce)||(Je==="noscript"||Je==="noembed"||Je==="noframes")&&On(/<\/no(script|embed|frames)/i,ce.innerHTML)?(Ie(ce),!0):(Le&&ce.nodeType===oc.text&&(De=ce.textContent,Lf([j,I,R],qt=>{De=nc(De,qt," ")}),ce.textContent!==De&&(rc(e.removed,{element:ce.cloneNode()}),ce.textContent=De)),Qe(k.afterSanitizeElements,ce,null),!1)},st=function(ce,De,Je){if(Ne&&(De==="id"||De==="name")&&(Je in r||Je in kn))return!1;if(!(he&&!K[De]&&On($,De))){if(!(ie&&On(Z,De))){if(!(ne.attributeCheck instanceof Function&&ne.attributeCheck(De,ce))){if(!D[De]||K[De]){if(!(mt(ce)&&(q.tagNameCheck instanceof RegExp&&On(q.tagNameCheck,ce)||q.tagNameCheck instanceof Function&&q.tagNameCheck(ce))&&(q.attributeNameCheck instanceof RegExp&&On(q.attributeNameCheck,De)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(De,ce))||De==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&On(q.tagNameCheck,Je)||q.tagNameCheck instanceof Function&&q.tagNameCheck(Je))))return!1}else if(!qe[De]){if(!On(H,nc(Je,X,""))){if(!((De==="src"||De==="xlink:href"||De==="href")&&ce!=="script"&&xT(Je,"data:")===0&&pt[ce])){if(!(ye&&!On(Q,nc(Je,X,"")))){if(Je)return!1}}}}}}}return!0},mt=function(ce){return ce!=="annotation-xml"&&sm(ce,G)},It=function(ce){Qe(k.beforeSanitizeAttributes,ce,null);const{attributes:De}=ce;if(!De||tt(ce))return;const Je={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:D,forceKeepAttr:void 0};let qt=De.length;for(;qt--;){const er=De[qt],{name:$t,namespaceURI:mr,value:Ur}=er,Qr=Jt($t),Fn=Ur;let cr=$t==="value"?Fn:_T(Fn);if(Je.attrName=Qr,Je.attrValue=cr,Je.keepAttr=!0,Je.forceKeepAttr=void 0,Qe(k.uponSanitizeAttribute,ce,Je),cr=Je.attrValue,ae&&(Qr==="id"||Qr==="name")&&(Ue($t,ce),cr=Se+cr),He&&On(/((--!?|])>)|<\/(style|title|textarea)/i,cr)){Ue($t,ce);continue}if(Qr==="attributename"&&sm(cr,"href")){Ue($t,ce);continue}if(Je.forceKeepAttr)continue;if(!Je.keepAttr){Ue($t,ce);continue}if(!Oe&&On(/\/>/i,cr)){Ue($t,ce);continue}Le&&Lf([j,I,R],Sr=>{cr=nc(cr,Sr," ")});const Rt=Jt(ce.nodeName);if(!st(Rt,Qr,cr)){Ue($t,ce);continue}if(_&&typeof c=="object"&&typeof c.getAttributeType=="function"&&!mr)switch(c.getAttributeType(Rt,Qr)){case"TrustedHTML":{cr=_.createHTML(cr);break}case"TrustedScriptURL":{cr=_.createScriptURL(cr);break}}if(cr!==Fn)try{mr?ce.setAttributeNS(mr,$t,cr):ce.setAttribute($t,cr),tt(ce)?Ie(ce):Hw(e.removed)}catch{Ue($t,ce)}}Qe(k.afterSanitizeAttributes,ce,null)},Zt=function Ge(ce){let De=null;const Je=ut(ce);for(Qe(k.beforeSanitizeShadowDOM,ce,null);De=Je.nextNode();)Qe(k.uponSanitizeShadowNode,De,null),ht(De),It(De),De.content instanceof a&&Ge(De.content);Qe(k.afterSanitizeShadowDOM,ce,null)};return e.sanitize=function(Ge){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},De=null,Je=null,qt=null,er=null;if(br=!Ge,br&&(Ge="<!-->"),typeof Ge!="string"&&!it(Ge))if(typeof Ge.toString=="function"){if(Ge=Ge.toString(),typeof Ge!="string")throw ic("dirty is not a string, aborting")}else throw ic("toString is not a function");if(!e.isSupported)return Ge;if(se||vt(ce),e.removed=[],typeof Ge=="string"&&(Pe=!1),Pe){if(Ge.nodeName){const Ur=Jt(Ge.nodeName);if(!B[Ur]||U[Ur])throw ic("root node is forbidden and cannot be sanitized in-place")}}else if(Ge instanceof s)De=et("<!---->"),Je=De.ownerDocument.importNode(Ge,!0),Je.nodeType===oc.element&&Je.nodeName==="BODY"||Je.nodeName==="HTML"?De=Je:De.appendChild(Je);else{if(!ve&&!Le&&!_e&&Ge.indexOf("<")===-1)return _&&ge?_.createHTML(Ge):Ge;if(De=et(Ge),!De)return ve?null:ge?E:""}De&&rt&&Ie(De.firstChild);const $t=ut(Pe?Ge:De);for(;qt=$t.nextNode();)ht(qt),It(qt),qt.content instanceof a&&Zt(qt.content);if(Pe)return Ge;if(ve){if(de)for(er=P.call(De.ownerDocument);De.firstChild;)er.appendChild(De.firstChild);else er=De;return(D.shadowroot||D.shadowrootmode)&&(er=T.call(n,er,!0)),er}let mr=_e?De.outerHTML:De.innerHTML;return _e&&B["!doctype"]&&De.ownerDocument&&De.ownerDocument.doctype&&De.ownerDocument.doctype.name&&On(u3,De.ownerDocument.doctype.name)&&(mr="<!DOCTYPE "+De.ownerDocument.doctype.name+`>
`+mr),Le&&Lf([j,I,R],Ur=>{mr=nc(mr,Ur," ")}),_&&ge?_.createHTML(mr):mr},e.setConfig=function(){let Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};vt(Ge),se=!0},e.clearConfig=function(){Qt=null,se=!1},e.isValidAttribute=function(Ge,ce,De){Qt||vt({});const Je=Jt(Ge),qt=Jt(ce);return st(Je,qt,De)},e.addHook=function(Ge,ce){typeof ce=="function"&&rc(k[Ge],ce)},e.removeHook=function(Ge,ce){if(ce!==void 0){const De=wT(k[Ge],ce);return De===-1?void 0:bT(k[Ge],De,1)[0]}return Hw(k[Ge])},e.removeHooks=function(Ge){k[Ge]=[]},e.removeAllHooks=function(){k=Jw()},e}var fm=c3();const MT=({path:t,iv:e,mimeType:r="audio/webm"})=>{const{key:n,decryptBinary:i}=Os(),[a,o]=te.useState(null),[s,l]=te.useState("idle"),u=te.useRef(null),h=async()=>{if(n){l("loading");try{const{data:d,error:f}=await Kt.storage.from("diary-audio").download(t);if(f)throw f;l("decrypting");const c=await d.arrayBuffer(),y=await i(n,c,e),v=new Blob([y],{type:r}),w=URL.createObjectURL(v);o(w),l("ready")}catch(d){console.error("Error loading secure audio:",d),l("error")}}};return te.useEffect(()=>()=>{a&&URL.revokeObjectURL(a)},[a]),s==="idle"?x.jsxs("button",{onClick:h,className:"flex items-center gap-3 bg-indigo-50 dark:bg-slate-700 px-4 py-3 rounded-lg border border-indigo-100 dark:border-slate-600 hover:bg-indigo-100 dark:hover:bg-slate-600 transition-colors w-full sm:w-auto",children:[x.jsx("div",{className:"p-2 bg-indigo-500 rounded-full text-white",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),x.jsxs("div",{className:"text-left",children:[x.jsx("span",{className:"block text-sm font-semibold text-indigo-900 dark:text-indigo-100",children:"Load Audio Memory"}),x.jsx("span",{className:"block text-xs text-indigo-600 dark:text-slate-400",children:"Encrypted"})]})]}):s==="loading"||s==="decrypting"?x.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 dark:bg-slate-800 px-4 py-3 rounded-lg border border-slate-200 dark:border-slate-700 w-full sm:w-auto animate-pulse",children:[x.jsxs("svg",{className:"animate-spin h-5 w-5 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),x.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:s==="loading"?"Downloading...":"Decrypting..."})]}):s==="error"?x.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),x.jsx("span",{children:"Failed to load audio."})]}):x.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 w-full",children:x.jsx("audio",{ref:u,controls:!0,className:"w-full h-8 focus:outline-none",src:a})})},FT=({src:t,onClose:e})=>(te.useEffect(()=>{const r=n=>{n.key==="Escape"&&e()};return t&&(window.addEventListener("keydown",r),document.body.style.overflow="hidden"),()=>{window.removeEventListener("keydown",r),document.body.style.overflow=""}},[t,e]),t?x.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 animate-fade-in backdrop-blur-sm",onClick:e,children:[x.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 text-white/70 hover:text-white transition-colors","aria-label":"Close",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),x.jsx("div",{className:"relative max-w-5xl max-h-[90vh] w-full p-4 flex items-center justify-center",onClick:r=>r.stopPropagation(),children:x.jsx("img",{src:t,alt:"Expanded view",className:"max-w-full max-h-[85vh] object-contain rounded-md shadow-2xl"})})]}):null),BT=({entry:t,onEdit:e,onDelete:r,onBack:n})=>{const i=PP(t.created_at),a=TP(t.created_at),o=te.useRef(null),{key:s,decryptBinary:l}=Os(),[u,h]=te.useState(null);te.useEffect(()=>{const v=async()=>{if(!o.current||!s)return;const w=o.current.querySelectorAll("img.secure-diary-image");for(let p=0;p<w.length;p++){const g=w[p],b=g.getAttribute("data-secure-metadata")||g.getAttribute("alt");if(b&&!g.src.startsWith("blob:"))try{const _=JSON.parse(b);if(_.path&&_.iv){g.style.opacity="0.5",g.style.transition="opacity 0.3s",g.style.cursor="zoom-in";const{data:E,error:C}=await Kt.storage.from("diary-images").createSignedUrl(_.path,60);if(C)throw console.error("RLS Error: Could not sign URL. Check your Supabase policies.",C),C;const A=await fetch(E.signedUrl);if(!A.ok)throw new Error(`Failed to fetch image blob: ${A.status}`);const P=await A.arrayBuffer(),F=await l(s,P,_.iv),T=new Blob([F],{type:"image/webp"}),k=URL.createObjectURL(T);g.src=k,g.style.opacity="1"}}catch(_){console.error("Failed to decrypt image:",_),g.style.border="2px solid red",g.title="Decryption failed"}}};return t.isDecrypted&&v(),()=>{o.current&&o.current.querySelectorAll("img.secure-diary-image").forEach(p=>{const g=p.src;g.startsWith("blob:")&&URL.revokeObjectURL(g)})}},[t.isDecrypted,t.content,s,l]);const d=v=>{const w=v.target;if(w.tagName==="IMG"&&w.classList.contains("secure-diary-image")){const p=w.src;p&&p.startsWith("blob:")&&h(p)}};if(!t.isDecrypted)return x.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 sm:p-8 rounded-lg shadow-md border border-slate-200 dark:border-slate-700 animate-fade-in flex items-center justify-center min-h-[300px]",children:x.jsxs("div",{className:"flex flex-col items-center gap-4",children:[x.jsxs("svg",{className:"animate-spin h-10 w-10 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Decrypting entry..."})]})});const f=["width","float","margin","margin-left","margin-right","margin-top","margin-bottom","text-align","opacity","transition"];fm.addHook("afterSanitizeAttributes",v=>{if(v instanceof Element&&v.hasAttribute("style")){const p=(v.getAttribute("style")||"").split(";").filter(g=>{if(!g.includes(":"))return!1;const b=g.split(":")[0].trim();return b&&f.includes(b)}).join(";");p?v.setAttribute("style",p):v.removeAttribute("style")}});const c=fm.sanitize(t.content,{ADD_TAGS:["img","figure","figcaption"],ADD_ATTR:["style","class","alt","data-secure-metadata","contenteditable"]});fm.removeHook("afterSanitizeAttributes");const y=t.audio?Array.isArray(t.audio)?t.audio:[t.audio]:[];return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 sm:p-8 rounded-lg shadow-md border border-slate-200 dark:border-slate-700 animate-fade-in",children:[x.jsxs("button",{onClick:n,className:"mb-6 flex items-center text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors group",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 transform group-hover:-translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Timeline"]}),x.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-700 pb-4 mb-4",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[x.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:t.title}),x.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i," (",a,")"]})]}),x.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[t.mood&&x.jsx("span",{className:"text-3xl","aria-label":`Mood: ${t.mood}`,children:t.mood}),t.tags&&t.tags.length>0&&x.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(v=>x.jsx("span",{className:"text-sm font-medium bg-indigo-100 text-indigo-800 px-2.5 py-1 rounded-full dark:bg-indigo-900/50 dark:text-indigo-300",children:v},v))})]})]}),y.length>0&&x.jsx("div",{className:"my-6 space-y-3",children:y.map((v,w)=>x.jsx(MT,{path:v.path,iv:v.iv,mimeType:v.type},v.id||w))}),x.jsx("div",{ref:o,onClick:d,className:"prose prose-slate dark:prose-invert max-w-none my-6 diary-content",dangerouslySetInnerHTML:{__html:c}}),x.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-6 flex justify-end gap-3",children:[x.jsxs("button",{onClick:e,className:"flex items-center gap-2 bg-slate-100 text-slate-700 font-semibold px-4 py-2 rounded-lg hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 transition-colors",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),"Edit"]}),x.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-red-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Delete"]})]})]}),x.jsx(FT,{src:u,onClose:()=>h(null)})]})},d3=({isOpen:t,title:e,message:r,confirmLabel:n="Confirm",cancelLabel:i="Cancel",onConfirm:a,onCancel:o,onClose:s,type:l="warning",isProcessing:u=!1})=>{if(!t)return null;const h=o||s||(()=>{}),f={danger:{iconBg:"bg-red-100 dark:bg-red-900/30",iconColor:"text-red-600 dark:text-red-400",buttonBg:"bg-red-600 hover:bg-red-700 focus:ring-red-500",icon:x.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})},warning:{iconBg:"bg-yellow-100 dark:bg-yellow-900/30",iconColor:"text-yellow-600 dark:text-yellow-400",buttonBg:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",icon:x.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})},info:{iconBg:"bg-blue-100 dark:bg-blue-900/30",iconColor:"text-blue-600 dark:text-blue-400",buttonBg:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",icon:x.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}}[l];return x.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:x.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[x.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:u?void 0:h}),x.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),x.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-slate-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[x.jsx("div",{className:"bg-white dark:bg-slate-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:x.jsxs("div",{className:"sm:flex sm:items-start",children:[x.jsx("div",{className:`mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full ${f.iconBg} sm:mx-0 sm:h-10 sm:w-10`,children:x.jsx("div",{className:f.iconColor,children:f.icon})}),x.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[x.jsx("h3",{className:"text-lg leading-6 font-medium text-slate-900 dark:text-slate-100",id:"modal-title",children:e}),x.jsx("div",{className:"mt-2",children:x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:r})})]})]})}),x.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[x.jsxs("button",{type:"button",disabled:u,className:`w-full inline-flex justify-center items-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white ${f.buttonBg} focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 sm:ml-3 sm:w-auto sm:text-sm`,onClick:a,children:[u&&x.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),n]}),x.jsx("button",{type:"button",disabled:u,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-slate-600 shadow-sm px-4 py-2 bg-white dark:bg-slate-800 text-base font-medium text-slate-700 dark:text-slate-200 hover:bg-gray-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:h,children:i})]})]})]})})},UT=()=>{const{id:t}=a4(),{entries:e,loadEntryContent:r,deleteEntry:n,loading:i}=au(),a=Ha(),[o,s]=te.useState(null),[l,u]=te.useState(!1),[h,d]=te.useState(!1);te.useEffect(()=>{if(t&&e.length>0){const c=e.find(y=>y.id===t);c&&(s(c),!c.isDecrypted&&!c.isLoading&&r(t))}},[t,e,r]);const f=async()=>{if(o){d(!0);try{await n(o.id)}catch{d(!1)}}};return i?x.jsx("p",{className:"text-center p-8 text-slate-500",children:"Loading entry..."}):o?x.jsxs(x.Fragment,{children:[x.jsx(BT,{entry:o,onEdit:()=>a(`/app/edit/${o.id}`),onDelete:()=>u(!0),onBack:()=>a("/app")}),x.jsx(d3,{isOpen:l,isProcessing:h,onClose:()=>u(!1),onConfirm:f,title:"Delete Entry?",message:"Are you sure you want to permanently delete this entry? This action cannot be undone."})]}):x.jsx("p",{className:"text-center p-8 text-slate-500",children:"Entry not found."})};function zT(){this.__data__=[],this.size=0}var qT=zT;function $T(t,e){return t===e||t!==t&&e!==e}var f3=$T,HT=f3;function WT(t,e){for(var r=t.length;r--;)if(HT(t[r][0],e))return r;return-1}var xp=WT,VT=xp,GT=Array.prototype,KT=GT.splice;function YT(t){var e=this.__data__,r=VT(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():KT.call(e,r,1),--this.size,!0}var JT=YT,XT=xp;function QT(t){var e=this.__data__,r=XT(e,t);return r<0?void 0:e[r][1]}var ZT=QT,e7=xp;function t7(t){return e7(this.__data__,t)>-1}var r7=t7,n7=xp;function i7(t,e){var r=this.__data__,n=n7(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var a7=i7,o7=qT,s7=JT,l7=ZT,u7=r7,c7=a7;function ou(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ou.prototype.clear=o7;ou.prototype.delete=s7;ou.prototype.get=l7;ou.prototype.has=u7;ou.prototype.set=c7;var _p=ou,d7=_p;function f7(){this.__data__=new d7,this.size=0}var h7=f7;function p7(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var m7=p7;function g7(t){return this.__data__.get(t)}var v7=g7;function y7(t){return this.__data__.has(t)}var w7=y7,b7=typeof li=="object"&&li&&li.Object===Object&&li,h3=b7,x7=h3,_7=typeof self=="object"&&self&&self.Object===Object&&self,S7=x7||_7||Function("return this")(),Wa=S7,k7=Wa,N7=k7.Symbol,xv=N7,Xw=xv,p3=Object.prototype,E7=p3.hasOwnProperty,A7=p3.toString,sc=Xw?Xw.toStringTag:void 0;function j7(t){var e=E7.call(t,sc),r=t[sc];try{t[sc]=void 0;var n=!0}catch{}var i=A7.call(t);return n&&(e?t[sc]=r:delete t[sc]),i}var O7=j7,L7=Object.prototype,P7=L7.toString;function T7(t){return P7.call(t)}var C7=T7,Qw=xv,R7=O7,I7=C7,D7="[object Null]",M7="[object Undefined]",Zw=Qw?Qw.toStringTag:void 0;function F7(t){return t==null?t===void 0?M7:D7:Zw&&Zw in Object(t)?R7(t):I7(t)}var Sp=F7;function B7(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var m3=B7,U7=Sp,z7=m3,q7="[object AsyncFunction]",$7="[object Function]",H7="[object GeneratorFunction]",W7="[object Proxy]";function V7(t){if(!z7(t))return!1;var e=U7(t);return e==$7||e==H7||e==q7||e==W7}var g3=V7,G7=Wa,K7=G7["__core-js_shared__"],Y7=K7,hm=Y7,e5=function(){var t=/[^.]+$/.exec(hm&&hm.keys&&hm.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function J7(t){return!!e5&&e5 in t}var X7=J7,Q7=Function.prototype,Z7=Q7.toString;function eC(t){if(t!=null){try{return Z7.call(t)}catch{}try{return t+""}catch{}}return""}var v3=eC,tC=g3,rC=X7,nC=m3,iC=v3,aC=/[\\^$.*+?()[\]{}|]/g,oC=/^\[object .+?Constructor\]$/,sC=Function.prototype,lC=Object.prototype,uC=sC.toString,cC=lC.hasOwnProperty,dC=RegExp("^"+uC.call(cC).replace(aC,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fC(t){if(!nC(t)||rC(t))return!1;var e=tC(t)?dC:oC;return e.test(iC(t))}var hC=fC;function pC(t,e){return t==null?void 0:t[e]}var mC=pC,gC=hC,vC=mC;function yC(t,e){var r=vC(t,e);return gC(r)?r:void 0}var su=yC,wC=su,bC=Wa,xC=wC(bC,"Map"),_v=xC,_C=su,SC=_C(Object,"create"),kp=SC,t5=kp;function kC(){this.__data__=t5?t5(null):{},this.size=0}var NC=kC;function EC(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var AC=EC,jC=kp,OC="__lodash_hash_undefined__",LC=Object.prototype,PC=LC.hasOwnProperty;function TC(t){var e=this.__data__;if(jC){var r=e[t];return r===OC?void 0:r}return PC.call(e,t)?e[t]:void 0}var CC=TC,RC=kp,IC=Object.prototype,DC=IC.hasOwnProperty;function MC(t){var e=this.__data__;return RC?e[t]!==void 0:DC.call(e,t)}var FC=MC,BC=kp,UC="__lodash_hash_undefined__";function zC(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=BC&&e===void 0?UC:e,this}var qC=zC,$C=NC,HC=AC,WC=CC,VC=FC,GC=qC;function lu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}lu.prototype.clear=$C;lu.prototype.delete=HC;lu.prototype.get=WC;lu.prototype.has=VC;lu.prototype.set=GC;var KC=lu,r5=KC,YC=_p,JC=_v;function XC(){this.size=0,this.__data__={hash:new r5,map:new(JC||YC),string:new r5}}var QC=XC;function ZC(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var eR=ZC,tR=eR;function rR(t,e){var r=t.__data__;return tR(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Np=rR,nR=Np;function iR(t){var e=nR(this,t).delete(t);return this.size-=e?1:0,e}var aR=iR,oR=Np;function sR(t){return oR(this,t).get(t)}var lR=sR,uR=Np;function cR(t){return uR(this,t).has(t)}var dR=cR,fR=Np;function hR(t,e){var r=fR(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var pR=hR,mR=QC,gR=aR,vR=lR,yR=dR,wR=pR;function uu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}uu.prototype.clear=mR;uu.prototype.delete=gR;uu.prototype.get=vR;uu.prototype.has=yR;uu.prototype.set=wR;var y3=uu,bR=_p,xR=_v,_R=y3,SR=200;function kR(t,e){var r=this.__data__;if(r instanceof bR){var n=r.__data__;if(!xR||n.length<SR-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new _R(n)}return r.set(t,e),this.size=r.size,this}var NR=kR,ER=_p,AR=h7,jR=m7,OR=v7,LR=w7,PR=NR;function cu(t){var e=this.__data__=new ER(t);this.size=e.size}cu.prototype.clear=AR;cu.prototype.delete=jR;cu.prototype.get=OR;cu.prototype.has=LR;cu.prototype.set=PR;var TR=cu,CR="__lodash_hash_undefined__";function RR(t){return this.__data__.set(t,CR),this}var IR=RR;function DR(t){return this.__data__.has(t)}var MR=DR,FR=y3,BR=IR,UR=MR;function Bh(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new FR;++e<r;)this.add(t[e])}Bh.prototype.add=Bh.prototype.push=BR;Bh.prototype.has=UR;var zR=Bh;function qR(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var $R=qR;function HR(t,e){return t.has(e)}var WR=HR,VR=zR,GR=$R,KR=WR,YR=1,JR=2;function XR(t,e,r,n,i,a){var o=r&YR,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(t),h=a.get(e);if(u&&h)return u==e&&h==t;var d=-1,f=!0,c=r&JR?new VR:void 0;for(a.set(t,e),a.set(e,t);++d<s;){var y=t[d],v=e[d];if(n)var w=o?n(v,y,d,e,t,a):n(y,v,d,t,e,a);if(w!==void 0){if(w)continue;f=!1;break}if(c){if(!GR(e,function(p,g){if(!KR(c,g)&&(y===p||i(y,p,r,n,a)))return c.push(g)})){f=!1;break}}else if(!(y===v||i(y,v,r,n,a))){f=!1;break}}return a.delete(t),a.delete(e),f}var w3=XR,QR=Wa,ZR=QR.Uint8Array,eI=ZR;function tI(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var rI=tI;function nI(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var iI=nI,n5=xv,i5=eI,aI=f3,oI=w3,sI=rI,lI=iI,uI=1,cI=2,dI="[object Boolean]",fI="[object Date]",hI="[object Error]",pI="[object Map]",mI="[object Number]",gI="[object RegExp]",vI="[object Set]",yI="[object String]",wI="[object Symbol]",bI="[object ArrayBuffer]",xI="[object DataView]",a5=n5?n5.prototype:void 0,pm=a5?a5.valueOf:void 0;function _I(t,e,r,n,i,a,o){switch(r){case xI:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case bI:return!(t.byteLength!=e.byteLength||!a(new i5(t),new i5(e)));case dI:case fI:case mI:return aI(+t,+e);case hI:return t.name==e.name&&t.message==e.message;case gI:case yI:return t==e+"";case pI:var s=sI;case vI:var l=n&uI;if(s||(s=lI),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;n|=cI,o.set(t,e);var h=oI(s(t),s(e),n,i,a,o);return o.delete(t),h;case wI:if(pm)return pm.call(t)==pm.call(e)}return!1}var SI=_I;function kI(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var NI=kI,EI=Array.isArray,Sv=EI,AI=NI,jI=Sv;function OI(t,e,r){var n=e(t);return jI(t)?n:AI(n,r(t))}var LI=OI;function PI(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}var TI=PI;function CI(){return[]}var RI=CI,II=TI,DI=RI,MI=Object.prototype,FI=MI.propertyIsEnumerable,o5=Object.getOwnPropertySymbols,BI=o5?function(t){return t==null?[]:(t=Object(t),II(o5(t),function(e){return FI.call(t,e)}))}:DI,UI=BI;function zI(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var qI=zI;function $I(t){return t!=null&&typeof t=="object"}var Ep=$I,HI=Sp,WI=Ep,VI="[object Arguments]";function GI(t){return WI(t)&&HI(t)==VI}var KI=GI,s5=KI,YI=Ep,b3=Object.prototype,JI=b3.hasOwnProperty,XI=b3.propertyIsEnumerable,QI=s5(function(){return arguments}())?s5:function(t){return YI(t)&&JI.call(t,"callee")&&!XI.call(t,"callee")},ZI=QI,Uh={exports:{}};function eD(){return!1}var tD=eD;Uh.exports;(function(t,e){var r=Wa,n=tD,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?r.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||n;t.exports=u})(Uh,Uh.exports);var x3=Uh.exports,rD=9007199254740991,nD=/^(?:0|[1-9]\d*)$/;function iD(t,e){var r=typeof t;return e=e??rD,!!e&&(r=="number"||r!="symbol"&&nD.test(t))&&t>-1&&t%1==0&&t<e}var aD=iD,oD=9007199254740991;function sD(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=oD}var _3=sD,lD=Sp,uD=_3,cD=Ep,dD="[object Arguments]",fD="[object Array]",hD="[object Boolean]",pD="[object Date]",mD="[object Error]",gD="[object Function]",vD="[object Map]",yD="[object Number]",wD="[object Object]",bD="[object RegExp]",xD="[object Set]",_D="[object String]",SD="[object WeakMap]",kD="[object ArrayBuffer]",ND="[object DataView]",ED="[object Float32Array]",AD="[object Float64Array]",jD="[object Int8Array]",OD="[object Int16Array]",LD="[object Int32Array]",PD="[object Uint8Array]",TD="[object Uint8ClampedArray]",CD="[object Uint16Array]",RD="[object Uint32Array]",vr={};vr[ED]=vr[AD]=vr[jD]=vr[OD]=vr[LD]=vr[PD]=vr[TD]=vr[CD]=vr[RD]=!0;vr[dD]=vr[fD]=vr[kD]=vr[hD]=vr[ND]=vr[pD]=vr[mD]=vr[gD]=vr[vD]=vr[yD]=vr[wD]=vr[bD]=vr[xD]=vr[_D]=vr[SD]=!1;function ID(t){return cD(t)&&uD(t.length)&&!!vr[lD(t)]}var DD=ID;function MD(t){return function(e){return t(e)}}var FD=MD,zh={exports:{}};zh.exports;(function(t,e){var r=h3,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,o=a&&r.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s})(zh,zh.exports);var BD=zh.exports,UD=DD,zD=FD,l5=BD,u5=l5&&l5.isTypedArray,qD=u5?zD(u5):UD,S3=qD,$D=qI,HD=ZI,WD=Sv,VD=x3,GD=aD,KD=S3,YD=Object.prototype,JD=YD.hasOwnProperty;function XD(t,e){var r=WD(t),n=!r&&HD(t),i=!r&&!n&&VD(t),a=!r&&!n&&!i&&KD(t),o=r||n||i||a,s=o?$D(t.length,String):[],l=s.length;for(var u in t)(e||JD.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||GD(u,l)))&&s.push(u);return s}var QD=XD,ZD=Object.prototype;function eM(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||ZD;return t===r}var tM=eM;function rM(t,e){return function(r){return t(e(r))}}var nM=rM,iM=nM,aM=iM(Object.keys,Object),oM=aM,sM=tM,lM=oM,uM=Object.prototype,cM=uM.hasOwnProperty;function dM(t){if(!sM(t))return lM(t);var e=[];for(var r in Object(t))cM.call(t,r)&&r!="constructor"&&e.push(r);return e}var fM=dM,hM=g3,pM=_3;function mM(t){return t!=null&&pM(t.length)&&!hM(t)}var gM=mM,vM=QD,yM=fM,wM=gM;function bM(t){return wM(t)?vM(t):yM(t)}var xM=bM,_M=LI,SM=UI,kM=xM;function NM(t){return _M(t,kM,SM)}var EM=NM,c5=EM,AM=1,jM=Object.prototype,OM=jM.hasOwnProperty;function LM(t,e,r,n,i,a){var o=r&AM,s=c5(t),l=s.length,u=c5(e),h=u.length;if(l!=h&&!o)return!1;for(var d=l;d--;){var f=s[d];if(!(o?f in e:OM.call(e,f)))return!1}var c=a.get(t),y=a.get(e);if(c&&y)return c==e&&y==t;var v=!0;a.set(t,e),a.set(e,t);for(var w=o;++d<l;){f=s[d];var p=t[f],g=e[f];if(n)var b=o?n(g,p,f,e,t,a):n(p,g,f,t,e,a);if(!(b===void 0?p===g||i(p,g,r,n,a):b)){v=!1;break}w||(w=f=="constructor")}if(v&&!w){var _=t.constructor,E=e.constructor;_!=E&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof E=="function"&&E instanceof E)&&(v=!1)}return a.delete(t),a.delete(e),v}var PM=LM,TM=su,CM=Wa,RM=TM(CM,"DataView"),IM=RM,DM=su,MM=Wa,FM=DM(MM,"Promise"),BM=FM,UM=su,zM=Wa,qM=UM(zM,"Set"),$M=qM,HM=su,WM=Wa,VM=HM(WM,"WeakMap"),GM=VM,Qg=IM,Zg=_v,e1=BM,t1=$M,r1=GM,k3=Sp,du=v3,d5="[object Map]",KM="[object Object]",f5="[object Promise]",h5="[object Set]",p5="[object WeakMap]",m5="[object DataView]",YM=du(Qg),JM=du(Zg),XM=du(e1),QM=du(t1),ZM=du(r1),is=k3;(Qg&&is(new Qg(new ArrayBuffer(1)))!=m5||Zg&&is(new Zg)!=d5||e1&&is(e1.resolve())!=f5||t1&&is(new t1)!=h5||r1&&is(new r1)!=p5)&&(is=function(t){var e=k3(t),r=e==KM?t.constructor:void 0,n=r?du(r):"";if(n)switch(n){case YM:return m5;case JM:return d5;case XM:return f5;case QM:return h5;case ZM:return p5}return e});var e9=is,mm=TR,t9=w3,r9=SI,n9=PM,g5=e9,v5=Sv,y5=x3,i9=S3,a9=1,w5="[object Arguments]",b5="[object Array]",Tf="[object Object]",o9=Object.prototype,x5=o9.hasOwnProperty;function s9(t,e,r,n,i,a){var o=v5(t),s=v5(e),l=o?b5:g5(t),u=s?b5:g5(e);l=l==w5?Tf:l,u=u==w5?Tf:u;var h=l==Tf,d=u==Tf,f=l==u;if(f&&y5(t)){if(!y5(e))return!1;o=!0,h=!1}if(f&&!h)return a||(a=new mm),o||i9(t)?t9(t,e,r,n,i,a):r9(t,e,l,r,n,i,a);if(!(r&a9)){var c=h&&x5.call(t,"__wrapped__"),y=d&&x5.call(e,"__wrapped__");if(c||y){var v=c?t.value():t,w=y?e.value():e;return a||(a=new mm),i(v,w,r,n,a)}}return f?(a||(a=new mm),n9(t,e,r,n,i,a)):!1}var l9=s9,u9=l9,_5=Ep;function N3(t,e,r,n,i){return t===e?!0:t==null||e==null||!_5(t)&&!_5(e)?t!==t&&e!==e:u9(t,e,r,n,N3,i)}var c9=N3,d9=c9;function f9(t,e){return d9(t,e)}var h9=f9,E3={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(n,i){t.exports=i()})(typeof self<"u"?self:li,function(){return function(r){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return r[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=r,i.c=n,i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:s})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=109)}([function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(17),o=i(18),s=i(19),l=i(45),u=i(46),h=i(47),d=i(48),f=i(49),c=i(12),y=i(32),v=i(33),w=i(31),p=i(1),g={Scope:p.Scope,create:p.create,find:p.find,query:p.query,register:p.register,Container:a.default,Format:o.default,Leaf:s.default,Embed:d.default,Scroll:l.default,Block:h.default,Inline:u.default,Text:f.default,Attributor:{Attribute:c.default,Class:y.default,Style:v.default,Store:w.default}};n.default=g},function(r,n,i){var a=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var b in g)g.hasOwnProperty(b)&&(p[b]=g[b])};return function(p,g){w(p,g);function b(){this.constructor=p}p.prototype=g===null?Object.create(g):(b.prototype=g.prototype,new b)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(w){a(p,w);function p(g){var b=this;return g="[Parchment] "+g,b=w.call(this,g)||this,b.message=g,b.name=b.constructor.name,b}return p}(Error);n.ParchmentError=o;var s={},l={},u={},h={};n.DATA_KEY="__blot";var d;(function(w){w[w.TYPE=3]="TYPE",w[w.LEVEL=12]="LEVEL",w[w.ATTRIBUTE=13]="ATTRIBUTE",w[w.BLOT=14]="BLOT",w[w.INLINE=7]="INLINE",w[w.BLOCK=11]="BLOCK",w[w.BLOCK_BLOT=10]="BLOCK_BLOT",w[w.INLINE_BLOT=6]="INLINE_BLOT",w[w.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",w[w.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",w[w.ANY=15]="ANY"})(d=n.Scope||(n.Scope={}));function f(w,p){var g=y(w);if(g==null)throw new o("Unable to create "+w+" blot");var b=g,_=w instanceof Node||w.nodeType===Node.TEXT_NODE?w:b.create(p);return new b(_,p)}n.create=f;function c(w,p){return p===void 0&&(p=!1),w==null?null:w[n.DATA_KEY]!=null?w[n.DATA_KEY].blot:p?c(w.parentNode,p):null}n.find=c;function y(w,p){p===void 0&&(p=d.ANY);var g;if(typeof w=="string")g=h[w]||s[w];else if(w instanceof Text||w.nodeType===Node.TEXT_NODE)g=h.text;else if(typeof w=="number")w&d.LEVEL&d.BLOCK?g=h.block:w&d.LEVEL&d.INLINE&&(g=h.inline);else if(w instanceof HTMLElement){var b=(w.getAttribute("class")||"").split(/\s+/);for(var _ in b)if(g=l[b[_]],g)break;g=g||u[w.tagName]}return g==null?null:p&d.LEVEL&g.scope&&p&d.TYPE&g.scope?g:null}n.query=y;function v(){for(var w=[],p=0;p<arguments.length;p++)w[p]=arguments[p];if(w.length>1)return w.map(function(_){return v(_)});var g=w[0];if(typeof g.blotName!="string"&&typeof g.attrName!="string")throw new o("Invalid definition");if(g.blotName==="abstract")throw new o("Cannot register abstract class");if(h[g.blotName||g.attrName]=g,typeof g.keyName=="string")s[g.keyName]=g;else if(g.className!=null&&(l[g.className]=g),g.tagName!=null){Array.isArray(g.tagName)?g.tagName=g.tagName.map(function(_){return _.toUpperCase()}):g.tagName=g.tagName.toUpperCase();var b=Array.isArray(g.tagName)?g.tagName:[g.tagName];b.forEach(function(_){(u[_]==null||g.className==null)&&(u[_]=g)})}return g}n.register=v},function(r,n,i){var a=i(51),o=i(11),s=i(3),l=i(20),u="\0",h=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};h.prototype.insert=function(d,f){var c={};return d.length===0?this:(c.insert=d,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(c.attributes=f),this.push(c))},h.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},h.prototype.retain=function(d,f){if(d<=0)return this;var c={retain:d};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(c.attributes=f),this.push(c)},h.prototype.push=function(d){var f=this.ops.length,c=this.ops[f-1];if(d=s(!0,{},d),typeof c=="object"){if(typeof d.delete=="number"&&typeof c.delete=="number")return this.ops[f-1]={delete:c.delete+d.delete},this;if(typeof c.delete=="number"&&d.insert!=null&&(f-=1,c=this.ops[f-1],typeof c!="object"))return this.ops.unshift(d),this;if(o(d.attributes,c.attributes)){if(typeof d.insert=="string"&&typeof c.insert=="string")return this.ops[f-1]={insert:c.insert+d.insert},typeof d.attributes=="object"&&(this.ops[f-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof c.retain=="number")return this.ops[f-1]={retain:c.retain+d.retain},typeof d.attributes=="object"&&(this.ops[f-1].attributes=d.attributes),this}}return f===this.ops.length?this.ops.push(d):this.ops.splice(f,0,d),this},h.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},h.prototype.filter=function(d){return this.ops.filter(d)},h.prototype.forEach=function(d){this.ops.forEach(d)},h.prototype.map=function(d){return this.ops.map(d)},h.prototype.partition=function(d){var f=[],c=[];return this.forEach(function(y){var v=d(y)?f:c;v.push(y)}),[f,c]},h.prototype.reduce=function(d,f){return this.ops.reduce(d,f)},h.prototype.changeLength=function(){return this.reduce(function(d,f){return f.insert?d+l.length(f):f.delete?d-f.delete:d},0)},h.prototype.length=function(){return this.reduce(function(d,f){return d+l.length(f)},0)},h.prototype.slice=function(d,f){d=d||0,typeof f!="number"&&(f=1/0);for(var c=[],y=l.iterator(this.ops),v=0;v<f&&y.hasNext();){var w;v<d?w=y.next(d-v):(w=y.next(f-v),c.push(w)),v+=l.length(w)}return new h(c)},h.prototype.compose=function(d){var f=l.iterator(this.ops),c=l.iterator(d.ops),y=[],v=c.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var w=v.retain;f.peekType()==="insert"&&f.peekLength()<=w;)w-=f.peekLength(),y.push(f.next());v.retain-w>0&&c.next(v.retain-w)}for(var p=new h(y);f.hasNext()||c.hasNext();)if(c.peekType()==="insert")p.push(c.next());else if(f.peekType()==="delete")p.push(f.next());else{var g=Math.min(f.peekLength(),c.peekLength()),b=f.next(g),_=c.next(g);if(typeof _.retain=="number"){var E={};typeof b.retain=="number"?E.retain=g:E.insert=b.insert;var C=l.attributes.compose(b.attributes,_.attributes,typeof b.retain=="number");if(C&&(E.attributes=C),p.push(E),!c.hasNext()&&o(p.ops[p.ops.length-1],E)){var A=new h(f.rest());return p.concat(A).chop()}}else typeof _.delete=="number"&&typeof b.retain=="number"&&p.push(_)}return p.chop()},h.prototype.concat=function(d){var f=new h(this.ops.slice());return d.ops.length>0&&(f.push(d.ops[0]),f.ops=f.ops.concat(d.ops.slice(1))),f},h.prototype.diff=function(d,f){if(this.ops===d.ops)return new h;var c=[this,d].map(function(g){return g.map(function(b){if(b.insert!=null)return typeof b.insert=="string"?b.insert:u;var _=g===d?"on":"with";throw new Error("diff() called "+_+" non-document")}).join("")}),y=new h,v=a(c[0],c[1],f),w=l.iterator(this.ops),p=l.iterator(d.ops);return v.forEach(function(g){for(var b=g[1].length;b>0;){var _=0;switch(g[0]){case a.INSERT:_=Math.min(p.peekLength(),b),y.push(p.next(_));break;case a.DELETE:_=Math.min(b,w.peekLength()),w.next(_),y.delete(_);break;case a.EQUAL:_=Math.min(w.peekLength(),p.peekLength(),b);var E=w.next(_),C=p.next(_);o(E.insert,C.insert)?y.retain(_,l.attributes.diff(E.attributes,C.attributes)):y.push(C).delete(_);break}b-=_}}),y.chop()},h.prototype.eachLine=function(d,f){f=f||`
`;for(var c=l.iterator(this.ops),y=new h,v=0;c.hasNext();){if(c.peekType()!=="insert")return;var w=c.peek(),p=l.length(w)-c.peekLength(),g=typeof w.insert=="string"?w.insert.indexOf(f,p)-p:-1;if(g<0)y.push(c.next());else if(g>0)y.push(c.next(g));else{if(d(y,c.next(1).attributes||{},v)===!1)return;v+=1,y=new h}}y.length()>0&&d(y,{},v)},h.prototype.transform=function(d,f){if(f=!!f,typeof d=="number")return this.transformPosition(d,f);for(var c=l.iterator(this.ops),y=l.iterator(d.ops),v=new h;c.hasNext()||y.hasNext();)if(c.peekType()==="insert"&&(f||y.peekType()!=="insert"))v.retain(l.length(c.next()));else if(y.peekType()==="insert")v.push(y.next());else{var w=Math.min(c.peekLength(),y.peekLength()),p=c.next(w),g=y.next(w);if(p.delete)continue;g.delete?v.push(g):v.retain(w,l.attributes.transform(p.attributes,g.attributes,f))}return v.chop()},h.prototype.transformPosition=function(d,f){f=!!f;for(var c=l.iterator(this.ops),y=0;c.hasNext()&&y<=d;){var v=c.peekLength(),w=c.peekType();if(c.next(),w==="delete"){d-=Math.min(v,d-y);continue}else w==="insert"&&(y<d||!f)&&(d+=v);y+=v}return d},r.exports=h},function(r,n){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=function(c){return typeof Array.isArray=="function"?Array.isArray(c):a.call(c)==="[object Array]"},u=function(c){if(!c||a.call(c)!=="[object Object]")return!1;var y=i.call(c,"constructor"),v=c.constructor&&c.constructor.prototype&&i.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!y&&!v)return!1;var w;for(w in c);return typeof w>"u"||i.call(c,w)},h=function(c,y){o&&y.name==="__proto__"?o(c,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):c[y.name]=y.newValue},d=function(c,y){if(y==="__proto__")if(i.call(c,y)){if(s)return s(c,y).value}else return;return c[y]};r.exports=function f(){var c,y,v,w,p,g,b=arguments[0],_=1,E=arguments.length,C=!1;for(typeof b=="boolean"&&(C=b,b=arguments[1]||{},_=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});_<E;++_)if(c=arguments[_],c!=null)for(y in c)v=d(b,y),w=d(c,y),b!==w&&(C&&w&&(u(w)||(p=l(w)))?(p?(p=!1,g=v&&l(v)?v:[]):g=v&&u(v)?v:{},h(b,{name:y,newValue:f(C,g,w)})):typeof w<"u"&&h(b,{name:y,newValue:w}));return b}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var a=function(){function k(j,I){for(var R=0;R<I.length;R++){var $=I[R];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(j,$.key,$)}}return function(j,I,R){return I&&k(j.prototype,I),R&&k(j,R),j}}(),o=function k(j,I,R){j===null&&(j=Function.prototype);var $=Object.getOwnPropertyDescriptor(j,I);if($===void 0){var Z=Object.getPrototypeOf(j);return Z===null?void 0:k(Z,I,R)}else{if("value"in $)return $.value;var Q=$.get;return Q===void 0?void 0:Q.call(R)}},s=i(3),l=b(s),u=i(2),h=b(u),d=i(0),f=b(d),c=i(16),y=b(c),v=i(6),w=b(v),p=i(7),g=b(p);function b(k){return k&&k.__esModule?k:{default:k}}function _(k,j){if(!(k instanceof j))throw new TypeError("Cannot call a class as a function")}function E(k,j){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:k}function C(k,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);k.prototype=Object.create(j&&j.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(k,j):k.__proto__=j)}var A=1,P=function(k){C(j,k);function j(){return _(this,j),E(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return a(j,[{key:"attach",value:function(){o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new h.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(R,$){var Z=f.default.query(R,f.default.Scope.BLOCK_ATTRIBUTE);Z!=null&&this.attributes.attribute(Z,$)}},{key:"formatAt",value:function(R,$,Z,Q){this.format(Z,Q)}},{key:"insertAt",value:function(R,$,Z){if(typeof $=="string"&&$.endsWith(`
`)){var Q=f.default.create(F.blotName);this.parent.insertBefore(Q,R===0?this:this.next),Q.insertAt(0,$.slice(0,-1))}else o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"insertAt",this).call(this,R,$,Z)}}]),j}(f.default.Embed);P.scope=f.default.Scope.BLOCK_BLOT;var F=function(k){C(j,k);function j(I){_(this,j);var R=E(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,I));return R.cache={},R}return a(j,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(R,$){return $.length()===0?R:R.insert($.value(),T($))},new h.default).insert(`
`,T(this))),this.cache.delta}},{key:"deleteAt",value:function(R,$){o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"deleteAt",this).call(this,R,$),this.cache={}}},{key:"formatAt",value:function(R,$,Z,Q){$<=0||(f.default.query(Z,f.default.Scope.BLOCK)?R+$===this.length()&&this.format(Z,Q):o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"formatAt",this).call(this,R,Math.min($,this.length()-R-1),Z,Q),this.cache={})}},{key:"insertAt",value:function(R,$,Z){if(Z!=null)return o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"insertAt",this).call(this,R,$,Z);if($.length!==0){var Q=$.split(`
`),X=Q.shift();X.length>0&&(R<this.length()-1||this.children.tail==null?o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"insertAt",this).call(this,Math.min(R,this.length()-1),X):this.children.tail.insertAt(this.children.tail.length(),X),this.cache={});var G=this;Q.reduce(function(H,B){return G=G.split(H,!0),G.insertAt(0,B),B.length},R+X.length)}}},{key:"insertBefore",value:function(R,$){var Z=this.children.head;o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"insertBefore",this).call(this,R,$),Z instanceof y.default&&Z.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"length",this).call(this)+A),this.cache.length}},{key:"moveChildren",value:function(R,$){o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"moveChildren",this).call(this,R,$),this.cache={}}},{key:"optimize",value:function(R){o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"optimize",this).call(this,R),this.cache={}}},{key:"path",value:function(R){return o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"path",this).call(this,R,!0)}},{key:"removeChild",value:function(R){o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"removeChild",this).call(this,R),this.cache={}}},{key:"split",value:function(R){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if($&&(R===0||R>=this.length()-A)){var Z=this.clone();return R===0?(this.parent.insertBefore(Z,this),this):(this.parent.insertBefore(Z,this.next),Z)}else{var Q=o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"split",this).call(this,R,$);return this.cache={},Q}}}]),j}(f.default.Block);F.blotName="block",F.tagName="P",F.defaultChild="break",F.allowedChildren=[w.default,f.default.Embed,g.default];function T(k){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k==null||(typeof k.formats=="function"&&(j=(0,l.default)(j,k.formats())),k.parent==null||k.parent.blotName=="scroll"||k.parent.statics.scope!==k.statics.scope)?j:T(k.parent,j)}n.bubbleFormats=T,n.BlockEmbed=P,n.default=F},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},o=function(){function G(H,B){var L=[],D=!0,z=!1,q=void 0;try{for(var U=H[Symbol.iterator](),K;!(D=(K=U.next()).done)&&(L.push(K.value),!(B&&L.length===B));D=!0);}catch(ne){z=!0,q=ne}finally{try{!D&&U.return&&U.return()}finally{if(z)throw q}}return L}return function(H,B){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return G(H,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function G(H,B){for(var L=0;L<B.length;L++){var D=B[L];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(H,D.key,D)}}return function(H,B,L){return B&&G(H.prototype,B),L&&G(H,L),H}}();i(50);var l=i(2),u=T(l),h=i(14),d=T(h),f=i(8),c=T(f),y=i(9),v=T(y),w=i(0),p=T(w),g=i(15),b=T(g),_=i(3),E=T(_),C=i(10),A=T(C),P=i(34),F=T(P);function T(G){return G&&G.__esModule?G:{default:G}}function k(G,H,B){return H in G?Object.defineProperty(G,H,{value:B,enumerable:!0,configurable:!0,writable:!0}):G[H]=B,G}function j(G,H){if(!(G instanceof H))throw new TypeError("Cannot call a class as a function")}var I=(0,A.default)("quill"),R=function(){s(G,null,[{key:"debug",value:function(B){B===!0&&(B="log"),A.default.level(B)}},{key:"find",value:function(B){return B.__quill||p.default.find(B)}},{key:"import",value:function(B){return this.imports[B]==null&&I.error("Cannot import "+B+". Are you sure it was registered?"),this.imports[B]}},{key:"register",value:function(B,L){var D=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof B!="string"){var q=B.attrName||B.blotName;typeof q=="string"?this.register("formats/"+q,B,L):Object.keys(B).forEach(function(U){D.register(U,B[U],L)})}else this.imports[B]!=null&&!z&&I.warn("Overwriting "+B+" with",L),this.imports[B]=L,(B.startsWith("blots/")||B.startsWith("formats/"))&&L.blotName!=="abstract"?p.default.register(L):B.startsWith("modules")&&typeof L.register=="function"&&L.register()}}]);function G(H){var B=this,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(j(this,G),this.options=$(H,L),this.container=this.options.container,this.container==null)return I.error("Invalid Quill container",H);this.options.debug&&G.debug(this.options.debug);var D=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new c.default,this.scroll=p.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new b.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(c.default.events.EDITOR_CHANGE,function(q){q===c.default.events.TEXT_CHANGE&&B.root.classList.toggle("ql-blank",B.editor.isBlank())}),this.emitter.on(c.default.events.SCROLL_UPDATE,function(q,U){var K=B.selection.lastRange,ne=K&&K.length===0?K.index:void 0;Z.call(B,function(){return B.editor.update(null,U,ne)},q)});var z=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+D+"<p><br></p></div>");this.setContents(z),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return s(G,[{key:"addContainer",value:function(B){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof B=="string"){var D=B;B=document.createElement("div"),B.classList.add(D)}return this.container.insertBefore(B,L),B}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(B,L,D){var z=this,q=Q(B,L,D),U=o(q,4);return B=U[0],L=U[1],D=U[3],Z.call(this,function(){return z.editor.deleteText(B,L)},D,B,-1*L)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(B),this.container.classList.toggle("ql-disabled",!B)}},{key:"focus",value:function(){var B=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=B,this.scrollIntoView()}},{key:"format",value:function(B,L){var D=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c.default.sources.API;return Z.call(this,function(){var q=D.getSelection(!0),U=new u.default;if(q==null)return U;if(p.default.query(B,p.default.Scope.BLOCK))U=D.editor.formatLine(q.index,q.length,k({},B,L));else{if(q.length===0)return D.selection.format(B,L),U;U=D.editor.formatText(q.index,q.length,k({},B,L))}return D.setSelection(q,c.default.sources.SILENT),U},z)}},{key:"formatLine",value:function(B,L,D,z,q){var U=this,K=void 0,ne=Q(B,L,D,z,q),ie=o(ne,4);return B=ie[0],L=ie[1],K=ie[2],q=ie[3],Z.call(this,function(){return U.editor.formatLine(B,L,K)},q,B,0)}},{key:"formatText",value:function(B,L,D,z,q){var U=this,K=void 0,ne=Q(B,L,D,z,q),ie=o(ne,4);return B=ie[0],L=ie[1],K=ie[2],q=ie[3],Z.call(this,function(){return U.editor.formatText(B,L,K)},q,B,0)}},{key:"getBounds",value:function(B){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=void 0;typeof B=="number"?D=this.selection.getBounds(B,L):D=this.selection.getBounds(B.index,B.length);var z=this.container.getBoundingClientRect();return{bottom:D.bottom-z.top,height:D.height,left:D.left-z.left,right:D.right-z.left,top:D.top-z.top,width:D.width}}},{key:"getContents",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-B,D=Q(B,L),z=o(D,2);return B=z[0],L=z[1],this.editor.getContents(B,L)}},{key:"getFormat",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof B=="number"?this.editor.getFormat(B,L):this.editor.getFormat(B.index,B.length)}},{key:"getIndex",value:function(B){return B.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(B){return this.scroll.leaf(B)}},{key:"getLine",value:function(B){return this.scroll.line(B)}},{key:"getLines",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof B!="number"?this.scroll.lines(B.index,B.length):this.scroll.lines(B,L)}},{key:"getModule",value:function(B){return this.theme.modules[B]}},{key:"getSelection",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return B&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-B,D=Q(B,L),z=o(D,2);return B=z[0],L=z[1],this.editor.getText(B,L)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(B,L,D){var z=this,q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:G.sources.API;return Z.call(this,function(){return z.editor.insertEmbed(B,L,D)},q,B)}},{key:"insertText",value:function(B,L,D,z,q){var U=this,K=void 0,ne=Q(B,0,D,z,q),ie=o(ne,4);return B=ie[0],K=ie[2],q=ie[3],Z.call(this,function(){return U.editor.insertText(B,L,K)},q,B,L.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(B,L,D){this.clipboard.dangerouslyPasteHTML(B,L,D)}},{key:"removeFormat",value:function(B,L,D){var z=this,q=Q(B,L,D),U=o(q,4);return B=U[0],L=U[1],D=U[3],Z.call(this,function(){return z.editor.removeFormat(B,L)},D,B)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(B){var L=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.default.sources.API;return Z.call(this,function(){B=new u.default(B);var z=L.getLength(),q=L.editor.deleteText(0,z),U=L.editor.applyDelta(B),K=U.ops[U.ops.length-1];K!=null&&typeof K.insert=="string"&&K.insert[K.insert.length-1]===`
`&&(L.editor.deleteText(L.getLength()-1,1),U.delete(1));var ne=q.compose(U);return ne},D)}},{key:"setSelection",value:function(B,L,D){if(B==null)this.selection.setRange(null,L||G.sources.API);else{var z=Q(B,L,D),q=o(z,4);B=q[0],L=q[1],D=q[3],this.selection.setRange(new g.Range(B,L),D),D!==c.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(B){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.default.sources.API,D=new u.default().insert(B);return this.setContents(D,L)}},{key:"update",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c.default.sources.USER,L=this.scroll.update(B);return this.selection.update(B),L}},{key:"updateContents",value:function(B){var L=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.default.sources.API;return Z.call(this,function(){return B=new u.default(B),L.editor.applyDelta(B,D)},D,!0)}}]),G}();R.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},R.events=c.default.events,R.sources=c.default.sources,R.version="1.3.7",R.imports={delta:u.default,parchment:p.default,"core/module":v.default,"core/theme":F.default};function $(G,H){if(H=(0,E.default)(!0,{container:G,modules:{clipboard:!0,keyboard:!0,history:!0}},H),!H.theme||H.theme===R.DEFAULTS.theme)H.theme=F.default;else if(H.theme=R.import("themes/"+H.theme),H.theme==null)throw new Error("Invalid theme "+H.theme+". Did you register it?");var B=(0,E.default)(!0,{},H.theme.DEFAULTS);[B,H].forEach(function(z){z.modules=z.modules||{},Object.keys(z.modules).forEach(function(q){z.modules[q]===!0&&(z.modules[q]={})})});var L=Object.keys(B.modules).concat(Object.keys(H.modules)),D=L.reduce(function(z,q){var U=R.import("modules/"+q);return U==null?I.error("Cannot load "+q+" module. Are you sure you registered it?"):z[q]=U.DEFAULTS||{},z},{});return H.modules!=null&&H.modules.toolbar&&H.modules.toolbar.constructor!==Object&&(H.modules.toolbar={container:H.modules.toolbar}),H=(0,E.default)(!0,{},R.DEFAULTS,{modules:D},B,H),["bounds","container","scrollingContainer"].forEach(function(z){typeof H[z]=="string"&&(H[z]=document.querySelector(H[z]))}),H.modules=Object.keys(H.modules).reduce(function(z,q){return H.modules[q]&&(z[q]=H.modules[q]),z},{}),H}function Z(G,H,B,L){if(this.options.strict&&!this.isEnabled()&&H===c.default.sources.USER)return new u.default;var D=B==null?null:this.getSelection(),z=this.editor.delta,q=G();if(D!=null&&(B===!0&&(B=D.index),L==null?D=X(D,q,H):L!==0&&(D=X(D,B,L,H)),this.setSelection(D,c.default.sources.SILENT)),q.length()>0){var U,K=[c.default.events.TEXT_CHANGE,q,z,H];if((U=this.emitter).emit.apply(U,[c.default.events.EDITOR_CHANGE].concat(K)),H!==c.default.sources.SILENT){var ne;(ne=this.emitter).emit.apply(ne,K)}}return q}function Q(G,H,B,L,D){var z={};return typeof G.index=="number"&&typeof G.length=="number"?typeof H!="number"?(D=L,L=B,B=H,H=G.length,G=G.index):(H=G.length,G=G.index):typeof H!="number"&&(D=L,L=B,B=H,H=0),(typeof B>"u"?"undefined":a(B))==="object"?(z=B,D=L):typeof B=="string"&&(L!=null?z[B]=L:D=B),D=D||c.default.sources.API,[G,H,z,D]}function X(G,H,B,L){if(G==null)return null;var D=void 0,z=void 0;if(H instanceof u.default){var q=[G.index,G.index+G.length].map(function(ie){return H.transformPosition(ie,L!==c.default.sources.USER)}),U=o(q,2);D=U[0],z=U[1]}else{var K=[G.index,G.index+G.length].map(function(ie){return ie<H||ie===H&&L===c.default.sources.USER?ie:B>=0?ie+B:Math.max(H,ie+B)}),ne=o(K,2);D=ne[0],z=ne[1]}return new g.Range(D,z-D)}n.expandConfig=$,n.overload=Q,n.default=R},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(p,g){for(var b=0;b<g.length;b++){var _=g[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,_.key,_)}}return function(p,g,b){return g&&w(p.prototype,g),b&&w(p,b),p}}(),o=function w(p,g,b){p===null&&(p=Function.prototype);var _=Object.getOwnPropertyDescriptor(p,g);if(_===void 0){var E=Object.getPrototypeOf(p);return E===null?void 0:w(E,g,b)}else{if("value"in _)return _.value;var C=_.get;return C===void 0?void 0:C.call(b)}},s=i(7),l=d(s),u=i(0),h=d(u);function d(w){return w&&w.__esModule?w:{default:w}}function f(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}function c(w,p){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:w}function y(w,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);w.prototype=Object.create(p&&p.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(w,p):w.__proto__=p)}var v=function(w){y(p,w);function p(){return f(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return a(p,[{key:"formatAt",value:function(b,_,E,C){if(p.compare(this.statics.blotName,E)<0&&h.default.query(E,h.default.Scope.BLOT)){var A=this.isolate(b,_);C&&A.wrap(E,C)}else o(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"formatAt",this).call(this,b,_,E,C)}},{key:"optimize",value:function(b){if(o(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"optimize",this).call(this,b),this.parent instanceof p&&p.compare(this.statics.blotName,this.parent.statics.blotName)>0){var _=this.parent.isolate(this.offset(),this.length());this.moveChildren(_),_.wrap(this)}}}],[{key:"compare",value:function(b,_){var E=p.order.indexOf(b),C=p.order.indexOf(_);return E>=0||C>=0?E-C:b===_?0:b<_?-1:1}}]),p}(h.default.Inline);v.allowedChildren=[v,h.default.Embed,l.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function u(f,c){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:f}function h(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);f.prototype=Object.create(c&&c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(f,c):f.__proto__=c)}var d=function(f){h(c,f);function c(){return l(this,c),u(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return c}(o.default.Text);n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function g(b,_){for(var E=0;E<_.length;E++){var C=_[E];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}return function(b,_,E){return _&&g(b.prototype,_),E&&g(b,E),b}}(),o=function g(b,_,E){b===null&&(b=Function.prototype);var C=Object.getOwnPropertyDescriptor(b,_);if(C===void 0){var A=Object.getPrototypeOf(b);return A===null?void 0:g(A,_,E)}else{if("value"in C)return C.value;var P=C.get;return P===void 0?void 0:P.call(E)}},s=i(54),l=d(s),u=i(10),h=d(u);function d(g){return g&&g.__esModule?g:{default:g}}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function c(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function y(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var v=(0,h.default)("quill:events"),w=["selectionchange","mousedown","mouseup","click"];w.forEach(function(g){document.addEventListener(g,function(){for(var b=arguments.length,_=Array(b),E=0;E<b;E++)_[E]=arguments[E];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(C){if(C.__quill&&C.__quill.emitter){var A;(A=C.__quill.emitter).handleDOM.apply(A,_)}})})});var p=function(g){y(b,g);function b(){f(this,b);var _=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return _.listeners={},_.on("error",v.error),_}return a(b,[{key:"emit",value:function(){v.log.apply(v,arguments),o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(E){for(var C=arguments.length,A=Array(C>1?C-1:0),P=1;P<C;P++)A[P-1]=arguments[P];(this.listeners[E.type]||[]).forEach(function(F){var T=F.node,k=F.handler;(E.target===T||T.contains(E.target))&&k.apply(void 0,[E].concat(A))})}},{key:"listenDOM",value:function(E,C,A){this.listeners[E]||(this.listeners[E]=[]),this.listeners[E].push({node:C,handler:A})}}]),b}(l.default);p.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},p.sources={API:"api",SILENT:"silent",USER:"user"},n.default=p},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});function a(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function s(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,s),this.quill=l,this.options=u};o.DEFAULTS={},n.default=o},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=["error","warn","log","info"],o="warn";function s(u){if(a.indexOf(u)<=a.indexOf(o)){for(var h,d=arguments.length,f=Array(d>1?d-1:0),c=1;c<d;c++)f[c-1]=arguments[c];(h=console)[u].apply(h,f)}}function l(u){return a.reduce(function(h,d){return h[d]=s.bind(console,d,u),h},{})}s.level=l.level=function(u){o=u},n.default=l},function(r,n,i){var a=Array.prototype.slice,o=i(52),s=i(53),l=r.exports=function(f,c,y){return y||(y={}),f===c?!0:f instanceof Date&&c instanceof Date?f.getTime()===c.getTime():!f||!c||typeof f!="object"&&typeof c!="object"?y.strict?f===c:f==c:d(f,c,y)};function u(f){return f==null}function h(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function d(f,c,y){var v,w;if(u(f)||u(c)||f.prototype!==c.prototype)return!1;if(s(f))return s(c)?(f=a.call(f),c=a.call(c),l(f,c,y)):!1;if(h(f)){if(!h(c)||f.length!==c.length)return!1;for(v=0;v<f.length;v++)if(f[v]!==c[v])return!1;return!0}try{var p=o(f),g=o(c)}catch{return!1}if(p.length!=g.length)return!1;for(p.sort(),g.sort(),v=p.length-1;v>=0;v--)if(p[v]!=g[v])return!1;for(v=p.length-1;v>=0;v--)if(w=p[v],!l(f[w],c[w],y))return!1;return typeof f==typeof c}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(1),o=function(){function s(l,u,h){h===void 0&&(h={}),this.attrName=l,this.keyName=u;var d=a.Scope.TYPE&a.Scope.ATTRIBUTE;h.scope!=null?this.scope=h.scope&a.Scope.LEVEL|d:this.scope=a.Scope.ATTRIBUTE,h.whitelist!=null&&(this.whitelist=h.whitelist)}return s.keys=function(l){return[].map.call(l.attributes,function(u){return u.name})},s.prototype.add=function(l,u){return this.canAdd(l,u)?(l.setAttribute(this.keyName,u),!0):!1},s.prototype.canAdd=function(l,u){var h=a.query(l,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return h==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},s.prototype.remove=function(l){l.removeAttribute(this.keyName)},s.prototype.value=function(l){var u=l.getAttribute(this.keyName);return this.canAdd(l,u)&&u?u:""},s}();n.default=o},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var a=function(){function P(F,T){var k=[],j=!0,I=!1,R=void 0;try{for(var $=F[Symbol.iterator](),Z;!(j=(Z=$.next()).done)&&(k.push(Z.value),!(T&&k.length===T));j=!0);}catch(Q){I=!0,R=Q}finally{try{!j&&$.return&&$.return()}finally{if(I)throw R}}return k}return function(F,T){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return P(F,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function P(F,T){for(var k=0;k<T.length;k++){var j=T[k];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(F,j.key,j)}}return function(F,T,k){return T&&P(F.prototype,T),k&&P(F,k),F}}(),s=function P(F,T,k){F===null&&(F=Function.prototype);var j=Object.getOwnPropertyDescriptor(F,T);if(j===void 0){var I=Object.getPrototypeOf(F);return I===null?void 0:P(I,T,k)}else{if("value"in j)return j.value;var R=j.get;return R===void 0?void 0:R.call(k)}},l=i(2),u=g(l),h=i(0),d=g(h),f=i(4),c=g(f),y=i(6),v=g(y),w=i(7),p=g(w);function g(P){return P&&P.__esModule?P:{default:P}}function b(P,F){if(!(P instanceof F))throw new TypeError("Cannot call a class as a function")}function _(P,F){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:P}function E(P,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);P.prototype=Object.create(F&&F.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(P,F):P.__proto__=F)}var C=function(P){E(F,P);function F(){return b(this,F),_(this,(F.__proto__||Object.getPrototypeOf(F)).apply(this,arguments))}return F}(v.default);C.blotName="code",C.tagName="CODE";var A=function(P){E(F,P);function F(){return b(this,F),_(this,(F.__proto__||Object.getPrototypeOf(F)).apply(this,arguments))}return o(F,[{key:"delta",value:function(){var k=this,j=this.domNode.textContent;return j.endsWith(`
`)&&(j=j.slice(0,-1)),j.split(`
`).reduce(function(I,R){return I.insert(R).insert(`
`,k.formats())},new u.default)}},{key:"format",value:function(k,j){if(!(k===this.statics.blotName&&j)){var I=this.descendant(p.default,this.length()-1),R=a(I,1),$=R[0];$!=null&&$.deleteAt($.length()-1,1),s(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"format",this).call(this,k,j)}}},{key:"formatAt",value:function(k,j,I,R){if(j!==0&&!(d.default.query(I,d.default.Scope.BLOCK)==null||I===this.statics.blotName&&R===this.statics.formats(this.domNode))){var $=this.newlineIndex(k);if(!($<0||$>=k+j)){var Z=this.newlineIndex(k,!0)+1,Q=$-Z+1,X=this.isolate(Z,Q),G=X.next;X.format(I,R),G instanceof F&&G.formatAt(0,k-Z+j-Q,I,R)}}}},{key:"insertAt",value:function(k,j,I){if(I==null){var R=this.descendant(p.default,k),$=a(R,2),Z=$[0],Q=$[1];Z.insertAt(Q,j)}}},{key:"length",value:function(){var k=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?k:k+1}},{key:"newlineIndex",value:function(k){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(j)return this.domNode.textContent.slice(0,k).lastIndexOf(`
`);var I=this.domNode.textContent.slice(k).indexOf(`
`);return I>-1?k+I:-1}},{key:"optimize",value:function(k){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),s(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"optimize",this).call(this,k);var j=this.next;j!=null&&j.prev===this&&j.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===j.statics.formats(j.domNode)&&(j.optimize(k),j.moveChildren(this),j.remove())}},{key:"replace",value:function(k){s(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"replace",this).call(this,k),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(j){var I=d.default.find(j);I==null?j.parentNode.removeChild(j):I instanceof d.default.Embed?I.remove():I.unwrap()})}}],[{key:"create",value:function(k){var j=s(F.__proto__||Object.getPrototypeOf(F),"create",this).call(this,k);return j.setAttribute("spellcheck",!1),j}},{key:"formats",value:function(){return!0}}]),F}(c.default);A.blotName="code-block",A.tagName="PRE",A.TAB="  ",n.Code=C,n.default=A},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},o=function(){function G(H,B){var L=[],D=!0,z=!1,q=void 0;try{for(var U=H[Symbol.iterator](),K;!(D=(K=U.next()).done)&&(L.push(K.value),!(B&&L.length===B));D=!0);}catch(ne){z=!0,q=ne}finally{try{!D&&U.return&&U.return()}finally{if(z)throw q}}return L}return function(H,B){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return G(H,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function G(H,B){for(var L=0;L<B.length;L++){var D=B[L];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(H,D.key,D)}}return function(H,B,L){return B&&G(H.prototype,B),L&&G(H,L),H}}(),l=i(2),u=j(l),h=i(20),d=j(h),f=i(0),c=j(f),y=i(13),v=j(y),w=i(24),p=j(w),g=i(4),b=j(g),_=i(16),E=j(_),C=i(21),A=j(C),P=i(11),F=j(P),T=i(3),k=j(T);function j(G){return G&&G.__esModule?G:{default:G}}function I(G,H,B){return H in G?Object.defineProperty(G,H,{value:B,enumerable:!0,configurable:!0,writable:!0}):G[H]=B,G}function R(G,H){if(!(G instanceof H))throw new TypeError("Cannot call a class as a function")}var $=/^[ -~]*$/,Z=function(){function G(H){R(this,G),this.scroll=H,this.delta=this.getDelta()}return s(G,[{key:"applyDelta",value:function(B){var L=this,D=!1;this.scroll.update();var z=this.scroll.length();return this.scroll.batchStart(),B=X(B),B.reduce(function(q,U){var K=U.retain||U.delete||U.insert.length||1,ne=U.attributes||{};if(U.insert!=null){if(typeof U.insert=="string"){var ie=U.insert;ie.endsWith(`
`)&&D&&(D=!1,ie=ie.slice(0,-1)),q>=z&&!ie.endsWith(`
`)&&(D=!0),L.scroll.insertAt(q,ie);var he=L.scroll.line(q),ye=o(he,2),Oe=ye[0],Le=ye[1],He=(0,k.default)({},(0,g.bubbleFormats)(Oe));if(Oe instanceof b.default){var _e=Oe.descendant(c.default.Leaf,Le),se=o(_e,1),rt=se[0];He=(0,k.default)(He,(0,g.bubbleFormats)(rt))}ne=d.default.attributes.diff(He,ne)||{}}else if(a(U.insert)==="object"){var ve=Object.keys(U.insert)[0];if(ve==null)return q;L.scroll.insertAt(q,ve,U.insert[ve])}z+=K}return Object.keys(ne).forEach(function(de){L.scroll.formatAt(q,K,de,ne[de])}),q+K},0),B.reduce(function(q,U){return typeof U.delete=="number"?(L.scroll.deleteAt(q,U.delete),q):q+(U.retain||U.insert.length||1)},0),this.scroll.batchEnd(),this.update(B)}},{key:"deleteText",value:function(B,L){return this.scroll.deleteAt(B,L),this.update(new u.default().retain(B).delete(L))}},{key:"formatLine",value:function(B,L){var D=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(z).forEach(function(q){if(!(D.scroll.whitelist!=null&&!D.scroll.whitelist[q])){var U=D.scroll.lines(B,Math.max(L,1)),K=L;U.forEach(function(ne){var ie=ne.length();if(!(ne instanceof v.default))ne.format(q,z[q]);else{var he=B-ne.offset(D.scroll),ye=ne.newlineIndex(he+K)-he+1;ne.formatAt(he,ye,q,z[q])}K-=ie})}}),this.scroll.optimize(),this.update(new u.default().retain(B).retain(L,(0,A.default)(z)))}},{key:"formatText",value:function(B,L){var D=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(z).forEach(function(q){D.scroll.formatAt(B,L,q,z[q])}),this.update(new u.default().retain(B).retain(L,(0,A.default)(z)))}},{key:"getContents",value:function(B,L){return this.delta.slice(B,B+L)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(B,L){return B.concat(L.delta())},new u.default)}},{key:"getFormat",value:function(B){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=[],z=[];L===0?this.scroll.path(B).forEach(function(U){var K=o(U,1),ne=K[0];ne instanceof b.default?D.push(ne):ne instanceof c.default.Leaf&&z.push(ne)}):(D=this.scroll.lines(B,L),z=this.scroll.descendants(c.default.Leaf,B,L));var q=[D,z].map(function(U){if(U.length===0)return{};for(var K=(0,g.bubbleFormats)(U.shift());Object.keys(K).length>0;){var ne=U.shift();if(ne==null)return K;K=Q((0,g.bubbleFormats)(ne),K)}return K});return k.default.apply(k.default,q)}},{key:"getText",value:function(B,L){return this.getContents(B,L).filter(function(D){return typeof D.insert=="string"}).map(function(D){return D.insert}).join("")}},{key:"insertEmbed",value:function(B,L,D){return this.scroll.insertAt(B,L,D),this.update(new u.default().retain(B).insert(I({},L,D)))}},{key:"insertText",value:function(B,L){var D=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return L=L.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(B,L),Object.keys(z).forEach(function(q){D.scroll.formatAt(B,L.length,q,z[q])}),this.update(new u.default().retain(B).insert(L,(0,A.default)(z)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var B=this.scroll.children.head;return B.statics.blotName!==b.default.blotName||B.children.length>1?!1:B.children.head instanceof E.default}},{key:"removeFormat",value:function(B,L){var D=this.getText(B,L),z=this.scroll.line(B+L),q=o(z,2),U=q[0],K=q[1],ne=0,ie=new u.default;U!=null&&(U instanceof v.default?ne=U.newlineIndex(K)-K+1:ne=U.length()-K,ie=U.delta().slice(K,K+ne-1).insert(`
`));var he=this.getContents(B,L+ne),ye=he.diff(new u.default().insert(D).concat(ie)),Oe=new u.default().retain(B).concat(ye);return this.applyDelta(Oe)}},{key:"update",value:function(B){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,z=this.delta;if(L.length===1&&L[0].type==="characterData"&&L[0].target.data.match($)&&c.default.find(L[0].target)){var q=c.default.find(L[0].target),U=(0,g.bubbleFormats)(q),K=q.offset(this.scroll),ne=L[0].oldValue.replace(p.default.CONTENTS,""),ie=new u.default().insert(ne),he=new u.default().insert(q.value()),ye=new u.default().retain(K).concat(ie.diff(he,D));B=ye.reduce(function(Oe,Le){return Le.insert?Oe.insert(Le.insert,U):Oe.push(Le)},new u.default),this.delta=z.compose(B)}else this.delta=this.getDelta(),(!B||!(0,F.default)(z.compose(B),this.delta))&&(B=z.diff(this.delta,D));return B}}]),G}();function Q(G,H){return Object.keys(H).reduce(function(B,L){return G[L]==null||(H[L]===G[L]?B[L]=H[L]:Array.isArray(H[L])?H[L].indexOf(G[L])<0&&(B[L]=H[L].concat([G[L]])):B[L]=[H[L],G[L]]),B},{})}function X(G){return G.reduce(function(H,B){if(B.insert===1){var L=(0,A.default)(B.attributes);return delete L.image,H.insert({image:B.attributes.image},L)}if(B.attributes!=null&&(B.attributes.list===!0||B.attributes.bullet===!0)&&(B=(0,A.default)(B),B.attributes.list?B.attributes.list="ordered":(B.attributes.list="bullet",delete B.attributes.bullet)),typeof B.insert=="string"){var D=B.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return H.insert(D,B.attributes)}return H.push(B)},new u.default)}n.default=Z},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var a=function(){function P(F,T){var k=[],j=!0,I=!1,R=void 0;try{for(var $=F[Symbol.iterator](),Z;!(j=(Z=$.next()).done)&&(k.push(Z.value),!(T&&k.length===T));j=!0);}catch(Q){I=!0,R=Q}finally{try{!j&&$.return&&$.return()}finally{if(I)throw R}}return k}return function(F,T){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return P(F,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function P(F,T){for(var k=0;k<T.length;k++){var j=T[k];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(F,j.key,j)}}return function(F,T,k){return T&&P(F.prototype,T),k&&P(F,k),F}}(),s=i(0),l=p(s),u=i(21),h=p(u),d=i(11),f=p(d),c=i(8),y=p(c),v=i(10),w=p(v);function p(P){return P&&P.__esModule?P:{default:P}}function g(P){if(Array.isArray(P)){for(var F=0,T=Array(P.length);F<P.length;F++)T[F]=P[F];return T}else return Array.from(P)}function b(P,F){if(!(P instanceof F))throw new TypeError("Cannot call a class as a function")}var _=(0,w.default)("quill:selection"),E=function P(F){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;b(this,P),this.index=F,this.length=T},C=function(){function P(F,T){var k=this;b(this,P),this.emitter=T,this.scroll=F,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new E(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){k.mouseDown||setTimeout(k.update.bind(k,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(j,I){j===y.default.events.TEXT_CHANGE&&I.length()>0&&k.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(k.hasFocus()){var j=k.getNativeRange();j!=null&&j.start.node!==k.cursor.textNode&&k.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{k.setNativeRange(j.start.node,j.start.offset,j.end.node,j.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(j,I){if(I.range){var R=I.range,$=R.startNode,Z=R.startOffset,Q=R.endNode,X=R.endOffset;k.setNativeRange($,Z,Q,X)}}),this.update(y.default.sources.SILENT)}return o(P,[{key:"handleComposition",value:function(){var T=this;this.root.addEventListener("compositionstart",function(){T.composing=!0}),this.root.addEventListener("compositionend",function(){if(T.composing=!1,T.cursor.parent){var k=T.cursor.restore();if(!k)return;setTimeout(function(){T.setNativeRange(k.startNode,k.startOffset,k.endNode,k.endOffset)},1)}})}},{key:"handleDragging",value:function(){var T=this;this.emitter.listenDOM("mousedown",document.body,function(){T.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){T.mouseDown=!1,T.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(T,k){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[T])){this.scroll.update();var j=this.getNativeRange();if(!(j==null||!j.native.collapsed||l.default.query(T,l.default.Scope.BLOCK))){if(j.start.node!==this.cursor.textNode){var I=l.default.find(j.start.node,!1);if(I==null)return;if(I instanceof l.default.Leaf){var R=I.split(j.start.offset);I.parent.insertBefore(this.cursor,R)}else I.insertBefore(this.cursor,j.start.node);this.cursor.attach()}this.cursor.format(T,k),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(T){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,j=this.scroll.length();T=Math.min(T,j-1),k=Math.min(T+k,j-1)-T;var I=void 0,R=this.scroll.leaf(T),$=a(R,2),Z=$[0],Q=$[1];if(Z==null)return null;var X=Z.position(Q,!0),G=a(X,2);I=G[0],Q=G[1];var H=document.createRange();if(k>0){H.setStart(I,Q);var B=this.scroll.leaf(T+k),L=a(B,2);if(Z=L[0],Q=L[1],Z==null)return null;var D=Z.position(Q,!0),z=a(D,2);return I=z[0],Q=z[1],H.setEnd(I,Q),H.getBoundingClientRect()}else{var q="left",U=void 0;return I instanceof Text?(Q<I.data.length?(H.setStart(I,Q),H.setEnd(I,Q+1)):(H.setStart(I,Q-1),H.setEnd(I,Q),q="right"),U=H.getBoundingClientRect()):(U=Z.domNode.getBoundingClientRect(),Q>0&&(q="right")),{bottom:U.top+U.height,height:U.height,left:U[q],right:U[q],top:U.top,width:0}}}},{key:"getNativeRange",value:function(){var T=document.getSelection();if(T==null||T.rangeCount<=0)return null;var k=T.getRangeAt(0);if(k==null)return null;var j=this.normalizeNative(k);return _.info("getNativeRange",j),j}},{key:"getRange",value:function(){var T=this.getNativeRange();if(T==null)return[null,null];var k=this.normalizedToRange(T);return[k,T]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(T){var k=this,j=[[T.start.node,T.start.offset]];T.native.collapsed||j.push([T.end.node,T.end.offset]);var I=j.map(function(Z){var Q=a(Z,2),X=Q[0],G=Q[1],H=l.default.find(X,!0),B=H.offset(k.scroll);return G===0?B:H instanceof l.default.Container?B+H.length():B+H.index(X,G)}),R=Math.min(Math.max.apply(Math,g(I)),this.scroll.length()-1),$=Math.min.apply(Math,[R].concat(g(I)));return new E($,R-$)}},{key:"normalizeNative",value:function(T){if(!A(this.root,T.startContainer)||!T.collapsed&&!A(this.root,T.endContainer))return null;var k={start:{node:T.startContainer,offset:T.startOffset},end:{node:T.endContainer,offset:T.endOffset},native:T};return[k.start,k.end].forEach(function(j){for(var I=j.node,R=j.offset;!(I instanceof Text)&&I.childNodes.length>0;)if(I.childNodes.length>R)I=I.childNodes[R],R=0;else if(I.childNodes.length===R)I=I.lastChild,R=I instanceof Text?I.data.length:I.childNodes.length+1;else break;j.node=I,j.offset=R}),k}},{key:"rangeToNative",value:function(T){var k=this,j=T.collapsed?[T.index]:[T.index,T.index+T.length],I=[],R=this.scroll.length();return j.forEach(function($,Z){$=Math.min(R-1,$);var Q=void 0,X=k.scroll.leaf($),G=a(X,2),H=G[0],B=G[1],L=H.position(B,Z!==0),D=a(L,2);Q=D[0],B=D[1],I.push(Q,B)}),I.length<2&&(I=I.concat(I)),I}},{key:"scrollIntoView",value:function(T){var k=this.lastRange;if(k!=null){var j=this.getBounds(k.index,k.length);if(j!=null){var I=this.scroll.length()-1,R=this.scroll.line(Math.min(k.index,I)),$=a(R,1),Z=$[0],Q=Z;if(k.length>0){var X=this.scroll.line(Math.min(k.index+k.length,I)),G=a(X,1);Q=G[0]}if(!(Z==null||Q==null)){var H=T.getBoundingClientRect();j.top<H.top?T.scrollTop-=H.top-j.top:j.bottom>H.bottom&&(T.scrollTop+=j.bottom-H.bottom)}}}}},{key:"setNativeRange",value:function(T,k){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T,I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k,R=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(_.info("setNativeRange",T,k,j,I),!(T!=null&&(this.root.parentNode==null||T.parentNode==null||j.parentNode==null))){var $=document.getSelection();if($!=null)if(T!=null){this.hasFocus()||this.root.focus();var Z=(this.getNativeRange()||{}).native;if(Z==null||R||T!==Z.startContainer||k!==Z.startOffset||j!==Z.endContainer||I!==Z.endOffset){T.tagName=="BR"&&(k=[].indexOf.call(T.parentNode.childNodes,T),T=T.parentNode),j.tagName=="BR"&&(I=[].indexOf.call(j.parentNode.childNodes,j),j=j.parentNode);var Q=document.createRange();Q.setStart(T,k),Q.setEnd(j,I),$.removeAllRanges(),$.addRange(Q)}}else $.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(T){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof k=="string"&&(j=k,k=!1),_.info("setRange",T),T!=null){var I=this.rangeToNative(T);this.setNativeRange.apply(this,g(I).concat([k]))}else this.setNativeRange(null);this.update(j)}},{key:"update",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,k=this.lastRange,j=this.getRange(),I=a(j,2),R=I[0],$=I[1];if(this.lastRange=R,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(k,this.lastRange)){var Z;!this.composing&&$!=null&&$.native.collapsed&&$.start.node!==this.cursor.textNode&&this.cursor.restore();var Q=[y.default.events.SELECTION_CHANGE,(0,h.default)(this.lastRange),(0,h.default)(k),T];if((Z=this.emitter).emit.apply(Z,[y.default.events.EDITOR_CHANGE].concat(Q)),T!==y.default.sources.SILENT){var X;(X=this.emitter).emit.apply(X,Q)}}}}]),P}();function A(P,F){try{F.parentNode}catch{return!1}return F instanceof Text&&(F=F.parentNode),P.contains(F)}n.Range=E,n.default=C},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,w){for(var p=0;p<w.length;p++){var g=w[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,w,p){return w&&y(v.prototype,w),p&&y(v,p),v}}(),o=function y(v,w,p){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,w);if(g===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:y(b,w,p)}else{if("value"in g)return g.value;var _=g.get;return _===void 0?void 0:_.call(p)}},s=i(0),l=u(s);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var c=function(y){f(v,y);function v(){return h(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"insertInto",value:function(p,g){p.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,p,g):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(l.default.Embed);c.blotName="break",c.tagName="BR",n.default=c},function(r,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var y in c)c.hasOwnProperty(y)&&(f[y]=c[y])};return function(f,c){d(f,c);function y(){this.constructor=f}f.prototype=c===null?Object.create(c):(y.prototype=c.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(44),s=i(30),l=i(1),u=function(d){a(f,d);function f(c){var y=d.call(this,c)||this;return y.build(),y}return f.prototype.appendChild=function(c){this.insertBefore(c)},f.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(c){c.attach()})},f.prototype.build=function(){var c=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var v=h(y);c.insertBefore(v,c.children.head||void 0)}catch(w){if(w instanceof l.ParchmentError)return;throw w}})},f.prototype.deleteAt=function(c,y){if(c===0&&y===this.length())return this.remove();this.children.forEachAt(c,y,function(v,w,p){v.deleteAt(w,p)})},f.prototype.descendant=function(c,y){var v=this.children.find(y),w=v[0],p=v[1];return c.blotName==null&&c(w)||c.blotName!=null&&w instanceof c?[w,p]:w instanceof f?w.descendant(c,p):[null,-1]},f.prototype.descendants=function(c,y,v){y===void 0&&(y=0),v===void 0&&(v=Number.MAX_VALUE);var w=[],p=v;return this.children.forEachAt(y,v,function(g,b,_){(c.blotName==null&&c(g)||c.blotName!=null&&g instanceof c)&&w.push(g),g instanceof f&&(w=w.concat(g.descendants(c,b,p))),p-=_}),w},f.prototype.detach=function(){this.children.forEach(function(c){c.detach()}),d.prototype.detach.call(this)},f.prototype.formatAt=function(c,y,v,w){this.children.forEachAt(c,y,function(p,g,b){p.formatAt(g,b,v,w)})},f.prototype.insertAt=function(c,y,v){var w=this.children.find(c),p=w[0],g=w[1];if(p)p.insertAt(g,y,v);else{var b=v==null?l.create("text",y):l.create(y,v);this.appendChild(b)}},f.prototype.insertBefore=function(c,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return c instanceof v}))throw new l.ParchmentError("Cannot insert "+c.statics.blotName+" into "+this.statics.blotName);c.insertInto(this,y)},f.prototype.length=function(){return this.children.reduce(function(c,y){return c+y.length()},0)},f.prototype.moveChildren=function(c,y){this.children.forEach(function(v){c.insertBefore(v,y)})},f.prototype.optimize=function(c){if(d.prototype.optimize.call(this,c),this.children.length===0)if(this.statics.defaultChild!=null){var y=l.create(this.statics.defaultChild);this.appendChild(y),y.optimize(c)}else this.remove()},f.prototype.path=function(c,y){y===void 0&&(y=!1);var v=this.children.find(c,y),w=v[0],p=v[1],g=[[this,c]];return w instanceof f?g.concat(w.path(p,y)):(w!=null&&g.push([w,p]),g)},f.prototype.removeChild=function(c){this.children.remove(c)},f.prototype.replace=function(c){c instanceof f&&c.moveChildren(this),d.prototype.replace.call(this,c)},f.prototype.split=function(c,y){if(y===void 0&&(y=!1),!y){if(c===0)return this;if(c===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(c,this.length(),function(w,p,g){w=w.split(p,y),v.appendChild(w)}),v},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(c,y){var v=this,w=[],p=[];c.forEach(function(g){g.target===v.domNode&&g.type==="childList"&&(w.push.apply(w,g.addedNodes),p.push.apply(p,g.removedNodes))}),p.forEach(function(g){if(!(g.parentNode!=null&&g.tagName!=="IFRAME"&&document.body.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var b=l.find(g);b!=null&&(b.domNode.parentNode==null||b.domNode.parentNode===v.domNode)&&b.detach()}}),w.filter(function(g){return g.parentNode==v.domNode}).sort(function(g,b){return g===b?0:g.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(g){var b=null;g.nextSibling!=null&&(b=l.find(g.nextSibling));var _=h(g);(_.next!=b||_.next==null)&&(_.parent!=null&&_.parent.removeChild(v),v.insertBefore(_,b||void 0))})},f}(s.default);function h(d){var f=l.find(d);if(f==null)try{f=l.create(d)}catch{f=l.create(l.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(y){f.domNode.appendChild(y)}),d.parentNode&&d.parentNode.replaceChild(f.domNode,d),f.attach()}return f}n.default=u},function(r,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var y in c)c.hasOwnProperty(y)&&(f[y]=c[y])};return function(f,c){d(f,c);function y(){this.constructor=f}f.prototype=c===null?Object.create(c):(y.prototype=c.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12),s=i(31),l=i(17),u=i(1),h=function(d){a(f,d);function f(c){var y=d.call(this,c)||this;return y.attributes=new s.default(y.domNode),y}return f.formats=function(c){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return c.tagName.toLowerCase()},f.prototype.format=function(c,y){var v=u.query(c);v instanceof o.default?this.attributes.attribute(v,y):y&&v!=null&&(c!==this.statics.blotName||this.formats()[c]!==y)&&this.replaceWith(c,y)},f.prototype.formats=function(){var c=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(c[this.statics.blotName]=y),c},f.prototype.replaceWith=function(c,y){var v=d.prototype.replaceWith.call(this,c,y);return this.attributes.copy(v),v},f.prototype.update=function(c,y){var v=this;d.prototype.update.call(this,c,y),c.some(function(w){return w.target===v.domNode&&w.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(c,y){var v=d.prototype.wrap.call(this,c,y);return v instanceof f&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},f}(l.default);n.default=h},function(r,n,i){var a=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)d.hasOwnProperty(f)&&(h[f]=d[f])};return function(h,d){u(h,d);function f(){this.constructor=h}h.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(30),s=i(1),l=function(u){a(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.value=function(d){return!0},h.prototype.index=function(d,f){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},h.prototype.position=function(d,f){var c=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(c+=1),[this.parent.domNode,c]},h.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},h.scope=s.Scope.INLINE_BLOT,h}(o.default);n.default=l},function(r,n,i){var a=i(11),o=i(3),s={attributes:{compose:function(u,h,d){typeof u!="object"&&(u={}),typeof h!="object"&&(h={});var f=o(!0,{},h);d||(f=Object.keys(f).reduce(function(y,v){return f[v]!=null&&(y[v]=f[v]),y},{}));for(var c in u)u[c]!==void 0&&h[c]===void 0&&(f[c]=u[c]);return Object.keys(f).length>0?f:void 0},diff:function(u,h){typeof u!="object"&&(u={}),typeof h!="object"&&(h={});var d=Object.keys(u).concat(Object.keys(h)).reduce(function(f,c){return a(u[c],h[c])||(f[c]=h[c]===void 0?null:h[c]),f},{});return Object.keys(d).length>0?d:void 0},transform:function(u,h,d){if(typeof u!="object")return h;if(typeof h=="object"){if(!d)return h;var f=Object.keys(h).reduce(function(c,y){return u[y]===void 0&&(c[y]=h[y]),c},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(u){return new l(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function l(u){this.ops=u,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(u){u||(u=1/0);var h=this.ops[this.index];if(h){var d=this.offset,f=s.length(h);if(u>=f-d?(u=f-d,this.index+=1,this.offset=0):this.offset+=u,typeof h.delete=="number")return{delete:u};var c={};return h.attributes&&(c.attributes=h.attributes),typeof h.retain=="number"?c.retain=u:typeof h.insert=="string"?c.insert=h.insert.substr(d,u):c.insert=h.insert,c}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,h=this.index,d=this.next(),f=this.ops.slice(this.index);return this.offset=u,this.index=h,[d].concat(f)}else return[]},r.exports=s},function(r,n){var i=function(){function a(v,w){return w!=null&&v instanceof w}var o;try{o=Map}catch{o=function(){}}var s;try{s=Set}catch{s=function(){}}var l;try{l=Promise}catch{l=function(){}}function u(v,w,p,g,b){typeof w=="object"&&(p=w.depth,g=w.prototype,b=w.includeNonEnumerable,w=w.circular);var _=[],E=[],C=typeof Buffer<"u";typeof w>"u"&&(w=!0),typeof p>"u"&&(p=1/0);function A(P,F){if(P===null)return null;if(F===0)return P;var T,k;if(typeof P!="object")return P;if(a(P,o))T=new o;else if(a(P,s))T=new s;else if(a(P,l))T=new l(function(H,B){P.then(function(L){H(A(L,F-1))},function(L){B(A(L,F-1))})});else if(u.__isArray(P))T=[];else if(u.__isRegExp(P))T=new RegExp(P.source,y(P)),P.lastIndex&&(T.lastIndex=P.lastIndex);else if(u.__isDate(P))T=new Date(P.getTime());else{if(C&&Buffer.isBuffer(P))return Buffer.allocUnsafe?T=Buffer.allocUnsafe(P.length):T=new Buffer(P.length),P.copy(T),T;a(P,Error)?T=Object.create(P):typeof g>"u"?(k=Object.getPrototypeOf(P),T=Object.create(k)):(T=Object.create(g),k=g)}if(w){var j=_.indexOf(P);if(j!=-1)return E[j];_.push(P),E.push(T)}a(P,o)&&P.forEach(function(H,B){var L=A(B,F-1),D=A(H,F-1);T.set(L,D)}),a(P,s)&&P.forEach(function(H){var B=A(H,F-1);T.add(B)});for(var I in P){var R;k&&(R=Object.getOwnPropertyDescriptor(k,I)),!(R&&R.set==null)&&(T[I]=A(P[I],F-1))}if(Object.getOwnPropertySymbols)for(var $=Object.getOwnPropertySymbols(P),I=0;I<$.length;I++){var Z=$[I],Q=Object.getOwnPropertyDescriptor(P,Z);Q&&!Q.enumerable&&!b||(T[Z]=A(P[Z],F-1),Q.enumerable||Object.defineProperty(T,Z,{enumerable:!1}))}if(b)for(var X=Object.getOwnPropertyNames(P),I=0;I<X.length;I++){var G=X[I],Q=Object.getOwnPropertyDescriptor(P,G);Q&&Q.enumerable||(T[G]=A(P[G],F-1),Object.defineProperty(T,G,{enumerable:!1}))}return T}return A(v,p)}u.clonePrototype=function(w){if(w===null)return null;var p=function(){};return p.prototype=w,new p};function h(v){return Object.prototype.toString.call(v)}u.__objToStr=h;function d(v){return typeof v=="object"&&h(v)==="[object Date]"}u.__isDate=d;function f(v){return typeof v=="object"&&h(v)==="[object Array]"}u.__isArray=f;function c(v){return typeof v=="object"&&h(v)==="[object RegExp]"}u.__isRegExp=c;function y(v){var w="";return v.global&&(w+="g"),v.ignoreCase&&(w+="i"),v.multiline&&(w+="m"),w}return u.__getRegExpFlags=y,u}();typeof r=="object"&&r.exports&&(r.exports=i)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(k,j){var I=[],R=!0,$=!1,Z=void 0;try{for(var Q=k[Symbol.iterator](),X;!(R=(X=Q.next()).done)&&(I.push(X.value),!(j&&I.length===j));R=!0);}catch(G){$=!0,Z=G}finally{try{!R&&Q.return&&Q.return()}finally{if($)throw Z}}return I}return function(k,j){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return T(k,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function T(k,j){for(var I=0;I<j.length;I++){var R=j[I];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(k,R.key,R)}}return function(k,j,I){return j&&T(k.prototype,j),I&&T(k,I),k}}(),s=function T(k,j,I){k===null&&(k=Function.prototype);var R=Object.getOwnPropertyDescriptor(k,j);if(R===void 0){var $=Object.getPrototypeOf(k);return $===null?void 0:T($,j,I)}else{if("value"in R)return R.value;var Z=R.get;return Z===void 0?void 0:Z.call(I)}},l=i(0),u=_(l),h=i(8),d=_(h),f=i(4),c=_(f),y=i(16),v=_(y),w=i(13),p=_(w),g=i(25),b=_(g);function _(T){return T&&T.__esModule?T:{default:T}}function E(T,k){if(!(T instanceof k))throw new TypeError("Cannot call a class as a function")}function C(T,k){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:T}function A(T,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);T.prototype=Object.create(k&&k.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(T,k):T.__proto__=k)}function P(T){return T instanceof c.default||T instanceof f.BlockEmbed}var F=function(T){A(k,T);function k(j,I){E(this,k);var R=C(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,j));return R.emitter=I.emitter,Array.isArray(I.whitelist)&&(R.whitelist=I.whitelist.reduce(function($,Z){return $[Z]=!0,$},{})),R.domNode.addEventListener("DOMNodeInserted",function(){}),R.optimize(),R.enable(),R}return o(k,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(I,R){var $=this.line(I),Z=a($,2),Q=Z[0],X=Z[1],G=this.line(I+R),H=a(G,1),B=H[0];if(s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"deleteAt",this).call(this,I,R),B!=null&&Q!==B&&X>0){if(Q instanceof f.BlockEmbed||B instanceof f.BlockEmbed){this.optimize();return}if(Q instanceof p.default){var L=Q.newlineIndex(Q.length(),!0);if(L>-1&&(Q=Q.split(L+1),Q===B)){this.optimize();return}}else if(B instanceof p.default){var D=B.newlineIndex(0);D>-1&&B.split(D+1)}var z=B.children.head instanceof v.default?null:B.children.head;Q.moveChildren(B,z),Q.remove()}this.optimize()}},{key:"enable",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",I)}},{key:"formatAt",value:function(I,R,$,Z){this.whitelist!=null&&!this.whitelist[$]||(s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,I,R,$,Z),this.optimize())}},{key:"insertAt",value:function(I,R,$){if(!($!=null&&this.whitelist!=null&&!this.whitelist[R])){if(I>=this.length())if($==null||u.default.query(R,u.default.Scope.BLOCK)==null){var Z=u.default.create(this.statics.defaultChild);this.appendChild(Z),$==null&&R.endsWith(`
`)&&(R=R.slice(0,-1)),Z.insertAt(0,R,$)}else{var Q=u.default.create(R,$);this.appendChild(Q)}else s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,I,R,$);this.optimize()}}},{key:"insertBefore",value:function(I,R){if(I.statics.scope===u.default.Scope.INLINE_BLOT){var $=u.default.create(this.statics.defaultChild);$.appendChild(I),I=$}s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,I,R)}},{key:"leaf",value:function(I){return this.path(I).pop()||[null,-1]}},{key:"line",value:function(I){return I===this.length()?this.line(I-1):this.descendant(P,I)}},{key:"lines",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,$=function Z(Q,X,G){var H=[],B=G;return Q.children.forEachAt(X,G,function(L,D,z){P(L)?H.push(L):L instanceof u.default.Container&&(H=H.concat(Z(L,D,B))),B-=z}),H};return $(this,I,R)}},{key:"optimize",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,I,R),I.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,I,R))}},{key:"path",value:function(I){return s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"path",this).call(this,I).slice(1)}},{key:"update",value:function(I){if(this.batch!==!0){var R=d.default.sources.USER;typeof I=="string"&&(R=I),Array.isArray(I)||(I=this.observer.takeRecords()),I.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,R,I),s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"update",this).call(this,I.concat([])),I.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,R,I)}}}]),k}(u.default.Scroll);F.blotName="scroll",F.className="ql-editor",F.tagName="DIV",F.defaultChild="block",F.allowedChildren=[c.default,f.BlockEmbed,b.default],n.default=F},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},o=function(){function U(K,ne){var ie=[],he=!0,ye=!1,Oe=void 0;try{for(var Le=K[Symbol.iterator](),He;!(he=(He=Le.next()).done)&&(ie.push(He.value),!(ne&&ie.length===ne));he=!0);}catch(_e){ye=!0,Oe=_e}finally{try{!he&&Le.return&&Le.return()}finally{if(ye)throw Oe}}return ie}return function(K,ne){if(Array.isArray(K))return K;if(Symbol.iterator in Object(K))return U(K,ne);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function U(K,ne){for(var ie=0;ie<ne.length;ie++){var he=ne[ie];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(K,he.key,he)}}return function(K,ne,ie){return ne&&U(K.prototype,ne),ie&&U(K,ie),K}}(),l=i(21),u=T(l),h=i(11),d=T(h),f=i(3),c=T(f),y=i(2),v=T(y),w=i(20),p=T(w),g=i(0),b=T(g),_=i(5),E=T(_),C=i(10),A=T(C),P=i(9),F=T(P);function T(U){return U&&U.__esModule?U:{default:U}}function k(U,K,ne){return K in U?Object.defineProperty(U,K,{value:ne,enumerable:!0,configurable:!0,writable:!0}):U[K]=ne,U}function j(U,K){if(!(U instanceof K))throw new TypeError("Cannot call a class as a function")}function I(U,K){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:U}function R(U,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);U.prototype=Object.create(K&&K.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(U,K):U.__proto__=K)}var $=(0,A.default)("quill:keyboard"),Z=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Q=function(U){R(K,U),s(K,null,[{key:"match",value:function(ie,he){return he=q(he),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ye){return!!he[ye]!==ie[ye]&&he[ye]!==null})?!1:he.key===(ie.which||ie.keyCode)}}]);function K(ne,ie){j(this,K);var he=I(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,ne,ie));return he.bindings={},Object.keys(he.options.bindings).forEach(function(ye){ye==="list autofill"&&ne.scroll.whitelist!=null&&!ne.scroll.whitelist.list||he.options.bindings[ye]&&he.addBinding(he.options.bindings[ye])}),he.addBinding({key:K.keys.ENTER,shiftKey:null},L),he.addBinding({key:K.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(he.addBinding({key:K.keys.BACKSPACE},{collapsed:!0},G),he.addBinding({key:K.keys.DELETE},{collapsed:!0},H)):(he.addBinding({key:K.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},G),he.addBinding({key:K.keys.DELETE},{collapsed:!0,suffix:/^.?$/},H)),he.addBinding({key:K.keys.BACKSPACE},{collapsed:!1},B),he.addBinding({key:K.keys.DELETE},{collapsed:!1},B),he.addBinding({key:K.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},G),he.listen(),he}return s(K,[{key:"addBinding",value:function(ie){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Oe=q(ie);if(Oe==null||Oe.key==null)return $.warn("Attempted to add invalid keyboard binding",Oe);typeof he=="function"&&(he={handler:he}),typeof ye=="function"&&(ye={handler:ye}),Oe=(0,c.default)(Oe,he,ye),this.bindings[Oe.key]=this.bindings[Oe.key]||[],this.bindings[Oe.key].push(Oe)}},{key:"listen",value:function(){var ie=this;this.quill.root.addEventListener("keydown",function(he){if(!he.defaultPrevented){var ye=he.which||he.keyCode,Oe=(ie.bindings[ye]||[]).filter(function(Ze){return K.match(he,Ze)});if(Oe.length!==0){var Le=ie.quill.getSelection();if(!(Le==null||!ie.quill.hasFocus())){var He=ie.quill.getLine(Le.index),_e=o(He,2),se=_e[0],rt=_e[1],ve=ie.quill.getLeaf(Le.index),de=o(ve,2),ge=de[0],Ne=de[1],ae=Le.length===0?[ge,Ne]:ie.quill.getLeaf(Le.index+Le.length),Se=o(ae,2),Ce=Se[0],Pe=Se[1],Ve=ge instanceof b.default.Text?ge.value().slice(0,Ne):"",Ye=Ce instanceof b.default.Text?Ce.value().slice(Pe):"",nt={collapsed:Le.length===0,empty:Le.length===0&&se.length()<=1,format:ie.quill.getFormat(Le),offset:rt,prefix:Ve,suffix:Ye},pt=Oe.some(function(Ze){if(Ze.collapsed!=null&&Ze.collapsed!==nt.collapsed||Ze.empty!=null&&Ze.empty!==nt.empty||Ze.offset!=null&&Ze.offset!==nt.offset)return!1;if(Array.isArray(Ze.format)){if(Ze.format.every(function(qe){return nt.format[qe]==null}))return!1}else if(a(Ze.format)==="object"&&!Object.keys(Ze.format).every(function(qe){return Ze.format[qe]===!0?nt.format[qe]!=null:Ze.format[qe]===!1?nt.format[qe]==null:(0,d.default)(Ze.format[qe],nt.format[qe])}))return!1;return Ze.prefix!=null&&!Ze.prefix.test(nt.prefix)||Ze.suffix!=null&&!Ze.suffix.test(nt.suffix)?!1:Ze.handler.call(ie,Le,nt)!==!0});pt&&he.preventDefault()}}}})}}]),K}(F.default);Q.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Q.DEFAULTS={bindings:{bold:z("bold"),italic:z("italic"),underline:z("underline"),indent:{key:Q.keys.TAB,format:["blockquote","indent","list"],handler:function(K,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","+1",E.default.sources.USER)}},outdent:{key:Q.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(K,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","-1",E.default.sources.USER)}},"outdent backspace":{key:Q.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(K,ne){ne.format.indent!=null?this.quill.format("indent","-1",E.default.sources.USER):ne.format.list!=null&&this.quill.format("list",!1,E.default.sources.USER)}},"indent code-block":D(!0),"outdent code-block":D(!1),"remove tab":{key:Q.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(K){this.quill.deleteText(K.index-1,1,E.default.sources.USER)}},tab:{key:Q.keys.TAB,handler:function(K){this.quill.history.cutoff();var ne=new v.default().retain(K.index).delete(K.length).insert("	");this.quill.updateContents(ne,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(K.index+1,E.default.sources.SILENT)}},"list empty enter":{key:Q.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(K,ne){this.quill.format("list",!1,E.default.sources.USER),ne.format.indent&&this.quill.format("indent",!1,E.default.sources.USER)}},"checklist enter":{key:Q.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(K){var ne=this.quill.getLine(K.index),ie=o(ne,2),he=ie[0],ye=ie[1],Oe=(0,c.default)({},he.formats(),{list:"checked"}),Le=new v.default().retain(K.index).insert(`
`,Oe).retain(he.length()-ye-1).retain(1,{list:"unchecked"});this.quill.updateContents(Le,E.default.sources.USER),this.quill.setSelection(K.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Q.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(K,ne){var ie=this.quill.getLine(K.index),he=o(ie,2),ye=he[0],Oe=he[1],Le=new v.default().retain(K.index).insert(`
`,ne.format).retain(ye.length()-Oe-1).retain(1,{header:null});this.quill.updateContents(Le,E.default.sources.USER),this.quill.setSelection(K.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(K,ne){var ie=ne.prefix.length,he=this.quill.getLine(K.index),ye=o(he,2),Oe=ye[0],Le=ye[1];if(Le>ie)return!0;var He=void 0;switch(ne.prefix.trim()){case"[]":case"[ ]":He="unchecked";break;case"[x]":He="checked";break;case"-":case"*":He="bullet";break;default:He="ordered"}this.quill.insertText(K.index," ",E.default.sources.USER),this.quill.history.cutoff();var _e=new v.default().retain(K.index-Le).delete(ie+1).retain(Oe.length()-2-Le).retain(1,{list:He});this.quill.updateContents(_e,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(K.index-ie,E.default.sources.SILENT)}},"code exit":{key:Q.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(K){var ne=this.quill.getLine(K.index),ie=o(ne,2),he=ie[0],ye=ie[1],Oe=new v.default().retain(K.index+he.length()-ye-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Oe,E.default.sources.USER)}},"embed left":X(Q.keys.LEFT,!1),"embed left shift":X(Q.keys.LEFT,!0),"embed right":X(Q.keys.RIGHT,!1),"embed right shift":X(Q.keys.RIGHT,!0)}};function X(U,K){var ne,ie=U===Q.keys.LEFT?"prefix":"suffix";return ne={key:U,shiftKey:K,altKey:null},k(ne,ie,/^$/),k(ne,"handler",function(ye){var Oe=ye.index;U===Q.keys.RIGHT&&(Oe+=ye.length+1);var Le=this.quill.getLeaf(Oe),He=o(Le,1),_e=He[0];return _e instanceof b.default.Embed?(U===Q.keys.LEFT?K?this.quill.setSelection(ye.index-1,ye.length+1,E.default.sources.USER):this.quill.setSelection(ye.index-1,E.default.sources.USER):K?this.quill.setSelection(ye.index,ye.length+1,E.default.sources.USER):this.quill.setSelection(ye.index+ye.length+1,E.default.sources.USER),!1):!0}),ne}function G(U,K){if(!(U.index===0||this.quill.getLength()<=1)){var ne=this.quill.getLine(U.index),ie=o(ne,1),he=ie[0],ye={};if(K.offset===0){var Oe=this.quill.getLine(U.index-1),Le=o(Oe,1),He=Le[0];if(He!=null&&He.length()>1){var _e=he.formats(),se=this.quill.getFormat(U.index-1,1);ye=p.default.attributes.diff(_e,se)||{}}}var rt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(K.prefix)?2:1;this.quill.deleteText(U.index-rt,rt,E.default.sources.USER),Object.keys(ye).length>0&&this.quill.formatLine(U.index-rt,rt,ye,E.default.sources.USER),this.quill.focus()}}function H(U,K){var ne=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(K.suffix)?2:1;if(!(U.index>=this.quill.getLength()-ne)){var ie={},he=0,ye=this.quill.getLine(U.index),Oe=o(ye,1),Le=Oe[0];if(K.offset>=Le.length()-1){var He=this.quill.getLine(U.index+1),_e=o(He,1),se=_e[0];if(se){var rt=Le.formats(),ve=this.quill.getFormat(U.index,1);ie=p.default.attributes.diff(rt,ve)||{},he=se.length()}}this.quill.deleteText(U.index,ne,E.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(U.index+he-1,ne,ie,E.default.sources.USER)}}function B(U){var K=this.quill.getLines(U),ne={};if(K.length>1){var ie=K[0].formats(),he=K[K.length-1].formats();ne=p.default.attributes.diff(he,ie)||{}}this.quill.deleteText(U,E.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(U.index,1,ne,E.default.sources.USER),this.quill.setSelection(U.index,E.default.sources.SILENT),this.quill.focus()}function L(U,K){var ne=this;U.length>0&&this.quill.scroll.deleteAt(U.index,U.length);var ie=Object.keys(K.format).reduce(function(he,ye){return b.default.query(ye,b.default.Scope.BLOCK)&&!Array.isArray(K.format[ye])&&(he[ye]=K.format[ye]),he},{});this.quill.insertText(U.index,`
`,ie,E.default.sources.USER),this.quill.setSelection(U.index+1,E.default.sources.SILENT),this.quill.focus(),Object.keys(K.format).forEach(function(he){ie[he]==null&&(Array.isArray(K.format[he])||he!=="link"&&ne.quill.format(he,K.format[he],E.default.sources.USER))})}function D(U){return{key:Q.keys.TAB,shiftKey:!U,format:{"code-block":!0},handler:function(ne){var ie=b.default.query("code-block"),he=ne.index,ye=ne.length,Oe=this.quill.scroll.descendant(ie,he),Le=o(Oe,2),He=Le[0],_e=Le[1];if(He!=null){var se=this.quill.getIndex(He),rt=He.newlineIndex(_e,!0)+1,ve=He.newlineIndex(se+_e+ye),de=He.domNode.textContent.slice(rt,ve).split(`
`);_e=0,de.forEach(function(ge,Ne){U?(He.insertAt(rt+_e,ie.TAB),_e+=ie.TAB.length,Ne===0?he+=ie.TAB.length:ye+=ie.TAB.length):ge.startsWith(ie.TAB)&&(He.deleteAt(rt+_e,ie.TAB.length),_e-=ie.TAB.length,Ne===0?he-=ie.TAB.length:ye-=ie.TAB.length),_e+=ge.length+1}),this.quill.update(E.default.sources.USER),this.quill.setSelection(he,ye,E.default.sources.SILENT)}}}}function z(U){return{key:U[0].toUpperCase(),shortKey:!0,handler:function(ne,ie){this.quill.format(U,!ie.format[U],E.default.sources.USER)}}}function q(U){if(typeof U=="string"||typeof U=="number")return q({key:U});if((typeof U>"u"?"undefined":a(U))==="object"&&(U=(0,u.default)(U,!1)),typeof U.key=="string")if(Q.keys[U.key.toUpperCase()]!=null)U.key=Q.keys[U.key.toUpperCase()];else if(U.key.length===1)U.key=U.key.toUpperCase().charCodeAt(0);else return null;return U.shortKey&&(U[Z]=U.shortKey,delete U.shortKey),U}n.default=Q,n.SHORTKEY=Z},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function p(g,b){var _=[],E=!0,C=!1,A=void 0;try{for(var P=g[Symbol.iterator](),F;!(E=(F=P.next()).done)&&(_.push(F.value),!(b&&_.length===b));E=!0);}catch(T){C=!0,A=T}finally{try{!E&&P.return&&P.return()}finally{if(C)throw A}}return _}return function(g,b){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return p(g,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function p(g,b,_){g===null&&(g=Function.prototype);var E=Object.getOwnPropertyDescriptor(g,b);if(E===void 0){var C=Object.getPrototypeOf(g);return C===null?void 0:p(C,b,_)}else{if("value"in E)return E.value;var A=E.get;return A===void 0?void 0:A.call(_)}},s=function(){function p(g,b){for(var _=0;_<b.length;_++){var E=b[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,b,_){return b&&p(g.prototype,b),_&&p(g,_),g}}(),l=i(0),u=f(l),h=i(7),d=f(h);function f(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function y(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function v(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var w=function(p){v(g,p),s(g,null,[{key:"value",value:function(){}}]);function g(b,_){c(this,g);var E=y(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,b));return E.selection=_,E.textNode=document.createTextNode(g.CONTENTS),E.domNode.appendChild(E.textNode),E._length=0,E}return s(g,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(_,E){if(this._length!==0)return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,_,E);for(var C=this,A=0;C!=null&&C.statics.scope!==u.default.Scope.BLOCK_BLOT;)A+=C.offset(C.parent),C=C.parent;C!=null&&(this._length=g.CONTENTS.length,C.optimize(),C.formatAt(A,g.CONTENTS.length,_,E),this._length=0)}},{key:"index",value:function(_,E){return _===this.textNode?0:o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"index",this).call(this,_,E)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var _=this.textNode,E=this.selection.getNativeRange(),C=void 0,A=void 0,P=void 0;if(E!=null&&E.start.node===_&&E.end.node===_){var F=[_,E.start.offset,E.end.offset];C=F[0],A=F[1],P=F[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==g.CONTENTS){var T=this.textNode.data.split(g.CONTENTS).join("");this.next instanceof d.default?(C=this.next.domNode,this.next.insertAt(0,T),this.textNode.data=g.CONTENTS):(this.textNode.data=T,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(g.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),A!=null){var k=[A,P].map(function(I){return Math.max(0,Math.min(C.data.length,I-1))}),j=a(k,2);return A=j[0],P=j[1],{startNode:C,startOffset:A,endNode:C,endOffset:P}}}}},{key:"update",value:function(_,E){var C=this;if(_.some(function(P){return P.type==="characterData"&&P.target===C.textNode})){var A=this.restore();A&&(E.range=A)}}},{key:"value",value:function(){return""}}]),g}(u.default.Embed);w.blotName="cursor",w.className="ql-cursor",w.tagName="span",w.CONTENTS="\uFEFF",n.default=w},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),o=u(a),s=i(4),l=u(s);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var c=function(y){f(v,y);function v(){return h(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(o.default.Container);c.allowedChildren=[l.default,s.BlockEmbed,c],n.default=c},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var a=function(){function w(p,g){for(var b=0;b<g.length;b++){var _=g[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,_.key,_)}}return function(p,g,b){return g&&w(p.prototype,g),b&&w(p,b),p}}(),o=function w(p,g,b){p===null&&(p=Function.prototype);var _=Object.getOwnPropertyDescriptor(p,g);if(_===void 0){var E=Object.getPrototypeOf(p);return E===null?void 0:w(E,g,b)}else{if("value"in _)return _.value;var C=_.get;return C===void 0?void 0:C.call(b)}},s=i(0),l=u(s);function u(w){return w&&w.__esModule?w:{default:w}}function h(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}function d(w,p){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:w}function f(w,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);w.prototype=Object.create(p&&p.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(w,p):w.__proto__=p)}var c=function(w){f(p,w);function p(){return h(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return a(p,[{key:"value",value:function(b){var _=o(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"value",this).call(this,b);return _.startsWith("rgb(")?(_=_.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+_.split(",").map(function(E){return("00"+parseInt(E).toString(16)).slice(-2)}).join("")):_}}]),p}(l.default.Attributor.Style),y=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),v=new c("color","color",{scope:l.default.Scope.INLINE});n.ColorAttributor=c,n.ColorClass=y,n.ColorStyle=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var a=function(){function v(w,p){for(var g=0;g<p.length;g++){var b=p[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(w,b.key,b)}}return function(w,p,g){return p&&v(w.prototype,p),g&&v(w,g),w}}(),o=function v(w,p,g){w===null&&(w=Function.prototype);var b=Object.getOwnPropertyDescriptor(w,p);if(b===void 0){var _=Object.getPrototypeOf(w);return _===null?void 0:v(_,p,g)}else{if("value"in b)return b.value;var E=b.get;return E===void 0?void 0:E.call(g)}},s=i(6),l=u(s);function u(v){return v&&v.__esModule?v:{default:v}}function h(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function d(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function f(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var c=function(v){f(w,v);function w(){return h(this,w),d(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"format",value:function(g,b){if(g!==this.statics.blotName||!b)return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,g,b);b=this.constructor.sanitize(b),this.domNode.setAttribute("href",b)}}],[{key:"create",value:function(g){var b=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,g);return g=this.sanitize(g),b.setAttribute("href",g),b.setAttribute("rel","noopener noreferrer"),b.setAttribute("target","_blank"),b}},{key:"formats",value:function(g){return g.getAttribute("href")}},{key:"sanitize",value:function(g){return y(g,this.PROTOCOL_WHITELIST)?g:this.SANITIZED_URL}}]),w}(l.default);c.blotName="link",c.tagName="A",c.SANITIZED_URL="about:blank",c.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(v,w){var p=document.createElement("a");p.href=v;var g=p.href.slice(0,p.href.indexOf(":"));return w.indexOf(g)>-1}n.default=c,n.sanitize=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},o=function(){function w(p,g){for(var b=0;b<g.length;b++){var _=g[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,_.key,_)}}return function(p,g,b){return g&&w(p.prototype,g),b&&w(p,b),p}}(),s=i(23),l=d(s),u=i(107),h=d(u);function d(w){return w&&w.__esModule?w:{default:w}}function f(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}var c=0;function y(w,p){w.setAttribute(p,w.getAttribute(p)!=="true")}var v=function(){function w(p){var g=this;f(this,w),this.select=p,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){g.togglePicker()}),this.label.addEventListener("keydown",function(b){switch(b.keyCode){case l.default.keys.ENTER:g.togglePicker();break;case l.default.keys.ESCAPE:g.escape(),b.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(w,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(g){var b=this,_=document.createElement("span");return _.tabIndex="0",_.setAttribute("role","button"),_.classList.add("ql-picker-item"),g.hasAttribute("value")&&_.setAttribute("data-value",g.getAttribute("value")),g.textContent&&_.setAttribute("data-label",g.textContent),_.addEventListener("click",function(){b.selectItem(_,!0)}),_.addEventListener("keydown",function(E){switch(E.keyCode){case l.default.keys.ENTER:b.selectItem(_,!0),E.preventDefault();break;case l.default.keys.ESCAPE:b.escape(),E.preventDefault();break}}),_}},{key:"buildLabel",value:function(){var g=document.createElement("span");return g.classList.add("ql-picker-label"),g.innerHTML=h.default,g.tabIndex="0",g.setAttribute("role","button"),g.setAttribute("aria-expanded","false"),this.container.appendChild(g),g}},{key:"buildOptions",value:function(){var g=this,b=document.createElement("span");b.classList.add("ql-picker-options"),b.setAttribute("aria-hidden","true"),b.tabIndex="-1",b.id="ql-picker-options-"+c,c+=1,this.label.setAttribute("aria-controls",b.id),this.options=b,[].slice.call(this.select.options).forEach(function(_){var E=g.buildItem(_);b.appendChild(E),_.selected===!0&&g.selectItem(E)}),this.container.appendChild(b)}},{key:"buildPicker",value:function(){var g=this;[].slice.call(this.select.attributes).forEach(function(b){g.container.setAttribute(b.name,b.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var g=this;this.close(),setTimeout(function(){return g.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=this.container.querySelector(".ql-selected");if(g!==_&&(_!=null&&_.classList.remove("ql-selected"),g!=null&&(g.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(g.parentNode.children,g),g.hasAttribute("data-value")?this.label.setAttribute("data-value",g.getAttribute("data-value")):this.label.removeAttribute("data-value"),g.hasAttribute("data-label")?this.label.setAttribute("data-label",g.getAttribute("data-label")):this.label.removeAttribute("data-label"),b))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var E=document.createEvent("Event");E.initEvent("change",!0,!0),this.select.dispatchEvent(E)}this.close()}}},{key:"update",value:function(){var g=void 0;if(this.select.selectedIndex>-1){var b=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];g=this.select.options[this.select.selectedIndex],this.selectItem(b)}else this.selectItem(null);var _=g!=null&&g!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",_)}}]),w}();n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),o=$(a),s=i(5),l=$(s),u=i(4),h=$(u),d=i(16),f=$(d),c=i(25),y=$(c),v=i(24),w=$(v),p=i(35),g=$(p),b=i(6),_=$(b),E=i(22),C=$(E),A=i(7),P=$(A),F=i(55),T=$(F),k=i(42),j=$(k),I=i(23),R=$(I);function $(Z){return Z&&Z.__esModule?Z:{default:Z}}l.default.register({"blots/block":h.default,"blots/block/embed":u.BlockEmbed,"blots/break":f.default,"blots/container":y.default,"blots/cursor":w.default,"blots/embed":g.default,"blots/inline":_.default,"blots/scroll":C.default,"blots/text":P.default,"modules/clipboard":T.default,"modules/history":j.default,"modules/keyboard":R.default}),o.default.register(h.default,f.default,w.default,_.default,C.default,P.default),n.default=l.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(1),o=function(){function s(l){this.domNode=l,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(s.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),s.create=function(l){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?u=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?u=document.createElement(l):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},s.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},s.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return a.create(l)},s.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},s.prototype.deleteAt=function(l,u){var h=this.isolate(l,u);h.remove()},s.prototype.formatAt=function(l,u,h,d){var f=this.isolate(l,u);if(a.query(h,a.Scope.BLOT)!=null&&d)f.wrap(h,d);else if(a.query(h,a.Scope.ATTRIBUTE)!=null){var c=a.create(this.statics.scope);f.wrap(c),c.format(h,d)}},s.prototype.insertAt=function(l,u,h){var d=h==null?a.create("text",u):a.create(u,h),f=this.split(l);this.parent.insertBefore(d,f)},s.prototype.insertInto=function(l,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var h=null;l.children.insertBefore(this,u),u!=null&&(h=u.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=h)&&l.domNode.insertBefore(this.domNode,h),this.parent=l,this.attach()},s.prototype.isolate=function(l,u){var h=this.split(l);return h.split(u),h},s.prototype.length=function(){return 1},s.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},s.prototype.optimize=function(l){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},s.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},s.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},s.prototype.replaceWith=function(l,u){var h=typeof l=="string"?a.create(l,u):l;return h.replace(this),h},s.prototype.split=function(l,u){return l===0?this:this.next},s.prototype.update=function(l,u){},s.prototype.wrap=function(l,u){var h=typeof l=="string"?a.create(l,u):l;return this.parent!=null&&this.parent.insertBefore(h,this.next),h.appendChild(this),h},s.blotName="abstract",s}();n.default=o},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(12),o=i(32),s=i(33),l=i(1),u=function(){function h(d){this.attributes={},this.domNode=d,this.build()}return h.prototype.attribute=function(d,f){f?d.add(this.domNode,f)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},h.prototype.build=function(){var d=this;this.attributes={};var f=a.default.keys(this.domNode),c=o.default.keys(this.domNode),y=s.default.keys(this.domNode);f.concat(c).concat(y).forEach(function(v){var w=l.query(v,l.Scope.ATTRIBUTE);w instanceof a.default&&(d.attributes[w.attrName]=w)})},h.prototype.copy=function(d){var f=this;Object.keys(this.attributes).forEach(function(c){var y=f.attributes[c].value(f.domNode);d.format(c,y)})},h.prototype.move=function(d){var f=this;this.copy(d),Object.keys(this.attributes).forEach(function(c){f.attributes[c].remove(f.domNode)}),this.attributes={}},h.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(f,c){return f[c]=d.attributes[c].value(d.domNode),f},{})},h}();n.default=u},function(r,n,i){var a=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)d.hasOwnProperty(f)&&(h[f]=d[f])};return function(h,d){u(h,d);function f(){this.constructor=h}h.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12);function s(u,h){var d=u.getAttribute("class")||"";return d.split(/\s+/).filter(function(f){return f.indexOf(h+"-")===0})}var l=function(u){a(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},h.prototype.add=function(d,f){return this.canAdd(d,f)?(this.remove(d),d.classList.add(this.keyName+"-"+f),!0):!1},h.prototype.remove=function(d){var f=s(d,this.keyName);f.forEach(function(c){d.classList.remove(c)}),d.classList.length===0&&d.removeAttribute("class")},h.prototype.value=function(d){var f=s(d,this.keyName)[0]||"",c=f.slice(this.keyName.length+1);return this.canAdd(d,c)?c:""},h}(o.default);n.default=l},function(r,n,i){var a=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)d.hasOwnProperty(f)&&(h[f]=d[f])};return function(h,d){u(h,d);function f(){this.constructor=h}h.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12);function s(u){var h=u.split("-"),d=h.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return h[0]+d}var l=function(u){a(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(f){var c=f.split(":");return c[0].trim()})},h.prototype.add=function(d,f){return this.canAdd(d,f)?(d.style[s(this.keyName)]=f,!0):!1},h.prototype.remove=function(d){d.style[s(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},h.prototype.value=function(d){var f=d.style[s(this.keyName)];return this.canAdd(d,f)?f:""},h}(o.default);n.default=l},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function l(u,h){for(var d=0;d<h.length;d++){var f=h[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}return function(u,h,d){return h&&l(u.prototype,h),d&&l(u,d),u}}();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var s=function(){function l(u,h){o(this,l),this.quill=u,this.options=h,this.modules={}}return a(l,[{key:"init",value:function(){var h=this;Object.keys(this.options.modules).forEach(function(d){h.modules[d]==null&&h.addModule(d)})}},{key:"addModule",value:function(h){var d=this.quill.constructor.import("modules/"+h);return this.modules[h]=new d(this.quill,this.options.modules[h]||{}),this.modules[h]}}]),l}();s.DEFAULTS={modules:{}},s.themes={default:s},n.default=s},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function p(g,b){for(var _=0;_<b.length;_++){var E=b[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,b,_){return b&&p(g.prototype,b),_&&p(g,_),g}}(),o=function p(g,b,_){g===null&&(g=Function.prototype);var E=Object.getOwnPropertyDescriptor(g,b);if(E===void 0){var C=Object.getPrototypeOf(g);return C===null?void 0:p(C,b,_)}else{if("value"in E)return E.value;var A=E.get;return A===void 0?void 0:A.call(_)}},s=i(0),l=d(s),u=i(7),h=d(u);function d(p){return p&&p.__esModule?p:{default:p}}function f(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function c(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function y(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var v="\uFEFF",w=function(p){y(g,p);function g(b){f(this,g);var _=c(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,b));return _.contentNode=document.createElement("span"),_.contentNode.setAttribute("contenteditable",!1),[].slice.call(_.domNode.childNodes).forEach(function(E){_.contentNode.appendChild(E)}),_.leftGuard=document.createTextNode(v),_.rightGuard=document.createTextNode(v),_.domNode.appendChild(_.leftGuard),_.domNode.appendChild(_.contentNode),_.domNode.appendChild(_.rightGuard),_}return a(g,[{key:"index",value:function(_,E){return _===this.leftGuard?0:_===this.rightGuard?1:o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"index",this).call(this,_,E)}},{key:"restore",value:function(_){var E=void 0,C=void 0,A=_.data.split(v).join("");if(_===this.leftGuard)if(this.prev instanceof h.default){var P=this.prev.length();this.prev.insertAt(P,A),E={startNode:this.prev.domNode,startOffset:P+A.length}}else C=document.createTextNode(A),this.parent.insertBefore(l.default.create(C),this),E={startNode:C,startOffset:A.length};else _===this.rightGuard&&(this.next instanceof h.default?(this.next.insertAt(0,A),E={startNode:this.next.domNode,startOffset:A.length}):(C=document.createTextNode(A),this.parent.insertBefore(l.default.create(C),this.next),E={startNode:C,startOffset:A.length}));return _.data=v,E}},{key:"update",value:function(_,E){var C=this;_.forEach(function(A){if(A.type==="characterData"&&(A.target===C.leftGuard||A.target===C.rightGuard)){var P=C.restore(A.target);P&&(E.range=P)}})}}]),g}(l.default.Embed);n.default=w},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var a=i(0),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}var l={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new o.default.Attributor.Attribute("align","align",l),h=new o.default.Attributor.Class("align","ql-align",l),d=new o.default.Attributor.Style("align","text-align",l);n.AlignAttribute=u,n.AlignClass=h,n.AlignStyle=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var a=i(0),o=l(a),s=i(26);function l(d){return d&&d.__esModule?d:{default:d}}var u=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),h=new s.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});n.BackgroundClass=u,n.BackgroundStyle=h},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var a=i(0),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}var l={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},u=new o.default.Attributor.Attribute("direction","dir",l),h=new o.default.Attributor.Class("direction","ql-direction",l),d=new o.default.Attributor.Style("direction","direction",l);n.DirectionAttribute=u,n.DirectionClass=h,n.DirectionStyle=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var a=function(){function p(g,b){for(var _=0;_<b.length;_++){var E=b[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,b,_){return b&&p(g.prototype,b),_&&p(g,_),g}}(),o=function p(g,b,_){g===null&&(g=Function.prototype);var E=Object.getOwnPropertyDescriptor(g,b);if(E===void 0){var C=Object.getPrototypeOf(g);return C===null?void 0:p(C,b,_)}else{if("value"in E)return E.value;var A=E.get;return A===void 0?void 0:A.call(_)}},s=i(0),l=u(s);function u(p){return p&&p.__esModule?p:{default:p}}function h(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function d(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function f(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var c={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new l.default.Attributor.Class("font","ql-font",c),v=function(p){f(g,p);function g(){return h(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,[{key:"value",value:function(_){return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,_).replace(/["']/g,"")}}]),g}(l.default.Attributor.Style),w=new v("font","font-family",c);n.FontStyle=w,n.FontClass=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var a=i(0),o=s(a);function s(h){return h&&h.__esModule?h:{default:h}}var l=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=l,n.SizeStyle=u},function(r,n,i){r.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var a=function(){function b(_,E){for(var C=0;C<E.length;C++){var A=E[C];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(_,A.key,A)}}return function(_,E,C){return E&&b(_.prototype,E),C&&b(_,C),_}}(),o=i(0),s=f(o),l=i(5),u=f(l),h=i(9),d=f(h);function f(b){return b&&b.__esModule?b:{default:b}}function c(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}function y(b,_){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:b}function v(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);b.prototype=Object.create(_&&_.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(b,_):b.__proto__=_)}var w=function(b){v(_,b);function _(E,C){c(this,_);var A=y(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,E,C));return A.lastRecorded=0,A.ignoreChange=!1,A.clear(),A.quill.on(u.default.events.EDITOR_CHANGE,function(P,F,T,k){P!==u.default.events.TEXT_CHANGE||A.ignoreChange||(!A.options.userOnly||k===u.default.sources.USER?A.record(F,T):A.transform(F))}),A.quill.keyboard.addBinding({key:"Z",shortKey:!0},A.undo.bind(A)),A.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},A.redo.bind(A)),/Win/i.test(navigator.platform)&&A.quill.keyboard.addBinding({key:"Y",shortKey:!0},A.redo.bind(A)),A}return a(_,[{key:"change",value:function(C,A){if(this.stack[C].length!==0){var P=this.stack[C].pop();this.stack[A].push(P),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(P[C],u.default.sources.USER),this.ignoreChange=!1;var F=g(P[C]);this.quill.setSelection(F)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(C,A){if(C.ops.length!==0){this.stack.redo=[];var P=this.quill.getContents().diff(A),F=Date.now();if(this.lastRecorded+this.options.delay>F&&this.stack.undo.length>0){var T=this.stack.undo.pop();P=P.compose(T.undo),C=T.redo.compose(C)}else this.lastRecorded=F;this.stack.undo.push({redo:C,undo:P}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(C){this.stack.undo.forEach(function(A){A.undo=C.transform(A.undo,!0),A.redo=C.transform(A.redo,!0)}),this.stack.redo.forEach(function(A){A.undo=C.transform(A.undo,!0),A.redo=C.transform(A.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),_}(d.default);w.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function p(b){var _=b.ops[b.ops.length-1];return _==null?!1:_.insert!=null?typeof _.insert=="string"&&_.insert.endsWith(`
`):_.attributes!=null?Object.keys(_.attributes).some(function(E){return s.default.query(E,s.default.Scope.BLOCK)!=null}):!1}function g(b){var _=b.reduce(function(C,A){return C+=A.delete||0,C},0),E=b.length()-_;return p(b)&&(E-=1),E}n.default=w,n.getLastChangeIndex=g},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var a=function(){function L(D,z){for(var q=0;q<z.length;q++){var U=z[q];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(D,U.key,U)}}return function(D,z,q){return z&&L(D.prototype,z),q&&L(D,q),D}}(),o=function L(D,z,q){D===null&&(D=Function.prototype);var U=Object.getOwnPropertyDescriptor(D,z);if(U===void 0){var K=Object.getPrototypeOf(D);return K===null?void 0:L(K,z,q)}else{if("value"in U)return U.value;var ne=U.get;return ne===void 0?void 0:ne.call(q)}},s=i(3),l=F(s),u=i(2),h=F(u),d=i(8),f=F(d),c=i(23),y=F(c),v=i(34),w=F(v),p=i(59),g=F(p),b=i(60),_=F(b),E=i(28),C=F(E),A=i(61),P=F(A);function F(L){return L&&L.__esModule?L:{default:L}}function T(L,D){if(!(L instanceof D))throw new TypeError("Cannot call a class as a function")}function k(L,D){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:L}function j(L,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);L.prototype=Object.create(D&&D.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(L,D):L.__proto__=D)}var I=[!1,"center","right","justify"],R=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],$=[!1,"serif","monospace"],Z=["1","2","3",!1],Q=["small",!1,"large","huge"],X=function(L){j(D,L);function D(z,q){T(this,D);var U=k(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,z,q)),K=function ne(ie){if(!document.body.contains(z.root))return document.body.removeEventListener("click",ne);U.tooltip!=null&&!U.tooltip.root.contains(ie.target)&&document.activeElement!==U.tooltip.textbox&&!U.quill.hasFocus()&&U.tooltip.hide(),U.pickers!=null&&U.pickers.forEach(function(he){he.container.contains(ie.target)||he.close()})};return z.emitter.listenDOM("click",document.body,K),U}return a(D,[{key:"addModule",value:function(q){var U=o(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"addModule",this).call(this,q);return q==="toolbar"&&this.extendToolbar(U),U}},{key:"buildButtons",value:function(q,U){q.forEach(function(K){var ne=K.getAttribute("class")||"";ne.split(/\s+/).forEach(function(ie){if(ie.startsWith("ql-")&&(ie=ie.slice(3),U[ie]!=null))if(ie==="direction")K.innerHTML=U[ie][""]+U[ie].rtl;else if(typeof U[ie]=="string")K.innerHTML=U[ie];else{var he=K.value||"";he!=null&&U[ie][he]&&(K.innerHTML=U[ie][he])}})})}},{key:"buildPickers",value:function(q,U){var K=this;this.pickers=q.map(function(ie){if(ie.classList.contains("ql-align"))return ie.querySelector("option")==null&&B(ie,I),new _.default(ie,U.align);if(ie.classList.contains("ql-background")||ie.classList.contains("ql-color")){var he=ie.classList.contains("ql-background")?"background":"color";return ie.querySelector("option")==null&&B(ie,R,he==="background"?"#ffffff":"#000000"),new g.default(ie,U[he])}else return ie.querySelector("option")==null&&(ie.classList.contains("ql-font")?B(ie,$):ie.classList.contains("ql-header")?B(ie,Z):ie.classList.contains("ql-size")&&B(ie,Q)),new C.default(ie)});var ne=function(){K.pickers.forEach(function(he){he.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,ne)}}]),D}(w.default);X.DEFAULTS=(0,l.default)(!0,{},w.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var D=this,z=this.container.querySelector("input.ql-image[type=file]");z==null&&(z=document.createElement("input"),z.setAttribute("type","file"),z.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),z.classList.add("ql-image"),z.addEventListener("change",function(){if(z.files!=null&&z.files[0]!=null){var q=new FileReader;q.onload=function(U){var K=D.quill.getSelection(!0);D.quill.updateContents(new h.default().retain(K.index).delete(K.length).insert({image:U.target.result}),f.default.sources.USER),D.quill.setSelection(K.index+1,f.default.sources.SILENT),z.value=""},q.readAsDataURL(z.files[0])}}),this.container.appendChild(z)),z.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var G=function(L){j(D,L);function D(z,q){T(this,D);var U=k(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,z,q));return U.textbox=U.root.querySelector('input[type="text"]'),U.listen(),U}return a(D,[{key:"listen",value:function(){var q=this;this.textbox.addEventListener("keydown",function(U){y.default.match(U,"enter")?(q.save(),U.preventDefault()):y.default.match(U,"escape")&&(q.cancel(),U.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),U!=null?this.textbox.value=U:q!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+q)||""),this.root.setAttribute("data-mode",q)}},{key:"restoreFocus",value:function(){var q=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=q}},{key:"save",value:function(){var q=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var U=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",q,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",q,f.default.sources.USER)),this.quill.root.scrollTop=U;break}case"video":q=H(q);case"formula":{if(!q)break;var K=this.quill.getSelection(!0);if(K!=null){var ne=K.index+K.length;this.quill.insertEmbed(ne,this.root.getAttribute("data-mode"),q,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ne+1," ",f.default.sources.USER),this.quill.setSelection(ne+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),D}(P.default);function H(L){var D=L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return D?(D[1]||"https")+"://www.youtube.com/embed/"+D[2]+"?showinfo=0":(D=L.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(D[1]||"https")+"://player.vimeo.com/video/"+D[2]+"/":L}function B(L,D){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;D.forEach(function(q){var U=document.createElement("option");q===z?U.setAttribute("selected","selected"):U.setAttribute("value",q),L.appendChild(U)})}n.BaseTooltip=G,n.default=X},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];this.insertBefore(s[0],null),s.length>1&&this.append.apply(this,s.slice(1))},o.prototype.contains=function(s){for(var l,u=this.iterator();l=u();)if(l===s)return!0;return!1},o.prototype.insertBefore=function(s,l){s&&(s.next=l,l!=null?(s.prev=l.prev,l.prev!=null&&(l.prev.next=s),l.prev=s,l===this.head&&(this.head=s)):this.tail!=null?(this.tail.next=s,s.prev=this.tail,this.tail=s):(s.prev=null,this.head=this.tail=s),this.length+=1)},o.prototype.offset=function(s){for(var l=0,u=this.head;u!=null;){if(u===s)return l;l+=u.length(),u=u.next}return-1},o.prototype.remove=function(s){this.contains(s)&&(s.prev!=null&&(s.prev.next=s.next),s.next!=null&&(s.next.prev=s.prev),s===this.head&&(this.head=s.next),s===this.tail&&(this.tail=s.prev),this.length-=1)},o.prototype.iterator=function(s){return s===void 0&&(s=this.head),function(){var l=s;return s!=null&&(s=s.next),l}},o.prototype.find=function(s,l){l===void 0&&(l=!1);for(var u,h=this.iterator();u=h();){var d=u.length();if(s<d||l&&s===d&&(u.next==null||u.next.length()!==0))return[u,s];s-=d}return[null,0]},o.prototype.forEach=function(s){for(var l,u=this.iterator();l=u();)s(l)},o.prototype.forEachAt=function(s,l,u){if(!(l<=0))for(var h=this.find(s),d=h[0],f=h[1],c,y=s-f,v=this.iterator(d);(c=v())&&y<s+l;){var w=c.length();s>y?u(c,s-y,Math.min(l,y+w-s)):u(c,0,Math.min(w,s+l-y)),y+=w}},o.prototype.map=function(s){return this.reduce(function(l,u){return l.push(s(u)),l},[])},o.prototype.reduce=function(s,l){for(var u,h=this.iterator();u=h();)l=s(l,u);return l},o}();n.default=a},function(r,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var y in c)c.hasOwnProperty(y)&&(f[y]=c[y])};return function(f,c){d(f,c);function y(){this.constructor=f}f.prototype=c===null?Object.create(c):(y.prototype=c.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(17),s=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,h=function(d){a(f,d);function f(c){var y=d.call(this,c)||this;return y.scroll=y,y.observer=new MutationObserver(function(v){y.update(v)}),y.observer.observe(y.domNode,l),y.attach(),y}return f.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(c,y){this.update(),c===0&&y===this.length()?this.children.forEach(function(v){v.remove()}):d.prototype.deleteAt.call(this,c,y)},f.prototype.formatAt=function(c,y,v,w){this.update(),d.prototype.formatAt.call(this,c,y,v,w)},f.prototype.insertAt=function(c,y,v){this.update(),d.prototype.insertAt.call(this,c,y,v)},f.prototype.optimize=function(c,y){var v=this;c===void 0&&(c=[]),y===void 0&&(y={}),d.prototype.optimize.call(this,y);for(var w=[].slice.call(this.observer.takeRecords());w.length>0;)c.push(w.pop());for(var p=function(E,C){C===void 0&&(C=!0),!(E==null||E===v)&&E.domNode.parentNode!=null&&(E.domNode[s.DATA_KEY].mutations==null&&(E.domNode[s.DATA_KEY].mutations=[]),C&&p(E.parent))},g=function(E){E.domNode[s.DATA_KEY]==null||E.domNode[s.DATA_KEY].mutations==null||(E instanceof o.default&&E.children.forEach(g),E.optimize(y))},b=c,_=0;b.length>0;_+=1){if(_>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(b.forEach(function(E){var C=s.find(E.target,!0);C!=null&&(C.domNode===E.target&&(E.type==="childList"?(p(s.find(E.previousSibling,!1)),[].forEach.call(E.addedNodes,function(A){var P=s.find(A,!1);p(P,!1),P instanceof o.default&&P.children.forEach(function(F){p(F,!1)})})):E.type==="attributes"&&p(C.prev)),p(C))}),this.children.forEach(g),b=[].slice.call(this.observer.takeRecords()),w=b.slice();w.length>0;)c.push(w.pop())}},f.prototype.update=function(c,y){var v=this;y===void 0&&(y={}),c=c||this.observer.takeRecords(),c.map(function(w){var p=s.find(w.target,!0);return p==null?null:p.domNode[s.DATA_KEY].mutations==null?(p.domNode[s.DATA_KEY].mutations=[w],p):(p.domNode[s.DATA_KEY].mutations.push(w),null)}).forEach(function(w){w==null||w===v||w.domNode[s.DATA_KEY]==null||w.update(w.domNode[s.DATA_KEY].mutations||[],y)}),this.domNode[s.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[s.DATA_KEY].mutations,y),this.optimize(c,y)},f.blotName="scroll",f.defaultChild="block",f.scope=s.Scope.BLOCK_BLOT,f.tagName="DIV",f}(o.default);n.default=h},function(r,n,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var c in f)f.hasOwnProperty(c)&&(d[c]=f[c])};return function(d,f){h(d,f);function c(){this.constructor=d}d.prototype=f===null?Object.create(f):(c.prototype=f.prototype,new c)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(18),s=i(1);function l(h,d){if(Object.keys(h).length!==Object.keys(d).length)return!1;for(var f in h)if(h[f]!==d[f])return!1;return!0}var u=function(h){a(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.formats=function(f){if(f.tagName!==d.tagName)return h.formats.call(this,f)},d.prototype.format=function(f,c){var y=this;f===this.statics.blotName&&!c?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(d.blotName,!0)),y.attributes.copy(v)}),this.unwrap()):h.prototype.format.call(this,f,c)},d.prototype.formatAt=function(f,c,y,v){if(this.formats()[y]!=null||s.query(y,s.Scope.ATTRIBUTE)){var w=this.isolate(f,c);w.format(y,v)}else h.prototype.formatAt.call(this,f,c,y,v)},d.prototype.optimize=function(f){h.prototype.optimize.call(this,f);var c=this.formats();if(Object.keys(c).length===0)return this.unwrap();var y=this.next;y instanceof d&&y.prev===this&&l(c,y.formats())&&(y.moveChildren(this),y.remove())},d.blotName="inline",d.scope=s.Scope.INLINE_BLOT,d.tagName="SPAN",d}(o.default);n.default=u},function(r,n,i){var a=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)d.hasOwnProperty(f)&&(h[f]=d[f])};return function(h,d){u(h,d);function f(){this.constructor=h}h.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(18),s=i(1),l=function(u){a(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.formats=function(d){var f=s.query(h.blotName).tagName;if(d.tagName!==f)return u.formats.call(this,d)},h.prototype.format=function(d,f){s.query(d,s.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!f?this.replaceWith(h.blotName):u.prototype.format.call(this,d,f))},h.prototype.formatAt=function(d,f,c,y){s.query(c,s.Scope.BLOCK)!=null?this.format(c,y):u.prototype.formatAt.call(this,d,f,c,y)},h.prototype.insertAt=function(d,f,c){if(c==null||s.query(f,s.Scope.INLINE)!=null)u.prototype.insertAt.call(this,d,f,c);else{var y=this.split(d),v=s.create(f,c);y.parent.insertBefore(v,y)}},h.prototype.update=function(d,f){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,d,f)},h.blotName="block",h.scope=s.Scope.BLOCK_BLOT,h.tagName="P",h}(o.default);n.default=l},function(r,n,i){var a=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var d in h)h.hasOwnProperty(d)&&(u[d]=h[d])};return function(u,h){l(u,h);function d(){this.constructor=u}u.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),s=function(l){a(u,l);function u(){return l!==null&&l.apply(this,arguments)||this}return u.formats=function(h){},u.prototype.format=function(h,d){l.prototype.formatAt.call(this,0,this.length(),h,d)},u.prototype.formatAt=function(h,d,f,c){h===0&&d===this.length()?this.format(f,c):l.prototype.formatAt.call(this,h,d,f,c)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u}(o.default);n.default=s},function(r,n,i){var a=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)d.hasOwnProperty(f)&&(h[f]=d[f])};return function(h,d){u(h,d);function f(){this.constructor=h}h.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),s=i(1),l=function(u){a(h,u);function h(d){var f=u.call(this,d)||this;return f.text=f.statics.value(f.domNode),f}return h.create=function(d){return document.createTextNode(d)},h.value=function(d){var f=d.data;return f.normalize&&(f=f.normalize()),f},h.prototype.deleteAt=function(d,f){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+f)},h.prototype.index=function(d,f){return this.domNode===d?f:-1},h.prototype.insertAt=function(d,f,c){c==null?(this.text=this.text.slice(0,d)+f+this.text.slice(d),this.domNode.data=this.text):u.prototype.insertAt.call(this,d,f,c)},h.prototype.length=function(){return this.text.length},h.prototype.optimize=function(d){u.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof h&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},h.prototype.position=function(d,f){return[this.domNode,d]},h.prototype.split=function(d,f){if(f===void 0&&(f=!1),!f){if(d===0)return this;if(d===this.length())return this.next}var c=s.create(this.domNode.splitText(d));return this.parent.insertBefore(c,this.next),this.text=this.statics.value(this.domNode),c},h.prototype.update=function(d,f){var c=this;d.some(function(y){return y.type==="characterData"&&y.target===c.domNode})&&(this.text=this.statics.value(this.domNode))},h.prototype.value=function(){return this.text},h.blotName="text",h.scope=s.Scope.INLINE_BLOT,h}(o.default);n.default=l},function(r,n,i){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(s,l){return arguments.length>1&&!this.contains(s)==!l?l:o.call(this,s)}}String.prototype.startsWith||(String.prototype.startsWith=function(s,l){return l=l||0,this.substr(l,s.length)===s}),String.prototype.endsWith||(String.prototype.endsWith=function(s,l){var u=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>u.length)&&(l=u.length),l-=s.length;var h=u.indexOf(s,l);return h!==-1&&h===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),h=u.length>>>0,d=arguments[1],f,c=0;c<h;c++)if(f=u[c],l.call(d,f,c,u))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(r,n){var i=-1,a=1,o=0;function s(_,E,C){if(_==E)return _?[[o,_]]:[];(C<0||_.length<C)&&(C=null);var A=d(_,E),P=_.substring(0,A);_=_.substring(A),E=E.substring(A),A=f(_,E);var F=_.substring(_.length-A);_=_.substring(0,_.length-A),E=E.substring(0,E.length-A);var T=l(_,E);return P&&T.unshift([o,P]),F&&T.push([o,F]),y(T),C!=null&&(T=p(T,C)),T=g(T),T}function l(_,E){var C;if(!_)return[[a,E]];if(!E)return[[i,_]];var A=_.length>E.length?_:E,P=_.length>E.length?E:_,F=A.indexOf(P);if(F!=-1)return C=[[a,A.substring(0,F)],[o,P],[a,A.substring(F+P.length)]],_.length>E.length&&(C[0][0]=C[2][0]=i),C;if(P.length==1)return[[i,_],[a,E]];var T=c(_,E);if(T){var k=T[0],j=T[1],I=T[2],R=T[3],$=T[4],Z=s(k,I),Q=s(j,R);return Z.concat([[o,$]],Q)}return u(_,E)}function u(_,E){for(var C=_.length,A=E.length,P=Math.ceil((C+A)/2),F=P,T=2*P,k=new Array(T),j=new Array(T),I=0;I<T;I++)k[I]=-1,j[I]=-1;k[F+1]=0,j[F+1]=0;for(var R=C-A,$=R%2!=0,Z=0,Q=0,X=0,G=0,H=0;H<P;H++){for(var B=-H+Z;B<=H-Q;B+=2){var L=F+B,D;B==-H||B!=H&&k[L-1]<k[L+1]?D=k[L+1]:D=k[L-1]+1;for(var z=D-B;D<C&&z<A&&_.charAt(D)==E.charAt(z);)D++,z++;if(k[L]=D,D>C)Q+=2;else if(z>A)Z+=2;else if($){var q=F+R-B;if(q>=0&&q<T&&j[q]!=-1){var U=C-j[q];if(D>=U)return h(_,E,D,z)}}}for(var K=-H+X;K<=H-G;K+=2){var q=F+K,U;K==-H||K!=H&&j[q-1]<j[q+1]?U=j[q+1]:U=j[q-1]+1;for(var ne=U-K;U<C&&ne<A&&_.charAt(C-U-1)==E.charAt(A-ne-1);)U++,ne++;if(j[q]=U,U>C)G+=2;else if(ne>A)X+=2;else if(!$){var L=F+R-K;if(L>=0&&L<T&&k[L]!=-1){var D=k[L],z=F+D-L;if(U=C-U,D>=U)return h(_,E,D,z)}}}}return[[i,_],[a,E]]}function h(_,E,C,A){var P=_.substring(0,C),F=E.substring(0,A),T=_.substring(C),k=E.substring(A),j=s(P,F),I=s(T,k);return j.concat(I)}function d(_,E){if(!_||!E||_.charAt(0)!=E.charAt(0))return 0;for(var C=0,A=Math.min(_.length,E.length),P=A,F=0;C<P;)_.substring(F,P)==E.substring(F,P)?(C=P,F=C):A=P,P=Math.floor((A-C)/2+C);return P}function f(_,E){if(!_||!E||_.charAt(_.length-1)!=E.charAt(E.length-1))return 0;for(var C=0,A=Math.min(_.length,E.length),P=A,F=0;C<P;)_.substring(_.length-P,_.length-F)==E.substring(E.length-P,E.length-F)?(C=P,F=C):A=P,P=Math.floor((A-C)/2+C);return P}function c(_,E){var C=_.length>E.length?_:E,A=_.length>E.length?E:_;if(C.length<4||A.length*2<C.length)return null;function P(Q,X,G){for(var H=Q.substring(G,G+Math.floor(Q.length/4)),B=-1,L="",D,z,q,U;(B=X.indexOf(H,B+1))!=-1;){var K=d(Q.substring(G),X.substring(B)),ne=f(Q.substring(0,G),X.substring(0,B));L.length<ne+K&&(L=X.substring(B-ne,B)+X.substring(B,B+K),D=Q.substring(0,G-ne),z=Q.substring(G+K),q=X.substring(0,B-ne),U=X.substring(B+K))}return L.length*2>=Q.length?[D,z,q,U,L]:null}var F=P(C,A,Math.ceil(C.length/4)),T=P(C,A,Math.ceil(C.length/2)),k;if(!F&&!T)return null;T?F?k=F[4].length>T[4].length?F:T:k=T:k=F;var j,I,R,$;_.length>E.length?(j=k[0],I=k[1],R=k[2],$=k[3]):(R=k[0],$=k[1],j=k[2],I=k[3]);var Z=k[4];return[j,I,R,$,Z]}function y(_){_.push([o,""]);for(var E=0,C=0,A=0,P="",F="",T;E<_.length;)switch(_[E][0]){case a:A++,F+=_[E][1],E++;break;case i:C++,P+=_[E][1],E++;break;case o:C+A>1?(C!==0&&A!==0&&(T=d(F,P),T!==0&&(E-C-A>0&&_[E-C-A-1][0]==o?_[E-C-A-1][1]+=F.substring(0,T):(_.splice(0,0,[o,F.substring(0,T)]),E++),F=F.substring(T),P=P.substring(T)),T=f(F,P),T!==0&&(_[E][1]=F.substring(F.length-T)+_[E][1],F=F.substring(0,F.length-T),P=P.substring(0,P.length-T))),C===0?_.splice(E-A,C+A,[a,F]):A===0?_.splice(E-C,C+A,[i,P]):_.splice(E-C-A,C+A,[i,P],[a,F]),E=E-C-A+(C?1:0)+(A?1:0)+1):E!==0&&_[E-1][0]==o?(_[E-1][1]+=_[E][1],_.splice(E,1)):E++,A=0,C=0,P="",F="";break}_[_.length-1][1]===""&&_.pop();var k=!1;for(E=1;E<_.length-1;)_[E-1][0]==o&&_[E+1][0]==o&&(_[E][1].substring(_[E][1].length-_[E-1][1].length)==_[E-1][1]?(_[E][1]=_[E-1][1]+_[E][1].substring(0,_[E][1].length-_[E-1][1].length),_[E+1][1]=_[E-1][1]+_[E+1][1],_.splice(E-1,1),k=!0):_[E][1].substring(0,_[E+1][1].length)==_[E+1][1]&&(_[E-1][1]+=_[E+1][1],_[E][1]=_[E][1].substring(_[E+1][1].length)+_[E+1][1],_.splice(E+1,1),k=!0)),E++;k&&y(_)}var v=s;v.INSERT=a,v.DELETE=i,v.EQUAL=o,r.exports=v;function w(_,E){if(E===0)return[o,_];for(var C=0,A=0;A<_.length;A++){var P=_[A];if(P[0]===i||P[0]===o){var F=C+P[1].length;if(E===F)return[A+1,_];if(E<F){_=_.slice();var T=E-C,k=[P[0],P[1].slice(0,T)],j=[P[0],P[1].slice(T)];return _.splice(A,1,k,j),[A+1,_]}else C=F}}throw new Error("cursor_pos is out of bounds!")}function p(_,E){var C=w(_,E),A=C[1],P=C[0],F=A[P],T=A[P+1];if(F==null)return _;if(F[0]!==o)return _;if(T!=null&&F[1]+T[1]===T[1]+F[1])return A.splice(P,2,T,F),b(A,P,2);if(T!=null&&T[1].indexOf(F[1])===0){A.splice(P,2,[T[0],F[1]],[0,F[1]]);var k=T[1].slice(F[1].length);return k.length>0&&A.splice(P+2,0,[T[0],k]),b(A,P,3)}else return _}function g(_){for(var E=!1,C=function(T){return T.charCodeAt(0)>=56320&&T.charCodeAt(0)<=57343},A=function(T){return T.charCodeAt(T.length-1)>=55296&&T.charCodeAt(T.length-1)<=56319},P=2;P<_.length;P+=1)_[P-2][0]===o&&A(_[P-2][1])&&_[P-1][0]===i&&C(_[P-1][1])&&_[P][0]===a&&C(_[P][1])&&(E=!0,_[P-1][1]=_[P-2][1].slice(-1)+_[P-1][1],_[P][1]=_[P-2][1].slice(-1)+_[P][1],_[P-2][1]=_[P-2][1].slice(0,-1));if(!E)return _;for(var F=[],P=0;P<_.length;P+=1)_[P][1].length>0&&F.push(_[P]);return F}function b(_,E,C){for(var A=E+C-1;A>=0&&A>=E-1;A--)if(A+1<_.length){var P=_[A],F=_[A+1];P[0]===F[1]&&_.splice(A,2,[P[0],P[1]+F[1]])}return _}},function(r,n){n=r.exports=typeof Object.keys=="function"?Object.keys:i,n.shim=i;function i(a){var o=[];for(var s in a)o.push(s);return o}},function(r,n){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=r.exports=i?a:o,n.supported=a;function a(s){return Object.prototype.toString.call(s)=="[object Arguments]"}n.unsupported=o;function o(s){return s&&typeof s=="object"&&typeof s.length=="number"&&Object.prototype.hasOwnProperty.call(s,"callee")&&!Object.prototype.propertyIsEnumerable.call(s,"callee")||!1}},function(r,n){var i=Object.prototype.hasOwnProperty,a="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(a=!1));function s(u,h,d){this.fn=u,this.context=h,this.once=d||!1}function l(){this._events=new o,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],d,f;if(this._eventsCount===0)return h;for(f in d=this._events)i.call(d,f)&&h.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(d)):h},l.prototype.listeners=function(h,d){var f=a?a+h:h,c=this._events[f];if(d)return!!c;if(!c)return[];if(c.fn)return[c.fn];for(var y=0,v=c.length,w=new Array(v);y<v;y++)w[y]=c[y].fn;return w},l.prototype.emit=function(h,d,f,c,y,v){var w=a?a+h:h;if(!this._events[w])return!1;var p=this._events[w],g=arguments.length,b,_;if(p.fn){switch(p.once&&this.removeListener(h,p.fn,void 0,!0),g){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,d),!0;case 3:return p.fn.call(p.context,d,f),!0;case 4:return p.fn.call(p.context,d,f,c),!0;case 5:return p.fn.call(p.context,d,f,c,y),!0;case 6:return p.fn.call(p.context,d,f,c,y,v),!0}for(_=1,b=new Array(g-1);_<g;_++)b[_-1]=arguments[_];p.fn.apply(p.context,b)}else{var E=p.length,C;for(_=0;_<E;_++)switch(p[_].once&&this.removeListener(h,p[_].fn,void 0,!0),g){case 1:p[_].fn.call(p[_].context);break;case 2:p[_].fn.call(p[_].context,d);break;case 3:p[_].fn.call(p[_].context,d,f);break;case 4:p[_].fn.call(p[_].context,d,f,c);break;default:if(!b)for(C=1,b=new Array(g-1);C<g;C++)b[C-1]=arguments[C];p[_].fn.apply(p[_].context,b)}}return!0},l.prototype.on=function(h,d,f){var c=new s(d,f||this),y=a?a+h:h;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],c]:this._events[y].push(c):(this._events[y]=c,this._eventsCount++),this},l.prototype.once=function(h,d,f){var c=new s(d,f||this,!0),y=a?a+h:h;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],c]:this._events[y].push(c):(this._events[y]=c,this._eventsCount++),this},l.prototype.removeListener=function(h,d,f,c){var y=a?a+h:h;if(!this._events[y])return this;if(!d)return--this._eventsCount===0?this._events=new o:delete this._events[y],this;var v=this._events[y];if(v.fn)v.fn===d&&(!c||v.once)&&(!f||v.context===f)&&(--this._eventsCount===0?this._events=new o:delete this._events[y]);else{for(var w=0,p=[],g=v.length;w<g;w++)(v[w].fn!==d||c&&!v[w].once||f&&v[w].context!==f)&&p.push(v[w]);p.length?this._events[y]=p.length===1?p[0]:p:--this._eventsCount===0?this._events=new o:delete this._events[y]}return this},l.prototype.removeAllListeners=function(h){var d;return h?(d=a?a+h:h,this._events[d]&&(--this._eventsCount===0?this._events=new o:delete this._events[d])):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=a,l.EventEmitter=l,typeof r<"u"&&(r.exports=l)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve},o=function(){function ve(de,ge){var Ne=[],ae=!0,Se=!1,Ce=void 0;try{for(var Pe=de[Symbol.iterator](),Ve;!(ae=(Ve=Pe.next()).done)&&(Ne.push(Ve.value),!(ge&&Ne.length===ge));ae=!0);}catch(Ye){Se=!0,Ce=Ye}finally{try{!ae&&Pe.return&&Pe.return()}finally{if(Se)throw Ce}}return Ne}return function(de,ge){if(Array.isArray(de))return de;if(Symbol.iterator in Object(de))return ve(de,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function ve(de,ge){for(var Ne=0;Ne<ge.length;Ne++){var ae=ge[Ne];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(de,ae.key,ae)}}return function(de,ge,Ne){return ge&&ve(de.prototype,ge),Ne&&ve(de,Ne),de}}(),l=i(3),u=j(l),h=i(2),d=j(h),f=i(0),c=j(f),y=i(5),v=j(y),w=i(10),p=j(w),g=i(9),b=j(g),_=i(36),E=i(37),C=i(13),A=j(C),P=i(26),F=i(38),T=i(39),k=i(40);function j(ve){return ve&&ve.__esModule?ve:{default:ve}}function I(ve,de,ge){return de in ve?Object.defineProperty(ve,de,{value:ge,enumerable:!0,configurable:!0,writable:!0}):ve[de]=ge,ve}function R(ve,de){if(!(ve instanceof de))throw new TypeError("Cannot call a class as a function")}function $(ve,de){if(!ve)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de&&(typeof de=="object"||typeof de=="function")?de:ve}function Z(ve,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof de);ve.prototype=Object.create(de&&de.prototype,{constructor:{value:ve,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(ve,de):ve.__proto__=de)}var Q=(0,p.default)("quill:clipboard"),X="__ql-matcher",G=[[Node.TEXT_NODE,rt],[Node.TEXT_NODE,He],["br",ye],[Node.ELEMENT_NODE,He],[Node.ELEMENT_NODE,he],[Node.ELEMENT_NODE,_e],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,se],["li",Le],["b",ne.bind(ne,"bold")],["i",ne.bind(ne,"italic")],["style",Oe]],H=[_.AlignAttribute,F.DirectionAttribute].reduce(function(ve,de){return ve[de.keyName]=de,ve},{}),B=[_.AlignStyle,E.BackgroundStyle,P.ColorStyle,F.DirectionStyle,T.FontStyle,k.SizeStyle].reduce(function(ve,de){return ve[de.keyName]=de,ve},{}),L=function(ve){Z(de,ve);function de(ge,Ne){R(this,de);var ae=$(this,(de.__proto__||Object.getPrototypeOf(de)).call(this,ge,Ne));return ae.quill.root.addEventListener("paste",ae.onPaste.bind(ae)),ae.container=ae.quill.addContainer("ql-clipboard"),ae.container.setAttribute("contenteditable",!0),ae.container.setAttribute("tabindex",-1),ae.matchers=[],G.concat(ae.options.matchers).forEach(function(Se){var Ce=o(Se,2),Pe=Ce[0],Ve=Ce[1];!Ne.matchVisual&&Ve===_e||ae.addMatcher(Pe,Ve)}),ae}return s(de,[{key:"addMatcher",value:function(Ne,ae){this.matchers.push([Ne,ae])}},{key:"convert",value:function(Ne){if(typeof Ne=="string")return this.container.innerHTML=Ne.replace(/\>\r?\n +\</g,"><"),this.convert();var ae=this.quill.getFormat(this.quill.selection.savedRange.index);if(ae[A.default.blotName]){var Se=this.container.innerText;return this.container.innerHTML="",new d.default().insert(Se,I({},A.default.blotName,ae[A.default.blotName]))}var Ce=this.prepareMatching(),Pe=o(Ce,2),Ve=Pe[0],Ye=Pe[1],nt=K(this.container,Ve,Ye);return q(nt,`
`)&&nt.ops[nt.ops.length-1].attributes==null&&(nt=nt.compose(new d.default().retain(nt.length()-1).delete(1))),Q.log("convert",this.container.innerHTML,nt),this.container.innerHTML="",nt}},{key:"dangerouslyPasteHTML",value:function(Ne,ae){var Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof Ne=="string")this.quill.setContents(this.convert(Ne),ae),this.quill.setSelection(0,v.default.sources.SILENT);else{var Ce=this.convert(ae);this.quill.updateContents(new d.default().retain(Ne).concat(Ce),Se),this.quill.setSelection(Ne+Ce.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(Ne){var ae=this;if(!(Ne.defaultPrevented||!this.quill.isEnabled())){var Se=this.quill.getSelection(),Ce=new d.default().retain(Se.index),Pe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){Ce=Ce.concat(ae.convert()).delete(Se.length),ae.quill.updateContents(Ce,v.default.sources.USER),ae.quill.setSelection(Ce.length()-Se.length,v.default.sources.SILENT),ae.quill.scrollingContainer.scrollTop=Pe,ae.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Ne=this,ae=[],Se=[];return this.matchers.forEach(function(Ce){var Pe=o(Ce,2),Ve=Pe[0],Ye=Pe[1];switch(Ve){case Node.TEXT_NODE:Se.push(Ye);break;case Node.ELEMENT_NODE:ae.push(Ye);break;default:[].forEach.call(Ne.container.querySelectorAll(Ve),function(nt){nt[X]=nt[X]||[],nt[X].push(Ye)});break}}),[ae,Se]}}]),de}(b.default);L.DEFAULTS={matchers:[],matchVisual:!0};function D(ve,de,ge){return(typeof de>"u"?"undefined":a(de))==="object"?Object.keys(de).reduce(function(Ne,ae){return D(Ne,ae,de[ae])},ve):ve.reduce(function(Ne,ae){return ae.attributes&&ae.attributes[de]?Ne.push(ae):Ne.insert(ae.insert,(0,u.default)({},I({},de,ge),ae.attributes))},new d.default)}function z(ve){if(ve.nodeType!==Node.ELEMENT_NODE)return{};var de="__ql-computed-style";return ve[de]||(ve[de]=window.getComputedStyle(ve))}function q(ve,de){for(var ge="",Ne=ve.ops.length-1;Ne>=0&&ge.length<de.length;--Ne){var ae=ve.ops[Ne];if(typeof ae.insert!="string")break;ge=ae.insert+ge}return ge.slice(-1*de.length)===de}function U(ve){if(ve.childNodes.length===0)return!1;var de=z(ve);return["block","list-item"].indexOf(de.display)>-1}function K(ve,de,ge){return ve.nodeType===ve.TEXT_NODE?ge.reduce(function(Ne,ae){return ae(ve,Ne)},new d.default):ve.nodeType===ve.ELEMENT_NODE?[].reduce.call(ve.childNodes||[],function(Ne,ae){var Se=K(ae,de,ge);return ae.nodeType===ve.ELEMENT_NODE&&(Se=de.reduce(function(Ce,Pe){return Pe(ae,Ce)},Se),Se=(ae[X]||[]).reduce(function(Ce,Pe){return Pe(ae,Ce)},Se)),Ne.concat(Se)},new d.default):new d.default}function ne(ve,de,ge){return D(ge,ve,!0)}function ie(ve,de){var ge=c.default.Attributor.Attribute.keys(ve),Ne=c.default.Attributor.Class.keys(ve),ae=c.default.Attributor.Style.keys(ve),Se={};return ge.concat(Ne).concat(ae).forEach(function(Ce){var Pe=c.default.query(Ce,c.default.Scope.ATTRIBUTE);Pe!=null&&(Se[Pe.attrName]=Pe.value(ve),Se[Pe.attrName])||(Pe=H[Ce],Pe!=null&&(Pe.attrName===Ce||Pe.keyName===Ce)&&(Se[Pe.attrName]=Pe.value(ve)||void 0),Pe=B[Ce],Pe!=null&&(Pe.attrName===Ce||Pe.keyName===Ce)&&(Pe=B[Ce],Se[Pe.attrName]=Pe.value(ve)||void 0))}),Object.keys(Se).length>0&&(de=D(de,Se)),de}function he(ve,de){var ge=c.default.query(ve);if(ge==null)return de;if(ge.prototype instanceof c.default.Embed){var Ne={},ae=ge.value(ve);ae!=null&&(Ne[ge.blotName]=ae,de=new d.default().insert(Ne,ge.formats(ve)))}else typeof ge.formats=="function"&&(de=D(de,ge.blotName,ge.formats(ve)));return de}function ye(ve,de){return q(de,`
`)||de.insert(`
`),de}function Oe(){return new d.default}function Le(ve,de){var ge=c.default.query(ve);if(ge==null||ge.blotName!=="list-item"||!q(de,`
`))return de;for(var Ne=-1,ae=ve.parentNode;!ae.classList.contains("ql-clipboard");)(c.default.query(ae)||{}).blotName==="list"&&(Ne+=1),ae=ae.parentNode;return Ne<=0?de:de.compose(new d.default().retain(de.length()-1).retain(1,{indent:Ne}))}function He(ve,de){return q(de,`
`)||(U(ve)||de.length()>0&&ve.nextSibling&&U(ve.nextSibling))&&de.insert(`
`),de}function _e(ve,de){if(U(ve)&&ve.nextElementSibling!=null&&!q(de,`

`)){var ge=ve.offsetHeight+parseFloat(z(ve).marginTop)+parseFloat(z(ve).marginBottom);ve.nextElementSibling.offsetTop>ve.offsetTop+ge*1.5&&de.insert(`
`)}return de}function se(ve,de){var ge={},Ne=ve.style||{};return Ne.fontStyle&&z(ve).fontStyle==="italic"&&(ge.italic=!0),Ne.fontWeight&&(z(ve).fontWeight.startsWith("bold")||parseInt(z(ve).fontWeight)>=700)&&(ge.bold=!0),Object.keys(ge).length>0&&(de=D(de,ge)),parseFloat(Ne.textIndent||0)>0&&(de=new d.default().insert("	").concat(de)),de}function rt(ve,de){var ge=ve.data;if(ve.parentNode.tagName==="O:P")return de.insert(ge.trim());if(ge.trim().length===0&&ve.parentNode.classList.contains("ql-clipboard"))return de;if(!z(ve.parentNode).whiteSpace.startsWith("pre")){var Ne=function(Se,Ce){return Ce=Ce.replace(/[^\u00a0]/g,""),Ce.length<1&&Se?" ":Ce};ge=ge.replace(/\r\n/g," ").replace(/\n/g," "),ge=ge.replace(/\s\s+/g,Ne.bind(Ne,!0)),(ve.previousSibling==null&&U(ve.parentNode)||ve.previousSibling!=null&&U(ve.previousSibling))&&(ge=ge.replace(/^\s+/,Ne.bind(Ne,!1))),(ve.nextSibling==null&&U(ve.parentNode)||ve.nextSibling!=null&&U(ve.nextSibling))&&(ge=ge.replace(/\s+$/,Ne.bind(Ne,!1)))}return de.insert(ge)}n.default=L,n.matchAttributor=ie,n.matchBlot=he,n.matchNewline=He,n.matchSpacing=_e,n.matchText=rt},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,w){for(var p=0;p<w.length;p++){var g=w[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,w,p){return w&&y(v.prototype,w),p&&y(v,p),v}}(),o=function y(v,w,p){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,w);if(g===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:y(b,w,p)}else{if("value"in g)return g.value;var _=g.get;return _===void 0?void 0:_.call(p)}},s=i(6),l=u(s);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var c=function(y){f(v,y);function v(){return h(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"optimize",value:function(p){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,p),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(l.default);c.blotName="bold",c.tagName=["STRONG","B"],n.default=c},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var a=function(){function k(j,I){var R=[],$=!0,Z=!1,Q=void 0;try{for(var X=j[Symbol.iterator](),G;!($=(G=X.next()).done)&&(R.push(G.value),!(I&&R.length===I));$=!0);}catch(H){Z=!0,Q=H}finally{try{!$&&X.return&&X.return()}finally{if(Z)throw Q}}return R}return function(j,I){if(Array.isArray(j))return j;if(Symbol.iterator in Object(j))return k(j,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function k(j,I){for(var R=0;R<I.length;R++){var $=I[R];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(j,$.key,$)}}return function(j,I,R){return I&&k(j.prototype,I),R&&k(j,R),j}}(),s=i(2),l=p(s),u=i(0),h=p(u),d=i(5),f=p(d),c=i(10),y=p(c),v=i(9),w=p(v);function p(k){return k&&k.__esModule?k:{default:k}}function g(k,j,I){return j in k?Object.defineProperty(k,j,{value:I,enumerable:!0,configurable:!0,writable:!0}):k[j]=I,k}function b(k,j){if(!(k instanceof j))throw new TypeError("Cannot call a class as a function")}function _(k,j){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:k}function E(k,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);k.prototype=Object.create(j&&j.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(k,j):k.__proto__=j)}var C=(0,y.default)("quill:toolbar"),A=function(k){E(j,k);function j(I,R){b(this,j);var $=_(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,I,R));if(Array.isArray($.options.container)){var Z=document.createElement("div");F(Z,$.options.container),I.container.parentNode.insertBefore(Z,I.container),$.container=Z}else typeof $.options.container=="string"?$.container=document.querySelector($.options.container):$.container=$.options.container;if(!($.container instanceof HTMLElement)){var Q;return Q=C.error("Container required for toolbar",$.options),_($,Q)}return $.container.classList.add("ql-toolbar"),$.controls=[],$.handlers={},Object.keys($.options.handlers).forEach(function(X){$.addHandler(X,$.options.handlers[X])}),[].forEach.call($.container.querySelectorAll("button, select"),function(X){$.attach(X)}),$.quill.on(f.default.events.EDITOR_CHANGE,function(X,G){X===f.default.events.SELECTION_CHANGE&&$.update(G)}),$.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var X=$.quill.selection.getRange(),G=a(X,1),H=G[0];$.update(H)}),$}return o(j,[{key:"addHandler",value:function(R,$){this.handlers[R]=$}},{key:"attach",value:function(R){var $=this,Z=[].find.call(R.classList,function(X){return X.indexOf("ql-")===0});if(Z){if(Z=Z.slice(3),R.tagName==="BUTTON"&&R.setAttribute("type","button"),this.handlers[Z]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Z]==null){C.warn("ignoring attaching to disabled format",Z,R);return}if(h.default.query(Z)==null){C.warn("ignoring attaching to nonexistent format",Z,R);return}}var Q=R.tagName==="SELECT"?"change":"click";R.addEventListener(Q,function(X){var G=void 0;if(R.tagName==="SELECT"){if(R.selectedIndex<0)return;var H=R.options[R.selectedIndex];H.hasAttribute("selected")?G=!1:G=H.value||!1}else R.classList.contains("ql-active")?G=!1:G=R.value||!R.hasAttribute("value"),X.preventDefault();$.quill.focus();var B=$.quill.selection.getRange(),L=a(B,1),D=L[0];if($.handlers[Z]!=null)$.handlers[Z].call($,G);else if(h.default.query(Z).prototype instanceof h.default.Embed){if(G=prompt("Enter "+Z),!G)return;$.quill.updateContents(new l.default().retain(D.index).delete(D.length).insert(g({},Z,G)),f.default.sources.USER)}else $.quill.format(Z,G,f.default.sources.USER);$.update(D)}),this.controls.push([Z,R])}}},{key:"update",value:function(R){var $=R==null?{}:this.quill.getFormat(R);this.controls.forEach(function(Z){var Q=a(Z,2),X=Q[0],G=Q[1];if(G.tagName==="SELECT"){var H=void 0;if(R==null)H=null;else if($[X]==null)H=G.querySelector("option[selected]");else if(!Array.isArray($[X])){var B=$[X];typeof B=="string"&&(B=B.replace(/\"/g,'\\"')),H=G.querySelector('option[value="'+B+'"]')}H==null?(G.value="",G.selectedIndex=-1):H.selected=!0}else if(R==null)G.classList.remove("ql-active");else if(G.hasAttribute("value")){var L=$[X]===G.getAttribute("value")||$[X]!=null&&$[X].toString()===G.getAttribute("value")||$[X]==null&&!G.getAttribute("value");G.classList.toggle("ql-active",L)}else G.classList.toggle("ql-active",$[X]!=null)})}}]),j}(w.default);A.DEFAULTS={};function P(k,j,I){var R=document.createElement("button");R.setAttribute("type","button"),R.classList.add("ql-"+j),I!=null&&(R.value=I),k.appendChild(R)}function F(k,j){Array.isArray(j[0])||(j=[j]),j.forEach(function(I){var R=document.createElement("span");R.classList.add("ql-formats"),I.forEach(function($){if(typeof $=="string")P(R,$);else{var Z=Object.keys($)[0],Q=$[Z];Array.isArray(Q)?T(R,Z,Q):P(R,Z,Q)}}),k.appendChild(R)})}function T(k,j,I){var R=document.createElement("select");R.classList.add("ql-"+j),I.forEach(function($){var Z=document.createElement("option");$!==!1?Z.setAttribute("value",$):Z.setAttribute("selected","selected"),R.appendChild(Z)}),k.appendChild(R)}A.DEFAULTS={container:null,handlers:{clean:function(){var j=this,I=this.quill.getSelection();if(I!=null)if(I.length==0){var R=this.quill.getFormat();Object.keys(R).forEach(function($){h.default.query($,h.default.Scope.INLINE)!=null&&j.quill.format($,!1)})}else this.quill.removeFormat(I,f.default.sources.USER)},direction:function(j){var I=this.quill.getFormat().align;j==="rtl"&&I==null?this.quill.format("align","right",f.default.sources.USER):!j&&I==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",j,f.default.sources.USER)},indent:function(j){var I=this.quill.getSelection(),R=this.quill.getFormat(I),$=parseInt(R.indent||0);if(j==="+1"||j==="-1"){var Z=j==="+1"?1:-1;R.direction==="rtl"&&(Z*=-1),this.quill.format("indent",$+Z,f.default.sources.USER)}},link:function(j){j===!0&&(j=prompt("Enter link URL:")),this.quill.format("link",j,f.default.sources.USER)},list:function(j){var I=this.quill.getSelection(),R=this.quill.getFormat(I);j==="check"?R.list==="checked"||R.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",j,f.default.sources.USER)}}},n.default=A,n.addControls=F},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,w){for(var p=0;p<w.length;p++){var g=w[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,w,p){return w&&y(v.prototype,w),p&&y(v,p),v}}(),o=function y(v,w,p){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,w);if(g===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:y(b,w,p)}else{if("value"in g)return g.value;var _=g.get;return _===void 0?void 0:_.call(p)}},s=i(28),l=u(s);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var c=function(y){f(v,y);function v(w,p){h(this,v);var g=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,w));return g.label.innerHTML=p,g.container.classList.add("ql-color-picker"),[].slice.call(g.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(b){b.classList.add("ql-primary")}),g}return a(v,[{key:"buildItem",value:function(p){var g=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,p);return g.style.backgroundColor=p.getAttribute("value")||"",g}},{key:"selectItem",value:function(p,g){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,p,g);var b=this.label.querySelector(".ql-color-label"),_=p&&p.getAttribute("data-value")||"";b&&(b.tagName==="line"?b.style.stroke=_:b.style.fill=_)}}]),v}(l.default);n.default=c},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,w){for(var p=0;p<w.length;p++){var g=w[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,w,p){return w&&y(v.prototype,w),p&&y(v,p),v}}(),o=function y(v,w,p){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,w);if(g===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:y(b,w,p)}else{if("value"in g)return g.value;var _=g.get;return _===void 0?void 0:_.call(p)}},s=i(28),l=u(s);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var c=function(y){f(v,y);function v(w,p){h(this,v);var g=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,w));return g.container.classList.add("ql-icon-picker"),[].forEach.call(g.container.querySelectorAll(".ql-picker-item"),function(b){b.innerHTML=p[b.getAttribute("data-value")||""]}),g.defaultItem=g.container.querySelector(".ql-selected"),g.selectItem(g.defaultItem),g}return a(v,[{key:"selectItem",value:function(p,g){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,p,g),p=p||this.defaultItem,this.label.innerHTML=p.innerHTML}}]),v}(l.default);n.default=c},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function l(u,h){for(var d=0;d<h.length;d++){var f=h[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}return function(u,h,d){return h&&l(u.prototype,h),d&&l(u,d),u}}();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var s=function(){function l(u,h){var d=this;o(this,l),this.quill=u,this.boundsContainer=h||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return a(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(h){var d=h.left+h.width/2-this.root.offsetWidth/2,f=h.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var c=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),v=0;if(y.right>c.right&&(v=c.right-y.right,this.root.style.left=d+v+"px"),y.left<c.left&&(v=c.left-y.left,this.root.style.left=d+v+"px"),y.bottom>c.bottom){var w=y.bottom-y.top,p=h.bottom-h.top+w;this.root.style.top=f-p+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();n.default=s},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(k,j){var I=[],R=!0,$=!1,Z=void 0;try{for(var Q=k[Symbol.iterator](),X;!(R=(X=Q.next()).done)&&(I.push(X.value),!(j&&I.length===j));R=!0);}catch(G){$=!0,Z=G}finally{try{!R&&Q.return&&Q.return()}finally{if($)throw Z}}return I}return function(k,j){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return T(k,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function T(k,j,I){k===null&&(k=Function.prototype);var R=Object.getOwnPropertyDescriptor(k,j);if(R===void 0){var $=Object.getPrototypeOf(k);return $===null?void 0:T($,j,I)}else{if("value"in R)return R.value;var Z=R.get;return Z===void 0?void 0:Z.call(I)}},s=function(){function T(k,j){for(var I=0;I<j.length;I++){var R=j[I];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(k,R.key,R)}}return function(k,j,I){return j&&T(k.prototype,j),I&&T(k,I),k}}(),l=i(3),u=b(l),h=i(8),d=b(h),f=i(43),c=b(f),y=i(27),v=b(y),w=i(15),p=i(41),g=b(p);function b(T){return T&&T.__esModule?T:{default:T}}function _(T,k){if(!(T instanceof k))throw new TypeError("Cannot call a class as a function")}function E(T,k){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:T}function C(T,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);T.prototype=Object.create(k&&k.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(T,k):T.__proto__=k)}var A=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],P=function(T){C(k,T);function k(j,I){_(this,k),I.modules.toolbar!=null&&I.modules.toolbar.container==null&&(I.modules.toolbar.container=A);var R=E(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,j,I));return R.quill.container.classList.add("ql-snow"),R}return s(k,[{key:"extendToolbar",value:function(I){I.container.classList.add("ql-snow"),this.buildButtons([].slice.call(I.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(I.container.querySelectorAll("select")),g.default),this.tooltip=new F(this.quill,this.options.bounds),I.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(R,$){I.handlers.link.call(I,!$.format.link)})}}]),k}(c.default);P.DEFAULTS=(0,u.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(k){if(k){var j=this.quill.getSelection();if(j==null||j.length==0)return;var I=this.quill.getText(j);/^\S+@\S+\.\S+$/.test(I)&&I.indexOf("mailto:")!==0&&(I="mailto:"+I);var R=this.quill.theme.tooltip;R.edit("link",I)}else this.quill.format("link",!1)}}}}});var F=function(T){C(k,T);function k(j,I){_(this,k);var R=E(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,j,I));return R.preview=R.root.querySelector("a.ql-preview"),R}return s(k,[{key:"listen",value:function(){var I=this;o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(R){I.root.classList.contains("ql-editing")?I.save():I.edit("link",I.preview.textContent),R.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(R){if(I.linkRange!=null){var $=I.linkRange;I.restoreFocus(),I.quill.formatText($,"link",!1,d.default.sources.USER),delete I.linkRange}R.preventDefault(),I.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(R,$,Z){if(R!=null){if(R.length===0&&Z===d.default.sources.USER){var Q=I.quill.scroll.descendant(v.default,R.index),X=a(Q,2),G=X[0],H=X[1];if(G!=null){I.linkRange=new w.Range(R.index-H,G.length());var B=v.default.formats(G.domNode);I.preview.textContent=B,I.preview.setAttribute("href",B),I.show(),I.position(I.quill.getBounds(I.linkRange));return}}else delete I.linkRange;I.hide()}})}},{key:"show",value:function(){o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),k}(f.BaseTooltip);F.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=P},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(29),o=ae(a),s=i(36),l=i(38),u=i(64),h=i(65),d=ae(h),f=i(66),c=ae(f),y=i(67),v=ae(y),w=i(37),p=i(26),g=i(39),b=i(40),_=i(56),E=ae(_),C=i(68),A=ae(C),P=i(27),F=ae(P),T=i(69),k=ae(T),j=i(70),I=ae(j),R=i(71),$=ae(R),Z=i(72),Q=ae(Z),X=i(73),G=ae(X),H=i(13),B=ae(H),L=i(74),D=ae(L),z=i(75),q=ae(z),U=i(57),K=ae(U),ne=i(41),ie=ae(ne),he=i(28),ye=ae(he),Oe=i(59),Le=ae(Oe),He=i(60),_e=ae(He),se=i(61),rt=ae(se),ve=i(108),de=ae(ve),ge=i(62),Ne=ae(ge);function ae(Se){return Se&&Se.__esModule?Se:{default:Se}}o.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":s.AlignClass,"attributors/class/background":w.BackgroundClass,"attributors/class/color":p.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":g.FontClass,"attributors/class/size":b.SizeClass,"attributors/style/align":s.AlignStyle,"attributors/style/background":w.BackgroundStyle,"attributors/style/color":p.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":g.FontStyle,"attributors/style/size":b.SizeStyle},!0),o.default.register({"formats/align":s.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":u.IndentClass,"formats/background":w.BackgroundStyle,"formats/color":p.ColorStyle,"formats/font":g.FontClass,"formats/size":b.SizeClass,"formats/blockquote":d.default,"formats/code-block":B.default,"formats/header":c.default,"formats/list":v.default,"formats/bold":E.default,"formats/code":H.Code,"formats/italic":A.default,"formats/link":F.default,"formats/script":k.default,"formats/strike":I.default,"formats/underline":$.default,"formats/image":Q.default,"formats/video":G.default,"formats/list/item":y.ListItem,"modules/formula":D.default,"modules/syntax":q.default,"modules/toolbar":K.default,"themes/bubble":de.default,"themes/snow":Ne.default,"ui/icons":ie.default,"ui/picker":ye.default,"ui/icon-picker":_e.default,"ui/color-picker":Le.default,"ui/tooltip":rt.default},!0),n.default=o.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var a=function(){function v(w,p){for(var g=0;g<p.length;g++){var b=p[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(w,b.key,b)}}return function(w,p,g){return p&&v(w.prototype,p),g&&v(w,g),w}}(),o=function v(w,p,g){w===null&&(w=Function.prototype);var b=Object.getOwnPropertyDescriptor(w,p);if(b===void 0){var _=Object.getPrototypeOf(w);return _===null?void 0:v(_,p,g)}else{if("value"in b)return b.value;var E=b.get;return E===void 0?void 0:E.call(g)}},s=i(0),l=u(s);function u(v){return v&&v.__esModule?v:{default:v}}function h(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function d(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function f(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var c=function(v){f(w,v);function w(){return h(this,w),d(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"add",value:function(g,b){if(b==="+1"||b==="-1"){var _=this.value(g)||0;b=b==="+1"?_+1:_-1}return b===0?(this.remove(g),!0):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"add",this).call(this,g,b)}},{key:"canAdd",value:function(g,b){return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,g,b)||o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,g,parseInt(b))}},{key:"value",value:function(g){return parseInt(o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,g))||void 0}}]),w}(l.default.Attributor.Class),y=new c("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(4),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function u(f,c){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:f}function h(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);f.prototype=Object.create(c&&c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(f,c):f.__proto__=c)}var d=function(f){h(c,f);function c(){return l(this,c),u(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return c}(o.default);d.blotName="blockquote",d.tagName="blockquote",n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function c(y,v){for(var w=0;w<v.length;w++){var p=v[w];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(y,p.key,p)}}return function(y,v,w){return v&&c(y.prototype,v),w&&c(y,w),y}}(),o=i(4),s=l(o);function l(c){return c&&c.__esModule?c:{default:c}}function u(c,y){if(!(c instanceof y))throw new TypeError("Cannot call a class as a function")}function h(c,y){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:c}function d(c,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);c.prototype=Object.create(y&&y.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(c,y):c.__proto__=y)}var f=function(c){d(y,c);function y(){return u(this,y),h(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,null,[{key:"formats",value:function(w){return this.tagName.indexOf(w.tagName)+1}}]),y}(s.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],n.default=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var a=function(){function _(E,C){for(var A=0;A<C.length;A++){var P=C[A];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(E,P.key,P)}}return function(E,C,A){return C&&_(E.prototype,C),A&&_(E,A),E}}(),o=function _(E,C,A){E===null&&(E=Function.prototype);var P=Object.getOwnPropertyDescriptor(E,C);if(P===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:_(F,C,A)}else{if("value"in P)return P.value;var T=P.get;return T===void 0?void 0:T.call(A)}},s=i(0),l=c(s),u=i(4),h=c(u),d=i(25),f=c(d);function c(_){return _&&_.__esModule?_:{default:_}}function y(_,E,C){return E in _?Object.defineProperty(_,E,{value:C,enumerable:!0,configurable:!0,writable:!0}):_[E]=C,_}function v(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function w(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function p(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}var g=function(_){p(E,_);function E(){return v(this,E),w(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"format",value:function(A,P){A===b.blotName&&!P?this.replaceWith(l.default.create(this.statics.scope)):o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,A,P)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(A,P){return this.parent.isolate(this.offset(this.parent),this.length()),A===this.parent.statics.blotName?(this.parent.replaceWith(A,P),this):(this.parent.unwrap(),o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replaceWith",this).call(this,A,P))}}],[{key:"formats",value:function(A){return A.tagName===this.tagName?void 0:o(E.__proto__||Object.getPrototypeOf(E),"formats",this).call(this,A)}}]),E}(h.default);g.blotName="list-item",g.tagName="LI";var b=function(_){p(E,_),a(E,null,[{key:"create",value:function(A){var P=A==="ordered"?"OL":"UL",F=o(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,P);return(A==="checked"||A==="unchecked")&&F.setAttribute("data-checked",A==="checked"),F}},{key:"formats",value:function(A){if(A.tagName==="OL")return"ordered";if(A.tagName==="UL")return A.hasAttribute("data-checked")?A.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function E(C){v(this,E);var A=w(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,C)),P=function(T){if(T.target.parentNode===C){var k=A.statics.formats(C),j=l.default.find(T.target);k==="checked"?j.format("list","unchecked"):k==="unchecked"&&j.format("list","checked")}};return C.addEventListener("touchstart",P),C.addEventListener("mousedown",P),A}return a(E,[{key:"format",value:function(A,P){this.children.length>0&&this.children.tail.format(A,P)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(A,P){if(A instanceof g)o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,A,P);else{var F=P==null?this.length():P.offset(this),T=this.split(F);T.parent.insertBefore(A,T)}}},{key:"optimize",value:function(A){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,A);var P=this.next;P!=null&&P.prev===this&&P.statics.blotName===this.statics.blotName&&P.domNode.tagName===this.domNode.tagName&&P.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(P.moveChildren(this),P.remove())}},{key:"replace",value:function(A){if(A.statics.blotName!==this.statics.blotName){var P=l.default.create(this.statics.defaultChild);A.moveChildren(P),this.appendChild(P)}o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replace",this).call(this,A)}}]),E}(f.default);b.blotName="list",b.scope=l.default.Scope.BLOCK_BLOT,b.tagName=["OL","UL"],b.defaultChild="list-item",b.allowedChildren=[g],n.ListItem=g,n.default=b},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(56),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function u(f,c){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:f}function h(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);f.prototype=Object.create(c&&c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(f,c):f.__proto__=c)}var d=function(f){h(c,f);function c(){return l(this,c),u(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return c}(o.default);d.blotName="italic",d.tagName=["EM","I"],n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,w){for(var p=0;p<w.length;p++){var g=w[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,w,p){return w&&y(v.prototype,w),p&&y(v,p),v}}(),o=function y(v,w,p){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,w);if(g===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:y(b,w,p)}else{if("value"in g)return g.value;var _=g.get;return _===void 0?void 0:_.call(p)}},s=i(6),l=u(s);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var c=function(y){f(v,y);function v(){return h(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,null,[{key:"create",value:function(p){return p==="super"?document.createElement("sup"):p==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,p)}},{key:"formats",value:function(p){if(p.tagName==="SUB")return"sub";if(p.tagName==="SUP")return"super"}}]),v}(l.default);c.blotName="script",c.tagName=["SUB","SUP"],n.default=c},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(6),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function u(f,c){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:f}function h(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);f.prototype=Object.create(c&&c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(f,c):f.__proto__=c)}var d=function(f){h(c,f);function c(){return l(this,c),u(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return c}(o.default);d.blotName="strike",d.tagName="S",n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(6),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function u(f,c){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:f}function h(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);f.prototype=Object.create(c&&c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(f,c):f.__proto__=c)}var d=function(f){h(c,f);function c(){return l(this,c),u(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return c}(o.default);d.blotName="underline",d.tagName="U",n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(p,g){for(var b=0;b<g.length;b++){var _=g[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,_.key,_)}}return function(p,g,b){return g&&w(p.prototype,g),b&&w(p,b),p}}(),o=function w(p,g,b){p===null&&(p=Function.prototype);var _=Object.getOwnPropertyDescriptor(p,g);if(_===void 0){var E=Object.getPrototypeOf(p);return E===null?void 0:w(E,g,b)}else{if("value"in _)return _.value;var C=_.get;return C===void 0?void 0:C.call(b)}},s=i(0),l=h(s),u=i(27);function h(w){return w&&w.__esModule?w:{default:w}}function d(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}function f(w,p){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:w}function c(w,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);w.prototype=Object.create(p&&p.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(w,p):w.__proto__=p)}var y=["alt","height","width"],v=function(w){c(p,w);function p(){return d(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return a(p,[{key:"format",value:function(b,_){y.indexOf(b)>-1?_?this.domNode.setAttribute(b,_):this.domNode.removeAttribute(b):o(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"format",this).call(this,b,_)}}],[{key:"create",value:function(b){var _=o(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this,b);return typeof b=="string"&&_.setAttribute("src",this.sanitize(b)),_}},{key:"formats",value:function(b){return y.reduce(function(_,E){return b.hasAttribute(E)&&(_[E]=b.getAttribute(E)),_},{})}},{key:"match",value:function(b){return/\.(jpe?g|gif|png)$/.test(b)||/^data:image\/.+;base64/.test(b)}},{key:"sanitize",value:function(b){return(0,u.sanitize)(b,["http","https","data"])?b:"//:0"}},{key:"value",value:function(b){return b.getAttribute("src")}}]),p}(l.default.Embed);v.blotName="image",v.tagName="IMG",n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(p,g){for(var b=0;b<g.length;b++){var _=g[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,_.key,_)}}return function(p,g,b){return g&&w(p.prototype,g),b&&w(p,b),p}}(),o=function w(p,g,b){p===null&&(p=Function.prototype);var _=Object.getOwnPropertyDescriptor(p,g);if(_===void 0){var E=Object.getPrototypeOf(p);return E===null?void 0:w(E,g,b)}else{if("value"in _)return _.value;var C=_.get;return C===void 0?void 0:C.call(b)}},s=i(4),l=i(27),u=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function d(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}function f(w,p){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:w}function c(w,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);w.prototype=Object.create(p&&p.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(w,p):w.__proto__=p)}var y=["height","width"],v=function(w){c(p,w);function p(){return d(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return a(p,[{key:"format",value:function(b,_){y.indexOf(b)>-1?_?this.domNode.setAttribute(b,_):this.domNode.removeAttribute(b):o(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"format",this).call(this,b,_)}}],[{key:"create",value:function(b){var _=o(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this,b);return _.setAttribute("frameborder","0"),_.setAttribute("allowfullscreen",!0),_.setAttribute("src",this.sanitize(b)),_}},{key:"formats",value:function(b){return y.reduce(function(_,E){return b.hasAttribute(E)&&(_[E]=b.getAttribute(E)),_},{})}},{key:"sanitize",value:function(b){return u.default.sanitize(b)}},{key:"value",value:function(b){return b.getAttribute("src")}}]),p}(s.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var a=function(){function b(_,E){for(var C=0;C<E.length;C++){var A=E[C];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(_,A.key,A)}}return function(_,E,C){return E&&b(_.prototype,E),C&&b(_,C),_}}(),o=function b(_,E,C){_===null&&(_=Function.prototype);var A=Object.getOwnPropertyDescriptor(_,E);if(A===void 0){var P=Object.getPrototypeOf(_);return P===null?void 0:b(P,E,C)}else{if("value"in A)return A.value;var F=A.get;return F===void 0?void 0:F.call(C)}},s=i(35),l=c(s),u=i(5),h=c(u),d=i(9),f=c(d);function c(b){return b&&b.__esModule?b:{default:b}}function y(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}function v(b,_){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:b}function w(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);b.prototype=Object.create(_&&_.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(b,_):b.__proto__=_)}var p=function(b){w(_,b);function _(){return y(this,_),v(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return a(_,null,[{key:"create",value:function(C){var A=o(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,C);return typeof C=="string"&&(window.katex.render(C,A,{throwOnError:!1,errorColor:"#f00"}),A.setAttribute("data-value",C)),A}},{key:"value",value:function(C){return C.getAttribute("data-value")}}]),_}(l.default);p.blotName="formula",p.className="ql-formula",p.tagName="SPAN";var g=function(b){w(_,b),a(_,null,[{key:"register",value:function(){h.default.register(p,!0)}}]);function _(){y(this,_);var E=v(this,(_.__proto__||Object.getPrototypeOf(_)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return E}return _}(f.default);n.FormulaBlot=p,n.default=g},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var a=function(){function C(A,P){for(var F=0;F<P.length;F++){var T=P[F];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(A,T.key,T)}}return function(A,P,F){return P&&C(A.prototype,P),F&&C(A,F),A}}(),o=function C(A,P,F){A===null&&(A=Function.prototype);var T=Object.getOwnPropertyDescriptor(A,P);if(T===void 0){var k=Object.getPrototypeOf(A);return k===null?void 0:C(k,P,F)}else{if("value"in T)return T.value;var j=T.get;return j===void 0?void 0:j.call(F)}},s=i(0),l=v(s),u=i(5),h=v(u),d=i(9),f=v(d),c=i(13),y=v(c);function v(C){return C&&C.__esModule?C:{default:C}}function w(C,A){if(!(C instanceof A))throw new TypeError("Cannot call a class as a function")}function p(C,A){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:C}function g(C,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);C.prototype=Object.create(A&&A.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(C,A):C.__proto__=A)}var b=function(C){g(A,C);function A(){return w(this,A),p(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return a(A,[{key:"replaceWith",value:function(F){this.domNode.textContent=this.domNode.textContent,this.attach(),o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,F)}},{key:"highlight",value:function(F){var T=this.domNode.textContent;this.cachedText!==T&&((T.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=F(T),this.domNode.normalize(),this.attach()),this.cachedText=T)}}]),A}(y.default);b.className="ql-syntax";var _=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),E=function(C){g(A,C),a(A,null,[{key:"register",value:function(){h.default.register(_,!0),h.default.register(b,!0)}}]);function A(P,F){w(this,A);var T=p(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,P,F));if(typeof T.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var k=null;return T.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(k),k=setTimeout(function(){T.highlight(),k=null},T.options.interval)}),T.highlight(),T}return a(A,[{key:"highlight",value:function(){var F=this;if(!this.quill.selection.composing){this.quill.update(h.default.sources.USER);var T=this.quill.getSelection();this.quill.scroll.descendants(b).forEach(function(k){k.highlight(F.options.highlight)}),this.quill.update(h.default.sources.SILENT),T!=null&&this.quill.setSelection(T,h.default.sources.SILENT)}}}]),A}(f.default);E.DEFAULTS={highlight:function(){return window.hljs==null?null:function(C){var A=window.hljs.highlightAuto(C);return A.value}}(),interval:1e3},n.CodeBlock=b,n.CodeToken=_,n.default=E},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var a=function A(P,F,T){P===null&&(P=Function.prototype);var k=Object.getOwnPropertyDescriptor(P,F);if(k===void 0){var j=Object.getPrototypeOf(P);return j===null?void 0:A(j,F,T)}else{if("value"in k)return k.value;var I=k.get;return I===void 0?void 0:I.call(T)}},o=function(){function A(P,F){for(var T=0;T<F.length;T++){var k=F[T];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(P,k.key,k)}}return function(P,F,T){return F&&A(P.prototype,F),T&&A(P,T),P}}(),s=i(3),l=w(s),u=i(8),h=w(u),d=i(43),f=w(d),c=i(15),y=i(41),v=w(y);function w(A){return A&&A.__esModule?A:{default:A}}function p(A,P){if(!(A instanceof P))throw new TypeError("Cannot call a class as a function")}function g(A,P){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:A}function b(A,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);A.prototype=Object.create(P&&P.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(A,P):A.__proto__=P)}var _=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],E=function(A){b(P,A);function P(F,T){p(this,P),T.modules.toolbar!=null&&T.modules.toolbar.container==null&&(T.modules.toolbar.container=_);var k=g(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,F,T));return k.quill.container.classList.add("ql-bubble"),k}return o(P,[{key:"extendToolbar",value:function(T){this.tooltip=new C(this.quill,this.options.bounds),this.tooltip.root.appendChild(T.container),this.buildButtons([].slice.call(T.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(T.container.querySelectorAll("select")),v.default)}}]),P}(f.default);E.DEFAULTS=(0,l.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(P){P?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var C=function(A){b(P,A);function P(F,T){p(this,P);var k=g(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,F,T));return k.quill.on(h.default.events.EDITOR_CHANGE,function(j,I,R,$){if(j===h.default.events.SELECTION_CHANGE)if(I!=null&&I.length>0&&$===h.default.sources.USER){k.show(),k.root.style.left="0px",k.root.style.width="",k.root.style.width=k.root.offsetWidth+"px";var Z=k.quill.getLines(I.index,I.length);if(Z.length===1)k.position(k.quill.getBounds(I));else{var Q=Z[Z.length-1],X=k.quill.getIndex(Q),G=Math.min(Q.length()-1,I.index+I.length-X),H=k.quill.getBounds(new c.Range(X,G));k.position(H)}}else document.activeElement!==k.textbox&&k.quill.hasFocus()&&k.hide()}),k}return o(P,[{key:"listen",value:function(){var T=this;a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){T.root.classList.remove("ql-editing")}),this.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!T.root.classList.contains("ql-hidden")){var k=T.quill.getSelection();k!=null&&T.position(T.quill.getBounds(k))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(T){var k=a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"position",this).call(this,T),j=this.root.querySelector(".ql-tooltip-arrow");if(j.style.marginLeft="",k===0)return k;j.style.marginLeft=-1*k-j.offsetWidth/2+"px"}}]),P}(d.BaseTooltip);C.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=C,n.default=E},function(r,n,i){r.exports=i(63)}]).default})})(E3);var p9=E3.exports,m9=li&&li.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qh=li&&li.__assign||function(){return qh=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qh.apply(this,arguments)},g9=li&&li.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n},Ap=li&&li.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},oa=Ap(te),v9=Ap(op),lc=Ap(h9),S5=Ap(p9),y9=function(t){m9(e,t);function e(r){var n=t.call(this,r)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(a,o,s,l){var u,h,d,f;a==="text-change"?(h=(u=n).onEditorChangeText)===null||h===void 0||h.call(u,n.editor.root.innerHTML,o,l,n.unprivilegedEditor):a==="selection-change"&&((f=(d=n).onEditorChangeSelection)===null||f===void 0||f.call(d,o,l,n.unprivilegedEditor))};var i=n.isControlled()?r.value:r.defaultValue;return n.value=i??"",n}return e.prototype.validateProps=function(r){var n;if(oa.default.Children.count(r.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(oa.default.Children.count(r.children)){var i=oa.default.Children.only(r.children);if(((n=i)===null||n===void 0?void 0:n.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&r.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(r,n){var i=this,a;if(this.validateProps(r),!this.editor||this.state.generation!==n.generation)return!0;if("value"in r){var o=this.getEditorContents(),s=(a=r.value,a??"");this.isEqualValue(s,o)||this.setEditorContents(this.editor,s)}return r.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,r.readOnly),g9(this.cleanProps,this.dirtyProps).some(function(l){return!lc.default(r[l],i.props[l])})},e.prototype.shouldComponentRegenerate=function(r){var n=this;return this.dirtyProps.some(function(i){return!lc.default(r[i],n.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(r,n){var i=this;if(this.editor&&this.shouldComponentRegenerate(r)){var a=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:a,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){var s=this.regenerationSnapshot,a=s.delta,l=s.selection;delete this.regenerationSnapshot,this.instantiateEditor();var u=this.editor;u.setContents(a),k5(function(){return i.setEditorSelection(u,l)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(r,n){var i=new S5.default(r,n);return n.tabIndex!=null&&this.setEditorTabIndex(i,n.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(r){this.unprivilegedEditor=this.makeUnprivilegedEditor(r),r.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(r){r.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(r){return r&&r.ops},e.prototype.isEqualValue=function(r,n){return this.isDelta(r)&&this.isDelta(n)?lc.default(r.ops,n.ops):lc.default(r,n)},e.prototype.setEditorContents=function(r,n){var i=this;this.value=n;var a=this.getEditorSelection();typeof n=="string"?r.setContents(r.clipboard.convert(n)):r.setContents(n),k5(function(){return i.setEditorSelection(r,a)})},e.prototype.setEditorSelection=function(r,n){if(this.selection=n,n){var i=r.getLength();n.index=Math.max(0,Math.min(n.index,i-1)),n.length=Math.max(0,Math.min(n.length,i-1-n.index)),r.setSelection(n)}},e.prototype.setEditorTabIndex=function(r,n){var i,a;!((a=(i=r)===null||i===void 0?void 0:i.scroll)===null||a===void 0)&&a.domNode&&(r.scroll.domNode.tabIndex=n)},e.prototype.setEditorReadOnly=function(r,n){n?r.disable():r.enable()},e.prototype.makeUnprivilegedEditor=function(r){var n=r;return{getHTML:function(){return n.root.innerHTML},getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var r=v9.default.findDOMNode(this.editingArea);if(!r)throw new Error("Cannot find element for editing area");if(r.nodeType===3)throw new Error("Editing area cannot be a text node");return r},e.prototype.renderEditingArea=function(){var r=this,n=this.props,i=n.children,a=n.preserveWhitespace,o=this.state.generation,s={key:o,ref:function(l){r.editingArea=l}};return oa.default.Children.count(i)?oa.default.cloneElement(oa.default.Children.only(i),s):a?oa.default.createElement("pre",qh({},s)):oa.default.createElement("div",qh({},s))},e.prototype.render=function(){var r;return oa.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(r=this.props.className,r??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(r,n,i,a){var o,s;if(this.editor){var l=this.isDelta(this.value)?a.getContents():a.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=l,(s=(o=this.props).onChange)===null||s===void 0||s.call(o,r,n,i,a))}},e.prototype.onEditorChangeSelection=function(r,n,i){var a,o,s,l,u,h;if(this.editor){var d=this.getEditorSelection(),f=!d&&r,c=d&&!r;lc.default(r,d)||(this.selection=r,(o=(a=this.props).onChangeSelection)===null||o===void 0||o.call(a,r,n,i),f?(l=(s=this.props).onFocus)===null||l===void 0||l.call(s,r,n,i):c&&((h=(u=this.props).onBlur)===null||h===void 0||h.call(u,d,n,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=S5.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(oa.default.Component);function k5(t){Promise.resolve().then(t)}var w9=y9;const A3=$h(w9),b9="diary_drafts_db",Io="drafts",x9=1;function kv(){return new Promise((t,e)=>{const r=indexedDB.open(b9,x9);r.onerror=n=>{e("Database error: "+n.target.error)},r.onsuccess=n=>{t(n.target.result)},r.onupgradeneeded=n=>{const i=n.target.result;i.objectStoreNames.contains(Io)||i.createObjectStore(Io,{keyPath:"id"})}})}async function _9(t,e,r){const n=await kv();return new Promise((i,a)=>{const s=n.transaction([Io],"readwrite").objectStore(Io),l={id:t,encryptedData:e,iv:r,timestamp:Date.now()},u=s.put(l);u.onsuccess=()=>i(),u.onerror=()=>a("Save draft failed")})}async function S9(t){const e=await kv();return new Promise((r,n)=>{const o=e.transaction([Io],"readonly").objectStore(Io).get(t);o.onsuccess=()=>r(o.result),o.onerror=()=>n("Get draft failed")})}async function k9(t){const e=await kv();return new Promise((r,n)=>{const o=e.transaction([Io],"readwrite").objectStore(Io).delete(t);o.onsuccess=()=>r(),o.onerror=()=>n("Delete draft failed")})}const ja=A3.Quill;if(ja){const t=ja.import("blots/block/embed");class e extends t{static create(l){var f;const u=super.create(),h=document.createElement("img");h.setAttribute("src",l.src),l.alt&&h.setAttribute("alt",l.alt),l.className&&h.setAttribute("class",l.className),(f=l.dataset)!=null&&f.secureMetadata&&h.setAttribute("data-secure-metadata",l.dataset.secureMetadata),l.style&&h.setAttribute("style",l.style);const d=document.createElement("figcaption");return d.innerText=l.caption||"",d.setAttribute("contenteditable","true"),u.appendChild(h),u.appendChild(d),u}static value(l){const u=l.querySelector("img"),h=l.querySelector("figcaption");return{src:u==null?void 0:u.getAttribute("src"),alt:u==null?void 0:u.getAttribute("alt"),className:u==null?void 0:u.getAttribute("class"),style:u==null?void 0:u.getAttribute("style"),caption:h==null?void 0:h.innerText,dataset:{secureMetadata:u==null?void 0:u.getAttribute("data-secure-metadata")}}}}e.blotName="secure-image",e.tagName="figure",e.className="diary-image-figure",ja.register(e,!0);const r=ja.import("parchment"),n=new r.Attributor.Style("width","width"),i=new r.Attributor.Style("float","float"),a=new r.Attributor.Style("margin","margin");ja.register(n,!0),ja.register(i,!0),ja.register(a,!0);const o=ja.import("attributors/style/align");ja.register(o,!0)}const N9={serif:"font-serif",sans:"font-sans",mono:"font-mono"},E9=te.forwardRef(({entry:t,onSave:e,onWordCountChange:r,onCharacterCountChange:n,editorFont:i,onImageDrop:a},o)=>{const[s,l]=te.useState(""),[u,h]=te.useState(""),[d,f]=te.useState(new Date),[c,y]=te.useState(!1),[v,w]=te.useState(""),[p,g]=te.useState(""),[b,_]=te.useState(!1),[E,C]=te.useState(!1),A=te.useRef(null),P=te.useRef("INITIAL_MOUNT"),F=te.useRef(null),{addToast:T}=mp(),{key:k,encryptBinary:j,decryptBinary:I}=Os(),R=p6(({currentLocation:B,nextLocation:L})=>b&&B.pathname!==L.pathname);te.useEffect(()=>{R.state==="blocked"&&C(!0)},[R]),te.useEffect(()=>{const B=L=>{b&&(L.preventDefault(),L.returnValue="")};return window.addEventListener("beforeunload",B),()=>window.removeEventListener("beforeunload",B)},[b]);const $=te.useCallback(async(B,L)=>{if(!k||!B.includes("secure-diary-image"))return;const z=L.root.querySelectorAll("img.secure-diary-image");for(let q=0;q<z.length;q++){const U=z[q],K=U.getAttribute("src"),ne=U.getAttribute("data-secure-metadata")||U.getAttribute("alt");if(!(K!=null&&K.startsWith("blob:")||!ne))try{const ie=JSON.parse(ne);if(ie&&ie.path&&ie.iv){U.style.opacity="0.5";const{data:he,error:ye}=await Kt.storage.from("diary-images").createSignedUrl(ie.path,60);if(ye)throw ye;const Oe=await fetch(he.signedUrl);if(!Oe.ok)throw new Error(`Failed to fetch image blob: ${Oe.status}`);const Le=await Oe.arrayBuffer(),He=await I(k,Le,ie.iv),_e=new Blob([He],{type:"image/webp"}),se=URL.createObjectURL(_e);U.src=se,U.style.opacity="1"}}catch(ie){console.error("Failed to decrypt image in editor",ie)}}},[k,I]);te.useEffect(()=>{const B=(t==null?void 0:t.id)||"draft";if(P.current===B)return;P.current=B,(async()=>{let D="",z="",q=new Date;t?(D=t.title,z=t.content,q=new Date(t.created_at)):(D="Today's diary entry...",z="");try{const K=await S9(B);if(K&&k){const ne=t?new Date(t.updated_at||t.created_at).getTime():0;if(K.timestamp>ne){console.log("Restoring from auto-save draft...");const ie=await I(k,await K.encryptedData.arrayBuffer(),K.iv),he=new TextDecoder().decode(ie),ye=JSON.parse(he);ye.title!==void 0&&(D=ye.title),ye.content!==void 0&&(z=ye.content),T("Restored unsaved draft","success")}}}catch(K){console.error("Failed to restore draft",K)}l(D),h(z),f(q),w(D),g(z),_(!1);const U=z.includes("secure-diary-image");y(U),setTimeout(async()=>{A.current&&U&&(await $(z,A.current.getEditor()),y(!1))},100)})()},[t,$,k,I,T]),te.useEffect(()=>{const B=u.replace(/<[^>]*>?/gm,""),L=B.trim().split(/\s+/).filter(Boolean),D=L.length===1&&L[0]===""?0:L.length;r(D),n(B.length)},[u,r,n]),te.useEffect(()=>{_(s!==v||u!==p)},[s,u,v,p]),te.useEffect(()=>{if(!(!b||!k))return F.current&&clearTimeout(F.current),F.current=setTimeout(async()=>{const B=(t==null?void 0:t.id)||"draft";try{const L=JSON.stringify({title:s,content:u}),D=new TextEncoder().encode(L),{iv:z,data:q}=await j(k,D.buffer),U=new Blob([q],{type:"application/octet-stream"});await _9(B,U,z),console.log("Auto-saved draft to IndexedDB")}catch(L){console.error("Auto-save failed",L)}},2e3),()=>{F.current&&clearTimeout(F.current)}},[s,u,b,k,j,t]);const Z=te.useCallback(async()=>{const B=!u||u.replace(/<(.|\n)*?>/g,"").trim().length===0;if(s.trim()===""||B){T("Please provide a title and some content for your entry.","error");return}e({...t||{},title:s,content:u,created_at:d.toISOString(),tags:t==null?void 0:t.tags,mood:t==null?void 0:t.mood});const D=(t==null?void 0:t.id)||"draft";await k9(D),w(s),g(u),_(!1)},[s,u,d,t,e,T]);te.useImperativeHandle(o,()=>({save:Z,getEditor:()=>{var B;return(B=A.current)==null?void 0:B.getEditor()}}),[Z]);const Q=te.useMemo(()=>({toolbar:!1}),[]),X=N9[i],G=B=>{B.preventDefault(),B.stopPropagation()},H=B=>{if(B.preventDefault(),B.stopPropagation(),B.dataTransfer.files&&B.dataTransfer.files.length>0){const L=B.dataTransfer.files[0];L.type.startsWith("image/")&&a&&a(L)}};return x.jsxs("div",{className:`h-full flex flex-col paper-canvas rounded-lg overflow-hidden ${X}`,onDragOver:G,onDrop:H,children:[x.jsx("div",{className:"p-4 sm:p-6 md:px-8 border-b border-slate-200/50 dark:border-slate-700/50 flex-shrink-0",children:x.jsx("input",{type:"text",value:s,onChange:B=>l(B.target.value),className:"w-full text-3xl font-bold bg-transparent focus:outline-none focus:ring-0 border-none p-0 text-slate-800 dark:text-slate-100 placeholder:text-slate-400",placeholder:"Today's diary entry..."})}),x.jsxs("div",{className:"flex-grow overflow-y-auto relative",children:[c&&x.jsxs("div",{className:"absolute inset-0 z-10 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm p-8 space-y-6 animate-fade-in",children:[x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4 animate-pulse"}),x.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full animate-pulse"}),x.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-5/6 animate-pulse"})]}),x.jsx("div",{className:"h-64 bg-slate-200 dark:bg-slate-700 rounded-lg w-full animate-pulse flex items-center justify-center",children:x.jsx("svg",{className:"w-12 h-12 text-slate-300 dark:text-slate-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full animate-pulse"}),x.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-4/5 animate-pulse"})]})]}),x.jsx(A3,{ref:A,theme:"snow",value:u,onChange:h,className:`prose-editor transition-opacity duration-500 ${c?"opacity-0":"opacity-100"}`,placeholder:"Start writing here...",modules:Q})]}),R.state==="blocked"&&x.jsx(d3,{isOpen:E,title:"Unsaved Changes",message:"You have unsaved changes in your diary entry. Are you sure you want to leave? Your changes will be discarded.",confirmLabel:"Discard Changes",cancelLabel:"Stay Here",type:"warning",onConfirm:()=>{R.proceed(),C(!1)},onCancel:()=>{R.reset(),C(!1)}})]})}),A9=({onRecordingComplete:t,recordings:e,savedAudios:r=[],onDeleteRecording:n,onDeleteSaved:i})=>{const[a,o]=te.useState(!1),[s,l]=te.useState(0),u=te.useRef(null),h=te.useRef([]),d=te.useRef(null),f=e.length+r.length,c=f>=5;te.useEffect(()=>()=>{d.current&&clearInterval(d.current)},[]);const y=async()=>{if(!c)try{const p=await navigator.mediaDevices.getUserMedia({audio:!0});let g="audio/webm";MediaRecorder.isTypeSupported("audio/mp4")?g="audio/mp4":MediaRecorder.isTypeSupported("audio/webm;codecs=opus")&&(g="audio/webm;codecs=opus"),u.current=new MediaRecorder(p,{mimeType:g}),h.current=[],u.current.ondataavailable=b=>{b.data.size>0&&h.current.push(b.data)},u.current.onstop=()=>{var E;const b=((E=u.current)==null?void 0:E.mimeType)||g,_=new Blob(h.current,{type:b});t(_),h.current=[],p.getTracks().forEach(C=>C.stop())},u.current.start(),o(!0),l(0),d.current=window.setInterval(()=>{l(b=>b+1)},1e3)}catch(p){console.error("Error accessing microphone:",p),alert("Could not access microphone. Please check permissions.")}},v=()=>{u.current&&a&&(u.current.stop(),o(!1),d.current&&clearInterval(d.current))},w=p=>{const g=Math.floor(p/60),b=p%60;return`${g.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`};return x.jsxs("div",{className:"w-full space-y-3",children:[r.map((p,g)=>x.jsxs("div",{className:"w-full p-2 rounded-md bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800 flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"h-6 w-6 rounded-full bg-indigo-100 dark:bg-indigo-800 flex items-center justify-center text-indigo-600 dark:text-indigo-300",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})})}),x.jsxs("span",{className:"text-xs font-medium text-indigo-800 dark:text-indigo-300",children:["Saved Audio ",g+1]})]}),x.jsx("button",{onClick:()=>i(p.id),className:"p-1 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full transition-colors",title:"Delete Audio",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},p.id)),e.map((p,g)=>x.jsxs("div",{className:"w-full p-2 rounded-md bg-green-50 dark:bg-green-900/20 border border-green-100 dark:border-green-800 flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"h-6 w-6 rounded-full bg-green-100 dark:bg-green-800 flex items-center justify-center text-green-600 dark:text-green-300",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),x.jsxs("span",{className:"text-xs font-medium text-green-800 dark:text-green-300",children:["New Recording ",r.length+g+1]})]}),x.jsx("button",{onClick:()=>n(p.id),className:"p-1 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full transition-colors",title:"Delete Recording",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},p.id)),a?x.jsxs("div",{className:"w-full flex items-center justify-between p-2 rounded-md bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("div",{className:"relative flex h-3 w-3",children:[x.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),x.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}),x.jsx("span",{className:"text-sm font-mono font-medium text-red-600 dark:text-red-300",children:w(s)})]}),x.jsx("button",{onClick:v,className:"p-1.5 rounded-full bg-red-100 text-red-600 hover:bg-red-200 dark:bg-red-800 dark:text-red-200 dark:hover:bg-red-700 transition-colors",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})})})]}):x.jsxs("button",{onClick:y,disabled:c,className:"w-full flex items-center justify-center gap-3 p-2 rounded-md text-sm text-slate-700 dark:text-slate-300 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})}),x.jsx("span",{children:c?"Limit Reached (5)":"Record Audio"})]}),x.jsxs("div",{className:"text-xs text-slate-400 text-center",children:[f," / 5 recordings"]})]})},j9=["","","","","","","",""],O9=({entry:t,onUpdateEntry:e,editorFont:r,onFontChange:n,onImageUpload:i,isUploadingImage:a,selectedImageFormat:o,onImageFormatChange:s,availableJournals:l,onClose:u})=>{const h=typeof t=="object"?t.mood:void 0,d=typeof t=="object"?t.tags||[]:[],f=typeof t=="object"&&t.journal?t.journal:"Personal",c=(typeof t=="object"?t.tempAudioBlobs:[])||[],y=(typeof t=="object"?t.audio:[])||[],[v,w]=te.useState(d.join(", ")),p=te.useRef(null);te.useEffect(()=>{const T=v.split(",").map(I=>I.trim()).filter(Boolean),k=d;JSON.stringify(T)!==JSON.stringify(k)&&w(k.join(", "))},[d]);const g=()=>{var T;(T=p.current)==null||T.click()},b=T=>{var j;const k=(j=T.target.files)==null?void 0:j[0];k&&i(k),p.current&&(p.current.value="")},_=T=>{w(T);const k=T.split(",").map(j=>j.trim()).filter(Boolean);e({tags:k})},E=T=>{e({mood:T===h?void 0:T})},C=T=>{e({journal:T})},A=T=>{const k={id:crypto.randomUUID(),blob:T};e({tempAudioBlobs:[...c,k]})},P=T=>{const k=c.filter(j=>j.id!==T);e({tempAudioBlobs:k})},F=T=>{const k=y.filter(j=>j.id!==T);e({audio:k})};return x.jsxs("aside",{className:"w-64 h-full bg-white/80 dark:bg-slate-900/50 border-l border-[#EAE1D6] dark:border-slate-800 p-4 space-y-6 flex-shrink-0 overflow-y-auto relative",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Tools"}),u&&x.jsx("button",{onClick:u,className:"p-1 rounded-md text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 lg:hidden","aria-label":"Close Tools Panel",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),x.jsx("div",{className:"space-y-4",children:x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Journal"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"text",list:"journal-options",value:f,onChange:T=>C(T.target.value),className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded-md bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"Select or type..."}),x.jsxs("datalist",{id:"journal-options",children:[l.map(T=>x.jsx("option",{value:T},T)),!l.includes("Personal")&&x.jsx("option",{value:"Personal"}),!l.includes("Work")&&x.jsx("option",{value:"Work"}),!l.includes("Ideas")&&x.jsx("option",{value:"Ideas"})]})]})]})}),x.jsxs("div",{className:"space-y-4 pt-2 border-t border-slate-200 dark:border-slate-700",children:[x.jsx(A9,{onRecordingComplete:A,recordings:c,savedAudios:y.map(T=>({id:T.id,type:T.type})),onDeleteRecording:P,onDeleteSaved:F}),x.jsx("input",{type:"file",ref:p,onChange:b,className:"hidden",accept:"image/*"}),x.jsx("button",{onClick:g,disabled:a,className:"w-full flex items-center justify-center gap-3 p-2 rounded-md text-sm text-slate-700 dark:text-slate-300 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:a?x.jsxs(x.Fragment,{children:[x.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),x.jsx("span",{children:"Uploading..."})]}):x.jsxs(x.Fragment,{children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),x.jsx("span",{children:"Insert Image"})]})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Font Style"}),x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsx("button",{onClick:()=>n("serif"),className:`w-full text-left p-2 rounded-md text-sm font-serif transition-colors ${r==="serif"?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Serif (Lora)"}),x.jsx("button",{onClick:()=>n("sans"),className:`w-full text-left p-2 rounded-md text-sm font-sans transition-colors ${r==="sans"?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Sans-Serif"}),x.jsx("button",{onClick:()=>n("mono"),className:`w-full text-left p-2 rounded-md text-sm font-mono transition-colors ${r==="mono"?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Monospace"})]})]})]}),o&&x.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6 space-y-4",children:[x.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Image Tools"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Caption"}),x.jsx("input",{type:"text",value:o.caption||"",onChange:T=>s({caption:T.target.value}),placeholder:"Add a caption...",className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded-md bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),x.jsx("div",{className:"grid grid-cols-4 gap-1",children:["25%","50%","75%","100%"].map(T=>x.jsx("button",{onClick:()=>s({width:T}),className:`p-2 text-xs rounded-md ${o.width===T?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:T},T))}),x.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[x.jsx("button",{onClick:()=>s({align:!1,float:"left",margin:"0.5em 1em 0.5em 0"}),className:`p-2 rounded-md flex justify-center ${o.float==="left"?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M2 5a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zM2 9a1 1 0 011-1h5a1 1 0 110 2H3a1 1 0 01-1-1zm7 4a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z",clipRule:"evenodd"})})}),x.jsx("button",{onClick:()=>s({align:"center",float:!1,margin:!1}),className:`p-2 rounded-md flex justify-center ${o.align==="center"?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M2 5a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zM2 9a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zm1 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),x.jsx("button",{onClick:()=>s({align:!1,float:"right",margin:"0.5em 0 0.5em 1em"}),className:`p-2 rounded-md flex justify-center ${o.float==="right"?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M2 5a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zm0 4a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zm7 4a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z",clipRule:"evenodd"})})})]})]}),x.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6 space-y-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Mood"}),x.jsx("div",{className:"grid grid-cols-4 gap-2",children:j9.map(T=>x.jsx("button",{type:"button",onClick:()=>E(T),className:`text-2xl p-2 rounded-md transition-all ${h===T?"bg-indigo-100 dark:bg-indigo-500/50 scale-110":"hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:T},T))})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Tags"}),x.jsx("textarea",{value:v,onChange:T=>_(T.target.value),placeholder:"travel, work...",className:"w-full h-20 p-2 text-sm rounded-md bg-slate-100 dark:bg-slate-800 border-transparent focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]})]})},L9=({wordCount:t,characterCount:e,saveStatus:r})=>{const n={encrypting:{text:"Encrypting...",classes:"text-yellow-600 dark:text-yellow-400"},synced:{text:"Synced",classes:"text-green-600 dark:text-green-400"},error:{text:"Save Error",classes:"text-red-600 dark:text-red-400"}};return x.jsx("footer",{className:"bg-white/80 dark:bg-slate-900/50 backdrop-blur-sm border-t border-[#EAE1D6] dark:border-slate-800 h-10 flex-shrink-0",children:x.jsxs("div",{className:"h-full flex items-center justify-between px-6 text-sm text-slate-500 dark:text-slate-400",children:[x.jsx("div",{children:x.jsxs("span",{children:[t," words / ",e," characters"]})}),x.jsx("div",{className:`font-semibold ${n[r].classes}`,children:n[r].text})]})})},P9=(t,e=1200,r=.8)=>new Promise((n,i)=>{const a=new Image,o=URL.createObjectURL(t);a.src=o,a.onload=()=>{URL.revokeObjectURL(o);let s=a.width,l=a.height;s>e&&(l=Math.round(l*e/s),s=e);const u=document.createElement("canvas");u.width=s,u.height=l;const h=u.getContext("2d");if(!h){i(new Error("Could not get canvas context"));return}h.drawImage(a,0,0,s,l),u.toBlob(d=>{d?n({blob:d,extension:"webp"}):i(new Error("Image compression failed"))},"image/webp",r)},a.onerror=s=>{URL.revokeObjectURL(o),i(s)}}),T9="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",N5=()=>{const{id:t}=a4(),{entries:e,saveEntry:r,loadEntryContent:n,key:i,encryptBinary:a,session:o,uniqueJournals:s,registerSaveHandler:l,isToolsPanelVisible:u,setToolsPanelVisible:h}=au(),[d,f]=te.useState(null),[c,y]=te.useState(0),[v,w]=te.useState(0),[p,g]=te.useState("serif"),[b,_]=te.useState(!1),[E,C]=te.useState(null),A=te.useRef(null);te.useEffect(()=>(l(()=>{A.current&&A.current.save()}),()=>l(()=>{})),[l]),te.useEffect(()=>{if(!t)f("new");else{const T=e.find(k=>k.id===t);T&&(f(T),!T.isDecrypted&&!T.isLoading&&n(t))}},[t,e,n]),te.useEffect(()=>{if(!A.current||!d)return;const T=A.current.getEditor();if(!T)return;const k=j=>{var I;if(j&&j.length===0){const[R]=T.getLeaf(j.index);if(R&&(R.statics.blotName==="secure-image"||R.statics.blotName==="image")){const $=T.getFormat(j.index,1),Z=R.formats();C({width:$.width,align:$.align,float:$.float,caption:(I=Z["secure-image"])==null?void 0:I.caption})}else C(null)}else j||C(null)};return T.on("selection-change",k),()=>{T.off("selection-change",k)}},[d]);const P=async T=>{var j;const k=(j=A.current)==null?void 0:j.getEditor();if(!(!k||!i)){_(!0);try{const{blob:I}=await P9(T),R=await I.arrayBuffer(),{iv:$,data:Z}=await a(i,R),Q=`${o.user.id}/${Date.now()}.bin`,X=new Blob([Z],{type:"application/octet-stream"}),{error:G}=await Kt.storage.from("diary-images").upload(Q,X,{contentType:"application/octet-stream",upsert:!1});if(G)throw G;const H=k.getSelection(!0)||{index:k.getLength(),length:0},B=JSON.stringify({path:Q,iv:$});k.insertEmbed(H.index,"secure-image",{src:T9,alt:"Secure Image",className:"secure-diary-image",dataset:{secureMetadata:B},caption:""},"user"),k.setSelection(H.index+1,0,"user"),setTimeout(()=>{var L,D;try{const z=(D=(L=A.current)==null?void 0:L.getEditor())==null?void 0:D.root;if(!z)return;const q=z.querySelectorAll("img.secure-diary-image");let U=null;for(let K=0;K<q.length;K++){const ne=q[K];if(ne.getAttribute("data-secure-metadata")===B){U=ne;break}}if(U){const K=URL.createObjectURL(I);U.src=K,U.style.opacity="1"}}catch(z){console.error("Preview error:",z)}},50)}catch(I){console.error("Error uploading image:",I)}finally{_(!1)}}},F=T=>{var I;const k=(I=A.current)==null?void 0:I.getEditor();if(!k)return;const j=k.getSelection();if(j){if(T.caption!==void 0){const[R]=k.getLeaf(j.index);if(R&&R.statics.blotName==="secure-image"){const $=R.value();R.replaceWith("secure-image",{...$,caption:T.caption})}}else Object.keys(T).forEach(R=>{R!=="caption"&&k.format(R,T[R],"user")});setTimeout(()=>{const R=k.getSelection();R&&k.emitter.emit("selection-change",R,R,"user")},0)}};return d?x.jsxs("div",{className:"h-full flex flex-row relative",children:[x.jsxs("div",{className:"flex-1 h-full overflow-hidden flex flex-col",children:[x.jsx(E9,{ref:A,entry:d==="new"?void 0:d,onSave:r,onWordCountChange:y,onCharacterCountChange:w,editorFont:p,onImageDrop:P},t||"new"),x.jsx(L9,{wordCount:c,characterCount:v,saveStatus:"synced"})]}),x.jsx("div",{className:`
             fixed inset-y-0 right-0 z-30 w-72 bg-white dark:bg-slate-900 shadow-xl transform transition-transform duration-300 ease-in-out lg:static lg:transform-none lg:shadow-none lg:w-64 lg:border-l border-slate-200 dark:border-slate-800
             ${u?"translate-x-0":"translate-x-full lg:translate-x-0"}
         `,children:x.jsx(O9,{entry:d,onUpdateEntry:T=>{f(d==="new"?k=>({id:"",owner_id:"",title:"",content:"",created_at:new Date().toISOString(),...typeof k=="object"?k:{},...T}):k=>({...k,...T}))},editorFont:p,onFontChange:g,onImageUpload:P,isUploadingImage:b,selectedImageFormat:E,onImageFormatChange:F,availableJournals:s,onClose:()=>h(!1)})}),u&&x.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-20 lg:hidden",onClick:()=>h(!1)})]}):x.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading editor..."})},C9=({children:t,session:e})=>{const r=Qi();return e?x.jsx(x.Fragment,{children:t}):x.jsx(hg,{to:"/login",state:{from:r},replace:!0})},R9=()=>{const[t,e]=te.useState(null),[r,n]=te.useState(!0),[i,a]=te.useState(()=>localStorage.getItem("theme")||"light");te.useEffect(()=>{Kt.auth.getSession().then(({data:{session:u}})=>{e(u),n(!1)});const{data:{subscription:l}}=Kt.auth.onAuthStateChange((u,h)=>{e(h)});return()=>l.unsubscribe()},[]),te.useEffect(()=>{const l=window.document.documentElement;i==="dark"?l.classList.add("dark"):l.classList.remove("dark"),localStorage.setItem("theme",i)},[i]),te.useEffect(()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/diary/sw.js",{scope:"/diary/"}).then(l=>{console.log("ServiceWorker registration successful with scope: ",l.scope)}).catch(l=>{console.log("ServiceWorker registration failed: ",l)})})},[]);const o=()=>{a(l=>l==="light"?"dark":"light")},s=te.useMemo(()=>V6([{path:"/",element:t?x.jsx(hg,{to:"/app"}):x.jsx(Bj,{})},{path:"/login",element:t?x.jsx(hg,{to:"/app"}):x.jsx(Fj,{})},{path:"/privacy",element:x.jsx(Uj,{})},{path:"/terms",element:x.jsx(zj,{})},{path:"/app",element:x.jsx(C9,{session:t,children:x.jsx(OP,{session:t,theme:i,onToggleTheme:o})}),children:[{index:!0,element:x.jsx(IP,{})},{path:"calendar",element:x.jsx(MP,{})},{path:"search",element:x.jsx(UP,{})},{path:"profile",element:x.jsx(mT,{})},{path:"entry/:id",element:x.jsx(UT,{})},{path:"new",element:x.jsx(N5,{})},{path:"edit/:id",element:x.jsx(N5,{})}]},{path:"*",element:x.jsx(qj,{})}]),[t,i]);return r?x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:x.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Loading..."})}):x.jsx(Dj,{children:x.jsx(Yj,{children:x.jsx(nA,{router:s})})})},j3=document.getElementById("root");if(!j3)throw new Error("Could not find root element to mount to");const I9=gm.createRoot(j3);I9.render(x.jsx(PS.StrictMode,{children:x.jsx(R9,{})}));export{ir as _,li as c,$h as g};
