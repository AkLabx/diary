import fx from"compromise";import{BlobWriter as dx,ZipWriter as hx,TextReader as gm}from"@zip.js/zip.js";function px(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function E1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function gx(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var sy={exports:{}},Bd={},ly={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lc=Symbol.for("react.element"),mx=Symbol.for("react.portal"),vx=Symbol.for("react.fragment"),yx=Symbol.for("react.strict_mode"),wx=Symbol.for("react.profiler"),bx=Symbol.for("react.provider"),_x=Symbol.for("react.context"),xx=Symbol.for("react.forward_ref"),Sx=Symbol.for("react.suspense"),kx=Symbol.for("react.memo"),Ax=Symbol.for("react.lazy"),mm=Symbol.iterator;function Nx(t){return t===null||typeof t!="object"?null:(t=mm&&t[mm]||t["@@iterator"],typeof t=="function"?t:null)}var uy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cy=Object.assign,fy={};function vl(t,e,r){this.props=t,this.context=e,this.refs=fy,this.updater=r||uy}vl.prototype.isReactComponent={};vl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dy(){}dy.prototype=vl.prototype;function O1(t,e,r){this.props=t,this.context=e,this.refs=fy,this.updater=r||uy}var L1=O1.prototype=new dy;L1.constructor=O1;cy(L1,vl.prototype);L1.isPureReactComponent=!0;var vm=Array.isArray,hy=Object.prototype.hasOwnProperty,T1={current:null},py={key:!0,ref:!0,__self:!0,__source:!0};function gy(t,e,r){var n,i={},o=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)hy.call(e,n)&&!py.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:lc,type:t,key:o,ref:a,props:i,_owner:T1.current}}function Ex(t,e){return{$$typeof:lc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function P1(t){return typeof t=="object"&&t!==null&&t.$$typeof===lc}function Ox(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var ym=/\/+/g;function Zh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ox(""+t.key):e.toString(36)}function Mf(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case lc:case mx:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+Zh(a,0):n,vm(i)?(r="",t!=null&&(r=t.replace(ym,"$&/")+"/"),Mf(i,e,r,"",function(c){return c})):i!=null&&(P1(i)&&(i=Ex(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(ym,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",vm(t))for(var s=0;s<t.length;s++){o=t[s];var l=n+Zh(o,s);a+=Mf(o,e,r,l,i)}else if(l=Nx(t),typeof l=="function")for(t=l.call(t),s=0;!(o=t.next()).done;)o=o.value,l=n+Zh(o,s++),a+=Mf(o,e,r,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function rf(t,e,r){if(t==null)return t;var n=[],i=0;return Mf(t,n,"","",function(o){return e.call(r,o,i++)}),n}function Lx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nn={current:null},Ff={transition:null},Tx={ReactCurrentDispatcher:Nn,ReactCurrentBatchConfig:Ff,ReactCurrentOwner:T1};function my(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:rf,forEach:function(t,e,r){rf(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return rf(t,function(){e++}),e},toArray:function(t){return rf(t,function(e){return e})||[]},only:function(t){if(!P1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};kt.Component=vl;kt.Fragment=vx;kt.Profiler=wx;kt.PureComponent=O1;kt.StrictMode=yx;kt.Suspense=Sx;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tx;kt.act=my;kt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=cy({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=T1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)hy.call(e,l)&&!py.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];n.children=s}return{$$typeof:lc,type:t.type,key:i,ref:o,props:n,_owner:a}};kt.createContext=function(t){return t={$$typeof:_x,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bx,_context:t},t.Consumer=t};kt.createElement=gy;kt.createFactory=function(t){var e=gy.bind(null,t);return e.type=t,e};kt.createRef=function(){return{current:null}};kt.forwardRef=function(t){return{$$typeof:xx,render:t}};kt.isValidElement=P1;kt.lazy=function(t){return{$$typeof:Ax,_payload:{_status:-1,_result:t},_init:Lx}};kt.memo=function(t,e){return{$$typeof:kx,type:t,compare:e===void 0?null:e}};kt.startTransition=function(t){var e=Ff.transition;Ff.transition={};try{t()}finally{Ff.transition=e}};kt.unstable_act=my;kt.useCallback=function(t,e){return Nn.current.useCallback(t,e)};kt.useContext=function(t){return Nn.current.useContext(t)};kt.useDebugValue=function(){};kt.useDeferredValue=function(t){return Nn.current.useDeferredValue(t)};kt.useEffect=function(t,e){return Nn.current.useEffect(t,e)};kt.useId=function(){return Nn.current.useId()};kt.useImperativeHandle=function(t,e,r){return Nn.current.useImperativeHandle(t,e,r)};kt.useInsertionEffect=function(t,e){return Nn.current.useInsertionEffect(t,e)};kt.useLayoutEffect=function(t,e){return Nn.current.useLayoutEffect(t,e)};kt.useMemo=function(t,e){return Nn.current.useMemo(t,e)};kt.useReducer=function(t,e,r){return Nn.current.useReducer(t,e,r)};kt.useRef=function(t){return Nn.current.useRef(t)};kt.useState=function(t){return Nn.current.useState(t)};kt.useSyncExternalStore=function(t,e,r){return Nn.current.useSyncExternalStore(t,e,r)};kt.useTransition=function(){return Nn.current.useTransition()};kt.version="18.3.1";ly.exports=kt;var ke=ly.exports;const vy=E1(ke);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px=ke,jx=Symbol.for("react.element"),Cx=Symbol.for("react.fragment"),Rx=Object.prototype.hasOwnProperty,Ix=Px.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dx={key:!0,ref:!0,__self:!0,__source:!0};function yy(t,e,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)Rx.call(e,n)&&!Dx.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:jx,type:t,key:o,ref:a,props:i,_owner:Ix.current}}Bd.Fragment=Cx;Bd.jsx=yy;Bd.jsxs=yy;sy.exports=Bd;var T=sy.exports,t0={},wy={exports:{}},ei={},by={exports:{}},_y={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,J){var W=Q.length;Q.push(J);e:for(;0<W;){var q=W-1>>>1,L=Q[q];if(0<i(L,J))Q[q]=J,Q[W]=L,W=q;else break e}}function r(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var J=Q[0],W=Q.pop();if(W!==J){Q[0]=W;e:for(var q=0,L=Q.length,D=L>>>1;q<D;){var U=2*(q+1)-1,H=Q[U],B=U+1,Y=Q[B];if(0>i(H,W))B<L&&0>i(Y,H)?(Q[q]=Y,Q[B]=W,q=B):(Q[q]=H,Q[U]=W,q=U);else if(B<L&&0>i(Y,W))Q[q]=Y,Q[B]=W,q=B;else break e}}return J}function i(Q,J){var W=Q.sortIndex-J.sortIndex;return W!==0?W:Q.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],c=[],p=1,d=null,f=3,u=!1,y=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(Q){for(var J=r(c);J!==null;){if(J.callback===null)n(c);else if(J.startTime<=Q)n(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=r(c)}}function x(Q){if(v=!1,_(Q),!y)if(r(l)!==null)y=!0,ee(A);else{var J=r(c);J!==null&&te(x,J.startTime-Q)}}function A(Q,J){y=!1,v&&(v=!1,g(O),O=-1),u=!0;var W=f;try{for(_(J),d=r(l);d!==null&&(!(d.expirationTime>J)||Q&&!S());){var q=d.callback;if(typeof q=="function"){d.callback=null,f=d.priorityLevel;var L=q(d.expirationTime<=J);J=t.unstable_now(),typeof L=="function"?d.callback=L:d===r(l)&&n(l),_(J)}else n(l);d=r(l)}if(d!==null)var D=!0;else{var U=r(c);U!==null&&te(x,U.startTime-J),D=!1}return D}finally{d=null,f=W,u=!1}}var I=!1,P=null,O=-1,F=5,R=-1;function S(){return!(t.unstable_now()-R<F)}function E(){if(P!==null){var Q=t.unstable_now();R=Q;var J=!0;try{J=P(!0,Q)}finally{J?j():(I=!1,P=null)}}else I=!1}var j;if(typeof m=="function")j=function(){m(E)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,V=M.port2;M.port1.onmessage=E,j=function(){V.postMessage(null)}}else j=function(){b(E,0)};function ee(Q){P=Q,I||(I=!0,j())}function te(Q,J){O=b(function(){Q(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){y||u||(y=!0,ee(A))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(Q){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var W=f;f=J;try{return Q()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,J){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var W=f;f=Q;try{return J()}finally{f=W}},t.unstable_scheduleCallback=function(Q,J,W){var q=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?q+W:q):W=q,Q){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=W+L,Q={id:p++,callback:J,priorityLevel:Q,startTime:W,expirationTime:L,sortIndex:-1},W>q?(Q.sortIndex=W,e(c,Q),r(l)===null&&Q===r(c)&&(v?(g(O),O=-1):v=!0,te(x,W-q))):(Q.sortIndex=L,e(l,Q),y||u||(y=!0,ee(A))),Q},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(Q){var J=f;return function(){var W=f;f=J;try{return Q.apply(this,arguments)}finally{f=W}}}})(_y);by.exports=_y;var Mx=by.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx=ke,Zn=Mx;function Be(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xy=new Set,qu={};function Za(t,e){ul(t,e),ul(t+"Capture",e)}function ul(t,e){for(qu[t]=e,t=0;t<e.length;t++)xy.add(e[t])}var yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),r0=Object.prototype.hasOwnProperty,Bx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wm={},bm={};function qx(t){return r0.call(bm,t)?!0:r0.call(wm,t)?!1:Bx.test(t)?bm[t]=!0:(wm[t]=!0,!1)}function Ux(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zx(t,e,r,n){if(e===null||typeof e>"u"||Ux(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function En(t,e,r,n,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rn[t]=new En(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rn[e]=new En(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rn[t]=new En(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rn[t]=new En(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rn[t]=new En(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rn[t]=new En(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rn[t]=new En(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rn[t]=new En(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rn[t]=new En(t,5,!1,t.toLowerCase(),null,!1,!1)});var j1=/[\-:]([a-z])/g;function C1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(j1,C1);rn[e]=new En(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(j1,C1);rn[e]=new En(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(j1,C1);rn[e]=new En(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rn[t]=new En(t,1,!1,t.toLowerCase(),null,!1,!1)});rn.xlinkHref=new En("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rn[t]=new En(t,1,!1,t.toLowerCase(),null,!0,!0)});function R1(t,e,r,n){var i=rn.hasOwnProperty(e)?rn[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zx(e,r,i,n)&&(r=null),n||i===null?qx(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var So=Fx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nf=Symbol.for("react.element"),Bs=Symbol.for("react.portal"),qs=Symbol.for("react.fragment"),I1=Symbol.for("react.strict_mode"),n0=Symbol.for("react.profiler"),Sy=Symbol.for("react.provider"),ky=Symbol.for("react.context"),D1=Symbol.for("react.forward_ref"),i0=Symbol.for("react.suspense"),o0=Symbol.for("react.suspense_list"),M1=Symbol.for("react.memo"),Wo=Symbol.for("react.lazy"),Ay=Symbol.for("react.offscreen"),_m=Symbol.iterator;function iu(t){return t===null||typeof t!="object"?null:(t=_m&&t[_m]||t["@@iterator"],typeof t=="function"?t:null)}var gr=Object.assign,ep;function Su(t){if(ep===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);ep=e&&e[1]||""}return`
`+ep+t}var tp=!1;function rp(t,e){if(!t||tp)return"";tp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=s);break}}}finally{tp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Su(t):""}function $x(t){switch(t.tag){case 5:return Su(t.type);case 16:return Su("Lazy");case 13:return Su("Suspense");case 19:return Su("SuspenseList");case 0:case 2:case 15:return t=rp(t.type,!1),t;case 11:return t=rp(t.type.render,!1),t;case 1:return t=rp(t.type,!0),t;default:return""}}function a0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qs:return"Fragment";case Bs:return"Portal";case n0:return"Profiler";case I1:return"StrictMode";case i0:return"Suspense";case o0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ky:return(t.displayName||"Context")+".Consumer";case Sy:return(t._context.displayName||"Context")+".Provider";case D1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M1:return e=t.displayName||null,e!==null?e:a0(t.type)||"Memo";case Wo:e=t._payload,t=t._init;try{return a0(t(e))}catch{}}return null}function Hx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return a0(e);case 8:return e===I1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ny(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Wx(t){var e=Ny(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function of(t){t._valueTracker||(t._valueTracker=Wx(t))}function Ey(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Ny(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function td(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function s0(t,e){var r=e.checked;return gr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function xm(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=sa(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Oy(t,e){e=e.checked,e!=null&&R1(t,"checked",e,!1)}function l0(t,e){Oy(t,e);var r=sa(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?u0(t,e.type,r):e.hasOwnProperty("defaultValue")&&u0(t,e.type,sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sm(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function u0(t,e,r){(e!=="number"||td(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ku=Array.isArray;function Qs(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+sa(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function c0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Be(91));return gr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function km(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Be(92));if(ku(r)){if(1<r.length)throw Error(Be(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:sa(r)}}function Ly(t,e){var r=sa(e.value),n=sa(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Am(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ty(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function f0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ty(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var af,Py=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(af=af||document.createElement("div"),af.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=af.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Uu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ou={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vx=["Webkit","ms","Moz","O"];Object.keys(Ou).forEach(function(t){Vx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ou[e]=Ou[t]})});function jy(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ou.hasOwnProperty(t)&&Ou[t]?(""+e).trim():e+"px"}function Cy(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=jy(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var Gx=gr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function d0(t,e){if(e){if(Gx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Be(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Be(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Be(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Be(62))}}function h0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p0=null;function F1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var g0=null,Zs=null,el=null;function Nm(t){if(t=fc(t)){if(typeof g0!="function")throw Error(Be(280));var e=t.stateNode;e&&(e=Hd(e),g0(t.stateNode,t.type,e))}}function Ry(t){Zs?el?el.push(t):el=[t]:Zs=t}function Iy(){if(Zs){var t=Zs,e=el;if(el=Zs=null,Nm(t),e)for(t=0;t<e.length;t++)Nm(e[t])}}function Dy(t,e){return t(e)}function My(){}var np=!1;function Fy(t,e,r){if(np)return t(e,r);np=!0;try{return Dy(t,e,r)}finally{np=!1,(Zs!==null||el!==null)&&(My(),Iy())}}function zu(t,e){var r=t.stateNode;if(r===null)return null;var n=Hd(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Be(231,e,typeof r));return r}var m0=!1;if(yo)try{var ou={};Object.defineProperty(ou,"passive",{get:function(){m0=!0}}),window.addEventListener("test",ou,ou),window.removeEventListener("test",ou,ou)}catch{m0=!1}function Kx(t,e,r,n,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(p){this.onError(p)}}var Lu=!1,rd=null,nd=!1,v0=null,Yx={onError:function(t){Lu=!0,rd=t}};function Jx(t,e,r,n,i,o,a,s,l){Lu=!1,rd=null,Kx.apply(Yx,arguments)}function Xx(t,e,r,n,i,o,a,s,l){if(Jx.apply(this,arguments),Lu){if(Lu){var c=rd;Lu=!1,rd=null}else throw Error(Be(198));nd||(nd=!0,v0=c)}}function es(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function By(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Em(t){if(es(t)!==t)throw Error(Be(188))}function Qx(t){var e=t.alternate;if(!e){if(e=es(t),e===null)throw Error(Be(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return Em(i),t;if(o===n)return Em(i),e;o=o.sibling}throw Error(Be(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(Be(189))}}if(r.alternate!==n)throw Error(Be(190))}if(r.tag!==3)throw Error(Be(188));return r.stateNode.current===r?t:e}function qy(t){return t=Qx(t),t!==null?Uy(t):null}function Uy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Uy(t);if(e!==null)return e;t=t.sibling}return null}var zy=Zn.unstable_scheduleCallback,Om=Zn.unstable_cancelCallback,Zx=Zn.unstable_shouldYield,e4=Zn.unstable_requestPaint,Nr=Zn.unstable_now,t4=Zn.unstable_getCurrentPriorityLevel,B1=Zn.unstable_ImmediatePriority,$y=Zn.unstable_UserBlockingPriority,id=Zn.unstable_NormalPriority,r4=Zn.unstable_LowPriority,Hy=Zn.unstable_IdlePriority,qd=null,Yi=null;function n4(t){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(qd,t,void 0,(t.current.flags&128)===128)}catch{}}var Ci=Math.clz32?Math.clz32:a4,i4=Math.log,o4=Math.LN2;function a4(t){return t>>>=0,t===0?32:31-(i4(t)/o4|0)|0}var sf=64,lf=4194304;function Au(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function od(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,a=r&268435455;if(a!==0){var s=a&~i;s!==0?n=Au(s):(o&=a,o!==0&&(n=Au(o)))}else a=r&~i,a!==0?n=Au(a):o!==0&&(n=Au(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ci(e),i=1<<r,n|=t[r],e&=~i;return n}function s4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function l4(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Ci(o),s=1<<a,l=i[a];l===-1?(!(s&r)||s&n)&&(i[a]=s4(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}function y0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Wy(){var t=sf;return sf<<=1,!(sf&4194240)&&(sf=64),t}function ip(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function uc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ci(e),t[e]=r}function u4(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Ci(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}function q1(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ci(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var zt=0;function Vy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Gy,U1,Ky,Yy,Jy,w0=!1,uf=[],Zo=null,ea=null,ta=null,$u=new Map,Hu=new Map,Go=[],c4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lm(t,e){switch(t){case"focusin":case"focusout":Zo=null;break;case"dragenter":case"dragleave":ea=null;break;case"mouseover":case"mouseout":ta=null;break;case"pointerover":case"pointerout":$u.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hu.delete(e.pointerId)}}function au(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=fc(e),e!==null&&U1(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function f4(t,e,r,n,i){switch(e){case"focusin":return Zo=au(Zo,t,e,r,n,i),!0;case"dragenter":return ea=au(ea,t,e,r,n,i),!0;case"mouseover":return ta=au(ta,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return $u.set(o,au($u.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Hu.set(o,au(Hu.get(o)||null,t,e,r,n,i)),!0}return!1}function Xy(t){var e=Fa(t.target);if(e!==null){var r=es(e);if(r!==null){if(e=r.tag,e===13){if(e=By(r),e!==null){t.blockedOn=e,Jy(t.priority,function(){Ky(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=b0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);p0=n,r.target.dispatchEvent(n),p0=null}else return e=fc(r),e!==null&&U1(e),t.blockedOn=r,!1;e.shift()}return!0}function Tm(t,e,r){Bf(t)&&r.delete(e)}function d4(){w0=!1,Zo!==null&&Bf(Zo)&&(Zo=null),ea!==null&&Bf(ea)&&(ea=null),ta!==null&&Bf(ta)&&(ta=null),$u.forEach(Tm),Hu.forEach(Tm)}function su(t,e){t.blockedOn===e&&(t.blockedOn=null,w0||(w0=!0,Zn.unstable_scheduleCallback(Zn.unstable_NormalPriority,d4)))}function Wu(t){function e(i){return su(i,t)}if(0<uf.length){su(uf[0],t);for(var r=1;r<uf.length;r++){var n=uf[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Zo!==null&&su(Zo,t),ea!==null&&su(ea,t),ta!==null&&su(ta,t),$u.forEach(e),Hu.forEach(e),r=0;r<Go.length;r++)n=Go[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Go.length&&(r=Go[0],r.blockedOn===null);)Xy(r),r.blockedOn===null&&Go.shift()}var tl=So.ReactCurrentBatchConfig,ad=!0;function h4(t,e,r,n){var i=zt,o=tl.transition;tl.transition=null;try{zt=1,z1(t,e,r,n)}finally{zt=i,tl.transition=o}}function p4(t,e,r,n){var i=zt,o=tl.transition;tl.transition=null;try{zt=4,z1(t,e,r,n)}finally{zt=i,tl.transition=o}}function z1(t,e,r,n){if(ad){var i=b0(t,e,r,n);if(i===null)pp(t,e,n,sd,r),Lm(t,n);else if(f4(i,t,e,r,n))n.stopPropagation();else if(Lm(t,n),e&4&&-1<c4.indexOf(t)){for(;i!==null;){var o=fc(i);if(o!==null&&Gy(o),o=b0(t,e,r,n),o===null&&pp(t,e,n,sd,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else pp(t,e,n,null,r)}}var sd=null;function b0(t,e,r,n){if(sd=null,t=F1(n),t=Fa(t),t!==null)if(e=es(t),e===null)t=null;else if(r=e.tag,r===13){if(t=By(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sd=t,null}function Qy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(t4()){case B1:return 1;case $y:return 4;case id:case r4:return 16;case Hy:return 536870912;default:return 16}default:return 16}}var Jo=null,$1=null,qf=null;function Zy(){if(qf)return qf;var t,e=$1,r=e.length,n,i="value"in Jo?Jo.value:Jo.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[o-n];n++);return qf=i.slice(t,1<n?1-n:void 0)}function Uf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cf(){return!0}function Pm(){return!1}function ti(t){function e(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?cf:Pm,this.isPropagationStopped=Pm,this}return gr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=cf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=cf)},persist:function(){},isPersistent:cf}),e}var yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},H1=ti(yl),cc=gr({},yl,{view:0,detail:0}),g4=ti(cc),op,ap,lu,Ud=gr({},cc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:W1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==lu&&(lu&&t.type==="mousemove"?(op=t.screenX-lu.screenX,ap=t.screenY-lu.screenY):ap=op=0,lu=t),op)},movementY:function(t){return"movementY"in t?t.movementY:ap}}),jm=ti(Ud),m4=gr({},Ud,{dataTransfer:0}),v4=ti(m4),y4=gr({},cc,{relatedTarget:0}),sp=ti(y4),w4=gr({},yl,{animationName:0,elapsedTime:0,pseudoElement:0}),b4=ti(w4),_4=gr({},yl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),x4=ti(_4),S4=gr({},yl,{data:0}),Cm=ti(S4),k4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=N4[t])?!!e[t]:!1}function W1(){return E4}var O4=gr({},cc,{key:function(t){if(t.key){var e=k4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Uf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?A4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:W1,charCode:function(t){return t.type==="keypress"?Uf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Uf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),L4=ti(O4),T4=gr({},Ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rm=ti(T4),P4=gr({},cc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:W1}),j4=ti(P4),C4=gr({},yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),R4=ti(C4),I4=gr({},Ud,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),D4=ti(I4),M4=[9,13,27,32],V1=yo&&"CompositionEvent"in window,Tu=null;yo&&"documentMode"in document&&(Tu=document.documentMode);var F4=yo&&"TextEvent"in window&&!Tu,e5=yo&&(!V1||Tu&&8<Tu&&11>=Tu),Im=" ",Dm=!1;function t5(t,e){switch(t){case"keyup":return M4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function r5(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Us=!1;function B4(t,e){switch(t){case"compositionend":return r5(e);case"keypress":return e.which!==32?null:(Dm=!0,Im);case"textInput":return t=e.data,t===Im&&Dm?null:t;default:return null}}function q4(t,e){if(Us)return t==="compositionend"||!V1&&t5(t,e)?(t=Zy(),qf=$1=Jo=null,Us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return e5&&e.locale!=="ko"?null:e.data;default:return null}}var U4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!U4[t.type]:e==="textarea"}function n5(t,e,r,n){Ry(n),e=ld(e,"onChange"),0<e.length&&(r=new H1("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Pu=null,Vu=null;function z4(t){p5(t,0)}function zd(t){var e=Hs(t);if(Ey(e))return t}function $4(t,e){if(t==="change")return e}var i5=!1;if(yo){var lp;if(yo){var up="oninput"in document;if(!up){var Fm=document.createElement("div");Fm.setAttribute("oninput","return;"),up=typeof Fm.oninput=="function"}lp=up}else lp=!1;i5=lp&&(!document.documentMode||9<document.documentMode)}function Bm(){Pu&&(Pu.detachEvent("onpropertychange",o5),Vu=Pu=null)}function o5(t){if(t.propertyName==="value"&&zd(Vu)){var e=[];n5(e,Vu,t,F1(t)),Fy(z4,e)}}function H4(t,e,r){t==="focusin"?(Bm(),Pu=e,Vu=r,Pu.attachEvent("onpropertychange",o5)):t==="focusout"&&Bm()}function W4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zd(Vu)}function V4(t,e){if(t==="click")return zd(e)}function G4(t,e){if(t==="input"||t==="change")return zd(e)}function K4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ii=typeof Object.is=="function"?Object.is:K4;function Gu(t,e){if(Ii(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!r0.call(e,i)||!Ii(t[i],e[i]))return!1}return!0}function qm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Um(t,e){var r=qm(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qm(r)}}function a5(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?a5(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function s5(){for(var t=window,e=td();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=td(t.document)}return e}function G1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Y4(t){var e=s5(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&a5(r.ownerDocument.documentElement,r)){if(n!==null&&G1(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=Um(r,o);var a=Um(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var J4=yo&&"documentMode"in document&&11>=document.documentMode,zs=null,_0=null,ju=null,x0=!1;function zm(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;x0||zs==null||zs!==td(n)||(n=zs,"selectionStart"in n&&G1(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ju&&Gu(ju,n)||(ju=n,n=ld(_0,"onSelect"),0<n.length&&(e=new H1("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=zs)))}function ff(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var $s={animationend:ff("Animation","AnimationEnd"),animationiteration:ff("Animation","AnimationIteration"),animationstart:ff("Animation","AnimationStart"),transitionend:ff("Transition","TransitionEnd")},cp={},l5={};yo&&(l5=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function $d(t){if(cp[t])return cp[t];if(!$s[t])return t;var e=$s[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in l5)return cp[t]=e[r];return t}var u5=$d("animationend"),c5=$d("animationiteration"),f5=$d("animationstart"),d5=$d("transitionend"),h5=new Map,$m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fa(t,e){h5.set(t,e),Za(e,[t])}for(var fp=0;fp<$m.length;fp++){var dp=$m[fp],X4=dp.toLowerCase(),Q4=dp[0].toUpperCase()+dp.slice(1);fa(X4,"on"+Q4)}fa(u5,"onAnimationEnd");fa(c5,"onAnimationIteration");fa(f5,"onAnimationStart");fa("dblclick","onDoubleClick");fa("focusin","onFocus");fa("focusout","onBlur");fa(d5,"onTransitionEnd");ul("onMouseEnter",["mouseout","mouseover"]);ul("onMouseLeave",["mouseout","mouseover"]);ul("onPointerEnter",["pointerout","pointerover"]);ul("onPointerLeave",["pointerout","pointerover"]);Za("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Za("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Za("onBeforeInput",["compositionend","keypress","textInput","paste"]);Za("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Za("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Za("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nu));function Hm(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Xx(n,e,void 0,t),t.currentTarget=null}function p5(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Hm(i,s,c),o=l}else for(a=0;a<n.length;a++){if(s=n[a],l=s.instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Hm(i,s,c),o=l}}}if(nd)throw t=v0,nd=!1,v0=null,t}function nr(t,e){var r=e[E0];r===void 0&&(r=e[E0]=new Set);var n=t+"__bubble";r.has(n)||(g5(e,t,2,!1),r.add(n))}function hp(t,e,r){var n=0;e&&(n|=4),g5(r,t,n,e)}var df="_reactListening"+Math.random().toString(36).slice(2);function Ku(t){if(!t[df]){t[df]=!0,xy.forEach(function(r){r!=="selectionchange"&&(Z4.has(r)||hp(r,!1,t),hp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[df]||(e[df]=!0,hp("selectionchange",!1,e))}}function g5(t,e,r,n){switch(Qy(e)){case 1:var i=h4;break;case 4:i=p4;break;default:i=z1}r=i.bind(null,e,r,t),i=void 0,!m0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function pp(t,e,r,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Fa(s),a===null)return;if(l=a.tag,l===5||l===6){n=o=a;continue e}s=s.parentNode}}n=n.return}Fy(function(){var c=o,p=F1(r),d=[];e:{var f=h5.get(t);if(f!==void 0){var u=H1,y=t;switch(t){case"keypress":if(Uf(r)===0)break e;case"keydown":case"keyup":u=L4;break;case"focusin":y="focus",u=sp;break;case"focusout":y="blur",u=sp;break;case"beforeblur":case"afterblur":u=sp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=jm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=v4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=j4;break;case u5:case c5:case f5:u=b4;break;case d5:u=R4;break;case"scroll":u=g4;break;case"wheel":u=D4;break;case"copy":case"cut":case"paste":u=x4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Rm}var v=(e&4)!==0,b=!v&&t==="scroll",g=v?f!==null?f+"Capture":null:f;v=[];for(var m=c,_;m!==null;){_=m;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,g!==null&&(x=zu(m,g),x!=null&&v.push(Yu(m,x,_)))),b)break;m=m.return}0<v.length&&(f=new u(f,y,null,r,p),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",u=t==="mouseout"||t==="pointerout",f&&r!==p0&&(y=r.relatedTarget||r.fromElement)&&(Fa(y)||y[wo]))break e;if((u||f)&&(f=p.window===p?p:(f=p.ownerDocument)?f.defaultView||f.parentWindow:window,u?(y=r.relatedTarget||r.toElement,u=c,y=y?Fa(y):null,y!==null&&(b=es(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(u=null,y=c),u!==y)){if(v=jm,x="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(v=Rm,x="onPointerLeave",g="onPointerEnter",m="pointer"),b=u==null?f:Hs(u),_=y==null?f:Hs(y),f=new v(x,m+"leave",u,r,p),f.target=b,f.relatedTarget=_,x=null,Fa(p)===c&&(v=new v(g,m+"enter",y,r,p),v.target=_,v.relatedTarget=b,x=v),b=x,u&&y)t:{for(v=u,g=y,m=0,_=v;_;_=Ns(_))m++;for(_=0,x=g;x;x=Ns(x))_++;for(;0<m-_;)v=Ns(v),m--;for(;0<_-m;)g=Ns(g),_--;for(;m--;){if(v===g||g!==null&&v===g.alternate)break t;v=Ns(v),g=Ns(g)}v=null}else v=null;u!==null&&Wm(d,f,u,v,!1),y!==null&&b!==null&&Wm(d,b,y,v,!0)}}e:{if(f=c?Hs(c):window,u=f.nodeName&&f.nodeName.toLowerCase(),u==="select"||u==="input"&&f.type==="file")var A=$4;else if(Mm(f))if(i5)A=G4;else{A=W4;var I=H4}else(u=f.nodeName)&&u.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(A=V4);if(A&&(A=A(t,c))){n5(d,A,r,p);break e}I&&I(t,f,c),t==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&u0(f,"number",f.value)}switch(I=c?Hs(c):window,t){case"focusin":(Mm(I)||I.contentEditable==="true")&&(zs=I,_0=c,ju=null);break;case"focusout":ju=_0=zs=null;break;case"mousedown":x0=!0;break;case"contextmenu":case"mouseup":case"dragend":x0=!1,zm(d,r,p);break;case"selectionchange":if(J4)break;case"keydown":case"keyup":zm(d,r,p)}var P;if(V1)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Us?t5(t,r)&&(O="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(e5&&r.locale!=="ko"&&(Us||O!=="onCompositionStart"?O==="onCompositionEnd"&&Us&&(P=Zy()):(Jo=p,$1="value"in Jo?Jo.value:Jo.textContent,Us=!0)),I=ld(c,O),0<I.length&&(O=new Cm(O,t,null,r,p),d.push({event:O,listeners:I}),P?O.data=P:(P=r5(r),P!==null&&(O.data=P)))),(P=F4?B4(t,r):q4(t,r))&&(c=ld(c,"onBeforeInput"),0<c.length&&(p=new Cm("onBeforeInput","beforeinput",null,r,p),d.push({event:p,listeners:c}),p.data=P))}p5(d,e)})}function Yu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ld(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=zu(t,r),o!=null&&n.unshift(Yu(t,o,i)),o=zu(t,e),o!=null&&n.push(Yu(t,o,i))),t=t.return}return n}function Ns(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wm(t,e,r,n,i){for(var o=e._reactName,a=[];r!==null&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&c!==null&&(s=c,i?(l=zu(r,o),l!=null&&a.unshift(Yu(r,l,s))):i||(l=zu(r,o),l!=null&&a.push(Yu(r,l,s)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var e3=/\r\n?/g,t3=/\u0000|\uFFFD/g;function Vm(t){return(typeof t=="string"?t:""+t).replace(e3,`
`).replace(t3,"")}function hf(t,e,r){if(e=Vm(e),Vm(t)!==e&&r)throw Error(Be(425))}function ud(){}var S0=null,k0=null;function A0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var N0=typeof setTimeout=="function"?setTimeout:void 0,r3=typeof clearTimeout=="function"?clearTimeout:void 0,Gm=typeof Promise=="function"?Promise:void 0,n3=typeof queueMicrotask=="function"?queueMicrotask:typeof Gm<"u"?function(t){return Gm.resolve(null).then(t).catch(i3)}:N0;function i3(t){setTimeout(function(){throw t})}function gp(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Wu(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Wu(e)}function ra(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Km(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var wl=Math.random().toString(36).slice(2),Gi="__reactFiber$"+wl,Ju="__reactProps$"+wl,wo="__reactContainer$"+wl,E0="__reactEvents$"+wl,o3="__reactListeners$"+wl,a3="__reactHandles$"+wl;function Fa(t){var e=t[Gi];if(e)return e;for(var r=t.parentNode;r;){if(e=r[wo]||r[Gi]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Km(t);t!==null;){if(r=t[Gi])return r;t=Km(t)}return e}t=r,r=t.parentNode}return null}function fc(t){return t=t[Gi]||t[wo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Be(33))}function Hd(t){return t[Ju]||null}var O0=[],Ws=-1;function da(t){return{current:t}}function ar(t){0>Ws||(t.current=O0[Ws],O0[Ws]=null,Ws--)}function tr(t,e){Ws++,O0[Ws]=t.current,t.current=e}var la={},mn=da(la),Mn=da(!1),Wa=la;function cl(t,e){var r=t.type.contextTypes;if(!r)return la;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Fn(t){return t=t.childContextTypes,t!=null}function cd(){ar(Mn),ar(mn)}function Ym(t,e,r){if(mn.current!==la)throw Error(Be(168));tr(mn,e),tr(Mn,r)}function m5(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Be(108,Hx(t)||"Unknown",i));return gr({},r,n)}function fd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||la,Wa=mn.current,tr(mn,t),tr(Mn,Mn.current),!0}function Jm(t,e,r){var n=t.stateNode;if(!n)throw Error(Be(169));r?(t=m5(t,e,Wa),n.__reactInternalMemoizedMergedChildContext=t,ar(Mn),ar(mn),tr(mn,t)):ar(Mn),tr(Mn,r)}var po=null,Wd=!1,mp=!1;function v5(t){po===null?po=[t]:po.push(t)}function s3(t){Wd=!0,v5(t)}function ha(){if(!mp&&po!==null){mp=!0;var t=0,e=zt;try{var r=po;for(zt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}po=null,Wd=!1}catch(i){throw po!==null&&(po=po.slice(t+1)),zy(B1,ha),i}finally{zt=e,mp=!1}}return null}var Vs=[],Gs=0,dd=null,hd=0,ci=[],fi=0,Va=null,go=1,mo="";function Oa(t,e){Vs[Gs++]=hd,Vs[Gs++]=dd,dd=t,hd=e}function y5(t,e,r){ci[fi++]=go,ci[fi++]=mo,ci[fi++]=Va,Va=t;var n=go;t=mo;var i=32-Ci(n)-1;n&=~(1<<i),r+=1;var o=32-Ci(e)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,go=1<<32-Ci(e)+i|r<<i|n,mo=o+t}else go=1<<o|r<<i|n,mo=t}function K1(t){t.return!==null&&(Oa(t,1),y5(t,1,0))}function Y1(t){for(;t===dd;)dd=Vs[--Gs],Vs[Gs]=null,hd=Vs[--Gs],Vs[Gs]=null;for(;t===Va;)Va=ci[--fi],ci[fi]=null,mo=ci[--fi],ci[fi]=null,go=ci[--fi],ci[fi]=null}var Qn=null,Jn=null,ur=!1,ji=null;function w5(t,e){var r=di(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Xm(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qn=t,Jn=ra(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qn=t,Jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Va!==null?{id:go,overflow:mo}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=di(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Qn=t,Jn=null,!0):!1;default:return!1}}function L0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function T0(t){if(ur){var e=Jn;if(e){var r=e;if(!Xm(t,e)){if(L0(t))throw Error(Be(418));e=ra(r.nextSibling);var n=Qn;e&&Xm(t,e)?w5(n,r):(t.flags=t.flags&-4097|2,ur=!1,Qn=t)}}else{if(L0(t))throw Error(Be(418));t.flags=t.flags&-4097|2,ur=!1,Qn=t}}}function Qm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qn=t}function pf(t){if(t!==Qn)return!1;if(!ur)return Qm(t),ur=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!A0(t.type,t.memoizedProps)),e&&(e=Jn)){if(L0(t))throw b5(),Error(Be(418));for(;e;)w5(t,e),e=ra(e.nextSibling)}if(Qm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Be(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Jn=ra(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Jn=null}}else Jn=Qn?ra(t.stateNode.nextSibling):null;return!0}function b5(){for(var t=Jn;t;)t=ra(t.nextSibling)}function fl(){Jn=Qn=null,ur=!1}function J1(t){ji===null?ji=[t]:ji.push(t)}var l3=So.ReactCurrentBatchConfig;function uu(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Be(309));var n=r.stateNode}if(!n)throw Error(Be(147,t));var i=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(Be(284));if(!r._owner)throw Error(Be(290,t))}return t}function gf(t,e){throw t=Object.prototype.toString.call(e),Error(Be(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zm(t){var e=t._init;return e(t._payload)}function _5(t){function e(g,m){if(t){var _=g.deletions;_===null?(g.deletions=[m],g.flags|=16):_.push(m)}}function r(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function n(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function i(g,m){return g=aa(g,m),g.index=0,g.sibling=null,g}function o(g,m,_){return g.index=_,t?(_=g.alternate,_!==null?(_=_.index,_<m?(g.flags|=2,m):_):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return t&&g.alternate===null&&(g.flags|=2),g}function s(g,m,_,x){return m===null||m.tag!==6?(m=Sp(_,g.mode,x),m.return=g,m):(m=i(m,_),m.return=g,m)}function l(g,m,_,x){var A=_.type;return A===qs?p(g,m,_.props.children,x,_.key):m!==null&&(m.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Wo&&Zm(A)===m.type)?(x=i(m,_.props),x.ref=uu(g,m,_),x.return=g,x):(x=Kf(_.type,_.key,_.props,null,g.mode,x),x.ref=uu(g,m,_),x.return=g,x)}function c(g,m,_,x){return m===null||m.tag!==4||m.stateNode.containerInfo!==_.containerInfo||m.stateNode.implementation!==_.implementation?(m=kp(_,g.mode,x),m.return=g,m):(m=i(m,_.children||[]),m.return=g,m)}function p(g,m,_,x,A){return m===null||m.tag!==7?(m=$a(_,g.mode,x,A),m.return=g,m):(m=i(m,_),m.return=g,m)}function d(g,m,_){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Sp(""+m,g.mode,_),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case nf:return _=Kf(m.type,m.key,m.props,null,g.mode,_),_.ref=uu(g,null,m),_.return=g,_;case Bs:return m=kp(m,g.mode,_),m.return=g,m;case Wo:var x=m._init;return d(g,x(m._payload),_)}if(ku(m)||iu(m))return m=$a(m,g.mode,_,null),m.return=g,m;gf(g,m)}return null}function f(g,m,_,x){var A=m!==null?m.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return A!==null?null:s(g,m,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case nf:return _.key===A?l(g,m,_,x):null;case Bs:return _.key===A?c(g,m,_,x):null;case Wo:return A=_._init,f(g,m,A(_._payload),x)}if(ku(_)||iu(_))return A!==null?null:p(g,m,_,x,null);gf(g,_)}return null}function u(g,m,_,x,A){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(_)||null,s(m,g,""+x,A);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case nf:return g=g.get(x.key===null?_:x.key)||null,l(m,g,x,A);case Bs:return g=g.get(x.key===null?_:x.key)||null,c(m,g,x,A);case Wo:var I=x._init;return u(g,m,_,I(x._payload),A)}if(ku(x)||iu(x))return g=g.get(_)||null,p(m,g,x,A,null);gf(m,x)}return null}function y(g,m,_,x){for(var A=null,I=null,P=m,O=m=0,F=null;P!==null&&O<_.length;O++){P.index>O?(F=P,P=null):F=P.sibling;var R=f(g,P,_[O],x);if(R===null){P===null&&(P=F);break}t&&P&&R.alternate===null&&e(g,P),m=o(R,m,O),I===null?A=R:I.sibling=R,I=R,P=F}if(O===_.length)return r(g,P),ur&&Oa(g,O),A;if(P===null){for(;O<_.length;O++)P=d(g,_[O],x),P!==null&&(m=o(P,m,O),I===null?A=P:I.sibling=P,I=P);return ur&&Oa(g,O),A}for(P=n(g,P);O<_.length;O++)F=u(P,g,O,_[O],x),F!==null&&(t&&F.alternate!==null&&P.delete(F.key===null?O:F.key),m=o(F,m,O),I===null?A=F:I.sibling=F,I=F);return t&&P.forEach(function(S){return e(g,S)}),ur&&Oa(g,O),A}function v(g,m,_,x){var A=iu(_);if(typeof A!="function")throw Error(Be(150));if(_=A.call(_),_==null)throw Error(Be(151));for(var I=A=null,P=m,O=m=0,F=null,R=_.next();P!==null&&!R.done;O++,R=_.next()){P.index>O?(F=P,P=null):F=P.sibling;var S=f(g,P,R.value,x);if(S===null){P===null&&(P=F);break}t&&P&&S.alternate===null&&e(g,P),m=o(S,m,O),I===null?A=S:I.sibling=S,I=S,P=F}if(R.done)return r(g,P),ur&&Oa(g,O),A;if(P===null){for(;!R.done;O++,R=_.next())R=d(g,R.value,x),R!==null&&(m=o(R,m,O),I===null?A=R:I.sibling=R,I=R);return ur&&Oa(g,O),A}for(P=n(g,P);!R.done;O++,R=_.next())R=u(P,g,O,R.value,x),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?O:R.key),m=o(R,m,O),I===null?A=R:I.sibling=R,I=R);return t&&P.forEach(function(E){return e(g,E)}),ur&&Oa(g,O),A}function b(g,m,_,x){if(typeof _=="object"&&_!==null&&_.type===qs&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case nf:e:{for(var A=_.key,I=m;I!==null;){if(I.key===A){if(A=_.type,A===qs){if(I.tag===7){r(g,I.sibling),m=i(I,_.props.children),m.return=g,g=m;break e}}else if(I.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Wo&&Zm(A)===I.type){r(g,I.sibling),m=i(I,_.props),m.ref=uu(g,I,_),m.return=g,g=m;break e}r(g,I);break}else e(g,I);I=I.sibling}_.type===qs?(m=$a(_.props.children,g.mode,x,_.key),m.return=g,g=m):(x=Kf(_.type,_.key,_.props,null,g.mode,x),x.ref=uu(g,m,_),x.return=g,g=x)}return a(g);case Bs:e:{for(I=_.key;m!==null;){if(m.key===I)if(m.tag===4&&m.stateNode.containerInfo===_.containerInfo&&m.stateNode.implementation===_.implementation){r(g,m.sibling),m=i(m,_.children||[]),m.return=g,g=m;break e}else{r(g,m);break}else e(g,m);m=m.sibling}m=kp(_,g.mode,x),m.return=g,g=m}return a(g);case Wo:return I=_._init,b(g,m,I(_._payload),x)}if(ku(_))return y(g,m,_,x);if(iu(_))return v(g,m,_,x);gf(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,m!==null&&m.tag===6?(r(g,m.sibling),m=i(m,_),m.return=g,g=m):(r(g,m),m=Sp(_,g.mode,x),m.return=g,g=m),a(g)):r(g,m)}return b}var dl=_5(!0),x5=_5(!1),pd=da(null),gd=null,Ks=null,X1=null;function Q1(){X1=Ks=gd=null}function Z1(t){var e=pd.current;ar(pd),t._currentValue=e}function P0(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function rl(t,e){gd=t,X1=Ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dn=!0),t.firstContext=null)}function pi(t){var e=t._currentValue;if(X1!==t)if(t={context:t,memoizedValue:e,next:null},Ks===null){if(gd===null)throw Error(Be(308));Ks=t,gd.dependencies={lanes:0,firstContext:t}}else Ks=Ks.next=t;return e}var Ba=null;function eg(t){Ba===null?Ba=[t]:Ba.push(t)}function S5(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,eg(e)):(r.next=i.next,i.next=r),e.interleaved=r,bo(t,n)}function bo(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Vo=!1;function tg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k5(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function na(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Pt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,bo(t,r)}return i=n.interleaved,i===null?(e.next=e,eg(n)):(e.next=i.next,i.next=e),n.interleaved=e,bo(t,r)}function zf(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,q1(t,r)}}function ev(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function md(t,e,r,n){var i=t.updateQueue;Vo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,a===null?o=c:a.next=c,a=l;var p=t.alternate;p!==null&&(p=p.updateQueue,s=p.lastBaseUpdate,s!==a&&(s===null?p.firstBaseUpdate=c:s.next=c,p.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;a=0,p=c=l=null,s=o;do{var f=s.lane,u=s.eventTime;if((n&f)===f){p!==null&&(p=p.next={eventTime:u,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=t,v=s;switch(f=e,u=r,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(u,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(u,d,f):y,f==null)break e;d=gr({},d,f);break e;case 2:Vo=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else u={eventTime:u,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},p===null?(c=p=u,l=d):p=p.next=u,a|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(p===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ka|=a,t.lanes=a,t.memoizedState=d}}function tv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Be(191,i));i.call(n)}}}var dc={},Ji=da(dc),Xu=da(dc),Qu=da(dc);function qa(t){if(t===dc)throw Error(Be(174));return t}function rg(t,e){switch(tr(Qu,e),tr(Xu,t),tr(Ji,dc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:f0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=f0(e,t)}ar(Ji),tr(Ji,e)}function hl(){ar(Ji),ar(Xu),ar(Qu)}function A5(t){qa(Qu.current);var e=qa(Ji.current),r=f0(e,t.type);e!==r&&(tr(Xu,t),tr(Ji,r))}function ng(t){Xu.current===t&&(ar(Ji),ar(Xu))}var hr=da(0);function vd(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vp=[];function ig(){for(var t=0;t<vp.length;t++)vp[t]._workInProgressVersionPrimary=null;vp.length=0}var $f=So.ReactCurrentDispatcher,yp=So.ReactCurrentBatchConfig,Ga=0,pr=null,Br=null,Gr=null,yd=!1,Cu=!1,Zu=0,u3=0;function ln(){throw Error(Be(321))}function og(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ii(t[r],e[r]))return!1;return!0}function ag(t,e,r,n,i,o){if(Ga=o,pr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$f.current=t===null||t.memoizedState===null?h3:p3,t=r(n,i),Cu){o=0;do{if(Cu=!1,Zu=0,25<=o)throw Error(Be(301));o+=1,Gr=Br=null,e.updateQueue=null,$f.current=g3,t=r(n,i)}while(Cu)}if($f.current=wd,e=Br!==null&&Br.next!==null,Ga=0,Gr=Br=pr=null,yd=!1,e)throw Error(Be(300));return t}function sg(){var t=Zu!==0;return Zu=0,t}function Vi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?pr.memoizedState=Gr=t:Gr=Gr.next=t,Gr}function gi(){if(Br===null){var t=pr.alternate;t=t!==null?t.memoizedState:null}else t=Br.next;var e=Gr===null?pr.memoizedState:Gr.next;if(e!==null)Gr=e,Br=t;else{if(t===null)throw Error(Be(310));Br=t,t={memoizedState:Br.memoizedState,baseState:Br.baseState,baseQueue:Br.baseQueue,queue:Br.queue,next:null},Gr===null?pr.memoizedState=Gr=t:Gr=Gr.next=t}return Gr}function ec(t,e){return typeof e=="function"?e(t):e}function wp(t){var e=gi(),r=e.queue;if(r===null)throw Error(Be(311));r.lastRenderedReducer=t;var n=Br,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=a=null,l=null,c=o;do{var p=c.lane;if((Ga&p)===p)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var d={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=d,a=n):l=l.next=d,pr.lanes|=p,Ka|=p}c=c.next}while(c!==null&&c!==o);l===null?a=n:l.next=s,Ii(n,e.memoizedState)||(Dn=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do o=i.lane,pr.lanes|=o,Ka|=o,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function bp(t){var e=gi(),r=e.queue;if(r===null)throw Error(Be(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Ii(o,e.memoizedState)||(Dn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function N5(){}function E5(t,e){var r=pr,n=gi(),i=e(),o=!Ii(n.memoizedState,i);if(o&&(n.memoizedState=i,Dn=!0),n=n.queue,lg(T5.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Gr!==null&&Gr.memoizedState.tag&1){if(r.flags|=2048,tc(9,L5.bind(null,r,n,i,e),void 0,null),Yr===null)throw Error(Be(349));Ga&30||O5(r,e,i)}return i}function O5(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=pr.updateQueue,e===null?(e={lastEffect:null,stores:null},pr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function L5(t,e,r,n){e.value=r,e.getSnapshot=n,P5(e)&&j5(t)}function T5(t,e,r){return r(function(){P5(e)&&j5(t)})}function P5(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ii(t,r)}catch{return!0}}function j5(t){var e=bo(t,1);e!==null&&Ri(e,t,1,-1)}function rv(t){var e=Vi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ec,lastRenderedState:t},e.queue=t,t=t.dispatch=d3.bind(null,pr,t),[e.memoizedState,t]}function tc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=pr.updateQueue,e===null?(e={lastEffect:null,stores:null},pr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function C5(){return gi().memoizedState}function Hf(t,e,r,n){var i=Vi();pr.flags|=t,i.memoizedState=tc(1|e,r,void 0,n===void 0?null:n)}function Vd(t,e,r,n){var i=gi();n=n===void 0?null:n;var o=void 0;if(Br!==null){var a=Br.memoizedState;if(o=a.destroy,n!==null&&og(n,a.deps)){i.memoizedState=tc(e,r,o,n);return}}pr.flags|=t,i.memoizedState=tc(1|e,r,o,n)}function nv(t,e){return Hf(8390656,8,t,e)}function lg(t,e){return Vd(2048,8,t,e)}function R5(t,e){return Vd(4,2,t,e)}function I5(t,e){return Vd(4,4,t,e)}function D5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function M5(t,e,r){return r=r!=null?r.concat([t]):null,Vd(4,4,D5.bind(null,e,t),r)}function ug(){}function F5(t,e){var r=gi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&og(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function B5(t,e){var r=gi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&og(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function q5(t,e,r){return Ga&21?(Ii(r,e)||(r=Wy(),pr.lanes|=r,Ka|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dn=!0),t.memoizedState=r)}function c3(t,e){var r=zt;zt=r!==0&&4>r?r:4,t(!0);var n=yp.transition;yp.transition={};try{t(!1),e()}finally{zt=r,yp.transition=n}}function U5(){return gi().memoizedState}function f3(t,e,r){var n=oa(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},z5(t))$5(e,r);else if(r=S5(t,e,r,n),r!==null){var i=Sn();Ri(r,t,n,i),H5(r,e,n)}}function d3(t,e,r){var n=oa(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(z5(t))$5(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,Ii(s,a)){var l=e.interleaved;l===null?(i.next=i,eg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=S5(t,e,i,n),r!==null&&(i=Sn(),Ri(r,t,n,i),H5(r,e,n))}}function z5(t){var e=t.alternate;return t===pr||e!==null&&e===pr}function $5(t,e){Cu=yd=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function H5(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,q1(t,r)}}var wd={readContext:pi,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},h3={readContext:pi,useCallback:function(t,e){return Vi().memoizedState=[t,e===void 0?null:e],t},useContext:pi,useEffect:nv,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Hf(4194308,4,D5.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Hf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hf(4,2,t,e)},useMemo:function(t,e){var r=Vi();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Vi();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=f3.bind(null,pr,t),[n.memoizedState,t]},useRef:function(t){var e=Vi();return t={current:t},e.memoizedState=t},useState:rv,useDebugValue:ug,useDeferredValue:function(t){return Vi().memoizedState=t},useTransition:function(){var t=rv(!1),e=t[0];return t=c3.bind(null,t[1]),Vi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=pr,i=Vi();if(ur){if(r===void 0)throw Error(Be(407));r=r()}else{if(r=e(),Yr===null)throw Error(Be(349));Ga&30||O5(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,nv(T5.bind(null,n,o,t),[t]),n.flags|=2048,tc(9,L5.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=Vi(),e=Yr.identifierPrefix;if(ur){var r=mo,n=go;r=(n&~(1<<32-Ci(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Zu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=u3++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},p3={readContext:pi,useCallback:F5,useContext:pi,useEffect:lg,useImperativeHandle:M5,useInsertionEffect:R5,useLayoutEffect:I5,useMemo:B5,useReducer:wp,useRef:C5,useState:function(){return wp(ec)},useDebugValue:ug,useDeferredValue:function(t){var e=gi();return q5(e,Br.memoizedState,t)},useTransition:function(){var t=wp(ec)[0],e=gi().memoizedState;return[t,e]},useMutableSource:N5,useSyncExternalStore:E5,useId:U5,unstable_isNewReconciler:!1},g3={readContext:pi,useCallback:F5,useContext:pi,useEffect:lg,useImperativeHandle:M5,useInsertionEffect:R5,useLayoutEffect:I5,useMemo:B5,useReducer:bp,useRef:C5,useState:function(){return bp(ec)},useDebugValue:ug,useDeferredValue:function(t){var e=gi();return Br===null?e.memoizedState=t:q5(e,Br.memoizedState,t)},useTransition:function(){var t=bp(ec)[0],e=gi().memoizedState;return[t,e]},useMutableSource:N5,useSyncExternalStore:E5,useId:U5,unstable_isNewReconciler:!1};function Oi(t,e){if(t&&t.defaultProps){e=gr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function j0(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:gr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Gd={isMounted:function(t){return(t=t._reactInternals)?es(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Sn(),i=oa(t),o=vo(n,i);o.payload=e,r!=null&&(o.callback=r),e=na(t,o,i),e!==null&&(Ri(e,t,i,n),zf(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Sn(),i=oa(t),o=vo(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=na(t,o,i),e!==null&&(Ri(e,t,i,n),zf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Sn(),n=oa(t),i=vo(r,n);i.tag=2,e!=null&&(i.callback=e),e=na(t,i,n),e!==null&&(Ri(e,t,n,r),zf(e,t,n))}};function iv(t,e,r,n,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,a):e.prototype&&e.prototype.isPureReactComponent?!Gu(r,n)||!Gu(i,o):!0}function W5(t,e,r){var n=!1,i=la,o=e.contextType;return typeof o=="object"&&o!==null?o=pi(o):(i=Fn(e)?Wa:mn.current,n=e.contextTypes,o=(n=n!=null)?cl(t,i):la),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gd,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function ov(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Gd.enqueueReplaceState(e,e.state,null)}function C0(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},tg(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=pi(o):(o=Fn(e)?Wa:mn.current,i.context=cl(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(j0(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Gd.enqueueReplaceState(i,i.state,null),md(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function pl(t,e){try{var r="",n=e;do r+=$x(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function _p(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function R0(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var m3=typeof WeakMap=="function"?WeakMap:Map;function V5(t,e,r){r=vo(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){_d||(_d=!0,H0=n),R0(t,e)},r}function G5(t,e,r){r=vo(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){R0(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){R0(t,e),typeof n!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function av(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new m3;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=T3.bind(null,t,e,r),e.then(t,t))}function sv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lv(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=vo(-1,1),e.tag=2,na(r,e,1))),r.lanes|=1),t)}var v3=So.ReactCurrentOwner,Dn=!1;function _n(t,e,r,n){e.child=t===null?x5(e,null,r,n):dl(e,t.child,r,n)}function uv(t,e,r,n,i){r=r.render;var o=e.ref;return rl(e,i),n=ag(t,e,r,n,o,i),r=sg(),t!==null&&!Dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_o(t,e,i)):(ur&&r&&K1(e),e.flags|=1,_n(t,e,n,i),e.child)}function cv(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!vg(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,K5(t,e,o,n,i)):(t=Kf(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Gu,r(a,n)&&t.ref===e.ref)return _o(t,e,i)}return e.flags|=1,t=aa(o,n),t.ref=e.ref,t.return=e,e.child=t}function K5(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(Gu(o,n)&&t.ref===e.ref)if(Dn=!1,e.pendingProps=n=o,(t.lanes&i)!==0)t.flags&131072&&(Dn=!0);else return e.lanes=t.lanes,_o(t,e,i)}return I0(t,e,r,n,i)}function Y5(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tr(Js,Vn),Vn|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,tr(Js,Vn),Vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,tr(Js,Vn),Vn|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,tr(Js,Vn),Vn|=n;return _n(t,e,i,r),e.child}function J5(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function I0(t,e,r,n,i){var o=Fn(r)?Wa:mn.current;return o=cl(e,o),rl(e,i),r=ag(t,e,r,n,o,i),n=sg(),t!==null&&!Dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_o(t,e,i)):(ur&&n&&K1(e),e.flags|=1,_n(t,e,r,i),e.child)}function fv(t,e,r,n,i){if(Fn(r)){var o=!0;fd(e)}else o=!1;if(rl(e,i),e.stateNode===null)Wf(t,e),W5(e,r,n),C0(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=pi(c):(c=Fn(r)?Wa:mn.current,c=cl(e,c));var p=r.getDerivedStateFromProps,d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||l!==c)&&ov(e,a,n,c),Vo=!1;var f=e.memoizedState;a.state=f,md(e,n,a,i),l=e.memoizedState,s!==n||f!==l||Mn.current||Vo?(typeof p=="function"&&(j0(e,r,p,n),l=e.memoizedState),(s=Vo||iv(e,r,s,n,f,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=c,n=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,k5(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:Oi(e.type,s),a.props=c,d=e.pendingProps,f=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=pi(l):(l=Fn(r)?Wa:mn.current,l=cl(e,l));var u=r.getDerivedStateFromProps;(p=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||f!==l)&&ov(e,a,n,l),Vo=!1,f=e.memoizedState,a.state=f,md(e,n,a,i);var y=e.memoizedState;s!==d||f!==y||Mn.current||Vo?(typeof u=="function"&&(j0(e,r,u,n),y=e.memoizedState),(c=Vo||iv(e,r,c,n,f,y,l)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),a.props=n,a.state=y,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return D0(t,e,r,n,o,i)}function D0(t,e,r,n,i,o){J5(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&Jm(e,r,!1),_o(t,e,o);n=e.stateNode,v3.current=e;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=dl(e,t.child,null,o),e.child=dl(e,null,s,o)):_n(t,e,s,o),e.memoizedState=n.state,i&&Jm(e,r,!0),e.child}function X5(t){var e=t.stateNode;e.pendingContext?Ym(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ym(t,e.context,!1),rg(t,e.containerInfo)}function dv(t,e,r,n,i){return fl(),J1(i),e.flags|=256,_n(t,e,r,n),e.child}var M0={dehydrated:null,treeContext:null,retryLane:0};function F0(t){return{baseLanes:t,cachePool:null,transitions:null}}function Q5(t,e,r){var n=e.pendingProps,i=hr.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),tr(hr,i&1),t===null)return T0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,o?(n=e.mode,o=e.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Jd(a,n,0,null),t=$a(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=F0(r),e.memoizedState=M0,t):cg(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return y3(t,e,a,n,s,i,r);if(o){o=n.fallback,a=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=aa(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=aa(s,o):(o=$a(o,a,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,a=t.child.memoizedState,a=a===null?F0(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~r,e.memoizedState=M0,n}return o=t.child,t=o.sibling,n=aa(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function cg(t,e){return e=Jd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function mf(t,e,r,n){return n!==null&&J1(n),dl(e,t.child,null,r),t=cg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function y3(t,e,r,n,i,o,a){if(r)return e.flags&256?(e.flags&=-257,n=_p(Error(Be(422))),mf(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=Jd({mode:"visible",children:n.children},i,0,null),o=$a(o,i,a,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&dl(e,t.child,null,a),e.child.memoizedState=F0(a),e.memoizedState=M0,o);if(!(e.mode&1))return mf(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(Be(419)),n=_p(o,n,void 0),mf(t,e,a,n)}if(s=(a&t.childLanes)!==0,Dn||s){if(n=Yr,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,bo(t,i),Ri(n,t,i,-1))}return mg(),n=_p(Error(Be(421))),mf(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=P3.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Jn=ra(i.nextSibling),Qn=e,ur=!0,ji=null,t!==null&&(ci[fi++]=go,ci[fi++]=mo,ci[fi++]=Va,go=t.id,mo=t.overflow,Va=e),e=cg(e,n.children),e.flags|=4096,e)}function hv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),P0(t.return,e,r)}function xp(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function Z5(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(_n(t,e,n.children,r),n=hr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hv(t,r,e);else if(t.tag===19)hv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(tr(hr,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&vd(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),xp(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&vd(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}xp(e,!0,r,null,o);break;case"together":xp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _o(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ka|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Be(153));if(e.child!==null){for(t=e.child,r=aa(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=aa(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function w3(t,e,r){switch(e.tag){case 3:X5(e),fl();break;case 5:A5(e);break;case 1:Fn(e.type)&&fd(e);break;case 4:rg(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;tr(pd,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(tr(hr,hr.current&1),e.flags|=128,null):r&e.child.childLanes?Q5(t,e,r):(tr(hr,hr.current&1),t=_o(t,e,r),t!==null?t.sibling:null);tr(hr,hr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Z5(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),tr(hr,hr.current),n)break;return null;case 22:case 23:return e.lanes=0,Y5(t,e,r)}return _o(t,e,r)}var ew,B0,tw,rw;ew=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};B0=function(){};tw=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,qa(Ji.current);var o=null;switch(r){case"input":i=s0(t,i),n=s0(t,n),o=[];break;case"select":i=gr({},i,{value:void 0}),n=gr({},n,{value:void 0}),o=[];break;case"textarea":i=c0(t,i),n=c0(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ud)}d0(r,n);var a;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(qu.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in n){var l=n[c];if(s=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(o||(o=[]),o.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(qu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&nr("scroll",t),o||s===l||(o=[])):(o=o||[]).push(c,l))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};rw=function(t,e,r,n){r!==n&&(e.flags|=4)};function cu(t,e){if(!ur)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function un(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function b3(t,e,r){var n=e.pendingProps;switch(Y1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(e),null;case 1:return Fn(e.type)&&cd(),un(e),null;case 3:return n=e.stateNode,hl(),ar(Mn),ar(mn),ig(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(pf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ji!==null&&(G0(ji),ji=null))),B0(t,e),un(e),null;case 5:ng(e);var i=qa(Qu.current);if(r=e.type,t!==null&&e.stateNode!=null)tw(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Be(166));return un(e),null}if(t=qa(Ji.current),pf(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Gi]=e,n[Ju]=o,t=(e.mode&1)!==0,r){case"dialog":nr("cancel",n),nr("close",n);break;case"iframe":case"object":case"embed":nr("load",n);break;case"video":case"audio":for(i=0;i<Nu.length;i++)nr(Nu[i],n);break;case"source":nr("error",n);break;case"img":case"image":case"link":nr("error",n),nr("load",n);break;case"details":nr("toggle",n);break;case"input":xm(n,o),nr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},nr("invalid",n);break;case"textarea":km(n,o),nr("invalid",n)}d0(r,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&hf(n.textContent,s,t),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&hf(n.textContent,s,t),i=["children",""+s]):qu.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&nr("scroll",n)}switch(r){case"input":of(n),Sm(n,o,!0);break;case"textarea":of(n),Am(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=ud)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ty(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Gi]=e,t[Ju]=n,ew(t,e,!1,!1),e.stateNode=t;e:{switch(a=h0(r,n),r){case"dialog":nr("cancel",t),nr("close",t),i=n;break;case"iframe":case"object":case"embed":nr("load",t),i=n;break;case"video":case"audio":for(i=0;i<Nu.length;i++)nr(Nu[i],t);i=n;break;case"source":nr("error",t),i=n;break;case"img":case"image":case"link":nr("error",t),nr("load",t),i=n;break;case"details":nr("toggle",t),i=n;break;case"input":xm(t,n),i=s0(t,n),nr("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=gr({},n,{value:void 0}),nr("invalid",t);break;case"textarea":km(t,n),i=c0(t,n),nr("invalid",t);break;default:i=n}d0(r,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?Cy(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Py(t,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Uu(t,l):typeof l=="number"&&Uu(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(qu.hasOwnProperty(o)?l!=null&&o==="onScroll"&&nr("scroll",t):l!=null&&R1(t,o,l,a))}switch(r){case"input":of(t),Sm(t,n,!1);break;case"textarea":of(t),Am(t);break;case"option":n.value!=null&&t.setAttribute("value",""+sa(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Qs(t,!!n.multiple,o,!1):n.defaultValue!=null&&Qs(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ud)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return un(e),null;case 6:if(t&&e.stateNode!=null)rw(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Be(166));if(r=qa(Qu.current),qa(Ji.current),pf(e)){if(n=e.stateNode,r=e.memoizedProps,n[Gi]=e,(o=n.nodeValue!==r)&&(t=Qn,t!==null))switch(t.tag){case 3:hf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hf(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Gi]=e,e.stateNode=n}return un(e),null;case 13:if(ar(hr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ur&&Jn!==null&&e.mode&1&&!(e.flags&128))b5(),fl(),e.flags|=98560,o=!1;else if(o=pf(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(Be(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Be(317));o[Gi]=e}else fl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;un(e),o=!1}else ji!==null&&(G0(ji),ji=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||hr.current&1?qr===0&&(qr=3):mg())),e.updateQueue!==null&&(e.flags|=4),un(e),null);case 4:return hl(),B0(t,e),t===null&&Ku(e.stateNode.containerInfo),un(e),null;case 10:return Z1(e.type._context),un(e),null;case 17:return Fn(e.type)&&cd(),un(e),null;case 19:if(ar(hr),o=e.memoizedState,o===null)return un(e),null;if(n=(e.flags&128)!==0,a=o.rendering,a===null)if(n)cu(o,!1);else{if(qr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=vd(t),a!==null){for(e.flags|=128,cu(o,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return tr(hr,hr.current&1|2),e.child}t=t.sibling}o.tail!==null&&Nr()>gl&&(e.flags|=128,n=!0,cu(o,!1),e.lanes=4194304)}else{if(!n)if(t=vd(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),cu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ur)return un(e),null}else 2*Nr()-o.renderingStartTime>gl&&r!==1073741824&&(e.flags|=128,n=!0,cu(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Nr(),e.sibling=null,r=hr.current,tr(hr,n?r&1|2:r&1),e):(un(e),null);case 22:case 23:return gg(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Vn&1073741824&&(un(e),e.subtreeFlags&6&&(e.flags|=8192)):un(e),null;case 24:return null;case 25:return null}throw Error(Be(156,e.tag))}function _3(t,e){switch(Y1(e),e.tag){case 1:return Fn(e.type)&&cd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hl(),ar(Mn),ar(mn),ig(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ng(e),null;case 13:if(ar(hr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Be(340));fl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ar(hr),null;case 4:return hl(),null;case 10:return Z1(e.type._context),null;case 22:case 23:return gg(),null;case 24:return null;default:return null}}var vf=!1,pn=!1,x3=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Ys(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){wr(t,e,n)}else r.current=null}function q0(t,e,r){try{r()}catch(n){wr(t,e,n)}}var pv=!1;function S3(t,e){if(S0=ad,t=s5(),G1(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,s=-1,l=-1,c=0,p=0,d=t,f=null;t:for(;;){for(var u;d!==r||i!==0&&d.nodeType!==3||(s=a+i),d!==o||n!==0&&d.nodeType!==3||(l=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(u=d.firstChild)!==null;)f=d,d=u;for(;;){if(d===t)break t;if(f===r&&++c===i&&(s=a),f===o&&++p===n&&(l=a),(u=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=u}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(k0={focusedElem:t,selectionRange:r},ad=!1,Je=e;Je!==null;)if(e=Je,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Je=t;else for(;Je!==null;){e=Je;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,b=y.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:Oi(e.type,v),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Be(163))}}catch(x){wr(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Je=t;break}Je=e.return}return y=pv,pv=!1,y}function Ru(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&q0(e,r,o)}i=i.next}while(i!==n)}}function Kd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function U0(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function nw(t){var e=t.alternate;e!==null&&(t.alternate=null,nw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gi],delete e[Ju],delete e[E0],delete e[o3],delete e[a3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iw(t){return t.tag===5||t.tag===3||t.tag===4}function gv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function z0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ud));else if(n!==4&&(t=t.child,t!==null))for(z0(t,e,r),t=t.sibling;t!==null;)z0(t,e,r),t=t.sibling}function $0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for($0(t,e,r),t=t.sibling;t!==null;)$0(t,e,r),t=t.sibling}var en=null,Pi=!1;function Bo(t,e,r){for(r=r.child;r!==null;)ow(t,e,r),r=r.sibling}function ow(t,e,r){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(qd,r)}catch{}switch(r.tag){case 5:pn||Ys(r,e);case 6:var n=en,i=Pi;en=null,Bo(t,e,r),en=n,Pi=i,en!==null&&(Pi?(t=en,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):en.removeChild(r.stateNode));break;case 18:en!==null&&(Pi?(t=en,r=r.stateNode,t.nodeType===8?gp(t.parentNode,r):t.nodeType===1&&gp(t,r),Wu(t)):gp(en,r.stateNode));break;case 4:n=en,i=Pi,en=r.stateNode.containerInfo,Pi=!0,Bo(t,e,r),en=n,Pi=i;break;case 0:case 11:case 14:case 15:if(!pn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&q0(r,e,a),i=i.next}while(i!==n)}Bo(t,e,r);break;case 1:if(!pn&&(Ys(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){wr(r,e,s)}Bo(t,e,r);break;case 21:Bo(t,e,r);break;case 22:r.mode&1?(pn=(n=pn)||r.memoizedState!==null,Bo(t,e,r),pn=n):Bo(t,e,r);break;default:Bo(t,e,r)}}function mv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new x3),e.forEach(function(n){var i=j3.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Si(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:en=s.stateNode,Pi=!1;break e;case 3:en=s.stateNode.containerInfo,Pi=!0;break e;case 4:en=s.stateNode.containerInfo,Pi=!0;break e}s=s.return}if(en===null)throw Error(Be(160));ow(o,a,i),en=null,Pi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){wr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aw(e,t),e=e.sibling}function aw(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Si(e,t),$i(t),n&4){try{Ru(3,t,t.return),Kd(3,t)}catch(v){wr(t,t.return,v)}try{Ru(5,t,t.return)}catch(v){wr(t,t.return,v)}}break;case 1:Si(e,t),$i(t),n&512&&r!==null&&Ys(r,r.return);break;case 5:if(Si(e,t),$i(t),n&512&&r!==null&&Ys(r,r.return),t.flags&32){var i=t.stateNode;try{Uu(i,"")}catch(v){wr(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=r!==null?r.memoizedProps:o,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&Oy(i,o),h0(s,a);var c=h0(s,o);for(a=0;a<l.length;a+=2){var p=l[a],d=l[a+1];p==="style"?Cy(i,d):p==="dangerouslySetInnerHTML"?Py(i,d):p==="children"?Uu(i,d):R1(i,p,d,c)}switch(s){case"input":l0(i,o);break;case"textarea":Ly(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var u=o.value;u!=null?Qs(i,!!o.multiple,u,!1):f!==!!o.multiple&&(o.defaultValue!=null?Qs(i,!!o.multiple,o.defaultValue,!0):Qs(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ju]=o}catch(v){wr(t,t.return,v)}}break;case 6:if(Si(e,t),$i(t),n&4){if(t.stateNode===null)throw Error(Be(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){wr(t,t.return,v)}}break;case 3:if(Si(e,t),$i(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Wu(e.containerInfo)}catch(v){wr(t,t.return,v)}break;case 4:Si(e,t),$i(t);break;case 13:Si(e,t),$i(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(hg=Nr())),n&4&&mv(t);break;case 22:if(p=r!==null&&r.memoizedState!==null,t.mode&1?(pn=(c=pn)||p,Si(e,t),pn=c):Si(e,t),$i(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!p&&t.mode&1)for(Je=t,p=t.child;p!==null;){for(d=Je=p;Je!==null;){switch(f=Je,u=f.child,f.tag){case 0:case 11:case 14:case 15:Ru(4,f,f.return);break;case 1:Ys(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){wr(n,r,v)}}break;case 5:Ys(f,f.return);break;case 22:if(f.memoizedState!==null){yv(d);continue}}u!==null?(u.return=f,Je=u):yv(d)}p=p.sibling}e:for(p=null,d=t;;){if(d.tag===5){if(p===null){p=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=jy("display",a))}catch(v){wr(t,t.return,v)}}}else if(d.tag===6){if(p===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){wr(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Si(e,t),$i(t),n&4&&mv(t);break;case 21:break;default:Si(e,t),$i(t)}}function $i(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(iw(r)){var n=r;break e}r=r.return}throw Error(Be(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Uu(i,""),n.flags&=-33);var o=gv(t);$0(t,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=gv(t);z0(t,s,a);break;default:throw Error(Be(161))}}catch(l){wr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function k3(t,e,r){Je=t,sw(t)}function sw(t,e,r){for(var n=(t.mode&1)!==0;Je!==null;){var i=Je,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||vf;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||pn;s=vf;var c=pn;if(vf=a,(pn=l)&&!c)for(Je=i;Je!==null;)a=Je,l=a.child,a.tag===22&&a.memoizedState!==null?wv(i):l!==null?(l.return=a,Je=l):wv(i);for(;o!==null;)Je=o,sw(o),o=o.sibling;Je=i,vf=s,pn=c}vv(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Je=o):vv(t)}}function vv(t){for(;Je!==null;){var e=Je;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pn||Kd(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!pn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Oi(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&tv(e,o,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}tv(e,a,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var p=c.memoizedState;if(p!==null){var d=p.dehydrated;d!==null&&Wu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Be(163))}pn||e.flags&512&&U0(e)}catch(f){wr(e,e.return,f)}}if(e===t){Je=null;break}if(r=e.sibling,r!==null){r.return=e.return,Je=r;break}Je=e.return}}function yv(t){for(;Je!==null;){var e=Je;if(e===t){Je=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Je=r;break}Je=e.return}}function wv(t){for(;Je!==null;){var e=Je;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Kd(4,e)}catch(l){wr(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){wr(e,i,l)}}var o=e.return;try{U0(e)}catch(l){wr(e,o,l)}break;case 5:var a=e.return;try{U0(e)}catch(l){wr(e,a,l)}}}catch(l){wr(e,e.return,l)}if(e===t){Je=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Je=s;break}Je=e.return}}var A3=Math.ceil,bd=So.ReactCurrentDispatcher,fg=So.ReactCurrentOwner,hi=So.ReactCurrentBatchConfig,Pt=0,Yr=null,Ir=null,tn=0,Vn=0,Js=da(0),qr=0,rc=null,Ka=0,Yd=0,dg=0,Iu=null,In=null,hg=0,gl=1/0,fo=null,_d=!1,H0=null,ia=null,yf=!1,Xo=null,xd=0,Du=0,W0=null,Vf=-1,Gf=0;function Sn(){return Pt&6?Nr():Vf!==-1?Vf:Vf=Nr()}function oa(t){return t.mode&1?Pt&2&&tn!==0?tn&-tn:l3.transition!==null?(Gf===0&&(Gf=Wy()),Gf):(t=zt,t!==0||(t=window.event,t=t===void 0?16:Qy(t.type)),t):1}function Ri(t,e,r,n){if(50<Du)throw Du=0,W0=null,Error(Be(185));uc(t,r,n),(!(Pt&2)||t!==Yr)&&(t===Yr&&(!(Pt&2)&&(Yd|=r),qr===4&&Ko(t,tn)),Bn(t,n),r===1&&Pt===0&&!(e.mode&1)&&(gl=Nr()+500,Wd&&ha()))}function Bn(t,e){var r=t.callbackNode;l4(t,e);var n=od(t,t===Yr?tn:0);if(n===0)r!==null&&Om(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Om(r),e===1)t.tag===0?s3(bv.bind(null,t)):v5(bv.bind(null,t)),n3(function(){!(Pt&6)&&ha()}),r=null;else{switch(Vy(n)){case 1:r=B1;break;case 4:r=$y;break;case 16:r=id;break;case 536870912:r=Hy;break;default:r=id}r=gw(r,lw.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function lw(t,e){if(Vf=-1,Gf=0,Pt&6)throw Error(Be(327));var r=t.callbackNode;if(nl()&&t.callbackNode!==r)return null;var n=od(t,t===Yr?tn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Sd(t,n);else{e=n;var i=Pt;Pt|=2;var o=cw();(Yr!==t||tn!==e)&&(fo=null,gl=Nr()+500,za(t,e));do try{O3();break}catch(s){uw(t,s)}while(!0);Q1(),bd.current=o,Pt=i,Ir!==null?e=0:(Yr=null,tn=0,e=qr)}if(e!==0){if(e===2&&(i=y0(t),i!==0&&(n=i,e=V0(t,i))),e===1)throw r=rc,za(t,0),Ko(t,n),Bn(t,Nr()),r;if(e===6)Ko(t,n);else{if(i=t.current.alternate,!(n&30)&&!N3(i)&&(e=Sd(t,n),e===2&&(o=y0(t),o!==0&&(n=o,e=V0(t,o))),e===1))throw r=rc,za(t,0),Ko(t,n),Bn(t,Nr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Be(345));case 2:La(t,In,fo);break;case 3:if(Ko(t,n),(n&130023424)===n&&(e=hg+500-Nr(),10<e)){if(od(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Sn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=N0(La.bind(null,t,In,fo),e);break}La(t,In,fo);break;case 4:if(Ko(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-Ci(n);o=1<<a,a=e[a],a>i&&(i=a),n&=~o}if(n=i,n=Nr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*A3(n/1960))-n,10<n){t.timeoutHandle=N0(La.bind(null,t,In,fo),n);break}La(t,In,fo);break;case 5:La(t,In,fo);break;default:throw Error(Be(329))}}}return Bn(t,Nr()),t.callbackNode===r?lw.bind(null,t):null}function V0(t,e){var r=Iu;return t.current.memoizedState.isDehydrated&&(za(t,e).flags|=256),t=Sd(t,e),t!==2&&(e=In,In=r,e!==null&&G0(e)),t}function G0(t){In===null?In=t:In.push.apply(In,t)}function N3(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Ii(o(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ko(t,e){for(e&=~dg,e&=~Yd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ci(e),n=1<<r;t[r]=-1,e&=~n}}function bv(t){if(Pt&6)throw Error(Be(327));nl();var e=od(t,0);if(!(e&1))return Bn(t,Nr()),null;var r=Sd(t,e);if(t.tag!==0&&r===2){var n=y0(t);n!==0&&(e=n,r=V0(t,n))}if(r===1)throw r=rc,za(t,0),Ko(t,e),Bn(t,Nr()),r;if(r===6)throw Error(Be(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,La(t,In,fo),Bn(t,Nr()),null}function pg(t,e){var r=Pt;Pt|=1;try{return t(e)}finally{Pt=r,Pt===0&&(gl=Nr()+500,Wd&&ha())}}function Ya(t){Xo!==null&&Xo.tag===0&&!(Pt&6)&&nl();var e=Pt;Pt|=1;var r=hi.transition,n=zt;try{if(hi.transition=null,zt=1,t)return t()}finally{zt=n,hi.transition=r,Pt=e,!(Pt&6)&&ha()}}function gg(){Vn=Js.current,ar(Js)}function za(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,r3(r)),Ir!==null)for(r=Ir.return;r!==null;){var n=r;switch(Y1(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&cd();break;case 3:hl(),ar(Mn),ar(mn),ig();break;case 5:ng(n);break;case 4:hl();break;case 13:ar(hr);break;case 19:ar(hr);break;case 10:Z1(n.type._context);break;case 22:case 23:gg()}r=r.return}if(Yr=t,Ir=t=aa(t.current,null),tn=Vn=e,qr=0,rc=null,dg=Yd=Ka=0,In=Iu=null,Ba!==null){for(e=0;e<Ba.length;e++)if(r=Ba[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}r.pending=n}Ba=null}return t}function uw(t,e){do{var r=Ir;try{if(Q1(),$f.current=wd,yd){for(var n=pr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}yd=!1}if(Ga=0,Gr=Br=pr=null,Cu=!1,Zu=0,fg.current=null,r===null||r.return===null){qr=1,rc=e,Ir=null;break}e:{var o=t,a=r.return,s=r,l=e;if(e=tn,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,p=s,d=p.tag;if(!(p.mode&1)&&(d===0||d===11||d===15)){var f=p.alternate;f?(p.updateQueue=f.updateQueue,p.memoizedState=f.memoizedState,p.lanes=f.lanes):(p.updateQueue=null,p.memoizedState=null)}var u=sv(a);if(u!==null){u.flags&=-257,lv(u,a,s,o,e),u.mode&1&&av(o,c,e),e=u,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){av(o,c,e),mg();break e}l=Error(Be(426))}}else if(ur&&s.mode&1){var b=sv(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),lv(b,a,s,o,e),J1(pl(l,s));break e}}o=l=pl(l,s),qr!==4&&(qr=2),Iu===null?Iu=[o]:Iu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=V5(o,l,e);ev(o,g);break e;case 1:s=l;var m=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ia===null||!ia.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var x=G5(o,s,e);ev(o,x);break e}}o=o.return}while(o!==null)}dw(r)}catch(A){e=A,Ir===r&&r!==null&&(Ir=r=r.return);continue}break}while(!0)}function cw(){var t=bd.current;return bd.current=wd,t===null?wd:t}function mg(){(qr===0||qr===3||qr===2)&&(qr=4),Yr===null||!(Ka&268435455)&&!(Yd&268435455)||Ko(Yr,tn)}function Sd(t,e){var r=Pt;Pt|=2;var n=cw();(Yr!==t||tn!==e)&&(fo=null,za(t,e));do try{E3();break}catch(i){uw(t,i)}while(!0);if(Q1(),Pt=r,bd.current=n,Ir!==null)throw Error(Be(261));return Yr=null,tn=0,qr}function E3(){for(;Ir!==null;)fw(Ir)}function O3(){for(;Ir!==null&&!Zx();)fw(Ir)}function fw(t){var e=pw(t.alternate,t,Vn);t.memoizedProps=t.pendingProps,e===null?dw(t):Ir=e,fg.current=null}function dw(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=_3(r,e),r!==null){r.flags&=32767,Ir=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qr=6,Ir=null;return}}else if(r=b3(r,e,Vn),r!==null){Ir=r;return}if(e=e.sibling,e!==null){Ir=e;return}Ir=e=t}while(e!==null);qr===0&&(qr=5)}function La(t,e,r){var n=zt,i=hi.transition;try{hi.transition=null,zt=1,L3(t,e,r,n)}finally{hi.transition=i,zt=n}return null}function L3(t,e,r,n){do nl();while(Xo!==null);if(Pt&6)throw Error(Be(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Be(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(u4(t,o),t===Yr&&(Ir=Yr=null,tn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||yf||(yf=!0,gw(id,function(){return nl(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=hi.transition,hi.transition=null;var a=zt;zt=1;var s=Pt;Pt|=4,fg.current=null,S3(t,r),aw(r,t),Y4(k0),ad=!!S0,k0=S0=null,t.current=r,k3(r),e4(),Pt=s,zt=a,hi.transition=o}else t.current=r;if(yf&&(yf=!1,Xo=t,xd=i),o=t.pendingLanes,o===0&&(ia=null),n4(r.stateNode),Bn(t,Nr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(_d)throw _d=!1,t=H0,H0=null,t;return xd&1&&t.tag!==0&&nl(),o=t.pendingLanes,o&1?t===W0?Du++:(Du=0,W0=t):Du=0,ha(),null}function nl(){if(Xo!==null){var t=Vy(xd),e=hi.transition,r=zt;try{if(hi.transition=null,zt=16>t?16:t,Xo===null)var n=!1;else{if(t=Xo,Xo=null,xd=0,Pt&6)throw Error(Be(331));var i=Pt;for(Pt|=4,Je=t.current;Je!==null;){var o=Je,a=o.child;if(Je.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(Je=c;Je!==null;){var p=Je;switch(p.tag){case 0:case 11:case 15:Ru(8,p,o)}var d=p.child;if(d!==null)d.return=p,Je=d;else for(;Je!==null;){p=Je;var f=p.sibling,u=p.return;if(nw(p),p===c){Je=null;break}if(f!==null){f.return=u,Je=f;break}Je=u}}}var y=o.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}Je=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Je=a;else e:for(;Je!==null;){if(o=Je,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ru(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,Je=g;break e}Je=o.return}}var m=t.current;for(Je=m;Je!==null;){a=Je;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,Je=_;else e:for(a=m;Je!==null;){if(s=Je,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Kd(9,s)}}catch(A){wr(s,s.return,A)}if(s===a){Je=null;break e}var x=s.sibling;if(x!==null){x.return=s.return,Je=x;break e}Je=s.return}}if(Pt=i,ha(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(qd,t)}catch{}n=!0}return n}finally{zt=r,hi.transition=e}}return!1}function _v(t,e,r){e=pl(r,e),e=V5(t,e,1),t=na(t,e,1),e=Sn(),t!==null&&(uc(t,1,e),Bn(t,e))}function wr(t,e,r){if(t.tag===3)_v(t,t,r);else for(;e!==null;){if(e.tag===3){_v(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ia===null||!ia.has(n))){t=pl(r,t),t=G5(e,t,1),e=na(e,t,1),t=Sn(),e!==null&&(uc(e,1,t),Bn(e,t));break}}e=e.return}}function T3(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Sn(),t.pingedLanes|=t.suspendedLanes&r,Yr===t&&(tn&r)===r&&(qr===4||qr===3&&(tn&130023424)===tn&&500>Nr()-hg?za(t,0):dg|=r),Bn(t,e)}function hw(t,e){e===0&&(t.mode&1?(e=lf,lf<<=1,!(lf&130023424)&&(lf=4194304)):e=1);var r=Sn();t=bo(t,e),t!==null&&(uc(t,e,r),Bn(t,r))}function P3(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),hw(t,r)}function j3(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Be(314))}n!==null&&n.delete(e),hw(t,r)}var pw;pw=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mn.current)Dn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Dn=!1,w3(t,e,r);Dn=!!(t.flags&131072)}else Dn=!1,ur&&e.flags&1048576&&y5(e,hd,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Wf(t,e),t=e.pendingProps;var i=cl(e,mn.current);rl(e,r),i=ag(null,e,n,t,i,r);var o=sg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fn(n)?(o=!0,fd(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tg(e),i.updater=Gd,e.stateNode=i,i._reactInternals=e,C0(e,n,t,r),e=D0(null,e,n,!0,o,r)):(e.tag=0,ur&&o&&K1(e),_n(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Wf(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=R3(n),t=Oi(n,t),i){case 0:e=I0(null,e,n,t,r);break e;case 1:e=fv(null,e,n,t,r);break e;case 11:e=uv(null,e,n,t,r);break e;case 14:e=cv(null,e,n,Oi(n.type,t),r);break e}throw Error(Be(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Oi(n,i),I0(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Oi(n,i),fv(t,e,n,i,r);case 3:e:{if(X5(e),t===null)throw Error(Be(387));n=e.pendingProps,o=e.memoizedState,i=o.element,k5(t,e),md(e,n,null,r);var a=e.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=pl(Error(Be(423)),e),e=dv(t,e,n,r,i);break e}else if(n!==i){i=pl(Error(Be(424)),e),e=dv(t,e,n,r,i);break e}else for(Jn=ra(e.stateNode.containerInfo.firstChild),Qn=e,ur=!0,ji=null,r=x5(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fl(),n===i){e=_o(t,e,r);break e}_n(t,e,n,r)}e=e.child}return e;case 5:return A5(e),t===null&&T0(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,A0(n,i)?a=null:o!==null&&A0(n,o)&&(e.flags|=32),J5(t,e),_n(t,e,a,r),e.child;case 6:return t===null&&T0(e),null;case 13:return Q5(t,e,r);case 4:return rg(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=dl(e,null,n,r):_n(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Oi(n,i),uv(t,e,n,i,r);case 7:return _n(t,e,e.pendingProps,r),e.child;case 8:return _n(t,e,e.pendingProps.children,r),e.child;case 12:return _n(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,tr(pd,n._currentValue),n._currentValue=a,o!==null)if(Ii(o.value,a)){if(o.children===i.children&&!Mn.current){e=_o(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=vo(-1,r&-r),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var p=c.pending;p===null?l.next=l:(l.next=p.next,p.next=l),c.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),P0(o.return,r,e),s.lanes|=r;break}l=l.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Be(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),P0(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}_n(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,rl(e,r),i=pi(i),n=n(i),e.flags|=1,_n(t,e,n,r),e.child;case 14:return n=e.type,i=Oi(n,e.pendingProps),i=Oi(n.type,i),cv(t,e,n,i,r);case 15:return K5(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Oi(n,i),Wf(t,e),e.tag=1,Fn(n)?(t=!0,fd(e)):t=!1,rl(e,r),W5(e,n,i),C0(e,n,i,r),D0(null,e,n,!0,t,r);case 19:return Z5(t,e,r);case 22:return Y5(t,e,r)}throw Error(Be(156,e.tag))};function gw(t,e){return zy(t,e)}function C3(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(t,e,r,n){return new C3(t,e,r,n)}function vg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function R3(t){if(typeof t=="function")return vg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D1)return 11;if(t===M1)return 14}return 2}function aa(t,e){var r=t.alternate;return r===null?(r=di(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Kf(t,e,r,n,i,o){var a=2;if(n=t,typeof t=="function")vg(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case qs:return $a(r.children,i,o,e);case I1:a=8,i|=8;break;case n0:return t=di(12,r,e,i|2),t.elementType=n0,t.lanes=o,t;case i0:return t=di(13,r,e,i),t.elementType=i0,t.lanes=o,t;case o0:return t=di(19,r,e,i),t.elementType=o0,t.lanes=o,t;case Ay:return Jd(r,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sy:a=10;break e;case ky:a=9;break e;case D1:a=11;break e;case M1:a=14;break e;case Wo:a=16,n=null;break e}throw Error(Be(130,t==null?t:typeof t,""))}return e=di(a,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function $a(t,e,r,n){return t=di(7,t,n,e),t.lanes=r,t}function Jd(t,e,r,n){return t=di(22,t,n,e),t.elementType=Ay,t.lanes=r,t.stateNode={isHidden:!1},t}function Sp(t,e,r){return t=di(6,t,null,e),t.lanes=r,t}function kp(t,e,r){return e=di(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function I3(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ip(0),this.expirationTimes=ip(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ip(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yg(t,e,r,n,i,o,a,s,l){return t=new I3(t,e,r,s,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=di(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},tg(o),t}function D3(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bs,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function mw(t){if(!t)return la;t=t._reactInternals;e:{if(es(t)!==t||t.tag!==1)throw Error(Be(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Be(171))}if(t.tag===1){var r=t.type;if(Fn(r))return m5(t,r,e)}return e}function vw(t,e,r,n,i,o,a,s,l){return t=yg(r,n,!0,t,i,o,a,s,l),t.context=mw(null),r=t.current,n=Sn(),i=oa(r),o=vo(n,i),o.callback=e??null,na(r,o,i),t.current.lanes=i,uc(t,i,n),Bn(t,n),t}function Xd(t,e,r,n){var i=e.current,o=Sn(),a=oa(i);return r=mw(r),e.context===null?e.context=r:e.pendingContext=r,e=vo(o,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=na(i,e,a),t!==null&&(Ri(t,i,a,o),zf(t,i,a)),a}function kd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function wg(t,e){xv(t,e),(t=t.alternate)&&xv(t,e)}function M3(){return null}var yw=typeof reportError=="function"?reportError:function(t){console.error(t)};function bg(t){this._internalRoot=t}Qd.prototype.render=bg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Be(409));Xd(t,e,null,null)};Qd.prototype.unmount=bg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ya(function(){Xd(null,t,null,null)}),e[wo]=null}};function Qd(t){this._internalRoot=t}Qd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Yy();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Go.length&&e!==0&&e<Go[r].priority;r++);Go.splice(r,0,t),r===0&&Xy(t)}};function _g(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sv(){}function F3(t,e,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var c=kd(a);o.call(c)}}var a=vw(e,n,t,0,null,!1,!1,"",Sv);return t._reactRootContainer=a,t[wo]=a.current,Ku(t.nodeType===8?t.parentNode:t),Ya(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var c=kd(l);s.call(c)}}var l=yg(t,0,!1,null,null,!1,!1,"",Sv);return t._reactRootContainer=l,t[wo]=l.current,Ku(t.nodeType===8?t.parentNode:t),Ya(function(){Xd(e,l,r,n)}),l}function eh(t,e,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=kd(a);s.call(l)}}Xd(e,a,t,i)}else a=F3(r,e,t,i,n);return kd(a)}Gy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Au(e.pendingLanes);r!==0&&(q1(e,r|1),Bn(e,Nr()),!(Pt&6)&&(gl=Nr()+500,ha()))}break;case 13:Ya(function(){var n=bo(t,1);if(n!==null){var i=Sn();Ri(n,t,1,i)}}),wg(t,1)}};U1=function(t){if(t.tag===13){var e=bo(t,134217728);if(e!==null){var r=Sn();Ri(e,t,134217728,r)}wg(t,134217728)}};Ky=function(t){if(t.tag===13){var e=oa(t),r=bo(t,e);if(r!==null){var n=Sn();Ri(r,t,e,n)}wg(t,e)}};Yy=function(){return zt};Jy=function(t,e){var r=zt;try{return zt=t,e()}finally{zt=r}};g0=function(t,e,r){switch(e){case"input":if(l0(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Hd(n);if(!i)throw Error(Be(90));Ey(n),l0(n,i)}}}break;case"textarea":Ly(t,r);break;case"select":e=r.value,e!=null&&Qs(t,!!r.multiple,e,!1)}};Dy=pg;My=Ya;var B3={usingClientEntryPoint:!1,Events:[fc,Hs,Hd,Ry,Iy,pg]},fu={findFiberByHostInstance:Fa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},q3={bundleType:fu.bundleType,version:fu.version,rendererPackageName:fu.rendererPackageName,rendererConfig:fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:So.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qy(t),t===null?null:t.stateNode},findFiberByHostInstance:fu.findFiberByHostInstance||M3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wf.isDisabled&&wf.supportsFiber)try{qd=wf.inject(q3),Yi=wf}catch{}}ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B3;ei.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_g(e))throw Error(Be(200));return D3(t,e,null,r)};ei.createRoot=function(t,e){if(!_g(t))throw Error(Be(299));var r=!1,n="",i=yw;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=yg(t,1,!1,null,null,r,!1,n,i),t[wo]=e.current,Ku(t.nodeType===8?t.parentNode:t),new bg(e)};ei.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Be(188)):(t=Object.keys(t).join(","),Error(Be(268,t)));return t=qy(e),t=t===null?null:t.stateNode,t};ei.flushSync=function(t){return Ya(t)};ei.hydrate=function(t,e,r){if(!Zd(e))throw Error(Be(200));return eh(null,t,e,!0,r)};ei.hydrateRoot=function(t,e,r){if(!_g(t))throw Error(Be(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",a=yw;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=vw(e,null,t,1,r??null,i,!1,o,a),t[wo]=e.current,Ku(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Qd(e)};ei.render=function(t,e,r){if(!Zd(e))throw Error(Be(200));return eh(null,t,e,!1,r)};ei.unmountComponentAtNode=function(t){if(!Zd(t))throw Error(Be(40));return t._reactRootContainer?(Ya(function(){eh(null,null,t,!1,function(){t._reactRootContainer=null,t[wo]=null})}),!0):!1};ei.unstable_batchedUpdates=pg;ei.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Zd(r))throw Error(Be(200));if(t==null||t._reactInternals===void 0)throw Error(Be(38));return eh(t,e,r,!1,n)};ei.version="18.3.1-next-f1338f8080-20240426";function ww(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ww)}catch(t){console.error(t)}}ww(),wy.exports=ei;var xg=wy.exports;const Sg=E1(xg);var kv=xg;t0.createRoot=kv.createRoot,t0.hydrateRoot=kv.hydrateRoot;var K0=function(t,e){return K0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},K0(t,e)};function bw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");K0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ad=function(){return Ad=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ad.apply(this,arguments)};function bl(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function _w(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,r,o):a(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}function xw(t,e){return function(r,n){e(r,n,t)}}function Sw(t,e,r,n,i,o){function a(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var s=n.kind,l=s==="getter"?"get":s==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,p=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),d,f=!1,u=r.length-1;u>=0;u--){var y={};for(var v in n)y[v]=v==="access"?{}:n[v];for(var v in n.access)y.access[v]=n.access[v];y.addInitializer=function(g){if(f)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(g||null))};var b=(0,r[u])(s==="accessor"?{get:p.get,set:p.set}:p[l],y);if(s==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(d=a(b.get))&&(p.get=d),(d=a(b.set))&&(p.set=d),(d=a(b.init))&&i.unshift(d)}else(d=a(b))&&(s==="field"?i.unshift(d):p[l]=d)}c&&Object.defineProperty(c,n.name,p),f=!0}function kw(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function Aw(t){return typeof t=="symbol"?t:"".concat(t)}function Nw(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Ew(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function et(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(p){try{c(n.next(p))}catch(d){a(d)}}function l(p){try{c(n.throw(p))}catch(d){a(d)}}function c(p){p.done?o(p.value):i(p.value).then(s,l)}c((n=n.apply(t,e||[])).next())})}function Ow(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(p){return l([c,p])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(p){c=[6,p],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var th=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function Lw(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&th(e,t,r)}function Nd(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kg(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function Tw(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(kg(arguments[e]));return t}function Pw(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function jw(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function ml(t){return this instanceof ml?(this.v=t,this):new ml(t)}function Cw(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(u){return function(y){return Promise.resolve(y).then(u,d)}}function s(u,y){n[u]&&(i[u]=function(v){return new Promise(function(b,g){o.push([u,v,b,g])>1||l(u,v)})},y&&(i[u]=y(i[u])))}function l(u,y){try{c(n[u](y))}catch(v){f(o[0][3],v)}}function c(u){u.value instanceof ml?Promise.resolve(u.value.v).then(p,d):f(o[0][2],u)}function p(u){l("next",u)}function d(u){l("throw",u)}function f(u,y){u(y),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Rw(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=t[i]?function(a){return(r=!r)?{value:ml(t[i](a)),done:!1}:o?o(a):a}:o}}function Iw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Nd=="function"?Nd(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(s,l){a=t[o](a),i(s,l,a.done,a.value)})}}function i(o,a,s,l){Promise.resolve(l).then(function(c){o({value:c,done:s})},a)}}function Dw(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var U3=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Y0=function(t){return Y0=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Y0(t)};function Mw(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Y0(t),n=0;n<r.length;n++)r[n]!=="default"&&th(e,t,r[n]);return U3(e,t),e}function Fw(t){return t&&t.__esModule?t:{default:t}}function Bw(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function qw(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function Uw(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function zw(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var z3=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function $w(t){function e(o){t.error=t.hasError?new z3(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(i,function(a){return e(a),i()})}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function Hw(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,o,a){return n?e?".jsx":".js":i&&(!o||!a)?r:i+o+"."+a.toLowerCase()+"js"}):t}const $3={__extends:bw,__assign:Ad,__rest:bl,__decorate:_w,__param:xw,__esDecorate:Sw,__runInitializers:kw,__propKey:Aw,__setFunctionName:Nw,__metadata:Ew,__awaiter:et,__generator:Ow,__createBinding:th,__exportStar:Lw,__values:Nd,__read:kg,__spread:Tw,__spreadArrays:Pw,__spreadArray:jw,__await:ml,__asyncGenerator:Cw,__asyncDelegator:Rw,__asyncValues:Iw,__makeTemplateObject:Dw,__importStar:Mw,__importDefault:Fw,__classPrivateFieldGet:Bw,__classPrivateFieldSet:qw,__classPrivateFieldIn:Uw,__addDisposableResource:zw,__disposeResources:$w,__rewriteRelativeImportExtension:Hw},H3=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:zw,get __assign(){return Ad},__asyncDelegator:Rw,__asyncGenerator:Cw,__asyncValues:Iw,__await:ml,__awaiter:et,__classPrivateFieldGet:Bw,__classPrivateFieldIn:Uw,__classPrivateFieldSet:qw,__createBinding:th,__decorate:_w,__disposeResources:$w,__esDecorate:Sw,__exportStar:Lw,__extends:bw,__generator:Ow,__importDefault:Fw,__importStar:Mw,__makeTemplateObject:Dw,__metadata:Ew,__param:xw,__propKey:Aw,__read:kg,__rest:bl,__rewriteRelativeImportExtension:Hw,__runInitializers:kw,__setFunctionName:Nw,__spread:Tw,__spreadArray:jw,__spreadArrays:Pw,__values:Nd,default:$3},Symbol.toStringTag,{value:"Module"})),W3=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Ag extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class V3 extends Ag{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Av extends Ag{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Nv extends Ag{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var J0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(J0||(J0={}));class G3{constructor(e,{headers:r={},customFetch:n,region:i=J0.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=W3(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return et(this,arguments,void 0,function*(r,n={}){var i;let o,a;try{const{headers:s,method:l,body:c,signal:p,timeout:d}=n;let f={},{region:u}=n;u||(u=this.region);const y=new URL(`${this.url}/${r}`);u&&u!=="any"&&(f["x-region"]=u,y.searchParams.set("forceFunctionRegion",u));let v;c&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(f["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(f["Content-Type"]="application/json",v=JSON.stringify(c)):v=c;let b=p;d&&(a=new AbortController,o=setTimeout(()=>a.abort(),d),p?(b=a.signal,p.addEventListener("abort",()=>a.abort())):b=a.signal);const g=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),s),body:v,signal:b}).catch(A=>{throw new V3(A)}),m=g.headers.get("x-relay-error");if(m&&m==="true")throw new Av(g);if(!g.ok)throw new Nv(g);let _=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),x;return _==="application/json"?x=yield g.json():_==="application/octet-stream"||_==="application/pdf"?x=yield g.blob():_==="text/event-stream"?x=g:_==="multipart/form-data"?x=yield g.formData():x=yield g.text(),{data:x,error:null,response:g}}catch(s){return{data:null,error:s,response:s instanceof Nv||s instanceof Av?s.context:void 0}}finally{o&&clearTimeout(o)}})}}var xn={};const _l=gx(H3);var bf={},_f={},xf={},Sf={},kf={},Af={},Ev;function Ww(){if(Ev)return Af;Ev=1,Object.defineProperty(Af,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Af.default=t,Af}var Ov;function Vw(){if(Ov)return kf;Ov=1,Object.defineProperty(kf,"__esModule",{value:!0});const e=_l.__importDefault(Ww());class r{constructor(i){var o,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let s=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,p,d,f;let u=null,y=null,v=null,b=l.status,g=l.statusText;if(l.ok){if(this.method!=="HEAD"){const A=await l.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?y=A:y=JSON.parse(A))}const _=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),x=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");_&&x&&x.length>1&&(v=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(u={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,v=null,b=406,g="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const _=await l.text();try{u=JSON.parse(_),Array.isArray(u)&&l.status===404&&(y=[],u=null,b=200,g="OK")}catch{l.status===404&&_===""?(b=204,g="No Content"):u={message:_}}if(u&&this.isMaybeSingle&&(!((f=u==null?void 0:u.details)===null||f===void 0)&&f.includes("0 rows"))&&(u=null,b=200,g="OK"),u&&this.shouldThrowOnError)throw new e.default(u)}return{error:u,data:y,count:v,status:b,statusText:g}});return this.shouldThrowOnError||(s=s.catch(l=>{var c,p,d,f,u,y;let v="";const b=l==null?void 0:l.cause;if(b){const g=(c=b==null?void 0:b.message)!==null&&c!==void 0?c:"",m=(p=b==null?void 0:b.code)!==null&&p!==void 0?p:"";v=`${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"FetchError"}: ${l==null?void 0:l.message}`,v+=`

Caused by: ${(f=b==null?void 0:b.name)!==null&&f!==void 0?f:"Error"}: ${g}`,m&&(v+=` (${m})`),b!=null&&b.stack&&(v+=`
${b.stack}`)}else v=(u=l==null?void 0:l.stack)!==null&&u!==void 0?u:"";return{error:{message:`${(y=l==null?void 0:l.name)!==null&&y!==void 0?y:"FetchError"}: ${l==null?void 0:l.message}`,details:v,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(i,o)}returns(){return this}overrideTypes(){return this}}return kf.default=r,kf}var Lv;function Gw(){if(Lv)return Sf;Lv=1,Object.defineProperty(Sf,"__esModule",{value:!0});const e=_l.__importDefault(Vw());class r extends e.default{select(i){let o=!1;const a=(i??"*").split("").map(s=>/\s/.test(s)&&!o?"":(s==='"'&&(o=!o),s)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:a,foreignTable:s,referencedTable:l=s}={}){const c=l?`${l}.order`:"order",p=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${p?`${p},`:""}${i}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:a=o}={}){const s=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${i}`),this}range(i,o,{foreignTable:a,referencedTable:s=a}={}){const l=typeof s>"u"?"offset":`${s}.offset`,c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:a=!1,buffers:s=!1,wal:l=!1,format:c="text"}={}){var p;const d=[i?"analyze":null,o?"verbose":null,a?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Sf.default=r,Sf}var Tv;function Ng(){if(Tv)return xf;Tv=1,Object.defineProperty(xf,"__esModule",{value:!0});const e=_l.__importDefault(Gw()),r=new RegExp("[,()]");class n extends e.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const s=Array.from(new Set(a)).map(l=>typeof l=="string"&&r.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(o,`in.(${s})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:s,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const p=s===void 0?"":`(${s})`;return this.url.searchParams.append(o,`${c}fts${p}.${a}`),this}match(o){return Object.entries(o).forEach(([a,s])=>{this.url.searchParams.append(a,`eq.${s}`)}),this}not(o,a,s){return this.url.searchParams.append(o,`not.${a}.${s}`),this}or(o,{foreignTable:a,referencedTable:s=a}={}){const l=s?`${s}.or`:"or";return this.url.searchParams.append(l,`(${o})`),this}filter(o,a,s){return this.url.searchParams.append(o,`${a}.${s}`),this}}return xf.default=n,xf}var Pv;function Kw(){if(Pv)return _f;Pv=1,Object.defineProperty(_f,"__esModule",{value:!0});const e=_l.__importDefault(Ng());class r{constructor(i,{headers:o={},schema:a,fetch:s}){this.url=i,this.headers=new Headers(o),this.schema=a,this.fetch=s}select(i,o){const{head:a=!1,count:s}=o??{},l=a?"HEAD":"GET";let c=!1;const p=(i??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",p),s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:a=!0}={}){var s;const l="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((p,d)=>p.concat(Object.keys(d)),[]);if(c.length>0){const p=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:a=!1,count:s,defaultToNull:l=!0}={}){var c;const p="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((f,u)=>f.concat(Object.keys(u)),[]);if(d.length>0){const f=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:o}={}){var a;const s="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var o;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return _f.default=r,_f}var jv;function K3(){if(jv)return bf;jv=1,Object.defineProperty(bf,"__esModule",{value:!0});const t=_l,e=t.__importDefault(Kw()),r=t.__importDefault(Ng());class n{constructor(o,{headers:a={},schema:s,fetch:l}={}){this.url=o,this.headers=new Headers(a),this.schemaName=s,this.fetch=l}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:s=!1,get:l=!1,count:c}={}){var p;let d;const f=new URL(`${this.url}/rpc/${o}`);let u;s||l?(d=s?"HEAD":"GET",Object.entries(a).filter(([v,b])=>b!==void 0).map(([v,b])=>[v,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([v,b])=>{f.searchParams.append(v,b)})):(d="POST",u=a);const y=new Headers(this.headers);return c&&y.set("Prefer",`count=${c}`),new r.default({method:d,url:f,headers:y,schema:this.schemaName,body:u,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return bf.default=n,bf}Object.defineProperty(xn,"__esModule",{value:!0});var Yw=xn.PostgrestError=ob=xn.PostgrestBuilder=nb=xn.PostgrestTransformBuilder=tb=xn.PostgrestFilterBuilder=Zw=xn.PostgrestQueryBuilder=Xw=xn.PostgrestClient=void 0;const xl=_l,Jw=xl.__importDefault(K3());var Xw=xn.PostgrestClient=Jw.default;const Qw=xl.__importDefault(Kw());var Zw=xn.PostgrestQueryBuilder=Qw.default;const eb=xl.__importDefault(Ng());var tb=xn.PostgrestFilterBuilder=eb.default;const rb=xl.__importDefault(Gw());var nb=xn.PostgrestTransformBuilder=rb.default;const ib=xl.__importDefault(Vw());var ob=xn.PostgrestBuilder=ib.default;const ab=xl.__importDefault(Ww());Yw=xn.PostgrestError=ab.default;var sb=xn.default={PostgrestClient:Jw.default,PostgrestQueryBuilder:Qw.default,PostgrestFilterBuilder:eb.default,PostgrestTransformBuilder:rb.default,PostgrestBuilder:ib.default,PostgrestError:ab.default};const Y3=px({__proto__:null,get PostgrestBuilder(){return ob},get PostgrestClient(){return Xw},get PostgrestError(){return Yw},get PostgrestFilterBuilder(){return tb},get PostgrestQueryBuilder(){return Zw},get PostgrestTransformBuilder(){return nb},default:sb},[xn]),{PostgrestClient:J3,PostgrestQueryBuilder:Sj,PostgrestFilterBuilder:kj,PostgrestTransformBuilder:Aj,PostgrestBuilder:Nj,PostgrestError:Ej}=sb||Y3;class X3{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Q3="2.83.0",Z3=`realtime-js/${Q3}`,lb="1.0.0",eS="2.0.0",Cv=lb,X0=1e4,tS=1e3,rS=100;var Ra;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ra||(Ra={}));var Fr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Fr||(Fr={}));var ui;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ui||(ui={}));var Q0;(function(t){t.websocket="websocket"})(Q0||(Q0={}));var Ia;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ia||(Ia={}));class nS{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,r){if(this._isArrayBuffer(e.payload))return r(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodePush(e){var r,n;const{event:i,topic:o,payload:a}=e,s=(r=e.ref)!==null&&r!==void 0?r:"",l=(n=e.join_ref)!==null&&n!==void 0?n:"",c=this.META_LENGTH+l.length+s.length+o.length+i.length,p=new ArrayBuffer(this.HEADER_LENGTH+c);let d=new DataView(p),f=0;d.setUint8(f++,this.KINDS.push),d.setUint8(f++,l.length),d.setUint8(f++,s.length),d.setUint8(f++,o.length),d.setUint8(f++,i.length),Array.from(l,y=>d.setUint8(f++,y.charCodeAt(0))),Array.from(s,y=>d.setUint8(f++,y.charCodeAt(0))),Array.from(o,y=>d.setUint8(f++,y.charCodeAt(0))),Array.from(i,y=>d.setUint8(f++,y.charCodeAt(0)));var u=new Uint8Array(p.byteLength+a.byteLength);return u.set(new Uint8Array(p),0),u.set(new Uint8Array(a),p.byteLength),u.buffer}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n,i,o;const a=e.topic,s=(r=e.ref)!==null&&r!==void 0?r:"",l=(n=e.join_ref)!==null&&n!==void 0?n:"",c=e.payload.event,p=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:new ArrayBuffer(0),d=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+s.length+a.length+c.length,f=new ArrayBuffer(this.HEADER_LENGTH+d);let u=new DataView(f),y=0;u.setUint8(y++,this.KINDS.userBroadcastPush),u.setUint8(y++,l.length),u.setUint8(y++,s.length),u.setUint8(y++,a.length),u.setUint8(y++,c.length),u.setUint8(y++,this.BINARY_ENCODING),Array.from(l,b=>u.setUint8(y++,b.charCodeAt(0))),Array.from(s,b=>u.setUint8(y++,b.charCodeAt(0))),Array.from(a,b=>u.setUint8(y++,b.charCodeAt(0))),Array.from(c,b=>u.setUint8(y++,b.charCodeAt(0)));var v=new Uint8Array(f.byteLength+p.byteLength);return v.set(new Uint8Array(f),0),v.set(new Uint8Array(p),f.byteLength),v.buffer}_encodeJsonUserBroadcastPush(e){var r,n,i,o;const a=e.topic,s=(r=e.ref)!==null&&r!==void 0?r:"",l=(n=e.join_ref)!==null&&n!==void 0?n:"",c=e.payload.event,p=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:{},f=new TextEncoder().encode(JSON.stringify(p)).buffer,u=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+s.length+a.length+c.length,y=new ArrayBuffer(this.HEADER_LENGTH+u);let v=new DataView(y),b=0;v.setUint8(b++,this.KINDS.userBroadcastPush),v.setUint8(b++,l.length),v.setUint8(b++,s.length),v.setUint8(b++,a.length),v.setUint8(b++,c.length),v.setUint8(b++,this.JSON_ENCODING),Array.from(l,m=>v.setUint8(b++,m.charCodeAt(0))),Array.from(s,m=>v.setUint8(b++,m.charCodeAt(0))),Array.from(a,m=>v.setUint8(b++,m.charCodeAt(0))),Array.from(c,m=>v.setUint8(b++,m.charCodeAt(0)));var g=new Uint8Array(y.byteLength+f.byteLength);return g.set(new Uint8Array(y),0),g.set(new Uint8Array(f),y.byteLength),g.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,o,a,s,l]=n;return r({join_ref:i,ref:o,topic:a,event:s,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(e,r,i);case this.KINDS.reply:return this._decodeReply(e,r,i);case this.KINDS.broadcast:return this._decodeBroadcast(e,r,i);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,i)}}_decodePush(e,r,n){const i=r.getUint8(1),o=r.getUint8(2),a=r.getUint8(3);let s=this.HEADER_LENGTH+this.META_LENGTH-1;const l=n.decode(e.slice(s,s+i));s=s+i;const c=n.decode(e.slice(s,s+o));s=s+o;const p=n.decode(e.slice(s,s+a));s=s+a;const d=JSON.parse(n.decode(e.slice(s,e.byteLength)));return{join_ref:l,ref:null,topic:c,event:p,payload:d}}_decodeReply(e,r,n){const i=r.getUint8(1),o=r.getUint8(2),a=r.getUint8(3),s=r.getUint8(4);let l=this.HEADER_LENGTH+this.META_LENGTH;const c=n.decode(e.slice(l,l+i));l=l+i;const p=n.decode(e.slice(l,l+o));l=l+o;const d=n.decode(e.slice(l,l+a));l=l+a;const f=n.decode(e.slice(l,l+s));l=l+s;const u=JSON.parse(n.decode(e.slice(l,e.byteLength))),y={status:f,response:u};return{join_ref:c,ref:p,topic:d,event:ui.reply,payload:y}}_decodeBroadcast(e,r,n){const i=r.getUint8(1),o=r.getUint8(2);let a=this.HEADER_LENGTH+2;const s=n.decode(e.slice(a,a+i));a=a+i;const l=n.decode(e.slice(a,a+o));a=a+o;const c=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{join_ref:null,ref:null,topic:s,event:l,payload:c}}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),o=r.getUint8(2),a=r.getUint8(3),s=r.getUint8(4);let l=this.HEADER_LENGTH+4;const c=n.decode(e.slice(l,l+i));l=l+i;const p=n.decode(e.slice(l,l+o));l=l+o;const d=n.decode(e.slice(l,l+a));l=l+a;const f=e.slice(l,e.byteLength),u=s===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,y={type:this.BROADCAST,event:p,payload:u};return a>0&&(y.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST,payload:y}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class ub{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Zt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Zt||(Zt={}));const Rv=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=iS(a,t,e,i),o),{}):{}},iS=(t,e,r,n)=>{const i=e.find(s=>s.name===t),o=i==null?void 0:i.type,a=r[t];return o&&!n.includes(o)?cb(o,a):Z0(a)},cb=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return lS(e,r)}switch(t){case Zt.bool:return oS(e);case Zt.float4:case Zt.float8:case Zt.int2:case Zt.int4:case Zt.int8:case Zt.numeric:case Zt.oid:return aS(e);case Zt.json:case Zt.jsonb:return sS(e);case Zt.timestamp:return uS(e);case Zt.abstime:case Zt.date:case Zt.daterange:case Zt.int4range:case Zt.int8range:case Zt.money:case Zt.reltime:case Zt.text:case Zt.time:case Zt.timestamptz:case Zt.timetz:case Zt.tsrange:case Zt.tstzrange:return Z0(e);default:return Z0(e)}},Z0=t=>t,oS=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},aS=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},sS=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},lS=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const a=t.slice(1,r);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>cb(e,s))}return t},uS=t=>typeof t=="string"?t.replace(" ","T"):t,fb=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ap{constructor(e,r,n={},i=X0){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Iv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Iv||(Iv={}));class Mu{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mu.syncState(this.state,i,o,a),this.pendingDiffs.forEach(l=>{this.state=Mu.syncDiff(this.state,l,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Mu.syncDiff(this.state,i,o,a),s())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const o=this.cloneDeep(e),a=this.transformState(r),s={},l={};return this.map(o,(c,p)=>{a[c]||(l[c]=p)}),this.map(a,(c,p)=>{const d=o[c];if(d){const f=p.map(b=>b.presence_ref),u=d.map(b=>b.presence_ref),y=p.filter(b=>u.indexOf(b.presence_ref)<0),v=d.filter(b=>f.indexOf(b.presence_ref)<0);y.length>0&&(s[c]=y),v.length>0&&(l[c]=v)}else s[c]=p}),this.syncDiff(o,{joins:s,leaves:l},n,i)}static syncDiff(e,r,n,i){const{joins:o,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(s,l)=>{var c;const p=(c=e[s])!==null&&c!==void 0?c:[];if(e[s]=this.cloneDeep(l),p.length>0){const d=e[s].map(u=>u.presence_ref),f=p.filter(u=>d.indexOf(u.presence_ref)<0);e[s].unshift(...f)}n(s,p,l)}),this.map(a,(s,l)=>{let c=e[s];if(!c)return;const p=l.map(d=>d.presence_ref);c=c.filter(d=>p.indexOf(d.presence_ref)<0),e[s]=c,i(s,c,l),c.length===0&&delete e[s]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Dv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Dv||(Dv={}));var Fu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Fu||(Fu={}));var ho;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ho||(ho={}));class Eg{constructor(e,r={config:{}},n){var i,o;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Fr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ap(this,ui.join,this.params,this.timeout),this.rejoinTimer=new ub(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fr.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Fr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Fr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ui.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new Mu(this),this.broadcastEndpointURL=fb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Fr.closed){const{config:{broadcast:a,presence:s,private:l}}=this.params,c=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[Fu.PRESENCE]&&this.bindings[Fu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},f={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:p}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(u=>e==null?void 0:e(ho.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(ho.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var y;if(this.socket.setAuth(),u===void 0){e==null||e(ho.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,g=[];for(let m=0;m<b;m++){const _=v[m],{filter:{event:x,schema:A,table:I,filter:P}}=_,O=u&&u[m];if(O&&O.event===x&&O.schema===A&&O.table===I&&O.filter===P)g.push(Object.assign(Object.assign({},_),{id:O.id}));else{this.unsubscribe(),this.state=Fr.errored,e==null||e(ho.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(ho.SUBSCRIBED);return}}).receive("error",u=>{this.state=Fr.errored,e==null||e(ho.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ho.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Fr.joined&&e===Fu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let l=s.statusText;try{const c=await s.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,l;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Fr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ui.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Ap(this,ui.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Fr.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,o=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(o),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ap(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>rS){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,o;const a=e.toLocaleLowerCase(),{close:s,error:l,leave:c,join:p}=ui;if(n&&[s,l,c,p].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(u=>{var y,v,b;return((y=u.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(v=u.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(u=>u.callback(f,n)):(o=this.bindings[a])===null||o===void 0||o.filter(u=>{var y,v,b,g,m,_;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in u){const x=u.id,A=(y=u.filter)===null||y===void 0?void 0:y.event;return x&&((v=r.ids)===null||v===void 0?void 0:v.includes(x))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const x=(m=(g=u==null?void 0:u.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return x==="*"||x===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return u.type.toLocaleLowerCase()===a}).map(u=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:v,table:b,commit_timestamp:g,type:m,errors:_}=y;f=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:g,eventType:m,new:{},old:{},errors:_}),this._getPayloadRecords(y))}u.callback(f,n)})}_isClosed(){return this.state===Fr.closed}_isJoined(){return this.state===Fr.joined}_isJoining(){return this.state===Fr.joining}_isLeaving(){return this.state===Fr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),o={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Eg.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ui.close,{},e)}_onError(e){this._on(ui.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Rv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Rv(e.columns,e.old_record)),r}}const Np=()=>{},Nf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},cS=[1e3,2e3,5e3,1e4],fS=1e4,dS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class hS{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=X0,this.transport=null,this.heartbeatIntervalMs=Nf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Np,this.ref=0,this.reconnectTimer=null,this.vsn=Cv,this.logger=Np,this.conn=null,this.sendBuffer=[],this.serializer=new nS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Q0.websocket}`,this.httpEndpoint=fb(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=X3.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ra.connecting:return Ia.Connecting;case Ra.open:return Ia.Open;case Ra.closing:return Ia.Closing;default:return Ia.Closed}}isConnected(){return this.connectionState()===Ia.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===n);if(i)return i;{const o=new Eg(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:i,ref:o}=e,a=()=>{this.encode(e,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${r} ${n} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(tS,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Nf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:o,ref:a}=r,s=a?`(${a})`:"",l=o.status||"";this.log("receive",`${l} ${n} ${i} ${s}`.trim(),o),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(i,o,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ra.open||this.conn.readyState===Ra.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ui.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([dS],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:Z3};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(ui.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new ub(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Nf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,o,a,s,l,c,p,d,f,u;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:X0,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Nf.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(s=e==null?void 0:e.heartbeatCallback)!==null&&s!==void 0?s:Np,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Cv,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:y=>cS[y-1]||fS,this.vsn){case lb:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:(y,v)=>v(JSON.stringify(y)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(y,v)=>v(JSON.parse(y));break;case eS:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Og extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function dr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class pS extends Og{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class e1 extends Og{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Lg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),gS=()=>Response,t1=t=>{if(Array.isArray(t))return t.map(r=>t1(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=t1(n)}),e},mS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ep=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},vS=(t,e,r)=>et(void 0,void 0,void 0,function*(){const n=yield gS();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const o=t.status||500,a=(i==null?void 0:i.statusCode)||o+"";e(new pS(Ep(i),o,a))}).catch(i=>{e(new e1(Ep(i),i))}):e(new e1(Ep(t),t))}),yS=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(mS(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function hc(t,e,r,n,i,o){return et(this,void 0,void 0,function*(){return new Promise((a,s)=>{t(r,yS(e,n,i,o)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>vS(l,s,n))})})}function nc(t,e,r,n){return et(this,void 0,void 0,function*(){return hc(t,"GET",e,r,n)})}function Li(t,e,r,n,i){return et(this,void 0,void 0,function*(){return hc(t,"POST",e,n,i,r)})}function r1(t,e,r,n,i){return et(this,void 0,void 0,function*(){return hc(t,"PUT",e,n,i,r)})}function wS(t,e,r,n){return et(this,void 0,void 0,function*(){return hc(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Tg(t,e,r,n,i){return et(this,void 0,void 0,function*(){return hc(t,"DELETE",e,n,i,r)})}class bS{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return et(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(dr(e))return{data:null,error:e};throw e}})}}var db;class _S{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[db]="BlobDownloadBuilder",this.promise=null}asStream(){return new bS(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return et(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(dr(e))return{data:null,error:e};throw e}})}}db=Symbol.toStringTag;const xS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class SS{constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Lg(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return et(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},Mv),i);let s=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),l&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(l))):(o=n,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(s=Object.assign(Object.assign({},s),i.headers));const c=this._removeEmptyFolders(r),p=this._getFinalPath(c),d=yield(e=="PUT"?r1:Li)(this.fetch,`${this.url}/object/${p}`,o,Object.assign({headers:s},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dr(o))return{data:null,error:o};throw o}})}upload(e,r,n){return et(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return et(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),s=new URL(this.url+`/object/upload/sign/${a}`);s.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:Mv.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,p["cache-control"]=`max-age=${c.cacheControl}`,p["content-type"]=c.contentType);const d=yield r1(this.fetch,s.toString(),l,{headers:p});return{data:{path:o,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(dr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return et(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const o=yield Li(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),a=new URL(this.url+o.url),s=a.searchParams.get("token");if(!s)throw new Og("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:s},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}update(e,r,n){return et(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return et(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dr(i))return{data:null,error:i};throw i}})}copy(e,r,n){return et(this,void 0,void 0,function*(){try{return{data:{path:(yield Li(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return et(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield Li(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return et(this,void 0,void 0,function*(){try{const i=yield Li(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dr(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=o?`?${o}`:"",s=this._getFinalPath(e),l=()=>nc(this.fetch,`${this.url}/${i}/${s}${a}`,{headers:this.headers,noResolveJson:!0});return new _S(l,this.shouldThrowOnError)}info(e){return et(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield nc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:t1(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}exists(e){return et(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield wS(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n)&&n instanceof e1){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&i.push(o);const s=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${c}`)}}}remove(e){return et(this,void 0,void 0,function*(){try{return{data:yield Tg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}list(e,r,n){return et(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},xS),r),{prefix:e||""});return{data:yield Li(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dr(i))return{data:null,error:i};throw i}})}listV2(e,r){return et(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Li(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const hb="2.83.0",pb={"X-Client-Info":`storage-js/${hb}`};class kS{constructor(e,r={},n,i){this.shouldThrowOnError=!1;const o=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pb),r),this.fetch=Lg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return et(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield nc(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}getBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield nc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}createBucket(e){return et(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Li(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dr(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return et(this,void 0,void 0,function*(){try{return{data:yield r1(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield Tg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class AS{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pb),r),this.fetch=Lg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}listBuckets(e){return et(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield nc(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield Tg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}}const Pg={"X-Client-Info":`storage-js/${hb}`,"Content-Type":"application/json"};class gb extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Gn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Op extends gb{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class NS extends gb{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var Fv;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Fv||(Fv={}));const jg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ES=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Bv=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),OS=(t,e,r)=>et(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const i=t.status||500,o=t;if(typeof o.json=="function")o.json().then(a=>{const s=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";e(new Op(Bv(a),i,s))}).catch(()=>{const a=i+"",s=o.statusText||`HTTP ${i} error`;e(new Op(s,i,a))});else{const a=i+"",s=o.statusText||`HTTP ${i} error`;e(new Op(s,i,a))}}else e(new NS(Bv(t),t))}),LS=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(ES(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function TS(t,e,r,n,i,o){return et(this,void 0,void 0,function*(){return new Promise((a,s)=>{t(r,LS(e,n,i,o)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>OS(l,s,n))})})}function Kn(t,e,r,n,i){return et(this,void 0,void 0,function*(){return TS(t,"POST",e,n,i,r)})}class PS{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Pg),r),this.fetch=jg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return et(this,void 0,void 0,function*(){try{return{data:(yield Kn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}getIndex(e,r){return et(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gn(n))return{data:null,error:n};throw n}})}listIndexes(e){return et(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return et(this,void 0,void 0,function*(){try{return{data:(yield Kn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gn(n))return{data:null,error:n};throw n}})}}class jS{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Pg),r),this.fetch=jg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return et(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Kn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}getVectors(e){return et(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}listVectors(e){return et(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Kn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}queryVectors(e){return et(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}deleteVectors(e){return et(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Kn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}}class CS{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Pg),r),this.fetch=jg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return et(this,void 0,void 0,function*(){try{return{data:(yield Kn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}getBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}listBuckets(){return et(this,arguments,void 0,function*(e={}){try{return{data:yield Kn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}deleteBucket(e){return et(this,void 0,void 0,function*(){try{return{data:(yield Kn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}}class RS extends CS{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new IS(this.url,this.headers,e,this.fetch)}}class IS extends PS{constructor(e,r,n,i){super(e,r,i),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return et(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return et(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return et(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return et(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new DS(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class DS extends jS{constructor(e,r,n,i,o){super(e,r,o),this.vectorBucketName=n,this.indexName=i}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return et(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return et(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return et(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return et(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return et(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class MS extends kS{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new SS(this.url,this.headers,e,this.fetch)}get vectors(){return new RS(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new AS(this.url+"/iceberg",this.headers,this.fetch)}}const FS="2.83.0";let Eu="";typeof Deno<"u"?Eu="deno":typeof document<"u"?Eu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Eu="react-native":Eu="node";const BS={"X-Client-Info":`supabase-js-${Eu}/${FS}`},qS={headers:BS},US={schema:"public"},zS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$S={},HS=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),WS=()=>Headers,VS=(t,e,r)=>{const n=HS(r),i=WS();return async(o,a)=>{var s;const l=(s=await e())!==null&&s!==void 0?s:t;let c=new i(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},a),{headers:c}))}};function GS(t){return t.endsWith("/")?t:t+"/"}function KS(t,e){var r,n;const{db:i,auth:o,realtime:a,global:s}=t,{db:l,auth:c,realtime:p,global:d}=e,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},p),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=s==null?void 0:s.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function YS(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(GS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const mb="2.83.0",Is=30*1e3,n1=3,Lp=n1*Is,JS="http://localhost:9999",XS="supabase.auth.token",QS={"X-Client-Info":`gotrue-js/${mb}`},i1="X-Supabase-Api-Version",vb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ZS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ek=10*60*1e3;class ic extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function nt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class tk extends ic{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function rk(t){return nt(t)&&t.name==="AuthApiError"}class Da extends ic{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class pa extends ic{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class Wn extends pa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nk(t){return nt(t)&&t.name==="AuthSessionMissingError"}class Es extends pa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ef extends pa{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Of extends pa{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ik(t){return nt(t)&&t.name==="AuthImplicitGrantRedirectError"}class qv extends pa{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class o1 extends pa{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Tp(t){return nt(t)&&t.name==="AuthRetryableFetchError"}class Uv extends pa{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class a1 extends pa{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ed="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zv=` 	
\r=`.split(""),ok=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<zv.length;e+=1)t[zv[e].charCodeAt(0)]=-2;for(let e=0;e<Ed.length;e+=1)t[Ed[e].charCodeAt(0)]=e;return t})();function $v(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ed[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ed[n]),e.queuedBits-=6}}function yb(t,e,r){const n=ok[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Hv(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{lk(a,n,r)};for(let a=0;a<t.length;a+=1)yb(t.charCodeAt(a),i,o);return e.join("")}function ak(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function sk(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}ak(n,e)}}function lk(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function il(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)yb(t.charCodeAt(i),r,n);return new Uint8Array(e)}function uk(t){const e=[];return sk(t,r=>e.push(r)),new Uint8Array(e)}function Ua(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>$v(i,r,n)),$v(null,r,n),e.join("")}function ck(t){return Math.round(Date.now()/1e3)+t}function fk(){return Symbol("auth-callback")}const Zr=()=>typeof window<"u"&&typeof document<"u",Na={tested:!1,writable:!1},wb=()=>{if(!Zr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Na.tested)return Na.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Na.tested=!0,Na.writable=!0}catch{Na.tested=!0,Na.writable=!1}return Na.writable};function dk(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const bb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),hk=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ds=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Ea=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},qo=async(t,e)=>{await t.removeItem(e)};class rh{constructor(){this.promise=new rh.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}rh.promiseConstructor=Promise;function Pp(t){const e=t.split(".");if(e.length!==3)throw new a1("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!ZS.test(e[n]))throw new a1("JWT not in base64url format");return{header:JSON.parse(Hv(e[0])),payload:JSON.parse(Hv(e[1])),signature:il(e[2]),raw:{header:e[0],payload:e[1]}}}async function pk(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function gk(t,e){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){n(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function mk(t){return("0"+t.toString(16)).substr(-2)}function vk(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let o=0;o<56;o++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,mk).join("")}async function yk(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function wk(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await yk(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Os(t,e,r=!1){const n=vk();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Ds(t,`${e}-code-verifier`,i);const o=await wk(n);return[o,n===o?"plain":"s256"]}const bk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _k(t){const e=t.headers.get(i1);if(!e||!e.match(bk))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function xk(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Sk(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ls(t){if(!kk.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jp(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ak(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function Wv(t){return JSON.parse(JSON.stringify(t))}const Ta=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Nk=[502,503,504];async function Vv(t){var e;if(!hk(t))throw new o1(Ta(t),0);if(Nk.includes(t.status))throw new o1(Ta(t),t.status);let r;try{r=await t.json()}catch(o){throw new Da(Ta(o),o)}let n;const i=_k(t);if(i&&i.getTime()>=vb["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Uv(Ta(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Wn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new Uv(Ta(r),t.status,r.weak_password.reasons);throw new tk(Ta(r),t.status||500,n)}const Ek=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ut(t,e,r,n){var i;const o=Object.assign({},n==null?void 0:n.headers);o[i1]||(o[i1]=vb["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const a=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Ok(t,e,r+s,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Ok(t,e,r,n,i,o){const a=Ek(e,n,i,o);let s;try{s=await t(r,Object.assign({},a))}catch(l){throw console.error(l),new o1(Ta(l),0)}if(s.ok||await Vv(s),n!=null&&n.noResolveJson)return s;try{return await s.json()}catch(l){await Vv(l)}}function Ni(t){var e;let r=null;Pk(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=ck(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Gv(t){const e=Ni(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Yo(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Lk(t){return{data:t,error:null}}function Tk(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o}=t,a=bl(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o},l=Object.assign({},a);return{data:{properties:s,user:l},error:null}}function Kv(t){return t}function Pk(t){return t.access_token&&t.refresh_token&&t.expires_in}const Cp=["global","local","others"];class jk{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=bb(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Cp[0]){if(Cp.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cp.join(", ")}`);try{return await ut(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ut(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Yo})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=bl(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await ut(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Tk,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(nt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ut(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Yo})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,o,a,s,l;try{const c={nextPage:null,lastPage:0,total:0},p=await ut(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Kv});if(p.error)throw p.error;const d=await p.json(),f=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,u=(l=(s=p.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return u.length>0&&(u.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(nt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ls(e);try{return await ut(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Yo})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Ls(e);try{return await ut(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Yo})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Ls(e);try{return await ut(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Yo})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ls(e.userId);try{const{data:r,error:n}=await ut(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Ls(e.userId),Ls(e.id);try{return{data:await ut(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,o,a,s,l;try{const c={nextPage:null,lastPage:0,total:0},p=await ut(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Kv});if(p.error)throw p.error;const d=await p.json(),f=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,u=(l=(s=p.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return u.length>0&&(u.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(nt(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await ut(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await ut(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await ut(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ut(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await ut(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}}function Yv(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Ts={debug:!!(globalThis&&wb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _b extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ck extends _b{}async function Rk(t,e,r){Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ck(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ts.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Ik(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function xb(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Dk(t){return parseInt(t,16)}function Mk(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function Fk(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:l,resources:c,scheme:p,uri:d,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const u=xb(t.address),y=p?`${p}://${n}`:n,v=t.statement?`${t.statement}
`:"",b=`${y} wants you to sign in with your Ethereum account:
${u}

${v}`;let g=`URI: ${d}
Version: ${f}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),s&&(g+=`
Not Before: ${s.toISOString()}`),l&&(g+=`
Request ID: ${l}`),c){let m=`
Resources:`;for(const _ of c){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);m+=`
- ${_}`}g+=m}return`${b}
${g}`}class Rr extends Error{constructor({message:e,code:r,cause:n,name:i}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=i??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class Od extends Rr{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function Bk({error:t,options:e}){var r,n,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Rr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Rr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Rr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Rr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Rr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new Rr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Rr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Sb(a)){if(o.rp.id!==a)return new Rr({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Rr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Rr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Rr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Rr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function qk({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Rr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Sb(n)){if(r.rpId!==n)return new Rr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Rr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Rr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Rr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Uk{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const zk=new Uk;function $k(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=bl(t,["challenge","user","excludeCredentials"]),o=il(e).buffer,a=Object.assign(Object.assign({},r),{id:il(r.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:o,user:a});if(n&&n.length>0){s.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];s.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:il(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return s}function Hk(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=bl(t,["challenge","allowCredentials"]),i=il(e).buffer,o=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const s=r[a];o.allowCredentials[a]=Object.assign(Object.assign({},s),{id:il(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return o}function Wk(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ua(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ua(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Vk(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ua(new Uint8Array(i.authenticatorData)),clientDataJSON:Ua(new Uint8Array(i.clientDataJSON)),signature:Ua(new Uint8Array(i.signature)),userHandle:i.userHandle?Ua(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Sb(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Jv(){var t,e;return!!(Zr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Gk(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Od("Browser returned unexpected credential type",e)}:{data:null,error:new Od("Empty credential response",e)}}catch(e){return{data:null,error:Bk({error:e,options:t})}}}async function Kk(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Od("Browser returned unexpected credential type",e)}:{data:null,error:new Od("Empty credential response",e)}}catch(e){return{data:null,error:qk({error:e,options:t})}}}const Yk={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Jk={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ld(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))n[o]=a;else if(r(a))n[o]=a;else if(e(a)){const s=n[o];e(s)?n[o]=Ld(s,a):n[o]=Ld(a)}else n[o]=a}return n}function Xk(t,e){return Ld(Yk,t,e||{})}function Qk(t,e){return Ld(Jk,t,e||{})}class Zk{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},o){try{const{data:a,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:s};const l=i??zk.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=Xk(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:p,error:d}=await Gk({publicKey:c,signal:l});return p?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:p}},error:null}:{data:null,error:d}}case"request":{const c=Qk(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:p,error:d}=await Kk(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:l}));return p?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:p}},error:null}:{data:null,error:d}}}}catch(a){return nt(a)?{data:null,error:a}:{data:null,error:new Da("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!r)return{data:null,error:new ic("rpId is required for WebAuthn authentication")};try{if(!Jv())return{data:null,error:new Da("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:o});if(!a)return{data:null,error:s};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(a){return nt(a)?{data:null,error:a}:{data:null,error:new Da("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!r)return{data:null,error:new ic("rpId is required for WebAuthn registration")};try{if(!Jv())return{data:null,error:new Da("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(p=>{var d;return(d=p.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:s};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:o});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return nt(a)?{data:null,error:a}:{data:null,error:new Da("Unexpected error in register",a)}}}}Ik();const e6={url:JS,storageKey:XS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:QS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Xv(t,e,r){return await r()}const Ps={};class oc{get jwks(){var e,r;return(r=(e=Ps[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Ps[this.storageKey]=Object.assign(Object.assign({},Ps[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Ps[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ps[this.storageKey]=Object.assign(Object.assign({},Ps[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},e6),e);if(this.storageKey=o.storageKey,this.instanceID=(r=oc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,oc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Zr()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new jk({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=bb(o.fetch),this.lock=o.lock||Xv,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:Zr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Rk:this.lock=Xv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Zk(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:wb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Yv(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Yv(this.memoryStorage)),Zr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${mb}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Zr()&&(r=dk(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Zr()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),ik(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return nt(r)?this._returnResult({error:r}):this._returnResult({error:new Da("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const o=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ni}),{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(o){if(nt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var r,n,i;try{let o;if("email"in e){const{email:p,password:d,options:f}=e;let u=null,y=null;this.flowType==="pkce"&&([u,y]=await Os(this.storage,this.storageKey)),o=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:p,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:u,code_challenge_method:y},xform:Ni})}else if("phone"in e){const{phone:p,password:d,options:f}=e;o=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ni})}else throw new Ef("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(o){if(nt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:a,options:s}=e;r=await ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Gv})}else if("phone"in e){const{phone:o,password:a,options:s}=e;r=await ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Gv})}else throw new Ef("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const o=new Es;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(nt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,o,a,s,l,c,p,d,f;let u,y;if("message"in e)u=e.message,y=e.signature;else{const{chain:v,wallet:b,statement:g,options:m}=e;let _;if(Zr())if(typeof b=="object")_=b;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")_=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const x=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),A=await _.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=xb(A[0]);let P=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!P){const F=await _.request({method:"eth_chainId"});P=Dk(F)}const O={domain:x.host,address:I,statement:g,uri:x.href,version:"1",chainId:P,nonce:(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=m==null?void 0:m.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(p=m==null?void 0:m.signInWithEthereum)===null||p===void 0?void 0:p.resources};u=Fk(O),y=await _.request({method:"personal_sign",params:[Mk(u),I]})}try{const{data:v,error:b}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:u,signature:y},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ni});if(b)throw b;if(!v||!v.session||!v.user){const g=new Es;return this._returnResult({data:{user:null,session:null},error:g})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(nt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var r,n,i,o,a,s,l,c,p,d,f,u;let y,v;if("message"in e)y=e.message,v=e.signature;else{const{chain:b,wallet:g,statement:m,options:_}=e;let x;if(Zr())if(typeof g=="object")x=g;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))x=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=g}const A=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in x&&x.signIn){const I=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),m?{statement:m}:null));let P;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")P=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)P=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)y=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),v=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${A.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(i=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((s=_==null?void 0:_.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((d=(p=_==null?void 0:_.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||d===void 0)&&d.length?["Resources",..._.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const I=await x.signMessage(new TextEncoder().encode(y),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=I}}try{const{data:b,error:g}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Ua(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(u=e.options)===null||u===void 0?void 0:u.captchaToken}}:null),xform:Ni});if(g)throw g;if(!b||!b.session||!b.user){const m=new Es;return this._returnResult({data:{user:null,session:null},error:m})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:g})}catch(b){if(nt(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const r=await Ea(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:o,error:a}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ni});if(await qo(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const s=new Es;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(nt(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:o,nonce:a}=e,s=await ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ni}),{data:l,error:c}=s;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const p=new Es;return this._returnResult({data:{user:null,session:null},error:p})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(r){if(nt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,o,a;try{if("email"in e){const{email:s,options:l}=e;let c=null,p=null;this.flowType==="pkce"&&([c,p]=await Os(this.storage,this.storageKey));const{error:d}=await ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:p},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:s,options:l}=e,{data:c,error:p}=await ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:p})}throw new Ef("You must provide either an email or phone number.")}catch(s){if(nt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var r,n;try{let i,o;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:s}=await ut(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Ni});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(nt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,o,a;try{let s=null,l=null;this.flowType==="pkce"&&([s,l]=await Os(this.storage,this.storageKey));const c=await ut(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:Lk});return!((o=c.data)===null||o===void 0)&&o.url&&Zr()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(s){if(nt(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Wn;const{error:i}=await ut(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(nt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:o}=e,{error:a}=await ut(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:n,type:i,options:o}=e,{data:a,error:s}=await ut(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:s})}throw new Ef("You must provide either an email or phone number and a type")}catch(r){if(nt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Ea(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Lp:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await Ea(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=jp()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=Ak(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Yo}):await this._useSession(async r=>{var n,i,o;const{data:a,error:s}=r;if(s)throw s;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wn}:await ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Yo})})}catch(r){if(nt(r))return nk(r)&&(await this._removeSession(),await qo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new Wn;const a=i.session;let s=null,l=null;this.flowType==="pkce"&&e.email!=null&&([s,l]=await Os(this.storage,this.storageKey));const{data:c,error:p}=await ut(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:a.access_token,xform:Yo});if(p)throw p;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(nt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Wn;const r=Date.now()/1e3;let n=r,i=!0,o=null;const{payload:a}=Pp(e.access_token);if(a.exp&&(n=a.exp,i=n<=r),i){const{data:s,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(nt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:s}=r;if(s)throw s;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Wn;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(nt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Zr())throw new Of("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Of(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new qv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Of("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new qv("No code detected.");const{data:m,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:s,expires_at:l,token_type:c}=e;if(!o||!s||!a||!c)throw new Of("No session defined in URL");const p=Math.round(Date.now()/1e3),d=parseInt(s);let f=p+d;l&&(f=parseInt(l));const u=f-p;u*1e3<=Is&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${u}s, should have been closer to ${d}s`);const y=f-d;p-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,p):p-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,p);const{data:v,error:b}=await this._getUser(o);if(b)throw b;const g={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:d,expires_at:f,refresh_token:a,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(n){if(nt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Ea(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({error:o});const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:s}=await this.admin.signOut(a,e);if(s&&!(rk(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await qo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=fk(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:o},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Os(this.storage,this.storageKey,!0));try{return await ut(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(nt(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async o=>{var a,s,l,c,p;const{data:d,error:f}=o;if(f)throw f;const u=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ut(this.fetch,"GET",u,{headers:this.headers,jwt:(p=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Zr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(nt(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:o}}=r;if(i)throw i;const{options:a,provider:s,token:l,access_token:c,nonce:p}=e,d=await ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:s,id_token:l,access_token:c,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ni}),{data:f,error:u}=d;return u?this._returnResult({data:{user:null,session:null},error:u}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Es}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:u}))}catch(i){if(nt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:o,error:a}=r;if(a)throw a;return await ut(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await gk(async i=>(i>0&&await pk(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await ut(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ni})),(i,o)=>{const a=200*Math.pow(2,i);return o&&Tp(o)&&Date.now()+a-n<Is})}catch(n){if(this._debug(r,"error",n),nt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Zr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Ea(this.storage,this.storageKey);if(i&&this.userStorage){let a=await Ea(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Ds(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:jp()}else if(i&&!i.user&&!i.user){const a=await Ea(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await qo(this.storage,this.storageKey+"-user"),await Ds(this.storage,this.storageKey,i)):i.user=jp()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const o=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Lp;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Lp}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),Tp(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:s}=await this._getUser(i.access_token);!s&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Wn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new rh;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new Wn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={data:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(i,"error",o),nt(o)){const a={data:null,error:o};return Tp(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,r)}catch(l){o.push(l)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ds(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const o=Wv(i);await Ds(this.storage,this.storageKey,o)}else{const i=Wv(r);await Ds(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await qo(this.storage,this.storageKey),await qo(this.storage,this.storageKey+"-code-verifier"),await qo(this.storage,this.storageKey+"-user"),this.userStorage&&await qo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Zr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Is);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Is);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Is}ms, refresh threshold is ${n1} ticks`),i<=n1&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof _b)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,a]=await Os(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(s.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;return o?this._returnResult({data:null,error:o}):await ut(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await ut(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Wk(e.webauthn.credential_response):Vk(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:l}=await ut(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:l}))})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=await ut(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:s}=a;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:$k(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:Hk(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Pp(n.access_token);let a=null;o.aal&&(a=o.aal);let s=a;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(s="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await ut(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Wn})})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Wn});const a=await ut(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Zr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(nt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Wn});const a=await ut(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Zr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(nt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await ut(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Wn})})}catch(e){if(nt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await ut(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Wn})})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(s=>s.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(s=>s.kid===e),n&&this.jwks_cached_at+ek>i)return n;const{data:o,error:a}=await ut(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,n=o.keys.find(s=>s.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:u,error:y}=await this.getSession();if(y||!u.session)return this._returnResult({data:null,error:y});n=u.session.access_token}const{header:i,payload:o,signature:a,raw:{header:s,payload:l}}=Pp(n);r!=null&&r.allowExpired||xk(o.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:u}=await this.getUser(n);if(u)throw u;return{data:{claims:o,header:i,signature:a},error:null}}const p=Sk(i.alg),d=await crypto.subtle.importKey("jwk",c,p,!0,["verify"]);if(!await crypto.subtle.verify(p,d,a,uk(`${s}.${l}`)))throw new a1("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(n){if(nt(n))return this._returnResult({data:null,error:n});throw n}}}oc.nextInstanceID={};const t6=oc;class r6 extends t6{constructor(e){super(e)}}class n6{constructor(e,r,n){var i,o,a;this.supabaseUrl=e,this.supabaseKey=r;const s=YS(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,c={db:US,realtime:$S,auth:Object.assign(Object.assign({},zS),{storageKey:l}),global:qS},p=KS(n??{},c);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=VS(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new J3(new URL("rest/v1",s).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new MS(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new G3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:o,storageKey:a,flowType:s,lock:l,debug:c,throwOnError:p},d,f){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new r6({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),d),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:o,flowType:s,lock:l,debug:c,throwOnError:p,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new hS(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const i6=(t,e,r)=>new n6(t,e,r);function o6(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}o6()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const a6="https://ccgiozknvlknbrkzfcdx.supabase.co",s6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNjZ2lvemtudmxrbmJya3pmY2R4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4NTY3NTMsImV4cCI6MjA3ODQzMjc1M30.lmmuGnynbY_n_4UlsrGw5ofRd6p9QLKCcrfHf7itEg8",er=i6(a6,s6),l6={success:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),error:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),info:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},u6={success:"bg-green-50 border-green-200 dark:bg-green-900/50 dark:border-green-700 text-green-800 dark:text-green-200",error:"bg-red-50 border-red-200 dark:bg-red-900/50 dark:border-red-700 text-red-800 dark:text-red-200",info:"bg-blue-50 border-blue-200 dark:bg-blue-900/50 dark:border-blue-700 text-blue-800 dark:text-blue-200"},c6=({toast:t,onDismiss:e})=>{const[r,n]=ke.useState(!1);ke.useEffect(()=>{const a=setTimeout(()=>{n(!0),setTimeout(()=>e(t.id),300)},5e3);return()=>clearTimeout(a)},[t.id,e]);const i=()=>{n(!0),setTimeout(()=>e(t.id),300)},o=r?"animate-toast-out":"animate-toast-in";return T.jsxs("div",{role:"alert",className:`w-full p-4 rounded-lg shadow-lg border flex items-start gap-4 ${u6[t.type]} ${o}`,children:[T.jsx("div",{className:"flex-shrink-0",children:l6[t.type]}),T.jsx("div",{className:"flex-1 text-sm font-medium",children:t.message}),T.jsx("button",{onClick:i,className:"p-1 rounded-md -m-1 hover:bg-black/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-current","aria-label":"Dismiss",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})},f6=({toasts:t,onDismiss:e})=>T.jsx("div",{className:"fixed top-5 right-5 z-50 space-y-3 w-full max-w-sm","aria-live":"assertive",children:t.map(r=>T.jsx(c6,{toast:r,onDismiss:e},r.id))}),kb=ke.createContext(void 0),d6=({children:t})=>{const[e,r]=ke.useState([]),[n,i]=ke.useState(null);ke.useEffect(()=>{const s=document.getElementById("portal-root");s&&i(s)},[]);const o=ke.useCallback((s,l="info")=>{const c=Date.now().toString()+Math.random().toString();r(p=>[...p,{id:c,message:s,type:l}])},[]),a=ke.useCallback(s=>{r(l=>l.filter(c=>c.id!==s))},[]);return T.jsxs(kb.Provider,{value:{addToast:o},children:[t,n&&Sg.createPortal(T.jsx(f6,{toasts:e,onDismiss:a}),n)]})},nh=()=>{const t=ke.useContext(kb);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},h6=({focusState:t,emailProgress:e,typingCounter:r})=>{const n=()=>t==="email"?`rotate(${e*16-8} 50 60)`:"rotate(0 50 60)",i=()=>{const a=t==="email"?r%2===0?-1.5:1.5:0;switch(t){case"idle":return"translate(0, 0)";case"email":return`translate(${a}, 5)`;case"password":return"translate(0, 5)";default:return"translate(0, 0)"}};return T.jsx("svg",{width:"120",height:"120",viewBox:"0 0 100 100",className:"mx-auto -mb-4",style:{zIndex:10,position:"relative"},"aria-hidden":"true",children:T.jsxs("g",{id:"head-group",style:{transition:"transform 0.3s ease"},transform:n(),children:[T.jsx("path",{d:"M50 10 C 25 10, 10 35, 10 60 C 10 85, 25 100, 50 100 C 75 100, 90 85, 90 60 C 90 35, 75 10, 50 10 Z",fill:"#A0522D"}),T.jsx("path",{d:"M50 25 C 30 25, 20 40, 20 60 C 20 80, 30 90, 50 90 C 70 90, 80 80, 80 60 C 80 40, 70 25, 50 25 Z",fill:"#F5DEB3"}),T.jsx("circle",{cx:"15",cy:"50",r:"10",fill:"#A0522D"}),T.jsx("circle",{cx:"85",cy:"50",r:"10",fill:"#A0522D"}),T.jsx("circle",{cx:"17",cy:"50",r:"7",fill:"#F5DEB3"}),T.jsx("circle",{cx:"83",cy:"50",r:"7",fill:"#F5DEB3"}),T.jsxs("g",{id:"open-eyes",style:{opacity:t==="password"?0:1,transition:"opacity 0.2s ease-in-out"},children:[T.jsx("circle",{cx:"38",cy:"55",r:"8",fill:"white"}),T.jsx("circle",{cx:"62",cy:"55",r:"8",fill:"white"}),T.jsxs("g",{id:"pupils",style:{transition:"transform 0.1s linear"},transform:i(),children:[T.jsx("circle",{cx:"38",cy:"55",r:"4",fill:"#2F4F4F"}),T.jsx("circle",{cx:"62",cy:"55",r:"4",fill:"#2F4F4F"})]})]}),T.jsxs("g",{id:"heart-eyes",style:{opacity:t==="password"?1:0,transition:"opacity 0.2s ease-in-out"},children:[T.jsx("path",{d:"M38 53 C 34 49, 30 53, 38 59 C 46 53, 42 49, 38 53 Z",fill:"#F5DEB3",stroke:"#A0522D",strokeWidth:"1.5"}),T.jsx("path",{d:"M62 53 C 58 49, 54 53, 62 59 C 70 53, 66 49, 62 53 Z",fill:"#F5DEB3",stroke:"#A0522D",strokeWidth:"1.5"})]}),T.jsx("path",{d:"M40 75 Q 50 82, 60 75",stroke:"#696969",strokeWidth:"1.5",fill:"transparent"})]})})},p6=()=>{const[t,e]=ke.useState(!1),[r,n]=ke.useState(""),[i,o]=ke.useState(""),[a,s]=ke.useState(!1),[l,c]=ke.useState(null),{addToast:p}=nh(),[d,f]=ke.useState("idle"),[u,y]=ke.useState(0),v=()=>f("email"),b=()=>f("password"),g=()=>f("idle"),m=()=>{y(O=>O+1)},_=async()=>{const{error:O}=await er.auth.signUp({email:r,password:i});if(O)throw O;p("Check your email for the confirmation link!","success")},x=async()=>{const{error:O}=await er.auth.signInWithPassword({email:r,password:i});if(O)throw O},A=async()=>{e(!0),c(null);try{const{error:O}=await er.auth.signInWithOAuth({provider:"google"});if(O)throw O}catch(O){c(O.error_description||O.message),e(!1)}},I=async O=>{O.preventDefault(),e(!0),c(null);try{a?await _():await x()}catch(F){c(F.error_description||F.message)}finally{e(!1)}},P=Math.min(r.length/30,1);return T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900",children:T.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[T.jsx(h6,{focusState:d,emailProgress:P,typingCounter:u}),T.jsxs("div",{className:"text-center",children:[T.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Diary"}),T.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:a?"Create a secure, encrypted account.":"Sign in to access your journal."})]}),l&&T.jsx("p",{className:"text-center text-red-500 bg-red-50 dark:bg-red-900/20 dark:text-red-300 p-3 rounded-md",children:l}),T.jsxs("form",{className:"space-y-6",onSubmit:I,children:[T.jsx("input",{type:"email",placeholder:"Your email",value:r,required:!0,onChange:O=>{n(O.target.value),m()},onFocus:v,onBlur:g,onKeyDown:m,className:"w-full px-4 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200"}),T.jsx("input",{type:"password",placeholder:"Your password (min 6 characters)",value:i,required:!0,minLength:6,onChange:O=>{o(O.target.value),m()},onFocus:b,onBlur:g,onKeyDown:m,className:"w-full px-4 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200"}),T.jsx("button",{type:"submit",disabled:t,className:"w-full px-4 py-2 font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 disabled:bg-indigo-300 transition-colors",children:t?"Loading...":a?"Sign Up":"Sign In"})]}),T.jsxs("div",{className:"relative",children:[T.jsx("div",{className:"absolute inset-0 flex items-center",children:T.jsx("div",{className:"w-full border-t border-slate-300 dark:border-slate-600"})}),T.jsx("div",{className:"relative flex justify-center text-sm",children:T.jsx("span",{className:"px-2 bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400",children:"Or continue with"})})]}),T.jsxs("button",{type:"button",onClick:A,disabled:t,className:"w-full flex items-center justify-center gap-3 px-4 py-2 border border-slate-300 rounded-md hover:bg-slate-50 disabled:bg-slate-50 dark:border-slate-600 dark:hover:bg-slate-700 dark:disabled:bg-slate-700 transition-colors","aria-label":"Sign in with Google",children:[T.jsxs("svg",{className:"w-5 h-5","aria-hidden":"true",viewBox:"0 0 24 24",children:[T.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),T.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.8 0-5.2-1.89-6.06-4.44H2.36v2.84C4.01 20.44 7.7 23 12 23z",fill:"#34A853"}),T.jsx("path",{d:"M5.94 14.06c-.18-.54-.28-1.11-.28-1.69s.1-1.15.28-1.69V7.84H2.36C1.5 9.49 1 11.18 1 12.87s.5 3.38 1.36 4.96l3.58-2.77z",fill:"#FBBC05"}),T.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 1.33 14.97 0 12 0 7.7 0 4.01 2.56 2.36 6.21l3.58 2.84C6.8 4.73 9.2 2.84 12 5.38z",fill:"#EA4335"})]}),T.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Sign in with Google"})]}),T.jsxs("p",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:[a?"Already have an account? ":"Don't have an account? ",T.jsx("button",{onClick:()=>{s(!a),c(null)},className:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300",children:a?"Sign In":"Sign Up"})]}),T.jsx("p",{className:"text-xs text-center text-slate-400 dark:text-slate-500 pt-2",children:"Note: For security, password reset is not supported. If you forget your password, your encrypted data will be unrecoverable."})]})})},Ab="DAILY_DIARY_KEY_CHECK_v1",Ja=t=>btoa(String.fromCharCode(...new Uint8Array(t))),Xa=t=>Uint8Array.from(atob(t),e=>e.charCodeAt(0)).buffer,Nb=new TextEncoder,g6=new TextDecoder,m6=()=>{const t=window.crypto.getRandomValues(new Uint8Array(16));return Ja(t.buffer)},Eb=async(t,e)=>{const r=Nb.encode(t),n=Xa(e),i=await window.crypto.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey"]);return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])},Cg=async(t,e)=>{const r=window.crypto.getRandomValues(new Uint8Array(12)),n=Nb.encode(e),i=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,n);return{iv:Ja(r.buffer),data:Ja(i)}},Rg=async(t,e,r)=>{const n=Xa(r),i=Xa(e),o=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},t,i);return g6.decode(o)},v6=async(t,e)=>{const r=window.crypto.getRandomValues(new Uint8Array(12)),n=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,e);return{iv:Ja(r.buffer),data:n}},y6=async(t,e,r)=>{const n=Xa(r);return await window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},t,e)};async function w6(t,e){const{data:r,error:n}=await er.from("profiles").select("*").eq("id",e).single();if(n||!r)return console.error("Profile not found for user:",e),null;const i=r;try{const o=await Eb(t,i.salt);return await Rg(o,i.key_check_value,i.key_check_iv)===Ab?o:null}catch(o){return console.error("Key derivation or verification failed:",o),null}}const Ig=async t=>{const e=await window.crypto.subtle.exportKey("raw",t);return Ja(e)},b6=async t=>{const e=Xa(t);return window.crypto.subtle.importKey("raw",e,{name:"AES-GCM"},!0,["encrypt","decrypt"])},Ob=ke.createContext(void 0),_6=({children:t})=>{const[e,r]=ke.useState(null),n={key:e,setKey:r,deriveAndVerifyKey:w6,encrypt:Cg,decrypt:Rg,encryptBinary:v6,decryptBinary:y6};return T.jsx(Ob.Provider,{value:n,children:t})},ih=()=>{const t=ke.useContext(Ob);if(t===void 0)throw new Error("useCrypto must be used within a CryptoProvider");return t},x6="227b57dcb9e272db9e362fee3a14b924";async function S6(t,e){const r=`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${e}&appid=${x6}&units=metric`;try{const n=await fetch(r);if(!n.ok)throw new Error(`Weather API request failed with status ${n.status}`);const i=await n.json();return{temp:i.main.temp,description:i.weather[0].description,icon:i.weather[0].icon,location:i.name}}catch(n){return console.error("Could not fetch weather data:",n),null}}const k6=t=>{const r=new DOMParser().parseFromString(t,"text/html").body.textContent||"";if(r.length<20)return[];const n=fx(r),i=n.topics().out("array"),o=n.places().out("array"),a=n.people().out("array"),l=[...i,...o,...a].map(c=>c.trim()).filter(c=>c.length>2).map(c=>c.replace(/\w\S*/g,p=>p.replace(/^\w/,d=>d.toUpperCase())));return Array.from(new Set(l))},A6=(t,e=1200,r=.8)=>new Promise((n,i)=>{const o=new Image,a=URL.createObjectURL(t);o.src=a,o.onload=()=>{URL.revokeObjectURL(a);let s=o.width,l=o.height;s>e&&(l=Math.round(l*e/s),s=e);const c=document.createElement("canvas");c.width=s,c.height=l;const p=c.getContext("2d");if(!p){i(new Error("Could not get canvas context"));return}p.drawImage(o,0,0,s,l),c.toBlob(d=>{d?n({blob:d,extension:"webp"}):i(new Error("Image compression failed"))},"image/webp",r)},o.onerror=s=>{URL.revokeObjectURL(a),i(s)}}),N6=({isVisible:t,onClose:e,activeView:r,onChangeView:n,onNewEntry:i,journals:o,activeJournal:a,onSelectJournal:s})=>{const l=[{view:"timeline",label:"Timeline",icon:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})},{view:"calendar",label:"Calendar",icon:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{view:"search",label:"Search",icon:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}],c=p=>{s(p),window.innerWidth<768&&e()};return T.jsxs("aside",{className:`bg-[#F4EFE9] dark:bg-slate-900 border-r border-[#EAE1D6] dark:border-slate-800 flex flex-col transition-transform duration-300 ease-in-out w-64 fixed z-30 h-full ${t?"translate-x-0":"-translate-x-full"}`,children:[T.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#EAE1D6] dark:border-slate-800",children:[T.jsx("h1",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Diary"}),T.jsx("button",{onClick:e,className:"p-2 rounded-md hover:bg-slate-200/50 dark:hover:bg-slate-700/50",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),T.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[T.jsxs("button",{onClick:i,className:"w-full flex items-center gap-3 p-3 rounded-lg text-white font-semibold transition-colors bg-indigo-500 hover:bg-indigo-600 shadow-sm mb-6",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),T.jsx("span",{children:"New Entry"})]}),T.jsxs("div",{children:[T.jsx("h3",{className:"px-3 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2",children:"Views"}),l.map(p=>T.jsxs("button",{onClick:()=>{n(p.view),window.innerWidth<768&&e()},className:`w-full flex items-center gap-3 p-2.5 rounded-lg text-left text-sm font-medium transition-colors ${r===p.view?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-200/50 dark:hover:bg-slate-800"}`,children:[p.icon,T.jsx("span",{children:p.label})]},p.view))]}),T.jsxs("div",{className:"pt-6",children:[T.jsxs("h3",{className:"px-3 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 flex items-center justify-between",children:[T.jsx("span",{children:"Journals"}),T.jsx("span",{className:"bg-slate-200 dark:bg-slate-700 text-[10px] px-1.5 py-0.5 rounded-full text-slate-600 dark:text-slate-300",children:o.length})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsxs("button",{onClick:()=>c(null),className:`w-full flex items-center gap-3 p-2.5 rounded-lg text-left text-sm font-medium transition-colors ${a===null&&r==="timeline"?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-200/50 dark:hover:bg-slate-800"}`,children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 opacity-70",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"})}),T.jsx("span",{children:"All Entries"})]}),o.map(p=>T.jsxs("button",{onClick:()=>c(p),className:`w-full flex items-center gap-3 p-2.5 rounded-lg text-left text-sm font-medium transition-colors ${a===p?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-200/50 dark:hover:bg-slate-800"}`,children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 opacity-70",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"})}),T.jsx("span",{className:"truncate",children:p})]},p))]})]})]})]})};function Vt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function xo(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function E6(t,e){const r=Vt(t);return isNaN(e)?xo(t,NaN):(r.setDate(r.getDate()+e),r)}const Lb=6048e5,O6=864e5,Lf=43200,Qv=1440;let L6={};function pc(){return L6}function Qa(t,e){var s,l,c,p;const r=pc(),n=(e==null?void 0:e.weekStartsOn)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((p=(c=r.locale)==null?void 0:c.options)==null?void 0:p.weekStartsOn)??0,i=Vt(t),o=i.getDay(),a=(o<n?7:0)+o-n;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Td(t){return Qa(t,{weekStartsOn:1})}function Tb(t){const e=Vt(t),r=e.getFullYear(),n=xo(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=Td(n),o=xo(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Td(o);return e.getTime()>=i.getTime()?r+1:e.getTime()>=a.getTime()?r:r-1}function Pd(t){const e=Vt(t);return e.setHours(0,0,0,0),e}function jd(t){const e=Vt(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function T6(t,e){const r=Pd(t),n=Pd(e),i=+r-jd(r),o=+n-jd(n);return Math.round((i-o)/O6)}function P6(t){const e=Tb(t),r=xo(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Td(r)}function Yf(t,e){const r=Vt(t),n=Vt(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function oh(t){return xo(t,Date.now())}function Pb(t,e){const r=Pd(t),n=Pd(e);return+r==+n}function j6(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function C6(t){if(!j6(t)&&typeof t!="number")return!1;const e=Vt(t);return!isNaN(Number(e))}function R6(t,e){const r=Vt(t),n=Vt(e),i=r.getFullYear()-n.getFullYear(),o=r.getMonth()-n.getMonth();return i*12+o}function I6(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function D6(t,e){return+Vt(t)-+Vt(e)}function M6(t){const e=Vt(t);return e.setHours(23,59,59,999),e}function F6(t){const e=Vt(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function B6(t){const e=Vt(t);return+M6(e)==+F6(e)}function q6(t,e){const r=Vt(t),n=Vt(e),i=Yf(r,n),o=Math.abs(R6(r,n));let a;if(o<1)a=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*o);let s=Yf(r,n)===-i;B6(Vt(t))&&o===1&&Yf(t,n)===1&&(s=!1),a=i*(o-Number(s))}return a===0?0:a}function U6(t,e,r){const n=D6(t,e)/1e3;return I6(r==null?void 0:r.roundingMethod)(n)}function z6(t){const e=Vt(t),r=xo(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const $6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},H6=(t,e,r)=>{let n;const i=$6[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Rp(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const W6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},V6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},G6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},K6={date:Rp({formats:W6,defaultWidth:"full"}),time:Rp({formats:V6,defaultWidth:"full"}),dateTime:Rp({formats:G6,defaultWidth:"full"})},Y6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},J6=(t,e,r,n)=>Y6[t];function du(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,s=r!=null&&r.width?String(r.width):a;i=t.formattingValues[s]||t.formattingValues[a]}else{const a=t.defaultWidth,s=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[s]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}const X6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Q6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Z6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},eA={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tA={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rA={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nA=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},iA={ordinalNumber:nA,era:du({values:X6,defaultWidth:"wide"}),quarter:du({values:Q6,defaultWidth:"wide",argumentCallback:t=>t-1}),month:du({values:Z6,defaultWidth:"wide"}),day:du({values:eA,defaultWidth:"wide"}),dayPeriod:du({values:tA,defaultWidth:"wide",formattingValues:rA,defaultFormattingWidth:"wide"})};function hu(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;const a=o[0],s=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(s)?aA(s,d=>d.test(a)):oA(s,d=>d.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const p=e.slice(a.length);return{value:c,rest:p}}}function oA(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function aA(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function sA(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=r.valueCallback?r.valueCallback(a):a;const s=e.slice(i.length);return{value:a,rest:s}}}const lA=/^(\d+)(th|st|nd|rd)?/i,uA=/\d+/i,cA={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fA={any:[/^b/i,/^(a|c)/i]},dA={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hA={any:[/1/i,/2/i,/3/i,/4/i]},pA={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gA={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mA={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vA={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yA={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wA={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bA={ordinalNumber:sA({matchPattern:lA,parsePattern:uA,valueCallback:t=>parseInt(t,10)}),era:hu({matchPatterns:cA,defaultMatchWidth:"wide",parsePatterns:fA,defaultParseWidth:"any"}),quarter:hu({matchPatterns:dA,defaultMatchWidth:"wide",parsePatterns:hA,defaultParseWidth:"any",valueCallback:t=>t+1}),month:hu({matchPatterns:pA,defaultMatchWidth:"wide",parsePatterns:gA,defaultParseWidth:"any"}),day:hu({matchPatterns:mA,defaultMatchWidth:"wide",parsePatterns:vA,defaultParseWidth:"any"}),dayPeriod:hu({matchPatterns:yA,defaultMatchWidth:"any",parsePatterns:wA,defaultParseWidth:"any"})},jb={code:"en-US",formatDistance:H6,formatLong:K6,formatRelative:J6,localize:iA,match:bA,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _A(t){const e=Vt(t);return T6(e,z6(e))+1}function xA(t){const e=Vt(t),r=+Td(e)-+P6(e);return Math.round(r/Lb)+1}function Cb(t,e){var p,d,f,u;const r=Vt(t),n=r.getFullYear(),i=pc(),o=(e==null?void 0:e.firstWeekContainsDate)??((d=(p=e==null?void 0:e.locale)==null?void 0:p.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((u=(f=i.locale)==null?void 0:f.options)==null?void 0:u.firstWeekContainsDate)??1,a=xo(t,0);a.setFullYear(n+1,0,o),a.setHours(0,0,0,0);const s=Qa(a,e),l=xo(t,0);l.setFullYear(n,0,o),l.setHours(0,0,0,0);const c=Qa(l,e);return r.getTime()>=s.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function SA(t,e){var s,l,c,p;const r=pc(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(c=r.locale)==null?void 0:c.options)==null?void 0:p.firstWeekContainsDate)??1,i=Cb(t,e),o=xo(t,0);return o.setFullYear(i,0,n),o.setHours(0,0,0,0),Qa(o,e)}function kA(t,e){const r=Vt(t),n=+Qa(r,e)-+SA(r,e);return Math.round(n/Lb)+1}function qt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Uo={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return qt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):qt(r+1,2)},d(t,e){return qt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return qt(t.getHours()%12||12,e.length)},H(t,e){return qt(t.getHours(),e.length)},m(t,e){return qt(t.getMinutes(),e.length)},s(t,e){return qt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return qt(i,e.length)}},js={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Zv={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Uo.y(t,e)},Y:function(t,e,r,n){const i=Cb(t,n),o=i>0?i:1-i;if(e==="YY"){const a=o%100;return qt(a,2)}return e==="Yo"?r.ordinalNumber(o,{unit:"year"}):qt(o,e.length)},R:function(t,e){const r=Tb(t);return qt(r,e.length)},u:function(t,e){const r=t.getFullYear();return qt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return qt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return qt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Uo.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return qt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=kA(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):qt(i,e.length)},I:function(t,e,r){const n=xA(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):qt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Uo.d(t,e)},D:function(t,e,r){const n=_A(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):qt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),o=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return qt(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),o=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return qt(o,e.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return qt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=js.noon:n===0?i=js.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=js.evening:n>=12?i=js.afternoon:n>=4?i=js.morning:i=js.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Uo.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Uo.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):qt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):qt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Uo.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Uo.s(t,e)},S:function(t,e){return Uo.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return t2(n);case"XXXX":case"XX":return Pa(n);case"XXXXX":case"XXX":default:return Pa(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return t2(n);case"xxxx":case"xx":return Pa(n);case"xxxxx":case"xxx":default:return Pa(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+e2(n,":");case"OOOO":default:return"GMT"+Pa(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+e2(n,":");case"zzzz":default:return"GMT"+Pa(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return qt(n,e.length)},T:function(t,e,r){const n=t.getTime();return qt(n,e.length)}};function e2(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),o=n%60;return o===0?r+String(i):r+String(i)+e+qt(o,2)}function t2(t,e){return t%60===0?(t>0?"-":"+")+qt(Math.abs(t)/60,2):Pa(t,e)}function Pa(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=qt(Math.trunc(n/60),2),o=qt(n%60,2);return r+i+e+o}const r2=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Rb=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},AA=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return r2(t,e);let o;switch(n){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",r2(n,e)).replace("{{time}}",Rb(i,e))},NA={p:Rb,P:AA},EA=/^D+$/,OA=/^Y+$/,LA=["D","DD","YY","YYYY"];function TA(t){return EA.test(t)}function PA(t){return OA.test(t)}function jA(t,e,r){const n=CA(t,e,r);if(console.warn(n),LA.includes(t))throw new RangeError(n)}function CA(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const RA=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,IA=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,DA=/^'([^]*?)'?$/,MA=/''/g,FA=/[a-zA-Z]/;function ac(t,e,r){var p,d,f,u;const n=pc(),i=n.locale??jb,o=n.firstWeekContainsDate??((d=(p=n.locale)==null?void 0:p.options)==null?void 0:d.firstWeekContainsDate)??1,a=n.weekStartsOn??((u=(f=n.locale)==null?void 0:f.options)==null?void 0:u.weekStartsOn)??0,s=Vt(t);if(!C6(s))throw new RangeError("Invalid time value");let l=e.match(IA).map(y=>{const v=y[0];if(v==="p"||v==="P"){const b=NA[v];return b(y,i.formatLong)}return y}).join("").match(RA).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const v=y[0];if(v==="'")return{isToken:!1,value:BA(y)};if(Zv[v])return{isToken:!0,value:y};if(v.match(FA))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(l=i.localize.preprocessor(s,l));const c={firstWeekContainsDate:o,weekStartsOn:a,locale:i};return l.map(y=>{if(!y.isToken)return y.value;const v=y.value;(PA(v)||TA(v))&&jA(v,e,String(t));const b=Zv[v[0]];return b(s,v,i.localize,c)}).join("")}function BA(t){const e=t.match(DA);return e?e[1].replace(MA,"'"):t}function qA(t,e,r){const n=pc(),i=(r==null?void 0:r.locale)??n.locale??jb,o=2520,a=Yf(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const s=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:a});let l,c;a>0?(l=Vt(e),c=Vt(t)):(l=Vt(t),c=Vt(e));const p=U6(c,l),d=(jd(c)-jd(l))/1e3,f=Math.round((p-d)/60);let u;if(f<2)return r!=null&&r.includeSeconds?p<5?i.formatDistance("lessThanXSeconds",5,s):p<10?i.formatDistance("lessThanXSeconds",10,s):p<20?i.formatDistance("lessThanXSeconds",20,s):p<40?i.formatDistance("halfAMinute",0,s):p<60?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",1,s):f===0?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",f,s);if(f<45)return i.formatDistance("xMinutes",f,s);if(f<90)return i.formatDistance("aboutXHours",1,s);if(f<Qv){const y=Math.round(f/60);return i.formatDistance("aboutXHours",y,s)}else{if(f<o)return i.formatDistance("xDays",1,s);if(f<Lf){const y=Math.round(f/Qv);return i.formatDistance("xDays",y,s)}else if(f<Lf*2)return u=Math.round(f/Lf),i.formatDistance("aboutXMonths",u,s)}if(u=q6(c,l),u<12){const y=Math.round(f/Lf);return i.formatDistance("xMonths",y,s)}else{const y=u%12,v=Math.trunc(u/12);return y<3?i.formatDistance("aboutXYears",v,s):y<9?i.formatDistance("overXYears",v,s):i.formatDistance("almostXYears",v+1,s)}}function Ib(t,e){return qA(t,oh(t),e)}function UA(t,e,r){const n=Qa(t,r),i=Qa(e,r);return+n==+i}function zA(t,e){return UA(t,oh(t),e)}function $A(t){return Pb(t,oh(t))}function HA(t,e){return E6(t,-1)}function WA(t){return Pb(t,HA(oh(t)))}const VA=({status:t})=>{const e={encrypting:{text:"Encrypting...",icon:T.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})},synced:{text:"Synced",icon:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})},error:{text:"Error",icon:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}},{text:r,icon:n}=e[t];return T.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400",children:[n,T.jsx("span",{className:"hidden sm:inline",children:r})]})},GA=({isEditing:t,onSave:e,onCancel:r,currentDate:n,weather:i,theme:o,onToggleTheme:a,saveStatus:s,profile:l,onShowProfile:c,isToolsPanelVisible:p,onToggleToolsPanel:d,isLeftSidebarVisible:f})=>{const[u,y]=ke.useState(new Date);return ke.useEffect(()=>{const v=setInterval(()=>{y(new Date)},6e4);return()=>clearInterval(v)},[]),T.jsx("header",{className:"bg-white/80 dark:bg-slate-900/50 backdrop-blur-sm border-b border-[#EAE1D6] dark:border-slate-800 min-h-[4rem] flex-shrink-0 relative z-20 transition-all duration-200",children:T.jsxs("div",{className:"min-h-[4rem] flex flex-wrap items-center justify-between px-4 sm:px-6 py-2 gap-y-2",children:[T.jsxs("div",{className:`flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-slate-600 dark:text-slate-300 transition-all duration-300 ${f?"":"pl-12 md:pl-16"} ${t?"hidden md:flex":"flex"}`,children:[T.jsx("span",{className:"font-semibold",children:ac(u,"p")}),T.jsx("span",{className:"font-semibold",children:ac(n,"MMMM d, yyyy")}),i&&T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full"}),T.jsxs("span",{children:[i.location,", ",Math.round(i.temp),"C"]})]})]}),T.jsx("div",{className:`flex items-center gap-3 ${t&&!f?"pl-12 md:pl-0":""}`,children:t?T.jsxs(T.Fragment,{children:[T.jsx(VA,{status:s}),T.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-semibold rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),T.jsx("button",{onClick:e,className:"px-4 py-1.5 text-sm font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 transition-colors shadow-sm",children:"Save"})]}):T.jsx("div",{className:"hidden md:block h-9"})}),T.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 ml-auto md:ml-0",children:[t&&T.jsx("button",{onClick:d,title:"Toggle Tools Panel",className:`p-2 rounded-full transition-colors ${p?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-600":"hover:bg-slate-200/50 dark:hover:bg-slate-700/50 text-slate-500"}`,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),T.jsx("button",{onClick:a,title:"Toggle Theme",className:"p-2 rounded-full hover:bg-slate-200/50 dark:hover:bg-slate-700/50 text-slate-500 dark:text-slate-400",children:o==="dark"?T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 14.464A1 1 0 106.465 13.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zm-1.414-2.12a1 1 0 011.414 0l.707.707a1 1 0 11-1.414 1.414l-.707-.707a1 1 0 010-1.414zM4 11a1 1 0 100-2H3a1 1 0 100 2h1z",clipRule:"evenodd"})})}),T.jsx("button",{onClick:c,title:"Profile & Settings",className:"w-9 h-9 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden flex items-center justify-center hover:ring-2 ring-indigo-500 ring-offset-2 ring-offset-white dark:ring-offset-slate-900 transition-all",children:l!=null&&l.avatar_url?T.jsx("img",{src:l.avatar_url,alt:"User avatar",className:"w-full h-full object-cover"}):T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})})]})]})})},KA=({wordCount:t,characterCount:e,saveStatus:r})=>{const n={encrypting:{text:"Encrypting...",classes:"text-yellow-600 dark:text-yellow-400"},synced:{text:"Synced",classes:"text-green-600 dark:text-green-400"},error:{text:"Save Error",classes:"text-red-600 dark:text-red-400"}};return T.jsx("footer",{className:"bg-white/80 dark:bg-slate-900/50 backdrop-blur-sm border-t border-[#EAE1D6] dark:border-slate-800 h-10 flex-shrink-0",children:T.jsxs("div",{className:"h-full flex items-center justify-between px-6 text-sm text-slate-500 dark:text-slate-400",children:[T.jsx("div",{children:T.jsxs("span",{children:[t," words / ",e," characters"]})}),T.jsx("div",{className:`font-semibold ${n[r].classes}`,children:n[r].text})]})})},YA=({onRecordingComplete:t,existingBlob:e,onDelete:r})=>{const[n,i]=ke.useState(!1),[o,a]=ke.useState(0),s=ke.useRef(null),l=ke.useRef([]),c=ke.useRef(null);ke.useEffect(()=>()=>{c.current&&clearInterval(c.current)},[]);const p=async()=>{try{const u=await navigator.mediaDevices.getUserMedia({audio:!0});let y="audio/webm";MediaRecorder.isTypeSupported("audio/mp4")?y="audio/mp4":MediaRecorder.isTypeSupported("audio/webm;codecs=opus")&&(y="audio/webm;codecs=opus"),s.current=new MediaRecorder(u,{mimeType:y}),l.current=[],s.current.ondataavailable=v=>{v.data.size>0&&l.current.push(v.data)},s.current.onstop=()=>{var g;const v=((g=s.current)==null?void 0:g.mimeType)||y,b=new Blob(l.current,{type:v});t(b),l.current=[],u.getTracks().forEach(m=>m.stop())},s.current.start(),i(!0),a(0),c.current=window.setInterval(()=>{a(v=>v+1)},1e3)}catch(u){console.error("Error accessing microphone:",u),alert("Could not access microphone. Please check permissions.")}},d=()=>{s.current&&n&&(s.current.stop(),i(!1),c.current&&clearInterval(c.current))},f=u=>{const y=Math.floor(u/60),v=u%60;return`${y.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`};return e?T.jsxs("div",{className:"w-full p-3 rounded-md bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800 flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-100 dark:bg-indigo-800 flex items-center justify-center text-indigo-600 dark:text-indigo-300",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})})}),T.jsx("span",{className:"text-sm font-medium text-indigo-800 dark:text-indigo-300",children:"Audio Note Added"})]}),T.jsx("button",{onClick:r,className:"p-1.5 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full transition-colors",title:"Delete Audio",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}):T.jsx("div",{className:"w-full",children:n?T.jsxs("div",{className:"w-full flex items-center justify-between p-2 rounded-md bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsxs("div",{className:"relative flex h-3 w-3",children:[T.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),T.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}),T.jsx("span",{className:"text-sm font-mono font-medium text-red-600 dark:text-red-300",children:f(o)})]}),T.jsx("button",{onClick:d,className:"p-1.5 rounded-full bg-red-100 text-red-600 hover:bg-red-200 dark:bg-red-800 dark:text-red-200 dark:hover:bg-red-700 transition-colors",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})})})]}):T.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center gap-3 p-2 rounded-md text-sm text-slate-700 dark:text-slate-300 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 transition-colors",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})}),T.jsx("span",{children:"Record Audio"})]})})},JA=["","","","","","","",""],XA=({entry:t,onUpdateEntry:e,editorFont:r,onFontChange:n,onImageUpload:i,isUploadingImage:o,selectedImageFormat:a,onImageFormatChange:s,availableJournals:l})=>{const c=typeof t=="object"?t.mood:void 0,p=typeof t=="object"?t.tags||[]:[],d=typeof t=="object"&&t.journal?t.journal:"Personal",f=typeof t=="object"?t.tempAudioBlob:void 0,u=ke.useRef(null),y=()=>{var A;(A=u.current)==null||A.click()},v=A=>{var P;const I=(P=A.target.files)==null?void 0:P[0];I&&i(I),u.current&&(u.current.value="")},b=A=>{e({tags:A})},g=A=>{e({mood:A===c?void 0:A})},m=A=>{e({journal:A})},_=A=>{e({tempAudioBlob:A})},x=()=>{e({tempAudioBlob:void 0})};return T.jsxs("aside",{className:"w-64 h-full bg-white/80 dark:bg-slate-900/50 border-l border-[#EAE1D6] dark:border-slate-800 p-4 space-y-6 flex-shrink-0 overflow-y-auto",children:[T.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Tools"}),T.jsx("div",{className:"space-y-4",children:T.jsxs("div",{children:[T.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Journal"}),T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:"text",list:"journal-options",value:d,onChange:A=>m(A.target.value),className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded-md bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"Select or type..."}),T.jsxs("datalist",{id:"journal-options",children:[l.map(A=>T.jsx("option",{value:A},A)),!l.includes("Personal")&&T.jsx("option",{value:"Personal"}),!l.includes("Work")&&T.jsx("option",{value:"Work"}),!l.includes("Ideas")&&T.jsx("option",{value:"Ideas"})]})]}),T.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Type a new name to create a book."})]})}),T.jsxs("div",{className:"space-y-4 pt-2 border-t border-slate-200 dark:border-slate-700",children:[T.jsx(YA,{onRecordingComplete:_,existingBlob:f,onDelete:x}),T.jsx("input",{type:"file",ref:u,onChange:v,className:"hidden",accept:"image/*"}),T.jsx("button",{onClick:y,disabled:o,className:"w-full flex items-center justify-center gap-3 p-2 rounded-md text-sm text-slate-700 dark:text-slate-300 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:o?T.jsxs(T.Fragment,{children:[T.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),T.jsx("span",{children:"Uploading..."})]}):T.jsxs(T.Fragment,{children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),T.jsx("span",{children:"Insert Image"})]})}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Font Style"}),T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx("button",{onClick:()=>n("serif"),className:`w-full text-left p-2 rounded-md text-sm font-serif transition-colors ${r==="serif"?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Serif (Lora)"}),T.jsx("button",{onClick:()=>n("sans"),className:`w-full text-left p-2 rounded-md text-sm font-sans transition-colors ${r==="sans"?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Sans-Serif"}),T.jsx("button",{onClick:()=>n("mono"),className:`w-full text-left p-2 rounded-md text-sm font-mono transition-colors ${r==="mono"?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Monospace"})]})]})]}),a&&T.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6 space-y-4",children:[T.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Image Tools"}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Size"}),T.jsx("div",{className:"grid grid-cols-4 gap-1",children:["25%","50%","75%","100%"].map(A=>T.jsx("button",{onClick:()=>s({width:A}),className:`p-2 text-xs rounded-md ${a.width===A?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:A},A))})]}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Alignment"}),T.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[T.jsx("button",{onClick:()=>s({align:!1,float:"left",margin:"0.5em 1em 0.5em 0"}),className:`p-2 rounded-md flex justify-center ${a.float==="left"?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M2 5a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zM2 9a1 1 0 011-1h5a1 1 0 110 2H3a1 1 0 01-1-1zm7 4a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z",clipRule:"evenodd"})})}),T.jsx("button",{onClick:()=>s({align:"center",float:!1,margin:!1}),className:`p-2 rounded-md flex justify-center ${a.align==="center"?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M2 5a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zM2 9a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zm1 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),T.jsx("button",{onClick:()=>s({align:!1,float:"right",margin:"0.5em 0 0.5em 1em"}),className:`p-2 rounded-md flex justify-center ${a.float==="right"?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M2 5a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zm0 4a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zm7 4a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z",clipRule:"evenodd"})})})]})]})]}),T.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6 space-y-4",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Mood"}),T.jsx("div",{className:"grid grid-cols-4 gap-2",children:JA.map(A=>T.jsx("button",{type:"button",onClick:()=>g(A),className:`text-2xl p-2 rounded-md transition-all ${c===A?"bg-indigo-100 dark:bg-indigo-500/50 scale-110":"hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:A},A))})]}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Tags"}),T.jsx("textarea",{value:p.join(", "),onChange:A=>b(A.target.value.split(",").map(I=>I.trim()).filter(Boolean)),placeholder:"travel, work...",className:"w-full h-20 p-2 text-sm rounded-md bg-slate-100 dark:bg-slate-800 border-transparent focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]})]})},QA=({entries:t,onSelectEntry:e})=>t.length===0?null:T.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-slate-800/50 dark:to-slate-800/50 p-6 rounded-lg border border-indigo-200 dark:border-slate-700 shadow-sm",children:[T.jsxs("h3",{className:"text-lg font-bold text-indigo-800 dark:text-indigo-300 mb-4 flex items-center gap-2",children:[T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}),T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l-3-3m0 0l3-3m-3 3h9"})]}),"On This Day..."]}),T.jsx("div",{className:"space-y-3",children:t.map(r=>{const n=new Date(r.created_at).getFullYear(),i=new Date().getFullYear()-n;return T.jsxs("div",{onClick:()=>e(r.id),className:"bg-white/60 dark:bg-slate-700/50 p-3 rounded-md cursor-pointer hover:bg-white dark:hover:bg-slate-700 transition-colors flex justify-between items-center",children:[T.jsxs("div",{children:[T.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:r.title}),T.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i," year",i>1?"s":""," ago"]})]}),T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]},r.id)})})]}),Db=t=>{try{const e=new Date(t);return $A(e)?Ib(e,{addSuffix:!0}):WA(e)?"Yesterday":zA(e,{weekStartsOn:0})?ac(e,"EEEE"):ac(e,"MMMM d, yyyy")}catch(e){return console.error("Error formatting date:",t,e),"Invalid date"}},ZA=t=>{try{const e=new Date(t);return ac(e,"EEEE, MMMM d, yyyy 'at' p")}catch(e){return console.error("Error formatting full date:",t,e),"Invalid date"}},eN=t=>{try{const e=new Date(t);return Ib(e,{addSuffix:!0})}catch(e){return console.error("Error formatting relative time:",t,e),"Invalid time"}},tN=({entry:t,onSelect:e,onLoadContent:r})=>{const n=ke.useRef(null);ke.useEffect(()=>{if(t.isDecrypted||t.isLoading)return;const o=new IntersectionObserver(a=>{a[0].isIntersecting&&(r(t.id),o.disconnect())},{rootMargin:"100px"});return n.current&&o.observe(n.current),()=>o.disconnect()},[t.id,t.isDecrypted,t.isLoading,r]);const i=o=>new DOMParser().parseFromString(o,"text/html").body.textContent||"";return T.jsxs("div",{ref:n,onClick:e,className:"bg-white/50 dark:bg-slate-800/50 p-6 rounded-lg shadow-sm hover:shadow-lg transition-shadow duration-300 cursor-pointer border border-slate-200 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-600",children:[T.jsxs("div",{className:"flex justify-between items-start gap-4",children:[T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v11.494m0-11.494M12 6.253a4.093 4.093 0 00-3.32 6.19l-2.06 2.06a1 1 0 001.42 1.42l2.06-2.06A4.094 4.094 0 0012 17.747m0 0a4.093 4.093 0 003.32-6.19l2.06-2.06a1 1 0 00-1.42-1.42l-2.06 2.06A4.094 4.094 0 0012 6.253z"})}),T.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:t.journal||"Personal"})]}),t.isDecrypted?T.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:t.title||"Untitled"}):T.jsx("div",{className:"h-7 bg-slate-200 dark:bg-slate-700 rounded w-48 animate-pulse"})]}),T.jsxs("div",{className:"text-right flex-shrink-0",children:[T.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 whitespace-nowrap",title:new Date(t.created_at).toLocaleString(),children:Db(t.created_at)}),t.mood&&T.jsx("span",{className:"text-lg block mt-1","aria-label":`Mood: ${t.mood}`,children:t.mood})]})]}),t.tags&&t.tags.length>0&&T.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.tags.map(o=>T.jsx("span",{className:"text-xs font-medium bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded-full dark:bg-indigo-900/50 dark:text-indigo-300",children:o},o))}),T.jsx("div",{className:"mt-3",children:t.isDecrypted?T.jsx("p",{className:"text-slate-600 dark:text-slate-300 line-clamp-2",children:i(t.content)}):T.jsxs("div",{className:"space-y-2 animate-pulse mt-2",children:[T.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full"}),T.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-5/6"})]})})]})},rN=({entries:t,onSelectEntry:e,onLoadContent:r,onThisDayEntries:n,profile:i,filteredDate:o,onClearFilter:a})=>t.length===0?o?T.jsxs("div",{className:"text-center py-20 flex flex-col items-center",children:[T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-20 w-20 text-slate-300 dark:text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:[T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}),T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 4h-4m-4-4h-4"})]}),T.jsxs("h2",{className:"mt-6 text-2xl font-bold text-slate-700 dark:text-slate-200",children:["No entries found for ",o.toLocaleDateString("default",{month:"long",day:"numeric",year:"numeric"}),"."]}),T.jsx("button",{onClick:a,className:"mt-4 text-indigo-600 dark:text-indigo-400 hover:underline font-semibold",children:"Show All Entries"})]}):T.jsxs("div",{className:"text-center py-20 flex flex-col items-center",children:[T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-20 w-20 text-slate-300 dark:text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:[T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v11.494m-9-5.747h18"}),T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]}),T.jsxs("h2",{className:"mt-6 text-3xl font-bold text-slate-700 dark:text-slate-200",children:["Welcome to Diary, ",(i==null?void 0:i.full_name)||"friend","!"]}),T.jsx("p",{className:"mt-2 text-slate-500 dark:text-slate-400",children:"This is your private, encrypted space to reflect and record."}),T.jsx("p",{className:"mt-4 text-slate-500 dark:text-slate-400",children:'Click "New Entry" to write your first post.'})]}):T.jsxs("div",{className:"space-y-6",children:[o?T.jsxs("div",{className:"bg-indigo-50 dark:bg-slate-800/50 p-4 rounded-lg border border-indigo-200 dark:border-slate-700 flex justify-between items-center",children:[T.jsxs("h3",{className:"text-lg font-bold text-indigo-800 dark:text-indigo-300",children:["Showing entries for ",o.toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric"})]}),T.jsxs("button",{onClick:a,className:"flex items-center gap-2 text-sm font-semibold text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"Show All"]})]}):T.jsx(QA,{entries:n,onSelectEntry:e}),!o&&T.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Welcome back, ",(i==null?void 0:i.full_name)||"friend","!"]}),T.jsx("div",{className:"space-y-4",children:t.map(s=>T.jsx(tN,{entry:s,onSelect:()=>e(s.id),onLoadContent:r},s.id))})]});/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:Mb,setPrototypeOf:n2,isFrozen:nN,getPrototypeOf:iN,getOwnPropertyDescriptor:oN}=Object;let{freeze:kn,seal:mi,create:s1}=Object,{apply:l1,construct:u1}=typeof Reflect<"u"&&Reflect;kn||(kn=function(e){return e});mi||(mi=function(e){return e});l1||(l1=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return e.apply(r,i)});u1||(u1=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return new e(...n)});const Tf=An(Array.prototype.forEach),aN=An(Array.prototype.lastIndexOf),i2=An(Array.prototype.pop),pu=An(Array.prototype.push),sN=An(Array.prototype.splice),Jf=An(String.prototype.toLowerCase),Ip=An(String.prototype.toString),Dp=An(String.prototype.match),gu=An(String.prototype.replace),lN=An(String.prototype.indexOf),uN=An(String.prototype.trim),Ei=An(Object.prototype.hasOwnProperty),bn=An(RegExp.prototype.test),mu=cN(TypeError);function An(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return l1(t,e,n)}}function cN(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u1(t,r)}}function St(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jf;n2&&n2(t,null);let n=e.length;for(;n--;){let i=e[n];if(typeof i=="string"){const o=r(i);o!==i&&(nN(e)||(e[n]=o),i=o)}t[i]=!0}return t}function fN(t){for(let e=0;e<t.length;e++)Ei(t,e)||(t[e]=null);return t}function co(t){const e=s1(null);for(const[r,n]of Mb(t))Ei(t,r)&&(Array.isArray(n)?e[r]=fN(n):n&&typeof n=="object"&&n.constructor===Object?e[r]=co(n):e[r]=n);return e}function vu(t,e){for(;t!==null;){const n=oN(t,e);if(n){if(n.get)return An(n.get);if(typeof n.value=="function")return An(n.value)}t=iN(t)}function r(){return null}return r}const o2=kn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Mp=kn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Fp=kn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),dN=kn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Bp=kn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),hN=kn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),a2=kn(["#text"]),s2=kn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),qp=kn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),l2=kn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pf=kn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),pN=mi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),gN=mi(/<%[\w\W]*|[\w\W]*%>/gm),mN=mi(/\$\{[\w\W]*/gm),vN=mi(/^data-[\-\w.\u00B7-\uFFFF]+$/),yN=mi(/^aria-[\-\w]+$/),Fb=mi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),wN=mi(/^(?:\w+script|data):/i),bN=mi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Bb=mi(/^html$/i),_N=mi(/^[a-z][.\w]*(-[.\w]+)+$/i);var u2=Object.freeze({__proto__:null,ARIA_ATTR:yN,ATTR_WHITESPACE:bN,CUSTOM_ELEMENT:_N,DATA_ATTR:vN,DOCTYPE_NAME:Bb,ERB_EXPR:gN,IS_ALLOWED_URI:Fb,IS_SCRIPT_OR_DATA:wN,MUSTACHE_EXPR:pN,TMPLIT_EXPR:mN});const yu={element:1,text:3,progressingInstruction:7,comment:8,document:9},xN=function(){return typeof window>"u"?null:window},SN=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(n=r.getAttribute(i));const o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},c2=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function qb(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xN();const e=Ye=>qb(Ye);if(e.version="3.3.0",e.removed=[],!t||!t.document||t.document.nodeType!==yu.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const n=r,i=n.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:s,Element:l,NodeFilter:c,NamedNodeMap:p=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:u}=t,y=l.prototype,v=vu(y,"cloneNode"),b=vu(y,"remove"),g=vu(y,"nextSibling"),m=vu(y,"childNodes"),_=vu(y,"parentNode");if(typeof a=="function"){const Ye=r.createElement("template");Ye.content&&Ye.content.ownerDocument&&(r=Ye.content.ownerDocument)}let x,A="";const{implementation:I,createNodeIterator:P,createDocumentFragment:O,getElementsByTagName:F}=r,{importNode:R}=n;let S=c2();e.isSupported=typeof Mb=="function"&&typeof _=="function"&&I&&I.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:E,ERB_EXPR:j,TMPLIT_EXPR:M,DATA_ATTR:V,ARIA_ATTR:ee,IS_SCRIPT_OR_DATA:te,ATTR_WHITESPACE:Q,CUSTOM_ELEMENT:J}=u2;let{IS_ALLOWED_URI:W}=u2,q=null;const L=St({},[...o2,...Mp,...Fp,...Bp,...a2]);let D=null;const U=St({},[...s2,...qp,...l2,...Pf]);let H=Object.seal(s1(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),B=null,Y=null;const re=Object.seal(s1(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ne=!0,de=!0,be=!1,Te=!0,Oe=!1,Fe=!0,ye=!1,ae=!1,Ke=!1,he=!1,se=!1,me=!1,Se=!0,ve=!1;const Me="user-content-";let qe=!0,Ue=!1,Ze={},ot=null;const it=St({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let st=null;const Qe=St({},["audio","video","img","source","image","track"]);let ze=null;const br=St({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_t="http://www.w3.org/1998/Math/MathML",Ur="http://www.w3.org/2000/svg",xt="http://www.w3.org/1999/xhtml";let Lt=xt,nn=!1,At=null;const vi=St({},[_t,Ur,xt],Ip);let Dt=St({},["mi","mo","mn","ms","mtext"]),zr=St({},["annotation-xml"]);const On=St({},["title","style","font","a","script"]);let jt=null;const dt=["application/xhtml+xml","text/html"],Et="text/html";let $t=null,Yt=null;const Jr=r.createElement("form"),Ne=function(le){return le instanceof RegExp||le instanceof Function},Le=function(){let le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Yt&&Yt===le)){if((!le||typeof le!="object")&&(le={}),le=co(le),jt=dt.indexOf(le.PARSER_MEDIA_TYPE)===-1?Et:le.PARSER_MEDIA_TYPE,$t=jt==="application/xhtml+xml"?Ip:Jf,q=Ei(le,"ALLOWED_TAGS")?St({},le.ALLOWED_TAGS,$t):L,D=Ei(le,"ALLOWED_ATTR")?St({},le.ALLOWED_ATTR,$t):U,At=Ei(le,"ALLOWED_NAMESPACES")?St({},le.ALLOWED_NAMESPACES,Ip):vi,ze=Ei(le,"ADD_URI_SAFE_ATTR")?St(co(br),le.ADD_URI_SAFE_ATTR,$t):br,st=Ei(le,"ADD_DATA_URI_TAGS")?St(co(Qe),le.ADD_DATA_URI_TAGS,$t):Qe,ot=Ei(le,"FORBID_CONTENTS")?St({},le.FORBID_CONTENTS,$t):it,B=Ei(le,"FORBID_TAGS")?St({},le.FORBID_TAGS,$t):co({}),Y=Ei(le,"FORBID_ATTR")?St({},le.FORBID_ATTR,$t):co({}),Ze=Ei(le,"USE_PROFILES")?le.USE_PROFILES:!1,ne=le.ALLOW_ARIA_ATTR!==!1,de=le.ALLOW_DATA_ATTR!==!1,be=le.ALLOW_UNKNOWN_PROTOCOLS||!1,Te=le.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Oe=le.SAFE_FOR_TEMPLATES||!1,Fe=le.SAFE_FOR_XML!==!1,ye=le.WHOLE_DOCUMENT||!1,he=le.RETURN_DOM||!1,se=le.RETURN_DOM_FRAGMENT||!1,me=le.RETURN_TRUSTED_TYPE||!1,Ke=le.FORCE_BODY||!1,Se=le.SANITIZE_DOM!==!1,ve=le.SANITIZE_NAMED_PROPS||!1,qe=le.KEEP_CONTENT!==!1,Ue=le.IN_PLACE||!1,W=le.ALLOWED_URI_REGEXP||Fb,Lt=le.NAMESPACE||xt,Dt=le.MATHML_TEXT_INTEGRATION_POINTS||Dt,zr=le.HTML_INTEGRATION_POINTS||zr,H=le.CUSTOM_ELEMENT_HANDLING||{},le.CUSTOM_ELEMENT_HANDLING&&Ne(le.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=le.CUSTOM_ELEMENT_HANDLING.tagNameCheck),le.CUSTOM_ELEMENT_HANDLING&&Ne(le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),le.CUSTOM_ELEMENT_HANDLING&&typeof le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(H.allowCustomizedBuiltInElements=le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Oe&&(de=!1),se&&(he=!0),Ze&&(q=St({},a2),D=[],Ze.html===!0&&(St(q,o2),St(D,s2)),Ze.svg===!0&&(St(q,Mp),St(D,qp),St(D,Pf)),Ze.svgFilters===!0&&(St(q,Fp),St(D,qp),St(D,Pf)),Ze.mathMl===!0&&(St(q,Bp),St(D,l2),St(D,Pf))),le.ADD_TAGS&&(typeof le.ADD_TAGS=="function"?re.tagCheck=le.ADD_TAGS:(q===L&&(q=co(q)),St(q,le.ADD_TAGS,$t))),le.ADD_ATTR&&(typeof le.ADD_ATTR=="function"?re.attributeCheck=le.ADD_ATTR:(D===U&&(D=co(D)),St(D,le.ADD_ATTR,$t))),le.ADD_URI_SAFE_ATTR&&St(ze,le.ADD_URI_SAFE_ATTR,$t),le.FORBID_CONTENTS&&(ot===it&&(ot=co(ot)),St(ot,le.FORBID_CONTENTS,$t)),qe&&(q["#text"]=!0),ye&&St(q,["html","head","body"]),q.table&&(St(q,["tbody"]),delete B.tbody),le.TRUSTED_TYPES_POLICY){if(typeof le.TRUSTED_TYPES_POLICY.createHTML!="function")throw mu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof le.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw mu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=le.TRUSTED_TYPES_POLICY,A=x.createHTML("")}else x===void 0&&(x=SN(u,i)),x!==null&&typeof A=="string"&&(A=x.createHTML(""));kn&&kn(le),Yt=le}},tt=St({},[...Mp,...Fp,...dN]),rt=St({},[...Bp,...hN]),yt=function(le){let De=_(le);(!De||!De.tagName)&&(De={namespaceURI:Lt,tagName:"template"});const We=Jf(le.tagName),Mt=Jf(De.tagName);return At[le.namespaceURI]?le.namespaceURI===Ur?De.namespaceURI===xt?We==="svg":De.namespaceURI===_t?We==="svg"&&(Mt==="annotation-xml"||Dt[Mt]):!!tt[We]:le.namespaceURI===_t?De.namespaceURI===xt?We==="math":De.namespaceURI===Ur?We==="math"&&zr[Mt]:!!rt[We]:le.namespaceURI===xt?De.namespaceURI===Ur&&!zr[Mt]||De.namespaceURI===_t&&!Dt[Mt]?!1:!rt[We]&&(On[We]||!tt[We]):!!(jt==="application/xhtml+xml"&&At[le.namespaceURI]):!1},ht=function(le){pu(e.removed,{element:le});try{_(le).removeChild(le)}catch{b(le)}},bt=function(le,De){try{pu(e.removed,{attribute:De.getAttributeNode(le),from:De})}catch{pu(e.removed,{attribute:null,from:De})}if(De.removeAttribute(le),le==="is")if(he||se)try{ht(De)}catch{}else try{De.setAttribute(le,"")}catch{}},Jt=function(le){let De=null,We=null;if(Ke)le="<remove></remove>"+le;else{const lr=Dp(le,/^[\r\n\t ]+/);We=lr&&lr[0]}jt==="application/xhtml+xml"&&Lt===xt&&(le='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+le+"</body></html>");const Mt=x?x.createHTML(le):le;if(Lt===xt)try{De=new f().parseFromString(Mt,jt)}catch{}if(!De||!De.documentElement){De=I.createDocument(Lt,"template",null);try{De.documentElement.innerHTML=nn?A:Mt}catch{}}const Tr=De.body||De.documentElement;return le&&We&&Tr.insertBefore(r.createTextNode(We),Tr.childNodes[0]||null),Lt===xt?F.call(De,ye?"html":"body")[0]:ye?De.documentElement:Tr},Ct=function(le){return P.call(le.ownerDocument||le,le,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},It=function(le){return le instanceof d&&(typeof le.nodeName!="string"||typeof le.textContent!="string"||typeof le.removeChild!="function"||!(le.attributes instanceof p)||typeof le.removeAttribute!="function"||typeof le.setAttribute!="function"||typeof le.namespaceURI!="string"||typeof le.insertBefore!="function"||typeof le.hasChildNodes!="function")},sr=function(le){return typeof s=="function"&&le instanceof s};function Ht(Ye,le,De){Tf(Ye,We=>{We.call(e,le,De,Yt)})}const rr=function(le){let De=null;if(Ht(S.beforeSanitizeElements,le,null),It(le))return ht(le),!0;const We=$t(le.nodeName);if(Ht(S.uponSanitizeElement,le,{tagName:We,allowedTags:q}),Fe&&le.hasChildNodes()&&!sr(le.firstElementChild)&&bn(/<[/\w!]/g,le.innerHTML)&&bn(/<[/\w!]/g,le.textContent)||le.nodeType===yu.progressingInstruction||Fe&&le.nodeType===yu.comment&&bn(/<[/\w]/g,le.data))return ht(le),!0;if(!(re.tagCheck instanceof Function&&re.tagCheck(We))&&(!q[We]||B[We])){if(!B[We]&&$r(We)&&(H.tagNameCheck instanceof RegExp&&bn(H.tagNameCheck,We)||H.tagNameCheck instanceof Function&&H.tagNameCheck(We)))return!1;if(qe&&!ot[We]){const Mt=_(le)||le.parentNode,Tr=m(le)||le.childNodes;if(Tr&&Mt){const lr=Tr.length;for(let _r=lr-1;_r>=0;--_r){const Ln=v(Tr[_r],!0);Ln.__removalCount=(le.__removalCount||0)+1,Mt.insertBefore(Ln,g(le))}}}return ht(le),!0}return le instanceof l&&!yt(le)||(We==="noscript"||We==="noembed"||We==="noframes")&&bn(/<\/no(script|embed|frames)/i,le.innerHTML)?(ht(le),!0):(Oe&&le.nodeType===yu.text&&(De=le.textContent,Tf([E,j,M],Mt=>{De=gu(De,Mt," ")}),le.textContent!==De&&(pu(e.removed,{element:le.cloneNode()}),le.textContent=De)),Ht(S.afterSanitizeElements,le,null),!1)},cr=function(le,De,We){if(Se&&(De==="id"||De==="name")&&(We in r||We in Jr))return!1;if(!(de&&!Y[De]&&bn(V,De))){if(!(ne&&bn(ee,De))){if(!(re.attributeCheck instanceof Function&&re.attributeCheck(De,le))){if(!D[De]||Y[De]){if(!($r(le)&&(H.tagNameCheck instanceof RegExp&&bn(H.tagNameCheck,le)||H.tagNameCheck instanceof Function&&H.tagNameCheck(le))&&(H.attributeNameCheck instanceof RegExp&&bn(H.attributeNameCheck,De)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(De,le))||De==="is"&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&bn(H.tagNameCheck,We)||H.tagNameCheck instanceof Function&&H.tagNameCheck(We))))return!1}else if(!ze[De]){if(!bn(W,gu(We,Q,""))){if(!((De==="src"||De==="xlink:href"||De==="href")&&le!=="script"&&lN(We,"data:")===0&&st[le])){if(!(be&&!bn(te,gu(We,Q,"")))){if(We)return!1}}}}}}}return!0},$r=function(le){return le!=="annotation-xml"&&Dp(le,J)},on=function(le){Ht(S.beforeSanitizeAttributes,le,null);const{attributes:De}=le;if(!De||It(le))return;const We={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:D,forceKeepAttr:void 0};let Mt=De.length;for(;Mt--;){const Tr=De[Mt],{name:lr,namespaceURI:_r,value:Ln}=Tr,Fi=$t(lr),Zi=Ln;let xr=lr==="value"?Zi:uN(Zi);if(We.attrName=Fi,We.attrValue=xr,We.keepAttr=!0,We.forceKeepAttr=void 0,Ht(S.uponSanitizeAttribute,le,We),xr=We.attrValue,ve&&(Fi==="id"||Fi==="name")&&(bt(lr,le),xr=Me+xr),Fe&&bn(/((--!?|])>)|<\/(style|title|textarea)/i,xr)){bt(lr,le);continue}if(Fi==="attributename"&&Dp(xr,"href")){bt(lr,le);continue}if(We.forceKeepAttr)continue;if(!We.keepAttr){bt(lr,le);continue}if(!Te&&bn(/\/>/i,xr)){bt(lr,le);continue}Oe&&Tf([E,j,M],rs=>{xr=gu(xr,rs," ")});const ga=$t(le.nodeName);if(!cr(ga,Fi,xr)){bt(lr,le);continue}if(x&&typeof u=="object"&&typeof u.getAttributeType=="function"&&!_r)switch(u.getAttributeType(ga,Fi)){case"TrustedHTML":{xr=x.createHTML(xr);break}case"TrustedScriptURL":{xr=x.createScriptURL(xr);break}}if(xr!==Zi)try{_r?le.setAttributeNS(_r,lr,xr):le.setAttribute(lr,xr),It(le)?ht(le):i2(e.removed)}catch{bt(lr,le)}}Ht(S.afterSanitizeAttributes,le,null)},Dr=function Ye(le){let De=null;const We=Ct(le);for(Ht(S.beforeSanitizeShadowDOM,le,null);De=We.nextNode();)Ht(S.uponSanitizeShadowNode,De,null),rr(De),on(De),De.content instanceof o&&Ye(De.content);Ht(S.afterSanitizeShadowDOM,le,null)};return e.sanitize=function(Ye){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},De=null,We=null,Mt=null,Tr=null;if(nn=!Ye,nn&&(Ye="<!-->"),typeof Ye!="string"&&!sr(Ye))if(typeof Ye.toString=="function"){if(Ye=Ye.toString(),typeof Ye!="string")throw mu("dirty is not a string, aborting")}else throw mu("toString is not a function");if(!e.isSupported)return Ye;if(ae||Le(le),e.removed=[],typeof Ye=="string"&&(Ue=!1),Ue){if(Ye.nodeName){const Ln=$t(Ye.nodeName);if(!q[Ln]||B[Ln])throw mu("root node is forbidden and cannot be sanitized in-place")}}else if(Ye instanceof s)De=Jt("<!---->"),We=De.ownerDocument.importNode(Ye,!0),We.nodeType===yu.element&&We.nodeName==="BODY"||We.nodeName==="HTML"?De=We:De.appendChild(We);else{if(!he&&!Oe&&!ye&&Ye.indexOf("<")===-1)return x&&me?x.createHTML(Ye):Ye;if(De=Jt(Ye),!De)return he?null:me?A:""}De&&Ke&&ht(De.firstChild);const lr=Ct(Ue?Ye:De);for(;Mt=lr.nextNode();)rr(Mt),on(Mt),Mt.content instanceof o&&Dr(Mt.content);if(Ue)return Ye;if(he){if(se)for(Tr=O.call(De.ownerDocument);De.firstChild;)Tr.appendChild(De.firstChild);else Tr=De;return(D.shadowroot||D.shadowrootmode)&&(Tr=R.call(n,Tr,!0)),Tr}let _r=ye?De.outerHTML:De.innerHTML;return ye&&q["!doctype"]&&De.ownerDocument&&De.ownerDocument.doctype&&De.ownerDocument.doctype.name&&bn(Bb,De.ownerDocument.doctype.name)&&(_r="<!DOCTYPE "+De.ownerDocument.doctype.name+`>
`+_r),Oe&&Tf([E,j,M],Ln=>{_r=gu(_r,Ln," ")}),x&&me?x.createHTML(_r):_r},e.setConfig=function(){let Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Le(Ye),ae=!0},e.clearConfig=function(){Yt=null,ae=!1},e.isValidAttribute=function(Ye,le,De){Yt||Le({});const We=$t(Ye),Mt=$t(le);return cr(We,Mt,De)},e.addHook=function(Ye,le){typeof le=="function"&&pu(S[Ye],le)},e.removeHook=function(Ye,le){if(le!==void 0){const De=aN(S[Ye],le);return De===-1?void 0:sN(S[Ye],De,1)[0]}return i2(S[Ye])},e.removeHooks=function(Ye){S[Ye]=[]},e.removeAllHooks=function(){S=c2()},e}var Up=qb();const kN=({path:t,iv:e,mimeType:r="audio/webm"})=>{const{key:n,decryptBinary:i}=ih(),[o,a]=ke.useState(null),[s,l]=ke.useState("idle"),c=ke.useRef(null),p=async()=>{if(n){l("loading");try{const{data:d,error:f}=await er.storage.from("diary-audio").download(t);if(f)throw f;l("decrypting");const u=await d.arrayBuffer(),y=await i(n,u,e),v=new Blob([y],{type:r}),b=URL.createObjectURL(v);a(b),l("ready")}catch(d){console.error("Error loading secure audio:",d),l("error")}}};return ke.useEffect(()=>()=>{o&&URL.revokeObjectURL(o)},[o]),s==="idle"?T.jsxs("button",{onClick:p,className:"flex items-center gap-3 bg-indigo-50 dark:bg-slate-700 px-4 py-3 rounded-lg border border-indigo-100 dark:border-slate-600 hover:bg-indigo-100 dark:hover:bg-slate-600 transition-colors w-full sm:w-auto",children:[T.jsx("div",{className:"p-2 bg-indigo-500 rounded-full text-white",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),T.jsxs("div",{className:"text-left",children:[T.jsx("span",{className:"block text-sm font-semibold text-indigo-900 dark:text-indigo-100",children:"Load Audio Memory"}),T.jsx("span",{className:"block text-xs text-indigo-600 dark:text-slate-400",children:"Encrypted"})]})]}):s==="loading"||s==="decrypting"?T.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 dark:bg-slate-800 px-4 py-3 rounded-lg border border-slate-200 dark:border-slate-700 w-full sm:w-auto animate-pulse",children:[T.jsxs("svg",{className:"animate-spin h-5 w-5 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),T.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:s==="loading"?"Downloading...":"Decrypting..."})]}):s==="error"?T.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),T.jsx("span",{children:"Failed to load audio."})]}):T.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 w-full",children:T.jsx("audio",{ref:c,controls:!0,className:"w-full h-8 focus:outline-none",src:o})})},AN=({entry:t,onEdit:e,onDelete:r,onBack:n})=>{const i=ZA(t.created_at),o=eN(t.created_at);if(!t.isDecrypted)return T.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 sm:p-8 rounded-lg shadow-md border border-slate-200 dark:border-slate-700 animate-fade-in flex items-center justify-center min-h-[300px]",children:T.jsxs("div",{className:"flex flex-col items-center gap-4",children:[T.jsxs("svg",{className:"animate-spin h-10 w-10 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),T.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Decrypting entry..."})]})});const a=["width","float","margin","margin-left","margin-right","margin-top","margin-bottom","text-align"];Up.addHook("afterSanitizeAttributes",l=>{if(l instanceof Element&&l.hasAttribute("style")){const p=(l.getAttribute("style")||"").split(";").filter(d=>{if(!d.includes(":"))return!1;const f=d.split(":")[0].trim();return f&&a.includes(f)}).join(";");p?l.setAttribute("style",p):l.removeAttribute("style")}});const s=Up.sanitize(t.content,{ADD_TAGS:["img"],ADD_ATTR:["style","class"]});return Up.removeHook("afterSanitizeAttributes"),T.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 sm:p-8 rounded-lg shadow-md border border-slate-200 dark:border-slate-700 animate-fade-in",children:[T.jsxs("button",{onClick:n,className:"mb-6 flex items-center text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors group",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 transform group-hover:-translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Timeline"]}),T.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-700 pb-4 mb-4",children:[T.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[T.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:t.title}),T.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i," (",o,")"]})]}),T.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[t.mood&&T.jsx("span",{className:"text-3xl","aria-label":`Mood: ${t.mood}`,children:t.mood}),t.tags&&t.tags.length>0&&T.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(l=>T.jsx("span",{className:"text-sm font-medium bg-indigo-100 text-indigo-800 px-2.5 py-1 rounded-full dark:bg-indigo-900/50 dark:text-indigo-300",children:l},l))})]})]}),t.audio&&T.jsx("div",{className:"my-6",children:T.jsx(kN,{path:t.audio.path,iv:t.audio.iv,mimeType:t.audio.type})}),T.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none my-6",dangerouslySetInnerHTML:{__html:s}}),T.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-6 flex justify-end gap-3",children:[T.jsxs("button",{onClick:e,className:"flex items-center gap-2 bg-slate-100 text-slate-700 font-semibold px-4 py-2 rounded-lg hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 transition-colors",children:[T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[T.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),T.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),"Edit"]}),T.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-red-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Delete"]})]})]})};function NN(){this.__data__=[],this.size=0}var EN=NN;function ON(t,e){return t===e||t!==t&&e!==e}var Ub=ON,LN=Ub;function TN(t,e){for(var r=t.length;r--;)if(LN(t[r][0],e))return r;return-1}var ah=TN,PN=ah,jN=Array.prototype,CN=jN.splice;function RN(t){var e=this.__data__,r=PN(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():CN.call(e,r,1),--this.size,!0}var IN=RN,DN=ah;function MN(t){var e=this.__data__,r=DN(e,t);return r<0?void 0:e[r][1]}var FN=MN,BN=ah;function qN(t){return BN(this.__data__,t)>-1}var UN=qN,zN=ah;function $N(t,e){var r=this.__data__,n=zN(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var HN=$N,WN=EN,VN=IN,GN=FN,KN=UN,YN=HN;function Sl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Sl.prototype.clear=WN;Sl.prototype.delete=VN;Sl.prototype.get=GN;Sl.prototype.has=KN;Sl.prototype.set=YN;var sh=Sl,JN=sh;function XN(){this.__data__=new JN,this.size=0}var QN=XN;function ZN(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var eE=ZN;function tE(t){return this.__data__.get(t)}var rE=tE;function nE(t){return this.__data__.has(t)}var iE=nE,oE=typeof Yn=="object"&&Yn&&Yn.Object===Object&&Yn,zb=oE,aE=zb,sE=typeof self=="object"&&self&&self.Object===Object&&self,lE=aE||sE||Function("return this")(),ko=lE,uE=ko,cE=uE.Symbol,Dg=cE,f2=Dg,$b=Object.prototype,fE=$b.hasOwnProperty,dE=$b.toString,wu=f2?f2.toStringTag:void 0;function hE(t){var e=fE.call(t,wu),r=t[wu];try{t[wu]=void 0;var n=!0}catch{}var i=dE.call(t);return n&&(e?t[wu]=r:delete t[wu]),i}var pE=hE,gE=Object.prototype,mE=gE.toString;function vE(t){return mE.call(t)}var yE=vE,d2=Dg,wE=pE,bE=yE,_E="[object Null]",xE="[object Undefined]",h2=d2?d2.toStringTag:void 0;function SE(t){return t==null?t===void 0?xE:_E:h2&&h2 in Object(t)?wE(t):bE(t)}var lh=SE;function kE(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Hb=kE,AE=lh,NE=Hb,EE="[object AsyncFunction]",OE="[object Function]",LE="[object GeneratorFunction]",TE="[object Proxy]";function PE(t){if(!NE(t))return!1;var e=AE(t);return e==OE||e==LE||e==EE||e==TE}var Wb=PE,jE=ko,CE=jE["__core-js_shared__"],RE=CE,zp=RE,p2=function(){var t=/[^.]+$/.exec(zp&&zp.keys&&zp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function IE(t){return!!p2&&p2 in t}var DE=IE,ME=Function.prototype,FE=ME.toString;function BE(t){if(t!=null){try{return FE.call(t)}catch{}try{return t+""}catch{}}return""}var Vb=BE,qE=Wb,UE=DE,zE=Hb,$E=Vb,HE=/[\\^$.*+?()[\]{}|]/g,WE=/^\[object .+?Constructor\]$/,VE=Function.prototype,GE=Object.prototype,KE=VE.toString,YE=GE.hasOwnProperty,JE=RegExp("^"+KE.call(YE).replace(HE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function XE(t){if(!zE(t)||UE(t))return!1;var e=qE(t)?JE:WE;return e.test($E(t))}var QE=XE;function ZE(t,e){return t==null?void 0:t[e]}var e8=ZE,t8=QE,r8=e8;function n8(t,e){var r=r8(t,e);return t8(r)?r:void 0}var kl=n8,i8=kl,o8=ko,a8=i8(o8,"Map"),Mg=a8,s8=kl,l8=s8(Object,"create"),uh=l8,g2=uh;function u8(){this.__data__=g2?g2(null):{},this.size=0}var c8=u8;function f8(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var d8=f8,h8=uh,p8="__lodash_hash_undefined__",g8=Object.prototype,m8=g8.hasOwnProperty;function v8(t){var e=this.__data__;if(h8){var r=e[t];return r===p8?void 0:r}return m8.call(e,t)?e[t]:void 0}var y8=v8,w8=uh,b8=Object.prototype,_8=b8.hasOwnProperty;function x8(t){var e=this.__data__;return w8?e[t]!==void 0:_8.call(e,t)}var S8=x8,k8=uh,A8="__lodash_hash_undefined__";function N8(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=k8&&e===void 0?A8:e,this}var E8=N8,O8=c8,L8=d8,T8=y8,P8=S8,j8=E8;function Al(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Al.prototype.clear=O8;Al.prototype.delete=L8;Al.prototype.get=T8;Al.prototype.has=P8;Al.prototype.set=j8;var C8=Al,m2=C8,R8=sh,I8=Mg;function D8(){this.size=0,this.__data__={hash:new m2,map:new(I8||R8),string:new m2}}var M8=D8;function F8(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var B8=F8,q8=B8;function U8(t,e){var r=t.__data__;return q8(e)?r[typeof e=="string"?"string":"hash"]:r.map}var ch=U8,z8=ch;function $8(t){var e=z8(this,t).delete(t);return this.size-=e?1:0,e}var H8=$8,W8=ch;function V8(t){return W8(this,t).get(t)}var G8=V8,K8=ch;function Y8(t){return K8(this,t).has(t)}var J8=Y8,X8=ch;function Q8(t,e){var r=X8(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var Z8=Q8,eO=M8,tO=H8,rO=G8,nO=J8,iO=Z8;function Nl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Nl.prototype.clear=eO;Nl.prototype.delete=tO;Nl.prototype.get=rO;Nl.prototype.has=nO;Nl.prototype.set=iO;var Gb=Nl,oO=sh,aO=Mg,sO=Gb,lO=200;function uO(t,e){var r=this.__data__;if(r instanceof oO){var n=r.__data__;if(!aO||n.length<lO-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new sO(n)}return r.set(t,e),this.size=r.size,this}var cO=uO,fO=sh,dO=QN,hO=eE,pO=rE,gO=iE,mO=cO;function El(t){var e=this.__data__=new fO(t);this.size=e.size}El.prototype.clear=dO;El.prototype.delete=hO;El.prototype.get=pO;El.prototype.has=gO;El.prototype.set=mO;var vO=El,yO="__lodash_hash_undefined__";function wO(t){return this.__data__.set(t,yO),this}var bO=wO;function _O(t){return this.__data__.has(t)}var xO=_O,SO=Gb,kO=bO,AO=xO;function Cd(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new SO;++e<r;)this.add(t[e])}Cd.prototype.add=Cd.prototype.push=kO;Cd.prototype.has=AO;var NO=Cd;function EO(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var OO=EO;function LO(t,e){return t.has(e)}var TO=LO,PO=NO,jO=OO,CO=TO,RO=1,IO=2;function DO(t,e,r,n,i,o){var a=r&RO,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(t),p=o.get(e);if(c&&p)return c==e&&p==t;var d=-1,f=!0,u=r&IO?new PO:void 0;for(o.set(t,e),o.set(e,t);++d<s;){var y=t[d],v=e[d];if(n)var b=a?n(v,y,d,e,t,o):n(y,v,d,t,e,o);if(b!==void 0){if(b)continue;f=!1;break}if(u){if(!jO(e,function(g,m){if(!CO(u,m)&&(y===g||i(y,g,r,n,o)))return u.push(m)})){f=!1;break}}else if(!(y===v||i(y,v,r,n,o))){f=!1;break}}return o.delete(t),o.delete(e),f}var Kb=DO,MO=ko,FO=MO.Uint8Array,BO=FO;function qO(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var UO=qO;function zO(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var $O=zO,v2=Dg,y2=BO,HO=Ub,WO=Kb,VO=UO,GO=$O,KO=1,YO=2,JO="[object Boolean]",XO="[object Date]",QO="[object Error]",ZO="[object Map]",eL="[object Number]",tL="[object RegExp]",rL="[object Set]",nL="[object String]",iL="[object Symbol]",oL="[object ArrayBuffer]",aL="[object DataView]",w2=v2?v2.prototype:void 0,$p=w2?w2.valueOf:void 0;function sL(t,e,r,n,i,o,a){switch(r){case aL:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case oL:return!(t.byteLength!=e.byteLength||!o(new y2(t),new y2(e)));case JO:case XO:case eL:return HO(+t,+e);case QO:return t.name==e.name&&t.message==e.message;case tL:case nL:return t==e+"";case ZO:var s=VO;case rL:var l=n&KO;if(s||(s=GO),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;n|=YO,a.set(t,e);var p=WO(s(t),s(e),n,i,o,a);return a.delete(t),p;case iL:if($p)return $p.call(t)==$p.call(e)}return!1}var lL=sL;function uL(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var cL=uL,fL=Array.isArray,Fg=fL,dL=cL,hL=Fg;function pL(t,e,r){var n=e(t);return hL(t)?n:dL(n,r(t))}var gL=pL;function mL(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}var vL=mL;function yL(){return[]}var wL=yL,bL=vL,_L=wL,xL=Object.prototype,SL=xL.propertyIsEnumerable,b2=Object.getOwnPropertySymbols,kL=b2?function(t){return t==null?[]:(t=Object(t),bL(b2(t),function(e){return SL.call(t,e)}))}:_L,AL=kL;function NL(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var EL=NL;function OL(t){return t!=null&&typeof t=="object"}var fh=OL,LL=lh,TL=fh,PL="[object Arguments]";function jL(t){return TL(t)&&LL(t)==PL}var CL=jL,_2=CL,RL=fh,Yb=Object.prototype,IL=Yb.hasOwnProperty,DL=Yb.propertyIsEnumerable,ML=_2(function(){return arguments}())?_2:function(t){return RL(t)&&IL.call(t,"callee")&&!DL.call(t,"callee")},FL=ML,Rd={exports:{}};function BL(){return!1}var qL=BL;Rd.exports;(function(t,e){var r=ko,n=qL,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?r.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||n;t.exports=c})(Rd,Rd.exports);var Jb=Rd.exports,UL=9007199254740991,zL=/^(?:0|[1-9]\d*)$/;function $L(t,e){var r=typeof t;return e=e??UL,!!e&&(r=="number"||r!="symbol"&&zL.test(t))&&t>-1&&t%1==0&&t<e}var HL=$L,WL=9007199254740991;function VL(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=WL}var Xb=VL,GL=lh,KL=Xb,YL=fh,JL="[object Arguments]",XL="[object Array]",QL="[object Boolean]",ZL="[object Date]",eT="[object Error]",tT="[object Function]",rT="[object Map]",nT="[object Number]",iT="[object Object]",oT="[object RegExp]",aT="[object Set]",sT="[object String]",lT="[object WeakMap]",uT="[object ArrayBuffer]",cT="[object DataView]",fT="[object Float32Array]",dT="[object Float64Array]",hT="[object Int8Array]",pT="[object Int16Array]",gT="[object Int32Array]",mT="[object Uint8Array]",vT="[object Uint8ClampedArray]",yT="[object Uint16Array]",wT="[object Uint32Array]",ir={};ir[fT]=ir[dT]=ir[hT]=ir[pT]=ir[gT]=ir[mT]=ir[vT]=ir[yT]=ir[wT]=!0;ir[JL]=ir[XL]=ir[uT]=ir[QL]=ir[cT]=ir[ZL]=ir[eT]=ir[tT]=ir[rT]=ir[nT]=ir[iT]=ir[oT]=ir[aT]=ir[sT]=ir[lT]=!1;function bT(t){return YL(t)&&KL(t.length)&&!!ir[GL(t)]}var _T=bT;function xT(t){return function(e){return t(e)}}var ST=xT,Id={exports:{}};Id.exports;(function(t,e){var r=zb,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===n,a=o&&r.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(Id,Id.exports);var kT=Id.exports,AT=_T,NT=ST,x2=kT,S2=x2&&x2.isTypedArray,ET=S2?NT(S2):AT,Qb=ET,OT=EL,LT=FL,TT=Fg,PT=Jb,jT=HL,CT=Qb,RT=Object.prototype,IT=RT.hasOwnProperty;function DT(t,e){var r=TT(t),n=!r&&LT(t),i=!r&&!n&&PT(t),o=!r&&!n&&!i&&CT(t),a=r||n||i||o,s=a?OT(t.length,String):[],l=s.length;for(var c in t)(e||IT.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||jT(c,l)))&&s.push(c);return s}var MT=DT,FT=Object.prototype;function BT(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||FT;return t===r}var qT=BT;function UT(t,e){return function(r){return t(e(r))}}var zT=UT,$T=zT,HT=$T(Object.keys,Object),WT=HT,VT=qT,GT=WT,KT=Object.prototype,YT=KT.hasOwnProperty;function JT(t){if(!VT(t))return GT(t);var e=[];for(var r in Object(t))YT.call(t,r)&&r!="constructor"&&e.push(r);return e}var XT=JT,QT=Wb,ZT=Xb;function e7(t){return t!=null&&ZT(t.length)&&!QT(t)}var t7=e7,r7=MT,n7=XT,i7=t7;function o7(t){return i7(t)?r7(t):n7(t)}var a7=o7,s7=gL,l7=AL,u7=a7;function c7(t){return s7(t,u7,l7)}var f7=c7,k2=f7,d7=1,h7=Object.prototype,p7=h7.hasOwnProperty;function g7(t,e,r,n,i,o){var a=r&d7,s=k2(t),l=s.length,c=k2(e),p=c.length;if(l!=p&&!a)return!1;for(var d=l;d--;){var f=s[d];if(!(a?f in e:p7.call(e,f)))return!1}var u=o.get(t),y=o.get(e);if(u&&y)return u==e&&y==t;var v=!0;o.set(t,e),o.set(e,t);for(var b=a;++d<l;){f=s[d];var g=t[f],m=e[f];if(n)var _=a?n(m,g,f,e,t,o):n(g,m,f,t,e,o);if(!(_===void 0?g===m||i(g,m,r,n,o):_)){v=!1;break}b||(b=f=="constructor")}if(v&&!b){var x=t.constructor,A=e.constructor;x!=A&&"constructor"in t&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof A=="function"&&A instanceof A)&&(v=!1)}return o.delete(t),o.delete(e),v}var m7=g7,v7=kl,y7=ko,w7=v7(y7,"DataView"),b7=w7,_7=kl,x7=ko,S7=_7(x7,"Promise"),k7=S7,A7=kl,N7=ko,E7=A7(N7,"Set"),O7=E7,L7=kl,T7=ko,P7=L7(T7,"WeakMap"),j7=P7,c1=b7,f1=Mg,d1=k7,h1=O7,p1=j7,Zb=lh,Ol=Vb,A2="[object Map]",C7="[object Object]",N2="[object Promise]",E2="[object Set]",O2="[object WeakMap]",L2="[object DataView]",R7=Ol(c1),I7=Ol(f1),D7=Ol(d1),M7=Ol(h1),F7=Ol(p1),ja=Zb;(c1&&ja(new c1(new ArrayBuffer(1)))!=L2||f1&&ja(new f1)!=A2||d1&&ja(d1.resolve())!=N2||h1&&ja(new h1)!=E2||p1&&ja(new p1)!=O2)&&(ja=function(t){var e=Zb(t),r=e==C7?t.constructor:void 0,n=r?Ol(r):"";if(n)switch(n){case R7:return L2;case I7:return A2;case D7:return N2;case M7:return E2;case F7:return O2}return e});var B7=ja,Hp=vO,q7=Kb,U7=lL,z7=m7,T2=B7,P2=Fg,j2=Jb,$7=Qb,H7=1,C2="[object Arguments]",R2="[object Array]",jf="[object Object]",W7=Object.prototype,I2=W7.hasOwnProperty;function V7(t,e,r,n,i,o){var a=P2(t),s=P2(e),l=a?R2:T2(t),c=s?R2:T2(e);l=l==C2?jf:l,c=c==C2?jf:c;var p=l==jf,d=c==jf,f=l==c;if(f&&j2(t)){if(!j2(e))return!1;a=!0,p=!1}if(f&&!p)return o||(o=new Hp),a||$7(t)?q7(t,e,r,n,i,o):U7(t,e,l,r,n,i,o);if(!(r&H7)){var u=p&&I2.call(t,"__wrapped__"),y=d&&I2.call(e,"__wrapped__");if(u||y){var v=u?t.value():t,b=y?e.value():e;return o||(o=new Hp),i(v,b,r,n,o)}}return f?(o||(o=new Hp),z7(t,e,r,n,i,o)):!1}var G7=V7,K7=G7,D2=fh;function e_(t,e,r,n,i){return t===e?!0:t==null||e==null||!D2(t)&&!D2(e)?t!==t&&e!==e:K7(t,e,r,n,e_,i)}var Y7=e_,J7=Y7;function X7(t,e){return J7(t,e)}var Q7=X7,t_={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(n,i){t.exports=i()})(typeof self<"u"?self:Yn,function(){return function(r){var n={};function i(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return r[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=r,i.c=n,i.d=function(o,a,s){i.o(o,a)||Object.defineProperty(o,a,{configurable:!1,enumerable:!0,get:s})},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=109)}([function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(17),a=i(18),s=i(19),l=i(45),c=i(46),p=i(47),d=i(48),f=i(49),u=i(12),y=i(32),v=i(33),b=i(31),g=i(1),m={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:o.default,Format:a.default,Leaf:s.default,Embed:d.default,Scroll:l.default,Block:p.default,Inline:c.default,Text:f.default,Attributor:{Attribute:u.default,Class:y.default,Style:v.default,Store:b.default}};n.default=m},function(r,n,i){var o=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var _ in m)m.hasOwnProperty(_)&&(g[_]=m[_])};return function(g,m){b(g,m);function _(){this.constructor=g}g.prototype=m===null?Object.create(m):(_.prototype=m.prototype,new _)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=function(b){o(g,b);function g(m){var _=this;return m="[Parchment] "+m,_=b.call(this,m)||this,_.message=m,_.name=_.constructor.name,_}return g}(Error);n.ParchmentError=a;var s={},l={},c={},p={};n.DATA_KEY="__blot";var d;(function(b){b[b.TYPE=3]="TYPE",b[b.LEVEL=12]="LEVEL",b[b.ATTRIBUTE=13]="ATTRIBUTE",b[b.BLOT=14]="BLOT",b[b.INLINE=7]="INLINE",b[b.BLOCK=11]="BLOCK",b[b.BLOCK_BLOT=10]="BLOCK_BLOT",b[b.INLINE_BLOT=6]="INLINE_BLOT",b[b.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",b[b.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",b[b.ANY=15]="ANY"})(d=n.Scope||(n.Scope={}));function f(b,g){var m=y(b);if(m==null)throw new a("Unable to create "+b+" blot");var _=m,x=b instanceof Node||b.nodeType===Node.TEXT_NODE?b:_.create(g);return new _(x,g)}n.create=f;function u(b,g){return g===void 0&&(g=!1),b==null?null:b[n.DATA_KEY]!=null?b[n.DATA_KEY].blot:g?u(b.parentNode,g):null}n.find=u;function y(b,g){g===void 0&&(g=d.ANY);var m;if(typeof b=="string")m=p[b]||s[b];else if(b instanceof Text||b.nodeType===Node.TEXT_NODE)m=p.text;else if(typeof b=="number")b&d.LEVEL&d.BLOCK?m=p.block:b&d.LEVEL&d.INLINE&&(m=p.inline);else if(b instanceof HTMLElement){var _=(b.getAttribute("class")||"").split(/\s+/);for(var x in _)if(m=l[_[x]],m)break;m=m||c[b.tagName]}return m==null?null:g&d.LEVEL&m.scope&&g&d.TYPE&m.scope?m:null}n.query=y;function v(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];if(b.length>1)return b.map(function(x){return v(x)});var m=b[0];if(typeof m.blotName!="string"&&typeof m.attrName!="string")throw new a("Invalid definition");if(m.blotName==="abstract")throw new a("Cannot register abstract class");if(p[m.blotName||m.attrName]=m,typeof m.keyName=="string")s[m.keyName]=m;else if(m.className!=null&&(l[m.className]=m),m.tagName!=null){Array.isArray(m.tagName)?m.tagName=m.tagName.map(function(x){return x.toUpperCase()}):m.tagName=m.tagName.toUpperCase();var _=Array.isArray(m.tagName)?m.tagName:[m.tagName];_.forEach(function(x){(c[x]==null||m.className==null)&&(c[x]=m)})}return m}n.register=v},function(r,n,i){var o=i(51),a=i(11),s=i(3),l=i(20),c="\0",p=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};p.prototype.insert=function(d,f){var u={};return d.length===0?this:(u.insert=d,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(u.attributes=f),this.push(u))},p.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},p.prototype.retain=function(d,f){if(d<=0)return this;var u={retain:d};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(u.attributes=f),this.push(u)},p.prototype.push=function(d){var f=this.ops.length,u=this.ops[f-1];if(d=s(!0,{},d),typeof u=="object"){if(typeof d.delete=="number"&&typeof u.delete=="number")return this.ops[f-1]={delete:u.delete+d.delete},this;if(typeof u.delete=="number"&&d.insert!=null&&(f-=1,u=this.ops[f-1],typeof u!="object"))return this.ops.unshift(d),this;if(a(d.attributes,u.attributes)){if(typeof d.insert=="string"&&typeof u.insert=="string")return this.ops[f-1]={insert:u.insert+d.insert},typeof d.attributes=="object"&&(this.ops[f-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof u.retain=="number")return this.ops[f-1]={retain:u.retain+d.retain},typeof d.attributes=="object"&&(this.ops[f-1].attributes=d.attributes),this}}return f===this.ops.length?this.ops.push(d):this.ops.splice(f,0,d),this},p.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},p.prototype.filter=function(d){return this.ops.filter(d)},p.prototype.forEach=function(d){this.ops.forEach(d)},p.prototype.map=function(d){return this.ops.map(d)},p.prototype.partition=function(d){var f=[],u=[];return this.forEach(function(y){var v=d(y)?f:u;v.push(y)}),[f,u]},p.prototype.reduce=function(d,f){return this.ops.reduce(d,f)},p.prototype.changeLength=function(){return this.reduce(function(d,f){return f.insert?d+l.length(f):f.delete?d-f.delete:d},0)},p.prototype.length=function(){return this.reduce(function(d,f){return d+l.length(f)},0)},p.prototype.slice=function(d,f){d=d||0,typeof f!="number"&&(f=1/0);for(var u=[],y=l.iterator(this.ops),v=0;v<f&&y.hasNext();){var b;v<d?b=y.next(d-v):(b=y.next(f-v),u.push(b)),v+=l.length(b)}return new p(u)},p.prototype.compose=function(d){var f=l.iterator(this.ops),u=l.iterator(d.ops),y=[],v=u.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var b=v.retain;f.peekType()==="insert"&&f.peekLength()<=b;)b-=f.peekLength(),y.push(f.next());v.retain-b>0&&u.next(v.retain-b)}for(var g=new p(y);f.hasNext()||u.hasNext();)if(u.peekType()==="insert")g.push(u.next());else if(f.peekType()==="delete")g.push(f.next());else{var m=Math.min(f.peekLength(),u.peekLength()),_=f.next(m),x=u.next(m);if(typeof x.retain=="number"){var A={};typeof _.retain=="number"?A.retain=m:A.insert=_.insert;var I=l.attributes.compose(_.attributes,x.attributes,typeof _.retain=="number");if(I&&(A.attributes=I),g.push(A),!u.hasNext()&&a(g.ops[g.ops.length-1],A)){var P=new p(f.rest());return g.concat(P).chop()}}else typeof x.delete=="number"&&typeof _.retain=="number"&&g.push(x)}return g.chop()},p.prototype.concat=function(d){var f=new p(this.ops.slice());return d.ops.length>0&&(f.push(d.ops[0]),f.ops=f.ops.concat(d.ops.slice(1))),f},p.prototype.diff=function(d,f){if(this.ops===d.ops)return new p;var u=[this,d].map(function(m){return m.map(function(_){if(_.insert!=null)return typeof _.insert=="string"?_.insert:c;var x=m===d?"on":"with";throw new Error("diff() called "+x+" non-document")}).join("")}),y=new p,v=o(u[0],u[1],f),b=l.iterator(this.ops),g=l.iterator(d.ops);return v.forEach(function(m){for(var _=m[1].length;_>0;){var x=0;switch(m[0]){case o.INSERT:x=Math.min(g.peekLength(),_),y.push(g.next(x));break;case o.DELETE:x=Math.min(_,b.peekLength()),b.next(x),y.delete(x);break;case o.EQUAL:x=Math.min(b.peekLength(),g.peekLength(),_);var A=b.next(x),I=g.next(x);a(A.insert,I.insert)?y.retain(x,l.attributes.diff(A.attributes,I.attributes)):y.push(I).delete(x);break}_-=x}}),y.chop()},p.prototype.eachLine=function(d,f){f=f||`
`;for(var u=l.iterator(this.ops),y=new p,v=0;u.hasNext();){if(u.peekType()!=="insert")return;var b=u.peek(),g=l.length(b)-u.peekLength(),m=typeof b.insert=="string"?b.insert.indexOf(f,g)-g:-1;if(m<0)y.push(u.next());else if(m>0)y.push(u.next(m));else{if(d(y,u.next(1).attributes||{},v)===!1)return;v+=1,y=new p}}y.length()>0&&d(y,{},v)},p.prototype.transform=function(d,f){if(f=!!f,typeof d=="number")return this.transformPosition(d,f);for(var u=l.iterator(this.ops),y=l.iterator(d.ops),v=new p;u.hasNext()||y.hasNext();)if(u.peekType()==="insert"&&(f||y.peekType()!=="insert"))v.retain(l.length(u.next()));else if(y.peekType()==="insert")v.push(y.next());else{var b=Math.min(u.peekLength(),y.peekLength()),g=u.next(b),m=y.next(b);if(g.delete)continue;m.delete?v.push(m):v.retain(b,l.attributes.transform(g.attributes,m.attributes,f))}return v.chop()},p.prototype.transformPosition=function(d,f){f=!!f;for(var u=l.iterator(this.ops),y=0;u.hasNext()&&y<=d;){var v=u.peekLength(),b=u.peekType();if(u.next(),b==="delete"){d-=Math.min(v,d-y);continue}else b==="insert"&&(y<d||!f)&&(d+=v);y+=v}return d},r.exports=p},function(r,n){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=function(u){return typeof Array.isArray=="function"?Array.isArray(u):o.call(u)==="[object Array]"},c=function(u){if(!u||o.call(u)!=="[object Object]")return!1;var y=i.call(u,"constructor"),v=u.constructor&&u.constructor.prototype&&i.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!y&&!v)return!1;var b;for(b in u);return typeof b>"u"||i.call(u,b)},p=function(u,y){a&&y.name==="__proto__"?a(u,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):u[y.name]=y.newValue},d=function(u,y){if(y==="__proto__")if(i.call(u,y)){if(s)return s(u,y).value}else return;return u[y]};r.exports=function f(){var u,y,v,b,g,m,_=arguments[0],x=1,A=arguments.length,I=!1;for(typeof _=="boolean"&&(I=_,_=arguments[1]||{},x=2),(_==null||typeof _!="object"&&typeof _!="function")&&(_={});x<A;++x)if(u=arguments[x],u!=null)for(y in u)v=d(_,y),b=d(u,y),_!==b&&(I&&b&&(c(b)||(g=l(b)))?(g?(g=!1,m=v&&l(v)?v:[]):m=v&&c(v)?v:{},p(_,{name:y,newValue:f(I,m,b)})):typeof b<"u"&&p(_,{name:y,newValue:b}));return _}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var o=function(){function S(E,j){for(var M=0;M<j.length;M++){var V=j[M];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(E,V.key,V)}}return function(E,j,M){return j&&S(E.prototype,j),M&&S(E,M),E}}(),a=function S(E,j,M){E===null&&(E=Function.prototype);var V=Object.getOwnPropertyDescriptor(E,j);if(V===void 0){var ee=Object.getPrototypeOf(E);return ee===null?void 0:S(ee,j,M)}else{if("value"in V)return V.value;var te=V.get;return te===void 0?void 0:te.call(M)}},s=i(3),l=_(s),c=i(2),p=_(c),d=i(0),f=_(d),u=i(16),y=_(u),v=i(6),b=_(v),g=i(7),m=_(g);function _(S){return S&&S.__esModule?S:{default:S}}function x(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}function A(S,E){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:S}function I(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(S,E):S.__proto__=E)}var P=1,O=function(S){I(E,S);function E(){return x(this,E),A(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return o(E,[{key:"attach",value:function(){a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new p.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(M,V){var ee=f.default.query(M,f.default.Scope.BLOCK_ATTRIBUTE);ee!=null&&this.attributes.attribute(ee,V)}},{key:"formatAt",value:function(M,V,ee,te){this.format(ee,te)}},{key:"insertAt",value:function(M,V,ee){if(typeof V=="string"&&V.endsWith(`
`)){var te=f.default.create(F.blotName);this.parent.insertBefore(te,M===0?this:this.next),te.insertAt(0,V.slice(0,-1))}else a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,M,V,ee)}}]),E}(f.default.Embed);O.scope=f.default.Scope.BLOCK_BLOT;var F=function(S){I(E,S);function E(j){x(this,E);var M=A(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,j));return M.cache={},M}return o(E,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(M,V){return V.length()===0?M:M.insert(V.value(),R(V))},new p.default).insert(`
`,R(this))),this.cache.delta}},{key:"deleteAt",value:function(M,V){a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,M,V),this.cache={}}},{key:"formatAt",value:function(M,V,ee,te){V<=0||(f.default.query(ee,f.default.Scope.BLOCK)?M+V===this.length()&&this.format(ee,te):a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,M,Math.min(V,this.length()-M-1),ee,te),this.cache={})}},{key:"insertAt",value:function(M,V,ee){if(ee!=null)return a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,M,V,ee);if(V.length!==0){var te=V.split(`
`),Q=te.shift();Q.length>0&&(M<this.length()-1||this.children.tail==null?a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,Math.min(M,this.length()-1),Q):this.children.tail.insertAt(this.children.tail.length(),Q),this.cache={});var J=this;te.reduce(function(W,q){return J=J.split(W,!0),J.insertAt(0,q),q.length},M+Q.length)}}},{key:"insertBefore",value:function(M,V){var ee=this.children.head;a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,M,V),ee instanceof y.default&&ee.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"length",this).call(this)+P),this.cache.length}},{key:"moveChildren",value:function(M,V){a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"moveChildren",this).call(this,M,V),this.cache={}}},{key:"optimize",value:function(M){a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,M),this.cache={}}},{key:"path",value:function(M){return a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,M,!0)}},{key:"removeChild",value:function(M){a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"removeChild",this).call(this,M),this.cache={}}},{key:"split",value:function(M){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(V&&(M===0||M>=this.length()-P)){var ee=this.clone();return M===0?(this.parent.insertBefore(ee,this),this):(this.parent.insertBefore(ee,this.next),ee)}else{var te=a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"split",this).call(this,M,V);return this.cache={},te}}}]),E}(f.default.Block);F.blotName="block",F.tagName="P",F.defaultChild="break",F.allowedChildren=[b.default,f.default.Embed,m.default];function R(S){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return S==null||(typeof S.formats=="function"&&(E=(0,l.default)(E,S.formats())),S.parent==null||S.parent.blotName=="scroll"||S.parent.statics.scope!==S.statics.scope)?E:R(S.parent,E)}n.bubbleFormats=R,n.BlockEmbed=O,n.default=F},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},a=function(){function J(W,q){var L=[],D=!0,U=!1,H=void 0;try{for(var B=W[Symbol.iterator](),Y;!(D=(Y=B.next()).done)&&(L.push(Y.value),!(q&&L.length===q));D=!0);}catch(re){U=!0,H=re}finally{try{!D&&B.return&&B.return()}finally{if(U)throw H}}return L}return function(W,q){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return J(W,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function J(W,q){for(var L=0;L<q.length;L++){var D=q[L];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(W,D.key,D)}}return function(W,q,L){return q&&J(W.prototype,q),L&&J(W,L),W}}();i(50);var l=i(2),c=R(l),p=i(14),d=R(p),f=i(8),u=R(f),y=i(9),v=R(y),b=i(0),g=R(b),m=i(15),_=R(m),x=i(3),A=R(x),I=i(10),P=R(I),O=i(34),F=R(O);function R(J){return J&&J.__esModule?J:{default:J}}function S(J,W,q){return W in J?Object.defineProperty(J,W,{value:q,enumerable:!0,configurable:!0,writable:!0}):J[W]=q,J}function E(J,W){if(!(J instanceof W))throw new TypeError("Cannot call a class as a function")}var j=(0,P.default)("quill"),M=function(){s(J,null,[{key:"debug",value:function(q){q===!0&&(q="log"),P.default.level(q)}},{key:"find",value:function(q){return q.__quill||g.default.find(q)}},{key:"import",value:function(q){return this.imports[q]==null&&j.error("Cannot import "+q+". Are you sure it was registered?"),this.imports[q]}},{key:"register",value:function(q,L){var D=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof q!="string"){var H=q.attrName||q.blotName;typeof H=="string"?this.register("formats/"+H,q,L):Object.keys(q).forEach(function(B){D.register(B,q[B],L)})}else this.imports[q]!=null&&!U&&j.warn("Overwriting "+q+" with",L),this.imports[q]=L,(q.startsWith("blots/")||q.startsWith("formats/"))&&L.blotName!=="abstract"?g.default.register(L):q.startsWith("modules")&&typeof L.register=="function"&&L.register()}}]);function J(W){var q=this,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(E(this,J),this.options=V(W,L),this.container=this.options.container,this.container==null)return j.error("Invalid Quill container",W);this.options.debug&&J.debug(this.options.debug);var D=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new u.default,this.scroll=g.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new _.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(u.default.events.EDITOR_CHANGE,function(H){H===u.default.events.TEXT_CHANGE&&q.root.classList.toggle("ql-blank",q.editor.isBlank())}),this.emitter.on(u.default.events.SCROLL_UPDATE,function(H,B){var Y=q.selection.lastRange,re=Y&&Y.length===0?Y.index:void 0;ee.call(q,function(){return q.editor.update(null,B,re)},H)});var U=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+D+"<p><br></p></div>");this.setContents(U),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return s(J,[{key:"addContainer",value:function(q){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof q=="string"){var D=q;q=document.createElement("div"),q.classList.add(D)}return this.container.insertBefore(q,L),q}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(q,L,D){var U=this,H=te(q,L,D),B=a(H,4);return q=B[0],L=B[1],D=B[3],ee.call(this,function(){return U.editor.deleteText(q,L)},D,q,-1*L)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(q),this.container.classList.toggle("ql-disabled",!q)}},{key:"focus",value:function(){var q=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=q,this.scrollIntoView()}},{key:"format",value:function(q,L){var D=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u.default.sources.API;return ee.call(this,function(){var H=D.getSelection(!0),B=new c.default;if(H==null)return B;if(g.default.query(q,g.default.Scope.BLOCK))B=D.editor.formatLine(H.index,H.length,S({},q,L));else{if(H.length===0)return D.selection.format(q,L),B;B=D.editor.formatText(H.index,H.length,S({},q,L))}return D.setSelection(H,u.default.sources.SILENT),B},U)}},{key:"formatLine",value:function(q,L,D,U,H){var B=this,Y=void 0,re=te(q,L,D,U,H),ne=a(re,4);return q=ne[0],L=ne[1],Y=ne[2],H=ne[3],ee.call(this,function(){return B.editor.formatLine(q,L,Y)},H,q,0)}},{key:"formatText",value:function(q,L,D,U,H){var B=this,Y=void 0,re=te(q,L,D,U,H),ne=a(re,4);return q=ne[0],L=ne[1],Y=ne[2],H=ne[3],ee.call(this,function(){return B.editor.formatText(q,L,Y)},H,q,0)}},{key:"getBounds",value:function(q){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=void 0;typeof q=="number"?D=this.selection.getBounds(q,L):D=this.selection.getBounds(q.index,q.length);var U=this.container.getBoundingClientRect();return{bottom:D.bottom-U.top,height:D.height,left:D.left-U.left,right:D.right-U.left,top:D.top-U.top,width:D.width}}},{key:"getContents",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-q,D=te(q,L),U=a(D,2);return q=U[0],L=U[1],this.editor.getContents(q,L)}},{key:"getFormat",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof q=="number"?this.editor.getFormat(q,L):this.editor.getFormat(q.index,q.length)}},{key:"getIndex",value:function(q){return q.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(q){return this.scroll.leaf(q)}},{key:"getLine",value:function(q){return this.scroll.line(q)}},{key:"getLines",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof q!="number"?this.scroll.lines(q.index,q.length):this.scroll.lines(q,L)}},{key:"getModule",value:function(q){return this.theme.modules[q]}},{key:"getSelection",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return q&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-q,D=te(q,L),U=a(D,2);return q=U[0],L=U[1],this.editor.getText(q,L)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(q,L,D){var U=this,H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:J.sources.API;return ee.call(this,function(){return U.editor.insertEmbed(q,L,D)},H,q)}},{key:"insertText",value:function(q,L,D,U,H){var B=this,Y=void 0,re=te(q,0,D,U,H),ne=a(re,4);return q=ne[0],Y=ne[2],H=ne[3],ee.call(this,function(){return B.editor.insertText(q,L,Y)},H,q,L.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(q,L,D){this.clipboard.dangerouslyPasteHTML(q,L,D)}},{key:"removeFormat",value:function(q,L,D){var U=this,H=te(q,L,D),B=a(H,4);return q=B[0],L=B[1],D=B[3],ee.call(this,function(){return U.editor.removeFormat(q,L)},D,q)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(q){var L=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.default.sources.API;return ee.call(this,function(){q=new c.default(q);var U=L.getLength(),H=L.editor.deleteText(0,U),B=L.editor.applyDelta(q),Y=B.ops[B.ops.length-1];Y!=null&&typeof Y.insert=="string"&&Y.insert[Y.insert.length-1]===`
`&&(L.editor.deleteText(L.getLength()-1,1),B.delete(1));var re=H.compose(B);return re},D)}},{key:"setSelection",value:function(q,L,D){if(q==null)this.selection.setRange(null,L||J.sources.API);else{var U=te(q,L,D),H=a(U,4);q=H[0],L=H[1],D=H[3],this.selection.setRange(new m.Range(q,L),D),D!==u.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(q){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.default.sources.API,D=new c.default().insert(q);return this.setContents(D,L)}},{key:"update",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u.default.sources.USER,L=this.scroll.update(q);return this.selection.update(q),L}},{key:"updateContents",value:function(q){var L=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.default.sources.API;return ee.call(this,function(){return q=new c.default(q),L.editor.applyDelta(q,D)},D,!0)}}]),J}();M.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},M.events=u.default.events,M.sources=u.default.sources,M.version="1.3.7",M.imports={delta:c.default,parchment:g.default,"core/module":v.default,"core/theme":F.default};function V(J,W){if(W=(0,A.default)(!0,{container:J,modules:{clipboard:!0,keyboard:!0,history:!0}},W),!W.theme||W.theme===M.DEFAULTS.theme)W.theme=F.default;else if(W.theme=M.import("themes/"+W.theme),W.theme==null)throw new Error("Invalid theme "+W.theme+". Did you register it?");var q=(0,A.default)(!0,{},W.theme.DEFAULTS);[q,W].forEach(function(U){U.modules=U.modules||{},Object.keys(U.modules).forEach(function(H){U.modules[H]===!0&&(U.modules[H]={})})});var L=Object.keys(q.modules).concat(Object.keys(W.modules)),D=L.reduce(function(U,H){var B=M.import("modules/"+H);return B==null?j.error("Cannot load "+H+" module. Are you sure you registered it?"):U[H]=B.DEFAULTS||{},U},{});return W.modules!=null&&W.modules.toolbar&&W.modules.toolbar.constructor!==Object&&(W.modules.toolbar={container:W.modules.toolbar}),W=(0,A.default)(!0,{},M.DEFAULTS,{modules:D},q,W),["bounds","container","scrollingContainer"].forEach(function(U){typeof W[U]=="string"&&(W[U]=document.querySelector(W[U]))}),W.modules=Object.keys(W.modules).reduce(function(U,H){return W.modules[H]&&(U[H]=W.modules[H]),U},{}),W}function ee(J,W,q,L){if(this.options.strict&&!this.isEnabled()&&W===u.default.sources.USER)return new c.default;var D=q==null?null:this.getSelection(),U=this.editor.delta,H=J();if(D!=null&&(q===!0&&(q=D.index),L==null?D=Q(D,H,W):L!==0&&(D=Q(D,q,L,W)),this.setSelection(D,u.default.sources.SILENT)),H.length()>0){var B,Y=[u.default.events.TEXT_CHANGE,H,U,W];if((B=this.emitter).emit.apply(B,[u.default.events.EDITOR_CHANGE].concat(Y)),W!==u.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,Y)}}return H}function te(J,W,q,L,D){var U={};return typeof J.index=="number"&&typeof J.length=="number"?typeof W!="number"?(D=L,L=q,q=W,W=J.length,J=J.index):(W=J.length,J=J.index):typeof W!="number"&&(D=L,L=q,q=W,W=0),(typeof q>"u"?"undefined":o(q))==="object"?(U=q,D=L):typeof q=="string"&&(L!=null?U[q]=L:D=q),D=D||u.default.sources.API,[J,W,U,D]}function Q(J,W,q,L){if(J==null)return null;var D=void 0,U=void 0;if(W instanceof c.default){var H=[J.index,J.index+J.length].map(function(ne){return W.transformPosition(ne,L!==u.default.sources.USER)}),B=a(H,2);D=B[0],U=B[1]}else{var Y=[J.index,J.index+J.length].map(function(ne){return ne<W||ne===W&&L===u.default.sources.USER?ne:q>=0?ne+q:Math.max(W,ne+q)}),re=a(Y,2);D=re[0],U=re[1]}return new m.Range(D,U-D)}n.expandConfig=V,n.overload=te,n.default=M},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function b(g,m){for(var _=0;_<m.length;_++){var x=m[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,_){return m&&b(g.prototype,m),_&&b(g,_),g}}(),a=function b(g,m,_){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,m);if(x===void 0){var A=Object.getPrototypeOf(g);return A===null?void 0:b(A,m,_)}else{if("value"in x)return x.value;var I=x.get;return I===void 0?void 0:I.call(_)}},s=i(7),l=d(s),c=i(0),p=d(c);function d(b){return b&&b.__esModule?b:{default:b}}function f(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function u(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function y(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var v=function(b){y(g,b);function g(){return f(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"formatAt",value:function(_,x,A,I){if(g.compare(this.statics.blotName,A)<0&&p.default.query(A,p.default.Scope.BLOT)){var P=this.isolate(_,x);I&&P.wrap(A,I)}else a(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"formatAt",this).call(this,_,x,A,I)}},{key:"optimize",value:function(_){if(a(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,_),this.parent instanceof g&&g.compare(this.statics.blotName,this.parent.statics.blotName)>0){var x=this.parent.isolate(this.offset(),this.length());this.moveChildren(x),x.wrap(this)}}}],[{key:"compare",value:function(_,x){var A=g.order.indexOf(_),I=g.order.indexOf(x);return A>=0||I>=0?A-I:_===x?0:_<x?-1:1}}]),g}(p.default.Inline);v.allowedChildren=[v,p.default.Embed,l.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(0),a=s(o);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function c(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:f}function p(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}var d=function(f){p(u,f);function u(){return l(this,u),c(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(a.default.Text);n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function m(_,x){for(var A=0;A<x.length;A++){var I=x[A];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(_,I.key,I)}}return function(_,x,A){return x&&m(_.prototype,x),A&&m(_,A),_}}(),a=function m(_,x,A){_===null&&(_=Function.prototype);var I=Object.getOwnPropertyDescriptor(_,x);if(I===void 0){var P=Object.getPrototypeOf(_);return P===null?void 0:m(P,x,A)}else{if("value"in I)return I.value;var O=I.get;return O===void 0?void 0:O.call(A)}},s=i(54),l=d(s),c=i(10),p=d(c);function d(m){return m&&m.__esModule?m:{default:m}}function f(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function u(m,_){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:m}function y(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);m.prototype=Object.create(_&&_.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(m,_):m.__proto__=_)}var v=(0,p.default)("quill:events"),b=["selectionchange","mousedown","mouseup","click"];b.forEach(function(m){document.addEventListener(m,function(){for(var _=arguments.length,x=Array(_),A=0;A<_;A++)x[A]=arguments[A];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(I){if(I.__quill&&I.__quill.emitter){var P;(P=I.__quill.emitter).handleDOM.apply(P,x)}})})});var g=function(m){y(_,m);function _(){f(this,_);var x=u(this,(_.__proto__||Object.getPrototypeOf(_)).call(this));return x.listeners={},x.on("error",v.error),x}return o(_,[{key:"emit",value:function(){v.log.apply(v,arguments),a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(A){for(var I=arguments.length,P=Array(I>1?I-1:0),O=1;O<I;O++)P[O-1]=arguments[O];(this.listeners[A.type]||[]).forEach(function(F){var R=F.node,S=F.handler;(A.target===R||R.contains(A.target))&&S.apply(void 0,[A].concat(P))})}},{key:"listenDOM",value:function(A,I,P){this.listeners[A]||(this.listeners[A]=[]),this.listeners[A].push({node:I,handler:P})}}]),_}(l.default);g.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},g.sources={API:"api",SILENT:"silent",USER:"user"},n.default=g},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});function o(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}var a=function s(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,s),this.quill=l,this.options=c};a.DEFAULTS={},n.default=a},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=["error","warn","log","info"],a="warn";function s(c){if(o.indexOf(c)<=o.indexOf(a)){for(var p,d=arguments.length,f=Array(d>1?d-1:0),u=1;u<d;u++)f[u-1]=arguments[u];(p=console)[c].apply(p,f)}}function l(c){return o.reduce(function(p,d){return p[d]=s.bind(console,d,c),p},{})}s.level=l.level=function(c){a=c},n.default=l},function(r,n,i){var o=Array.prototype.slice,a=i(52),s=i(53),l=r.exports=function(f,u,y){return y||(y={}),f===u?!0:f instanceof Date&&u instanceof Date?f.getTime()===u.getTime():!f||!u||typeof f!="object"&&typeof u!="object"?y.strict?f===u:f==u:d(f,u,y)};function c(f){return f==null}function p(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function d(f,u,y){var v,b;if(c(f)||c(u)||f.prototype!==u.prototype)return!1;if(s(f))return s(u)?(f=o.call(f),u=o.call(u),l(f,u,y)):!1;if(p(f)){if(!p(u)||f.length!==u.length)return!1;for(v=0;v<f.length;v++)if(f[v]!==u[v])return!1;return!0}try{var g=a(f),m=a(u)}catch{return!1}if(g.length!=m.length)return!1;for(g.sort(),m.sort(),v=g.length-1;v>=0;v--)if(g[v]!=m[v])return!1;for(v=g.length-1;v>=0;v--)if(b=g[v],!l(f[b],u[b],y))return!1;return typeof f==typeof u}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(1),a=function(){function s(l,c,p){p===void 0&&(p={}),this.attrName=l,this.keyName=c;var d=o.Scope.TYPE&o.Scope.ATTRIBUTE;p.scope!=null?this.scope=p.scope&o.Scope.LEVEL|d:this.scope=o.Scope.ATTRIBUTE,p.whitelist!=null&&(this.whitelist=p.whitelist)}return s.keys=function(l){return[].map.call(l.attributes,function(c){return c.name})},s.prototype.add=function(l,c){return this.canAdd(l,c)?(l.setAttribute(this.keyName,c),!0):!1},s.prototype.canAdd=function(l,c){var p=o.query(l,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return p==null?!1:this.whitelist==null?!0:typeof c=="string"?this.whitelist.indexOf(c.replace(/["']/g,""))>-1:this.whitelist.indexOf(c)>-1},s.prototype.remove=function(l){l.removeAttribute(this.keyName)},s.prototype.value=function(l){var c=l.getAttribute(this.keyName);return this.canAdd(l,c)&&c?c:""},s}();n.default=a},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var o=function(){function O(F,R){var S=[],E=!0,j=!1,M=void 0;try{for(var V=F[Symbol.iterator](),ee;!(E=(ee=V.next()).done)&&(S.push(ee.value),!(R&&S.length===R));E=!0);}catch(te){j=!0,M=te}finally{try{!E&&V.return&&V.return()}finally{if(j)throw M}}return S}return function(F,R){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return O(F,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function O(F,R){for(var S=0;S<R.length;S++){var E=R[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(F,E.key,E)}}return function(F,R,S){return R&&O(F.prototype,R),S&&O(F,S),F}}(),s=function O(F,R,S){F===null&&(F=Function.prototype);var E=Object.getOwnPropertyDescriptor(F,R);if(E===void 0){var j=Object.getPrototypeOf(F);return j===null?void 0:O(j,R,S)}else{if("value"in E)return E.value;var M=E.get;return M===void 0?void 0:M.call(S)}},l=i(2),c=m(l),p=i(0),d=m(p),f=i(4),u=m(f),y=i(6),v=m(y),b=i(7),g=m(b);function m(O){return O&&O.__esModule?O:{default:O}}function _(O,F){if(!(O instanceof F))throw new TypeError("Cannot call a class as a function")}function x(O,F){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:O}function A(O,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);O.prototype=Object.create(F&&F.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(O,F):O.__proto__=F)}var I=function(O){A(F,O);function F(){return _(this,F),x(this,(F.__proto__||Object.getPrototypeOf(F)).apply(this,arguments))}return F}(v.default);I.blotName="code",I.tagName="CODE";var P=function(O){A(F,O);function F(){return _(this,F),x(this,(F.__proto__||Object.getPrototypeOf(F)).apply(this,arguments))}return a(F,[{key:"delta",value:function(){var S=this,E=this.domNode.textContent;return E.endsWith(`
`)&&(E=E.slice(0,-1)),E.split(`
`).reduce(function(j,M){return j.insert(M).insert(`
`,S.formats())},new c.default)}},{key:"format",value:function(S,E){if(!(S===this.statics.blotName&&E)){var j=this.descendant(g.default,this.length()-1),M=o(j,1),V=M[0];V!=null&&V.deleteAt(V.length()-1,1),s(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"format",this).call(this,S,E)}}},{key:"formatAt",value:function(S,E,j,M){if(E!==0&&!(d.default.query(j,d.default.Scope.BLOCK)==null||j===this.statics.blotName&&M===this.statics.formats(this.domNode))){var V=this.newlineIndex(S);if(!(V<0||V>=S+E)){var ee=this.newlineIndex(S,!0)+1,te=V-ee+1,Q=this.isolate(ee,te),J=Q.next;Q.format(j,M),J instanceof F&&J.formatAt(0,S-ee+E-te,j,M)}}}},{key:"insertAt",value:function(S,E,j){if(j==null){var M=this.descendant(g.default,S),V=o(M,2),ee=V[0],te=V[1];ee.insertAt(te,E)}}},{key:"length",value:function(){var S=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?S:S+1}},{key:"newlineIndex",value:function(S){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E)return this.domNode.textContent.slice(0,S).lastIndexOf(`
`);var j=this.domNode.textContent.slice(S).indexOf(`
`);return j>-1?S+j:-1}},{key:"optimize",value:function(S){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),s(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"optimize",this).call(this,S);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===E.statics.formats(E.domNode)&&(E.optimize(S),E.moveChildren(this),E.remove())}},{key:"replace",value:function(S){s(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"replace",this).call(this,S),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(E){var j=d.default.find(E);j==null?E.parentNode.removeChild(E):j instanceof d.default.Embed?j.remove():j.unwrap()})}}],[{key:"create",value:function(S){var E=s(F.__proto__||Object.getPrototypeOf(F),"create",this).call(this,S);return E.setAttribute("spellcheck",!1),E}},{key:"formats",value:function(){return!0}}]),F}(u.default);P.blotName="code-block",P.tagName="PRE",P.TAB="  ",n.Code=I,n.default=P},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},a=function(){function J(W,q){var L=[],D=!0,U=!1,H=void 0;try{for(var B=W[Symbol.iterator](),Y;!(D=(Y=B.next()).done)&&(L.push(Y.value),!(q&&L.length===q));D=!0);}catch(re){U=!0,H=re}finally{try{!D&&B.return&&B.return()}finally{if(U)throw H}}return L}return function(W,q){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return J(W,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function J(W,q){for(var L=0;L<q.length;L++){var D=q[L];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(W,D.key,D)}}return function(W,q,L){return q&&J(W.prototype,q),L&&J(W,L),W}}(),l=i(2),c=E(l),p=i(20),d=E(p),f=i(0),u=E(f),y=i(13),v=E(y),b=i(24),g=E(b),m=i(4),_=E(m),x=i(16),A=E(x),I=i(21),P=E(I),O=i(11),F=E(O),R=i(3),S=E(R);function E(J){return J&&J.__esModule?J:{default:J}}function j(J,W,q){return W in J?Object.defineProperty(J,W,{value:q,enumerable:!0,configurable:!0,writable:!0}):J[W]=q,J}function M(J,W){if(!(J instanceof W))throw new TypeError("Cannot call a class as a function")}var V=/^[ -~]*$/,ee=function(){function J(W){M(this,J),this.scroll=W,this.delta=this.getDelta()}return s(J,[{key:"applyDelta",value:function(q){var L=this,D=!1;this.scroll.update();var U=this.scroll.length();return this.scroll.batchStart(),q=Q(q),q.reduce(function(H,B){var Y=B.retain||B.delete||B.insert.length||1,re=B.attributes||{};if(B.insert!=null){if(typeof B.insert=="string"){var ne=B.insert;ne.endsWith(`
`)&&D&&(D=!1,ne=ne.slice(0,-1)),H>=U&&!ne.endsWith(`
`)&&(D=!0),L.scroll.insertAt(H,ne);var de=L.scroll.line(H),be=a(de,2),Te=be[0],Oe=be[1],Fe=(0,S.default)({},(0,m.bubbleFormats)(Te));if(Te instanceof _.default){var ye=Te.descendant(u.default.Leaf,Oe),ae=a(ye,1),Ke=ae[0];Fe=(0,S.default)(Fe,(0,m.bubbleFormats)(Ke))}re=d.default.attributes.diff(Fe,re)||{}}else if(o(B.insert)==="object"){var he=Object.keys(B.insert)[0];if(he==null)return H;L.scroll.insertAt(H,he,B.insert[he])}U+=Y}return Object.keys(re).forEach(function(se){L.scroll.formatAt(H,Y,se,re[se])}),H+Y},0),q.reduce(function(H,B){return typeof B.delete=="number"?(L.scroll.deleteAt(H,B.delete),H):H+(B.retain||B.insert.length||1)},0),this.scroll.batchEnd(),this.update(q)}},{key:"deleteText",value:function(q,L){return this.scroll.deleteAt(q,L),this.update(new c.default().retain(q).delete(L))}},{key:"formatLine",value:function(q,L){var D=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(U).forEach(function(H){if(!(D.scroll.whitelist!=null&&!D.scroll.whitelist[H])){var B=D.scroll.lines(q,Math.max(L,1)),Y=L;B.forEach(function(re){var ne=re.length();if(!(re instanceof v.default))re.format(H,U[H]);else{var de=q-re.offset(D.scroll),be=re.newlineIndex(de+Y)-de+1;re.formatAt(de,be,H,U[H])}Y-=ne})}}),this.scroll.optimize(),this.update(new c.default().retain(q).retain(L,(0,P.default)(U)))}},{key:"formatText",value:function(q,L){var D=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(U).forEach(function(H){D.scroll.formatAt(q,L,H,U[H])}),this.update(new c.default().retain(q).retain(L,(0,P.default)(U)))}},{key:"getContents",value:function(q,L){return this.delta.slice(q,q+L)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(q,L){return q.concat(L.delta())},new c.default)}},{key:"getFormat",value:function(q){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=[],U=[];L===0?this.scroll.path(q).forEach(function(B){var Y=a(B,1),re=Y[0];re instanceof _.default?D.push(re):re instanceof u.default.Leaf&&U.push(re)}):(D=this.scroll.lines(q,L),U=this.scroll.descendants(u.default.Leaf,q,L));var H=[D,U].map(function(B){if(B.length===0)return{};for(var Y=(0,m.bubbleFormats)(B.shift());Object.keys(Y).length>0;){var re=B.shift();if(re==null)return Y;Y=te((0,m.bubbleFormats)(re),Y)}return Y});return S.default.apply(S.default,H)}},{key:"getText",value:function(q,L){return this.getContents(q,L).filter(function(D){return typeof D.insert=="string"}).map(function(D){return D.insert}).join("")}},{key:"insertEmbed",value:function(q,L,D){return this.scroll.insertAt(q,L,D),this.update(new c.default().retain(q).insert(j({},L,D)))}},{key:"insertText",value:function(q,L){var D=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return L=L.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(q,L),Object.keys(U).forEach(function(H){D.scroll.formatAt(q,L.length,H,U[H])}),this.update(new c.default().retain(q).insert(L,(0,P.default)(U)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var q=this.scroll.children.head;return q.statics.blotName!==_.default.blotName||q.children.length>1?!1:q.children.head instanceof A.default}},{key:"removeFormat",value:function(q,L){var D=this.getText(q,L),U=this.scroll.line(q+L),H=a(U,2),B=H[0],Y=H[1],re=0,ne=new c.default;B!=null&&(B instanceof v.default?re=B.newlineIndex(Y)-Y+1:re=B.length()-Y,ne=B.delta().slice(Y,Y+re-1).insert(`
`));var de=this.getContents(q,L+re),be=de.diff(new c.default().insert(D).concat(ne)),Te=new c.default().retain(q).concat(be);return this.applyDelta(Te)}},{key:"update",value:function(q){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,U=this.delta;if(L.length===1&&L[0].type==="characterData"&&L[0].target.data.match(V)&&u.default.find(L[0].target)){var H=u.default.find(L[0].target),B=(0,m.bubbleFormats)(H),Y=H.offset(this.scroll),re=L[0].oldValue.replace(g.default.CONTENTS,""),ne=new c.default().insert(re),de=new c.default().insert(H.value()),be=new c.default().retain(Y).concat(ne.diff(de,D));q=be.reduce(function(Te,Oe){return Oe.insert?Te.insert(Oe.insert,B):Te.push(Oe)},new c.default),this.delta=U.compose(q)}else this.delta=this.getDelta(),(!q||!(0,F.default)(U.compose(q),this.delta))&&(q=U.diff(this.delta,D));return q}}]),J}();function te(J,W){return Object.keys(W).reduce(function(q,L){return J[L]==null||(W[L]===J[L]?q[L]=W[L]:Array.isArray(W[L])?W[L].indexOf(J[L])<0&&(q[L]=W[L].concat([J[L]])):q[L]=[W[L],J[L]]),q},{})}function Q(J){return J.reduce(function(W,q){if(q.insert===1){var L=(0,P.default)(q.attributes);return delete L.image,W.insert({image:q.attributes.image},L)}if(q.attributes!=null&&(q.attributes.list===!0||q.attributes.bullet===!0)&&(q=(0,P.default)(q),q.attributes.list?q.attributes.list="ordered":(q.attributes.list="bullet",delete q.attributes.bullet)),typeof q.insert=="string"){var D=q.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return W.insert(D,q.attributes)}return W.push(q)},new c.default)}n.default=ee},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var o=function(){function O(F,R){var S=[],E=!0,j=!1,M=void 0;try{for(var V=F[Symbol.iterator](),ee;!(E=(ee=V.next()).done)&&(S.push(ee.value),!(R&&S.length===R));E=!0);}catch(te){j=!0,M=te}finally{try{!E&&V.return&&V.return()}finally{if(j)throw M}}return S}return function(F,R){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return O(F,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function O(F,R){for(var S=0;S<R.length;S++){var E=R[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(F,E.key,E)}}return function(F,R,S){return R&&O(F.prototype,R),S&&O(F,S),F}}(),s=i(0),l=g(s),c=i(21),p=g(c),d=i(11),f=g(d),u=i(8),y=g(u),v=i(10),b=g(v);function g(O){return O&&O.__esModule?O:{default:O}}function m(O){if(Array.isArray(O)){for(var F=0,R=Array(O.length);F<O.length;F++)R[F]=O[F];return R}else return Array.from(O)}function _(O,F){if(!(O instanceof F))throw new TypeError("Cannot call a class as a function")}var x=(0,b.default)("quill:selection"),A=function O(F){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;_(this,O),this.index=F,this.length=R},I=function(){function O(F,R){var S=this;_(this,O),this.emitter=R,this.scroll=F,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new A(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){S.mouseDown||setTimeout(S.update.bind(S,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(E,j){E===y.default.events.TEXT_CHANGE&&j.length()>0&&S.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(S.hasFocus()){var E=S.getNativeRange();E!=null&&E.start.node!==S.cursor.textNode&&S.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{S.setNativeRange(E.start.node,E.start.offset,E.end.node,E.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(E,j){if(j.range){var M=j.range,V=M.startNode,ee=M.startOffset,te=M.endNode,Q=M.endOffset;S.setNativeRange(V,ee,te,Q)}}),this.update(y.default.sources.SILENT)}return a(O,[{key:"handleComposition",value:function(){var R=this;this.root.addEventListener("compositionstart",function(){R.composing=!0}),this.root.addEventListener("compositionend",function(){if(R.composing=!1,R.cursor.parent){var S=R.cursor.restore();if(!S)return;setTimeout(function(){R.setNativeRange(S.startNode,S.startOffset,S.endNode,S.endOffset)},1)}})}},{key:"handleDragging",value:function(){var R=this;this.emitter.listenDOM("mousedown",document.body,function(){R.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){R.mouseDown=!1,R.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(R,S){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[R])){this.scroll.update();var E=this.getNativeRange();if(!(E==null||!E.native.collapsed||l.default.query(R,l.default.Scope.BLOCK))){if(E.start.node!==this.cursor.textNode){var j=l.default.find(E.start.node,!1);if(j==null)return;if(j instanceof l.default.Leaf){var M=j.split(E.start.offset);j.parent.insertBefore(this.cursor,M)}else j.insertBefore(this.cursor,E.start.node);this.cursor.attach()}this.cursor.format(R,S),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(R){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,E=this.scroll.length();R=Math.min(R,E-1),S=Math.min(R+S,E-1)-R;var j=void 0,M=this.scroll.leaf(R),V=o(M,2),ee=V[0],te=V[1];if(ee==null)return null;var Q=ee.position(te,!0),J=o(Q,2);j=J[0],te=J[1];var W=document.createRange();if(S>0){W.setStart(j,te);var q=this.scroll.leaf(R+S),L=o(q,2);if(ee=L[0],te=L[1],ee==null)return null;var D=ee.position(te,!0),U=o(D,2);return j=U[0],te=U[1],W.setEnd(j,te),W.getBoundingClientRect()}else{var H="left",B=void 0;return j instanceof Text?(te<j.data.length?(W.setStart(j,te),W.setEnd(j,te+1)):(W.setStart(j,te-1),W.setEnd(j,te),H="right"),B=W.getBoundingClientRect()):(B=ee.domNode.getBoundingClientRect(),te>0&&(H="right")),{bottom:B.top+B.height,height:B.height,left:B[H],right:B[H],top:B.top,width:0}}}},{key:"getNativeRange",value:function(){var R=document.getSelection();if(R==null||R.rangeCount<=0)return null;var S=R.getRangeAt(0);if(S==null)return null;var E=this.normalizeNative(S);return x.info("getNativeRange",E),E}},{key:"getRange",value:function(){var R=this.getNativeRange();if(R==null)return[null,null];var S=this.normalizedToRange(R);return[S,R]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(R){var S=this,E=[[R.start.node,R.start.offset]];R.native.collapsed||E.push([R.end.node,R.end.offset]);var j=E.map(function(ee){var te=o(ee,2),Q=te[0],J=te[1],W=l.default.find(Q,!0),q=W.offset(S.scroll);return J===0?q:W instanceof l.default.Container?q+W.length():q+W.index(Q,J)}),M=Math.min(Math.max.apply(Math,m(j)),this.scroll.length()-1),V=Math.min.apply(Math,[M].concat(m(j)));return new A(V,M-V)}},{key:"normalizeNative",value:function(R){if(!P(this.root,R.startContainer)||!R.collapsed&&!P(this.root,R.endContainer))return null;var S={start:{node:R.startContainer,offset:R.startOffset},end:{node:R.endContainer,offset:R.endOffset},native:R};return[S.start,S.end].forEach(function(E){for(var j=E.node,M=E.offset;!(j instanceof Text)&&j.childNodes.length>0;)if(j.childNodes.length>M)j=j.childNodes[M],M=0;else if(j.childNodes.length===M)j=j.lastChild,M=j instanceof Text?j.data.length:j.childNodes.length+1;else break;E.node=j,E.offset=M}),S}},{key:"rangeToNative",value:function(R){var S=this,E=R.collapsed?[R.index]:[R.index,R.index+R.length],j=[],M=this.scroll.length();return E.forEach(function(V,ee){V=Math.min(M-1,V);var te=void 0,Q=S.scroll.leaf(V),J=o(Q,2),W=J[0],q=J[1],L=W.position(q,ee!==0),D=o(L,2);te=D[0],q=D[1],j.push(te,q)}),j.length<2&&(j=j.concat(j)),j}},{key:"scrollIntoView",value:function(R){var S=this.lastRange;if(S!=null){var E=this.getBounds(S.index,S.length);if(E!=null){var j=this.scroll.length()-1,M=this.scroll.line(Math.min(S.index,j)),V=o(M,1),ee=V[0],te=ee;if(S.length>0){var Q=this.scroll.line(Math.min(S.index+S.length,j)),J=o(Q,1);te=J[0]}if(!(ee==null||te==null)){var W=R.getBoundingClientRect();E.top<W.top?R.scrollTop-=W.top-E.top:E.bottom>W.bottom&&(R.scrollTop+=E.bottom-W.bottom)}}}}},{key:"setNativeRange",value:function(R,S){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:R,j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(x.info("setNativeRange",R,S,E,j),!(R!=null&&(this.root.parentNode==null||R.parentNode==null||E.parentNode==null))){var V=document.getSelection();if(V!=null)if(R!=null){this.hasFocus()||this.root.focus();var ee=(this.getNativeRange()||{}).native;if(ee==null||M||R!==ee.startContainer||S!==ee.startOffset||E!==ee.endContainer||j!==ee.endOffset){R.tagName=="BR"&&(S=[].indexOf.call(R.parentNode.childNodes,R),R=R.parentNode),E.tagName=="BR"&&(j=[].indexOf.call(E.parentNode.childNodes,E),E=E.parentNode);var te=document.createRange();te.setStart(R,S),te.setEnd(E,j),V.removeAllRanges(),V.addRange(te)}}else V.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(R){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof S=="string"&&(E=S,S=!1),x.info("setRange",R),R!=null){var j=this.rangeToNative(R);this.setNativeRange.apply(this,m(j).concat([S]))}else this.setNativeRange(null);this.update(E)}},{key:"update",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,S=this.lastRange,E=this.getRange(),j=o(E,2),M=j[0],V=j[1];if(this.lastRange=M,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(S,this.lastRange)){var ee;!this.composing&&V!=null&&V.native.collapsed&&V.start.node!==this.cursor.textNode&&this.cursor.restore();var te=[y.default.events.SELECTION_CHANGE,(0,p.default)(this.lastRange),(0,p.default)(S),R];if((ee=this.emitter).emit.apply(ee,[y.default.events.EDITOR_CHANGE].concat(te)),R!==y.default.sources.SILENT){var Q;(Q=this.emitter).emit.apply(Q,te)}}}}]),O}();function P(O,F){try{F.parentNode}catch{return!1}return F instanceof Text&&(F=F.parentNode),O.contains(F)}n.Range=A,n.default=I},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function y(v,b){for(var g=0;g<b.length;g++){var m=b[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,b,g){return b&&y(v.prototype,b),g&&y(v,g),v}}(),a=function y(v,b,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,b);if(m===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,b,g)}else{if("value"in m)return m.value;var x=m.get;return x===void 0?void 0:x.call(g)}},s=i(0),l=c(s);function c(y){return y&&y.__esModule?y:{default:y}}function p(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var u=function(y){f(v,y);function v(){return p(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"insertInto",value:function(g,m){g.children.length===0?a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,g,m):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(l.default.Embed);u.blotName="break",u.tagName="BR",n.default=u},function(r,n,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var y in u)u.hasOwnProperty(y)&&(f[y]=u[y])};return function(f,u){d(f,u);function y(){this.constructor=f}f.prototype=u===null?Object.create(u):(y.prototype=u.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(44),s=i(30),l=i(1),c=function(d){o(f,d);function f(u){var y=d.call(this,u)||this;return y.build(),y}return f.prototype.appendChild=function(u){this.insertBefore(u)},f.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(u){u.attach()})},f.prototype.build=function(){var u=this;this.children=new a.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var v=p(y);u.insertBefore(v,u.children.head||void 0)}catch(b){if(b instanceof l.ParchmentError)return;throw b}})},f.prototype.deleteAt=function(u,y){if(u===0&&y===this.length())return this.remove();this.children.forEachAt(u,y,function(v,b,g){v.deleteAt(b,g)})},f.prototype.descendant=function(u,y){var v=this.children.find(y),b=v[0],g=v[1];return u.blotName==null&&u(b)||u.blotName!=null&&b instanceof u?[b,g]:b instanceof f?b.descendant(u,g):[null,-1]},f.prototype.descendants=function(u,y,v){y===void 0&&(y=0),v===void 0&&(v=Number.MAX_VALUE);var b=[],g=v;return this.children.forEachAt(y,v,function(m,_,x){(u.blotName==null&&u(m)||u.blotName!=null&&m instanceof u)&&b.push(m),m instanceof f&&(b=b.concat(m.descendants(u,_,g))),g-=x}),b},f.prototype.detach=function(){this.children.forEach(function(u){u.detach()}),d.prototype.detach.call(this)},f.prototype.formatAt=function(u,y,v,b){this.children.forEachAt(u,y,function(g,m,_){g.formatAt(m,_,v,b)})},f.prototype.insertAt=function(u,y,v){var b=this.children.find(u),g=b[0],m=b[1];if(g)g.insertAt(m,y,v);else{var _=v==null?l.create("text",y):l.create(y,v);this.appendChild(_)}},f.prototype.insertBefore=function(u,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return u instanceof v}))throw new l.ParchmentError("Cannot insert "+u.statics.blotName+" into "+this.statics.blotName);u.insertInto(this,y)},f.prototype.length=function(){return this.children.reduce(function(u,y){return u+y.length()},0)},f.prototype.moveChildren=function(u,y){this.children.forEach(function(v){u.insertBefore(v,y)})},f.prototype.optimize=function(u){if(d.prototype.optimize.call(this,u),this.children.length===0)if(this.statics.defaultChild!=null){var y=l.create(this.statics.defaultChild);this.appendChild(y),y.optimize(u)}else this.remove()},f.prototype.path=function(u,y){y===void 0&&(y=!1);var v=this.children.find(u,y),b=v[0],g=v[1],m=[[this,u]];return b instanceof f?m.concat(b.path(g,y)):(b!=null&&m.push([b,g]),m)},f.prototype.removeChild=function(u){this.children.remove(u)},f.prototype.replace=function(u){u instanceof f&&u.moveChildren(this),d.prototype.replace.call(this,u)},f.prototype.split=function(u,y){if(y===void 0&&(y=!1),!y){if(u===0)return this;if(u===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(u,this.length(),function(b,g,m){b=b.split(g,y),v.appendChild(b)}),v},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(u,y){var v=this,b=[],g=[];u.forEach(function(m){m.target===v.domNode&&m.type==="childList"&&(b.push.apply(b,m.addedNodes),g.push.apply(g,m.removedNodes))}),g.forEach(function(m){if(!(m.parentNode!=null&&m.tagName!=="IFRAME"&&document.body.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var _=l.find(m);_!=null&&(_.domNode.parentNode==null||_.domNode.parentNode===v.domNode)&&_.detach()}}),b.filter(function(m){return m.parentNode==v.domNode}).sort(function(m,_){return m===_?0:m.compareDocumentPosition(_)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(m){var _=null;m.nextSibling!=null&&(_=l.find(m.nextSibling));var x=p(m);(x.next!=_||x.next==null)&&(x.parent!=null&&x.parent.removeChild(v),v.insertBefore(x,_||void 0))})},f}(s.default);function p(d){var f=l.find(d);if(f==null)try{f=l.create(d)}catch{f=l.create(l.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(y){f.domNode.appendChild(y)}),d.parentNode&&d.parentNode.replaceChild(f.domNode,d),f.attach()}return f}n.default=c},function(r,n,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var y in u)u.hasOwnProperty(y)&&(f[y]=u[y])};return function(f,u){d(f,u);function y(){this.constructor=f}f.prototype=u===null?Object.create(u):(y.prototype=u.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(12),s=i(31),l=i(17),c=i(1),p=function(d){o(f,d);function f(u){var y=d.call(this,u)||this;return y.attributes=new s.default(y.domNode),y}return f.formats=function(u){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return u.tagName.toLowerCase()},f.prototype.format=function(u,y){var v=c.query(u);v instanceof a.default?this.attributes.attribute(v,y):y&&v!=null&&(u!==this.statics.blotName||this.formats()[u]!==y)&&this.replaceWith(u,y)},f.prototype.formats=function(){var u=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(u[this.statics.blotName]=y),u},f.prototype.replaceWith=function(u,y){var v=d.prototype.replaceWith.call(this,u,y);return this.attributes.copy(v),v},f.prototype.update=function(u,y){var v=this;d.prototype.update.call(this,u,y),u.some(function(b){return b.target===v.domNode&&b.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(u,y){var v=d.prototype.wrap.call(this,u,y);return v instanceof f&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},f}(l.default);n.default=p},function(r,n,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var f in d)d.hasOwnProperty(f)&&(p[f]=d[f])};return function(p,d){c(p,d);function f(){this.constructor=p}p.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(30),s=i(1),l=function(c){o(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return p.value=function(d){return!0},p.prototype.index=function(d,f){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},p.prototype.position=function(d,f){var u=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(u+=1),[this.parent.domNode,u]},p.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},p.scope=s.Scope.INLINE_BLOT,p}(a.default);n.default=l},function(r,n,i){var o=i(11),a=i(3),s={attributes:{compose:function(c,p,d){typeof c!="object"&&(c={}),typeof p!="object"&&(p={});var f=a(!0,{},p);d||(f=Object.keys(f).reduce(function(y,v){return f[v]!=null&&(y[v]=f[v]),y},{}));for(var u in c)c[u]!==void 0&&p[u]===void 0&&(f[u]=c[u]);return Object.keys(f).length>0?f:void 0},diff:function(c,p){typeof c!="object"&&(c={}),typeof p!="object"&&(p={});var d=Object.keys(c).concat(Object.keys(p)).reduce(function(f,u){return o(c[u],p[u])||(f[u]=p[u]===void 0?null:p[u]),f},{});return Object.keys(d).length>0?d:void 0},transform:function(c,p,d){if(typeof c!="object")return p;if(typeof p=="object"){if(!d)return p;var f=Object.keys(p).reduce(function(u,y){return c[y]===void 0&&(u[y]=p[y]),u},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(c){return new l(c)},length:function(c){return typeof c.delete=="number"?c.delete:typeof c.retain=="number"?c.retain:typeof c.insert=="string"?c.insert.length:1}};function l(c){this.ops=c,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(c){c||(c=1/0);var p=this.ops[this.index];if(p){var d=this.offset,f=s.length(p);if(c>=f-d?(c=f-d,this.index+=1,this.offset=0):this.offset+=c,typeof p.delete=="number")return{delete:c};var u={};return p.attributes&&(u.attributes=p.attributes),typeof p.retain=="number"?u.retain=c:typeof p.insert=="string"?u.insert=p.insert.substr(d,c):u.insert=p.insert,u}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var c=this.offset,p=this.index,d=this.next(),f=this.ops.slice(this.index);return this.offset=c,this.index=p,[d].concat(f)}else return[]},r.exports=s},function(r,n){var i=function(){function o(v,b){return b!=null&&v instanceof b}var a;try{a=Map}catch{a=function(){}}var s;try{s=Set}catch{s=function(){}}var l;try{l=Promise}catch{l=function(){}}function c(v,b,g,m,_){typeof b=="object"&&(g=b.depth,m=b.prototype,_=b.includeNonEnumerable,b=b.circular);var x=[],A=[],I=typeof Buffer<"u";typeof b>"u"&&(b=!0),typeof g>"u"&&(g=1/0);function P(O,F){if(O===null)return null;if(F===0)return O;var R,S;if(typeof O!="object")return O;if(o(O,a))R=new a;else if(o(O,s))R=new s;else if(o(O,l))R=new l(function(W,q){O.then(function(L){W(P(L,F-1))},function(L){q(P(L,F-1))})});else if(c.__isArray(O))R=[];else if(c.__isRegExp(O))R=new RegExp(O.source,y(O)),O.lastIndex&&(R.lastIndex=O.lastIndex);else if(c.__isDate(O))R=new Date(O.getTime());else{if(I&&Buffer.isBuffer(O))return Buffer.allocUnsafe?R=Buffer.allocUnsafe(O.length):R=new Buffer(O.length),O.copy(R),R;o(O,Error)?R=Object.create(O):typeof m>"u"?(S=Object.getPrototypeOf(O),R=Object.create(S)):(R=Object.create(m),S=m)}if(b){var E=x.indexOf(O);if(E!=-1)return A[E];x.push(O),A.push(R)}o(O,a)&&O.forEach(function(W,q){var L=P(q,F-1),D=P(W,F-1);R.set(L,D)}),o(O,s)&&O.forEach(function(W){var q=P(W,F-1);R.add(q)});for(var j in O){var M;S&&(M=Object.getOwnPropertyDescriptor(S,j)),!(M&&M.set==null)&&(R[j]=P(O[j],F-1))}if(Object.getOwnPropertySymbols)for(var V=Object.getOwnPropertySymbols(O),j=0;j<V.length;j++){var ee=V[j],te=Object.getOwnPropertyDescriptor(O,ee);te&&!te.enumerable&&!_||(R[ee]=P(O[ee],F-1),te.enumerable||Object.defineProperty(R,ee,{enumerable:!1}))}if(_)for(var Q=Object.getOwnPropertyNames(O),j=0;j<Q.length;j++){var J=Q[j],te=Object.getOwnPropertyDescriptor(O,J);te&&te.enumerable||(R[J]=P(O[J],F-1),Object.defineProperty(R,J,{enumerable:!1}))}return R}return P(v,g)}c.clonePrototype=function(b){if(b===null)return null;var g=function(){};return g.prototype=b,new g};function p(v){return Object.prototype.toString.call(v)}c.__objToStr=p;function d(v){return typeof v=="object"&&p(v)==="[object Date]"}c.__isDate=d;function f(v){return typeof v=="object"&&p(v)==="[object Array]"}c.__isArray=f;function u(v){return typeof v=="object"&&p(v)==="[object RegExp]"}c.__isRegExp=u;function y(v){var b="";return v.global&&(b+="g"),v.ignoreCase&&(b+="i"),v.multiline&&(b+="m"),b}return c.__getRegExpFlags=y,c}();typeof r=="object"&&r.exports&&(r.exports=i)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function R(S,E){var j=[],M=!0,V=!1,ee=void 0;try{for(var te=S[Symbol.iterator](),Q;!(M=(Q=te.next()).done)&&(j.push(Q.value),!(E&&j.length===E));M=!0);}catch(J){V=!0,ee=J}finally{try{!M&&te.return&&te.return()}finally{if(V)throw ee}}return j}return function(S,E){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return R(S,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function R(S,E){for(var j=0;j<E.length;j++){var M=E[j];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(S,M.key,M)}}return function(S,E,j){return E&&R(S.prototype,E),j&&R(S,j),S}}(),s=function R(S,E,j){S===null&&(S=Function.prototype);var M=Object.getOwnPropertyDescriptor(S,E);if(M===void 0){var V=Object.getPrototypeOf(S);return V===null?void 0:R(V,E,j)}else{if("value"in M)return M.value;var ee=M.get;return ee===void 0?void 0:ee.call(j)}},l=i(0),c=x(l),p=i(8),d=x(p),f=i(4),u=x(f),y=i(16),v=x(y),b=i(13),g=x(b),m=i(25),_=x(m);function x(R){return R&&R.__esModule?R:{default:R}}function A(R,S){if(!(R instanceof S))throw new TypeError("Cannot call a class as a function")}function I(R,S){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:R}function P(R,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);R.prototype=Object.create(S&&S.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(R,S):R.__proto__=S)}function O(R){return R instanceof u.default||R instanceof f.BlockEmbed}var F=function(R){P(S,R);function S(E,j){A(this,S);var M=I(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,E));return M.emitter=j.emitter,Array.isArray(j.whitelist)&&(M.whitelist=j.whitelist.reduce(function(V,ee){return V[ee]=!0,V},{})),M.domNode.addEventListener("DOMNodeInserted",function(){}),M.optimize(),M.enable(),M}return a(S,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(j,M){var V=this.line(j),ee=o(V,2),te=ee[0],Q=ee[1],J=this.line(j+M),W=o(J,1),q=W[0];if(s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"deleteAt",this).call(this,j,M),q!=null&&te!==q&&Q>0){if(te instanceof f.BlockEmbed||q instanceof f.BlockEmbed){this.optimize();return}if(te instanceof g.default){var L=te.newlineIndex(te.length(),!0);if(L>-1&&(te=te.split(L+1),te===q)){this.optimize();return}}else if(q instanceof g.default){var D=q.newlineIndex(0);D>-1&&q.split(D+1)}var U=q.children.head instanceof v.default?null:q.children.head;te.moveChildren(q,U),te.remove()}this.optimize()}},{key:"enable",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",j)}},{key:"formatAt",value:function(j,M,V,ee){this.whitelist!=null&&!this.whitelist[V]||(s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"formatAt",this).call(this,j,M,V,ee),this.optimize())}},{key:"insertAt",value:function(j,M,V){if(!(V!=null&&this.whitelist!=null&&!this.whitelist[M])){if(j>=this.length())if(V==null||c.default.query(M,c.default.Scope.BLOCK)==null){var ee=c.default.create(this.statics.defaultChild);this.appendChild(ee),V==null&&M.endsWith(`
`)&&(M=M.slice(0,-1)),ee.insertAt(0,M,V)}else{var te=c.default.create(M,V);this.appendChild(te)}else s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertAt",this).call(this,j,M,V);this.optimize()}}},{key:"insertBefore",value:function(j,M){if(j.statics.scope===c.default.Scope.INLINE_BLOT){var V=c.default.create(this.statics.defaultChild);V.appendChild(j),j=V}s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,j,M)}},{key:"leaf",value:function(j){return this.path(j).pop()||[null,-1]}},{key:"line",value:function(j){return j===this.length()?this.line(j-1):this.descendant(O,j)}},{key:"lines",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,V=function ee(te,Q,J){var W=[],q=J;return te.children.forEachAt(Q,J,function(L,D,U){O(L)?W.push(L):L instanceof c.default.Container&&(W=W.concat(ee(L,D,q))),q-=U}),W};return V(this,j,M)}},{key:"optimize",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,j,M),j.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,j,M))}},{key:"path",value:function(j){return s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"path",this).call(this,j).slice(1)}},{key:"update",value:function(j){if(this.batch!==!0){var M=d.default.sources.USER;typeof j=="string"&&(M=j),Array.isArray(j)||(j=this.observer.takeRecords()),j.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,M,j),s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"update",this).call(this,j.concat([])),j.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,M,j)}}}]),S}(c.default.Scroll);F.blotName="scroll",F.className="ql-editor",F.tagName="DIV",F.defaultChild="block",F.allowedChildren=[u.default,f.BlockEmbed,_.default],n.default=F},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},a=function(){function B(Y,re){var ne=[],de=!0,be=!1,Te=void 0;try{for(var Oe=Y[Symbol.iterator](),Fe;!(de=(Fe=Oe.next()).done)&&(ne.push(Fe.value),!(re&&ne.length===re));de=!0);}catch(ye){be=!0,Te=ye}finally{try{!de&&Oe.return&&Oe.return()}finally{if(be)throw Te}}return ne}return function(Y,re){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return B(Y,re);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function B(Y,re){for(var ne=0;ne<re.length;ne++){var de=re[ne];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(Y,de.key,de)}}return function(Y,re,ne){return re&&B(Y.prototype,re),ne&&B(Y,ne),Y}}(),l=i(21),c=R(l),p=i(11),d=R(p),f=i(3),u=R(f),y=i(2),v=R(y),b=i(20),g=R(b),m=i(0),_=R(m),x=i(5),A=R(x),I=i(10),P=R(I),O=i(9),F=R(O);function R(B){return B&&B.__esModule?B:{default:B}}function S(B,Y,re){return Y in B?Object.defineProperty(B,Y,{value:re,enumerable:!0,configurable:!0,writable:!0}):B[Y]=re,B}function E(B,Y){if(!(B instanceof Y))throw new TypeError("Cannot call a class as a function")}function j(B,Y){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:B}function M(B,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);B.prototype=Object.create(Y&&Y.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(B,Y):B.__proto__=Y)}var V=(0,P.default)("quill:keyboard"),ee=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",te=function(B){M(Y,B),s(Y,null,[{key:"match",value:function(ne,de){return de=H(de),["altKey","ctrlKey","metaKey","shiftKey"].some(function(be){return!!de[be]!==ne[be]&&de[be]!==null})?!1:de.key===(ne.which||ne.keyCode)}}]);function Y(re,ne){E(this,Y);var de=j(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,re,ne));return de.bindings={},Object.keys(de.options.bindings).forEach(function(be){be==="list autofill"&&re.scroll.whitelist!=null&&!re.scroll.whitelist.list||de.options.bindings[be]&&de.addBinding(de.options.bindings[be])}),de.addBinding({key:Y.keys.ENTER,shiftKey:null},L),de.addBinding({key:Y.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(de.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0},J),de.addBinding({key:Y.keys.DELETE},{collapsed:!0},W)):(de.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},J),de.addBinding({key:Y.keys.DELETE},{collapsed:!0,suffix:/^.?$/},W)),de.addBinding({key:Y.keys.BACKSPACE},{collapsed:!1},q),de.addBinding({key:Y.keys.DELETE},{collapsed:!1},q),de.addBinding({key:Y.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},J),de.listen(),de}return s(Y,[{key:"addBinding",value:function(ne){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Te=H(ne);if(Te==null||Te.key==null)return V.warn("Attempted to add invalid keyboard binding",Te);typeof de=="function"&&(de={handler:de}),typeof be=="function"&&(be={handler:be}),Te=(0,u.default)(Te,de,be),this.bindings[Te.key]=this.bindings[Te.key]||[],this.bindings[Te.key].push(Te)}},{key:"listen",value:function(){var ne=this;this.quill.root.addEventListener("keydown",function(de){if(!de.defaultPrevented){var be=de.which||de.keyCode,Te=(ne.bindings[be]||[]).filter(function(Qe){return Y.match(de,Qe)});if(Te.length!==0){var Oe=ne.quill.getSelection();if(!(Oe==null||!ne.quill.hasFocus())){var Fe=ne.quill.getLine(Oe.index),ye=a(Fe,2),ae=ye[0],Ke=ye[1],he=ne.quill.getLeaf(Oe.index),se=a(he,2),me=se[0],Se=se[1],ve=Oe.length===0?[me,Se]:ne.quill.getLeaf(Oe.index+Oe.length),Me=a(ve,2),qe=Me[0],Ue=Me[1],Ze=me instanceof _.default.Text?me.value().slice(0,Se):"",ot=qe instanceof _.default.Text?qe.value().slice(Ue):"",it={collapsed:Oe.length===0,empty:Oe.length===0&&ae.length()<=1,format:ne.quill.getFormat(Oe),offset:Ke,prefix:Ze,suffix:ot},st=Te.some(function(Qe){if(Qe.collapsed!=null&&Qe.collapsed!==it.collapsed||Qe.empty!=null&&Qe.empty!==it.empty||Qe.offset!=null&&Qe.offset!==it.offset)return!1;if(Array.isArray(Qe.format)){if(Qe.format.every(function(ze){return it.format[ze]==null}))return!1}else if(o(Qe.format)==="object"&&!Object.keys(Qe.format).every(function(ze){return Qe.format[ze]===!0?it.format[ze]!=null:Qe.format[ze]===!1?it.format[ze]==null:(0,d.default)(Qe.format[ze],it.format[ze])}))return!1;return Qe.prefix!=null&&!Qe.prefix.test(it.prefix)||Qe.suffix!=null&&!Qe.suffix.test(it.suffix)?!1:Qe.handler.call(ne,Oe,it)!==!0});st&&de.preventDefault()}}}})}}]),Y}(F.default);te.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},te.DEFAULTS={bindings:{bold:U("bold"),italic:U("italic"),underline:U("underline"),indent:{key:te.keys.TAB,format:["blockquote","indent","list"],handler:function(Y,re){if(re.collapsed&&re.offset!==0)return!0;this.quill.format("indent","+1",A.default.sources.USER)}},outdent:{key:te.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(Y,re){if(re.collapsed&&re.offset!==0)return!0;this.quill.format("indent","-1",A.default.sources.USER)}},"outdent backspace":{key:te.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(Y,re){re.format.indent!=null?this.quill.format("indent","-1",A.default.sources.USER):re.format.list!=null&&this.quill.format("list",!1,A.default.sources.USER)}},"indent code-block":D(!0),"outdent code-block":D(!1),"remove tab":{key:te.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(Y){this.quill.deleteText(Y.index-1,1,A.default.sources.USER)}},tab:{key:te.keys.TAB,handler:function(Y){this.quill.history.cutoff();var re=new v.default().retain(Y.index).delete(Y.length).insert("	");this.quill.updateContents(re,A.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index+1,A.default.sources.SILENT)}},"list empty enter":{key:te.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(Y,re){this.quill.format("list",!1,A.default.sources.USER),re.format.indent&&this.quill.format("indent",!1,A.default.sources.USER)}},"checklist enter":{key:te.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(Y){var re=this.quill.getLine(Y.index),ne=a(re,2),de=ne[0],be=ne[1],Te=(0,u.default)({},de.formats(),{list:"checked"}),Oe=new v.default().retain(Y.index).insert(`
`,Te).retain(de.length()-be-1).retain(1,{list:"unchecked"});this.quill.updateContents(Oe,A.default.sources.USER),this.quill.setSelection(Y.index+1,A.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:te.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(Y,re){var ne=this.quill.getLine(Y.index),de=a(ne,2),be=de[0],Te=de[1],Oe=new v.default().retain(Y.index).insert(`
`,re.format).retain(be.length()-Te-1).retain(1,{header:null});this.quill.updateContents(Oe,A.default.sources.USER),this.quill.setSelection(Y.index+1,A.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(Y,re){var ne=re.prefix.length,de=this.quill.getLine(Y.index),be=a(de,2),Te=be[0],Oe=be[1];if(Oe>ne)return!0;var Fe=void 0;switch(re.prefix.trim()){case"[]":case"[ ]":Fe="unchecked";break;case"[x]":Fe="checked";break;case"-":case"*":Fe="bullet";break;default:Fe="ordered"}this.quill.insertText(Y.index," ",A.default.sources.USER),this.quill.history.cutoff();var ye=new v.default().retain(Y.index-Oe).delete(ne+1).retain(Te.length()-2-Oe).retain(1,{list:Fe});this.quill.updateContents(ye,A.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index-ne,A.default.sources.SILENT)}},"code exit":{key:te.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(Y){var re=this.quill.getLine(Y.index),ne=a(re,2),de=ne[0],be=ne[1],Te=new v.default().retain(Y.index+de.length()-be-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Te,A.default.sources.USER)}},"embed left":Q(te.keys.LEFT,!1),"embed left shift":Q(te.keys.LEFT,!0),"embed right":Q(te.keys.RIGHT,!1),"embed right shift":Q(te.keys.RIGHT,!0)}};function Q(B,Y){var re,ne=B===te.keys.LEFT?"prefix":"suffix";return re={key:B,shiftKey:Y,altKey:null},S(re,ne,/^$/),S(re,"handler",function(be){var Te=be.index;B===te.keys.RIGHT&&(Te+=be.length+1);var Oe=this.quill.getLeaf(Te),Fe=a(Oe,1),ye=Fe[0];return ye instanceof _.default.Embed?(B===te.keys.LEFT?Y?this.quill.setSelection(be.index-1,be.length+1,A.default.sources.USER):this.quill.setSelection(be.index-1,A.default.sources.USER):Y?this.quill.setSelection(be.index,be.length+1,A.default.sources.USER):this.quill.setSelection(be.index+be.length+1,A.default.sources.USER),!1):!0}),re}function J(B,Y){if(!(B.index===0||this.quill.getLength()<=1)){var re=this.quill.getLine(B.index),ne=a(re,1),de=ne[0],be={};if(Y.offset===0){var Te=this.quill.getLine(B.index-1),Oe=a(Te,1),Fe=Oe[0];if(Fe!=null&&Fe.length()>1){var ye=de.formats(),ae=this.quill.getFormat(B.index-1,1);be=g.default.attributes.diff(ye,ae)||{}}}var Ke=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Y.prefix)?2:1;this.quill.deleteText(B.index-Ke,Ke,A.default.sources.USER),Object.keys(be).length>0&&this.quill.formatLine(B.index-Ke,Ke,be,A.default.sources.USER),this.quill.focus()}}function W(B,Y){var re=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Y.suffix)?2:1;if(!(B.index>=this.quill.getLength()-re)){var ne={},de=0,be=this.quill.getLine(B.index),Te=a(be,1),Oe=Te[0];if(Y.offset>=Oe.length()-1){var Fe=this.quill.getLine(B.index+1),ye=a(Fe,1),ae=ye[0];if(ae){var Ke=Oe.formats(),he=this.quill.getFormat(B.index,1);ne=g.default.attributes.diff(Ke,he)||{},de=ae.length()}}this.quill.deleteText(B.index,re,A.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(B.index+de-1,re,ne,A.default.sources.USER)}}function q(B){var Y=this.quill.getLines(B),re={};if(Y.length>1){var ne=Y[0].formats(),de=Y[Y.length-1].formats();re=g.default.attributes.diff(de,ne)||{}}this.quill.deleteText(B,A.default.sources.USER),Object.keys(re).length>0&&this.quill.formatLine(B.index,1,re,A.default.sources.USER),this.quill.setSelection(B.index,A.default.sources.SILENT),this.quill.focus()}function L(B,Y){var re=this;B.length>0&&this.quill.scroll.deleteAt(B.index,B.length);var ne=Object.keys(Y.format).reduce(function(de,be){return _.default.query(be,_.default.Scope.BLOCK)&&!Array.isArray(Y.format[be])&&(de[be]=Y.format[be]),de},{});this.quill.insertText(B.index,`
`,ne,A.default.sources.USER),this.quill.setSelection(B.index+1,A.default.sources.SILENT),this.quill.focus(),Object.keys(Y.format).forEach(function(de){ne[de]==null&&(Array.isArray(Y.format[de])||de!=="link"&&re.quill.format(de,Y.format[de],A.default.sources.USER))})}function D(B){return{key:te.keys.TAB,shiftKey:!B,format:{"code-block":!0},handler:function(re){var ne=_.default.query("code-block"),de=re.index,be=re.length,Te=this.quill.scroll.descendant(ne,de),Oe=a(Te,2),Fe=Oe[0],ye=Oe[1];if(Fe!=null){var ae=this.quill.getIndex(Fe),Ke=Fe.newlineIndex(ye,!0)+1,he=Fe.newlineIndex(ae+ye+be),se=Fe.domNode.textContent.slice(Ke,he).split(`
`);ye=0,se.forEach(function(me,Se){B?(Fe.insertAt(Ke+ye,ne.TAB),ye+=ne.TAB.length,Se===0?de+=ne.TAB.length:be+=ne.TAB.length):me.startsWith(ne.TAB)&&(Fe.deleteAt(Ke+ye,ne.TAB.length),ye-=ne.TAB.length,Se===0?de-=ne.TAB.length:be-=ne.TAB.length),ye+=me.length+1}),this.quill.update(A.default.sources.USER),this.quill.setSelection(de,be,A.default.sources.SILENT)}}}}function U(B){return{key:B[0].toUpperCase(),shortKey:!0,handler:function(re,ne){this.quill.format(B,!ne.format[B],A.default.sources.USER)}}}function H(B){if(typeof B=="string"||typeof B=="number")return H({key:B});if((typeof B>"u"?"undefined":o(B))==="object"&&(B=(0,c.default)(B,!1)),typeof B.key=="string")if(te.keys[B.key.toUpperCase()]!=null)B.key=te.keys[B.key.toUpperCase()];else if(B.key.length===1)B.key=B.key.toUpperCase().charCodeAt(0);else return null;return B.shortKey&&(B[ee]=B.shortKey,delete B.shortKey),B}n.default=te,n.SHORTKEY=ee},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function g(m,_){var x=[],A=!0,I=!1,P=void 0;try{for(var O=m[Symbol.iterator](),F;!(A=(F=O.next()).done)&&(x.push(F.value),!(_&&x.length===_));A=!0);}catch(R){I=!0,P=R}finally{try{!A&&O.return&&O.return()}finally{if(I)throw P}}return x}return function(m,_){if(Array.isArray(m))return m;if(Symbol.iterator in Object(m))return g(m,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function g(m,_,x){m===null&&(m=Function.prototype);var A=Object.getOwnPropertyDescriptor(m,_);if(A===void 0){var I=Object.getPrototypeOf(m);return I===null?void 0:g(I,_,x)}else{if("value"in A)return A.value;var P=A.get;return P===void 0?void 0:P.call(x)}},s=function(){function g(m,_){for(var x=0;x<_.length;x++){var A=_[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,_,x){return _&&g(m.prototype,_),x&&g(m,x),m}}(),l=i(0),c=f(l),p=i(7),d=f(p);function f(g){return g&&g.__esModule?g:{default:g}}function u(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function y(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function v(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var b=function(g){v(m,g),s(m,null,[{key:"value",value:function(){}}]);function m(_,x){u(this,m);var A=y(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,_));return A.selection=x,A.textNode=document.createTextNode(m.CONTENTS),A.domNode.appendChild(A.textNode),A._length=0,A}return s(m,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(x,A){if(this._length!==0)return a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,x,A);for(var I=this,P=0;I!=null&&I.statics.scope!==c.default.Scope.BLOCK_BLOT;)P+=I.offset(I.parent),I=I.parent;I!=null&&(this._length=m.CONTENTS.length,I.optimize(),I.formatAt(P,m.CONTENTS.length,x,A),this._length=0)}},{key:"index",value:function(x,A){return x===this.textNode?0:a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"index",this).call(this,x,A)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var x=this.textNode,A=this.selection.getNativeRange(),I=void 0,P=void 0,O=void 0;if(A!=null&&A.start.node===x&&A.end.node===x){var F=[x,A.start.offset,A.end.offset];I=F[0],P=F[1],O=F[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==m.CONTENTS){var R=this.textNode.data.split(m.CONTENTS).join("");this.next instanceof d.default?(I=this.next.domNode,this.next.insertAt(0,R),this.textNode.data=m.CONTENTS):(this.textNode.data=R,this.parent.insertBefore(c.default.create(this.textNode),this),this.textNode=document.createTextNode(m.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),P!=null){var S=[P,O].map(function(j){return Math.max(0,Math.min(I.data.length,j-1))}),E=o(S,2);return P=E[0],O=E[1],{startNode:I,startOffset:P,endNode:I,endOffset:O}}}}},{key:"update",value:function(x,A){var I=this;if(x.some(function(O){return O.type==="characterData"&&O.target===I.textNode})){var P=this.restore();P&&(A.range=P)}}},{key:"value",value:function(){return""}}]),m}(c.default.Embed);b.blotName="cursor",b.className="ql-cursor",b.tagName="span",b.CONTENTS="\uFEFF",n.default=b},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(0),a=c(o),s=i(4),l=c(s);function c(y){return y&&y.__esModule?y:{default:y}}function p(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var u=function(y){f(v,y);function v(){return p(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(a.default.Container);u.allowedChildren=[l.default,s.BlockEmbed,u],n.default=u},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var o=function(){function b(g,m){for(var _=0;_<m.length;_++){var x=m[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,_){return m&&b(g.prototype,m),_&&b(g,_),g}}(),a=function b(g,m,_){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,m);if(x===void 0){var A=Object.getPrototypeOf(g);return A===null?void 0:b(A,m,_)}else{if("value"in x)return x.value;var I=x.get;return I===void 0?void 0:I.call(_)}},s=i(0),l=c(s);function c(b){return b&&b.__esModule?b:{default:b}}function p(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function d(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function f(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var u=function(b){f(g,b);function g(){return p(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"value",value:function(_){var x=a(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,_);return x.startsWith("rgb(")?(x=x.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+x.split(",").map(function(A){return("00"+parseInt(A).toString(16)).slice(-2)}).join("")):x}}]),g}(l.default.Attributor.Style),y=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),v=new u("color","color",{scope:l.default.Scope.INLINE});n.ColorAttributor=u,n.ColorClass=y,n.ColorStyle=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var o=function(){function v(b,g){for(var m=0;m<g.length;m++){var _=g[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,g,m){return g&&v(b.prototype,g),m&&v(b,m),b}}(),a=function v(b,g,m){b===null&&(b=Function.prototype);var _=Object.getOwnPropertyDescriptor(b,g);if(_===void 0){var x=Object.getPrototypeOf(b);return x===null?void 0:v(x,g,m)}else{if("value"in _)return _.value;var A=_.get;return A===void 0?void 0:A.call(m)}},s=i(6),l=c(s);function c(v){return v&&v.__esModule?v:{default:v}}function p(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function d(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function f(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var u=function(v){f(b,v);function b(){return p(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,[{key:"format",value:function(m,_){if(m!==this.statics.blotName||!_)return a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,m,_);_=this.constructor.sanitize(_),this.domNode.setAttribute("href",_)}}],[{key:"create",value:function(m){var _=a(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,m);return m=this.sanitize(m),_.setAttribute("href",m),_.setAttribute("rel","noopener noreferrer"),_.setAttribute("target","_blank"),_}},{key:"formats",value:function(m){return m.getAttribute("href")}},{key:"sanitize",value:function(m){return y(m,this.PROTOCOL_WHITELIST)?m:this.SANITIZED_URL}}]),b}(l.default);u.blotName="link",u.tagName="A",u.SANITIZED_URL="about:blank",u.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(v,b){var g=document.createElement("a");g.href=v;var m=g.href.slice(0,g.href.indexOf(":"));return b.indexOf(m)>-1}n.default=u,n.sanitize=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},a=function(){function b(g,m){for(var _=0;_<m.length;_++){var x=m[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,_){return m&&b(g.prototype,m),_&&b(g,_),g}}(),s=i(23),l=d(s),c=i(107),p=d(c);function d(b){return b&&b.__esModule?b:{default:b}}function f(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}var u=0;function y(b,g){b.setAttribute(g,b.getAttribute(g)!=="true")}var v=function(){function b(g){var m=this;f(this,b),this.select=g,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){m.togglePicker()}),this.label.addEventListener("keydown",function(_){switch(_.keyCode){case l.default.keys.ENTER:m.togglePicker();break;case l.default.keys.ESCAPE:m.escape(),_.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return a(b,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(m){var _=this,x=document.createElement("span");return x.tabIndex="0",x.setAttribute("role","button"),x.classList.add("ql-picker-item"),m.hasAttribute("value")&&x.setAttribute("data-value",m.getAttribute("value")),m.textContent&&x.setAttribute("data-label",m.textContent),x.addEventListener("click",function(){_.selectItem(x,!0)}),x.addEventListener("keydown",function(A){switch(A.keyCode){case l.default.keys.ENTER:_.selectItem(x,!0),A.preventDefault();break;case l.default.keys.ESCAPE:_.escape(),A.preventDefault();break}}),x}},{key:"buildLabel",value:function(){var m=document.createElement("span");return m.classList.add("ql-picker-label"),m.innerHTML=p.default,m.tabIndex="0",m.setAttribute("role","button"),m.setAttribute("aria-expanded","false"),this.container.appendChild(m),m}},{key:"buildOptions",value:function(){var m=this,_=document.createElement("span");_.classList.add("ql-picker-options"),_.setAttribute("aria-hidden","true"),_.tabIndex="-1",_.id="ql-picker-options-"+u,u+=1,this.label.setAttribute("aria-controls",_.id),this.options=_,[].slice.call(this.select.options).forEach(function(x){var A=m.buildItem(x);_.appendChild(A),x.selected===!0&&m.selectItem(A)}),this.container.appendChild(_)}},{key:"buildPicker",value:function(){var m=this;[].slice.call(this.select.attributes).forEach(function(_){m.container.setAttribute(_.name,_.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var m=this;this.close(),setTimeout(function(){return m.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(m){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=this.container.querySelector(".ql-selected");if(m!==x&&(x!=null&&x.classList.remove("ql-selected"),m!=null&&(m.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(m.parentNode.children,m),m.hasAttribute("data-value")?this.label.setAttribute("data-value",m.getAttribute("data-value")):this.label.removeAttribute("data-value"),m.hasAttribute("data-label")?this.label.setAttribute("data-label",m.getAttribute("data-label")):this.label.removeAttribute("data-label"),_))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var A=document.createEvent("Event");A.initEvent("change",!0,!0),this.select.dispatchEvent(A)}this.close()}}},{key:"update",value:function(){var m=void 0;if(this.select.selectedIndex>-1){var _=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];m=this.select.options[this.select.selectedIndex],this.selectItem(_)}else this.selectItem(null);var x=m!=null&&m!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",x)}}]),b}();n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(0),a=V(o),s=i(5),l=V(s),c=i(4),p=V(c),d=i(16),f=V(d),u=i(25),y=V(u),v=i(24),b=V(v),g=i(35),m=V(g),_=i(6),x=V(_),A=i(22),I=V(A),P=i(7),O=V(P),F=i(55),R=V(F),S=i(42),E=V(S),j=i(23),M=V(j);function V(ee){return ee&&ee.__esModule?ee:{default:ee}}l.default.register({"blots/block":p.default,"blots/block/embed":c.BlockEmbed,"blots/break":f.default,"blots/container":y.default,"blots/cursor":b.default,"blots/embed":m.default,"blots/inline":x.default,"blots/scroll":I.default,"blots/text":O.default,"modules/clipboard":R.default,"modules/history":E.default,"modules/keyboard":M.default}),a.default.register(p.default,f.default,b.default,x.default,I.default,O.default),n.default=l.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(1),a=function(){function s(l){this.domNode=l,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(s.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),s.create=function(l){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var c;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?c=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?c=document.createElement(l):c=document.createElement(this.tagName[0])):c=document.createElement(this.tagName),this.className&&c.classList.add(this.className),c},s.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},s.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return o.create(l)},s.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},s.prototype.deleteAt=function(l,c){var p=this.isolate(l,c);p.remove()},s.prototype.formatAt=function(l,c,p,d){var f=this.isolate(l,c);if(o.query(p,o.Scope.BLOT)!=null&&d)f.wrap(p,d);else if(o.query(p,o.Scope.ATTRIBUTE)!=null){var u=o.create(this.statics.scope);f.wrap(u),u.format(p,d)}},s.prototype.insertAt=function(l,c,p){var d=p==null?o.create("text",c):o.create(c,p),f=this.split(l);this.parent.insertBefore(d,f)},s.prototype.insertInto=function(l,c){c===void 0&&(c=null),this.parent!=null&&this.parent.children.remove(this);var p=null;l.children.insertBefore(this,c),c!=null&&(p=c.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=p)&&l.domNode.insertBefore(this.domNode,p),this.parent=l,this.attach()},s.prototype.isolate=function(l,c){var p=this.split(l);return p.split(c),p},s.prototype.length=function(){return 1},s.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},s.prototype.optimize=function(l){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},s.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},s.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},s.prototype.replaceWith=function(l,c){var p=typeof l=="string"?o.create(l,c):l;return p.replace(this),p},s.prototype.split=function(l,c){return l===0?this:this.next},s.prototype.update=function(l,c){},s.prototype.wrap=function(l,c){var p=typeof l=="string"?o.create(l,c):l;return this.parent!=null&&this.parent.insertBefore(p,this.next),p.appendChild(this),p},s.blotName="abstract",s}();n.default=a},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(12),a=i(32),s=i(33),l=i(1),c=function(){function p(d){this.attributes={},this.domNode=d,this.build()}return p.prototype.attribute=function(d,f){f?d.add(this.domNode,f)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},p.prototype.build=function(){var d=this;this.attributes={};var f=o.default.keys(this.domNode),u=a.default.keys(this.domNode),y=s.default.keys(this.domNode);f.concat(u).concat(y).forEach(function(v){var b=l.query(v,l.Scope.ATTRIBUTE);b instanceof o.default&&(d.attributes[b.attrName]=b)})},p.prototype.copy=function(d){var f=this;Object.keys(this.attributes).forEach(function(u){var y=f.attributes[u].value(f.domNode);d.format(u,y)})},p.prototype.move=function(d){var f=this;this.copy(d),Object.keys(this.attributes).forEach(function(u){f.attributes[u].remove(f.domNode)}),this.attributes={}},p.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(f,u){return f[u]=d.attributes[u].value(d.domNode),f},{})},p}();n.default=c},function(r,n,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var f in d)d.hasOwnProperty(f)&&(p[f]=d[f])};return function(p,d){c(p,d);function f(){this.constructor=p}p.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(12);function s(c,p){var d=c.getAttribute("class")||"";return d.split(/\s+/).filter(function(f){return f.indexOf(p+"-")===0})}var l=function(c){o(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return p.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},p.prototype.add=function(d,f){return this.canAdd(d,f)?(this.remove(d),d.classList.add(this.keyName+"-"+f),!0):!1},p.prototype.remove=function(d){var f=s(d,this.keyName);f.forEach(function(u){d.classList.remove(u)}),d.classList.length===0&&d.removeAttribute("class")},p.prototype.value=function(d){var f=s(d,this.keyName)[0]||"",u=f.slice(this.keyName.length+1);return this.canAdd(d,u)?u:""},p}(a.default);n.default=l},function(r,n,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var f in d)d.hasOwnProperty(f)&&(p[f]=d[f])};return function(p,d){c(p,d);function f(){this.constructor=p}p.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(12);function s(c){var p=c.split("-"),d=p.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return p[0]+d}var l=function(c){o(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return p.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(f){var u=f.split(":");return u[0].trim()})},p.prototype.add=function(d,f){return this.canAdd(d,f)?(d.style[s(this.keyName)]=f,!0):!1},p.prototype.remove=function(d){d.style[s(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},p.prototype.value=function(d){var f=d.style[s(this.keyName)];return this.canAdd(d,f)?f:""},p}(a.default);n.default=l},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function l(c,p){for(var d=0;d<p.length;d++){var f=p[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,p,d){return p&&l(c.prototype,p),d&&l(c,d),c}}();function a(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var s=function(){function l(c,p){a(this,l),this.quill=c,this.options=p,this.modules={}}return o(l,[{key:"init",value:function(){var p=this;Object.keys(this.options.modules).forEach(function(d){p.modules[d]==null&&p.addModule(d)})}},{key:"addModule",value:function(p){var d=this.quill.constructor.import("modules/"+p);return this.modules[p]=new d(this.quill,this.options.modules[p]||{}),this.modules[p]}}]),l}();s.DEFAULTS={modules:{}},s.themes={default:s},n.default=s},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function g(m,_){for(var x=0;x<_.length;x++){var A=_[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,_,x){return _&&g(m.prototype,_),x&&g(m,x),m}}(),a=function g(m,_,x){m===null&&(m=Function.prototype);var A=Object.getOwnPropertyDescriptor(m,_);if(A===void 0){var I=Object.getPrototypeOf(m);return I===null?void 0:g(I,_,x)}else{if("value"in A)return A.value;var P=A.get;return P===void 0?void 0:P.call(x)}},s=i(0),l=d(s),c=i(7),p=d(c);function d(g){return g&&g.__esModule?g:{default:g}}function f(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function u(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function y(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var v="\uFEFF",b=function(g){y(m,g);function m(_){f(this,m);var x=u(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,_));return x.contentNode=document.createElement("span"),x.contentNode.setAttribute("contenteditable",!1),[].slice.call(x.domNode.childNodes).forEach(function(A){x.contentNode.appendChild(A)}),x.leftGuard=document.createTextNode(v),x.rightGuard=document.createTextNode(v),x.domNode.appendChild(x.leftGuard),x.domNode.appendChild(x.contentNode),x.domNode.appendChild(x.rightGuard),x}return o(m,[{key:"index",value:function(x,A){return x===this.leftGuard?0:x===this.rightGuard?1:a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"index",this).call(this,x,A)}},{key:"restore",value:function(x){var A=void 0,I=void 0,P=x.data.split(v).join("");if(x===this.leftGuard)if(this.prev instanceof p.default){var O=this.prev.length();this.prev.insertAt(O,P),A={startNode:this.prev.domNode,startOffset:O+P.length}}else I=document.createTextNode(P),this.parent.insertBefore(l.default.create(I),this),A={startNode:I,startOffset:P.length};else x===this.rightGuard&&(this.next instanceof p.default?(this.next.insertAt(0,P),A={startNode:this.next.domNode,startOffset:P.length}):(I=document.createTextNode(P),this.parent.insertBefore(l.default.create(I),this.next),A={startNode:I,startOffset:P.length}));return x.data=v,A}},{key:"update",value:function(x,A){var I=this;x.forEach(function(P){if(P.type==="characterData"&&(P.target===I.leftGuard||P.target===I.rightGuard)){var O=I.restore(P.target);O&&(A.range=O)}})}}]),m}(l.default.Embed);n.default=b},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var o=i(0),a=s(o);function s(f){return f&&f.__esModule?f:{default:f}}var l={scope:a.default.Scope.BLOCK,whitelist:["right","center","justify"]},c=new a.default.Attributor.Attribute("align","align",l),p=new a.default.Attributor.Class("align","ql-align",l),d=new a.default.Attributor.Style("align","text-align",l);n.AlignAttribute=c,n.AlignClass=p,n.AlignStyle=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var o=i(0),a=l(o),s=i(26);function l(d){return d&&d.__esModule?d:{default:d}}var c=new a.default.Attributor.Class("background","ql-bg",{scope:a.default.Scope.INLINE}),p=new s.ColorAttributor("background","background-color",{scope:a.default.Scope.INLINE});n.BackgroundClass=c,n.BackgroundStyle=p},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var o=i(0),a=s(o);function s(f){return f&&f.__esModule?f:{default:f}}var l={scope:a.default.Scope.BLOCK,whitelist:["rtl"]},c=new a.default.Attributor.Attribute("direction","dir",l),p=new a.default.Attributor.Class("direction","ql-direction",l),d=new a.default.Attributor.Style("direction","direction",l);n.DirectionAttribute=c,n.DirectionClass=p,n.DirectionStyle=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var o=function(){function g(m,_){for(var x=0;x<_.length;x++){var A=_[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,_,x){return _&&g(m.prototype,_),x&&g(m,x),m}}(),a=function g(m,_,x){m===null&&(m=Function.prototype);var A=Object.getOwnPropertyDescriptor(m,_);if(A===void 0){var I=Object.getPrototypeOf(m);return I===null?void 0:g(I,_,x)}else{if("value"in A)return A.value;var P=A.get;return P===void 0?void 0:P.call(x)}},s=i(0),l=c(s);function c(g){return g&&g.__esModule?g:{default:g}}function p(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function d(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function f(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var u={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new l.default.Attributor.Class("font","ql-font",u),v=function(g){f(m,g);function m(){return p(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"value",value:function(x){return a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,x).replace(/["']/g,"")}}]),m}(l.default.Attributor.Style),b=new v("font","font-family",u);n.FontStyle=b,n.FontClass=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var o=i(0),a=s(o);function s(p){return p&&p.__esModule?p:{default:p}}var l=new a.default.Attributor.Class("size","ql-size",{scope:a.default.Scope.INLINE,whitelist:["small","large","huge"]}),c=new a.default.Attributor.Style("size","font-size",{scope:a.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=l,n.SizeStyle=c},function(r,n,i){r.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var o=function(){function _(x,A){for(var I=0;I<A.length;I++){var P=A[I];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}return function(x,A,I){return A&&_(x.prototype,A),I&&_(x,I),x}}(),a=i(0),s=f(a),l=i(5),c=f(l),p=i(9),d=f(p);function f(_){return _&&_.__esModule?_:{default:_}}function u(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}function y(_,x){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:_}function v(_,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);_.prototype=Object.create(x&&x.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(_,x):_.__proto__=x)}var b=function(_){v(x,_);function x(A,I){u(this,x);var P=y(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,A,I));return P.lastRecorded=0,P.ignoreChange=!1,P.clear(),P.quill.on(c.default.events.EDITOR_CHANGE,function(O,F,R,S){O!==c.default.events.TEXT_CHANGE||P.ignoreChange||(!P.options.userOnly||S===c.default.sources.USER?P.record(F,R):P.transform(F))}),P.quill.keyboard.addBinding({key:"Z",shortKey:!0},P.undo.bind(P)),P.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},P.redo.bind(P)),/Win/i.test(navigator.platform)&&P.quill.keyboard.addBinding({key:"Y",shortKey:!0},P.redo.bind(P)),P}return o(x,[{key:"change",value:function(I,P){if(this.stack[I].length!==0){var O=this.stack[I].pop();this.stack[P].push(O),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(O[I],c.default.sources.USER),this.ignoreChange=!1;var F=m(O[I]);this.quill.setSelection(F)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(I,P){if(I.ops.length!==0){this.stack.redo=[];var O=this.quill.getContents().diff(P),F=Date.now();if(this.lastRecorded+this.options.delay>F&&this.stack.undo.length>0){var R=this.stack.undo.pop();O=O.compose(R.undo),I=R.redo.compose(I)}else this.lastRecorded=F;this.stack.undo.push({redo:I,undo:O}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(I){this.stack.undo.forEach(function(P){P.undo=I.transform(P.undo,!0),P.redo=I.transform(P.redo,!0)}),this.stack.redo.forEach(function(P){P.undo=I.transform(P.undo,!0),P.redo=I.transform(P.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),x}(d.default);b.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function g(_){var x=_.ops[_.ops.length-1];return x==null?!1:x.insert!=null?typeof x.insert=="string"&&x.insert.endsWith(`
`):x.attributes!=null?Object.keys(x.attributes).some(function(A){return s.default.query(A,s.default.Scope.BLOCK)!=null}):!1}function m(_){var x=_.reduce(function(I,P){return I+=P.delete||0,I},0),A=_.length()-x;return g(_)&&(A-=1),A}n.default=b,n.getLastChangeIndex=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var o=function(){function L(D,U){for(var H=0;H<U.length;H++){var B=U[H];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(D,B.key,B)}}return function(D,U,H){return U&&L(D.prototype,U),H&&L(D,H),D}}(),a=function L(D,U,H){D===null&&(D=Function.prototype);var B=Object.getOwnPropertyDescriptor(D,U);if(B===void 0){var Y=Object.getPrototypeOf(D);return Y===null?void 0:L(Y,U,H)}else{if("value"in B)return B.value;var re=B.get;return re===void 0?void 0:re.call(H)}},s=i(3),l=F(s),c=i(2),p=F(c),d=i(8),f=F(d),u=i(23),y=F(u),v=i(34),b=F(v),g=i(59),m=F(g),_=i(60),x=F(_),A=i(28),I=F(A),P=i(61),O=F(P);function F(L){return L&&L.__esModule?L:{default:L}}function R(L,D){if(!(L instanceof D))throw new TypeError("Cannot call a class as a function")}function S(L,D){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:L}function E(L,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);L.prototype=Object.create(D&&D.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(L,D):L.__proto__=D)}var j=[!1,"center","right","justify"],M=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],V=[!1,"serif","monospace"],ee=["1","2","3",!1],te=["small",!1,"large","huge"],Q=function(L){E(D,L);function D(U,H){R(this,D);var B=S(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,U,H)),Y=function re(ne){if(!document.body.contains(U.root))return document.body.removeEventListener("click",re);B.tooltip!=null&&!B.tooltip.root.contains(ne.target)&&document.activeElement!==B.tooltip.textbox&&!B.quill.hasFocus()&&B.tooltip.hide(),B.pickers!=null&&B.pickers.forEach(function(de){de.container.contains(ne.target)||de.close()})};return U.emitter.listenDOM("click",document.body,Y),B}return o(D,[{key:"addModule",value:function(H){var B=a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"addModule",this).call(this,H);return H==="toolbar"&&this.extendToolbar(B),B}},{key:"buildButtons",value:function(H,B){H.forEach(function(Y){var re=Y.getAttribute("class")||"";re.split(/\s+/).forEach(function(ne){if(ne.startsWith("ql-")&&(ne=ne.slice(3),B[ne]!=null))if(ne==="direction")Y.innerHTML=B[ne][""]+B[ne].rtl;else if(typeof B[ne]=="string")Y.innerHTML=B[ne];else{var de=Y.value||"";de!=null&&B[ne][de]&&(Y.innerHTML=B[ne][de])}})})}},{key:"buildPickers",value:function(H,B){var Y=this;this.pickers=H.map(function(ne){if(ne.classList.contains("ql-align"))return ne.querySelector("option")==null&&q(ne,j),new x.default(ne,B.align);if(ne.classList.contains("ql-background")||ne.classList.contains("ql-color")){var de=ne.classList.contains("ql-background")?"background":"color";return ne.querySelector("option")==null&&q(ne,M,de==="background"?"#ffffff":"#000000"),new m.default(ne,B[de])}else return ne.querySelector("option")==null&&(ne.classList.contains("ql-font")?q(ne,V):ne.classList.contains("ql-header")?q(ne,ee):ne.classList.contains("ql-size")&&q(ne,te)),new I.default(ne)});var re=function(){Y.pickers.forEach(function(de){de.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,re)}}]),D}(b.default);Q.DEFAULTS=(0,l.default)(!0,{},b.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var D=this,U=this.container.querySelector("input.ql-image[type=file]");U==null&&(U=document.createElement("input"),U.setAttribute("type","file"),U.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),U.classList.add("ql-image"),U.addEventListener("change",function(){if(U.files!=null&&U.files[0]!=null){var H=new FileReader;H.onload=function(B){var Y=D.quill.getSelection(!0);D.quill.updateContents(new p.default().retain(Y.index).delete(Y.length).insert({image:B.target.result}),f.default.sources.USER),D.quill.setSelection(Y.index+1,f.default.sources.SILENT),U.value=""},H.readAsDataURL(U.files[0])}}),this.container.appendChild(U)),U.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var J=function(L){E(D,L);function D(U,H){R(this,D);var B=S(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,U,H));return B.textbox=B.root.querySelector('input[type="text"]'),B.listen(),B}return o(D,[{key:"listen",value:function(){var H=this;this.textbox.addEventListener("keydown",function(B){y.default.match(B,"enter")?(H.save(),B.preventDefault()):y.default.match(B,"escape")&&(H.cancel(),B.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),B!=null?this.textbox.value=B:H!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+H)||""),this.root.setAttribute("data-mode",H)}},{key:"restoreFocus",value:function(){var H=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=H}},{key:"save",value:function(){var H=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var B=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",H,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",H,f.default.sources.USER)),this.quill.root.scrollTop=B;break}case"video":H=W(H);case"formula":{if(!H)break;var Y=this.quill.getSelection(!0);if(Y!=null){var re=Y.index+Y.length;this.quill.insertEmbed(re,this.root.getAttribute("data-mode"),H,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(re+1," ",f.default.sources.USER),this.quill.setSelection(re+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),D}(O.default);function W(L){var D=L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return D?(D[1]||"https")+"://www.youtube.com/embed/"+D[2]+"?showinfo=0":(D=L.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(D[1]||"https")+"://player.vimeo.com/video/"+D[2]+"/":L}function q(L,D){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;D.forEach(function(H){var B=document.createElement("option");H===U?B.setAttribute("selected","selected"):B.setAttribute("value",H),L.appendChild(B)})}n.BaseTooltip=J,n.default=Q},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function a(){this.head=this.tail=null,this.length=0}return a.prototype.append=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];this.insertBefore(s[0],null),s.length>1&&this.append.apply(this,s.slice(1))},a.prototype.contains=function(s){for(var l,c=this.iterator();l=c();)if(l===s)return!0;return!1},a.prototype.insertBefore=function(s,l){s&&(s.next=l,l!=null?(s.prev=l.prev,l.prev!=null&&(l.prev.next=s),l.prev=s,l===this.head&&(this.head=s)):this.tail!=null?(this.tail.next=s,s.prev=this.tail,this.tail=s):(s.prev=null,this.head=this.tail=s),this.length+=1)},a.prototype.offset=function(s){for(var l=0,c=this.head;c!=null;){if(c===s)return l;l+=c.length(),c=c.next}return-1},a.prototype.remove=function(s){this.contains(s)&&(s.prev!=null&&(s.prev.next=s.next),s.next!=null&&(s.next.prev=s.prev),s===this.head&&(this.head=s.next),s===this.tail&&(this.tail=s.prev),this.length-=1)},a.prototype.iterator=function(s){return s===void 0&&(s=this.head),function(){var l=s;return s!=null&&(s=s.next),l}},a.prototype.find=function(s,l){l===void 0&&(l=!1);for(var c,p=this.iterator();c=p();){var d=c.length();if(s<d||l&&s===d&&(c.next==null||c.next.length()!==0))return[c,s];s-=d}return[null,0]},a.prototype.forEach=function(s){for(var l,c=this.iterator();l=c();)s(l)},a.prototype.forEachAt=function(s,l,c){if(!(l<=0))for(var p=this.find(s),d=p[0],f=p[1],u,y=s-f,v=this.iterator(d);(u=v())&&y<s+l;){var b=u.length();s>y?c(u,s-y,Math.min(l,y+b-s)):c(u,0,Math.min(b,s+l-y)),y+=b}},a.prototype.map=function(s){return this.reduce(function(l,c){return l.push(s(c)),l},[])},a.prototype.reduce=function(s,l){for(var c,p=this.iterator();c=p();)l=s(l,c);return l},a}();n.default=o},function(r,n,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var y in u)u.hasOwnProperty(y)&&(f[y]=u[y])};return function(f,u){d(f,u);function y(){this.constructor=f}f.prototype=u===null?Object.create(u):(y.prototype=u.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(17),s=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},c=100,p=function(d){o(f,d);function f(u){var y=d.call(this,u)||this;return y.scroll=y,y.observer=new MutationObserver(function(v){y.update(v)}),y.observer.observe(y.domNode,l),y.attach(),y}return f.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(u,y){this.update(),u===0&&y===this.length()?this.children.forEach(function(v){v.remove()}):d.prototype.deleteAt.call(this,u,y)},f.prototype.formatAt=function(u,y,v,b){this.update(),d.prototype.formatAt.call(this,u,y,v,b)},f.prototype.insertAt=function(u,y,v){this.update(),d.prototype.insertAt.call(this,u,y,v)},f.prototype.optimize=function(u,y){var v=this;u===void 0&&(u=[]),y===void 0&&(y={}),d.prototype.optimize.call(this,y);for(var b=[].slice.call(this.observer.takeRecords());b.length>0;)u.push(b.pop());for(var g=function(A,I){I===void 0&&(I=!0),!(A==null||A===v)&&A.domNode.parentNode!=null&&(A.domNode[s.DATA_KEY].mutations==null&&(A.domNode[s.DATA_KEY].mutations=[]),I&&g(A.parent))},m=function(A){A.domNode[s.DATA_KEY]==null||A.domNode[s.DATA_KEY].mutations==null||(A instanceof a.default&&A.children.forEach(m),A.optimize(y))},_=u,x=0;_.length>0;x+=1){if(x>=c)throw new Error("[Parchment] Maximum optimize iterations reached");for(_.forEach(function(A){var I=s.find(A.target,!0);I!=null&&(I.domNode===A.target&&(A.type==="childList"?(g(s.find(A.previousSibling,!1)),[].forEach.call(A.addedNodes,function(P){var O=s.find(P,!1);g(O,!1),O instanceof a.default&&O.children.forEach(function(F){g(F,!1)})})):A.type==="attributes"&&g(I.prev)),g(I))}),this.children.forEach(m),_=[].slice.call(this.observer.takeRecords()),b=_.slice();b.length>0;)u.push(b.pop())}},f.prototype.update=function(u,y){var v=this;y===void 0&&(y={}),u=u||this.observer.takeRecords(),u.map(function(b){var g=s.find(b.target,!0);return g==null?null:g.domNode[s.DATA_KEY].mutations==null?(g.domNode[s.DATA_KEY].mutations=[b],g):(g.domNode[s.DATA_KEY].mutations.push(b),null)}).forEach(function(b){b==null||b===v||b.domNode[s.DATA_KEY]==null||b.update(b.domNode[s.DATA_KEY].mutations||[],y)}),this.domNode[s.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[s.DATA_KEY].mutations,y),this.optimize(u,y)},f.blotName="scroll",f.defaultChild="block",f.scope=s.Scope.BLOCK_BLOT,f.tagName="DIV",f}(a.default);n.default=p},function(r,n,i){var o=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var u in f)f.hasOwnProperty(u)&&(d[u]=f[u])};return function(d,f){p(d,f);function u(){this.constructor=d}d.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(18),s=i(1);function l(p,d){if(Object.keys(p).length!==Object.keys(d).length)return!1;for(var f in p)if(p[f]!==d[f])return!1;return!0}var c=function(p){o(d,p);function d(){return p!==null&&p.apply(this,arguments)||this}return d.formats=function(f){if(f.tagName!==d.tagName)return p.formats.call(this,f)},d.prototype.format=function(f,u){var y=this;f===this.statics.blotName&&!u?(this.children.forEach(function(v){v instanceof a.default||(v=v.wrap(d.blotName,!0)),y.attributes.copy(v)}),this.unwrap()):p.prototype.format.call(this,f,u)},d.prototype.formatAt=function(f,u,y,v){if(this.formats()[y]!=null||s.query(y,s.Scope.ATTRIBUTE)){var b=this.isolate(f,u);b.format(y,v)}else p.prototype.formatAt.call(this,f,u,y,v)},d.prototype.optimize=function(f){p.prototype.optimize.call(this,f);var u=this.formats();if(Object.keys(u).length===0)return this.unwrap();var y=this.next;y instanceof d&&y.prev===this&&l(u,y.formats())&&(y.moveChildren(this),y.remove())},d.blotName="inline",d.scope=s.Scope.INLINE_BLOT,d.tagName="SPAN",d}(a.default);n.default=c},function(r,n,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var f in d)d.hasOwnProperty(f)&&(p[f]=d[f])};return function(p,d){c(p,d);function f(){this.constructor=p}p.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(18),s=i(1),l=function(c){o(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return p.formats=function(d){var f=s.query(p.blotName).tagName;if(d.tagName!==f)return c.formats.call(this,d)},p.prototype.format=function(d,f){s.query(d,s.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!f?this.replaceWith(p.blotName):c.prototype.format.call(this,d,f))},p.prototype.formatAt=function(d,f,u,y){s.query(u,s.Scope.BLOCK)!=null?this.format(u,y):c.prototype.formatAt.call(this,d,f,u,y)},p.prototype.insertAt=function(d,f,u){if(u==null||s.query(f,s.Scope.INLINE)!=null)c.prototype.insertAt.call(this,d,f,u);else{var y=this.split(d),v=s.create(f,u);y.parent.insertBefore(v,y)}},p.prototype.update=function(d,f){navigator.userAgent.match(/Trident/)?this.build():c.prototype.update.call(this,d,f)},p.blotName="block",p.scope=s.Scope.BLOCK_BLOT,p.tagName="P",p}(a.default);n.default=l},function(r,n,i){var o=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,p){c.__proto__=p}||function(c,p){for(var d in p)p.hasOwnProperty(d)&&(c[d]=p[d])};return function(c,p){l(c,p);function d(){this.constructor=c}c.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(19),s=function(l){o(c,l);function c(){return l!==null&&l.apply(this,arguments)||this}return c.formats=function(p){},c.prototype.format=function(p,d){l.prototype.formatAt.call(this,0,this.length(),p,d)},c.prototype.formatAt=function(p,d,f,u){p===0&&d===this.length()?this.format(f,u):l.prototype.formatAt.call(this,p,d,f,u)},c.prototype.formats=function(){return this.statics.formats(this.domNode)},c}(a.default);n.default=s},function(r,n,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var f in d)d.hasOwnProperty(f)&&(p[f]=d[f])};return function(p,d){c(p,d);function f(){this.constructor=p}p.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(19),s=i(1),l=function(c){o(p,c);function p(d){var f=c.call(this,d)||this;return f.text=f.statics.value(f.domNode),f}return p.create=function(d){return document.createTextNode(d)},p.value=function(d){var f=d.data;return f.normalize&&(f=f.normalize()),f},p.prototype.deleteAt=function(d,f){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+f)},p.prototype.index=function(d,f){return this.domNode===d?f:-1},p.prototype.insertAt=function(d,f,u){u==null?(this.text=this.text.slice(0,d)+f+this.text.slice(d),this.domNode.data=this.text):c.prototype.insertAt.call(this,d,f,u)},p.prototype.length=function(){return this.text.length},p.prototype.optimize=function(d){c.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof p&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},p.prototype.position=function(d,f){return[this.domNode,d]},p.prototype.split=function(d,f){if(f===void 0&&(f=!1),!f){if(d===0)return this;if(d===this.length())return this.next}var u=s.create(this.domNode.splitText(d));return this.parent.insertBefore(u,this.next),this.text=this.statics.value(this.domNode),u},p.prototype.update=function(d,f){var u=this;d.some(function(y){return y.type==="characterData"&&y.target===u.domNode})&&(this.text=this.statics.value(this.domNode))},p.prototype.value=function(){return this.text},p.blotName="text",p.scope=s.Scope.INLINE_BLOT,p}(a.default);n.default=l},function(r,n,i){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(s,l){return arguments.length>1&&!this.contains(s)==!l?l:a.call(this,s)}}String.prototype.startsWith||(String.prototype.startsWith=function(s,l){return l=l||0,this.substr(l,s.length)===s}),String.prototype.endsWith||(String.prototype.endsWith=function(s,l){var c=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>c.length)&&(l=c.length),l-=s.length;var p=c.indexOf(s,l);return p!==-1&&p===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var c=Object(this),p=c.length>>>0,d=arguments[1],f,u=0;u<p;u++)if(f=c[u],l.call(d,f,u,c))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(r,n){var i=-1,o=1,a=0;function s(x,A,I){if(x==A)return x?[[a,x]]:[];(I<0||x.length<I)&&(I=null);var P=d(x,A),O=x.substring(0,P);x=x.substring(P),A=A.substring(P),P=f(x,A);var F=x.substring(x.length-P);x=x.substring(0,x.length-P),A=A.substring(0,A.length-P);var R=l(x,A);return O&&R.unshift([a,O]),F&&R.push([a,F]),y(R),I!=null&&(R=g(R,I)),R=m(R),R}function l(x,A){var I;if(!x)return[[o,A]];if(!A)return[[i,x]];var P=x.length>A.length?x:A,O=x.length>A.length?A:x,F=P.indexOf(O);if(F!=-1)return I=[[o,P.substring(0,F)],[a,O],[o,P.substring(F+O.length)]],x.length>A.length&&(I[0][0]=I[2][0]=i),I;if(O.length==1)return[[i,x],[o,A]];var R=u(x,A);if(R){var S=R[0],E=R[1],j=R[2],M=R[3],V=R[4],ee=s(S,j),te=s(E,M);return ee.concat([[a,V]],te)}return c(x,A)}function c(x,A){for(var I=x.length,P=A.length,O=Math.ceil((I+P)/2),F=O,R=2*O,S=new Array(R),E=new Array(R),j=0;j<R;j++)S[j]=-1,E[j]=-1;S[F+1]=0,E[F+1]=0;for(var M=I-P,V=M%2!=0,ee=0,te=0,Q=0,J=0,W=0;W<O;W++){for(var q=-W+ee;q<=W-te;q+=2){var L=F+q,D;q==-W||q!=W&&S[L-1]<S[L+1]?D=S[L+1]:D=S[L-1]+1;for(var U=D-q;D<I&&U<P&&x.charAt(D)==A.charAt(U);)D++,U++;if(S[L]=D,D>I)te+=2;else if(U>P)ee+=2;else if(V){var H=F+M-q;if(H>=0&&H<R&&E[H]!=-1){var B=I-E[H];if(D>=B)return p(x,A,D,U)}}}for(var Y=-W+Q;Y<=W-J;Y+=2){var H=F+Y,B;Y==-W||Y!=W&&E[H-1]<E[H+1]?B=E[H+1]:B=E[H-1]+1;for(var re=B-Y;B<I&&re<P&&x.charAt(I-B-1)==A.charAt(P-re-1);)B++,re++;if(E[H]=B,B>I)J+=2;else if(re>P)Q+=2;else if(!V){var L=F+M-Y;if(L>=0&&L<R&&S[L]!=-1){var D=S[L],U=F+D-L;if(B=I-B,D>=B)return p(x,A,D,U)}}}}return[[i,x],[o,A]]}function p(x,A,I,P){var O=x.substring(0,I),F=A.substring(0,P),R=x.substring(I),S=A.substring(P),E=s(O,F),j=s(R,S);return E.concat(j)}function d(x,A){if(!x||!A||x.charAt(0)!=A.charAt(0))return 0;for(var I=0,P=Math.min(x.length,A.length),O=P,F=0;I<O;)x.substring(F,O)==A.substring(F,O)?(I=O,F=I):P=O,O=Math.floor((P-I)/2+I);return O}function f(x,A){if(!x||!A||x.charAt(x.length-1)!=A.charAt(A.length-1))return 0;for(var I=0,P=Math.min(x.length,A.length),O=P,F=0;I<O;)x.substring(x.length-O,x.length-F)==A.substring(A.length-O,A.length-F)?(I=O,F=I):P=O,O=Math.floor((P-I)/2+I);return O}function u(x,A){var I=x.length>A.length?x:A,P=x.length>A.length?A:x;if(I.length<4||P.length*2<I.length)return null;function O(te,Q,J){for(var W=te.substring(J,J+Math.floor(te.length/4)),q=-1,L="",D,U,H,B;(q=Q.indexOf(W,q+1))!=-1;){var Y=d(te.substring(J),Q.substring(q)),re=f(te.substring(0,J),Q.substring(0,q));L.length<re+Y&&(L=Q.substring(q-re,q)+Q.substring(q,q+Y),D=te.substring(0,J-re),U=te.substring(J+Y),H=Q.substring(0,q-re),B=Q.substring(q+Y))}return L.length*2>=te.length?[D,U,H,B,L]:null}var F=O(I,P,Math.ceil(I.length/4)),R=O(I,P,Math.ceil(I.length/2)),S;if(!F&&!R)return null;R?F?S=F[4].length>R[4].length?F:R:S=R:S=F;var E,j,M,V;x.length>A.length?(E=S[0],j=S[1],M=S[2],V=S[3]):(M=S[0],V=S[1],E=S[2],j=S[3]);var ee=S[4];return[E,j,M,V,ee]}function y(x){x.push([a,""]);for(var A=0,I=0,P=0,O="",F="",R;A<x.length;)switch(x[A][0]){case o:P++,F+=x[A][1],A++;break;case i:I++,O+=x[A][1],A++;break;case a:I+P>1?(I!==0&&P!==0&&(R=d(F,O),R!==0&&(A-I-P>0&&x[A-I-P-1][0]==a?x[A-I-P-1][1]+=F.substring(0,R):(x.splice(0,0,[a,F.substring(0,R)]),A++),F=F.substring(R),O=O.substring(R)),R=f(F,O),R!==0&&(x[A][1]=F.substring(F.length-R)+x[A][1],F=F.substring(0,F.length-R),O=O.substring(0,O.length-R))),I===0?x.splice(A-P,I+P,[o,F]):P===0?x.splice(A-I,I+P,[i,O]):x.splice(A-I-P,I+P,[i,O],[o,F]),A=A-I-P+(I?1:0)+(P?1:0)+1):A!==0&&x[A-1][0]==a?(x[A-1][1]+=x[A][1],x.splice(A,1)):A++,P=0,I=0,O="",F="";break}x[x.length-1][1]===""&&x.pop();var S=!1;for(A=1;A<x.length-1;)x[A-1][0]==a&&x[A+1][0]==a&&(x[A][1].substring(x[A][1].length-x[A-1][1].length)==x[A-1][1]?(x[A][1]=x[A-1][1]+x[A][1].substring(0,x[A][1].length-x[A-1][1].length),x[A+1][1]=x[A-1][1]+x[A+1][1],x.splice(A-1,1),S=!0):x[A][1].substring(0,x[A+1][1].length)==x[A+1][1]&&(x[A-1][1]+=x[A+1][1],x[A][1]=x[A][1].substring(x[A+1][1].length)+x[A+1][1],x.splice(A+1,1),S=!0)),A++;S&&y(x)}var v=s;v.INSERT=o,v.DELETE=i,v.EQUAL=a,r.exports=v;function b(x,A){if(A===0)return[a,x];for(var I=0,P=0;P<x.length;P++){var O=x[P];if(O[0]===i||O[0]===a){var F=I+O[1].length;if(A===F)return[P+1,x];if(A<F){x=x.slice();var R=A-I,S=[O[0],O[1].slice(0,R)],E=[O[0],O[1].slice(R)];return x.splice(P,1,S,E),[P+1,x]}else I=F}}throw new Error("cursor_pos is out of bounds!")}function g(x,A){var I=b(x,A),P=I[1],O=I[0],F=P[O],R=P[O+1];if(F==null)return x;if(F[0]!==a)return x;if(R!=null&&F[1]+R[1]===R[1]+F[1])return P.splice(O,2,R,F),_(P,O,2);if(R!=null&&R[1].indexOf(F[1])===0){P.splice(O,2,[R[0],F[1]],[0,F[1]]);var S=R[1].slice(F[1].length);return S.length>0&&P.splice(O+2,0,[R[0],S]),_(P,O,3)}else return x}function m(x){for(var A=!1,I=function(R){return R.charCodeAt(0)>=56320&&R.charCodeAt(0)<=57343},P=function(R){return R.charCodeAt(R.length-1)>=55296&&R.charCodeAt(R.length-1)<=56319},O=2;O<x.length;O+=1)x[O-2][0]===a&&P(x[O-2][1])&&x[O-1][0]===i&&I(x[O-1][1])&&x[O][0]===o&&I(x[O][1])&&(A=!0,x[O-1][1]=x[O-2][1].slice(-1)+x[O-1][1],x[O][1]=x[O-2][1].slice(-1)+x[O][1],x[O-2][1]=x[O-2][1].slice(0,-1));if(!A)return x;for(var F=[],O=0;O<x.length;O+=1)x[O][1].length>0&&F.push(x[O]);return F}function _(x,A,I){for(var P=A+I-1;P>=0&&P>=A-1;P--)if(P+1<x.length){var O=x[P],F=x[P+1];O[0]===F[1]&&x.splice(P,2,[O[0],O[1]+F[1]])}return x}},function(r,n){n=r.exports=typeof Object.keys=="function"?Object.keys:i,n.shim=i;function i(o){var a=[];for(var s in o)a.push(s);return a}},function(r,n){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=r.exports=i?o:a,n.supported=o;function o(s){return Object.prototype.toString.call(s)=="[object Arguments]"}n.unsupported=a;function a(s){return s&&typeof s=="object"&&typeof s.length=="number"&&Object.prototype.hasOwnProperty.call(s,"callee")&&!Object.prototype.propertyIsEnumerable.call(s,"callee")||!1}},function(r,n){var i=Object.prototype.hasOwnProperty,o="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(o=!1));function s(c,p,d){this.fn=c,this.context=p,this.once=d||!1}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var p=[],d,f;if(this._eventsCount===0)return p;for(f in d=this._events)i.call(d,f)&&p.push(o?f.slice(1):f);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(d)):p},l.prototype.listeners=function(p,d){var f=o?o+p:p,u=this._events[f];if(d)return!!u;if(!u)return[];if(u.fn)return[u.fn];for(var y=0,v=u.length,b=new Array(v);y<v;y++)b[y]=u[y].fn;return b},l.prototype.emit=function(p,d,f,u,y,v){var b=o?o+p:p;if(!this._events[b])return!1;var g=this._events[b],m=arguments.length,_,x;if(g.fn){switch(g.once&&this.removeListener(p,g.fn,void 0,!0),m){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,u),!0;case 5:return g.fn.call(g.context,d,f,u,y),!0;case 6:return g.fn.call(g.context,d,f,u,y,v),!0}for(x=1,_=new Array(m-1);x<m;x++)_[x-1]=arguments[x];g.fn.apply(g.context,_)}else{var A=g.length,I;for(x=0;x<A;x++)switch(g[x].once&&this.removeListener(p,g[x].fn,void 0,!0),m){case 1:g[x].fn.call(g[x].context);break;case 2:g[x].fn.call(g[x].context,d);break;case 3:g[x].fn.call(g[x].context,d,f);break;case 4:g[x].fn.call(g[x].context,d,f,u);break;default:if(!_)for(I=1,_=new Array(m-1);I<m;I++)_[I-1]=arguments[I];g[x].fn.apply(g[x].context,_)}}return!0},l.prototype.on=function(p,d,f){var u=new s(d,f||this),y=o?o+p:p;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],u]:this._events[y].push(u):(this._events[y]=u,this._eventsCount++),this},l.prototype.once=function(p,d,f){var u=new s(d,f||this,!0),y=o?o+p:p;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],u]:this._events[y].push(u):(this._events[y]=u,this._eventsCount++),this},l.prototype.removeListener=function(p,d,f,u){var y=o?o+p:p;if(!this._events[y])return this;if(!d)return--this._eventsCount===0?this._events=new a:delete this._events[y],this;var v=this._events[y];if(v.fn)v.fn===d&&(!u||v.once)&&(!f||v.context===f)&&(--this._eventsCount===0?this._events=new a:delete this._events[y]);else{for(var b=0,g=[],m=v.length;b<m;b++)(v[b].fn!==d||u&&!v[b].once||f&&v[b].context!==f)&&g.push(v[b]);g.length?this._events[y]=g.length===1?g[0]:g:--this._eventsCount===0?this._events=new a:delete this._events[y]}return this},l.prototype.removeAllListeners=function(p){var d;return p?(d=o?o+p:p,this._events[d]&&(--this._eventsCount===0?this._events=new a:delete this._events[d])):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=o,l.EventEmitter=l,typeof r<"u"&&(r.exports=l)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},a=function(){function he(se,me){var Se=[],ve=!0,Me=!1,qe=void 0;try{for(var Ue=se[Symbol.iterator](),Ze;!(ve=(Ze=Ue.next()).done)&&(Se.push(Ze.value),!(me&&Se.length===me));ve=!0);}catch(ot){Me=!0,qe=ot}finally{try{!ve&&Ue.return&&Ue.return()}finally{if(Me)throw qe}}return Se}return function(se,me){if(Array.isArray(se))return se;if(Symbol.iterator in Object(se))return he(se,me);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function he(se,me){for(var Se=0;Se<me.length;Se++){var ve=me[Se];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(se,ve.key,ve)}}return function(se,me,Se){return me&&he(se.prototype,me),Se&&he(se,Se),se}}(),l=i(3),c=E(l),p=i(2),d=E(p),f=i(0),u=E(f),y=i(5),v=E(y),b=i(10),g=E(b),m=i(9),_=E(m),x=i(36),A=i(37),I=i(13),P=E(I),O=i(26),F=i(38),R=i(39),S=i(40);function E(he){return he&&he.__esModule?he:{default:he}}function j(he,se,me){return se in he?Object.defineProperty(he,se,{value:me,enumerable:!0,configurable:!0,writable:!0}):he[se]=me,he}function M(he,se){if(!(he instanceof se))throw new TypeError("Cannot call a class as a function")}function V(he,se){if(!he)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se&&(typeof se=="object"||typeof se=="function")?se:he}function ee(he,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);he.prototype=Object.create(se&&se.prototype,{constructor:{value:he,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(he,se):he.__proto__=se)}var te=(0,g.default)("quill:clipboard"),Q="__ql-matcher",J=[[Node.TEXT_NODE,Ke],[Node.TEXT_NODE,Fe],["br",be],[Node.ELEMENT_NODE,Fe],[Node.ELEMENT_NODE,de],[Node.ELEMENT_NODE,ye],[Node.ELEMENT_NODE,ne],[Node.ELEMENT_NODE,ae],["li",Oe],["b",re.bind(re,"bold")],["i",re.bind(re,"italic")],["style",Te]],W=[x.AlignAttribute,F.DirectionAttribute].reduce(function(he,se){return he[se.keyName]=se,he},{}),q=[x.AlignStyle,A.BackgroundStyle,O.ColorStyle,F.DirectionStyle,R.FontStyle,S.SizeStyle].reduce(function(he,se){return he[se.keyName]=se,he},{}),L=function(he){ee(se,he);function se(me,Se){M(this,se);var ve=V(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,me,Se));return ve.quill.root.addEventListener("paste",ve.onPaste.bind(ve)),ve.container=ve.quill.addContainer("ql-clipboard"),ve.container.setAttribute("contenteditable",!0),ve.container.setAttribute("tabindex",-1),ve.matchers=[],J.concat(ve.options.matchers).forEach(function(Me){var qe=a(Me,2),Ue=qe[0],Ze=qe[1];!Se.matchVisual&&Ze===ye||ve.addMatcher(Ue,Ze)}),ve}return s(se,[{key:"addMatcher",value:function(Se,ve){this.matchers.push([Se,ve])}},{key:"convert",value:function(Se){if(typeof Se=="string")return this.container.innerHTML=Se.replace(/\>\r?\n +\</g,"><"),this.convert();var ve=this.quill.getFormat(this.quill.selection.savedRange.index);if(ve[P.default.blotName]){var Me=this.container.innerText;return this.container.innerHTML="",new d.default().insert(Me,j({},P.default.blotName,ve[P.default.blotName]))}var qe=this.prepareMatching(),Ue=a(qe,2),Ze=Ue[0],ot=Ue[1],it=Y(this.container,Ze,ot);return H(it,`
`)&&it.ops[it.ops.length-1].attributes==null&&(it=it.compose(new d.default().retain(it.length()-1).delete(1))),te.log("convert",this.container.innerHTML,it),this.container.innerHTML="",it}},{key:"dangerouslyPasteHTML",value:function(Se,ve){var Me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof Se=="string")this.quill.setContents(this.convert(Se),ve),this.quill.setSelection(0,v.default.sources.SILENT);else{var qe=this.convert(ve);this.quill.updateContents(new d.default().retain(Se).concat(qe),Me),this.quill.setSelection(Se+qe.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(Se){var ve=this;if(!(Se.defaultPrevented||!this.quill.isEnabled())){var Me=this.quill.getSelection(),qe=new d.default().retain(Me.index),Ue=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){qe=qe.concat(ve.convert()).delete(Me.length),ve.quill.updateContents(qe,v.default.sources.USER),ve.quill.setSelection(qe.length()-Me.length,v.default.sources.SILENT),ve.quill.scrollingContainer.scrollTop=Ue,ve.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Se=this,ve=[],Me=[];return this.matchers.forEach(function(qe){var Ue=a(qe,2),Ze=Ue[0],ot=Ue[1];switch(Ze){case Node.TEXT_NODE:Me.push(ot);break;case Node.ELEMENT_NODE:ve.push(ot);break;default:[].forEach.call(Se.container.querySelectorAll(Ze),function(it){it[Q]=it[Q]||[],it[Q].push(ot)});break}}),[ve,Me]}}]),se}(_.default);L.DEFAULTS={matchers:[],matchVisual:!0};function D(he,se,me){return(typeof se>"u"?"undefined":o(se))==="object"?Object.keys(se).reduce(function(Se,ve){return D(Se,ve,se[ve])},he):he.reduce(function(Se,ve){return ve.attributes&&ve.attributes[se]?Se.push(ve):Se.insert(ve.insert,(0,c.default)({},j({},se,me),ve.attributes))},new d.default)}function U(he){if(he.nodeType!==Node.ELEMENT_NODE)return{};var se="__ql-computed-style";return he[se]||(he[se]=window.getComputedStyle(he))}function H(he,se){for(var me="",Se=he.ops.length-1;Se>=0&&me.length<se.length;--Se){var ve=he.ops[Se];if(typeof ve.insert!="string")break;me=ve.insert+me}return me.slice(-1*se.length)===se}function B(he){if(he.childNodes.length===0)return!1;var se=U(he);return["block","list-item"].indexOf(se.display)>-1}function Y(he,se,me){return he.nodeType===he.TEXT_NODE?me.reduce(function(Se,ve){return ve(he,Se)},new d.default):he.nodeType===he.ELEMENT_NODE?[].reduce.call(he.childNodes||[],function(Se,ve){var Me=Y(ve,se,me);return ve.nodeType===he.ELEMENT_NODE&&(Me=se.reduce(function(qe,Ue){return Ue(ve,qe)},Me),Me=(ve[Q]||[]).reduce(function(qe,Ue){return Ue(ve,qe)},Me)),Se.concat(Me)},new d.default):new d.default}function re(he,se,me){return D(me,he,!0)}function ne(he,se){var me=u.default.Attributor.Attribute.keys(he),Se=u.default.Attributor.Class.keys(he),ve=u.default.Attributor.Style.keys(he),Me={};return me.concat(Se).concat(ve).forEach(function(qe){var Ue=u.default.query(qe,u.default.Scope.ATTRIBUTE);Ue!=null&&(Me[Ue.attrName]=Ue.value(he),Me[Ue.attrName])||(Ue=W[qe],Ue!=null&&(Ue.attrName===qe||Ue.keyName===qe)&&(Me[Ue.attrName]=Ue.value(he)||void 0),Ue=q[qe],Ue!=null&&(Ue.attrName===qe||Ue.keyName===qe)&&(Ue=q[qe],Me[Ue.attrName]=Ue.value(he)||void 0))}),Object.keys(Me).length>0&&(se=D(se,Me)),se}function de(he,se){var me=u.default.query(he);if(me==null)return se;if(me.prototype instanceof u.default.Embed){var Se={},ve=me.value(he);ve!=null&&(Se[me.blotName]=ve,se=new d.default().insert(Se,me.formats(he)))}else typeof me.formats=="function"&&(se=D(se,me.blotName,me.formats(he)));return se}function be(he,se){return H(se,`
`)||se.insert(`
`),se}function Te(){return new d.default}function Oe(he,se){var me=u.default.query(he);if(me==null||me.blotName!=="list-item"||!H(se,`
`))return se;for(var Se=-1,ve=he.parentNode;!ve.classList.contains("ql-clipboard");)(u.default.query(ve)||{}).blotName==="list"&&(Se+=1),ve=ve.parentNode;return Se<=0?se:se.compose(new d.default().retain(se.length()-1).retain(1,{indent:Se}))}function Fe(he,se){return H(se,`
`)||(B(he)||se.length()>0&&he.nextSibling&&B(he.nextSibling))&&se.insert(`
`),se}function ye(he,se){if(B(he)&&he.nextElementSibling!=null&&!H(se,`

`)){var me=he.offsetHeight+parseFloat(U(he).marginTop)+parseFloat(U(he).marginBottom);he.nextElementSibling.offsetTop>he.offsetTop+me*1.5&&se.insert(`
`)}return se}function ae(he,se){var me={},Se=he.style||{};return Se.fontStyle&&U(he).fontStyle==="italic"&&(me.italic=!0),Se.fontWeight&&(U(he).fontWeight.startsWith("bold")||parseInt(U(he).fontWeight)>=700)&&(me.bold=!0),Object.keys(me).length>0&&(se=D(se,me)),parseFloat(Se.textIndent||0)>0&&(se=new d.default().insert("	").concat(se)),se}function Ke(he,se){var me=he.data;if(he.parentNode.tagName==="O:P")return se.insert(me.trim());if(me.trim().length===0&&he.parentNode.classList.contains("ql-clipboard"))return se;if(!U(he.parentNode).whiteSpace.startsWith("pre")){var Se=function(Me,qe){return qe=qe.replace(/[^\u00a0]/g,""),qe.length<1&&Me?" ":qe};me=me.replace(/\r\n/g," ").replace(/\n/g," "),me=me.replace(/\s\s+/g,Se.bind(Se,!0)),(he.previousSibling==null&&B(he.parentNode)||he.previousSibling!=null&&B(he.previousSibling))&&(me=me.replace(/^\s+/,Se.bind(Se,!1))),(he.nextSibling==null&&B(he.parentNode)||he.nextSibling!=null&&B(he.nextSibling))&&(me=me.replace(/\s+$/,Se.bind(Se,!1)))}return se.insert(me)}n.default=L,n.matchAttributor=ne,n.matchBlot=de,n.matchNewline=Fe,n.matchSpacing=ye,n.matchText=Ke},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function y(v,b){for(var g=0;g<b.length;g++){var m=b[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,b,g){return b&&y(v.prototype,b),g&&y(v,g),v}}(),a=function y(v,b,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,b);if(m===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,b,g)}else{if("value"in m)return m.value;var x=m.get;return x===void 0?void 0:x.call(g)}},s=i(6),l=c(s);function c(y){return y&&y.__esModule?y:{default:y}}function p(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var u=function(y){f(v,y);function v(){return p(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"optimize",value:function(g){a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,g),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return a(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(l.default);u.blotName="bold",u.tagName=["STRONG","B"],n.default=u},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var o=function(){function S(E,j){var M=[],V=!0,ee=!1,te=void 0;try{for(var Q=E[Symbol.iterator](),J;!(V=(J=Q.next()).done)&&(M.push(J.value),!(j&&M.length===j));V=!0);}catch(W){ee=!0,te=W}finally{try{!V&&Q.return&&Q.return()}finally{if(ee)throw te}}return M}return function(E,j){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return S(E,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function S(E,j){for(var M=0;M<j.length;M++){var V=j[M];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(E,V.key,V)}}return function(E,j,M){return j&&S(E.prototype,j),M&&S(E,M),E}}(),s=i(2),l=g(s),c=i(0),p=g(c),d=i(5),f=g(d),u=i(10),y=g(u),v=i(9),b=g(v);function g(S){return S&&S.__esModule?S:{default:S}}function m(S,E,j){return E in S?Object.defineProperty(S,E,{value:j,enumerable:!0,configurable:!0,writable:!0}):S[E]=j,S}function _(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}function x(S,E){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:S}function A(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(S,E):S.__proto__=E)}var I=(0,y.default)("quill:toolbar"),P=function(S){A(E,S);function E(j,M){_(this,E);var V=x(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,j,M));if(Array.isArray(V.options.container)){var ee=document.createElement("div");F(ee,V.options.container),j.container.parentNode.insertBefore(ee,j.container),V.container=ee}else typeof V.options.container=="string"?V.container=document.querySelector(V.options.container):V.container=V.options.container;if(!(V.container instanceof HTMLElement)){var te;return te=I.error("Container required for toolbar",V.options),x(V,te)}return V.container.classList.add("ql-toolbar"),V.controls=[],V.handlers={},Object.keys(V.options.handlers).forEach(function(Q){V.addHandler(Q,V.options.handlers[Q])}),[].forEach.call(V.container.querySelectorAll("button, select"),function(Q){V.attach(Q)}),V.quill.on(f.default.events.EDITOR_CHANGE,function(Q,J){Q===f.default.events.SELECTION_CHANGE&&V.update(J)}),V.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var Q=V.quill.selection.getRange(),J=o(Q,1),W=J[0];V.update(W)}),V}return a(E,[{key:"addHandler",value:function(M,V){this.handlers[M]=V}},{key:"attach",value:function(M){var V=this,ee=[].find.call(M.classList,function(Q){return Q.indexOf("ql-")===0});if(ee){if(ee=ee.slice(3),M.tagName==="BUTTON"&&M.setAttribute("type","button"),this.handlers[ee]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[ee]==null){I.warn("ignoring attaching to disabled format",ee,M);return}if(p.default.query(ee)==null){I.warn("ignoring attaching to nonexistent format",ee,M);return}}var te=M.tagName==="SELECT"?"change":"click";M.addEventListener(te,function(Q){var J=void 0;if(M.tagName==="SELECT"){if(M.selectedIndex<0)return;var W=M.options[M.selectedIndex];W.hasAttribute("selected")?J=!1:J=W.value||!1}else M.classList.contains("ql-active")?J=!1:J=M.value||!M.hasAttribute("value"),Q.preventDefault();V.quill.focus();var q=V.quill.selection.getRange(),L=o(q,1),D=L[0];if(V.handlers[ee]!=null)V.handlers[ee].call(V,J);else if(p.default.query(ee).prototype instanceof p.default.Embed){if(J=prompt("Enter "+ee),!J)return;V.quill.updateContents(new l.default().retain(D.index).delete(D.length).insert(m({},ee,J)),f.default.sources.USER)}else V.quill.format(ee,J,f.default.sources.USER);V.update(D)}),this.controls.push([ee,M])}}},{key:"update",value:function(M){var V=M==null?{}:this.quill.getFormat(M);this.controls.forEach(function(ee){var te=o(ee,2),Q=te[0],J=te[1];if(J.tagName==="SELECT"){var W=void 0;if(M==null)W=null;else if(V[Q]==null)W=J.querySelector("option[selected]");else if(!Array.isArray(V[Q])){var q=V[Q];typeof q=="string"&&(q=q.replace(/\"/g,'\\"')),W=J.querySelector('option[value="'+q+'"]')}W==null?(J.value="",J.selectedIndex=-1):W.selected=!0}else if(M==null)J.classList.remove("ql-active");else if(J.hasAttribute("value")){var L=V[Q]===J.getAttribute("value")||V[Q]!=null&&V[Q].toString()===J.getAttribute("value")||V[Q]==null&&!J.getAttribute("value");J.classList.toggle("ql-active",L)}else J.classList.toggle("ql-active",V[Q]!=null)})}}]),E}(b.default);P.DEFAULTS={};function O(S,E,j){var M=document.createElement("button");M.setAttribute("type","button"),M.classList.add("ql-"+E),j!=null&&(M.value=j),S.appendChild(M)}function F(S,E){Array.isArray(E[0])||(E=[E]),E.forEach(function(j){var M=document.createElement("span");M.classList.add("ql-formats"),j.forEach(function(V){if(typeof V=="string")O(M,V);else{var ee=Object.keys(V)[0],te=V[ee];Array.isArray(te)?R(M,ee,te):O(M,ee,te)}}),S.appendChild(M)})}function R(S,E,j){var M=document.createElement("select");M.classList.add("ql-"+E),j.forEach(function(V){var ee=document.createElement("option");V!==!1?ee.setAttribute("value",V):ee.setAttribute("selected","selected"),M.appendChild(ee)}),S.appendChild(M)}P.DEFAULTS={container:null,handlers:{clean:function(){var E=this,j=this.quill.getSelection();if(j!=null)if(j.length==0){var M=this.quill.getFormat();Object.keys(M).forEach(function(V){p.default.query(V,p.default.Scope.INLINE)!=null&&E.quill.format(V,!1)})}else this.quill.removeFormat(j,f.default.sources.USER)},direction:function(E){var j=this.quill.getFormat().align;E==="rtl"&&j==null?this.quill.format("align","right",f.default.sources.USER):!E&&j==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",E,f.default.sources.USER)},indent:function(E){var j=this.quill.getSelection(),M=this.quill.getFormat(j),V=parseInt(M.indent||0);if(E==="+1"||E==="-1"){var ee=E==="+1"?1:-1;M.direction==="rtl"&&(ee*=-1),this.quill.format("indent",V+ee,f.default.sources.USER)}},link:function(E){E===!0&&(E=prompt("Enter link URL:")),this.quill.format("link",E,f.default.sources.USER)},list:function(E){var j=this.quill.getSelection(),M=this.quill.getFormat(j);E==="check"?M.list==="checked"||M.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",E,f.default.sources.USER)}}},n.default=P,n.addControls=F},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function y(v,b){for(var g=0;g<b.length;g++){var m=b[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,b,g){return b&&y(v.prototype,b),g&&y(v,g),v}}(),a=function y(v,b,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,b);if(m===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,b,g)}else{if("value"in m)return m.value;var x=m.get;return x===void 0?void 0:x.call(g)}},s=i(28),l=c(s);function c(y){return y&&y.__esModule?y:{default:y}}function p(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var u=function(y){f(v,y);function v(b,g){p(this,v);var m=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b));return m.label.innerHTML=g,m.container.classList.add("ql-color-picker"),[].slice.call(m.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(_){_.classList.add("ql-primary")}),m}return o(v,[{key:"buildItem",value:function(g){var m=a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,g);return m.style.backgroundColor=g.getAttribute("value")||"",m}},{key:"selectItem",value:function(g,m){a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,g,m);var _=this.label.querySelector(".ql-color-label"),x=g&&g.getAttribute("data-value")||"";_&&(_.tagName==="line"?_.style.stroke=x:_.style.fill=x)}}]),v}(l.default);n.default=u},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function y(v,b){for(var g=0;g<b.length;g++){var m=b[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,b,g){return b&&y(v.prototype,b),g&&y(v,g),v}}(),a=function y(v,b,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,b);if(m===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,b,g)}else{if("value"in m)return m.value;var x=m.get;return x===void 0?void 0:x.call(g)}},s=i(28),l=c(s);function c(y){return y&&y.__esModule?y:{default:y}}function p(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var u=function(y){f(v,y);function v(b,g){p(this,v);var m=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b));return m.container.classList.add("ql-icon-picker"),[].forEach.call(m.container.querySelectorAll(".ql-picker-item"),function(_){_.innerHTML=g[_.getAttribute("data-value")||""]}),m.defaultItem=m.container.querySelector(".ql-selected"),m.selectItem(m.defaultItem),m}return o(v,[{key:"selectItem",value:function(g,m){a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,g,m),g=g||this.defaultItem,this.label.innerHTML=g.innerHTML}}]),v}(l.default);n.default=u},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function l(c,p){for(var d=0;d<p.length;d++){var f=p[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,p,d){return p&&l(c.prototype,p),d&&l(c,d),c}}();function a(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var s=function(){function l(c,p){var d=this;a(this,l),this.quill=c,this.boundsContainer=p||document.body,this.root=c.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return o(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(p){var d=p.left+p.width/2-this.root.offsetWidth/2,f=p.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var u=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),v=0;if(y.right>u.right&&(v=u.right-y.right,this.root.style.left=d+v+"px"),y.left<u.left&&(v=u.left-y.left,this.root.style.left=d+v+"px"),y.bottom>u.bottom){var b=y.bottom-y.top,g=p.bottom-p.top+b;this.root.style.top=f-g+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();n.default=s},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function R(S,E){var j=[],M=!0,V=!1,ee=void 0;try{for(var te=S[Symbol.iterator](),Q;!(M=(Q=te.next()).done)&&(j.push(Q.value),!(E&&j.length===E));M=!0);}catch(J){V=!0,ee=J}finally{try{!M&&te.return&&te.return()}finally{if(V)throw ee}}return j}return function(S,E){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return R(S,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function R(S,E,j){S===null&&(S=Function.prototype);var M=Object.getOwnPropertyDescriptor(S,E);if(M===void 0){var V=Object.getPrototypeOf(S);return V===null?void 0:R(V,E,j)}else{if("value"in M)return M.value;var ee=M.get;return ee===void 0?void 0:ee.call(j)}},s=function(){function R(S,E){for(var j=0;j<E.length;j++){var M=E[j];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(S,M.key,M)}}return function(S,E,j){return E&&R(S.prototype,E),j&&R(S,j),S}}(),l=i(3),c=_(l),p=i(8),d=_(p),f=i(43),u=_(f),y=i(27),v=_(y),b=i(15),g=i(41),m=_(g);function _(R){return R&&R.__esModule?R:{default:R}}function x(R,S){if(!(R instanceof S))throw new TypeError("Cannot call a class as a function")}function A(R,S){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:R}function I(R,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);R.prototype=Object.create(S&&S.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(R,S):R.__proto__=S)}var P=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],O=function(R){I(S,R);function S(E,j){x(this,S),j.modules.toolbar!=null&&j.modules.toolbar.container==null&&(j.modules.toolbar.container=P);var M=A(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,E,j));return M.quill.container.classList.add("ql-snow"),M}return s(S,[{key:"extendToolbar",value:function(j){j.container.classList.add("ql-snow"),this.buildButtons([].slice.call(j.container.querySelectorAll("button")),m.default),this.buildPickers([].slice.call(j.container.querySelectorAll("select")),m.default),this.tooltip=new F(this.quill,this.options.bounds),j.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(M,V){j.handlers.link.call(j,!V.format.link)})}}]),S}(u.default);O.DEFAULTS=(0,c.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(S){if(S){var E=this.quill.getSelection();if(E==null||E.length==0)return;var j=this.quill.getText(E);/^\S+@\S+\.\S+$/.test(j)&&j.indexOf("mailto:")!==0&&(j="mailto:"+j);var M=this.quill.theme.tooltip;M.edit("link",j)}else this.quill.format("link",!1)}}}}});var F=function(R){I(S,R);function S(E,j){x(this,S);var M=A(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,E,j));return M.preview=M.root.querySelector("a.ql-preview"),M}return s(S,[{key:"listen",value:function(){var j=this;a(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(M){j.root.classList.contains("ql-editing")?j.save():j.edit("link",j.preview.textContent),M.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(M){if(j.linkRange!=null){var V=j.linkRange;j.restoreFocus(),j.quill.formatText(V,"link",!1,d.default.sources.USER),delete j.linkRange}M.preventDefault(),j.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(M,V,ee){if(M!=null){if(M.length===0&&ee===d.default.sources.USER){var te=j.quill.scroll.descendant(v.default,M.index),Q=o(te,2),J=Q[0],W=Q[1];if(J!=null){j.linkRange=new b.Range(M.index-W,J.length());var q=v.default.formats(J.domNode);j.preview.textContent=q,j.preview.setAttribute("href",q),j.show(),j.position(j.quill.getBounds(j.linkRange));return}}else delete j.linkRange;j.hide()}})}},{key:"show",value:function(){a(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),S}(f.BaseTooltip);F.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=O},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(29),a=ve(o),s=i(36),l=i(38),c=i(64),p=i(65),d=ve(p),f=i(66),u=ve(f),y=i(67),v=ve(y),b=i(37),g=i(26),m=i(39),_=i(40),x=i(56),A=ve(x),I=i(68),P=ve(I),O=i(27),F=ve(O),R=i(69),S=ve(R),E=i(70),j=ve(E),M=i(71),V=ve(M),ee=i(72),te=ve(ee),Q=i(73),J=ve(Q),W=i(13),q=ve(W),L=i(74),D=ve(L),U=i(75),H=ve(U),B=i(57),Y=ve(B),re=i(41),ne=ve(re),de=i(28),be=ve(de),Te=i(59),Oe=ve(Te),Fe=i(60),ye=ve(Fe),ae=i(61),Ke=ve(ae),he=i(108),se=ve(he),me=i(62),Se=ve(me);function ve(Me){return Me&&Me.__esModule?Me:{default:Me}}a.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":s.AlignClass,"attributors/class/background":b.BackgroundClass,"attributors/class/color":g.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":m.FontClass,"attributors/class/size":_.SizeClass,"attributors/style/align":s.AlignStyle,"attributors/style/background":b.BackgroundStyle,"attributors/style/color":g.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":m.FontStyle,"attributors/style/size":_.SizeStyle},!0),a.default.register({"formats/align":s.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":c.IndentClass,"formats/background":b.BackgroundStyle,"formats/color":g.ColorStyle,"formats/font":m.FontClass,"formats/size":_.SizeClass,"formats/blockquote":d.default,"formats/code-block":q.default,"formats/header":u.default,"formats/list":v.default,"formats/bold":A.default,"formats/code":W.Code,"formats/italic":P.default,"formats/link":F.default,"formats/script":S.default,"formats/strike":j.default,"formats/underline":V.default,"formats/image":te.default,"formats/video":J.default,"formats/list/item":y.ListItem,"modules/formula":D.default,"modules/syntax":H.default,"modules/toolbar":Y.default,"themes/bubble":se.default,"themes/snow":Se.default,"ui/icons":ne.default,"ui/picker":be.default,"ui/icon-picker":ye.default,"ui/color-picker":Oe.default,"ui/tooltip":Ke.default},!0),n.default=a.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var o=function(){function v(b,g){for(var m=0;m<g.length;m++){var _=g[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,g,m){return g&&v(b.prototype,g),m&&v(b,m),b}}(),a=function v(b,g,m){b===null&&(b=Function.prototype);var _=Object.getOwnPropertyDescriptor(b,g);if(_===void 0){var x=Object.getPrototypeOf(b);return x===null?void 0:v(x,g,m)}else{if("value"in _)return _.value;var A=_.get;return A===void 0?void 0:A.call(m)}},s=i(0),l=c(s);function c(v){return v&&v.__esModule?v:{default:v}}function p(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function d(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function f(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var u=function(v){f(b,v);function b(){return p(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,[{key:"add",value:function(m,_){if(_==="+1"||_==="-1"){var x=this.value(m)||0;_=_==="+1"?x+1:x-1}return _===0?(this.remove(m),!0):a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"add",this).call(this,m,_)}},{key:"canAdd",value:function(m,_){return a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"canAdd",this).call(this,m,_)||a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"canAdd",this).call(this,m,parseInt(_))}},{key:"value",value:function(m){return parseInt(a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,m))||void 0}}]),b}(l.default.Attributor.Class),y=new u("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(4),a=s(o);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function c(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:f}function p(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}var d=function(f){p(u,f);function u(){return l(this,u),c(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(a.default);d.blotName="blockquote",d.tagName="blockquote",n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function u(y,v){for(var b=0;b<v.length;b++){var g=v[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}return function(y,v,b){return v&&u(y.prototype,v),b&&u(y,b),y}}(),a=i(4),s=l(a);function l(u){return u&&u.__esModule?u:{default:u}}function c(u,y){if(!(u instanceof y))throw new TypeError("Cannot call a class as a function")}function p(u,y){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:u}function d(u,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);u.prototype=Object.create(y&&y.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(u,y):u.__proto__=y)}var f=function(u){d(y,u);function y(){return c(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,null,[{key:"formats",value:function(b){return this.tagName.indexOf(b.tagName)+1}}]),y}(s.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],n.default=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var o=function(){function x(A,I){for(var P=0;P<I.length;P++){var O=I[P];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(A,O.key,O)}}return function(A,I,P){return I&&x(A.prototype,I),P&&x(A,P),A}}(),a=function x(A,I,P){A===null&&(A=Function.prototype);var O=Object.getOwnPropertyDescriptor(A,I);if(O===void 0){var F=Object.getPrototypeOf(A);return F===null?void 0:x(F,I,P)}else{if("value"in O)return O.value;var R=O.get;return R===void 0?void 0:R.call(P)}},s=i(0),l=u(s),c=i(4),p=u(c),d=i(25),f=u(d);function u(x){return x&&x.__esModule?x:{default:x}}function y(x,A,I){return A in x?Object.defineProperty(x,A,{value:I,enumerable:!0,configurable:!0,writable:!0}):x[A]=I,x}function v(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}function b(x,A){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:x}function g(x,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);x.prototype=Object.create(A&&A.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(x,A):x.__proto__=A)}var m=function(x){g(A,x);function A(){return v(this,A),b(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return o(A,[{key:"format",value:function(P,O){P===_.blotName&&!O?this.replaceWith(l.default.create(this.statics.scope)):a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,P,O)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(P,O){return this.parent.isolate(this.offset(this.parent),this.length()),P===this.parent.statics.blotName?(this.parent.replaceWith(P,O),this):(this.parent.unwrap(),a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,P,O))}}],[{key:"formats",value:function(P){return P.tagName===this.tagName?void 0:a(A.__proto__||Object.getPrototypeOf(A),"formats",this).call(this,P)}}]),A}(p.default);m.blotName="list-item",m.tagName="LI";var _=function(x){g(A,x),o(A,null,[{key:"create",value:function(P){var O=P==="ordered"?"OL":"UL",F=a(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,O);return(P==="checked"||P==="unchecked")&&F.setAttribute("data-checked",P==="checked"),F}},{key:"formats",value:function(P){if(P.tagName==="OL")return"ordered";if(P.tagName==="UL")return P.hasAttribute("data-checked")?P.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function A(I){v(this,A);var P=b(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,I)),O=function(R){if(R.target.parentNode===I){var S=P.statics.formats(I),E=l.default.find(R.target);S==="checked"?E.format("list","unchecked"):S==="unchecked"&&E.format("list","checked")}};return I.addEventListener("touchstart",O),I.addEventListener("mousedown",O),P}return o(A,[{key:"format",value:function(P,O){this.children.length>0&&this.children.tail.format(P,O)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(P,O){if(P instanceof m)a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,P,O);else{var F=O==null?this.length():O.offset(this),R=this.split(F);R.parent.insertBefore(P,R)}}},{key:"optimize",value:function(P){a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,P);var O=this.next;O!=null&&O.prev===this&&O.statics.blotName===this.statics.blotName&&O.domNode.tagName===this.domNode.tagName&&O.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(O.moveChildren(this),O.remove())}},{key:"replace",value:function(P){if(P.statics.blotName!==this.statics.blotName){var O=l.default.create(this.statics.defaultChild);P.moveChildren(O),this.appendChild(O)}a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replace",this).call(this,P)}}]),A}(f.default);_.blotName="list",_.scope=l.default.Scope.BLOCK_BLOT,_.tagName=["OL","UL"],_.defaultChild="list-item",_.allowedChildren=[m],n.ListItem=m,n.default=_},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(56),a=s(o);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function c(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:f}function p(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}var d=function(f){p(u,f);function u(){return l(this,u),c(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(a.default);d.blotName="italic",d.tagName=["EM","I"],n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function y(v,b){for(var g=0;g<b.length;g++){var m=b[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,b,g){return b&&y(v.prototype,b),g&&y(v,g),v}}(),a=function y(v,b,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,b);if(m===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,b,g)}else{if("value"in m)return m.value;var x=m.get;return x===void 0?void 0:x.call(g)}},s=i(6),l=c(s);function c(y){return y&&y.__esModule?y:{default:y}}function p(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var u=function(y){f(v,y);function v(){return p(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,null,[{key:"create",value:function(g){return g==="super"?document.createElement("sup"):g==="sub"?document.createElement("sub"):a(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,g)}},{key:"formats",value:function(g){if(g.tagName==="SUB")return"sub";if(g.tagName==="SUP")return"super"}}]),v}(l.default);u.blotName="script",u.tagName=["SUB","SUP"],n.default=u},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(6),a=s(o);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function c(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:f}function p(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}var d=function(f){p(u,f);function u(){return l(this,u),c(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(a.default);d.blotName="strike",d.tagName="S",n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(6),a=s(o);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function c(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:f}function p(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}var d=function(f){p(u,f);function u(){return l(this,u),c(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(a.default);d.blotName="underline",d.tagName="U",n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function b(g,m){for(var _=0;_<m.length;_++){var x=m[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,_){return m&&b(g.prototype,m),_&&b(g,_),g}}(),a=function b(g,m,_){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,m);if(x===void 0){var A=Object.getPrototypeOf(g);return A===null?void 0:b(A,m,_)}else{if("value"in x)return x.value;var I=x.get;return I===void 0?void 0:I.call(_)}},s=i(0),l=p(s),c=i(27);function p(b){return b&&b.__esModule?b:{default:b}}function d(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function f(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function u(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var y=["alt","height","width"],v=function(b){u(g,b);function g(){return d(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"format",value:function(_,x){y.indexOf(_)>-1?x?this.domNode.setAttribute(_,x):this.domNode.removeAttribute(_):a(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,_,x)}}],[{key:"create",value:function(_){var x=a(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,_);return typeof _=="string"&&x.setAttribute("src",this.sanitize(_)),x}},{key:"formats",value:function(_){return y.reduce(function(x,A){return _.hasAttribute(A)&&(x[A]=_.getAttribute(A)),x},{})}},{key:"match",value:function(_){return/\.(jpe?g|gif|png)$/.test(_)||/^data:image\/.+;base64/.test(_)}},{key:"sanitize",value:function(_){return(0,c.sanitize)(_,["http","https","data"])?_:"//:0"}},{key:"value",value:function(_){return _.getAttribute("src")}}]),g}(l.default.Embed);v.blotName="image",v.tagName="IMG",n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function b(g,m){for(var _=0;_<m.length;_++){var x=m[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,_){return m&&b(g.prototype,m),_&&b(g,_),g}}(),a=function b(g,m,_){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,m);if(x===void 0){var A=Object.getPrototypeOf(g);return A===null?void 0:b(A,m,_)}else{if("value"in x)return x.value;var I=x.get;return I===void 0?void 0:I.call(_)}},s=i(4),l=i(27),c=p(l);function p(b){return b&&b.__esModule?b:{default:b}}function d(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function f(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function u(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var y=["height","width"],v=function(b){u(g,b);function g(){return d(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"format",value:function(_,x){y.indexOf(_)>-1?x?this.domNode.setAttribute(_,x):this.domNode.removeAttribute(_):a(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,_,x)}}],[{key:"create",value:function(_){var x=a(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,_);return x.setAttribute("frameborder","0"),x.setAttribute("allowfullscreen",!0),x.setAttribute("src",this.sanitize(_)),x}},{key:"formats",value:function(_){return y.reduce(function(x,A){return _.hasAttribute(A)&&(x[A]=_.getAttribute(A)),x},{})}},{key:"sanitize",value:function(_){return c.default.sanitize(_)}},{key:"value",value:function(_){return _.getAttribute("src")}}]),g}(s.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var o=function(){function _(x,A){for(var I=0;I<A.length;I++){var P=A[I];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}return function(x,A,I){return A&&_(x.prototype,A),I&&_(x,I),x}}(),a=function _(x,A,I){x===null&&(x=Function.prototype);var P=Object.getOwnPropertyDescriptor(x,A);if(P===void 0){var O=Object.getPrototypeOf(x);return O===null?void 0:_(O,A,I)}else{if("value"in P)return P.value;var F=P.get;return F===void 0?void 0:F.call(I)}},s=i(35),l=u(s),c=i(5),p=u(c),d=i(9),f=u(d);function u(_){return _&&_.__esModule?_:{default:_}}function y(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}function v(_,x){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:_}function b(_,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);_.prototype=Object.create(x&&x.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(_,x):_.__proto__=x)}var g=function(_){b(x,_);function x(){return y(this,x),v(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return o(x,null,[{key:"create",value:function(I){var P=a(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,I);return typeof I=="string"&&(window.katex.render(I,P,{throwOnError:!1,errorColor:"#f00"}),P.setAttribute("data-value",I)),P}},{key:"value",value:function(I){return I.getAttribute("data-value")}}]),x}(l.default);g.blotName="formula",g.className="ql-formula",g.tagName="SPAN";var m=function(_){b(x,_),o(x,null,[{key:"register",value:function(){p.default.register(g,!0)}}]);function x(){y(this,x);var A=v(this,(x.__proto__||Object.getPrototypeOf(x)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return A}return x}(f.default);n.FormulaBlot=g,n.default=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var o=function(){function I(P,O){for(var F=0;F<O.length;F++){var R=O[F];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(P,R.key,R)}}return function(P,O,F){return O&&I(P.prototype,O),F&&I(P,F),P}}(),a=function I(P,O,F){P===null&&(P=Function.prototype);var R=Object.getOwnPropertyDescriptor(P,O);if(R===void 0){var S=Object.getPrototypeOf(P);return S===null?void 0:I(S,O,F)}else{if("value"in R)return R.value;var E=R.get;return E===void 0?void 0:E.call(F)}},s=i(0),l=v(s),c=i(5),p=v(c),d=i(9),f=v(d),u=i(13),y=v(u);function v(I){return I&&I.__esModule?I:{default:I}}function b(I,P){if(!(I instanceof P))throw new TypeError("Cannot call a class as a function")}function g(I,P){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:I}function m(I,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);I.prototype=Object.create(P&&P.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(I,P):I.__proto__=P)}var _=function(I){m(P,I);function P(){return b(this,P),g(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return o(P,[{key:"replaceWith",value:function(F){this.domNode.textContent=this.domNode.textContent,this.attach(),a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replaceWith",this).call(this,F)}},{key:"highlight",value:function(F){var R=this.domNode.textContent;this.cachedText!==R&&((R.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=F(R),this.domNode.normalize(),this.attach()),this.cachedText=R)}}]),P}(y.default);_.className="ql-syntax";var x=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),A=function(I){m(P,I),o(P,null,[{key:"register",value:function(){p.default.register(x,!0),p.default.register(_,!0)}}]);function P(O,F){b(this,P);var R=g(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,O,F));if(typeof R.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var S=null;return R.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(S),S=setTimeout(function(){R.highlight(),S=null},R.options.interval)}),R.highlight(),R}return o(P,[{key:"highlight",value:function(){var F=this;if(!this.quill.selection.composing){this.quill.update(p.default.sources.USER);var R=this.quill.getSelection();this.quill.scroll.descendants(_).forEach(function(S){S.highlight(F.options.highlight)}),this.quill.update(p.default.sources.SILENT),R!=null&&this.quill.setSelection(R,p.default.sources.SILENT)}}}]),P}(f.default);A.DEFAULTS={highlight:function(){return window.hljs==null?null:function(I){var P=window.hljs.highlightAuto(I);return P.value}}(),interval:1e3},n.CodeBlock=_,n.CodeToken=x,n.default=A},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var o=function P(O,F,R){O===null&&(O=Function.prototype);var S=Object.getOwnPropertyDescriptor(O,F);if(S===void 0){var E=Object.getPrototypeOf(O);return E===null?void 0:P(E,F,R)}else{if("value"in S)return S.value;var j=S.get;return j===void 0?void 0:j.call(R)}},a=function(){function P(O,F){for(var R=0;R<F.length;R++){var S=F[R];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(O,S.key,S)}}return function(O,F,R){return F&&P(O.prototype,F),R&&P(O,R),O}}(),s=i(3),l=b(s),c=i(8),p=b(c),d=i(43),f=b(d),u=i(15),y=i(41),v=b(y);function b(P){return P&&P.__esModule?P:{default:P}}function g(P,O){if(!(P instanceof O))throw new TypeError("Cannot call a class as a function")}function m(P,O){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:P}function _(P,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);P.prototype=Object.create(O&&O.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(P,O):P.__proto__=O)}var x=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],A=function(P){_(O,P);function O(F,R){g(this,O),R.modules.toolbar!=null&&R.modules.toolbar.container==null&&(R.modules.toolbar.container=x);var S=m(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,F,R));return S.quill.container.classList.add("ql-bubble"),S}return a(O,[{key:"extendToolbar",value:function(R){this.tooltip=new I(this.quill,this.options.bounds),this.tooltip.root.appendChild(R.container),this.buildButtons([].slice.call(R.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(R.container.querySelectorAll("select")),v.default)}}]),O}(f.default);A.DEFAULTS=(0,l.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(O){O?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var I=function(P){_(O,P);function O(F,R){g(this,O);var S=m(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,F,R));return S.quill.on(p.default.events.EDITOR_CHANGE,function(E,j,M,V){if(E===p.default.events.SELECTION_CHANGE)if(j!=null&&j.length>0&&V===p.default.sources.USER){S.show(),S.root.style.left="0px",S.root.style.width="",S.root.style.width=S.root.offsetWidth+"px";var ee=S.quill.getLines(j.index,j.length);if(ee.length===1)S.position(S.quill.getBounds(j));else{var te=ee[ee.length-1],Q=S.quill.getIndex(te),J=Math.min(te.length()-1,j.index+j.length-Q),W=S.quill.getBounds(new u.Range(Q,J));S.position(W)}}else document.activeElement!==S.textbox&&S.quill.hasFocus()&&S.hide()}),S}return a(O,[{key:"listen",value:function(){var R=this;o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){R.root.classList.remove("ql-editing")}),this.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!R.root.classList.contains("ql-hidden")){var S=R.quill.getSelection();S!=null&&R.position(R.quill.getBounds(S))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(R){var S=o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"position",this).call(this,R),E=this.root.querySelector(".ql-tooltip-arrow");if(E.style.marginLeft="",S===0)return S;E.style.marginLeft=-1*S-E.offsetWidth/2+"px"}}]),O}(d.BaseTooltip);I.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=I,n.default=A},function(r,n,i){r.exports=i(63)}]).default})})(t_);var Z7=t_.exports,eP=Yn&&Yn.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dd=Yn&&Yn.__assign||function(){return Dd=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Dd.apply(this,arguments)},tP=Yn&&Yn.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n},dh=Yn&&Yn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Hi=dh(ke),rP=dh(xg),bu=dh(Q7),M2=dh(Z7),nP=function(t){eP(e,t);function e(r){var n=t.call(this,r)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(o,a,s,l){var c,p,d,f;o==="text-change"?(p=(c=n).onEditorChangeText)===null||p===void 0||p.call(c,n.editor.root.innerHTML,a,l,n.unprivilegedEditor):o==="selection-change"&&((f=(d=n).onEditorChangeSelection)===null||f===void 0||f.call(d,a,l,n.unprivilegedEditor))};var i=n.isControlled()?r.value:r.defaultValue;return n.value=i??"",n}return e.prototype.validateProps=function(r){var n;if(Hi.default.Children.count(r.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Hi.default.Children.count(r.children)){var i=Hi.default.Children.only(r.children);if(((n=i)===null||n===void 0?void 0:n.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&r.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(r,n){var i=this,o;if(this.validateProps(r),!this.editor||this.state.generation!==n.generation)return!0;if("value"in r){var a=this.getEditorContents(),s=(o=r.value,o??"");this.isEqualValue(s,a)||this.setEditorContents(this.editor,s)}return r.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,r.readOnly),tP(this.cleanProps,this.dirtyProps).some(function(l){return!bu.default(r[l],i.props[l])})},e.prototype.shouldComponentRegenerate=function(r){var n=this;return this.dirtyProps.some(function(i){return!bu.default(r[i],n.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(r,n){var i=this;if(this.editor&&this.shouldComponentRegenerate(r)){var o=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:o,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){var s=this.regenerationSnapshot,o=s.delta,l=s.selection;delete this.regenerationSnapshot,this.instantiateEditor();var c=this.editor;c.setContents(o),F2(function(){return i.setEditorSelection(c,l)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(r,n){var i=new M2.default(r,n);return n.tabIndex!=null&&this.setEditorTabIndex(i,n.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(r){this.unprivilegedEditor=this.makeUnprivilegedEditor(r),r.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(r){r.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(r){return r&&r.ops},e.prototype.isEqualValue=function(r,n){return this.isDelta(r)&&this.isDelta(n)?bu.default(r.ops,n.ops):bu.default(r,n)},e.prototype.setEditorContents=function(r,n){var i=this;this.value=n;var o=this.getEditorSelection();typeof n=="string"?r.setContents(r.clipboard.convert(n)):r.setContents(n),F2(function(){return i.setEditorSelection(r,o)})},e.prototype.setEditorSelection=function(r,n){if(this.selection=n,n){var i=r.getLength();n.index=Math.max(0,Math.min(n.index,i-1)),n.length=Math.max(0,Math.min(n.length,i-1-n.index)),r.setSelection(n)}},e.prototype.setEditorTabIndex=function(r,n){var i,o;!((o=(i=r)===null||i===void 0?void 0:i.scroll)===null||o===void 0)&&o.domNode&&(r.scroll.domNode.tabIndex=n)},e.prototype.setEditorReadOnly=function(r,n){n?r.disable():r.enable()},e.prototype.makeUnprivilegedEditor=function(r){var n=r;return{getHTML:function(){return n.root.innerHTML},getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var r=rP.default.findDOMNode(this.editingArea);if(!r)throw new Error("Cannot find element for editing area");if(r.nodeType===3)throw new Error("Editing area cannot be a text node");return r},e.prototype.renderEditingArea=function(){var r=this,n=this.props,i=n.children,o=n.preserveWhitespace,a=this.state.generation,s={key:a,ref:function(l){r.editingArea=l}};return Hi.default.Children.count(i)?Hi.default.cloneElement(Hi.default.Children.only(i),s):o?Hi.default.createElement("pre",Dd({},s)):Hi.default.createElement("div",Dd({},s))},e.prototype.render=function(){var r;return Hi.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(r=this.props.className,r??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(r,n,i,o){var a,s;if(this.editor){var l=this.isDelta(this.value)?o.getContents():o.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=l,(s=(a=this.props).onChange)===null||s===void 0||s.call(a,r,n,i,o))}},e.prototype.onEditorChangeSelection=function(r,n,i){var o,a,s,l,c,p;if(this.editor){var d=this.getEditorSelection(),f=!d&&r,u=d&&!r;bu.default(r,d)||(this.selection=r,(a=(o=this.props).onChangeSelection)===null||a===void 0||a.call(o,r,n,i),f?(l=(s=this.props).onFocus)===null||l===void 0||l.call(s,r,n,i):u&&((p=(c=this.props).onBlur)===null||p===void 0||p.call(c,d,n,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=M2.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(Hi.default.Component);function F2(t){Promise.resolve().then(t)}var iP=nP;const r_=E1(iP),zo=r_.Quill;if(zo){const t=zo.import("formats/image"),e=t.formats;t.formats=function(s){const l=e.call(this,s);return s.style.width&&(l.width=s.style.width),s.style.float&&(l.float=s.style.float),s.style.margin&&(l.margin=s.style.margin),l};const r=zo.import("parchment"),n=new r.Attributor.Style("width","width"),i=new r.Attributor.Style("float","float"),o=new r.Attributor.Style("margin","margin");zo.register(n,!0),zo.register(i,!0),zo.register(o,!0);const a=zo.import("attributors/style/align");zo.register(a,!0)}const oP={serif:"font-serif",sans:"font-sans",mono:"font-mono"},aP=ke.forwardRef(({entry:t,onSave:e,onWordCountChange:r,onCharacterCountChange:n,editorFont:i},o)=>{const[a,s]=ke.useState(""),[l,c]=ke.useState(""),[p,d]=ke.useState(new Date),f=ke.useRef(null),u=ke.useRef("INITIAL_MOUNT"),{addToast:y}=nh();ke.useEffect(()=>{const m=(t==null?void 0:t.id)||"draft";u.current!==m&&(u.current=m,t?(s(t.title),c(t.content),d(new Date(t.created_at))):(s("Today's diary entry..."),c(""),d(new Date)))},[t]),ke.useEffect(()=>{const m=l.replace(/<[^>]*>?/gm,""),_=m.trim().split(/\s+/).filter(Boolean),x=_.length===1&&_[0]===""?0:_.length;r(x),n(m.length)},[l,r,n]);const v=ke.useCallback(()=>{const m=!l||l.replace(/<(.|\n)*?>/g,"").trim().length===0;if(a.trim()===""||m){y("Please provide a title and some content for your entry.","error");return}e({...t||{},title:a,content:l,created_at:p.toISOString(),tags:t==null?void 0:t.tags,mood:t==null?void 0:t.mood})},[a,l,p,t,e,y]);ke.useImperativeHandle(o,()=>({save:v,getEditor:()=>{var m;return(m=f.current)==null?void 0:m.getEditor()}}),[v]);const b=ke.useMemo(()=>({toolbar:!1}),[]),g=oP[i];return T.jsxs("div",{className:`h-full flex flex-col paper-canvas rounded-lg overflow-hidden ${g}`,children:[T.jsx("div",{className:"p-4 sm:p-6 md:px-8 border-b border-slate-200/50 dark:border-slate-700/50 flex-shrink-0",children:T.jsx("input",{type:"text",value:a,onChange:m=>s(m.target.value),className:"w-full text-3xl font-bold bg-transparent focus:outline-none focus:ring-0 border-none p-0 text-slate-800 dark:text-slate-100 placeholder:text-slate-400",placeholder:"Today's diary entry..."})}),T.jsx("div",{className:"flex-grow overflow-y-auto",children:T.jsx(r_,{ref:f,theme:"snow",value:l,onChange:c,className:"prose-editor",placeholder:"Start writing here...",modules:b})})]})}),B2=t=>new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().split("T")[0],sP=({entries:t,onSelectDate:e,onBack:r})=>{const[n,i]=ke.useState(new Date),o=ke.useMemo(()=>{const p=new Set;return t.forEach(d=>{p.add(B2(new Date(d.created_at)))}),p},[t]),a=p=>{i(d=>{const f=new Date(d);return f.setMonth(f.getMonth()+p),f})},s=()=>T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("button",{onClick:()=>a(-1),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:"<"}),T.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200",children:n.toLocaleString("default",{month:"long",year:"numeric"})}),T.jsx("button",{onClick:()=>a(1),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:">"})]}),l=()=>{const p=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return T.jsx("div",{className:"grid grid-cols-7 gap-1 text-center font-semibold text-slate-500 dark:text-slate-400 text-sm",children:p.map(d=>T.jsx("div",{children:d},d))})},c=()=>{const p=new Date(n.getFullYear(),n.getMonth(),1),d=new Date(n.getFullYear(),n.getMonth()+1,0),f=new Date(p);f.setDate(f.getDate()-p.getDay());const u=new Date(d);u.setDate(u.getDate()+(6-d.getDay()));const y=[];let v=[],b=f;for(;b<=u;){for(let g=0;g<7;g++){const m=new Date(b),_=B2(m),x=o.has(_);v.push(T.jsxs("div",{className:`p-1 h-20 flex flex-col items-center justify-center rounded-lg transition-colors ${m.getMonth()!==n.getMonth()?"text-slate-300 dark:text-slate-600":"text-slate-700 dark:text-slate-300"} ${x?"cursor-pointer bg-indigo-100 hover:bg-indigo-200 dark:bg-indigo-500/20 dark:hover:bg-indigo-500/30":""}`,onClick:x?()=>e(m):void 0,children:[T.jsx("span",{className:`text-sm ${new Date().toDateString()===m.toDateString()?"bg-indigo-500 text-white rounded-full h-6 w-6 flex items-center justify-center":""}`,children:m.getDate()}),x&&T.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 dark:bg-indigo-400 rounded-full mt-1"})]},b.toString())),b.setDate(b.getDate()+1)}y.push(T.jsx("div",{className:"grid grid-cols-7 gap-1",children:v},b.toString())),v=[]}return T.jsx("div",{className:"space-y-1",children:y})};return T.jsxs("div",{className:"animate-fade-in",children:[T.jsxs("button",{onClick:r,className:"mb-6 flex items-center text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors group",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 transform group-hover:-translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Timeline"]}),T.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 sm:p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[s(),l(),T.jsx("div",{className:"mt-2",children:c()})]})]})},lP=["","","","","","","",""],uP=({entries:t,onSelectEntry:e,onBack:r})=>{const[n,i]=ke.useState(""),[o,a]=ke.useState(null),[s,l]=ke.useState([]),[c,p]=ke.useState(""),[d,f]=ke.useState(""),[u,y]=ke.useState(!1),[v,b]=ke.useState(!1),[g,m]=ke.useState(!1),_=ke.useRef(null),x=ke.useRef(null),A=ke.useRef(null);ke.useEffect(()=>{const S=E=>{_.current&&!_.current.contains(E.target)&&y(!1),x.current&&!x.current.contains(E.target)&&b(!1),A.current&&!A.current.contains(E.target)&&m(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const I=ke.useMemo(()=>{const S=new Set;return t.forEach(E=>{var j;(j=E.tags)==null||j.forEach(M=>S.add(M))}),Array.from(S).sort()},[t]),P=S=>new DOMParser().parseFromString(S,"text/html").body.textContent||"",O=ke.useMemo(()=>n.trim()!==""||o||s.length>0||c||d?t.filter(E=>{const j=n.toLowerCase(),M=n.trim()===""||(E.title||"").toLowerCase().includes(j)||P(E.content||"").toLowerCase().includes(j),V=!o||E.mood===o,ee=s.length===0||s.every(Q=>{var J;return(J=E.tags)==null?void 0:J.includes(Q)});let te=!0;if(c||d){const Q=new Date(E.created_at);if(Q.setHours(0,0,0,0),c){const J=new Date(c+"T00:00:00");Q<J&&(te=!1)}if(d){const J=new Date(d+"T00:00:00");Q>J&&(te=!1)}}return M&&V&&ee&&te}):[],[t,n,o,s,c,d]),F=S=>{l(E=>E.includes(S)?E.filter(j=>j!==S):[...E,S])},R=n.trim()!==""||o||s.length>0||c||d;return T.jsxs("div",{className:"space-y-6 animate-fade-in",children:[T.jsxs("button",{onClick:r,className:"flex items-center text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors group",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 transform group-hover:-translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Timeline"]}),T.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[T.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Search Past Entries"}),T.jsxs("div",{className:"relative",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400 absolute left-4 top-1/2 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),T.jsx("input",{type:"search",placeholder:"Search by keywords, title, or date...",value:n,onChange:S=>i(S.target.value),className:"w-full pl-11 pr-4 py-3 border border-slate-300 dark:border-slate-600 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base dark:bg-slate-700 dark:text-slate-200 dark:placeholder-slate-400","aria-label":"Search diary entries"})]}),T.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[T.jsxs("div",{className:"relative",ref:_,children:[T.jsxs("button",{onClick:()=>y(S=>!S),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-slate-100 dark:bg-slate-700 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),T.jsx("span",{children:"Date Range"})]}),u&&T.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-slate-800 p-4 rounded-lg shadow-xl border dark:border-slate-700 z-10 w-64 space-y-3",children:[T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"From"}),T.jsx("input",{type:"date",value:c,onChange:S=>p(S.target.value),className:"w-full mt-1 border border-slate-300 rounded-md p-1.5 text-sm dark:bg-slate-700 dark:border-slate-600 dark:[color-scheme:dark]"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"To"}),T.jsx("input",{type:"date",value:d,onChange:S=>f(S.target.value),className:"w-full mt-1 border border-slate-300 rounded-md p-1.5 text-sm dark:bg-slate-700 dark:border-slate-600 dark:[color-scheme:dark]"})]})]})]}),T.jsxs("div",{className:"relative",ref:x,children:[T.jsxs("button",{onClick:()=>b(S=>!S),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-slate-100 dark:bg-slate-700 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600",children:[o?T.jsx("span",{className:"text-lg",children:o}):T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-.464 5.535a.5.5 S0 01.708 0 5 5 0 01-6.488 0 .5.5 0 01.708-.707A4 4 0 0013 12.5a.5.5 0 01.535.464z",clipRule:"evenodd"})}),T.jsx("span",{children:"Mood"})]}),v&&T.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-slate-800 p-2 rounded-lg shadow-xl border dark:border-slate-700 z-10 grid grid-cols-4 gap-2 w-64",children:lP.map(S=>T.jsx("button",{type:"button",onClick:()=>{a(S===o?null:S),b(!1)},className:`text-3xl p-2 rounded-md transition-all ${o===S?"bg-indigo-100 dark:bg-indigo-500/50 scale-110":"hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:S},S))})]}),T.jsxs("div",{className:"relative",ref:A,children:[T.jsxs("button",{onClick:()=>m(S=>!S),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-slate-100 dark:bg-slate-700 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{d:"M5.5 16a3.5 3.5 0 01-3.5-3.5V5.5A3.5 3.5 0 015.5 2h5.086a2 2 0 011.414.586l4.414 4.414a2 2 0 01.586 1.414V12.5A3.5 3.5 0 0113.5 16h-8z"})}),T.jsx("span",{children:"Tags"})]}),g&&T.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-slate-800 p-3 rounded-lg shadow-xl border dark:border-slate-700 z-10 w-64 max-h-60 overflow-y-auto",children:I.length>0?T.jsx("div",{className:"flex flex-col gap-2",children:I.map(S=>T.jsxs("label",{className:"flex items-center gap-2 p-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer",children:[T.jsx("input",{type:"checkbox",checked:s.includes(S),onChange:()=>F(S),className:"h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-slate-300 dark:border-slate-600 dark:bg-slate-900 dark:checked:bg-indigo-500"}),T.jsx("span",{className:"text-sm",children:S})]},S))}):T.jsx("p",{className:"text-sm text-slate-500",children:"No tags found."})})]})]})]}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Search Results"}),n.length>0&&T.jsx("p",{className:"text-xs text-slate-500 mb-4 bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded border border-yellow-200 dark:border-yellow-800",children:"Note: Text search only searches entries that have been viewed (decrypted) in this session. Tags and Moods search all entries."}),R?O.length>0?T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(S=>T.jsxs("div",{onClick:()=>e(S.id),className:"bg-white dark:bg-slate-800 p-5 rounded-lg shadow-sm hover:shadow-lg transition-shadow duration-300 cursor-pointer border border-slate-200 dark:border-slate-700 flex flex-col",children:[T.jsxs("div",{className:"flex justify-between items-start gap-3",children:[S.isDecrypted?T.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100 line-clamp-1",children:S.title}):T.jsx("div",{className:"h-6 bg-slate-200 dark:bg-slate-700 rounded w-3/4 animate-pulse"}),S.mood&&T.jsx("span",{className:"text-2xl","aria-label":`Mood: ${S.mood}`,children:S.mood})]}),T.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1 mb-3",title:new Date(S.created_at).toLocaleString(),children:Db(S.created_at)}),T.jsx("div",{className:"flex-grow",children:S.isDecrypted?T.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 line-clamp-3",children:P(S.content)}):T.jsxs("div",{className:"space-y-2 animate-pulse",children:[T.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-full"}),T.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-5/6"})]})})]},S.id))}):T.jsxs("div",{className:"text-center py-16",children:[T.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-300",children:"No Entries Found"}),T.jsx("p",{className:"mt-2 text-slate-500 dark:text-slate-400",children:"Try adjusting your search or filter criteria."})]}):T.jsx("div",{className:"text-center py-16",children:T.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Use the search bar or filters above to find your entries."})})]})]})},cP="modulepreload",fP=function(t){return"/"+t},q2={},g1=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),s=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=fP(l),l in q2)return;q2[l]=!0;const c=l.endsWith(".css"),p=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":cP,c||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),c)return new Promise((f,u)=>{d.addEventListener("load",f),d.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return i.then(a=>{for(const s of a||[])s.status==="rejected"&&o(s.reason);return e().catch(o)})};function Ut(t){"@babel/helpers - typeof";return Ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(t)}var gn=Uint8Array,Xn=Uint16Array,Bg=Int32Array,hh=new gn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ph=new gn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),m1=new gn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),n_=function(t,e){for(var r=new Xn(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new Bg(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return{b:r,r:i}},i_=n_(hh,2),o_=i_.b,v1=i_.r;o_[28]=258,v1[258]=28;var a_=n_(ph,0),dP=a_.b,U2=a_.r,y1=new Xn(32768);for(var or=0;or<32768;++or){var $o=(or&43690)>>1|(or&21845)<<1;$o=($o&52428)>>2|($o&13107)<<2,$o=($o&61680)>>4|($o&3855)<<4,y1[or]=(($o&65280)>>8|($o&255)<<8)>>1}var Xi=function(t,e,r){for(var n=t.length,i=0,o=new Xn(e);i<n;++i)t[i]&&++o[t[i]-1];var a=new Xn(e);for(i=1;i<e;++i)a[i]=a[i-1]+o[i-1]<<1;var s;if(r){s=new Xn(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var c=i<<4|t[i],p=e-t[i],d=a[t[i]-1]++<<p,f=d|(1<<p)-1;d<=f;++d)s[y1[d]>>l]=c}else for(s=new Xn(n),i=0;i<n;++i)t[i]&&(s[i]=y1[a[t[i]-1]++]>>15-t[i]);return s},ua=new gn(288);for(var or=0;or<144;++or)ua[or]=8;for(var or=144;or<256;++or)ua[or]=9;for(var or=256;or<280;++or)ua[or]=7;for(var or=280;or<288;++or)ua[or]=8;var sc=new gn(32);for(var or=0;or<32;++or)sc[or]=5;var hP=Xi(ua,9,0),pP=Xi(ua,9,1),gP=Xi(sc,5,0),mP=Xi(sc,5,1),Wp=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},ki=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},Vp=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},qg=function(t){return(t+7)/8|0},s_=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new gn(t.subarray(e,r))},vP=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ti=function(t,e,r){var n=new Error(e||vP[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Ti),!r)throw n;return n},yP=function(t,e,r,n){var i=t.length,o=0;if(!i||e.f&&!e.l)return r||new gn(0);var a=!r,s=a||e.i!=2,l=e.i;a&&(r=new gn(i*3));var c=function(be){var Te=r.length;if(be>Te){var Oe=new gn(Math.max(Te*2,be));Oe.set(r),r=Oe}},p=e.f||0,d=e.p||0,f=e.b||0,u=e.l,y=e.d,v=e.m,b=e.n,g=i*8;do{if(!u){p=ki(t,d,1);var m=ki(t,d+1,3);if(d+=3,m)if(m==1)u=pP,y=mP,v=9,b=5;else if(m==2){var I=ki(t,d,31)+257,P=ki(t,d+10,15)+4,O=I+ki(t,d+5,31)+1;d+=14;for(var F=new gn(O),R=new gn(19),S=0;S<P;++S)R[m1[S]]=ki(t,d+S*3,7);d+=P*3;for(var E=Wp(R),j=(1<<E)-1,M=Xi(R,E,1),S=0;S<O;){var V=M[ki(t,d,j)];d+=V&15;var _=V>>4;if(_<16)F[S++]=_;else{var ee=0,te=0;for(_==16?(te=3+ki(t,d,3),d+=2,ee=F[S-1]):_==17?(te=3+ki(t,d,7),d+=3):_==18&&(te=11+ki(t,d,127),d+=7);te--;)F[S++]=ee}}var Q=F.subarray(0,I),J=F.subarray(I);v=Wp(Q),b=Wp(J),u=Xi(Q,v,1),y=Xi(J,b,1)}else Ti(1);else{var _=qg(d)+4,x=t[_-4]|t[_-3]<<8,A=_+x;if(A>i){l&&Ti(0);break}s&&c(f+x),r.set(t.subarray(_,A),f),e.b=f+=x,e.p=d=A*8,e.f=p;continue}if(d>g){l&&Ti(0);break}}s&&c(f+131072);for(var W=(1<<v)-1,q=(1<<b)-1,L=d;;L=d){var ee=u[Vp(t,d)&W],D=ee>>4;if(d+=ee&15,d>g){l&&Ti(0);break}if(ee||Ti(2),D<256)r[f++]=D;else if(D==256){L=d,u=null;break}else{var U=D-254;if(D>264){var S=D-257,H=hh[S];U=ki(t,d,(1<<H)-1)+o_[S],d+=H}var B=y[Vp(t,d)&q],Y=B>>4;B||Ti(3),d+=B&15;var J=dP[Y];if(Y>3){var H=ph[Y];J+=Vp(t,d)&(1<<H)-1,d+=H}if(d>g){l&&Ti(0);break}s&&c(f+131072);var re=f+U;if(f<J){var ne=o-J,de=Math.min(J,re);for(ne+f<0&&Ti(3);f<de;++f)r[f]=n[ne+f]}for(;f<re;++f)r[f]=r[f-J]}}e.l=u,e.p=L,e.b=f,e.f=p,u&&(p=1,e.m=v,e.d=y,e.n=b)}while(!p);return f!=r.length&&a?s_(r,0,f):r.subarray(0,f)},uo=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},_u=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Gp=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,o=r.slice();if(!i)return{t:u_,l:0};if(i==1){var a=new gn(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(A,I){return A.f-I.f}),r.push({s:-1,f:25001});var s=r[0],l=r[1],c=0,p=1,d=2;for(r[0]={s:-1,f:s.f+l.f,l:s,r:l};p!=i-1;)s=r[r[c].f<r[d].f?c++:d++],l=r[c!=p&&r[c].f<r[d].f?c++:d++],r[p++]={s:-1,f:s.f+l.f,l:s,r:l};for(var f=o[0].s,n=1;n<i;++n)o[n].s>f&&(f=o[n].s);var u=new Xn(f+1),y=w1(r[p-1],u,0);if(y>e){var n=0,v=0,b=y-e,g=1<<b;for(o.sort(function(I,P){return u[P.s]-u[I.s]||I.f-P.f});n<i;++n){var m=o[n].s;if(u[m]>e)v+=g-(1<<y-u[m]),u[m]=e;else break}for(v>>=b;v>0;){var _=o[n].s;u[_]<e?v-=1<<e-u[_]++-1:++n}for(;n>=0&&v;--n){var x=o[n].s;u[x]==e&&(--u[x],++v)}y=e}return{t:new gn(u),l:y}},w1=function(t,e,r){return t.s==-1?Math.max(w1(t.l,e,r+1),w1(t.r,e,r+1)):e[t.s]=r},z2=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Xn(++e),n=0,i=t[0],o=1,a=function(l){r[n++]=l},s=1;s<=e;++s)if(t[s]==i&&s!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=t[s]}return{c:r.subarray(0,n),n:e}},xu=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},l_=function(t,e,r){var n=r.length,i=qg(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var o=0;o<n;++o)t[i+o+4]=r[o];return(i+4+n)*8},$2=function(t,e,r,n,i,o,a,s,l,c,p){uo(e,p++,r),++i[256];for(var d=Gp(i,15),f=d.t,u=d.l,y=Gp(o,15),v=y.t,b=y.l,g=z2(f),m=g.c,_=g.n,x=z2(v),A=x.c,I=x.n,P=new Xn(19),O=0;O<m.length;++O)++P[m[O]&31];for(var O=0;O<A.length;++O)++P[A[O]&31];for(var F=Gp(P,7),R=F.t,S=F.l,E=19;E>4&&!R[m1[E-1]];--E);var j=c+5<<3,M=xu(i,ua)+xu(o,sc)+a,V=xu(i,f)+xu(o,v)+a+14+3*E+xu(P,R)+2*P[16]+3*P[17]+7*P[18];if(l>=0&&j<=M&&j<=V)return l_(e,p,t.subarray(l,l+c));var ee,te,Q,J;if(uo(e,p,1+(V<M)),p+=2,V<M){ee=Xi(f,u,0),te=f,Q=Xi(v,b,0),J=v;var W=Xi(R,S,0);uo(e,p,_-257),uo(e,p+5,I-1),uo(e,p+10,E-4),p+=14;for(var O=0;O<E;++O)uo(e,p+3*O,R[m1[O]]);p+=3*E;for(var q=[m,A],L=0;L<2;++L)for(var D=q[L],O=0;O<D.length;++O){var U=D[O]&31;uo(e,p,W[U]),p+=R[U],U>15&&(uo(e,p,D[O]>>5&127),p+=D[O]>>12)}}else ee=hP,te=ua,Q=gP,J=sc;for(var O=0;O<s;++O){var H=n[O];if(H>255){var U=H>>18&31;_u(e,p,ee[U+257]),p+=te[U+257],U>7&&(uo(e,p,H>>23&31),p+=hh[U]);var B=H&31;_u(e,p,Q[B]),p+=J[B],B>3&&(_u(e,p,H>>5&8191),p+=ph[B])}else _u(e,p,ee[H]),p+=te[H]}return _u(e,p,ee[256]),p+te[256]},wP=new Bg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),u_=new gn(0),bP=function(t,e,r,n,i,o){var a=o.z||t.length,s=new gn(n+a+5*(1+Math.ceil(a/7e3))+i),l=s.subarray(n,s.length-i),c=o.l,p=(o.r||0)&7;if(e){p&&(l[0]=o.r>>3);for(var d=wP[e-1],f=d>>13,u=d&8191,y=(1<<r)-1,v=o.p||new Xn(32768),b=o.h||new Xn(y+1),g=Math.ceil(r/3),m=2*g,_=function(Fe){return(t[Fe]^t[Fe+1]<<g^t[Fe+2]<<m)&y},x=new Bg(25e3),A=new Xn(288),I=new Xn(32),P=0,O=0,F=o.i||0,R=0,S=o.w||0,E=0;F+2<a;++F){var j=_(F),M=F&32767,V=b[j];if(v[M]=V,b[j]=M,S<=F){var ee=a-F;if((P>7e3||R>24576)&&(ee>423||!c)){p=$2(t,l,0,x,A,I,O,R,E,F-E,p),R=P=O=0,E=F;for(var te=0;te<286;++te)A[te]=0;for(var te=0;te<30;++te)I[te]=0}var Q=2,J=0,W=u,q=M-V&32767;if(ee>2&&j==_(F-q))for(var L=Math.min(f,ee)-1,D=Math.min(32767,F),U=Math.min(258,ee);q<=D&&--W&&M!=V;){if(t[F+Q]==t[F+Q-q]){for(var H=0;H<U&&t[F+H]==t[F+H-q];++H);if(H>Q){if(Q=H,J=q,H>L)break;for(var B=Math.min(q,H-2),Y=0,te=0;te<B;++te){var re=F-q+te&32767,ne=v[re],de=re-ne&32767;de>Y&&(Y=de,V=re)}}}M=V,V=v[M],q+=M-V&32767}if(J){x[R++]=268435456|v1[Q]<<18|U2[J];var be=v1[Q]&31,Te=U2[J]&31;O+=hh[be]+ph[Te],++A[257+be],++I[Te],S=F+Q,++P}else x[R++]=t[F],++A[t[F]]}}for(F=Math.max(F,S);F<a;++F)x[R++]=t[F],++A[t[F]];p=$2(t,l,c,x,A,I,O,R,E,F-E,p),c||(o.r=p&7|l[p/8|0]<<3,p-=7,o.h=b,o.p=v,o.i=F,o.w=S)}else{for(var F=o.w||0;F<a+c;F+=65535){var Oe=F+65535;Oe>=a&&(l[p/8|0]=c,Oe=a),p=l_(l,p+1,t.subarray(F,Oe))}o.i=a}return s_(s,0,n+qg(p)+i)},c_=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,o=r.length|0,a=0;a!=o;){for(var s=Math.min(a+2655,o);a<s;++a)i+=n+=r[a];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},_P=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),a=new gn(o.length+t.length);a.set(o),a.set(t,o.length),t=a,i.w=o.length}return bP(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},f_=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},xP=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=c_();i.p(e.dictionary),f_(t,2,i.d())}},SP=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Ti(6,"invalid zlib data"),(t[1]>>5&1)==1&&Ti(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function b1(t,e){e||(e={});var r=c_();r.p(t);var n=_P(t,e,e.dictionary?6:2,4);return xP(n,e),f_(n,n.length-4,r.d()),n}function kP(t,e){return yP(t.subarray(SP(t),-4),{i:2},e,e)}var AP=typeof TextDecoder<"u"&&new TextDecoder,NP=0;try{AP.decode(u_,{stream:!0}),NP=1}catch{}var ft=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Kp(){ft.console&&typeof ft.console.log=="function"&&ft.console.log.apply(ft.console,arguments)}var Kt={log:Kp,warn:function(t){ft.console&&(typeof ft.console.warn=="function"?ft.console.warn.apply(ft.console,arguments):Kp.call(null,arguments))},error:function(t){ft.console&&(typeof ft.console.error=="function"?ft.console.error.apply(ft.console,arguments):Kp(t))}};function Yp(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Ca(n.response,e,r)},n.onerror=function(){Kt.error("could not download file")},n.send()}function H2(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Cf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Bu,_1,Ca=ft.saveAs||((typeof window>"u"?"undefined":Ut(window))!=="object"||window!==ft?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=ft.URL||ft.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?H2(i.href)?Yp(t,e,r):Cf(i,i.target="_blank"):Cf(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Cf(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(H2(t))Yp(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Cf(n)})}else navigator.msSaveOrOpenBlob(function(i,o){return o===void 0?o={autoBom:!1}:Ut(o)!=="object"&&(Kt.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return Yp(t,e,r);var i=t.type==="application/octet-stream",o=/constructor/i.test(ft.HTMLElement)||ft.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o)&&(typeof FileReader>"u"?"undefined":Ut(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var p=s.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=p:location=p,n=null},s.readAsDataURL(t)}else{var l=ft.URL||ft.webkitURL,c=l.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function d_(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,o=r[n].process,a=i.exec(t);a&&(e=o(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+s+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Jp(t,e){var r=t[0],n=t[1],i=t[2],o=t[3];r=cn(r,n,i,o,e[0],7,-680876936),o=cn(o,r,n,i,e[1],12,-389564586),i=cn(i,o,r,n,e[2],17,606105819),n=cn(n,i,o,r,e[3],22,-1044525330),r=cn(r,n,i,o,e[4],7,-176418897),o=cn(o,r,n,i,e[5],12,1200080426),i=cn(i,o,r,n,e[6],17,-1473231341),n=cn(n,i,o,r,e[7],22,-45705983),r=cn(r,n,i,o,e[8],7,1770035416),o=cn(o,r,n,i,e[9],12,-1958414417),i=cn(i,o,r,n,e[10],17,-42063),n=cn(n,i,o,r,e[11],22,-1990404162),r=cn(r,n,i,o,e[12],7,1804603682),o=cn(o,r,n,i,e[13],12,-40341101),i=cn(i,o,r,n,e[14],17,-1502002290),r=fn(r,n=cn(n,i,o,r,e[15],22,1236535329),i,o,e[1],5,-165796510),o=fn(o,r,n,i,e[6],9,-1069501632),i=fn(i,o,r,n,e[11],14,643717713),n=fn(n,i,o,r,e[0],20,-373897302),r=fn(r,n,i,o,e[5],5,-701558691),o=fn(o,r,n,i,e[10],9,38016083),i=fn(i,o,r,n,e[15],14,-660478335),n=fn(n,i,o,r,e[4],20,-405537848),r=fn(r,n,i,o,e[9],5,568446438),o=fn(o,r,n,i,e[14],9,-1019803690),i=fn(i,o,r,n,e[3],14,-187363961),n=fn(n,i,o,r,e[8],20,1163531501),r=fn(r,n,i,o,e[13],5,-1444681467),o=fn(o,r,n,i,e[2],9,-51403784),i=fn(i,o,r,n,e[7],14,1735328473),r=dn(r,n=fn(n,i,o,r,e[12],20,-1926607734),i,o,e[5],4,-378558),o=dn(o,r,n,i,e[8],11,-2022574463),i=dn(i,o,r,n,e[11],16,1839030562),n=dn(n,i,o,r,e[14],23,-35309556),r=dn(r,n,i,o,e[1],4,-1530992060),o=dn(o,r,n,i,e[4],11,1272893353),i=dn(i,o,r,n,e[7],16,-155497632),n=dn(n,i,o,r,e[10],23,-1094730640),r=dn(r,n,i,o,e[13],4,681279174),o=dn(o,r,n,i,e[0],11,-358537222),i=dn(i,o,r,n,e[3],16,-722521979),n=dn(n,i,o,r,e[6],23,76029189),r=dn(r,n,i,o,e[9],4,-640364487),o=dn(o,r,n,i,e[12],11,-421815835),i=dn(i,o,r,n,e[15],16,530742520),r=hn(r,n=dn(n,i,o,r,e[2],23,-995338651),i,o,e[0],6,-198630844),o=hn(o,r,n,i,e[7],10,1126891415),i=hn(i,o,r,n,e[14],15,-1416354905),n=hn(n,i,o,r,e[5],21,-57434055),r=hn(r,n,i,o,e[12],6,1700485571),o=hn(o,r,n,i,e[3],10,-1894986606),i=hn(i,o,r,n,e[10],15,-1051523),n=hn(n,i,o,r,e[1],21,-2054922799),r=hn(r,n,i,o,e[8],6,1873313359),o=hn(o,r,n,i,e[15],10,-30611744),i=hn(i,o,r,n,e[6],15,-1560198380),n=hn(n,i,o,r,e[13],21,1309151649),r=hn(r,n,i,o,e[4],6,-145523070),o=hn(o,r,n,i,e[11],10,-1120210379),i=hn(i,o,r,n,e[2],15,718787259),n=hn(n,i,o,r,e[9],21,-343485551),t[0]=Qo(r,t[0]),t[1]=Qo(n,t[1]),t[2]=Qo(i,t[2]),t[3]=Qo(o,t[3])}function gh(t,e,r,n,i,o){return e=Qo(Qo(e,t),Qo(n,o)),Qo(e<<i|e>>>32-i,r)}function cn(t,e,r,n,i,o,a){return gh(e&r|~e&n,t,e,i,o,a)}function fn(t,e,r,n,i,o,a){return gh(e&n|r&~n,t,e,i,o,a)}function dn(t,e,r,n,i,o,a){return gh(e^r^n,t,e,i,o,a)}function hn(t,e,r,n,i,o,a){return gh(r^(e|~n),t,e,i,o,a)}function h_(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Jp(n,EP(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Jp(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,Jp(n,i),n}function EP(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Bu=ft.atob.bind(ft),_1=ft.btoa.bind(ft);var W2="0123456789abcdef".split("");function OP(t){for(var e="",r=0;r<4;r++)e+=W2[t>>8*r+4&15]+W2[t>>8*r&15];return e}function LP(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function x1(t){return h_(t).map(LP).join("")}var TP=function(t){for(var e=0;e<t.length;e++)t[e]=OP(t[e]);return t.join("")}(h_("hello"))!="5d41402abc4b2a76b9719d911017c592";function Qo(t,e){if(TP){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function S1(t,e){var r,n,i,o;if(t!==r){for(var a=(i=t,o=1+(256/t.length>>0),new Array(o+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var c=0;for(l=0;l<256;l++){var p=s[l];c=(c+p+a.charCodeAt(l))%256,s[l]=s[c],s[c]=p}r=t,n=s}else s=n;var d=e.length,f=0,u=0,y="";for(l=0;l<d;l++)u=(u+(p=s[f=(f+1)%256]))%256,s[f]=s[u],s[u]=p,a=s[(s[f]+s[u])%256],y+=String.fromCharCode(e.charCodeAt(l)^a);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var V2={print:4,modify:8,copy:16,"annot-forms":32};function Ms(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(s){if(V2.perm!==void 0)throw new Error("Invalid permission: "+s);i+=V2[s]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,a),this.P=-(1+(255^i)),this.encryptionKey=x1(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=S1(this.encryptionKey,this.padding)}function Fs(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[n]}return e}function G2(t){if(Ut(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var o=Math.random().toString(35);return e[r][o]=[n,!!i],o},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[r]){var a=e[r][o];try{a[0].apply(t,n)}catch(s){ft.console&&Kt.error("jsPDF PubSub Error",s.message,s)}a[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Md(t){if(!(this instanceof Md))return new Md(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function p_(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Ma(t,e,r,n,i){if(!(this instanceof Ma))return new Ma(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,p_.call(this,n,i)}function Xs(t,e,r,n,i){if(!(this instanceof Xs))return new Xs(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,p_.call(this,n,i)}function ct(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],o=arguments[3],a=[],s=1,l=16,c="S",p=null;Ut(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,o=t.compress||t.compressPdf||o,(p=t.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),s=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(o===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,f={},u={internal:{},__private__:{}};u.__private__.PubSub=G2;var y="1.3",v=u.__private__.getPdfVersion=function(){return y};u.__private__.setPdfVersion=function(k){y=k};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};u.__private__.getPageFormats=function(){return b};var g=u.__private__.getPageFormat=function(k){return b[k]};i=i||"a4";var m={COMPAT:"compat",ADVANCED:"advanced"},_=m.COMPAT;function x(){this.saveGraphicsState(),ae(new Le(ze,0,0,-ze,0,Eo()*ze).toString()+" cm"),this.setFontSize(this.getFontSize()/ze),c="n",_=m.ADVANCED}function A(){this.restoreGraphicsState(),c="S",_=m.COMPAT}var I=u.__private__.combineFontStyleAndFontWeight=function(k,$){if(k=="bold"&&$=="normal"||k=="bold"&&$==400||k=="normal"&&$=="italic"||k=="bold"&&$=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $&&(k=$==400||$==="normal"?k==="italic"?"italic":"normal":$!=700&&$!=="bold"||k!=="normal"?($==700?"bold":$)+""+k:"bold"),k};u.advancedAPI=function(k){var $=_===m.COMPAT;return $&&x.call(this),typeof k!="function"||(k(this),$&&A.call(this)),this},u.compatAPI=function(k){var $=_===m.ADVANCED;return $&&A.call(this),typeof k!="function"||(k(this),$&&x.call(this)),this},u.isAdvancedAPI=function(){return _===m.ADVANCED};var P,O=function(k){if(_!==m.ADVANCED)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=u.roundToPrecision=u.__private__.roundToPrecision=function(k,$){var oe=e||$;if(isNaN(k)||isNaN(oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(oe).replace(/0+$/,"")};P=u.hpf=u.__private__.hpf=typeof l=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return F(k,l)}:l==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return F(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return F(k,16)};var R=u.f2=u.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return F(k,2)},S=u.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return F(k,3)},E=u.scale=u.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return _===m.COMPAT?k*ze:_===m.ADVANCED?k:void 0},j=function(k){return _===m.COMPAT?Eo()-k:_===m.ADVANCED?k:void 0},M=function(k){return E(j(k))};u.__private__.setPrecision=u.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(e=parseInt(k,10))};var V,ee="00000000000000000000000000000000",te=u.__private__.getFileId=function(){return ee},Q=u.__private__.setFileId=function(k){return ee=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(an=new Ms(p.userPermissions,p.userPassword,p.ownerPassword,ee)),ee};u.setFileId=function(k){return Q(k),this},u.getFileId=function(){return te()};var J=u.__private__.convertDateToPDFDate=function(k){var $=k.getTimezoneOffset(),oe=$<0?"+":"-",ue=Math.floor(Math.abs($/60)),we=Math.abs($%60),Ee=[oe,U(ue),"'",U(we),"'"].join("");return["D:",k.getFullYear(),U(k.getMonth()+1),U(k.getDate()),U(k.getHours()),U(k.getMinutes()),U(k.getSeconds()),Ee].join("")},W=u.__private__.convertPDFDateToDate=function(k){var $=parseInt(k.substr(2,4),10),oe=parseInt(k.substr(6,2),10)-1,ue=parseInt(k.substr(8,2),10),we=parseInt(k.substr(10,2),10),Ee=parseInt(k.substr(12,2),10),Ie=parseInt(k.substr(14,2),10);return new Date($,oe,ue,we,Ee,Ie,0)},q=u.__private__.setCreationDate=function(k){var $;if(k===void 0&&(k=new Date),k instanceof Date)$=J(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$=k}return V=$},L=u.__private__.getCreationDate=function(k){var $=V;return k==="jsDate"&&($=W(V)),$};u.setCreationDate=function(k){return q(k),this},u.getCreationDate=function(k){return L(k)};var D,U=u.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},H=u.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},B=0,Y=[],re=[],ne=0,de=[],be=[],Te=!1,Oe=re,Fe=function(){B=0,ne=0,re=[],Y=[],de=[],It=bt(),sr=bt()};u.__private__.setCustomOutputDestination=function(k){Te=!0,Oe=k};var ye=function(k){Te||(Oe=k)};u.__private__.resetCustomOutputDestination=function(){Te=!1,Oe=re};var ae=u.__private__.out=function(k){return k=k.toString(),ne+=k.length+1,Oe.push(k),Oe},Ke=u.__private__.write=function(k){return ae(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},he=u.__private__.getArrayBuffer=function(k){for(var $=k.length,oe=new ArrayBuffer($),ue=new Uint8Array(oe);$--;)ue[$]=k.charCodeAt($);return oe},se=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];u.__private__.getStandardFonts=function(){return se};var me=t.fontSize||16;u.__private__.setFontSize=u.setFontSize=function(k){return me=_===m.ADVANCED?k/ze:k,this};var Se,ve=u.__private__.getFontSize=u.getFontSize=function(){return _===m.COMPAT?me:me*ze},Me=t.R2L||!1;u.__private__.setR2L=u.setR2L=function(k){return Me=k,this},u.__private__.getR2L=u.getR2L=function(){return Me};var qe,Ue=u.__private__.setZoomMode=function(k){var $=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))Se=k;else if(isNaN(k)){if($.indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');Se=k}else Se=parseInt(k,10)};u.__private__.getZoomMode=function(){return Se};var Ze,ot=u.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');qe=k};u.__private__.getPageMode=function(){return qe};var it=u.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');Ze=k};u.__private__.getLayoutMode=function(){return Ze},u.__private__.setDisplayMode=u.setDisplayMode=function(k,$,oe){return Ue(k),it($),ot(oe),this};var st={title:"",subject:"",author:"",keywords:"",creator:""};u.__private__.getDocumentProperty=function(k){if(Object.keys(st).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return st[k]},u.__private__.getDocumentProperties=function(){return st},u.__private__.setDocumentProperties=u.setProperties=u.setDocumentProperties=function(k){for(var $ in st)st.hasOwnProperty($)&&k[$]&&(st[$]=k[$]);return this},u.__private__.setDocumentProperty=function(k,$){if(Object.keys(st).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return st[k]=$};var Qe,ze,br,_t,Ur,xt={},Lt={},nn=[],At={},vi={},Dt={},zr={},On=null,jt=0,dt=[],Et=new G2(u),$t=t.hotfixes||[],Yt={},Jr={},Ne=[],Le=function k($,oe,ue,we,Ee,Ie){if(!(this instanceof k))return new k($,oe,ue,we,Ee,Ie);isNaN($)&&($=1),isNaN(oe)&&(oe=0),isNaN(ue)&&(ue=0),isNaN(we)&&(we=1),isNaN(Ee)&&(Ee=0),isNaN(Ie)&&(Ie=0),this._matrix=[$,oe,ue,we,Ee,Ie]};Object.defineProperty(Le.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Le.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Le.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Le.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Le.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Le.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Le.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Le.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Le.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Le.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Le.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Le.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Le.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Le.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Le.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Le.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Le.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(k)},Le.prototype.multiply=function(k){var $=k.sx*this.sx+k.shy*this.shx,oe=k.sx*this.shy+k.shy*this.sy,ue=k.shx*this.sx+k.sy*this.shx,we=k.shx*this.shy+k.sy*this.sy,Ee=k.tx*this.sx+k.ty*this.shx+this.tx,Ie=k.tx*this.shy+k.ty*this.sy+this.ty;return new Le($,oe,ue,we,Ee,Ie)},Le.prototype.decompose=function(){var k=this.sx,$=this.shy,oe=this.shx,ue=this.sy,we=this.tx,Ee=this.ty,Ie=Math.sqrt(k*k+$*$),Ve=(k/=Ie)*oe+($/=Ie)*ue;oe-=k*Ve,ue-=$*Ve;var at=Math.sqrt(oe*oe+ue*ue);return Ve/=at,k*(ue/=at)<$*(oe/=at)&&(k=-k,$=-$,Ve=-Ve,Ie=-Ie),{scale:new Le(Ie,0,0,at,0,0),translate:new Le(1,0,0,1,we,Ee),rotate:new Le(k,$,-$,k,0,0),skew:new Le(1,0,Ve,1,0,0)}},Le.prototype.toString=function(k){return this.join(" ")},Le.prototype.inversed=function(){var k=this.sx,$=this.shy,oe=this.shx,ue=this.sy,we=this.tx,Ee=this.ty,Ie=1/(k*ue-$*oe),Ve=ue*Ie,at=-$*Ie,vt=-oe*Ie,gt=k*Ie;return new Le(Ve,at,vt,gt,-Ve*we-vt*Ee,-at*we-gt*Ee)},Le.prototype.applyToPoint=function(k){var $=k.x*this.sx+k.y*this.shx+this.tx,oe=k.x*this.shy+k.y*this.sy+this.ty;return new cs($,oe)},Le.prototype.applyToRectangle=function(k){var $=this.applyToPoint(k),oe=this.applyToPoint(new cs(k.x+k.w,k.y+k.h));return new Fl($.x,$.y,oe.x-$.x,oe.y-$.y)},Le.prototype.clone=function(){var k=this.sx,$=this.shy,oe=this.shx,ue=this.sy,we=this.tx,Ee=this.ty;return new Le(k,$,oe,ue,we,Ee)},u.Matrix=Le;var tt=u.matrixMult=function(k,$){return $.multiply(k)},rt=new Le(1,0,0,1,0,0);u.unitMatrix=u.identityMatrix=rt;var yt=function(k,$){if(!vi[k]){var oe=($ instanceof Ma?"Sh":"P")+(Object.keys(At).length+1).toString(10);$.id=oe,vi[k]=oe,At[oe]=$,Et.publish("addPattern",$)}};u.ShadingPattern=Ma,u.TilingPattern=Xs,u.addShadingPattern=function(k,$){return O("addShadingPattern()"),yt(k,$),this},u.beginTilingPattern=function(k){O("beginTilingPattern()"),Tc(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},u.endTilingPattern=function(k,$){O("endTilingPattern()"),$.stream=be[D].join(`
`),yt(k,$),Et.publish("endTilingPattern",$),Ne.pop().restore()};var ht=u.__private__.newObject=function(){var k=bt();return Jt(k,!0),k},bt=u.__private__.newObjectDeferred=function(){return B++,Y[B]=function(){return ne},B},Jt=function(k,$){return $=typeof $=="boolean"&&$,Y[k]=ne,$&&ae(k+" 0 obj"),k},Ct=u.__private__.newAdditionalObject=function(){var k={objId:bt(),content:""};return de.push(k),k},It=bt(),sr=bt(),Ht=u.__private__.decodeColorString=function(k){var $=k.split(" ");if($.length!==2||$[1]!=="g"&&$[1]!=="G")$.length===5&&($[4]==="k"||$[4]==="K")&&($=[(1-$[0])*(1-$[3]),(1-$[1])*(1-$[3]),(1-$[2])*(1-$[3]),"r"]);else{var oe=parseFloat($[0]);$=[oe,oe,oe,"r"]}for(var ue="#",we=0;we<3;we++)ue+=("0"+Math.floor(255*parseFloat($[we])).toString(16)).slice(-2);return ue},rr=u.__private__.encodeColorString=function(k){var $;typeof k=="string"&&(k={ch1:k});var oe=k.ch1,ue=k.ch2,we=k.ch3,Ee=k.ch4,Ie=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof oe=="string"&&oe.charAt(0)!=="#"){var Ve=new d_(oe);if(Ve.ok)oe=Ve.toHex();else if(!/^\d*\.?\d*$/.test(oe))throw new Error('Invalid color "'+oe+'" passed to jsPDF.encodeColorString.')}if(typeof oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(oe)&&(oe="#"+oe[1]+oe[1]+oe[2]+oe[2]+oe[3]+oe[3]),typeof oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(oe)){var at=parseInt(oe.substr(1),16);oe=at>>16&255,ue=at>>8&255,we=255&at}if(ue===void 0||Ee===void 0&&oe===ue&&ue===we)if(typeof oe=="string")$=oe+" "+Ie[0];else switch(k.precision){case 2:$=R(oe/255)+" "+Ie[0];break;case 3:default:$=S(oe/255)+" "+Ie[0]}else if(Ee===void 0||Ut(Ee)==="object"){if(Ee&&!isNaN(Ee.a)&&Ee.a===0)return $=["1.","1.","1.",Ie[1]].join(" ");if(typeof oe=="string")$=[oe,ue,we,Ie[1]].join(" ");else switch(k.precision){case 2:$=[R(oe/255),R(ue/255),R(we/255),Ie[1]].join(" ");break;default:case 3:$=[S(oe/255),S(ue/255),S(we/255),Ie[1]].join(" ")}}else if(typeof oe=="string")$=[oe,ue,we,Ee,Ie[2]].join(" ");else switch(k.precision){case 2:$=[R(oe),R(ue),R(we),R(Ee),Ie[2]].join(" ");break;case 3:default:$=[S(oe),S(ue),S(we),S(Ee),Ie[2]].join(" ")}return $},cr=u.__private__.getFilters=function(){return a},$r=u.__private__.putStream=function(k){var $=(k=k||{}).data||"",oe=k.filters||cr(),ue=k.alreadyAppliedFilters||[],we=k.addLength1||!1,Ee=$.length,Ie=k.objectId,Ve=function(sn){return sn};if(p!==null&&Ie===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Ve=an.encryptor(Ie,0));var at={};oe===!0&&(oe=["FlateEncode"]);var vt=k.additionalKeyValues||[],gt=(at=ct.API.processDataByFilters!==void 0?ct.API.processDataByFilters($,oe):{data:$,reverseChain:[]}).reverseChain+(Array.isArray(ue)?ue.join(" "):ue.toString());if(at.data.length!==0&&(vt.push({key:"Length",value:at.data.length}),we===!0&&vt.push({key:"Length1",value:Ee})),gt.length!=0)if(gt.split("/").length-1==1)vt.push({key:"Filter",value:gt});else{vt.push({key:"Filter",value:"["+gt+"]"});for(var Ot=0;Ot<vt.length;Ot+=1)if(vt[Ot].key==="DecodeParms"){for(var fr=[],mr=0;mr<at.reverseChain.split("/").length-1;mr+=1)fr.push("null");fr.push(vt[Ot].value),vt[Ot].value="["+fr.join(" ")+"]"}}ae("<<");for(var Pr=0;Pr<vt.length;Pr++)ae("/"+vt[Pr].key+" "+vt[Pr].value);ae(">>"),at.data.length!==0&&(ae("stream"),ae(Ve(at.data)),ae("endstream"))},on=u.__private__.putPage=function(k){var $=k.number,oe=k.data,ue=k.objId,we=k.contentsObjId;Jt(ue,!0),ae("<</Type /Page"),ae("/Parent "+k.rootDictionaryObjId+" 0 R"),ae("/Resources "+k.resourceDictionaryObjId+" 0 R"),ae("/MediaBox ["+parseFloat(P(k.mediaBox.bottomLeftX))+" "+parseFloat(P(k.mediaBox.bottomLeftY))+" "+P(k.mediaBox.topRightX)+" "+P(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&ae("/CropBox ["+P(k.cropBox.bottomLeftX)+" "+P(k.cropBox.bottomLeftY)+" "+P(k.cropBox.topRightX)+" "+P(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&ae("/BleedBox ["+P(k.bleedBox.bottomLeftX)+" "+P(k.bleedBox.bottomLeftY)+" "+P(k.bleedBox.topRightX)+" "+P(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&ae("/TrimBox ["+P(k.trimBox.bottomLeftX)+" "+P(k.trimBox.bottomLeftY)+" "+P(k.trimBox.topRightX)+" "+P(k.trimBox.topRightY)+"]"),k.artBox!==null&&ae("/ArtBox ["+P(k.artBox.bottomLeftX)+" "+P(k.artBox.bottomLeftY)+" "+P(k.artBox.topRightX)+" "+P(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&ae("/UserUnit "+k.userUnit),Et.publish("putPage",{objId:ue,pageContext:dt[$],pageNumber:$,page:oe}),ae("/Contents "+we+" 0 R"),ae(">>"),ae("endobj");var Ee=oe.join(`
`);return _===m.ADVANCED&&(Ee+=`
Q`),Jt(we,!0),$r({data:Ee,filters:cr(),objectId:we}),ae("endobj"),ue},Dr=u.__private__.putPages=function(){var k,$,oe=[];for(k=1;k<=jt;k++)dt[k].objId=bt(),dt[k].contentsObjId=bt();for(k=1;k<=jt;k++)oe.push(on({number:k,data:be[k],objId:dt[k].objId,contentsObjId:dt[k].contentsObjId,mediaBox:dt[k].mediaBox,cropBox:dt[k].cropBox,bleedBox:dt[k].bleedBox,trimBox:dt[k].trimBox,artBox:dt[k].artBox,userUnit:dt[k].userUnit,rootDictionaryObjId:It,resourceDictionaryObjId:sr}));Jt(It,!0),ae("<</Type /Pages");var ue="/Kids [";for($=0;$<jt;$++)ue+=oe[$]+" 0 R ";ae(ue+"]"),ae("/Count "+jt),ae(">>"),ae("endobj"),Et.publish("postPutPages")},Ye=function(k){Et.publish("putFont",{font:k,out:ae,newObject:ht,putStream:$r}),k.isAlreadyPutted!==!0&&(k.objectNumber=ht(),ae("<<"),ae("/Type /Font"),ae("/BaseFont /"+Fs(k.postScriptName)),ae("/Subtype /Type1"),typeof k.encoding=="string"&&ae("/Encoding /"+k.encoding),ae("/FirstChar 32"),ae("/LastChar 255"),ae(">>"),ae("endobj"))},le=function(){for(var k in xt)xt.hasOwnProperty(k)&&(d===!1||d===!0&&f.hasOwnProperty(k))&&Ye(xt[k])},De=function(k){k.objectNumber=ht();var $=[];$.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Form"}),$.push({key:"BBox",value:"["+[P(k.x),P(k.y),P(k.x+k.width),P(k.y+k.height)].join(" ")+"]"}),$.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var oe=k.pages[1].join(`
`);$r({data:oe,additionalKeyValues:$,objectId:k.objectNumber}),ae("endobj")},We=function(){for(var k in Yt)Yt.hasOwnProperty(k)&&De(Yt[k])},Mt=function(k,$){var oe,ue=[],we=1/($-1);for(oe=0;oe<1;oe+=we)ue.push(oe);if(ue.push(1),k[0].offset!=0){var Ee={offset:0,color:k[0].color};k.unshift(Ee)}if(k[k.length-1].offset!=1){var Ie={offset:1,color:k[k.length-1].color};k.push(Ie)}for(var Ve="",at=0,vt=0;vt<ue.length;vt++){for(oe=ue[vt];oe>k[at+1].offset;)at++;var gt=k[at].offset,Ot=(oe-gt)/(k[at+1].offset-gt),fr=k[at].color,mr=k[at+1].color;Ve+=H(Math.round((1-Ot)*fr[0]+Ot*mr[0]).toString(16))+H(Math.round((1-Ot)*fr[1]+Ot*mr[1]).toString(16))+H(Math.round((1-Ot)*fr[2]+Ot*mr[2]).toString(16))}return Ve.trim()},Tr=function(k,$){$||($=21);var oe=ht(),ue=Mt(k.colors,$),we=[];we.push({key:"FunctionType",value:"0"}),we.push({key:"Domain",value:"[0.0 1.0]"}),we.push({key:"Size",value:"["+$+"]"}),we.push({key:"BitsPerSample",value:"8"}),we.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),we.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$r({data:ue,additionalKeyValues:we,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:oe}),ae("endobj"),k.objectNumber=ht(),ae("<< /ShadingType "+k.type),ae("/ColorSpace /DeviceRGB");var Ee="/Coords ["+P(parseFloat(k.coords[0]))+" "+P(parseFloat(k.coords[1]))+" ";k.type===2?Ee+=P(parseFloat(k.coords[2]))+" "+P(parseFloat(k.coords[3])):Ee+=P(parseFloat(k.coords[2]))+" "+P(parseFloat(k.coords[3]))+" "+P(parseFloat(k.coords[4]))+" "+P(parseFloat(k.coords[5])),ae(Ee+="]"),k.matrix&&ae("/Matrix ["+k.matrix.toString()+"]"),ae("/Function "+oe+" 0 R"),ae("/Extend [true true]"),ae(">>"),ae("endobj")},lr=function(k,$){var oe=bt(),ue=ht();$.push({resourcesOid:oe,objectOid:ue}),k.objectNumber=ue;var we=[];we.push({key:"Type",value:"/Pattern"}),we.push({key:"PatternType",value:"1"}),we.push({key:"PaintType",value:"1"}),we.push({key:"TilingType",value:"1"}),we.push({key:"BBox",value:"["+k.boundingBox.map(P).join(" ")+"]"}),we.push({key:"XStep",value:P(k.xStep)}),we.push({key:"YStep",value:P(k.yStep)}),we.push({key:"Resources",value:oe+" 0 R"}),k.matrix&&we.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),$r({data:k.stream,additionalKeyValues:we,objectId:k.objectNumber}),ae("endobj")},_r=function(k){var $;for($ in At)At.hasOwnProperty($)&&(At[$]instanceof Ma?Tr(At[$]):At[$]instanceof Xs&&lr(At[$],k))},Ln=function(k){for(var $ in k.objectNumber=ht(),ae("<<"),k)switch($){case"opacity":ae("/ca "+R(k[$]));break;case"stroke-opacity":ae("/CA "+R(k[$]))}ae(">>"),ae("endobj")},Fi=function(){var k;for(k in Dt)Dt.hasOwnProperty(k)&&Ln(Dt[k])},Zi=function(){for(var k in ae("/XObject <<"),Yt)Yt.hasOwnProperty(k)&&Yt[k].objectNumber>=0&&ae("/"+k+" "+Yt[k].objectNumber+" 0 R");Et.publish("putXobjectDict"),ae(">>")},xr=function(){an.oid=ht(),ae("<<"),ae("/Filter /Standard"),ae("/V "+an.v),ae("/R "+an.r),ae("/U <"+an.toHexString(an.U)+">"),ae("/O <"+an.toHexString(an.O)+">"),ae("/P "+an.P),ae(">>"),ae("endobj")},ga=function(){for(var k in ae("/Font <<"),xt)xt.hasOwnProperty(k)&&(d===!1||d===!0&&f.hasOwnProperty(k))&&ae("/"+k+" "+xt[k].objectNumber+" 0 R");ae(">>")},rs=function(){if(Object.keys(At).length>0){for(var k in ae("/Shading <<"),At)At.hasOwnProperty(k)&&At[k]instanceof Ma&&At[k].objectNumber>=0&&ae("/"+k+" "+At[k].objectNumber+" 0 R");Et.publish("putShadingPatternDict"),ae(">>")}},ns=function(k){if(Object.keys(At).length>0){for(var $ in ae("/Pattern <<"),At)At.hasOwnProperty($)&&At[$]instanceof u.TilingPattern&&At[$].objectNumber>=0&&At[$].objectNumber<k&&ae("/"+$+" "+At[$].objectNumber+" 0 R");Et.publish("putTilingPatternDict"),ae(">>")}},mh=function(){if(Object.keys(Dt).length>0){var k;for(k in ae("/ExtGState <<"),Dt)Dt.hasOwnProperty(k)&&Dt[k].objectNumber>=0&&ae("/"+k+" "+Dt[k].objectNumber+" 0 R");Et.publish("putGStateDict"),ae(">>")}},Sr=function(k){Jt(k.resourcesOid,!0),ae("<<"),ae("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ga(),rs(),ns(k.objectOid),mh(),Zi(),ae(">>"),ae("endobj")},gc=function(){var k=[];le(),Fi(),We(),_r(k),Et.publish("putResources"),k.forEach(Sr),Sr({resourcesOid:sr,objectOid:Number.MAX_SAFE_INTEGER}),Et.publish("postPutResources")},mc=function(){Et.publish("putAdditionalObjects");for(var k=0;k<de.length;k++){var $=de[k];Jt($.objId,!0),ae($.content),ae("endobj")}Et.publish("postPutAdditionalObjects")},vc=function(k){Lt[k.fontName]=Lt[k.fontName]||{},Lt[k.fontName][k.fontStyle]=k.id},Ll=function(k,$,oe,ue,we){var Ee={id:"F"+(Object.keys(xt).length+1).toString(10),postScriptName:k,fontName:$,fontStyle:oe,encoding:ue,isStandardFont:we||!1,metadata:{}};return Et.publish("addFont",{font:Ee,instance:this}),xt[Ee.id]=Ee,vc(Ee),Ee.id},vh=function(k){for(var $=0,oe=se.length;$<oe;$++){var ue=Ll.call(this,k[$][0],k[$][1],k[$][2],se[$][3],!0);d===!1&&(f[ue]=!0);var we=k[$][0].split("-");vc({id:ue,fontName:we[0],fontStyle:we[1]||""})}Et.publish("addFonts",{fonts:xt,dictionary:Lt})},yi=function(k){return k.foo=function(){try{return k.apply(this,arguments)}catch(ue){var $=ue.stack||"";~$.indexOf(" at ")&&($=$.split(" at ")[1]);var oe="Error in function "+$.split(`
`)[0].split("<")[0]+": "+ue.message;if(!ft.console)throw new Error(oe);ft.console.error(oe,ue),ft.alert&&alert(oe)}},k.foo.bar=k,k.foo},is=function(k,$){var oe,ue,we,Ee,Ie,Ve,at,vt,gt;if(we=($=$||{}).sourceEncoding||"Unicode",Ie=$.outputEncoding,($.autoencode||Ie)&&xt[Qe].metadata&&xt[Qe].metadata[we]&&xt[Qe].metadata[we].encoding&&(Ee=xt[Qe].metadata[we].encoding,!Ie&&xt[Qe].encoding&&(Ie=xt[Qe].encoding),!Ie&&Ee.codePages&&(Ie=Ee.codePages[0]),typeof Ie=="string"&&(Ie=Ee[Ie]),Ie)){for(at=!1,Ve=[],oe=0,ue=k.length;oe<ue;oe++)(vt=Ie[k.charCodeAt(oe)])?Ve.push(String.fromCharCode(vt)):Ve.push(k[oe]),Ve[oe].charCodeAt(0)>>8&&(at=!0);k=Ve.join("")}for(oe=k.length;at===void 0&&oe!==0;)k.charCodeAt(oe-1)>>8&&(at=!0),oe--;if(!at)return k;for(Ve=$.noBOM?[]:[254,255],oe=0,ue=k.length;oe<ue;oe++){if((gt=(vt=k.charCodeAt(oe))>>8)>>8)throw new Error("Character at position "+oe+" of string '"+k+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ve.push(gt),Ve.push(vt-(gt<<8))}return String.fromCharCode.apply(void 0,Ve)},Tn=u.__private__.pdfEscape=u.pdfEscape=function(k,$){return is(k,$).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Tl=u.__private__.beginPage=function(k){be[++jt]=[],dt[jt]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},wc(jt),ye(be[D])},yc=function(k,$){var oe,ue,we;switch(r=$||r,typeof k=="string"&&(oe=g(k.toLowerCase()),Array.isArray(oe)&&(ue=oe[0],we=oe[1])),Array.isArray(k)&&(ue=k[0]*ze,we=k[1]*ze),isNaN(ue)&&(ue=i[0],we=i[1]),(ue>14400||we>14400)&&(Kt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ue=Math.min(14400,ue),we=Math.min(14400,we)),i=[ue,we],r.substr(0,1)){case"l":we>ue&&(i=[we,ue]);break;case"p":ue>we&&(i=[we,ue])}Tl(i),Ac(Rl),ae(wi),Dl!==0&&ae(Dl+" J"),Ml!==0&&ae(Ml+" j"),Et.publish("addPage",{pageNumber:jt})},yh=function(k){k>0&&k<=jt&&(be.splice(k,1),dt.splice(k,1),jt--,D>jt&&(D=jt),this.setPage(D))},wc=function(k){k>0&&k<=jt&&(D=k)},wh=u.__private__.getNumberOfPages=u.getNumberOfPages=function(){return be.length-1},bc=function(k,$,oe){var ue,we=void 0;return oe=oe||{},k=k!==void 0?k:xt[Qe].fontName,$=$!==void 0?$:xt[Qe].fontStyle,ue=k.toLowerCase(),Lt[ue]!==void 0&&Lt[ue][$]!==void 0?we=Lt[ue][$]:Lt[k]!==void 0&&Lt[k][$]!==void 0?we=Lt[k][$]:oe.disableWarning===!1&&Kt.warn("Unable to look up font label for font '"+k+"', '"+$+"'. Refer to getFontList() for available fonts."),we||oe.noFallback||(we=Lt.times[$])==null&&(we=Lt.times.normal),we},bh=u.__private__.putInfo=function(){var k=ht(),$=function(ue){return ue};for(var oe in p!==null&&($=an.encryptor(k,0)),ae("<<"),ae("/Producer ("+Tn($("jsPDF "+ct.version))+")"),st)st.hasOwnProperty(oe)&&st[oe]&&ae("/"+oe.substr(0,1).toUpperCase()+oe.substr(1)+" ("+Tn($(st[oe]))+")");ae("/CreationDate ("+Tn($(V))+")"),ae(">>"),ae("endobj")},Pl=u.__private__.putCatalog=function(k){var $=(k=k||{}).rootDictionaryObjId||It;switch(ht(),ae("<<"),ae("/Type /Catalog"),ae("/Pages "+$+" 0 R"),Se||(Se="fullwidth"),Se){case"fullwidth":ae("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ae("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ae("/OpenAction [3 0 R /Fit]");break;case"original":ae("/OpenAction [3 0 R /XYZ null null 1]");break;default:var oe=""+Se;oe.substr(oe.length-1)==="%"&&(Se=parseInt(Se)/100),typeof Se=="number"&&ae("/OpenAction [3 0 R /XYZ null null "+R(Se)+"]")}switch(Ze||(Ze="continuous"),Ze){case"continuous":ae("/PageLayout /OneColumn");break;case"single":ae("/PageLayout /SinglePage");break;case"two":case"twoleft":ae("/PageLayout /TwoColumnLeft");break;case"tworight":ae("/PageLayout /TwoColumnRight")}qe&&ae("/PageMode /"+qe),Et.publish("putCatalog"),ae(">>"),ae("endobj")},_h=u.__private__.putTrailer=function(){ae("trailer"),ae("<<"),ae("/Size "+(B+1)),ae("/Root "+B+" 0 R"),ae("/Info "+(B-1)+" 0 R"),p!==null&&ae("/Encrypt "+an.oid+" 0 R"),ae("/ID [ <"+ee+"> <"+ee+"> ]"),ae(">>")},xh=u.__private__.putHeader=function(){ae("%PDF-"+y),ae("%")},Sh=u.__private__.putXRef=function(){var k="0000000000";ae("xref"),ae("0 "+(B+1)),ae("0000000000 65535 f ");for(var $=1;$<=B;$++)typeof Y[$]=="function"?ae((k+Y[$]()).slice(-10)+" 00000 n "):Y[$]!==void 0?ae((k+Y[$]).slice(-10)+" 00000 n "):ae("0000000000 00000 n ")},eo=u.__private__.buildDocument=function(){Fe(),ye(re),Et.publish("buildDocument"),xh(),Dr(),mc(),gc(),p!==null&&xr(),bh(),Pl();var k=ne;return Sh(),_h(),ae("startxref"),ae(""+k),ae("%%EOF"),ye(be[D]),re.join(`
`)},os=u.__private__.getBlob=function(k){return new Blob([he(k)],{type:"application/pdf"})},as=u.output=u.__private__.output=yi(function(k,$){switch(typeof($=$||{})=="string"?$={filename:$}:$.filename=$.filename||"generated.pdf",k){case void 0:return eo();case"save":u.save($.filename);break;case"arraybuffer":return he(eo());case"blob":return os(eo());case"bloburi":case"bloburl":if(ft.URL!==void 0&&typeof ft.URL.createObjectURL=="function")return ft.URL&&ft.URL.createObjectURL(os(eo()))||void 0;Kt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var oe="",ue=eo();try{oe=_1(ue)}catch{oe=_1(unescape(encodeURIComponent(ue)))}return"data:application/pdf;filename="+$.filename+";base64,"+oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ft)==="[object Window]"){var we="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ee=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$.pdfObjectUrl&&(we=$.pdfObjectUrl,Ee="");var Ie='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+we+'"'+Ee+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($)+");<\/script></body></html>",Ve=ft.open();return Ve!==null&&Ve.document.write(Ie),Ve}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ft)==="[object Window]"){var at='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$.filename+'" width="500px" height="400px" /></body></html>',vt=ft.open();if(vt!==null){vt.document.write(at);var gt=this;vt.document.documentElement.querySelector("#pdfViewer").onload=function(){vt.document.title=$.filename,vt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(gt.output("bloburl"))}}return vt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ft)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$)+'"></iframe></body></html>',fr=ft.open();if(fr!==null&&(fr.document.write(Ot),fr.document.title=$.filename),fr||typeof safari>"u")return fr;break;case"datauri":case"dataurl":return ft.document.location.href=this.output("datauristring",$);default:return null}}),_c=function(k){return Array.isArray($t)===!0&&$t.indexOf(k)>-1};switch(n){case"pt":ze=1;break;case"mm":ze=72/25.4;break;case"cm":ze=72/2.54;break;case"in":ze=72;break;case"px":ze=_c("px_scaling")==1?.75:96/72;break;case"pc":case"em":ze=12;break;case"ex":ze=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ze=n}var an=null;q(),Q();var kh=function(k){return p!==null?an.encryptor(k,0):function($){return $}},xc=u.__private__.getPageInfo=u.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:dt[k].objId,pageNumber:k,pageContext:dt[k]}},pt=u.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $ in dt)if(dt[$].objId===k)break;return xc($)},Ah=u.__private__.getCurrentPageInfo=u.getCurrentPageInfo=function(){return{objId:dt[D].objId,pageNumber:D,pageContext:dt[D]}};u.addPage=function(){return yc.apply(this,arguments),this},u.setPage=function(){return wc.apply(this,arguments),ye.call(this,be[D]),this},u.insertPage=function(k){return this.addPage(),this.movePage(D,k),this},u.movePage=function(k,$){var oe,ue;if(k>$){oe=be[k],ue=dt[k];for(var we=k;we>$;we--)be[we]=be[we-1],dt[we]=dt[we-1];be[$]=oe,dt[$]=ue,this.setPage($)}else if(k<$){oe=be[k],ue=dt[k];for(var Ee=k;Ee<$;Ee++)be[Ee]=be[Ee+1],dt[Ee]=dt[Ee+1];be[$]=oe,dt[$]=ue,this.setPage($)}return this},u.deletePage=function(){return yh.apply(this,arguments),this},u.__private__.text=u.text=function(k,$,oe,ue,we){var Ee,Ie,Ve,at,vt,gt,Ot,fr,mr,Pr=(ue=ue||{}).scope||this;if(typeof k=="number"&&typeof $=="number"&&(typeof oe=="string"||Array.isArray(oe))){var sn=oe;oe=$,$=k,k=sn}if(arguments[3]instanceof Le?(O("The transform parameter of text() with a Matrix value"),mr=we):(Ve=arguments[4],at=arguments[5],Ut(Ot=arguments[3])==="object"&&Ot!==null||(typeof Ve=="string"&&(at=Ve,Ve=null),typeof Ot=="string"&&(at=Ot,Ot=null),typeof Ot=="number"&&(Ve=Ot,Ot=null),ue={flags:Ot,angle:Ve,align:at})),isNaN($)||isNaN(oe)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return Pr;var Hr="",bi=!1,Un=typeof ue.lineHeightFactor=="number"?ue.lineHeightFactor:va,Ui=Pr.internal.scaleFactor;function Pc(Xt){return Xt=Xt.split("	").join(Array(ue.TabLen||9).join(" ")),Tn(Xt,Ot)}function zl(Xt){for(var Qt,Ar=Xt.concat(),Mr=[],oo=Ar.length;oo--;)typeof(Qt=Ar.shift())=="string"?Mr.push(Qt):Array.isArray(Xt)&&(Qt.length===1||Qt[1]===void 0&&Qt[2]===void 0)?Mr.push(Qt[0]):Mr.push([Qt[0],Qt[1],Qt[2]]);return Mr}function $l(Xt,Qt){var Ar;if(typeof Xt=="string")Ar=Qt(Xt)[0];else if(Array.isArray(Xt)){for(var Mr,oo,Xl=Xt.concat(),_s=[],Dc=Xl.length;Dc--;)typeof(Mr=Xl.shift())=="string"?_s.push(Qt(Mr)[0]):Array.isArray(Mr)&&typeof Mr[0]=="string"&&(oo=Qt(Mr[0],Mr[1],Mr[2]),_s.push([oo[0],oo[1],oo[2]]));Ar=_s}return Ar}var ds=!1,Hl=!0;if(typeof k=="string")ds=!0;else if(Array.isArray(k)){var Wl=k.concat();Ie=[];for(var hs,Xr=Wl.length;Xr--;)(typeof(hs=Wl.shift())!="string"||Array.isArray(hs)&&typeof hs[0]!="string")&&(Hl=!1);ds=Hl}if(ds===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var ps=me/Pr.internal.scaleFactor,gs=ps*(Un-1);switch(ue.baseline){case"bottom":oe-=gs;break;case"top":oe+=ps-gs;break;case"hanging":oe+=ps-2*gs;break;case"middle":oe+=ps/2-gs}if((gt=ue.maxWidth||0)>0&&(typeof k=="string"?k=Pr.splitTextToSize(k,gt):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(Xt,Qt){return Xt.concat(Pr.splitTextToSize(Qt,gt))},[]))),Ee={text:k,x:$,y:oe,options:ue,mutex:{pdfEscape:Tn,activeFontKey:Qe,fonts:xt,activeFontSize:me}},Et.publish("preProcessText",Ee),k=Ee.text,Ve=(ue=Ee.options).angle,!(mr instanceof Le)&&Ve&&typeof Ve=="number"){Ve*=Math.PI/180,ue.rotationDirection===0&&(Ve=-Ve),_===m.ADVANCED&&(Ve=-Ve);var ms=Math.cos(Ve),Vl=Math.sin(Ve);mr=new Le(ms,Vl,-Vl,ms,0,0)}else Ve&&Ve instanceof Le&&(mr=Ve);_!==m.ADVANCED||mr||(mr=rt),(vt=ue.charSpace||us)!==void 0&&(Hr+=P(E(vt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(fr=ue.horizontalScale)!==void 0&&(Hr+=P(100*fr)+` Tz
`),ue.lang;var Pn=-1,Ih=ue.renderingMode!==void 0?ue.renderingMode:ue.stroke,Gl=Pr.internal.getCurrentPageInfo().pageContext;switch(Ih){case 0:case!1:case"fill":Pn=0;break;case 1:case!0:case"stroke":Pn=1;break;case 2:case"fillThenStroke":Pn=2;break;case 3:case"invisible":Pn=3;break;case 4:case"fillAndAddForClipping":Pn=4;break;case 5:case"strokeAndAddPathForClipping":Pn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Pn=6;break;case 7:case"addToPathForClipping":Pn=7}var jc=Gl.usedRenderingMode!==void 0?Gl.usedRenderingMode:-1;Pn!==-1?Hr+=Pn+` Tr
`:jc!==-1&&(Hr+=`0 Tr
`),Pn!==-1&&(Gl.usedRenderingMode=Pn),at=ue.align||"left";var ri,vs=me*Un,Cc=Pr.internal.pageSize.getWidth(),Rc=xt[Qe];vt=ue.charSpace||us,gt=ue.maxWidth||0,Ot=Object.assign({autoencode:!0,noBOM:!0},ue.flags);var Oo=[],ba=function(Xt){return Pr.getStringUnitWidth(Xt,{font:Rc,charSpace:vt,fontSize:me,doKerning:!1})*me/Ui};if(Object.prototype.toString.call(k)==="[object Array]"){var jn;Ie=zl(k),at!=="left"&&(ri=Ie.map(ba));var vn,Lo=0;if(at==="right"){$-=ri[0],k=[],Xr=Ie.length;for(var ro=0;ro<Xr;ro++)ro===0?(vn=qi($),jn=to(oe)):(vn=E(Lo-ri[ro]),jn=-vs),k.push([Ie[ro],vn,jn]),Lo=ri[ro]}else if(at==="center"){$-=ri[0]/2,k=[],Xr=Ie.length;for(var no=0;no<Xr;no++)no===0?(vn=qi($),jn=to(oe)):(vn=E((Lo-ri[no])/2),jn=-vs),k.push([Ie[no],vn,jn]),Lo=ri[no]}else if(at==="left"){k=[],Xr=Ie.length;for(var ys=0;ys<Xr;ys++)k.push(Ie[ys])}else if(at==="justify"&&Rc.encoding==="Identity-H"){k=[],Xr=Ie.length,gt=gt!==0?gt:Cc;for(var io=0,kr=0;kr<Xr;kr++)if(jn=kr===0?to(oe):-vs,vn=kr===0?qi($):io,kr<Xr-1){var Kl=E((gt-ri[kr])/(Ie[kr].split(" ").length-1)),yn=Ie[kr].split(" ");k.push([yn[0]+" ",vn,jn]),io=0;for(var ni=1;ni<yn.length;ni++){var ws=(ba(yn[ni-1]+" "+yn[ni])-ba(yn[ni]))*Ui+Kl;ni==yn.length-1?k.push([yn[ni],ws,0]):k.push([yn[ni]+" ",ws,0]),io-=ws}}else k.push([Ie[kr],vn,jn]);k.push(["",io,0])}else{if(at!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],Xr=Ie.length,gt=gt!==0?gt:Cc,kr=0;kr<Xr;kr++)jn=kr===0?to(oe):-vs,vn=kr===0?qi($):0,kr<Xr-1?Oo.push(P(E((gt-ri[kr])/(Ie[kr].split(" ").length-1)))):Oo.push(0),k.push([Ie[kr],vn,jn])}}var Ic=typeof ue.R2L=="boolean"?ue.R2L:Me;Ic===!0&&(k=$l(k,function(Xt,Qt,Ar){return[Xt.split("").reverse().join(""),Qt,Ar]})),Ee={text:k,x:$,y:oe,options:ue,mutex:{pdfEscape:Tn,activeFontKey:Qe,fonts:xt,activeFontSize:me}},Et.publish("postProcessText",Ee),k=Ee.text,bi=Ee.mutex.isHex||!1;var Yl=xt[Qe].encoding;Yl!=="WinAnsiEncoding"&&Yl!=="StandardEncoding"||(k=$l(k,function(Xt,Qt,Ar){return[Pc(Xt),Qt,Ar]})),Ie=zl(k),k=[];for(var _a,xa,To,Sa=0,bs=1,ka=Array.isArray(Ie[0])?bs:Sa,Po="",Jl=function(Xt,Qt,Ar){var Mr="";return Ar instanceof Le?(Ar=typeof ue.angle=="number"?tt(Ar,new Le(1,0,0,1,Xt,Qt)):tt(new Le(1,0,0,1,Xt,Qt),Ar),_===m.ADVANCED&&(Ar=tt(new Le(1,0,0,-1,0,0),Ar)),Mr=Ar.join(" ")+` Tm
`):Mr=P(Xt)+" "+P(Qt)+` Td
`,Mr},ii=0;ii<Ie.length;ii++){switch(Po="",ka){case bs:To=(bi?"<":"(")+Ie[ii][0]+(bi?">":")"),_a=parseFloat(Ie[ii][1]),xa=parseFloat(Ie[ii][2]);break;case Sa:To=(bi?"<":"(")+Ie[ii]+(bi?">":")"),_a=qi($),xa=to(oe)}Oo!==void 0&&Oo[ii]!==void 0&&(Po=Oo[ii]+` Tw
`),ii===0?k.push(Po+Jl(_a,xa,mr)+To):ka===Sa?k.push(Po+To):ka===bs&&k.push(Po+Jl(_a,xa,mr)+To)}k=ka===Sa?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var oi=`BT
/`;return oi+=Qe+" "+me+` Tf
`,oi+=P(me*Un)+` TL
`,oi+=ya+`
`,oi+=Hr,oi+=k,ae(oi+="ET"),f[Qe]=!0,Pr};var Nh=u.__private__.clip=u.clip=function(k){return ae(k==="evenodd"?"W*":"W"),this};u.clipEvenOdd=function(){return Nh("evenodd")},u.__private__.discardPath=u.discardPath=function(){return ae("n"),this};var Bi=u.__private__.isValidStyle=function(k){var $=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&($=!0),$};u.__private__.setDefaultPathOperation=u.setDefaultPathOperation=function(k){return Bi(k)&&(c=k),this};var Sc=u.__private__.getStyle=u.getStyle=function(k){var $=c;switch(k){case"D":case"S":$="S";break;case"F":$="f";break;case"FD":case"DF":$="B";break;case"f":case"f*":case"B":case"B*":$=k}return $},kc=u.close=function(){return ae("h"),this};u.stroke=function(){return ae("S"),this},u.fill=function(k){return ss("f",k),this},u.fillEvenOdd=function(k){return ss("f*",k),this},u.fillStroke=function(k){return ss("B",k),this},u.fillStrokeEvenOdd=function(k){return ss("B*",k),this};var ss=function(k,$){Ut($)==="object"?Oh($,k):ae(k)},jl=function(k){k===null||_===m.ADVANCED&&k===void 0||(k=Sc(k),ae(k))};function Eh(k,$,oe,ue,we){var Ee=new Xs($||this.boundingBox,oe||this.xStep,ue||this.yStep,this.gState,we||this.matrix);Ee.stream=this.stream;var Ie=k+"$$"+this.cloneIndex+++"$$";return yt(Ie,Ee),Ee}var Oh=function(k,$){var oe=vi[k.key],ue=At[oe];if(ue instanceof Ma)ae("q"),ae(Lh($)),ue.gState&&u.setGState(ue.gState),ae(k.matrix.toString()+" cm"),ae("/"+oe+" sh"),ae("Q");else if(ue instanceof Xs){var we=new Le(1,0,0,-1,0,Eo());k.matrix&&(we=we.multiply(k.matrix||rt),oe=Eh.call(ue,k.key,k.boundingBox,k.xStep,k.yStep,we).id),ae("q"),ae("/Pattern cs"),ae("/"+oe+" scn"),ue.gState&&u.setGState(ue.gState),ae($),ae("Q")}},Lh=function(k){switch(k){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Cl=u.moveTo=function(k,$){return ae(P(E(k))+" "+P(M($))+" m"),this},ma=u.lineTo=function(k,$){return ae(P(E(k))+" "+P(M($))+" l"),this},Ao=u.curveTo=function(k,$,oe,ue,we,Ee){return ae([P(E(k)),P(M($)),P(E(oe)),P(M(ue)),P(E(we)),P(M(Ee)),"c"].join(" ")),this};u.__private__.line=u.line=function(k,$,oe,ue,we){if(isNaN(k)||isNaN($)||isNaN(oe)||isNaN(ue)||!Bi(we))throw new Error("Invalid arguments passed to jsPDF.line");return _===m.COMPAT?this.lines([[oe-k,ue-$]],k,$,[1,1],we||"S"):this.lines([[oe-k,ue-$]],k,$,[1,1]).stroke()},u.__private__.lines=u.lines=function(k,$,oe,ue,we,Ee){var Ie,Ve,at,vt,gt,Ot,fr,mr,Pr,sn,Hr,bi;if(typeof k=="number"&&(bi=oe,oe=$,$=k,k=bi),ue=ue||[1,1],Ee=Ee||!1,isNaN($)||isNaN(oe)||!Array.isArray(k)||!Array.isArray(ue)||!Bi(we)||typeof Ee!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Cl($,oe),Ie=ue[0],Ve=ue[1],vt=k.length,sn=$,Hr=oe,at=0;at<vt;at++)(gt=k[at]).length===2?(sn=gt[0]*Ie+sn,Hr=gt[1]*Ve+Hr,ma(sn,Hr)):(Ot=gt[0]*Ie+sn,fr=gt[1]*Ve+Hr,mr=gt[2]*Ie+sn,Pr=gt[3]*Ve+Hr,sn=gt[4]*Ie+sn,Hr=gt[5]*Ve+Hr,Ao(Ot,fr,mr,Pr,sn,Hr));return Ee&&kc(),jl(we),this},u.path=function(k){for(var $=0;$<k.length;$++){var oe=k[$],ue=oe.c;switch(oe.op){case"m":Cl(ue[0],ue[1]);break;case"l":ma(ue[0],ue[1]);break;case"c":Ao.apply(this,ue);break;case"h":kc()}}return this},u.__private__.rect=u.rect=function(k,$,oe,ue,we){if(isNaN(k)||isNaN($)||isNaN(oe)||isNaN(ue)||!Bi(we))throw new Error("Invalid arguments passed to jsPDF.rect");return _===m.COMPAT&&(ue=-ue),ae([P(E(k)),P(M($)),P(E(oe)),P(E(ue)),"re"].join(" ")),jl(we),this},u.__private__.triangle=u.triangle=function(k,$,oe,ue,we,Ee,Ie){if(isNaN(k)||isNaN($)||isNaN(oe)||isNaN(ue)||isNaN(we)||isNaN(Ee)||!Bi(Ie))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[oe-k,ue-$],[we-oe,Ee-ue],[k-we,$-Ee]],k,$,[1,1],Ie,!0),this},u.__private__.roundedRect=u.roundedRect=function(k,$,oe,ue,we,Ee,Ie){if(isNaN(k)||isNaN($)||isNaN(oe)||isNaN(ue)||isNaN(we)||isNaN(Ee)||!Bi(Ie))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ve=4/3*(Math.SQRT2-1);return we=Math.min(we,.5*oe),Ee=Math.min(Ee,.5*ue),this.lines([[oe-2*we,0],[we*Ve,0,we,Ee-Ee*Ve,we,Ee],[0,ue-2*Ee],[0,Ee*Ve,-we*Ve,Ee,-we,Ee],[2*we-oe,0],[-we*Ve,0,-we,-Ee*Ve,-we,-Ee],[0,2*Ee-ue],[0,-Ee*Ve,we*Ve,-Ee,we,-Ee]],k+we,$,[1,1],Ie,!0),this},u.__private__.ellipse=u.ellipse=function(k,$,oe,ue,we){if(isNaN(k)||isNaN($)||isNaN(oe)||isNaN(ue)||!Bi(we))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ee=4/3*(Math.SQRT2-1)*oe,Ie=4/3*(Math.SQRT2-1)*ue;return Cl(k+oe,$),Ao(k+oe,$-Ie,k+Ee,$-ue,k,$-ue),Ao(k-Ee,$-ue,k-oe,$-Ie,k-oe,$),Ao(k-oe,$+Ie,k-Ee,$+ue,k,$+ue),Ao(k+Ee,$+ue,k+oe,$+Ie,k+oe,$),jl(we),this},u.__private__.circle=u.circle=function(k,$,oe,ue){if(isNaN(k)||isNaN($)||isNaN(oe)||!Bi(ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,$,oe,oe,ue)},u.setFont=function(k,$,oe){return oe&&($=I($,oe)),Qe=bc(k,$,{disableWarning:!1}),this};var Th=u.__private__.getFont=u.getFont=function(){return xt[bc.apply(u,arguments)]};u.__private__.getFontList=u.getFontList=function(){var k,$,oe={};for(k in Lt)if(Lt.hasOwnProperty(k))for($ in oe[k]=[],Lt[k])Lt[k].hasOwnProperty($)&&oe[k].push($);return oe},u.addFont=function(k,$,oe,ue,we){var Ee=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ee.indexOf(arguments[3])!==-1?we=arguments[3]:arguments[3]&&Ee.indexOf(arguments[3])==-1&&(oe=I(oe,ue)),we=we||"Identity-H",Ll.call(this,k,$,oe,we)};var va,Rl=t.lineWidth||.200025,ls=u.__private__.getLineWidth=u.getLineWidth=function(){return Rl},Ac=u.__private__.setLineWidth=u.setLineWidth=function(k){return Rl=k,ae(P(E(k))+" w"),this};u.__private__.setLineDash=ct.API.setLineDash=ct.API.setLineDashPattern=function(k,$){if(k=k||[],$=$||0,isNaN($)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(oe){return P(E(oe))}).join(" "),$=P(E($)),ae("["+k+"] "+$+" d"),this};var Nc=u.__private__.getLineHeight=u.getLineHeight=function(){return me*va};u.__private__.getLineHeight=u.getLineHeight=function(){return me*va};var Ec=u.__private__.setLineHeightFactor=u.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(va=k),this},Oc=u.__private__.getLineHeightFactor=u.getLineHeightFactor=function(){return va};Ec(t.lineHeight);var qi=u.__private__.getHorizontalCoordinate=function(k){return E(k)},to=u.__private__.getVerticalCoordinate=function(k){return _===m.ADVANCED?k:dt[D].mediaBox.topRightY-dt[D].mediaBox.bottomLeftY-E(k)},Ph=u.__private__.getHorizontalCoordinateString=u.getHorizontalCoordinateString=function(k){return P(qi(k))},No=u.__private__.getVerticalCoordinateString=u.getVerticalCoordinateString=function(k){return P(to(k))},wi=t.strokeColor||"0 G";u.__private__.getStrokeColor=u.getDrawColor=function(){return Ht(wi)},u.__private__.setStrokeColor=u.setDrawColor=function(k,$,oe,ue){return wi=rr({ch1:k,ch2:$,ch3:oe,ch4:ue,pdfColorType:"draw",precision:2}),ae(wi),this};var Il=t.fillColor||"0 g";u.__private__.getFillColor=u.getFillColor=function(){return Ht(Il)},u.__private__.setFillColor=u.setFillColor=function(k,$,oe,ue){return Il=rr({ch1:k,ch2:$,ch3:oe,ch4:ue,pdfColorType:"fill",precision:2}),ae(Il),this};var ya=t.textColor||"0 g",jh=u.__private__.getTextColor=u.getTextColor=function(){return Ht(ya)};u.__private__.setTextColor=u.setTextColor=function(k,$,oe,ue){return ya=rr({ch1:k,ch2:$,ch3:oe,ch4:ue,pdfColorType:"text",precision:3}),this};var us=t.charSpace,Ch=u.__private__.getCharSpace=u.getCharSpace=function(){return parseFloat(us||0)};u.__private__.setCharSpace=u.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return us=k,this};var Dl=0;u.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},u.__private__.setLineCap=u.setLineCap=function(k){var $=u.CapJoinStyles[k];if($===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Dl=$,ae($+" J"),this};var Ml=0;u.__private__.setLineJoin=u.setLineJoin=function(k){var $=u.CapJoinStyles[k];if($===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ml=$,ae($+" j"),this},u.__private__.setLineMiterLimit=u.__private__.setMiterLimit=u.setLineMiterLimit=u.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ae(P(E(k))+" M"),this},u.GState=Md,u.setGState=function(k){(k=typeof k=="string"?Dt[zr[k]]:Lc(null,k)).equals(On)||(ae("/"+k.id+" gs"),On=k)};var Lc=function(k,$){if(!k||!zr[k]){var oe=!1;for(var ue in Dt)if(Dt.hasOwnProperty(ue)&&Dt[ue].equals($)){oe=!0;break}if(oe)$=Dt[ue];else{var we="GS"+(Object.keys(Dt).length+1).toString(10);Dt[we]=$,$.id=we}return k&&(zr[k]=$.id),Et.publish("addGState",$),$}};u.addGState=function(k,$){return Lc(k,$),this},u.saveGraphicsState=function(){return ae("q"),nn.push({key:Qe,size:me,color:ya}),this},u.restoreGraphicsState=function(){ae("Q");var k=nn.pop();return Qe=k.key,me=k.size,ya=k.color,On=null,this},u.setCurrentTransformationMatrix=function(k){return ae(k.toString()+" cm"),this},u.comment=function(k){return ae("#"+k),this};var cs=function(k,$){var oe=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return oe},set:function(Ee){isNaN(Ee)||(oe=parseFloat(Ee))}});var ue=$||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ue},set:function(Ee){isNaN(Ee)||(ue=parseFloat(Ee))}});var we="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return we},set:function(Ee){we=Ee.toString()}}),this},Fl=function(k,$,oe,ue){cs.call(this,k,$),this.type="rect";var we=oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return we},set:function(Ie){isNaN(Ie)||(we=parseFloat(Ie))}});var Ee=ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ee},set:function(Ie){isNaN(Ie)||(Ee=parseFloat(Ie))}}),this},Bl=function(){this.page=jt,this.currentPage=D,this.pages=be.slice(0),this.pagesContext=dt.slice(0),this.x=br,this.y=_t,this.matrix=Ur,this.width=wa(D),this.height=Eo(D),this.outputDestination=Oe,this.id="",this.objectNumber=-1};Bl.prototype.restore=function(){jt=this.page,D=this.currentPage,dt=this.pagesContext,be=this.pages,br=this.x,_t=this.y,Ur=this.matrix,ql(D,this.width),Ul(D,this.height),Oe=this.outputDestination};var Tc=function(k,$,oe,ue,we){Ne.push(new Bl),jt=D=0,be=[],br=k,_t=$,Ur=we,Tl([oe,ue])},Rh=function(k){if(Jr[k])Ne.pop().restore();else{var $=new Bl,oe="Xo"+(Object.keys(Yt).length+1).toString(10);$.id=oe,Jr[k]=oe,Yt[oe]=$,Et.publish("addFormObject",$),Ne.pop().restore()}};for(var fs in u.beginFormObject=function(k,$,oe,ue,we){return Tc(k,$,oe,ue,we),this},u.endFormObject=function(k){return Rh(k),this},u.doFormObject=function(k,$){var oe=Yt[Jr[k]];return ae("q"),ae($.toString()+" cm"),ae("/"+oe.id+" Do"),ae("Q"),this},u.getFormObject=function(k){var $=Yt[Jr[k]];return{x:$.x,y:$.y,width:$.width,height:$.height,matrix:$.matrix}},u.save=function(k,$){return k=k||"generated.pdf",($=$||{}).returnPromise=$.returnPromise||!1,$.returnPromise===!1?(Ca(os(eo()),k),typeof Ca.unload=="function"&&ft.setTimeout&&setTimeout(Ca.unload,911),this):new Promise(function(oe,ue){try{var we=Ca(os(eo()),k);typeof Ca.unload=="function"&&ft.setTimeout&&setTimeout(Ca.unload,911),oe(we)}catch(Ee){ue(Ee.message)}})},ct.API)ct.API.hasOwnProperty(fs)&&(fs==="events"&&ct.API.events.length?function(k,$){var oe,ue,we;for(we=$.length-1;we!==-1;we--)oe=$[we][0],ue=$[we][1],k.subscribe.apply(k,[oe].concat(typeof ue=="function"?[ue]:ue))}(Et,ct.API.events):u[fs]=ct.API[fs]);var wa=u.getPageWidth=function(k){return(dt[k=k||D].mediaBox.topRightX-dt[k].mediaBox.bottomLeftX)/ze},ql=u.setPageWidth=function(k,$){dt[k].mediaBox.topRightX=$*ze+dt[k].mediaBox.bottomLeftX},Eo=u.getPageHeight=function(k){return(dt[k=k||D].mediaBox.topRightY-dt[k].mediaBox.bottomLeftY)/ze},Ul=u.setPageHeight=function(k,$){dt[k].mediaBox.topRightY=$*ze+dt[k].mediaBox.bottomLeftY};return u.internal={pdfEscape:Tn,getStyle:Sc,getFont:Th,getFontSize:ve,getCharSpace:Ch,getTextColor:jh,getLineHeight:Nc,getLineHeightFactor:Oc,getLineWidth:ls,write:Ke,getHorizontalCoordinate:qi,getVerticalCoordinate:to,getCoordinateString:Ph,getVerticalCoordinateString:No,collections:{},newObject:ht,newAdditionalObject:Ct,newObjectDeferred:bt,newObjectDeferredBegin:Jt,getFilters:cr,putStream:$r,events:Et,scaleFactor:ze,pageSize:{getWidth:function(){return wa(D)},setWidth:function(k){ql(D,k)},getHeight:function(){return Eo(D)},setHeight:function(k){Ul(D,k)}},encryptionOptions:p,encryption:an,getEncryptor:kh,output:as,getNumberOfPages:wh,pages:be,out:ae,f2:R,f3:S,getPageInfo:xc,getPageInfoByObjId:pt,getCurrentPageInfo:Ah,getPDFVersion:v,Point:cs,Rectangle:Fl,Matrix:Le,hasHotfix:_c},Object.defineProperty(u.internal.pageSize,"width",{get:function(){return wa(D)},set:function(k){ql(D,k)},enumerable:!0,configurable:!0}),Object.defineProperty(u.internal.pageSize,"height",{get:function(){return Eo(D)},set:function(k){Ul(D,k)},enumerable:!0,configurable:!0}),vh.call(u,se),Qe="F1",yc(i,r),Et.publish("initialized"),u}Ms.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ms.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ms.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Ms.prototype.processOwnerPassword=function(t,e){return S1(x1(e).substr(0,5),t)},Ms.prototype.encryptor=function(t,e){var r=x1(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return S1(r,n)}},Md.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Ut(t)!==Ut(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},ct.API={events:[]},ct.version="2.5.2";var yr=ct.API,Ug=1,ts=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Cs=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mt=function(t){return t.toFixed(2)},Ho=function(t){return t.toFixed(5)};yr.__acroform__={};var qn=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},K2=function(t){return t*Ug},Wi=function(t){var e=new m_,r=Xe.internal.getHeight(t)||0,n=Xe.internal.getWidth(t)||0;return e.BBox=[0,0,Number(mt(n)),Number(mt(r))],e},PP=yr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},jP=yr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},CP=yr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Er=yr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return CP(t,e-1)},Or=yr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return PP(t,e-1)},Lr=yr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return jP(t,e-1)},RP=yr.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],o=t[1],a=t[2],s=t[3],l={};return l.lowerLeft_X=r(i)||0,l.lowerLeft_Y=n(o+s)||0,l.upperRight_X=r(i+a)||0,l.upperRight_Y=n(o)||0,[Number(mt(l.lowerLeft_X)),Number(mt(l.lowerLeft_Y)),Number(mt(l.upperRight_X)),Number(mt(l.upperRight_Y))]},IP=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=k1(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+mt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Wi(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},k1=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(S){return S.split(`
`)}):i.map(function(S){return[S]});var o=r,a=Xe.internal.getHeight(t)||0;a=a<0?-a:a;var s=Xe.internal.getWidth(t)||0;s=s<0?-s:s;var l=function(S,E,j){if(S+1<i.length){var M=E+" "+i[S+1][0];return Rf(M,t,j).width<=s-4}return!1};o++;e:for(;o>0;){e="",o--;var c,p,d=Rf("3",t,o).height,f=t.multiline?a-o:(a-d)/2,u=f+=2,y=0,v=0,b=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+Rf(e,t,o=12).width+", FieldWidth:"+s+`
`;break}for(var g="",m=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var x=!1;if(i[_].length!==1&&b!==i[_].length-1){if((d+2)*(m+2)+2>a)continue e;g+=i[_][b],x=!0,v=_,_--}else{g=(g+=i[_][b]+" ").substr(g.length-1)==" "?g.substr(0,g.length-1):g;var A=parseInt(_),I=l(A,g,o),P=_>=i.length-1;if(I&&!P){g+=" ",b=0;continue}if(I||P){if(P)v=A;else if(t.multiline&&(d+2)*(m+2)+2>a)continue e}else{if(!t.multiline||(d+2)*(m+2)+2>a)continue e;v=A}}for(var O="",F=y;F<=v;F++){var R=i[F];if(t.multiline){if(F===v){O+=R[b]+" ",b=(b+1)%R.length;continue}if(F===y){O+=R[R.length-1]+" ";continue}}O+=R[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,p=Rf(O,t,o).width,t.textAlign){case"right":c=s-p-2;break;case"center":c=(s-p)/2;break;case"left":default:c=2}e+=mt(c)+" "+mt(u)+` Td
`,e+="("+ts(O)+`) Tj
`,e+=-mt(c)+` 0 Td
`,u=-(o+2),p=0,y=x?v:v+1,m++,g=""}break}return n.text=e,n.fontSize=o,n},Rf=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},DP={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},MP=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},FP=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,i=t[r];e.internal.newObjectDeferredBegin(i.objId,!0),Ut(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[n]}},BP=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Di.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(DP)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Ug=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new v_,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];o.objId=void 0,o.hasAnnotation&&MP(o,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var o=!n;for(var a in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var s=n[a],l=[],c=s.Rect;if(s.Rect&&(s.Rect=RP(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Xe.createDefaultAppearanceStream(s),Ut(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=c,s.hasAppearanceStream&&!s.appearanceStreamContent){var p=IP(s);l.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(s.appearanceStreamContent){var d="";for(var f in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(f)){var u=s.appearanceStreamContent[f];if(d+="/"+f+" ",d+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var a in u)if(u.hasOwnProperty(a)){var y=u[a];typeof y=="function"&&(y=y.call(i,s)),d+="/"+a+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=u)=="function"&&(y=y.call(i,s)),d+="/"+a+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:s.objId}),i.internal.out("endobj")}o&&FP(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},g_=yr.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var i="[",o=0;o<t.length;o++)switch(o!==0&&(i+=" "),Ut(t[o])){case"boolean":case"number":case"object":i+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+ts(n(t[o].toString()))+")"):i+=t[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Xp=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+ts(n(t))+")"},Ki=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ki.prototype.toString=function(){return this.objId+" 0 R"},Ki.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ki.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:g_(i,this.objId,this.scope)}):i instanceof Ki?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var m_=function(){Ki.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};qn(m_,Ki);var v_=function(){Ki.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+ts(r(t))+")"}},set:function(r){t=r}})};qn(v_,Ki);var Di=function t(){Ki.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute F supplied.');e=g}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Er(e,3)},set:function(g){g?this.F=Or(e,3):this.F=Lr(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute Ff supplied.');r=g}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(g){n=g!==void 0?g:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(g){n[0]=g}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(g){n[1]=g}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(g){n[2]=g}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(g){n[3]=g}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(g){switch(g){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=g;break;default:throw new Error('Invalid value "'+g+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Fd)return;o="FieldObject"+t.FieldNum++}var g=function(m){return m};return this.scope&&(g=this.scope.internal.getEncryptor(this.objId)),"("+ts(g(o))+")"},set:function(g){o=g.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(g){o=g}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(g){a=g}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(g){s=g}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(g){l=g}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/Ug:c},set:function(g){c=g}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(g){p=g}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Fd||this instanceof Ha))return Xp(d,this.objId,this.scope)},set:function(g){g=g.toString(),d=g}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Kr?f:Xp(f,this.objId,this.scope)},set:function(g){g=g.toString(),f=this instanceof Kr?g:g.substr(0,1)==="("?Cs(g.substr(1,g.length-2)):Cs(g)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Kr?Cs(f.substr(1,f.length-1)):f},set:function(g){g=g.toString(),f=this instanceof Kr?"/"+g:g}});var u=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(u)return u},set:function(g){this.V=g}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(u)return this instanceof Kr?u:Xp(u,this.objId,this.scope)},set:function(g){g=g.toString(),u=this instanceof Kr?g:g.substr(0,1)==="("?Cs(g.substr(1,g.length-2)):Cs(g)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Kr?Cs(u.substr(1,u.length-1)):u},set:function(g){g=g.toString(),u=this instanceof Kr?"/"+g:g}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(g){g=!!g,v=g}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(g){y=g}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,1)},set:function(g){g?this.Ff=Or(this.Ff,1):this.Ff=Lr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,2)},set:function(g){g?this.Ff=Or(this.Ff,2):this.Ff=Lr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,3)},set:function(g){g?this.Ff=Or(this.Ff,3):this.Ff=Lr(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(g){if([0,1,2].indexOf(g)===-1)throw new Error('Invalid value "'+g+'" for attribute Q supplied.');b=g}}),Object.defineProperty(this,"textAlign",{get:function(){var g;switch(b){case 0:default:g="left";break;case 1:g="center";break;case 2:g="right"}return g},configurable:!0,enumerable:!0,set:function(g){switch(g){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};qn(Di,Ki);var ol=function(){Di.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return g_(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(o,a,s){s||(s=1);for(var l,c=[];l=a.exec(o);)c.push(l[s]);return c}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,18)},set:function(r){r?this.Ff=Or(this.Ff,18):this.Ff=Lr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Or(this.Ff,19):this.Ff=Lr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,20)},set:function(r){r?(this.Ff=Or(this.Ff,20),e.sort()):this.Ff=Lr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,22)},set:function(r){r?this.Ff=Or(this.Ff,22):this.Ff=Lr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,23)},set:function(r){r?this.Ff=Or(this.Ff,23):this.Ff=Lr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,27)},set:function(r){r?this.Ff=Or(this.Ff,27):this.Ff=Lr(this.Ff,27)}}),this.hasAppearanceStream=!1};qn(ol,Di);var al=function(){ol.call(this),this.fontName="helvetica",this.combo=!1};qn(al,ol);var sl=function(){al.call(this),this.combo=!0};qn(sl,al);var Xf=function(){sl.call(this),this.edit=!0};qn(Xf,sl);var Kr=function(){Di.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,15)},set:function(r){r?this.Ff=Or(this.Ff,15):this.Ff=Lr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,16)},set:function(r){r?this.Ff=Or(this.Ff,16):this.Ff=Lr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,17)},set:function(r){r?this.Ff=Or(this.Ff,17):this.Ff=Lr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,26)},set:function(r){r?this.Ff=Or(this.Ff,26):this.Ff=Lr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+ts(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){Ut(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};qn(Kr,Di);var Qf=function(){Kr.call(this),this.pushButton=!0};qn(Qf,Kr);var ll=function(){Kr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};qn(ll,Kr);var Fd=function(){var t,e;Di.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,a=[];for(o in a.push("<<"),n)a.push("/"+o+" ("+ts(i(n[o]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Ut(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Xe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};qn(Fd,Di),ll.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},ll.prototype.createOption=function(t){var e=new Fd;return e.Parent=this,e.optionName=t,this.Kids.push(e),qP.call(this.scope,e),e};var Zf=function(){Kr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Xe.CheckBox.createAppearanceStream()};qn(Zf,Kr);var Ha=function(){Di.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,13)},set:function(e){e?this.Ff=Or(this.Ff,13):this.Ff=Lr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,21)},set:function(e){e?this.Ff=Or(this.Ff,21):this.Ff=Lr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,23)},set:function(e){e?this.Ff=Or(this.Ff,23):this.Ff=Lr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,24)},set:function(e){e?this.Ff=Or(this.Ff,24):this.Ff=Lr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,25)},set:function(e){e?this.Ff=Or(this.Ff,25):this.Ff=Lr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,26)},set:function(e){e?this.Ff=Or(this.Ff,26):this.Ff=Lr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};qn(Ha,Di);var ed=function(){Ha.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,14)},set:function(t){t?this.Ff=Or(this.Ff,14):this.Ff=Lr(this.Ff,14)}}),this.password=!0};qn(ed,Ha);var Xe={CheckBox:{createAppearanceStream:function(){return{N:{On:Xe.CheckBox.YesNormal},D:{On:Xe.CheckBox.YesPushDown,Off:Xe.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Wi(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=k1(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+mt(Xe.internal.getWidth(t))+" "+mt(Xe.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+mt(o.fontSize)+" Tf "+i),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Wi(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],o=Xe.internal.getHeight(t),a=Xe.internal.getWidth(t),s=k1(t,t.caption);return i.push("1 g"),i.push("0 0 "+mt(a)+" "+mt(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+mt(a-1)+" "+mt(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+mt(s.fontSize)+" Tf "+n),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Wi(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mt(Xe.internal.getWidth(t))+" "+mt(Xe.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Xe.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Xe.RadioButton.Circle.YesNormal,e.D[t]=Xe.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Wi(t);e.scope=t.scope;var r=[],n=Xe.internal.getWidth(t)<=Xe.internal.getHeight(t)?Xe.internal.getWidth(t)/4:Xe.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Xe.internal.Bezier_C,o=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ho(Xe.internal.getWidth(t)/2)+" "+Ho(Xe.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Wi(t);e.scope=t.scope;var r=[],n=Xe.internal.getWidth(t)<=Xe.internal.getHeight(t)?Xe.internal.getWidth(t)/4:Xe.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*Xe.internal.Bezier_C).toFixed(5)),a=Number((n*Xe.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ho(Xe.internal.getWidth(t)/2)+" "+Ho(Xe.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ho(Xe.internal.getWidth(t)/2)+" "+Ho(Xe.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Wi(t);e.scope=t.scope;var r=[],n=Xe.internal.getWidth(t)<=Xe.internal.getHeight(t)?Xe.internal.getWidth(t)/4:Xe.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*Xe.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ho(Xe.internal.getWidth(t)/2)+" "+Ho(Xe.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Xe.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Xe.RadioButton.Cross.YesNormal,e.D[t]=Xe.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Wi(t);e.scope=t.scope;var r=[],n=Xe.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+mt(Xe.internal.getWidth(t)-2)+" "+mt(Xe.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(mt(n.x1.x)+" "+mt(n.x1.y)+" m"),r.push(mt(n.x2.x)+" "+mt(n.x2.y)+" l"),r.push(mt(n.x4.x)+" "+mt(n.x4.y)+" m"),r.push(mt(n.x3.x)+" "+mt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Wi(t);e.scope=t.scope;var r=Xe.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+mt(Xe.internal.getWidth(t))+" "+mt(Xe.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+mt(Xe.internal.getWidth(t)-2)+" "+mt(Xe.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(mt(r.x1.x)+" "+mt(r.x1.y)+" m"),n.push(mt(r.x2.x)+" "+mt(r.x2.y)+" l"),n.push(mt(r.x4.x)+" "+mt(r.x4.y)+" m"),n.push(mt(r.x3.x)+" "+mt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Wi(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mt(Xe.internal.getWidth(t))+" "+mt(Xe.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Xe.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Xe.internal.getWidth(t),r=Xe.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Xe.internal.getWidth=function(t){var e=0;return Ut(t)==="object"&&(e=K2(t.Rect[2])),e},Xe.internal.getHeight=function(t){var e=0;return Ut(t)==="object"&&(e=K2(t.Rect[3])),e};var qP=yr.addField=function(t){if(BP(this,t),!(t instanceof Di))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};yr.AcroFormChoiceField=ol,yr.AcroFormListBox=al,yr.AcroFormComboBox=sl,yr.AcroFormEditBox=Xf,yr.AcroFormButton=Kr,yr.AcroFormPushButton=Qf,yr.AcroFormRadioButton=ll,yr.AcroFormCheckBox=Zf,yr.AcroFormTextField=Ha,yr.AcroFormPasswordField=ed,yr.AcroFormAppearance=Xe,yr.AcroForm={ChoiceField:ol,ListBox:al,ComboBox:sl,EditBox:Xf,Button:Kr,PushButton:Qf,RadioButton:ll,CheckBox:Zf,TextField:Ha,PasswordField:ed,Appearance:Xe},ct.AcroForm={ChoiceField:ol,ListBox:al,ComboBox:sl,EditBox:Xf,Button:Kr,PushButton:Qf,RadioButton:ll,CheckBox:Zf,TextField:Ha,PasswordField:ed,Appearance:Xe};ct.AcroForm;function y_(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(S,E){var j,M,V,ee,te,Q=e;if((E=E||e)==="RGBA"||S.data!==void 0&&S.data instanceof Uint8ClampedArray&&"height"in S&&"width"in S)return"RGBA";if(I(S))for(te in r)for(V=r[te],j=0;j<V.length;j+=1){for(ee=!0,M=0;M<V[j].length;M+=1)if(V[j][M]!==void 0&&V[j][M]!==S[M]){ee=!1;break}if(ee===!0){Q=te;break}}else for(te in r)for(V=r[te],j=0;j<V.length;j+=1){for(ee=!0,M=0;M<V[j].length;M+=1)if(V[j][M]!==void 0&&V[j][M]!==S.charCodeAt(M)){ee=!1;break}if(ee===!0){Q=te;break}}return Q===e&&E!==e&&(Q=E),Q},i=function S(E){for(var j=this.internal.write,M=this.internal.putStream,V=(0,this.internal.getFilters)();V.indexOf("FlateEncode")!==-1;)V.splice(V.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var ee=[];if(ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Image"}),ee.push({key:"Width",value:E.width}),ee.push({key:"Height",value:E.height}),E.colorSpace===b.INDEXED?ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(ee.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===b.DEVICE_CMYK&&ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ee.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&ee.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var te="",Q=0,J=E.transparency.length;Q<J;Q++)te+=E.transparency[Q]+" "+E.transparency[Q]+" ";ee.push({key:"Mask",value:"["+te+"]"})}E.sMask!==void 0&&ee.push({key:"SMask",value:E.objectId+1+" 0 R"});var W=E.filter!==void 0?["/"+E.filter]:void 0;if(M({data:E.data,additionalKeyValues:ee,alreadyAppliedFilters:W,objectId:E.objectId}),j("endobj"),"sMask"in E&&E.sMask!==void 0){var q="/Predictor "+E.predictor+" /Colors 1 /BitsPerComponent "+E.bitsPerComponent+" /Columns "+E.width,L={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:q,data:E.sMask};"filter"in E&&(L.filter=E.filter),S.call(this,L)}if(E.colorSpace===b.INDEXED){var D=this.internal.newObject();M({data:O(new Uint8Array(E.palette)),objectId:D}),j("endobj")}},o=function(){var S=this.internal.collections.addImage_images;for(var E in S)i.call(this,S[E])},a=function(){var S,E=this.internal.collections.addImage_images,j=this.internal.write;for(var M in E)j("/I"+(S=E[M]).index,S.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var S=this.internal.collections.addImage_images;return s.call(this),S},c=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(S){return typeof t["process"+S.toUpperCase()]=="function"},d=function(S){return Ut(S)==="object"&&S.nodeType===1},f=function(S,E){if(S.nodeName==="IMG"&&S.hasAttribute("src")){var j=""+S.getAttribute("src");if(j.indexOf("data:image/")===0)return Bu(unescape(j).split("base64,").pop());var M=t.loadFile(j,!0);if(M!==void 0)return M}if(S.nodeName==="CANVAS"){if(S.width===0||S.height===0)throw new Error("Given canvas must have data. Canvas width: "+S.width+", height: "+S.height);var V;switch(E){case"PNG":V="image/png";break;case"WEBP":V="image/webp";break;case"JPEG":case"JPG":default:V="image/jpeg"}return Bu(S.toDataURL(V,1).split("base64,").pop())}},u=function(S){var E=this.internal.collections.addImage_images;if(E){for(var j in E)if(S===E[j].alias)return E[j]}},y=function(S,E,j){return S||E||(S=-96,E=-96),S<0&&(S=-1*j.width*72/S/this.internal.scaleFactor),E<0&&(E=-1*j.height*72/E/this.internal.scaleFactor),S===0&&(S=E*j.width/j.height),E===0&&(E=S*j.height/j.width),[S,E]},v=function(S,E,j,M,V,ee){var te=y.call(this,j,M,V),Q=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,W=l.call(this);if(j=te[0],M=te[1],W[V.index]=V,ee){ee*=Math.PI/180;var q=Math.cos(ee),L=Math.sin(ee),D=function(H){return H.toFixed(4)},U=[D(q),D(L),D(-1*L),D(q),0,0,"cm"]}this.internal.write("q"),ee?(this.internal.write([1,"0","0",1,Q(S),J(E+M),"cm"].join(" ")),this.internal.write(U.join(" ")),this.internal.write([Q(j),"0","0",Q(M),"0","0","cm"].join(" "))):this.internal.write([Q(j),"0","0",Q(M),Q(S),J(E+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+V.index+" Do"),this.internal.write("Q")},b=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},m=t.__addimage__.sHashCode=function(S){var E,j,M=0;if(typeof S=="string")for(j=S.length,E=0;E<j;E++)M=(M<<5)-M+S.charCodeAt(E),M|=0;else if(I(S))for(j=S.byteLength/2,E=0;E<j;E++)M=(M<<5)-M+S[E],M|=0;return M},_=t.__addimage__.validateStringAsBase64=function(S){(S=S||"").toString().trim();var E=!0;return S.length===0&&(E=!1),S.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(S.substr(0,S.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(S.substr(-2))===!1&&(E=!1),E},x=t.__addimage__.extractImageFromDataUrl=function(S){var E=(S=S||"").split("base64,"),j=null;if(E.length===2){var M=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(E[0]);Array.isArray(M)&&(j={mimeType:M[1],charset:M[2],data:E[1]})}return j},A=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(S){return A()&&S instanceof ArrayBuffer};var I=t.__addimage__.isArrayBufferView=function(S){return A()&&typeof Uint32Array<"u"&&(S instanceof Int8Array||S instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array)},P=t.__addimage__.binaryStringToUint8Array=function(S){for(var E=S.length,j=new Uint8Array(E),M=0;M<E;M++)j[M]=S.charCodeAt(M);return j},O=t.__addimage__.arrayBufferToBinaryString=function(S){for(var E="",j=I(S)?S:new Uint8Array(S),M=0;M<j.length;M+=8192)E+=String.fromCharCode.apply(null,j.subarray(M,M+8192));return E};t.addImage=function(){var S,E,j,M,V,ee,te,Q,J;if(typeof arguments[1]=="number"?(E=e,j=arguments[1],M=arguments[2],V=arguments[3],ee=arguments[4],te=arguments[5],Q=arguments[6],J=arguments[7]):(E=arguments[1],j=arguments[2],M=arguments[3],V=arguments[4],ee=arguments[5],te=arguments[6],Q=arguments[7],J=arguments[8]),Ut(S=arguments[0])==="object"&&!d(S)&&"imageData"in S){var W=S;S=W.imageData,E=W.format||E||e,j=W.x||j||0,M=W.y||M||0,V=W.w||W.width||V,ee=W.h||W.height||ee,te=W.alias||te,Q=W.compression||Q,J=W.rotation||W.angle||J}var q=this.internal.getFilters();if(Q===void 0&&q.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(j)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var L=F.call(this,S,E,te,Q);return v.call(this,j,M,V,ee,L,J),this};var F=function(S,E,j,M){var V,ee,te;if(typeof S=="string"&&n(S)===e){S=unescape(S);var Q=R(S,!1);(Q!==""||(Q=t.loadFile(S,!0))!==void 0)&&(S=Q)}if(d(S)&&(S=f(S,E)),E=n(S,E),!p(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((te=j)==null||te.length===0)&&(j=function(J){return typeof J=="string"||I(J)?m(J):I(J.data)?m(J.data):null}(S)),(V=u.call(this,j))||(A()&&(S instanceof Uint8Array||E==="RGBA"||(ee=S,S=P(S))),V=this["process"+E.toUpperCase()](S,c.call(this),j,function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in t.image_compression?J:g.NONE}(M),ee)),!V)throw new Error("An unknown error occurred whilst processing the image.");return V},R=t.__addimage__.convertBase64ToBinaryString=function(S,E){var j;E=typeof E!="boolean"||E;var M,V="";if(typeof S=="string"){M=(j=x(S))!==null?j.data:S;try{V=Bu(M)}catch(ee){if(E)throw _(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};t.getImageProperties=function(S){var E,j,M="";if(d(S)&&(S=f(S)),typeof S=="string"&&n(S)===e&&((M=R(S,!1))===""&&(M=t.loadFile(S)||""),S=M),j=n(S),!p(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(!A()||S instanceof Uint8Array||(S=P(S)),!(E=this["process"+j.toUpperCase()](S)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=j,E}})(ct.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};ct.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,o,a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,p=!1,d=0;d<c.length&&!p;d++)switch((n=c[d]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var f=0;f<c.length;f++){n=c[f];var u=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(v.objId),m=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+u(g(n.contents))+")",o+=" /Popup "+b.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+u(g(m))+") >>",v.content=o;var _=v.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+_,n.open&&(o+=" /Open true"),o+=" >>",b.content=o,this.internal.write(v.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+a(n.bounds.x)+" "+s(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var x=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+u(y(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+x+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var A=this.annotations._nameMap[n.options.name];n.options.pageNumber=A.page,n.options.top=A.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+u(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var I=s(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,o,a){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(r),y:c(n),w:l(r+i),h:c(n+o)},options:a,type:"link"})},t.textWithLink=function(r,n,i,o){var a,s,l=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){s=o.maxWidth;var p=this.splitTextToSize(r,s).length;a=Math.ceil(c*p)}else s=l,a=c;return this.text(r,n,i,o),i+=.2*c,o.align==="center"&&(n-=l/2),o.align==="right"&&(n-=l),this.link(n,i-c,s,a,o),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(ct.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(v){return e[v.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},s=t.__arabicParser__.isArabicEndLetter=function(v){return a(v)&&o(v)&&e[v.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(v){return a(v)&&i.indexOf(v.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return a(v)&&o(v)&&e[v.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(v){return a(v)&&o(v)&&e[v.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(v){return a(v)&&o(v)&&e[v.charCodeAt(0)].length>=3};var p=t.__arabicParser__.arabicLetterHasMedialForm=function(v){return a(v)&&o(v)&&e[v.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(v){var b=0,g=r,m="",_=0;for(b=0;b<v.length;b+=1)g[v.charCodeAt(b)]!==void 0?(_++,typeof(g=g[v.charCodeAt(b)])=="number"&&(m+=String.fromCharCode(g),g=r,_=0),b===v.length-1&&(g=r,m+=v.charAt(b-(_-1)),b-=_-1,_=0)):(g=r,m+=v.charAt(b-_),b-=_,_=0);return m};t.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var f=t.__arabicParser__.getCorrectForm=function(v,b,g){return a(v)?o(v)===!1?-1:!c(v)||!a(b)&&!a(g)||!a(g)&&s(b)||s(v)&&!a(b)||s(v)&&l(b)||s(v)&&s(b)?0:p(v)&&a(b)&&!s(b)&&a(g)&&c(g)?3:s(v)||!a(g)?1:2:-1},u=function(v){var b=0,g=0,m=0,_="",x="",A="",I=(v=v||"").split("\\s+"),P=[];for(b=0;b<I.length;b+=1){for(P.push(""),g=0;g<I[b].length;g+=1)_=I[b][g],x=I[b][g-1],A=I[b][g+1],a(_)?(m=f(_,x,A),P[b]+=m!==-1?String.fromCharCode(e[_.charCodeAt(0)][m]):_):P[b]+=_;P[b]=d(P[b])}return P.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var v,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,g=[];if(Array.isArray(b)){var m=0;for(g=[],m=0;m<b.length;m+=1)Array.isArray(b[m])?g.push([u(b[m][0]),b[m][1],b[m][2]]):g.push([u(b[m])]);v=g}else v=u(b);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};t.events.push(["preProcessText",y])}(ct.API),ct.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(s){r=s}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(s){n=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(s){o=s}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(s){a=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ct.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var u=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(v){y=v}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){n.call(this);var p=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),f=c.scaleFactor||this.internal.scaleFactor,u=0,y=0,v=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var g=c.maxWidth;g>0?typeof l=="string"?l=this.splitTextToSize(l,g):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(_,x){return _.concat(b.splitTextToSize(x,g))},[])):l=Array.isArray(l)?l:[l];for(var m=0;m<l.length;m++)u<(v=this.getStringUnitWidth(l[m],{font:d})*p)&&(u=v);return u!==0&&(y=l.length),{w:u/=f,h:Math.max((y*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/f,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,u=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,u&&f&&(this.printHeaderRow(l.lineNumber,!0),l.y+=f[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-p,l.y+p,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+p,{align:"center",baseline:"top",maxWidth:l.width-p-p}):this.text(l.text,l.x+p,l.y+p,{align:"left",baseline:"top",maxWidth:l.width-p-p})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,p,d,f){if(n.call(this),!p)throw new Error("No data for PDF table.");var u,y,v,b,g=[],m=[],_=[],x={},A={},I=[],P=[],O=(f=f||{}).autoSize||!1,F=f.printHeaders!==!1,R=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,S=f.margins||Object.assign({width:this.getPageWidth()},e),E=typeof f.padding=="number"?f.padding:3,j=f.headerBackgroundColor||"#c8c8c8",M=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=M,this.setFontSize(R),d==null)m=g=Object.keys(p[0]),_=g.map(function(){return"left"});else if(Array.isArray(d)&&Ut(d[0])==="object")for(g=d.map(function(W){return W.name}),m=d.map(function(W){return W.prompt||W.name||""}),_=d.map(function(W){return W.align||"left"}),u=0;u<d.length;u+=1)A[d[u].name]=d[u].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(m=g=d,_=g.map(function(){return"left"}));if(O||Array.isArray(d)&&typeof d[0]=="string")for(u=0;u<g.length;u+=1){for(x[b=g[u]]=p.map(function(W){return W[b]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(m[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=x[b],this.setFont(void 0,"normal"),v=0;v<y.length;v+=1)I.push(this.getTextDimensions(y[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);A[b]=Math.max.apply(null,I)+E+E,I=[]}if(F){var V={};for(u=0;u<g.length;u+=1)V[g[u]]={},V[g[u]].text=m[u],V[g[u]].align=_[u];var ee=s.call(this,V,A);P=g.map(function(W){return new o(l,c,A[W],ee,V[W].text,void 0,V[W].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var te=d.reduce(function(W,q){return W[q.name]=q.align,W},{});for(u=0;u<p.length;u+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:u,data:p[u]},this);var Q=s.call(this,p[u],A);for(v=0;v<g.length;v+=1){var J=p[u][g[v]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:u,col:v,data:J},this),a.call(this,new o(l,c,A[g[v]],Q,J,u+2,te[g[v]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var s=function(l,c){var p=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(l).map(function(u){var y=l[u];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,c[u]-p-p)},this).map(function(u){return this.getLineHeightFactor()*u.length*d/f+p+p},this).reduce(function(u,y){return Math.max(u,y)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],u=0;u<this.internal.__cell__.tableHeaderRow.length;u+=1){p=this.internal.__cell__.tableHeaderRow[u].clone(),c&&(p.y=this.internal.__cell__.margins.top||0,f.push(p)),p.lineNumber=l;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(y)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),r=!1}}(ct.API);var w_={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},b_=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],A1=y_(b_),__=[100,200,300,400,500,600,700,800,900],UP=y_(__);function N1(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(o){return w_[o=o||"normal"]?o:"normal"}(t.style),n=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(o){return typeof A1[o=o||"normal"]=="number"?o:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function Y2(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var zP={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},J2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function X2(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function $P(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",i=Object.assign({},zP,r.genericFontFamilies||{}),o=null,a=null,s=0;s<e.length;++s)if(i[(o=N1(e[s])).family]&&(o.family=i[o.family]),t.hasOwnProperty(o.family)){a=t[o.family];break}if(!(a=a||t[n]))throw new Error("Could not find a font-family for the rule '"+X2(o)+"' and default family '"+n+"'.");if(a=function(l,c){if(c[l])return c[l];var p=A1[l],d=p<=A1.normal?-1:1,f=Y2(c,b_,p,d);if(!f)throw new Error("Could not find a matching font-stretch value for "+l);return f}(o.stretch,a),a=function(l,c){if(c[l])return c[l];for(var p=w_[l],d=0;d<p.length;++d)if(c[p[d]])return c[p[d]];throw new Error("Could not find a matching font-style for "+l)}(o.style,a),!(a=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var p=UP[l],d=Y2(c,__,p,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(o.weight,a)))throw new Error("Failed to resolve a font for the rule '"+X2(o)+"'.");return a}function Q2(t){return t.trimLeft()}function HP(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function WP(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var If,Z2,ey,Qp=["times"];(function(t){var e,r,n,i,o,a,s,l,c,p=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new l,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new a,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new a,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,a=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,c=new p}]);var d=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=L;Object.defineProperty(this,"pdf",{get:function(){return D}});var U=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return U},set:function(ye){U=!!ye}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(ye){H=!!ye}});var B=0;Object.defineProperty(this,"posX",{get:function(){return B},set:function(ye){isNaN(ye)||(B=ye)}});var Y=0;Object.defineProperty(this,"posY",{get:function(){return Y},set:function(ye){isNaN(ye)||(Y=ye)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ye){var ae;typeof ye=="number"?ae=[ye,ye,ye,ye]:((ae=new Array(4))[0]=ye[0],ae[1]=ye.length>=2?ye[1]:ae[0],ae[2]=ye.length>=3?ye[2]:ae[0],ae[3]=ye.length>=4?ye[3]:ae[1]),c.margin=ae}});var re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return re},set:function(ye){re=ye}});var ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return ne},set:function(ye){ne=ye}});var de=[];Object.defineProperty(this,"pageBreaks",{get:function(){return de},set:function(ye){de=ye}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ye){ye instanceof p&&(c=ye)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ye){c.path=ye}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(ye){be=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var ae;ae=f(ye),this.ctx.fillStyle=ae.style,this.ctx.isFillTransparent=ae.a===0,this.ctx.fillOpacity=ae.a,this.pdf.setFillColor(ae.r,ae.g,ae.b,{a:ae.a}),this.pdf.setTextColor(ae.r,ae.g,ae.b,{a:ae.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var ae=f(ye);this.ctx.strokeStyle=ae.style,this.ctx.isStrokeTransparent=ae.a===0,this.ctx.strokeOpacity=ae.a,ae.a===0?this.pdf.setDrawColor(255,255,255):(ae.a,this.pdf.setDrawColor(ae.r,ae.g,ae.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var Te=null;function Oe(ye,ae){if(Te===null){var Ke=function(he){var se=[];return Object.keys(he).forEach(function(me){he[me].forEach(function(Se){var ve=null;switch(Se){case"bold":ve={family:me,weight:"bold"};break;case"italic":ve={family:me,style:"italic"};break;case"bolditalic":ve={family:me,weight:"bold",style:"italic"};break;case"":case"normal":ve={family:me}}ve!==null&&(ve.ref={name:me,style:Se},se.push(ve))})}),se}(ye.getFontList());Te=function(he){for(var se={},me=0;me<he.length;++me){var Se=N1(he[me]),ve=Se.family,Me=Se.stretch,qe=Se.style,Ue=Se.weight;se[ve]=se[ve]||{},se[ve][Me]=se[ve][Me]||{},se[ve][Me][qe]=se[ve][Me][qe]||{},se[ve][Me][qe][Ue]=Se}return se}(Ke.concat(ae))}return Te}var Fe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Fe},set:function(ye){Te=null,Fe=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var ae;if(this.ctx.font=ye,(ae=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var Ke=ae[1],he=(ae[2],ae[3]),se=ae[4],me=(ae[5],ae[6]),Se=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(se)[2];se=Math.floor(Se==="px"?parseFloat(se)*this.pdf.internal.scaleFactor:Se==="em"?parseFloat(se)*this.pdf.getFontSize():parseFloat(se)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(se);var ve=function(st){var Qe,ze,br=[],_t=st.trim();if(_t==="")return Qp;if(_t in J2)return[J2[_t]];for(;_t!=="";){switch(ze=null,Qe=(_t=Q2(_t)).charAt(0)){case'"':case"'":ze=HP(_t.substring(1),Qe);break;default:ze=WP(_t)}if(ze===null||(br.push(ze[0]),(_t=Q2(ze[1]))!==""&&_t.charAt(0)!==","))return Qp;_t=_t.replace(/^,/,"")}return br}(me);if(this.fontFaces){var Me=$P(Oe(this.pdf,this.fontFaces),ve.map(function(st){return{family:st,stretch:"normal",weight:he,style:Ke}}));this.pdf.setFont(Me.ref.name,Me.ref.style)}else{var qe="";(he==="bold"||parseInt(he,10)>=700||Ke==="bold")&&(qe="bold"),Ke==="italic"&&(qe+="italic"),qe.length===0&&(qe="normal");for(var Ue="",Ze={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ot=0;ot<ve.length;ot++){if(this.pdf.internal.getFont(ve[ot],qe,{noFallback:!0,disableWarning:!0})!==void 0){Ue=ve[ot];break}if(qe==="bolditalic"&&this.pdf.internal.getFont(ve[ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ue=ve[ot],qe="bold";else if(this.pdf.internal.getFont(ve[ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ue=ve[ot],qe="normal";break}}if(Ue===""){for(var it=0;it<ve.length;it++)if(Ze[ve[it]]){Ue=Ze[ve[it]];break}}Ue=Ue===""?"Times":Ue,this.pdf.setFont(Ue,qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};d.prototype.setLineDash=function(L){this.lineDash=L},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){x.call(this,"fill",!1)},d.prototype.stroke=function(){x.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(L,D){if(isNaN(L)||isNaN(D))throw Kt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var U=this.ctx.transform.applyToPoint(new a(L,D));this.path.push({type:"mt",x:U.x,y:U.y}),this.ctx.lastPoint=new a(L,D)},d.prototype.closePath=function(){var L=new a(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&Ut(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){L=new a(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(L.x,L.y)},d.prototype.lineTo=function(L,D){if(isNaN(L)||isNaN(D))throw Kt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var U=this.ctx.transform.applyToPoint(new a(L,D));this.path.push({type:"lt",x:U.x,y:U.y}),this.ctx.lastPoint=new a(U.x,U.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),x.call(this,null,!0)},d.prototype.quadraticCurveTo=function(L,D,U,H){if(isNaN(U)||isNaN(H)||isNaN(L)||isNaN(D))throw Kt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var B=this.ctx.transform.applyToPoint(new a(U,H)),Y=this.ctx.transform.applyToPoint(new a(L,D));this.path.push({type:"qct",x1:Y.x,y1:Y.y,x:B.x,y:B.y}),this.ctx.lastPoint=new a(B.x,B.y)},d.prototype.bezierCurveTo=function(L,D,U,H,B,Y){if(isNaN(B)||isNaN(Y)||isNaN(L)||isNaN(D)||isNaN(U)||isNaN(H))throw Kt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var re=this.ctx.transform.applyToPoint(new a(B,Y)),ne=this.ctx.transform.applyToPoint(new a(L,D)),de=this.ctx.transform.applyToPoint(new a(U,H));this.path.push({type:"bct",x1:ne.x,y1:ne.y,x2:de.x,y2:de.y,x:re.x,y:re.y}),this.ctx.lastPoint=new a(re.x,re.y)},d.prototype.arc=function(L,D,U,H,B,Y){if(isNaN(L)||isNaN(D)||isNaN(U)||isNaN(H)||isNaN(B))throw Kt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Y=!!Y,!this.ctx.transform.isIdentity){var re=this.ctx.transform.applyToPoint(new a(L,D));L=re.x,D=re.y;var ne=this.ctx.transform.applyToPoint(new a(0,U)),de=this.ctx.transform.applyToPoint(new a(0,0));U=Math.sqrt(Math.pow(ne.x-de.x,2)+Math.pow(ne.y-de.y,2))}Math.abs(B-H)>=2*Math.PI&&(H=0,B=2*Math.PI),this.path.push({type:"arc",x:L,y:D,radius:U,startAngle:H,endAngle:B,counterclockwise:Y})},d.prototype.arcTo=function(L,D,U,H,B){throw new Error("arcTo not implemented.")},d.prototype.rect=function(L,D,U,H){if(isNaN(L)||isNaN(D)||isNaN(U)||isNaN(H))throw Kt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,D),this.lineTo(L+U,D),this.lineTo(L+U,D+H),this.lineTo(L,D+H),this.lineTo(L,D),this.lineTo(L+U,D),this.lineTo(L,D)},d.prototype.fillRect=function(L,D,U,H){if(isNaN(L)||isNaN(D)||isNaN(U)||isNaN(H))throw Kt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!u.call(this)){var B={};this.lineCap!=="butt"&&(B.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(B.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,D,U,H),this.fill(),B.hasOwnProperty("lineCap")&&(this.lineCap=B.lineCap),B.hasOwnProperty("lineJoin")&&(this.lineJoin=B.lineJoin)}},d.prototype.strokeRect=function(L,D,U,H){if(isNaN(L)||isNaN(D)||isNaN(U)||isNaN(H))throw Kt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(L,D,U,H),this.stroke())},d.prototype.clearRect=function(L,D,U,H){if(isNaN(L)||isNaN(D)||isNaN(U)||isNaN(H))throw Kt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,D,U,H))},d.prototype.save=function(L){L=typeof L!="boolean"||L;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},d.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("Q");this.pdf.setPage(D),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(L){var D,U,H,B;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))D=0,U=0,H=0,B=0;else{var Y=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(Y!==null)D=parseInt(Y[1]),U=parseInt(Y[2]),H=parseInt(Y[3]),B=1;else if((Y=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)D=parseInt(Y[1]),U=parseInt(Y[2]),H=parseInt(Y[3]),B=parseFloat(Y[4]);else{if(B=1,typeof L=="string"&&L.charAt(0)!=="#"){var re=new d_(L);L=re.ok?re.toHex():"#000000"}L.length===4?(D=L.substring(1,2),D+=D,U=L.substring(2,3),U+=U,H=L.substring(3,4),H+=H):(D=L.substring(1,3),U=L.substring(3,5),H=L.substring(5,7)),D=parseInt(D,16),U=parseInt(U,16),H=parseInt(H,16)}}return{r:D,g:U,b:H,a:B,style:L}},u=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(L,D,U,H){if(isNaN(D)||isNaN(U)||typeof L!="string")throw Kt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!u.call(this)){var B=Q(this.ctx.transform.rotation),Y=this.ctx.transform.scaleX;E.call(this,{text:L,x:D,y:U,scale:Y,angle:B,align:this.textAlign,maxWidth:H})}},d.prototype.strokeText=function(L,D,U,H){if(isNaN(D)||isNaN(U)||typeof L!="string")throw Kt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){H=isNaN(H)?void 0:H;var B=Q(this.ctx.transform.rotation),Y=this.ctx.transform.scaleX;E.call(this,{text:L,x:D,y:U,scale:Y,renderingMode:"stroke",angle:B,align:this.textAlign,maxWidth:H})}},d.prototype.measureText=function(L){if(typeof L!="string")throw Kt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,U=this.pdf.internal.scaleFactor,H=D.internal.getFontSize(),B=D.getStringUnitWidth(L)*H/D.internal.scaleFactor,Y=function(re){var ne=(re=re||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ne}}),this};return new Y({width:B*=Math.round(96*U/72*1e4)/1e4})},d.prototype.scale=function(L,D){if(isNaN(L)||isNaN(D))throw Kt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var U=new l(L,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(U)},d.prototype.rotate=function(L){if(isNaN(L))throw Kt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new l(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},d.prototype.translate=function(L,D){if(isNaN(L)||isNaN(D))throw Kt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var U=new l(1,0,0,1,L,D);this.ctx.transform=this.ctx.transform.multiply(U)},d.prototype.transform=function(L,D,U,H,B,Y){if(isNaN(L)||isNaN(D)||isNaN(U)||isNaN(H)||isNaN(B)||isNaN(Y))throw Kt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var re=new l(L,D,U,H,B,Y);this.ctx.transform=this.ctx.transform.multiply(re)},d.prototype.setTransform=function(L,D,U,H,B,Y){L=isNaN(L)?1:L,D=isNaN(D)?0:D,U=isNaN(U)?0:U,H=isNaN(H)?1:H,B=isNaN(B)?0:B,Y=isNaN(Y)?0:Y,this.ctx.transform=new l(L,D,U,H,B,Y)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(L,D,U,H,B,Y,re,ne,de){var be=this.pdf.getImageProperties(L),Te=1,Oe=1,Fe=1,ye=1;H!==void 0&&ne!==void 0&&(Fe=ne/H,ye=de/B,Te=be.width/H*ne/H,Oe=be.height/B*de/B),Y===void 0&&(Y=D,re=U,D=0,U=0),H!==void 0&&ne===void 0&&(ne=H,de=B),H===void 0&&ne===void 0&&(ne=be.width,de=be.height);for(var ae,Ke=this.ctx.transform.decompose(),he=Q(Ke.rotate.shx),se=new l,me=(se=(se=(se=se.multiply(Ke.translate)).multiply(Ke.skew)).multiply(Ke.scale)).applyToRectangle(new s(Y-D*Fe,re-U*ye,H*Te,B*Oe)),Se=b.call(this,me),ve=[],Me=0;Me<Se.length;Me+=1)ve.indexOf(Se[Me])===-1&&ve.push(Se[Me]);if(_(ve),this.autoPaging)for(var qe=ve[0],Ue=ve[ve.length-1],Ze=qe;Ze<Ue+1;Ze++){this.pdf.setPage(Ze);var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=Ze===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=Ze===1?0:st+(Ze-2)*Qe;if(this.ctx.clip_path.length!==0){var br=this.path;ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(ae,this.posX+this.margin[3],-ze+it+this.ctx.prevPageLastElemOffset),A.call(this,"fill",!0),this.path=br}var _t=JSON.parse(JSON.stringify(me));_t=m([_t],this.posX+this.margin[3],-ze+it+this.ctx.prevPageLastElemOffset)[0];var Ur=(Ze>qe||Ze<Ue)&&v.call(this);Ur&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,Qe,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",_t.x,_t.y,_t.w,_t.h,null,null,he),Ur&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",me.x,me.y,me.w,me.h,null,null,he)};var b=function(L,D,U){var H=[];D=D||this.pdf.internal.pageSize.width,U=U||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var B=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":H.push(Math.floor((L.y+B)/U)+1);break;case"arc":H.push(Math.floor((L.y+B-L.radius)/U)+1),H.push(Math.floor((L.y+B+L.radius)/U)+1);break;case"qct":var Y=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);H.push(Math.floor((Y.y+B)/U)+1),H.push(Math.floor((Y.y+Y.h+B)/U)+1);break;case"bct":var re=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);H.push(Math.floor((re.y+B)/U)+1),H.push(Math.floor((re.y+re.h+B)/U)+1);break;case"rect":H.push(Math.floor((L.y+B)/U)+1),H.push(Math.floor((L.y+L.h+B)/U)+1)}for(var ne=0;ne<H.length;ne+=1)for(;this.pdf.internal.getNumberOfPages()<H[ne];)g.call(this);return H},g=function(){var L=this.fillStyle,D=this.strokeStyle,U=this.font,H=this.lineCap,B=this.lineWidth,Y=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=D,this.font=U,this.lineCap=H,this.lineWidth=B,this.lineJoin=Y},m=function(L,D,U){for(var H=0;H<L.length;H++)switch(L[H].type){case"bct":L[H].x2+=D,L[H].y2+=U;case"qct":L[H].x1+=D,L[H].y1+=U;case"mt":case"lt":case"arc":default:L[H].x+=D,L[H].y+=U}return L},_=function(L){return L.sort(function(D,U){return D-U})},x=function(L,D){for(var U,H,B=this.fillStyle,Y=this.strokeStyle,re=this.lineCap,ne=this.lineWidth,de=Math.abs(ne*this.ctx.transform.scaleX),be=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),Oe=JSON.parse(JSON.stringify(this.path)),Fe=[],ye=0;ye<Oe.length;ye++)if(Oe[ye].x!==void 0)for(var ae=b.call(this,Oe[ye]),Ke=0;Ke<ae.length;Ke+=1)Fe.indexOf(ae[Ke])===-1&&Fe.push(ae[Ke]);for(var he=0;he<Fe.length;he++)for(;this.pdf.internal.getNumberOfPages()<Fe[he];)g.call(this);if(_(Fe),this.autoPaging)for(var se=Fe[0],me=Fe[Fe.length-1],Se=se;Se<me+1;Se++){this.pdf.setPage(Se),this.fillStyle=B,this.strokeStyle=Y,this.lineCap=re,this.lineWidth=de,this.lineJoin=be;var ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Me=Se===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=Se===1?0:qe+(Se-2)*Ue;if(this.ctx.clip_path.length!==0){var ot=this.path;U=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(U,this.posX+this.margin[3],-Ze+Me+this.ctx.prevPageLastElemOffset),A.call(this,L,!0),this.path=ot}if(H=JSON.parse(JSON.stringify(Te)),this.path=m(H,this.posX+this.margin[3],-Ze+Me+this.ctx.prevPageLastElemOffset),D===!1||Se===0){var it=(Se>se||Se<me)&&v.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ve,Ue,null).clip().discardPath()),A.call(this,L,D),it&&this.pdf.restoreGraphicsState()}this.lineWidth=ne}else this.lineWidth=de,A.call(this,L,D),this.lineWidth=ne;this.path=Te},A=function(L,D){if((L!=="stroke"||D||!y.call(this))&&(L==="stroke"||D||!u.call(this))){for(var U,H,B=[],Y=this.path,re=0;re<Y.length;re++){var ne=Y[re];switch(ne.type){case"begin":B.push({begin:!0});break;case"close":B.push({close:!0});break;case"mt":B.push({start:ne,deltas:[],abs:[]});break;case"lt":var de=B.length;if(Y[re-1]&&!isNaN(Y[re-1].x)&&(U=[ne.x-Y[re-1].x,ne.y-Y[re-1].y],de>0)){for(;de>=0;de--)if(B[de-1].close!==!0&&B[de-1].begin!==!0){B[de-1].deltas.push(U),B[de-1].abs.push(ne);break}}break;case"bct":U=[ne.x1-Y[re-1].x,ne.y1-Y[re-1].y,ne.x2-Y[re-1].x,ne.y2-Y[re-1].y,ne.x-Y[re-1].x,ne.y-Y[re-1].y],B[B.length-1].deltas.push(U);break;case"qct":var be=Y[re-1].x+2/3*(ne.x1-Y[re-1].x),Te=Y[re-1].y+2/3*(ne.y1-Y[re-1].y),Oe=ne.x+2/3*(ne.x1-ne.x),Fe=ne.y+2/3*(ne.y1-ne.y),ye=ne.x,ae=ne.y;U=[be-Y[re-1].x,Te-Y[re-1].y,Oe-Y[re-1].x,Fe-Y[re-1].y,ye-Y[re-1].x,ae-Y[re-1].y],B[B.length-1].deltas.push(U);break;case"arc":B.push({deltas:[],abs:[],arc:!0}),Array.isArray(B[B.length-1].abs)&&B[B.length-1].abs.push(ne)}}H=D?null:L==="stroke"?"stroke":"fill";for(var Ke=!1,he=0;he<B.length;he++)if(B[he].arc)for(var se=B[he].abs,me=0;me<se.length;me++){var Se=se[me];Se.type==="arc"?O.call(this,Se.x,Se.y,Se.radius,Se.startAngle,Se.endAngle,Se.counterclockwise,void 0,D,!Ke):j.call(this,Se.x,Se.y),Ke=!0}else if(B[he].close===!0)this.pdf.internal.out("h"),Ke=!1;else if(B[he].begin!==!0){var ve=B[he].start.x,Me=B[he].start.y;M.call(this,B[he].deltas,ve,Me),Ke=!0}H&&F.call(this,H),D&&R.call(this)}},I=function(L){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,U=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-U;case"top":return L+D-U;case"hanging":return L+D-2*U;case"middle":return L+D/2-U;case"ideographic":return L;case"alphabetic":default:return L}},P=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(D,U){this.colorStops.push([D,U])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(L,D,U,H,B,Y,re,ne,de){for(var be=ee.call(this,U,H,B,Y),Te=0;Te<be.length;Te++){var Oe=be[Te];Te===0&&(de?S.call(this,Oe.x1+L,Oe.y1+D):j.call(this,Oe.x1+L,Oe.y1+D)),V.call(this,L,D,Oe.x2,Oe.y2,Oe.x3,Oe.y3,Oe.x4,Oe.y4)}ne?R.call(this):F.call(this,re)},F=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(L,D){this.pdf.internal.out(r(L)+" "+n(D)+" m")},E=function(L){var D;switch(L.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var U=this.pdf.getTextDimensions(L.text),H=I.call(this,L.y),B=P.call(this,H)-U.h,Y=this.ctx.transform.applyToPoint(new a(L.x,H)),re=this.ctx.transform.decompose(),ne=new l;ne=(ne=(ne=ne.multiply(re.translate)).multiply(re.skew)).multiply(re.scale);for(var de,be,Te,Oe=this.ctx.transform.applyToRectangle(new s(L.x,H,U.w,U.h)),Fe=ne.applyToRectangle(new s(L.x,B,U.w,U.h)),ye=b.call(this,Fe),ae=[],Ke=0;Ke<ye.length;Ke+=1)ae.indexOf(ye[Ke])===-1&&ae.push(ye[Ke]);if(_(ae),this.autoPaging)for(var he=ae[0],se=ae[ae.length-1],me=he;me<se+1;me++){this.pdf.setPage(me);var Se=me===1?this.posY+this.margin[0]:this.margin[0],ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Me=this.pdf.internal.pageSize.height-this.margin[2],qe=Me-this.margin[0],Ue=this.pdf.internal.pageSize.width-this.margin[1],Ze=Ue-this.margin[3],ot=me===1?0:ve+(me-2)*qe;if(this.ctx.clip_path.length!==0){var it=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(de,this.posX+this.margin[3],-1*ot+Se),A.call(this,"fill",!0),this.path=it}var st=m([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-ot+Se+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*L.scale),Te=this.lineWidth,this.lineWidth=Te*L.scale);var Qe=this.autoPaging!=="text";if(Qe||st.y+st.h<=Me){if(Qe||st.y>=Se&&st.x<=Ue){var ze=Qe?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Ue-st.x)[0],br=m([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-ot+Se+this.ctx.prevPageLastElemOffset)[0],_t=Qe&&(me>he||me<se)&&v.call(this);_t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,qe,null).clip().discardPath()),this.pdf.text(ze,br.x,br.y,{angle:L.angle,align:D,renderingMode:L.renderingMode}),_t&&this.pdf.restoreGraphicsState()}}else st.y<Me&&(this.ctx.prevPageLastElemOffset+=Me-st.y);L.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Te)}else L.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*L.scale),Te=this.lineWidth,this.lineWidth=Te*L.scale),this.pdf.text(L.text,Y.x+this.posX,Y.y+this.posY,{angle:L.angle,align:D,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Te)},j=function(L,D,U,H){U=U||0,H=H||0,this.pdf.internal.out(r(L+U)+" "+n(D+H)+" l")},M=function(L,D,U){return this.pdf.lines(L,D,U,null,null)},V=function(L,D,U,H,B,Y,re,ne){this.pdf.internal.out([e(i(U+L)),e(o(H+D)),e(i(B+L)),e(o(Y+D)),e(i(re+L)),e(o(ne+D)),"c"].join(" "))},ee=function(L,D,U,H){for(var B=2*Math.PI,Y=Math.PI/2;D>U;)D-=B;var re=Math.abs(U-D);re<B&&H&&(re=B-re);for(var ne=[],de=H?-1:1,be=D;re>1e-5;){var Te=be+de*Math.min(re,Y);ne.push(te.call(this,L,be,Te)),re-=Math.abs(Te-be),be=Te}return ne},te=function(L,D,U){var H=(U-D)/2,B=L*Math.cos(H),Y=L*Math.sin(H),re=B,ne=-Y,de=re*re+ne*ne,be=de+re*B+ne*Y,Te=4/3*(Math.sqrt(2*de*be)-be)/(re*Y-ne*B),Oe=re-Te*ne,Fe=ne+Te*re,ye=Oe,ae=-Fe,Ke=H+D,he=Math.cos(Ke),se=Math.sin(Ke);return{x1:L*Math.cos(D),y1:L*Math.sin(D),x2:Oe*he-Fe*se,y2:Oe*se+Fe*he,x3:ye*he-ae*se,y3:ye*se+ae*he,x4:L*Math.cos(U),y4:L*Math.sin(U)}},Q=function(L){return 180*L/Math.PI},J=function(L,D,U,H,B,Y){var re=L+.5*(U-L),ne=D+.5*(H-D),de=B+.5*(U-B),be=Y+.5*(H-Y),Te=Math.min(L,B,re,de),Oe=Math.max(L,B,re,de),Fe=Math.min(D,Y,ne,be),ye=Math.max(D,Y,ne,be);return new s(Te,Fe,Oe-Te,ye-Fe)},W=function(L,D,U,H,B,Y,re,ne){var de,be,Te,Oe,Fe,ye,ae,Ke,he,se,me,Se,ve,Me,qe=U-L,Ue=H-D,Ze=B-U,ot=Y-H,it=re-B,st=ne-Y;for(be=0;be<41;be++)he=(ae=(Te=L+(de=be/40)*qe)+de*((Fe=U+de*Ze)-Te))+de*(Fe+de*(B+de*it-Fe)-ae),se=(Ke=(Oe=D+de*Ue)+de*((ye=H+de*ot)-Oe))+de*(ye+de*(Y+de*st-ye)-Ke),be==0?(me=he,Se=se,ve=he,Me=se):(me=Math.min(me,he),Se=Math.min(Se,se),ve=Math.max(ve,he),Me=Math.max(Me,se));return new s(Math.round(me),Math.round(Se),Math.round(ve-me),Math.round(Me-Se))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,D,U=(L=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:D}));this.prevLineDash!==U&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=U)}}})(ct.API),function(t){var e=function(o){var a,s,l,c,p,d,f,u,y,v;for(s=[],l=0,c=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;c>l;l+=4)(p=(o.charCodeAt(l)<<24)+(o.charCodeAt(l+1)<<16)+(o.charCodeAt(l+2)<<8)+o.charCodeAt(l+3))!==0?(d=(p=((p=((p=((p=(p-(v=p%85))/85)-(y=p%85))/85)-(u=p%85))/85)-(f=p%85))/85)%85,s.push(d+33,f+33,u+33,y+33,v+33)):s.push(122);return function(b,g){for(var m=g;m>0;m--)b.pop()}(s,a.length),String.fromCharCode.apply(String,s)+"~>"},r=function(o){var a,s,l,c,p,d=String,f="length",u=255,y="charCodeAt",v="slice",b="replace";for(o[v](-2),o=o[v](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),l=[],c=0,p=(o+=a="uuuuu"[v](o[f]%5||5))[f];p>c;c+=5)s=52200625*(o[y](c)-33)+614125*(o[y](c+1)-33)+7225*(o[y](c+2)-33)+85*(o[y](c+3)-33)+(o[y](c+4)-33),l.push(u&s>>24,u&s>>16,u&s>>8,u&s);return function(g,m){for(var _=m;_>0;_--)g.pop()}(l,a[f]),d.fromCharCode.apply(d,l)},n=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var s="",l=0;l<o.length;l+=2)s+=String.fromCharCode("0x"+(o[l]+o[l+1]));return s},i=function(o){for(var a=new Uint8Array(o.length),s=o.length;s--;)a[s]=o.charCodeAt(s);return o=(a=b1(a)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(o,a){var s=0,l=o||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),s=0;s<a.length;s+=1)switch(a[s]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[s]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(ct.API),function(t){t.loadFile=function(e,r,n){return function(i,o,a){o=o!==!1,a=typeof a=="function"?a:function(){};var s=void 0;try{s=function(l,c,p){var d=new XMLHttpRequest,f=0,u=function(y){var v=y.length,b=[],g=String.fromCharCode;for(f=0;f<v;f+=1)b.push(g(255&y.charCodeAt(f)));return b.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?p(u(this.responseText)):p(void 0)}),d.send(null),c&&d.status===200)return u(d.responseText)}(i,o,a)}catch{}return s}(e,r,n)},t.loadImageFile=t.loadFile}(ct.API),function(t){function e(){return(ft.html2canvas?Promise.resolve(ft.html2canvas):g1(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return(ft.DOMPurify?Promise.resolve(ft.DOMPurify):g1(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var s=Ut(a);return s==="undefined"?"undefined":s==="string"||a instanceof String?"string":s==="number"||a instanceof Number?"number":s==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":s==="object"?"object":"unknown"},i=function(a,s){var l=document.createElement(a);for(var c in s.className&&(l.className=s.className),s.innerHTML&&s.dompurify&&(l.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)l.style[c]=s.style[c];return l},o=function a(s){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,a,1,[a])).set(s)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,s){return a.__proto__=s||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,s){return this.then(function(){switch(s=s||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(r).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function l(c,p){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)p!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,p));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(s){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,s(this.prop.container,l)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(s){var l=this.opt.jsPDF,c=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var f=0;f<c.length;++f){var u=c[f],y=u.src.find(function(v){return v.format==="truetype"});y&&l.addFont(y.url,u.ref.name,u.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),s(this.prop.container,d)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,s,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,s):this.outputPdf(a,s)},o.prototype.outputPdf=function(a,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,s)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if(n(a)!=="object")return this;var s=Object.keys(a||{}).map(function(l){if(l in o.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(s)})},o.prototype.get=function(a,s){return this.then(function(){var l=a in o.template.prop?this.prop[a]:this.opt[a];return s?s(l):l})},o.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function s(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(a=a||ct.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:s(a.inner.width,a.k),height:s(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,s,l,c){return a!=null&&(this.progress.val=a),s!=null&&(this.progress.state=s),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,s,l,c){return this.setProgress(a?this.progress.val+a:null,s||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},o.prototype.then=function(a,s){var l=this;return this.thenCore(a,s,function(c,p){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,c),d}).then(c,p).then(function(d){return l.updateProgress(1),d})})},o.prototype.thenCore=function(a,s,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),s&&(s=s.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),p=l.call(c,a,s);return o.convert(p,this.__proto__)},o.prototype.thenExternal=function(a,s){return Promise.prototype.then.call(this,a,s)},o.prototype.thenList=function(a){var s=this;return a.forEach(function(l){s=s.thenCore(l)}),s},o.prototype.catch=function(a){a&&(a=a.bind(this));var s=Promise.prototype.catch.call(this,a);return o.convert(s,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,ct.getPageSize=function(a,s,l){if(Ut(a)==="object"){var c=a;a=c.orientation,s=c.unit||s,l=c.format||l}s=s||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var p,d=(""+l).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+s}var u,y=0,v=0;if(f.hasOwnProperty(d))y=f[d][1]/p,v=f[d][0]/p;else try{y=l[1],v=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",v>y&&(u=v,v=y,y=u);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",y>v&&(u=v,v=y,y=u)}return{width:v,height:y,unit:s,k:p,orientation:a}},t.html=function(a,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(N1):null;var l=new o(s);return s.worker?l:l.from(a).doCallback()}}(ct.API),ct.API.addJS=function(t){return ey=t,this.internal.events.subscribe("postPutResources",function(){If=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(If+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Z2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ey+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){If!==void 0&&Z2!==void 0&&this.internal.out("/Names <</JavaScript "+If+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),o=0;o<i.length;o++){var a=i[o],s=n.exec(a);if(s!=null){var l=s[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,p=[];for(o=0;o<c;o++){var d=r.internal.newObject();p.push(d);var f=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var u=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<p.length;o++)r.internal.write("(page_"+(o+1)+")"+p[o]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+u+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,o){var a={title:i,options:o,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var a=n.children[o];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var s=this.count=this.count_r({count:0},a);if(s>0&&this.line("/Count "+s),a.options&&a.options.pageNumber){var l=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var o=0;o<i.children.length;o++)n.count++,this.count_r(n,i.children[o]);return n.count}}])}(ct.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,o,a,s){var l,c=this.decode.DCT_DECODE,p=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(d){for(var f,u=256*d.charCodeAt(4)+d.charCodeAt(5),y=d.length,v={width:0,height:0,numcomponents:1},b=4;b<y;b+=2){if(b+=u,e.indexOf(d.charCodeAt(b+1))!==-1){f=256*d.charCodeAt(b+5)+d.charCodeAt(b+6),v={width:256*d.charCodeAt(b+7)+d.charCodeAt(b+8),height:f,numcomponents:d.charCodeAt(b+9)};break}u=256*d.charCodeAt(b+2)+d.charCodeAt(b+3)}return v}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}p={data:r,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:c,index:n,alias:i}}return p}}(ct.API);var Rs,Df,ty,ry,ny,VP=function(){var t,e,r;function n(o){var a,s,l,c,p,d,f,u,y,v,b,g,m,_;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(a=this.readUInt32(),y=(function(){var x,A;for(A=[],x=0;x<4;++x)A.push(String.fromCharCode(this.data[this.pos++]));return A}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),c=this.readUInt16()||100,d.delay=1e3*p/c,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,a-=4),o=(d!=null?d.data:void 0)||this.imgData,g=0;0<=a?g<a:g>a;0<=a?++g:--g)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((v=l-this.transparency.indexed.length)>0)for(m=0;0<=v?m<v:m>v;0<=v?++m:--m)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":f=(b=this.read(a)).indexOf(0),u=String.fromCharCode.apply(String,b.slice(0,f)),this.text[u]=String.fromCharCode.apply(String,b.slice(f+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(o){var a,s;for(s=[],a=0;0<=o?a<o:a>o;0<=o?++a:--a)s.push(this.data[this.pos++]);return s},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(o){var a=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*a),l=0,c=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function p(d,f,u,y){var v,b,g,m,_,x,A,I,P,O,F,R,S,E,j,M,V,ee,te,Q,J,W=Math.ceil((c.width-d)/u),q=Math.ceil((c.height-f)/y),L=c.width==W&&c.height==q;for(E=a*W,R=L?s:new Uint8Array(E*q),x=o.length,S=0,b=0;S<q&&l<x;){switch(o[l++]){case 0:for(m=V=0;V<E;m=V+=1)R[b++]=o[l++];break;case 1:for(m=ee=0;ee<E;m=ee+=1)v=o[l++],_=m<a?0:R[b-a],R[b++]=(v+_)%256;break;case 2:for(m=te=0;te<E;m=te+=1)v=o[l++],g=(m-m%a)/a,j=S&&R[(S-1)*E+g*a+m%a],R[b++]=(j+v)%256;break;case 3:for(m=Q=0;Q<E;m=Q+=1)v=o[l++],g=(m-m%a)/a,_=m<a?0:R[b-a],j=S&&R[(S-1)*E+g*a+m%a],R[b++]=(v+Math.floor((_+j)/2))%256;break;case 4:for(m=J=0;J<E;m=J+=1)v=o[l++],g=(m-m%a)/a,_=m<a?0:R[b-a],S===0?j=M=0:(j=R[(S-1)*E+g*a+m%a],M=g&&R[(S-1)*E+(g-1)*a+m%a]),A=_+j-M,I=Math.abs(A-_),O=Math.abs(A-j),F=Math.abs(A-M),P=I<=O&&I<=F?_:O<=F?j:M,R[b++]=(v+P)%256;break;default:throw new Error("Invalid filter algorithm: "+o[l-1])}if(!L){var D=((f+S*y)*c.width+d)*a,U=S*E;for(m=0;m<W;m+=1){for(var H=0;H<a;H+=1)s[D++]=R[U++];D+=(u-1)*a}}S++}}return o=kP(o),c.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),s},n.prototype.decodePalette=function(){var o,a,s,l,c,p,d,f,u;for(s=this.palette,p=this.transparency.indexed||[],c=new Uint8Array((p.length||0)+s.length),l=0,o=0,a=d=0,f=s.length;d<f;a=d+=3)c[l++]=s[a],c[l++]=s[a+1],c[l++]=s[a+2],c[l++]=(u=p[o++])!=null?u:255;return c},n.prototype.copyToImageData=function(o,a){var s,l,c,p,d,f,u,y,v,b,g;if(l=this.colors,v=null,s=this.hasAlphaChannel,this.palette.length&&(v=(g=this._decodedPalette)!=null?g:this._decodedPalette=this.decodePalette(),l=4,s=!0),y=(c=o.data||o).length,d=v||a,p=f=0,l===1)for(;p<y;)u=v?4*a[p/4]:f,b=d[u++],c[p++]=b,c[p++]=b,c[p++]=b,c[p++]=s?d[u++]:255,f=u;else for(;p<y;)u=v?4*a[p/4]:f,c[p++]=d[u++],c[p++]=d[u++],c[p++]=d[u++],c[p++]=s?d[u++]:255,f=u},n.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(ft)==="[object Window]"){try{e=ft.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(o){var a;if(i()===!0)return r.width=o.width,r.height=o.height,r.clearRect(0,0,o.width,o.height),r.putImageData(o,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(o){var a,s,l,c,p,d,f,u;if(this.animation){for(u=[],s=p=0,d=(f=this.animation.frames).length;p<d;s=++p)a=f[s],l=o.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,c),a.imageData=l,u.push(a.image=t(l));return u}},n.prototype.renderFrame=function(o,a){var s,l,c;return s=(l=this.animation.frames)[a],c=l[a-1],a===0&&o.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?o.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&o.putImageData(c.imageData,c.xOffset,c.yOffset),s.blendOp===0&&o.clearRect(s.xOffset,s.yOffset,s.width,s.height),o.drawImage(s.image,s.xOffset,s.yOffset)},n.prototype.animate=function(o){var a,s,l,c,p,d,f=this;return s=0,d=this.animation,c=d.numFrames,l=d.frames,p=d.numPlays,(a=function(){var u,y;if(u=s++%c,y=l[u],f.renderFrame(o,u),c>1&&s/c<p)return f.animation._timeout=setTimeout(a,y.delay)})()},n.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},n.prototype.render=function(o){var a,s;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,a=o.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(s=a.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),a.putImageData(s,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function GP(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],o=i>>7,a=1<<(7&i)+1;t[e++],t[e++];var s=null,l=null;o&&(s=e,l=a,e+=3*a);var c=!0,p=[],d=0,f=null,u=0,y=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var v=t[e++];d=t[e++]|t[e++]<<8,f=t[e++],!(1&v)&&(f=null),u=v>>2&7,e++;break;case 254:for(;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var b=t[e++]|t[e++]<<8,g=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,x=t[e++],A=x>>6&1,I=1<<(7&x)+1,P=s,O=l,F=!1;x>>7&&(F=!0,P=e,O=I,e+=3*I);var R=e;for(e++;;){var S;if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}p.push({x:b,y:g,width:m,height:_,has_local_palette:F,palette_offset:P,palette_size:O,data_offset:R,data_length:e-R,transparent_index:f,interlaced:!!A,delay:d,disposal:u});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return y},this.frameInfo=function(E){if(E<0||E>=p.length)throw new Error("Frame index out of range.");return p[E]},this.decodeAndBlitFrameBGRA=function(E,j){var M=this.frameInfo(E),V=M.width*M.height,ee=new Uint8Array(V);iy(t,M.data_offset,ee,V);var te=M.palette_offset,Q=M.transparent_index;Q===null&&(Q=256);var J=M.width,W=r-J,q=J,L=4*(M.y*r+M.x),D=4*((M.y+M.height)*r+M.x),U=L,H=4*W;M.interlaced===!0&&(H+=4*r*7);for(var B=8,Y=0,re=ee.length;Y<re;++Y){var ne=ee[Y];if(q===0&&(q=J,(U+=H)>=D&&(H=4*W+4*r*(B-1),U=L+(J+W)*(B<<1),B>>=1)),ne===Q)U+=4;else{var de=t[te+3*ne],be=t[te+3*ne+1],Te=t[te+3*ne+2];j[U++]=Te,j[U++]=be,j[U++]=de,j[U++]=255}--q}},this.decodeAndBlitFrameRGBA=function(E,j){var M=this.frameInfo(E),V=M.width*M.height,ee=new Uint8Array(V);iy(t,M.data_offset,ee,V);var te=M.palette_offset,Q=M.transparent_index;Q===null&&(Q=256);var J=M.width,W=r-J,q=J,L=4*(M.y*r+M.x),D=4*((M.y+M.height)*r+M.x),U=L,H=4*W;M.interlaced===!0&&(H+=4*r*7);for(var B=8,Y=0,re=ee.length;Y<re;++Y){var ne=ee[Y];if(q===0&&(q=J,(U+=H)>=D&&(H=4*W+4*r*(B-1),U=L+(J+W)*(B<<1),B>>=1)),ne===Q)U+=4;else{var de=t[te+3*ne],be=t[te+3*ne+1],Te=t[te+3*ne+2];j[U++]=de,j[U++]=be,j[U++]=Te,j[U++]=255}--q}}}function iy(t,e,r,n){for(var i=t[e++],o=1<<i,a=o+1,s=a+1,l=i+1,c=(1<<l)-1,p=0,d=0,f=0,u=t[e++],y=new Int32Array(4096),v=null;;){for(;p<16&&u!==0;)d|=t[e++]<<p,p+=8,u===1?u=t[e++]:--u;if(p<l)break;var b=d&c;if(d>>=l,p-=l,b!==o){if(b===a)break;for(var g=b<s?b:v,m=0,_=g;_>o;)_=y[_]>>8,++m;var x=_;if(f+m+(g!==b?1:0)>n)return void Kt.log("Warning, gif stream longer than expected.");r[f++]=x;var A=f+=m;for(g!==b&&(r[f++]=x),_=g;m--;)_=y[_],r[--A]=255&_,_>>=8;v!==null&&s<4096&&(y[s++]=v<<8|x,s>=c+1&&l<12&&(++l,c=c<<1|1)),v=b}else s=a+1,c=(1<<(l=i+1))-1,v=null}return f!==n&&Kt.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Zp(t){var e,r,n,i,o,a=Math.floor,s=new Array(64),l=new Array(64),c=new Array(64),p=new Array(64),d=new Array(65535),f=new Array(65535),u=new Array(64),y=new Array(64),v=[],b=0,g=7,m=new Array(64),_=new Array(64),x=new Array(64),A=new Array(256),I=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],V=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(L,D){for(var U=0,H=0,B=new Array,Y=1;Y<=16;Y++){for(var re=1;re<=L[Y];re++)B[D[H]]=[],B[D[H]][0]=U,B[D[H]][1]=Y,H++,U++;U*=2}return B}function te(L){for(var D=L[0],U=L[1]-1;U>=0;)D&1<<U&&(b|=1<<g),U--,--g<0&&(b==255?(Q(255),Q(0)):Q(b),g=7,b=0)}function Q(L){v.push(L)}function J(L){Q(L>>8&255),Q(255&L)}function W(L,D,U,H,B){for(var Y,re=B[0],ne=B[240],de=function(se,me){var Se,ve,Me,qe,Ue,Ze,ot,it,st,Qe,ze=0;for(st=0;st<8;++st){Se=se[ze],ve=se[ze+1],Me=se[ze+2],qe=se[ze+3],Ue=se[ze+4],Ze=se[ze+5],ot=se[ze+6];var br=Se+(it=se[ze+7]),_t=Se-it,Ur=ve+ot,xt=ve-ot,Lt=Me+Ze,nn=Me-Ze,At=qe+Ue,vi=qe-Ue,Dt=br+At,zr=br-At,On=Ur+Lt,jt=Ur-Lt;se[ze]=Dt+On,se[ze+4]=Dt-On;var dt=.707106781*(jt+zr);se[ze+2]=zr+dt,se[ze+6]=zr-dt;var Et=.382683433*((Dt=vi+nn)-(jt=xt+_t)),$t=.5411961*Dt+Et,Yt=1.306562965*jt+Et,Jr=.707106781*(On=nn+xt),Ne=_t+Jr,Le=_t-Jr;se[ze+5]=Le+$t,se[ze+3]=Le-$t,se[ze+1]=Ne+Yt,se[ze+7]=Ne-Yt,ze+=8}for(ze=0,st=0;st<8;++st){Se=se[ze],ve=se[ze+8],Me=se[ze+16],qe=se[ze+24],Ue=se[ze+32],Ze=se[ze+40],ot=se[ze+48];var tt=Se+(it=se[ze+56]),rt=Se-it,yt=ve+ot,ht=ve-ot,bt=Me+Ze,Jt=Me-Ze,Ct=qe+Ue,It=qe-Ue,sr=tt+Ct,Ht=tt-Ct,rr=yt+bt,cr=yt-bt;se[ze]=sr+rr,se[ze+32]=sr-rr;var $r=.707106781*(cr+Ht);se[ze+16]=Ht+$r,se[ze+48]=Ht-$r;var on=.382683433*((sr=It+Jt)-(cr=ht+rt)),Dr=.5411961*sr+on,Ye=1.306562965*cr+on,le=.707106781*(rr=Jt+ht),De=rt+le,We=rt-le;se[ze+40]=We+Dr,se[ze+24]=We-Dr,se[ze+8]=De+Ye,se[ze+56]=De-Ye,ze++}for(st=0;st<64;++st)Qe=se[st]*me[st],u[st]=Qe>0?Qe+.5|0:Qe-.5|0;return u}(L,D),be=0;be<64;++be)y[P[be]]=de[be];var Te=y[0]-U;U=y[0],Te==0?te(H[0]):(te(H[f[Y=32767+Te]]),te(d[Y]));for(var Oe=63;Oe>0&&y[Oe]==0;)Oe--;if(Oe==0)return te(re),U;for(var Fe,ye=1;ye<=Oe;){for(var ae=ye;y[ye]==0&&ye<=Oe;)++ye;var Ke=ye-ae;if(Ke>=16){Fe=Ke>>4;for(var he=1;he<=Fe;++he)te(ne);Ke&=15}Y=32767+y[ye],te(B[(Ke<<4)+f[Y]]),te(d[Y]),ye++}return Oe!=63&&te(re),U}function q(L){L=Math.min(Math.max(L,1),100),o!=L&&(function(D){for(var U=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var B=a((U[H]*D+50)/100);B=Math.min(Math.max(B,1),255),s[P[H]]=B}for(var Y=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],re=0;re<64;re++){var ne=a((Y[re]*D+50)/100);ne=Math.min(Math.max(ne,1),255),l[P[re]]=ne}for(var de=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,Te=0;Te<8;Te++)for(var Oe=0;Oe<8;Oe++)c[be]=1/(s[P[be]]*de[Te]*de[Oe]*8),p[be]=1/(l[P[be]]*de[Te]*de[Oe]*8),be++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),o=L)}this.encode=function(L,D){D&&q(D),v=new Array,b=0,g=7,J(65496),J(65504),J(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),J(1),J(1),Q(0),Q(0),function(){J(65499),J(132),Q(0);for(var ve=0;ve<64;ve++)Q(s[ve]);Q(1);for(var Me=0;Me<64;Me++)Q(l[Me])}(),function(ve,Me){J(65472),J(17),Q(8),J(Me),J(ve),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(L.width,L.height),function(){J(65476),J(418),Q(0);for(var ve=0;ve<16;ve++)Q(O[ve+1]);for(var Me=0;Me<=11;Me++)Q(F[Me]);Q(16);for(var qe=0;qe<16;qe++)Q(R[qe+1]);for(var Ue=0;Ue<=161;Ue++)Q(S[Ue]);Q(1);for(var Ze=0;Ze<16;Ze++)Q(E[Ze+1]);for(var ot=0;ot<=11;ot++)Q(j[ot]);Q(17);for(var it=0;it<16;it++)Q(M[it+1]);for(var st=0;st<=161;st++)Q(V[st])}(),J(65498),J(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var U=0,H=0,B=0;b=0,g=7,this.encode.displayName="_encode_";for(var Y,re,ne,de,be,Te,Oe,Fe,ye,ae=L.data,Ke=L.width,he=L.height,se=4*Ke,me=0;me<he;){for(Y=0;Y<se;){for(be=se*me+Y,Oe=-1,Fe=0,ye=0;ye<64;ye++)Te=be+(Fe=ye>>3)*se+(Oe=4*(7&ye)),me+Fe>=he&&(Te-=se*(me+1+Fe-he)),Y+Oe>=se&&(Te-=Y+Oe-se+4),re=ae[Te++],ne=ae[Te++],de=ae[Te++],m[ye]=(I[re]+I[ne+256>>0]+I[de+512>>0]>>16)-128,_[ye]=(I[re+768>>0]+I[ne+1024>>0]+I[de+1280>>0]>>16)-128,x[ye]=(I[re+1280>>0]+I[ne+1536>>0]+I[de+1792>>0]>>16)-128;U=W(m,c,U,e,n),H=W(_,p,H,r,i),B=W(x,p,B,r,i),Y+=32}me+=8}if(g>=0){var Se=[];Se[1]=g+1,Se[0]=(1<<g+1)-1,te(Se)}return J(65497),new Uint8Array(v)},t=t||50,function(){for(var L=String.fromCharCode,D=0;D<256;D++)A[D]=L(D)}(),e=ee(O,F),r=ee(E,j),n=ee(R,S),i=ee(M,V),function(){for(var L=1,D=2,U=1;U<=15;U++){for(var H=L;H<D;H++)f[32767+H]=U,d[32767+H]=[],d[32767+H][1]=U,d[32767+H][0]=H;for(var B=-(D-1);B<=-L;B++)f[32767+B]=U,d[32767+B]=[],d[32767+B][1]=U,d[32767+B][0]=D-1+B;L<<=1,D<<=1}}(),function(){for(var L=0;L<256;L++)I[L]=19595*L,I[L+256>>0]=38470*L,I[L+512>>0]=7471*L+32768,I[L+768>>0]=-11059*L,I[L+1024>>0]=-21709*L,I[L+1280>>0]=32768*L+8421375,I[L+1536>>0]=-27439*L,I[L+1792>>0]=-5329*L}(),q(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ai(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function oy(t){function e(O){if(!O)throw Error("assert :P")}function r(O,F,R){for(var S=0;4>S;S++)if(O[F+S]!=R.charCodeAt(S))return!0;return!1}function n(O,F,R,S,E){for(var j=0;j<E;j++)O[F+j]=R[S+j]}function i(O,F,R,S){for(var E=0;E<S;E++)O[F+E]=R}function o(O){return new Int32Array(O)}function a(O,F){for(var R=[],S=0;S<O;S++)R.push(new F);return R}function s(O,F){var R=[];return function S(E,j,M){for(var V=M[j],ee=0;ee<V&&(E.push(M.length>j+1?[]:new F),!(M.length<j+1));ee++)S(E[ee],j+1,M)}(R,0,O),R}var l=function(){var O=this;function F(h,w){for(var N=1<<w-1>>>0;h&N;)N>>>=1;return N?(h&N-1)+N:h}function R(h,w,N,C,z){e(!(C%N));do h[w+(C-=N)]=z;while(0<C)}function S(h,w,N,C,z){if(e(2328>=z),512>=z)var G=o(512);else if((G=o(z))==null)return 0;return function(K,X,Z,ie,ce,_e){var xe,ge,Ce=X,Ae=1<<Z,fe=o(16),pe=o(16);for(e(ce!=0),e(ie!=null),e(K!=null),e(0<Z),ge=0;ge<ce;++ge){if(15<ie[ge])return 0;++fe[ie[ge]]}if(fe[0]==ce)return 0;for(pe[1]=0,xe=1;15>xe;++xe){if(fe[xe]>1<<xe)return 0;pe[xe+1]=pe[xe]+fe[xe]}for(ge=0;ge<ce;++ge)xe=ie[ge],0<ie[ge]&&(_e[pe[xe]++]=ge);if(pe[15]==1)return(ie=new E).g=0,ie.value=_e[0],R(K,Ce,1,Ae,ie),Ae;var Pe,Re=-1,je=Ae-1,Ge=0,$e=1,lt=1,He=1<<Z;for(ge=0,xe=1,ce=2;xe<=Z;++xe,ce<<=1){if($e+=lt<<=1,0>(lt-=fe[xe]))return 0;for(;0<fe[xe];--fe[xe])(ie=new E).g=xe,ie.value=_e[ge++],R(K,Ce+Ge,ce,He,ie),Ge=F(Ge,xe)}for(xe=Z+1,ce=2;15>=xe;++xe,ce<<=1){if($e+=lt<<=1,0>(lt-=fe[xe]))return 0;for(;0<fe[xe];--fe[xe]){if(ie=new E,(Ge&je)!=Re){for(Ce+=He,Pe=1<<(Re=xe)-Z;15>Re&&!(0>=(Pe-=fe[Re]));)++Re,Pe<<=1;Ae+=He=1<<(Pe=Re-Z),K[X+(Re=Ge&je)].g=Pe+Z,K[X+Re].value=Ce-X-Re}ie.g=xe-Z,ie.value=_e[ge++],R(K,Ce+(Ge>>Z),ce,He,ie),Ge=F(Ge,xe)}}return $e!=2*pe[15]-1?0:Ae}(h,w,N,C,z,G)}function E(){this.value=this.g=0}function j(){this.value=this.g=0}function M(){this.G=a(5,E),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Xr,j)}function V(h,w,N,C){e(h!=null),e(w!=null),e(2147483648>C),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=w,h.pa=N,h.Jd=w,h.Yc=N+C,h.Zc=4<=C?N+C-4+1:N,Y(h)}function ee(h,w){for(var N=0;0<w--;)N|=ne(h,128)<<w;return N}function te(h,w){var N=ee(h,w);return re(h)?-N:N}function Q(h,w,N,C){var z,G=0;for(e(h!=null),e(w!=null),e(4294967288>C),h.Sb=C,h.Ra=0,h.u=0,h.h=0,4<C&&(C=4),z=0;z<C;++z)G+=w[N+z]<<8*z;h.Ra=G,h.bb=C,h.oa=w,h.pa=N}function J(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<ms-8>>>0,++h.bb,h.u-=8;U(h)&&(h.h=1,h.u=0)}function W(h,w){if(e(0<=w),!h.h&&w<=gs){var N=D(h)&ps[w];return h.u+=w,J(h),N}return h.h=1,h.u=0}function q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(h){return h.Ra>>>(h.u&ms-1)>>>0}function U(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>ms}function H(h,w){h.u=w,h.h=U(h)}function B(h){h.u>=Vl&&(e(h.u>=Vl),J(h))}function Y(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function re(h){return ee(h,1)}function ne(h,w){var N=h.Ca;0>h.b&&Y(h);var C=h.b,z=N*w>>>8,G=(h.I>>>C>z)+0;for(G?(N-=z,h.I-=z+1<<C>>>0):N=z+1,C=N,z=0;256<=C;)z+=8,C>>=8;return C=7^z+Pn[C],h.b-=C,h.Ca=(N<<C)-1,G}function de(h,w,N){h[w+0]=N>>24&255,h[w+1]=N>>16&255,h[w+2]=N>>8&255,h[w+3]=N>>0&255}function be(h,w){return h[w+0]<<0|h[w+1]<<8}function Te(h,w){return be(h,w)|h[w+2]<<16}function Oe(h,w){return be(h,w)|be(h,w+2)<<16}function Fe(h,w){var N=1<<w;return e(h!=null),e(0<w),h.X=o(N),h.X==null?0:(h.Mb=32-w,h.Xa=w,1)}function ye(h,w){e(h!=null),e(w!=null),e(h.Xa==w.Xa),n(w.X,0,h.X,0,1<<w.Xa)}function ae(){this.X=[],this.Xa=this.Mb=0}function Ke(h,w,N,C){e(N!=null),e(C!=null);var z=N[0],G=C[0];return z==0&&(z=(h*G+w/2)/w),G==0&&(G=(w*z+h/2)/h),0>=z||0>=G?0:(N[0]=z,C[0]=G,1)}function he(h,w){return h+(1<<w)-1>>>w}function se(h,w){return((4278255360&h)+(4278255360&w)>>>0&4278255360)+((16711935&h)+(16711935&w)>>>0&16711935)>>>0}function me(h,w){O[w]=function(N,C,z,G,K,X,Z){var ie;for(ie=0;ie<K;++ie){var ce=O[h](X[Z+ie-1],z,G+ie);X[Z+ie]=se(N[C+ie],ce)}}}function Se(){this.ud=this.hd=this.jd=0}function ve(h,w){return((4278124286&(h^w))>>>1)+(h&w)>>>0}function Me(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function qe(h,w){return Me(h+(h-w+.5>>1))}function Ue(h,w,N){return Math.abs(w-N)-Math.abs(h-N)}function Ze(h,w,N,C,z,G,K){for(C=G[K-1],N=0;N<z;++N)G[K+N]=C=se(h[w+N],C)}function ot(h,w,N,C,z){var G;for(G=0;G<N;++G){var K=h[w+G],X=K>>8&255,Z=16711935&(Z=(Z=16711935&K)+((X<<16)+X));C[z+G]=(4278255360&K)+Z>>>0}}function it(h,w){w.jd=h>>0&255,w.hd=h>>8&255,w.ud=h>>16&255}function st(h,w,N,C,z,G){var K;for(K=0;K<C;++K){var X=w[N+K],Z=X>>>8,ie=X,ce=255&(ce=(ce=X>>>16)+((h.jd<<24>>24)*(Z<<24>>24)>>>5));ie=255&(ie=(ie=ie+((h.hd<<24>>24)*(Z<<24>>24)>>>5))+((h.ud<<24>>24)*(ce<<24>>24)>>>5)),z[G+K]=(4278255360&X)+(ce<<16)+ie}}function Qe(h,w,N,C,z){O[w]=function(G,K,X,Z,ie,ce,_e,xe,ge){for(Z=_e;Z<xe;++Z)for(_e=0;_e<ge;++_e)ie[ce++]=z(X[C(G[K++])])},O[h]=function(G,K,X,Z,ie,ce,_e){var xe=8>>G.b,ge=G.Ea,Ce=G.K[0],Ae=G.w;if(8>xe)for(G=(1<<G.b)-1,Ae=(1<<xe)-1;K<X;++K){var fe,pe=0;for(fe=0;fe<ge;++fe)fe&G||(pe=C(Z[ie++])),ce[_e++]=z(Ce[pe&Ae]),pe>>=xe}else O["VP8LMapColor"+N](Z,ie,Ce,Ae,ce,_e,K,X,ge)}}function ze(h,w,N,C,z){for(N=w+N;w<N;){var G=h[w++];C[z++]=G>>16&255,C[z++]=G>>8&255,C[z++]=G>>0&255}}function br(h,w,N,C,z){for(N=w+N;w<N;){var G=h[w++];C[z++]=G>>16&255,C[z++]=G>>8&255,C[z++]=G>>0&255,C[z++]=G>>24&255}}function _t(h,w,N,C,z){for(N=w+N;w<N;){var G=(K=h[w++])>>16&240|K>>12&15,K=K>>0&240|K>>28&15;C[z++]=G,C[z++]=K}}function Ur(h,w,N,C,z){for(N=w+N;w<N;){var G=(K=h[w++])>>16&248|K>>13&7,K=K>>5&224|K>>3&31;C[z++]=G,C[z++]=K}}function xt(h,w,N,C,z){for(N=w+N;w<N;){var G=h[w++];C[z++]=G>>0&255,C[z++]=G>>8&255,C[z++]=G>>16&255}}function Lt(h,w,N,C,z,G){if(G==0)for(N=w+N;w<N;)de(C,((G=h[w++])[0]>>24|G[1]>>8&65280|G[2]<<8&16711680|G[3]<<24)>>>0),z+=32;else n(C,z,h,w,N)}function nn(h,w){O[w][0]=O[h+"0"],O[w][1]=O[h+"1"],O[w][2]=O[h+"2"],O[w][3]=O[h+"3"],O[w][4]=O[h+"4"],O[w][5]=O[h+"5"],O[w][6]=O[h+"6"],O[w][7]=O[h+"7"],O[w][8]=O[h+"8"],O[w][9]=O[h+"9"],O[w][10]=O[h+"10"],O[w][11]=O[h+"11"],O[w][12]=O[h+"12"],O[w][13]=O[h+"13"],O[w][14]=O[h+"0"],O[w][15]=O[h+"0"]}function At(h){return h==Fh||h==Bh||h==zc||h==qh}function vi(){this.eb=[],this.size=this.A=this.fb=0}function Dt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function zr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vi,this.f.kb=new Dt,this.sd=null}function On(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function jt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function dt(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Et(h,w){var N=h.T,C=w.ba.f.RGBA,z=C.eb,G=C.fb+h.ka*C.A,K=si[w.ba.S],X=h.y,Z=h.O,ie=h.f,ce=h.N,_e=h.ea,xe=h.W,ge=w.cc,Ce=w.dc,Ae=w.Mc,fe=w.Nc,pe=h.ka,Pe=h.ka+h.T,Re=h.U,je=Re+1>>1;for(pe==0?K(X,Z,null,null,ie,ce,_e,xe,ie,ce,_e,xe,z,G,null,null,Re):(K(w.ec,w.fc,X,Z,ge,Ce,Ae,fe,ie,ce,_e,xe,z,G-C.A,z,G,Re),++N);pe+2<Pe;pe+=2)ge=ie,Ce=ce,Ae=_e,fe=xe,ce+=h.Rc,xe+=h.Rc,G+=2*C.A,K(X,(Z+=2*h.fa)-h.fa,X,Z,ge,Ce,Ae,fe,ie,ce,_e,xe,z,G-C.A,z,G,Re);return Z+=h.fa,h.j+Pe<h.o?(n(w.ec,w.fc,X,Z,Re),n(w.cc,w.dc,ie,ce,je),n(w.Mc,w.Nc,_e,xe,je),N--):1&Pe||K(X,Z,null,null,ie,ce,_e,xe,ie,ce,_e,xe,z,G+C.A,null,null,Re),N}function $t(h,w,N){var C=h.F,z=[h.J];if(C!=null){var G=h.U,K=w.ba.S,X=K==Uc||K==zc;w=w.ba.f.RGBA;var Z=[0],ie=h.ka;Z[0]=h.T,h.Kb&&(ie==0?--Z[0]:(--ie,z[0]-=h.width),h.j+h.ka+h.T==h.o&&(Z[0]=h.o-h.j-ie));var ce=w.eb;ie=w.fb+ie*w.A,h=Qt(C,z[0],h.width,G,Z,ce,ie+(X?0:3),w.A),e(N==Z),h&&At(K)&&oi(ce,ie,X,G,Z,w.A)}return 0}function Yt(h){var w=h.ma,N=w.ba.S,C=11>N,z=N==Bc||N==qc||N==Uc||N==Mh||N==12||At(N);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!Hl(w.Oa,h,z?11:12))return 0;if(z&&At(N)&&Ie(),h.da)alert("todo:use_scaling");else{if(C){if(w.Ib=dt,h.Kb){if(N=h.U+1>>1,w.memory=o(h.U+2*N),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+h.U,w.Mc=w.cc,w.Nc=w.dc+N,w.Ib=Et,Ie()}}else alert("todo:EmitYUV");z&&(w.Jb=$t,C&&we())}if(C&&!Xg){for(h=0;256>h;++h)V_[h]=89858*(h-128)+Hc>>$c,Y_[h]=-22014*(h-128)+Hc,K_[h]=-45773*(h-128),G_[h]=113618*(h-128)+Hc>>$c;for(h=Zl;h<$h;++h)w=76283*(h-16)+Hc>>$c,J_[h-Zl]=Un(w,255),X_[h-Zl]=Un(w+8>>4,15);Xg=1}return 1}function Jr(h){var w=h.ma,N=h.U,C=h.T;return e(!(1&h.ka)),0>=N||0>=C?0:(N=w.Ib(h,w),w.Jb!=null&&w.Jb(h,w,N),w.Dc+=N,1)}function Ne(h){h.ma.memory=null}function Le(h,w,N,C){return W(h,8)!=47?0:(w[0]=W(h,14)+1,N[0]=W(h,14)+1,C[0]=W(h,1),W(h,3)!=0?0:!h.h)}function tt(h,w){if(4>h)return h+1;var N=h-2>>1;return(2+(1&h)<<N)+W(w,N)+1}function rt(h,w){return 120<w?w-120:1<=(N=((N=j_[w-1])>>4)*h+(8-(15&N)))?N:1;var N}function yt(h,w,N){var C=D(N),z=h[w+=255&C].g-8;return 0<z&&(H(N,N.u+8),C=D(N),w+=h[w].value,w+=C&(1<<z)-1),H(N,N.u+h[w].g),h[w].value}function ht(h,w,N){return N.g+=h.g,N.value+=h.value<<w>>>0,e(8>=N.g),h.g}function bt(h,w,N){var C=h.xc;return e((w=C==0?0:h.vc[h.md*(N>>C)+(w>>C)])<h.Wb),h.Ya[w]}function Jt(h,w,N,C){var z=h.ab,G=h.c*w,K=h.C;w=K+w;var X=N,Z=C;for(C=h.Ta,N=h.Ua;0<z--;){var ie=h.gc[z],ce=K,_e=w,xe=X,ge=Z,Ce=(Z=C,X=N,ie.Ea);switch(e(ce<_e),e(_e<=ie.nc),ie.hc){case 2:jc(xe,ge,(_e-ce)*Ce,Z,X);break;case 0:var Ae=ce,fe=_e,pe=Z,Pe=X,Re=(He=ie).Ea;Ae==0&&(Ih(xe,ge,null,null,1,pe,Pe),Ze(xe,ge+1,0,0,Re-1,pe,Pe+1),ge+=Re,Pe+=Re,++Ae);for(var je=1<<He.b,Ge=je-1,$e=he(Re,He.b),lt=He.K,He=He.w+(Ae>>He.b)*$e;Ae<fe;){var Rt=lt,Ft=He,Tt=1;for(Gl(xe,ge,pe,Pe-Re,1,pe,Pe);Tt<Re;){var Nt=(Tt&~Ge)+je;Nt>Re&&(Nt=Re),(0,Oo[Rt[Ft++]>>8&15])(xe,ge+ +Tt,pe,Pe+Tt-Re,Nt-Tt,pe,Pe+Tt),Tt=Nt}ge+=Re,Pe+=Re,++Ae&Ge||(He+=$e)}_e!=ie.nc&&n(Z,X-Ce,Z,X+(_e-ce-1)*Ce,Ce);break;case 1:for(Ce=xe,fe=ge,Re=(xe=ie.Ea)-(Pe=xe&~(pe=(ge=1<<ie.b)-1)),Ae=he(xe,ie.b),je=ie.K,ie=ie.w+(ce>>ie.b)*Ae;ce<_e;){for(Ge=je,$e=ie,lt=new Se,He=fe+Pe,Rt=fe+xe;fe<He;)it(Ge[$e++],lt),ba(lt,Ce,fe,ge,Z,X),fe+=ge,X+=ge;fe<Rt&&(it(Ge[$e++],lt),ba(lt,Ce,fe,Re,Z,X),fe+=Re,X+=Re),++ce&pe||(ie+=Ae)}break;case 3:if(xe==Z&&ge==X&&0<ie.b){for(fe=Z,xe=Ce=X+(_e-ce)*Ce-(Pe=(_e-ce)*he(ie.Ea,ie.b)),ge=Z,pe=X,Ae=[],Pe=(Re=Pe)-1;0<=Pe;--Pe)Ae[Pe]=ge[pe+Pe];for(Pe=Re-1;0<=Pe;--Pe)fe[xe+Pe]=Ae[Pe];ri(ie,ce,_e,Z,Ce,Z,X)}else ri(ie,ce,_e,xe,ge,Z,X)}X=C,Z=N}Z!=N&&n(C,N,X,Z,G)}function Ct(h,w){var N=h.V,C=h.Ba+h.c*h.C,z=w-h.C;if(e(w<=h.l.o),e(16>=z),0<z){var G=h.l,K=h.Ta,X=h.Ua,Z=G.width;if(Jt(h,z,N,C),z=X=[X],e((N=h.C)<(C=w)),e(G.v<G.va),C>G.o&&(C=G.o),N<G.j){var ie=G.j-N;N=G.j,z[0]+=ie*Z}if(N>=C?N=0:(z[0]+=4*G.v,G.ka=N-G.j,G.U=G.va-G.v,G.T=C-N,N=1),N){if(X=X[0],11>(N=h.ca).S){var ce=N.f.RGBA,_e=(C=N.S,z=G.U,G=G.T,ie=ce.eb,ce.A),xe=G;for(ce=ce.fb+h.Ma*ce.A;0<xe--;){var ge=K,Ce=X,Ae=z,fe=ie,pe=ce;switch(C){case Fc:jn(ge,Ce,Ae,fe,pe);break;case Bc:vn(ge,Ce,Ae,fe,pe);break;case Fh:vn(ge,Ce,Ae,fe,pe),oi(fe,pe,0,Ae,1,0);break;case zg:no(ge,Ce,Ae,fe,pe);break;case qc:Lt(ge,Ce,Ae,fe,pe,1);break;case Bh:Lt(ge,Ce,Ae,fe,pe,1),oi(fe,pe,0,Ae,1,0);break;case Uc:Lt(ge,Ce,Ae,fe,pe,0);break;case zc:Lt(ge,Ce,Ae,fe,pe,0),oi(fe,pe,1,Ae,1,0);break;case Mh:Lo(ge,Ce,Ae,fe,pe);break;case qh:Lo(ge,Ce,Ae,fe,pe),Xt(fe,pe,Ae,1,0);break;case $g:ro(ge,Ce,Ae,fe,pe);break;default:e(0)}X+=Z,ce+=_e}h.Ma+=G}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=N.height)}}h.C=w,e(h.C<=h.i)}function It(h){var w;if(0<h.ua)return 0;for(w=0;w<h.Wb;++w){var N=h.Ya[w].G,C=h.Ya[w].H;if(0<N[1][C[1]+0].g||0<N[2][C[2]+0].g||0<N[3][C[3]+0].g)return 0}return 1}function sr(h,w,N,C,z,G){if(h.Z!=0){var K=h.qd,X=h.rd;for(e(Co[h.Z]!=null);w<N;++w)Co[h.Z](K,X,C,z,C,z,G),K=C,X=z,z+=G;h.qd=K,h.rd=X}}function Ht(h,w){var N=h.l.ma,C=N.Z==0||N.Z==1?h.l.j:h.C;if(C=h.C<C?C:h.C,e(w<=h.l.o),w>C){var z=h.l.width,G=N.ca,K=N.tb+z*C,X=h.V,Z=h.Ba+h.c*C,ie=h.gc;e(h.ab==1),e(ie[0].hc==3),Cc(ie[0],C,w,X,Z,G,K),sr(N,C,w,G,K,z)}h.C=h.Ma=w}function rr(h,w,N,C,z,G,K){var X=h.$/C,Z=h.$%C,ie=h.m,ce=h.s,_e=N+h.$,xe=_e;z=N+C*z;var ge=N+C*G,Ce=280+ce.ua,Ae=h.Pb?X:16777216,fe=0<ce.ua?ce.Wa:null,pe=ce.wc,Pe=_e<ge?bt(ce,Z,X):null;e(h.C<G),e(ge<=z);var Re=!1;e:for(;;){for(;Re||_e<ge;){var je=0;if(X>=Ae){var Ge=_e-N;e((Ae=h).Pb),Ae.wd=Ae.m,Ae.xd=Ge,0<Ae.s.ua&&ye(Ae.s.Wa,Ae.s.vb),Ae=X+R_}if(Z&pe||(Pe=bt(ce,Z,X)),e(Pe!=null),Pe.Qb&&(w[_e]=Pe.qb,Re=!0),!Re)if(B(ie),Pe.jc){je=ie,Ge=w;var $e=_e,lt=Pe.pd[D(je)&Xr-1];e(Pe.jc),256>lt.g?(H(je,je.u+lt.g),Ge[$e]=lt.value,je=0):(H(je,je.u+lt.g-256),e(256<=lt.value),je=lt.value),je==0&&(Re=!0)}else je=yt(Pe.G[0],Pe.H[0],ie);if(ie.h)break;if(Re||256>je){if(!Re)if(Pe.nd)w[_e]=(Pe.qb|je<<8)>>>0;else{if(B(ie),Re=yt(Pe.G[1],Pe.H[1],ie),B(ie),Ge=yt(Pe.G[2],Pe.H[2],ie),$e=yt(Pe.G[3],Pe.H[3],ie),ie.h)break;w[_e]=($e<<24|Re<<16|je<<8|Ge)>>>0}if(Re=!1,++_e,++Z>=C&&(Z=0,++X,K!=null&&X<=G&&!(X%16)&&K(h,X),fe!=null))for(;xe<_e;)je=w[xe++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je}else if(280>je){if(je=tt(je-256,ie),Ge=yt(Pe.G[4],Pe.H[4],ie),B(ie),Ge=rt(C,Ge=tt(Ge,ie)),ie.h)break;if(_e-N<Ge||z-_e<je)break e;for($e=0;$e<je;++$e)w[_e+$e]=w[_e+$e-Ge];for(_e+=je,Z+=je;Z>=C;)Z-=C,++X,K!=null&&X<=G&&!(X%16)&&K(h,X);if(e(_e<=z),Z&pe&&(Pe=bt(ce,Z,X)),fe!=null)for(;xe<_e;)je=w[xe++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je}else{if(!(je<Ce))break e;for(Re=je-280,e(fe!=null);xe<_e;)je=w[xe++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je;je=_e,e(!(Re>>>(Ge=fe).Xa)),w[je]=Ge.X[Re],Re=!0}Re||e(ie.h==U(ie))}if(h.Pb&&ie.h&&_e<z)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&ye(h.s.vb,h.s.Wa);else{if(ie.h)break e;K!=null&&K(h,X>G?G:X),h.a=0,h.$=_e-N}return 1}return h.a=3,0}function cr(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var w=h.Wa;w!=null&&(w.X=null),h.vb=null,e(h!=null)}function $r(){var h=new Rh;return h==null?null:(h.a=0,h.xb=Vg,nn("Predictor","VP8LPredictors"),nn("Predictor","VP8LPredictors_C"),nn("PredictorAdd","VP8LPredictorsAdd"),nn("PredictorAdd","VP8LPredictorsAdd_C"),jc=ot,ba=st,jn=ze,vn=br,Lo=_t,ro=Ur,no=xt,O.VP8LMapColor32b=vs,O.VP8LMapColor8b=Rc,h)}function on(h,w,N,C,z){var G=1,K=[h],X=[w],Z=C.m,ie=C.s,ce=null,_e=0;e:for(;;){if(N)for(;G&&W(Z,1);){var xe=K,ge=X,Ce=C,Ae=1,fe=Ce.m,pe=Ce.gc[Ce.ab],Pe=W(fe,2);if(Ce.Oc&1<<Pe)G=0;else{switch(Ce.Oc|=1<<Pe,pe.hc=Pe,pe.Ea=xe[0],pe.nc=ge[0],pe.K=[null],++Ce.ab,e(4>=Ce.ab),Pe){case 0:case 1:pe.b=W(fe,3)+2,Ae=on(he(pe.Ea,pe.b),he(pe.nc,pe.b),0,Ce,pe.K),pe.K=pe.K[0];break;case 3:var Re,je=W(fe,8)+1,Ge=16<je?0:4<je?1:2<je?2:3;if(xe[0]=he(pe.Ea,Ge),pe.b=Ge,Re=Ae=on(je,1,0,Ce,pe.K)){var $e,lt=je,He=pe,Rt=1<<(8>>He.b),Ft=o(Rt);if(Ft==null)Re=0;else{var Tt=He.K[0],Nt=He.w;for(Ft[0]=He.K[0][0],$e=1;$e<1*lt;++$e)Ft[$e]=se(Tt[Nt+$e],Ft[$e-1]);for(;$e<4*Rt;++$e)Ft[$e]=0;He.K[0]=null,He.K[0]=Ft,Re=1}}Ae=Re;break;case 2:break;default:e(0)}G=Ae}}if(K=K[0],X=X[0],G&&W(Z,1)&&!(G=1<=(_e=W(Z,4))&&11>=_e)){C.a=3;break e}var Gt;if(Gt=G)t:{var Wt,wt,jr,Cn=C,Cr=K,Rn=X,Bt=_e,$n=N,Hn=Cn.m,Wr=Cn.s,Qr=[null],wn=1,li=0,zi=C_[Bt];r:for(;;){if($n&&W(Hn,1)){var Vr=W(Hn,3)+2,so=he(Cr,Vr),Aa=he(Rn,Vr),xs=so*Aa;if(!on(so,Aa,0,Cn,Qr))break r;for(Qr=Qr[0],Wr.xc=Vr,Wt=0;Wt<xs;++Wt){var Ro=Qr[Wt]>>8&65535;Qr[Wt]=Ro,Ro>=wn&&(wn=Ro+1)}}if(Hn.h)break r;for(wt=0;5>wt;++wt){var vr=Hg[wt];!wt&&0<Bt&&(vr+=1<<Bt),li<vr&&(li=vr)}var Hh=a(wn*zi,E),em=wn,tm=a(em,M);if(tm==null)var Vc=null;else e(65536>=em),Vc=tm;var eu=o(li);if(Vc==null||eu==null||Hh==null){Cn.a=1;break r}var Gc=Hh;for(Wt=jr=0;Wt<wn;++Wt){var xi=Vc[Wt],Ss=xi.G,ks=xi.H,rm=0,Kc=1,nm=0;for(wt=0;5>wt;++wt){vr=Hg[wt],Ss[wt]=Gc,ks[wt]=jr,!wt&&0<Bt&&(vr+=1<<Bt);i:{var Yc,Wh=vr,Jc=Cn,tu=eu,ex=Gc,tx=jr,Vh=0,Io=Jc.m,rx=W(Io,1);if(i(tu,0,0,Wh),rx){var nx=W(Io,1)+1,ix=W(Io,1),im=W(Io,ix==0?1:8);tu[im]=1,nx==2&&(tu[im=W(Io,8)]=1);var Xc=1}else{var om=o(19),am=W(Io,4)+4;if(19<am){Jc.a=3;var Qc=0;break i}for(Yc=0;Yc<am;++Yc)om[P_[Yc]]=W(Io,3);var Gh=void 0,ru=void 0,sm=Jc,ox=om,Zc=Wh,lm=tu,Kh=0,Do=sm.m,um=8,cm=a(128,E);n:for(;S(cm,0,7,ox,19);){if(W(Do,1)){var ax=2+2*W(Do,3);if((Gh=2+W(Do,ax))>Zc)break n}else Gh=Zc;for(ru=0;ru<Zc&&Gh--;){B(Do);var fm=cm[0+(127&D(Do))];H(Do,Do.u+fm.g);var As=fm.value;if(16>As)lm[ru++]=As,As!=0&&(um=As);else{var sx=As==16,dm=As-16,lx=L_[dm],hm=W(Do,O_[dm])+lx;if(ru+hm>Zc)break n;for(var ux=sx?um:0;0<hm--;)lm[ru++]=ux}}Kh=1;break n}Kh||(sm.a=3),Xc=Kh}(Xc=Xc&&!Io.h)&&(Vh=S(ex,tx,8,tu,Wh)),Xc&&Vh!=0?Qc=Vh:(Jc.a=3,Qc=0)}if(Qc==0)break r;if(Kc&&T_[wt]==1&&(Kc=Gc[jr].g==0),rm+=Gc[jr].g,jr+=Qc,3>=wt){var nu,Yh=eu[0];for(nu=1;nu<vr;++nu)eu[nu]>Yh&&(Yh=eu[nu]);nm+=Yh}}if(xi.nd=Kc,xi.Qb=0,Kc&&(xi.qb=(Ss[3][ks[3]+0].value<<24|Ss[1][ks[1]+0].value<<16|Ss[2][ks[2]+0].value)>>>0,rm==0&&256>Ss[0][ks[0]+0].value&&(xi.Qb=1,xi.qb+=Ss[0][ks[0]+0].value<<8)),xi.jc=!xi.Qb&&6>nm,xi.jc){var ef,lo=xi;for(ef=0;ef<Xr;++ef){var Mo=ef,Fo=lo.pd[Mo],tf=lo.G[0][lo.H[0]+Mo];256<=tf.value?(Fo.g=tf.g+256,Fo.value=tf.value):(Fo.g=0,Fo.value=0,Mo>>=ht(tf,8,Fo),Mo>>=ht(lo.G[1][lo.H[1]+Mo],16,Fo),Mo>>=ht(lo.G[2][lo.H[2]+Mo],0,Fo),ht(lo.G[3][lo.H[3]+Mo],24,Fo))}}}Wr.vc=Qr,Wr.Wb=wn,Wr.Ya=Vc,Wr.yc=Hh,Gt=1;break t}Gt=0}if(!(G=Gt)){C.a=3;break e}if(0<_e){if(ie.ua=1<<_e,!Fe(ie.Wa,_e)){C.a=1,G=0;break e}}else ie.ua=0;var Jh=C,pm=K,cx=X,Xh=Jh.s,Qh=Xh.xc;if(Jh.c=pm,Jh.i=cx,Xh.md=he(pm,Qh),Xh.wc=Qh==0?-1:(1<<Qh)-1,N){C.xb=U_;break e}if((ce=o(K*X))==null){C.a=1,G=0;break e}G=(G=rr(C,ce,0,K,X,X,null))&&!Z.h;break e}return G?(z!=null?z[0]=ce:(e(ce==null),e(N)),C.$=0,N||cr(ie)):cr(ie),G}function Dr(h,w){var N=h.c*h.i,C=N+w+16*w;return e(h.c<=w),h.V=o(C),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+N+w,1)}function Ye(h,w){var N=h.C,C=w-N,z=h.V,G=h.Ba+h.c*N;for(e(w<=h.l.o);0<C;){var K=16<C?16:C,X=h.l.ma,Z=h.l.width,ie=Z*K,ce=X.ca,_e=X.tb+Z*N,xe=h.Ta,ge=h.Ua;Jt(h,K,z,G),Ar(xe,ge,ce,_e,ie),sr(X,N,N+K,ce,_e,Z),C-=K,z+=K*h.c,N+=K}e(N==w),h.C=h.Ma=w}function le(){this.ub=this.yd=this.td=this.Rb=0}function De(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function We(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Mt(){this.Yb=function(){var h=[];return function w(N,C,z){for(var G=z[C],K=0;K<G&&(N.push(z.length>C+1?[]:0),!(z.length<C+1));K++)w(N[K],C+1,z)}(h,0,[3,11]),h}()}function Tr(){this.jb=o(3),this.Wc=s([4,8],Mt),this.Xc=s([4,17],Mt)}function lr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function _r(){this.ld=this.La=this.dd=this.tc=0}function Ln(){this.Na=this.la=0}function Fi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Zi(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function xr(){this.uc=this.M=this.Nb=0,this.wa=Array(new _r),this.Y=0,this.ya=Array(new Zi),this.aa=0,this.l=new ns}function ga(){this.y=o(16),this.f=o(8),this.ea=o(8)}function rs(){this.cb=this.a=0,this.sc="",this.m=new q,this.Od=new le,this.Kc=new De,this.ed=new lr,this.Qa=new We,this.Ic=this.$c=this.Aa=0,this.D=new xr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,q),this.ia=0,this.pb=a(4,Fi),this.Pa=new Tr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ga),this.Hd=0,this.rb=Array(new Ln),this.sb=0,this.wa=Array(new _r),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Zi),this.L=this.aa=0,this.gd=s([4,2],_r),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ns(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function mh(){var h=new rs;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Ql||(Ql=vc)),h}function Sr(h,w,N){return h.a==0&&(h.a=w,h.sc=N,h.cb=0),0}function gc(h,w,N){return 3<=N&&h[w+0]==157&&h[w+1]==1&&h[w+2]==42}function mc(h,w){if(h==null)return 0;if(h.a=0,h.sc="OK",w==null)return Sr(h,2,"null VP8Io passed to VP8GetHeaders()");var N=w.data,C=w.w,z=w.ha;if(4>z)return Sr(h,7,"Truncated header.");var G=N[C+0]|N[C+1]<<8|N[C+2]<<16,K=h.Od;if(K.Rb=!(1&G),K.td=G>>1&7,K.yd=G>>4&1,K.ub=G>>5,3<K.td)return Sr(h,3,"Incorrect keyframe parameters.");if(!K.yd)return Sr(h,4,"Frame not displayable.");C+=3,z-=3;var X=h.Kc;if(K.Rb){if(7>z)return Sr(h,7,"cannot parse picture header");if(!gc(N,C,z))return Sr(h,3,"Bad code word");X.c=16383&(N[C+4]<<8|N[C+3]),X.Td=N[C+4]>>6,X.i=16383&(N[C+6]<<8|N[C+5]),X.Ud=N[C+6]>>6,C+=7,z-=7,h.za=X.c+15>>4,h.Ub=X.i+15>>4,w.width=X.c,w.height=X.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,i((G=h.Pa).jb,0,255,G.jb.length),e((G=h.Qa)!=null),G.Cb=0,G.Bb=0,G.Fb=1,i(G.Zb,0,0,G.Zb.length),i(G.Lb,0,0,G.Lb)}if(K.ub>z)return Sr(h,7,"bad partition length");V(G=h.m,N,C,K.ub),C+=K.ub,z-=K.ub,K.Rb&&(X.Ld=re(G),X.Kd=re(G)),X=h.Qa;var Z,ie=h.Pa;if(e(G!=null),e(X!=null),X.Cb=re(G),X.Cb){if(X.Bb=re(G),re(G)){for(X.Fb=re(G),Z=0;4>Z;++Z)X.Zb[Z]=re(G)?te(G,7):0;for(Z=0;4>Z;++Z)X.Lb[Z]=re(G)?te(G,6):0}if(X.Bb)for(Z=0;3>Z;++Z)ie.jb[Z]=re(G)?ee(G,8):255}else X.Bb=0;if(G.Ka)return Sr(h,3,"cannot parse segment header");if((X=h.ed).zd=re(G),X.Tb=ee(G,6),X.wb=ee(G,3),X.Pc=re(G),X.Pc&&re(G)){for(ie=0;4>ie;++ie)re(G)&&(X.vd[ie]=te(G,6));for(ie=0;4>ie;++ie)re(G)&&(X.od[ie]=te(G,6))}if(h.L=X.Tb==0?0:X.zd?1:2,G.Ka)return Sr(h,3,"cannot parse filter header");var ce=z;if(z=Z=C,C=Z+ce,X=ce,h.Xb=(1<<ee(h.m,2))-1,ce<3*(ie=h.Xb))N=7;else{for(Z+=3*ie,X-=3*ie,ce=0;ce<ie;++ce){var _e=N[z+0]|N[z+1]<<8|N[z+2]<<16;_e>X&&(_e=X),V(h.Jc[+ce],N,Z,_e),Z+=_e,X-=_e,z+=3}V(h.Jc[+ie],N,Z,X),N=Z<C?0:5}if(N!=0)return Sr(h,N,"cannot parse partitions");for(N=ee(Z=h.m,7),z=re(Z)?te(Z,4):0,C=re(Z)?te(Z,4):0,X=re(Z)?te(Z,4):0,ie=re(Z)?te(Z,4):0,Z=re(Z)?te(Z,4):0,ce=h.Qa,_e=0;4>_e;++_e){if(ce.Cb){var xe=ce.Zb[_e];ce.Fb||(xe+=N)}else{if(0<_e){h.pb[_e]=h.pb[0];continue}xe=N}var ge=h.pb[_e];ge.Sc[0]=Uh[Un(xe+z,127)],ge.Sc[1]=zh[Un(xe+0,127)],ge.Eb[0]=2*Uh[Un(xe+C,127)],ge.Eb[1]=101581*zh[Un(xe+X,127)]>>16,8>ge.Eb[1]&&(ge.Eb[1]=8),ge.Qc[0]=Uh[Un(xe+ie,117)],ge.Qc[1]=zh[Un(xe+Z,127)],ge.lc=xe+Z}if(!K.Rb)return Sr(h,4,"Not a key frame.");for(re(G),K=h.Pa,N=0;4>N;++N){for(z=0;8>z;++z)for(C=0;3>C;++C)for(X=0;11>X;++X)ie=ne(G,B_[N][z][C][X])?ee(G,8):M_[N][z][C][X],K.Wc[N][z].Yb[C][X]=ie;for(z=0;17>z;++z)K.Xc[N][z]=K.Wc[N][q_[z]]}return h.kc=re(G),h.kc&&(h.Bd=ee(G,8)),h.cb=1}function vc(h,w,N,C,z,G,K){var X=w[z].Yb[N];for(N=0;16>z;++z){if(!ne(h,X[N+0]))return z;for(;!ne(h,X[N+1]);)if(X=w[++z].Yb[0],N=0,z==16)return 16;var Z=w[z+1].Yb;if(ne(h,X[N+2])){var ie=h,ce=0;if(ne(ie,(xe=X)[(_e=N)+3]))if(ne(ie,xe[_e+6])){for(X=0,_e=2*(ce=ne(ie,xe[_e+8]))+(xe=ne(ie,xe[_e+9+ce])),ce=0,xe=I_[_e];xe[X];++X)ce+=ce+ne(ie,xe[X]);ce+=3+(8<<_e)}else ne(ie,xe[_e+7])?(ce=7+2*ne(ie,165),ce+=ne(ie,145)):ce=5+ne(ie,159);else ce=ne(ie,xe[_e+4])?3+ne(ie,xe[_e+5]):2;X=Z[2]}else ce=1,X=Z[1];Z=K+D_[z],0>(ie=h).b&&Y(ie);var _e,xe=ie.b,ge=(_e=ie.Ca>>1)-(ie.I>>xe)>>31;--ie.b,ie.Ca+=ge,ie.Ca|=1,ie.I-=(_e+1&ge)<<xe,G[Z]=((ce^ge)-ge)*C[(0<z)+0]}return 16}function Ll(h){var w=h.rb[h.sb-1];w.la=0,w.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function vh(h,w){if(h==null)return 0;if(w==null)return Sr(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!mc(h,w))return 0;if(e(h.cb),w.ac==null||w.ac(w)){w.ob&&(h.L=0);var N=Wc[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=w.v-N>>4,h.zb=w.j-N>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=w.o+15+N>>4,h.Hb=w.va+15+N>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var C=h.ed;for(N=0;4>N;++N){var z;if(h.Qa.Cb){var G=h.Qa.Lb[N];h.Qa.Fb||(G+=C.Tb)}else G=C.Tb;for(z=0;1>=z;++z){var K=h.gd[N][z],X=G;if(C.Pc&&(X+=C.vd[0],z&&(X+=C.od[0])),0<(X=0>X?0:63<X?63:X)){var Z=X;0<C.wb&&(Z=4<C.wb?Z>>2:Z>>1)>9-C.wb&&(Z=9-C.wb),1>Z&&(Z=1),K.dd=Z,K.tc=2*X+Z,K.ld=40<=X?2:15<=X?1:0}else K.tc=0;K.La=z}}}N=0}else Sr(h,6,"Frame setup failed"),N=h.a;if(N=N==0){if(N){h.$c=0,0<h.Aa||(h.Ic=Z_);e:{N=h.Ic,C=4*(Z=h.za);var ie=32*Z,ce=Z+1,_e=0<h.L?Z*(0<h.Aa?2:1):0,xe=(h.Aa==2?2:1)*Z;if((K=C+832+(z=3*(16*N+Wc[h.L])/2*ie)+(G=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=K)N=0;else{if(K>h.Vb){if(h.Vb=0,h.Ec=o(K),h.Fc=0,h.Ec==null){N=Sr(h,1,"no memory during frame initialization.");break e}h.Vb=K}K=h.Ec,X=h.Fc,h.Ac=K,h.Bc=X,X+=C,h.Gd=a(ie,ga),h.Hd=0,h.rb=a(ce+1,Ln),h.sb=1,h.wa=_e?a(_e,_r):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=Z),e(!0),h.oc=K,h.pc=X,X+=832,h.ya=a(xe,Zi),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=Z),h.R=16*Z,h.B=8*Z,Z=(ie=Wc[h.L])*h.R,ie=ie/2*h.B,h.sa=K,h.ta=X+Z,h.qa=h.sa,h.ra=h.ta+16*N*h.R+ie,h.Ha=h.qa,h.Ia=h.ra+8*N*h.B+ie,h.$c=0,X+=z,h.mb=G?K:null,h.nb=G?X:null,e(X+G<=h.Fc+h.Vb),Ll(h),i(h.Ac,h.Bc,0,C),N=1}}if(N){if(w.ka=0,w.y=h.sa,w.O=h.ta,w.f=h.qa,w.N=h.ra,w.ea=h.Ha,w.Vd=h.Ia,w.fa=h.R,w.Rc=h.B,w.F=null,w.J=0,!Dc){for(N=-255;255>=N;++N)Mr[255+N]=0>N?-N:N;for(N=-1020;1020>=N;++N)oo[1020+N]=-128>N?-128:127<N?127:N;for(N=-112;112>=N;++N)Xl[112+N]=-16>N?-16:15<N?15:N;for(N=-255;510>=N;++N)_s[255+N]=0>N?0:255<N?255:N;Dc=1}ys=bh,io=yh,Kl=wc,yn=wh,ni=bc,kr=yc,ws=Il,Ic=ya,Yl=Ch,_a=Dl,xa=jh,To=us,Sa=Ml,bs=Lc,ka=Oc,Po=qi,Jl=to,ii=Ph,_i[0]=Bi,_i[1]=_h,_i[2]=Ah,_i[3]=Nh,_i[4]=Sc,_i[5]=ss,_i[6]=kc,_i[7]=jl,_i[8]=Oh,_i[9]=Eh,jo[0]=_c,jo[1]=Sh,jo[2]=eo,jo[3]=os,jo[4]=an,jo[5]=kh,jo[6]=xc,ao[0]=Ao,ao[1]=xh,ao[2]=Lh,ao[3]=Cl,ao[4]=va,ao[5]=Th,ao[6]=Rl,N=1}else N=0}N&&(N=function(ge,Ce){for(ge.M=0;ge.M<ge.Va;++ge.M){var Ae,fe=ge.Jc[ge.M&ge.Xb],pe=ge.m,Pe=ge;for(Ae=0;Ae<Pe.za;++Ae){var Re=pe,je=Pe,Ge=je.Ac,$e=je.Bc+4*Ae,lt=je.zc,He=je.ya[je.aa+Ae];if(je.Qa.Bb?He.$b=ne(Re,je.Pa.jb[0])?2+ne(Re,je.Pa.jb[2]):ne(Re,je.Pa.jb[1]):He.$b=0,je.kc&&(He.Ad=ne(Re,je.Bd)),He.Za=!ne(Re,145)+0,He.Za){var Rt=He.Ob,Ft=0;for(je=0;4>je;++je){var Tt,Nt=lt[0+je];for(Tt=0;4>Tt;++Tt){Nt=F_[Ge[$e+Tt]][Nt];for(var Gt=Wg[ne(Re,Nt[0])];0<Gt;)Gt=Wg[2*Gt+ne(Re,Nt[Gt])];Nt=-Gt,Ge[$e+Tt]=Nt}n(Rt,Ft,Ge,$e,4),Ft+=4,lt[0+je]=Nt}}else Nt=ne(Re,156)?ne(Re,128)?1:3:ne(Re,163)?2:0,He.Ob[0]=Nt,i(Ge,$e,Nt,4),i(lt,0,Nt,4);He.Dd=ne(Re,142)?ne(Re,114)?ne(Re,183)?1:3:2:0}if(Pe.m.Ka)return Sr(ge,7,"Premature end-of-partition0 encountered.");for(;ge.ja<ge.za;++ge.ja){if(Pe=fe,Re=(pe=ge).rb[pe.sb-1],Ge=pe.rb[pe.sb+pe.ja],Ae=pe.ya[pe.aa+pe.ja],$e=pe.kc?Ae.Ad:0)Re.la=Ge.la=0,Ae.Za||(Re.Na=Ge.Na=0),Ae.Hc=0,Ae.Gc=0,Ae.ia=0;else{var Wt,wt;if(Re=Ge,Ge=Pe,$e=pe.Pa.Xc,lt=pe.ya[pe.aa+pe.ja],He=pe.pb[lt.$b],je=lt.ad,Rt=0,Ft=pe.rb[pe.sb-1],Nt=Tt=0,i(je,Rt,0,384),lt.Za)var jr=0,Cn=$e[3];else{Gt=o(16);var Cr=Re.Na+Ft.Na;if(Cr=Ql(Ge,$e[1],Cr,He.Eb,0,Gt,0),Re.Na=Ft.Na=(0<Cr)+0,1<Cr)ys(Gt,0,je,Rt);else{var Rn=Gt[0]+3>>3;for(Gt=0;256>Gt;Gt+=16)je[Rt+Gt]=Rn}jr=1,Cn=$e[0]}var Bt=15&Re.la,$n=15&Ft.la;for(Gt=0;4>Gt;++Gt){var Hn=1&$n;for(Rn=wt=0;4>Rn;++Rn)Bt=Bt>>1|(Hn=(Cr=Ql(Ge,Cn,Cr=Hn+(1&Bt),He.Sc,jr,je,Rt))>jr)<<7,wt=wt<<2|(3<Cr?3:1<Cr?2:je[Rt+0]!=0),Rt+=16;Bt>>=4,$n=$n>>1|Hn<<7,Tt=(Tt<<8|wt)>>>0}for(Cn=Bt,jr=$n>>4,Wt=0;4>Wt;Wt+=2){for(wt=0,Bt=Re.la>>4+Wt,$n=Ft.la>>4+Wt,Gt=0;2>Gt;++Gt){for(Hn=1&$n,Rn=0;2>Rn;++Rn)Cr=Hn+(1&Bt),Bt=Bt>>1|(Hn=0<(Cr=Ql(Ge,$e[2],Cr,He.Qc,0,je,Rt)))<<3,wt=wt<<2|(3<Cr?3:1<Cr?2:je[Rt+0]!=0),Rt+=16;Bt>>=2,$n=$n>>1|Hn<<5}Nt|=wt<<4*Wt,Cn|=Bt<<4<<Wt,jr|=(240&$n)<<Wt}Re.la=Cn,Ft.la=jr,lt.Hc=Tt,lt.Gc=Nt,lt.ia=43690&Nt?0:He.ia,$e=!(Tt|Nt)}if(0<pe.L&&(pe.wa[pe.Y+pe.ja]=pe.gd[Ae.$b][Ae.Za],pe.wa[pe.Y+pe.ja].La|=!$e),Pe.Ka)return Sr(ge,7,"Premature end-of-file encountered.")}if(Ll(ge),pe=Ce,Pe=1,Ae=(fe=ge).D,Re=0<fe.L&&fe.M>=fe.zb&&fe.M<=fe.Va,fe.Aa==0)e:{if(Ae.M=fe.M,Ae.uc=Re,$l(fe,Ae),Pe=1,Ae=(wt=fe.D).Nb,Re=(Nt=Wc[fe.L])*fe.R,Ge=Nt/2*fe.B,Gt=16*Ae*fe.R,Rn=8*Ae*fe.B,$e=fe.sa,lt=fe.ta-Re+Gt,He=fe.qa,je=fe.ra-Ge+Rn,Rt=fe.Ha,Ft=fe.Ia-Ge+Rn,$n=(Bt=wt.M)==0,Tt=Bt>=fe.Va-1,fe.Aa==2&&$l(fe,wt),wt.uc)for(Hn=(Cr=fe).D.M,e(Cr.D.uc),wt=Cr.yb;wt<Cr.Hb;++wt){jr=wt,Cn=Hn;var Wr=(Qr=(vr=Cr).D).Nb;Wt=vr.R;var Qr=Qr.wa[Qr.Y+jr],wn=vr.sa,li=vr.ta+16*Wr*Wt+16*jr,zi=Qr.dd,Vr=Qr.tc;if(Vr!=0)if(e(3<=Vr),vr.L==1)0<jr&&Po(wn,li,Wt,Vr+4),Qr.La&&ii(wn,li,Wt,Vr),0<Cn&&ka(wn,li,Wt,Vr+4),Qr.La&&Jl(wn,li,Wt,Vr);else{var so=vr.B,Aa=vr.qa,xs=vr.ra+8*Wr*so+8*jr,Ro=vr.Ha,vr=vr.Ia+8*Wr*so+8*jr;Wr=Qr.ld,0<jr&&(Ic(wn,li,Wt,Vr+4,zi,Wr),_a(Aa,xs,Ro,vr,so,Vr+4,zi,Wr)),Qr.La&&(To(wn,li,Wt,Vr,zi,Wr),bs(Aa,xs,Ro,vr,so,Vr,zi,Wr)),0<Cn&&(ws(wn,li,Wt,Vr+4,zi,Wr),Yl(Aa,xs,Ro,vr,so,Vr+4,zi,Wr)),Qr.La&&(xa(wn,li,Wt,Vr,zi,Wr),Sa(Aa,xs,Ro,vr,so,Vr,zi,Wr))}}if(fe.ia&&alert("todo:DitherRow"),pe.put!=null){if(wt=16*Bt,Bt=16*(Bt+1),$n?(pe.y=fe.sa,pe.O=fe.ta+Gt,pe.f=fe.qa,pe.N=fe.ra+Rn,pe.ea=fe.Ha,pe.W=fe.Ia+Rn):(wt-=Nt,pe.y=$e,pe.O=lt,pe.f=He,pe.N=je,pe.ea=Rt,pe.W=Ft),Tt||(Bt-=Nt),Bt>pe.o&&(Bt=pe.o),pe.F=null,pe.J=null,fe.Fa!=null&&0<fe.Fa.length&&wt<Bt&&(pe.J=Ul(fe,pe,wt,Bt-wt),pe.F=fe.mb,pe.F==null&&pe.F.length==0)){Pe=Sr(fe,3,"Could not decode alpha data.");break e}wt<pe.j&&(Nt=pe.j-wt,wt=pe.j,e(!(1&Nt)),pe.O+=fe.R*Nt,pe.N+=fe.B*(Nt>>1),pe.W+=fe.B*(Nt>>1),pe.F!=null&&(pe.J+=pe.width*Nt)),wt<Bt&&(pe.O+=pe.v,pe.N+=pe.v>>1,pe.W+=pe.v>>1,pe.F!=null&&(pe.J+=pe.v),pe.ka=wt-pe.j,pe.U=pe.va-pe.v,pe.T=Bt-wt,Pe=pe.put(pe))}Ae+1!=fe.Ic||Tt||(n(fe.sa,fe.ta-Re,$e,lt+16*fe.R,Re),n(fe.qa,fe.ra-Ge,He,je+8*fe.B,Ge),n(fe.Ha,fe.Ia-Ge,Rt,Ft+8*fe.B,Ge))}if(!Pe)return Sr(ge,6,"Output aborted.")}return 1}(h,w)),w.bc!=null&&w.bc(w),N&=1}return N?(h.cb=0,N):0}function yi(h,w,N,C,z){z=h[w+N+32*C]+(z>>3),h[w+N+32*C]=-256&z?0>z?0:255:z}function is(h,w,N,C,z,G){yi(h,w,0,N,C+z),yi(h,w,1,N,C+G),yi(h,w,2,N,C-G),yi(h,w,3,N,C-z)}function Tn(h){return(20091*h>>16)+h}function Tl(h,w,N,C){var z,G=0,K=o(16);for(z=0;4>z;++z){var X=h[w+0]+h[w+8],Z=h[w+0]-h[w+8],ie=(35468*h[w+4]>>16)-Tn(h[w+12]),ce=Tn(h[w+4])+(35468*h[w+12]>>16);K[G+0]=X+ce,K[G+1]=Z+ie,K[G+2]=Z-ie,K[G+3]=X-ce,G+=4,w++}for(z=G=0;4>z;++z)X=(h=K[G+0]+4)+K[G+8],Z=h-K[G+8],ie=(35468*K[G+4]>>16)-Tn(K[G+12]),yi(N,C,0,0,X+(ce=Tn(K[G+4])+(35468*K[G+12]>>16))),yi(N,C,1,0,Z+ie),yi(N,C,2,0,Z-ie),yi(N,C,3,0,X-ce),G++,C+=32}function yc(h,w,N,C){var z=h[w+0]+4,G=35468*h[w+4]>>16,K=Tn(h[w+4]),X=35468*h[w+1]>>16;is(N,C,0,z+K,h=Tn(h[w+1]),X),is(N,C,1,z+G,h,X),is(N,C,2,z-G,h,X),is(N,C,3,z-K,h,X)}function yh(h,w,N,C,z){Tl(h,w,N,C),z&&Tl(h,w+16,N,C+4)}function wc(h,w,N,C){io(h,w+0,N,C,1),io(h,w+32,N,C+128,1)}function wh(h,w,N,C){var z;for(h=h[w+0]+4,z=0;4>z;++z)for(w=0;4>w;++w)yi(N,C,w,z,h)}function bc(h,w,N,C){h[w+0]&&yn(h,w+0,N,C),h[w+16]&&yn(h,w+16,N,C+4),h[w+32]&&yn(h,w+32,N,C+128),h[w+48]&&yn(h,w+48,N,C+128+4)}function bh(h,w,N,C){var z,G=o(16);for(z=0;4>z;++z){var K=h[w+0+z]+h[w+12+z],X=h[w+4+z]+h[w+8+z],Z=h[w+4+z]-h[w+8+z],ie=h[w+0+z]-h[w+12+z];G[0+z]=K+X,G[8+z]=K-X,G[4+z]=ie+Z,G[12+z]=ie-Z}for(z=0;4>z;++z)K=(h=G[0+4*z]+3)+G[3+4*z],X=G[1+4*z]+G[2+4*z],Z=G[1+4*z]-G[2+4*z],ie=h-G[3+4*z],N[C+0]=K+X>>3,N[C+16]=ie+Z>>3,N[C+32]=K-X>>3,N[C+48]=ie-Z>>3,C+=64}function Pl(h,w,N){var C,z=w-32,G=zn,K=255-h[z-1];for(C=0;C<N;++C){var X,Z=G,ie=K+h[w-1];for(X=0;X<N;++X)h[w+X]=Z[ie+h[z+X]];w+=32}}function _h(h,w){Pl(h,w,4)}function xh(h,w){Pl(h,w,8)}function Sh(h,w){Pl(h,w,16)}function eo(h,w){var N;for(N=0;16>N;++N)n(h,w+32*N,h,w-32,16)}function os(h,w){var N;for(N=16;0<N;--N)i(h,w,h[w-1],16),w+=32}function as(h,w,N){var C;for(C=0;16>C;++C)i(w,N+32*C,h,16)}function _c(h,w){var N,C=16;for(N=0;16>N;++N)C+=h[w-1+32*N]+h[w+N-32];as(C>>5,h,w)}function an(h,w){var N,C=8;for(N=0;16>N;++N)C+=h[w-1+32*N];as(C>>4,h,w)}function kh(h,w){var N,C=8;for(N=0;16>N;++N)C+=h[w+N-32];as(C>>4,h,w)}function xc(h,w){as(128,h,w)}function pt(h,w,N){return h+2*w+N+2>>2}function Ah(h,w){var N,C=w-32;for(C=new Uint8Array([pt(h[C-1],h[C+0],h[C+1]),pt(h[C+0],h[C+1],h[C+2]),pt(h[C+1],h[C+2],h[C+3]),pt(h[C+2],h[C+3],h[C+4])]),N=0;4>N;++N)n(h,w+32*N,C,0,C.length)}function Nh(h,w){var N=h[w-1],C=h[w-1+32],z=h[w-1+64],G=h[w-1+96];de(h,w+0,16843009*pt(h[w-1-32],N,C)),de(h,w+32,16843009*pt(N,C,z)),de(h,w+64,16843009*pt(C,z,G)),de(h,w+96,16843009*pt(z,G,G))}function Bi(h,w){var N,C=4;for(N=0;4>N;++N)C+=h[w+N-32]+h[w-1+32*N];for(C>>=3,N=0;4>N;++N)i(h,w+32*N,C,4)}function Sc(h,w){var N=h[w-1+0],C=h[w-1+32],z=h[w-1+64],G=h[w-1-32],K=h[w+0-32],X=h[w+1-32],Z=h[w+2-32],ie=h[w+3-32];h[w+0+96]=pt(C,z,h[w-1+96]),h[w+1+96]=h[w+0+64]=pt(N,C,z),h[w+2+96]=h[w+1+64]=h[w+0+32]=pt(G,N,C),h[w+3+96]=h[w+2+64]=h[w+1+32]=h[w+0+0]=pt(K,G,N),h[w+3+64]=h[w+2+32]=h[w+1+0]=pt(X,K,G),h[w+3+32]=h[w+2+0]=pt(Z,X,K),h[w+3+0]=pt(ie,Z,X)}function kc(h,w){var N=h[w+1-32],C=h[w+2-32],z=h[w+3-32],G=h[w+4-32],K=h[w+5-32],X=h[w+6-32],Z=h[w+7-32];h[w+0+0]=pt(h[w+0-32],N,C),h[w+1+0]=h[w+0+32]=pt(N,C,z),h[w+2+0]=h[w+1+32]=h[w+0+64]=pt(C,z,G),h[w+3+0]=h[w+2+32]=h[w+1+64]=h[w+0+96]=pt(z,G,K),h[w+3+32]=h[w+2+64]=h[w+1+96]=pt(G,K,X),h[w+3+64]=h[w+2+96]=pt(K,X,Z),h[w+3+96]=pt(X,Z,Z)}function ss(h,w){var N=h[w-1+0],C=h[w-1+32],z=h[w-1+64],G=h[w-1-32],K=h[w+0-32],X=h[w+1-32],Z=h[w+2-32],ie=h[w+3-32];h[w+0+0]=h[w+1+64]=G+K+1>>1,h[w+1+0]=h[w+2+64]=K+X+1>>1,h[w+2+0]=h[w+3+64]=X+Z+1>>1,h[w+3+0]=Z+ie+1>>1,h[w+0+96]=pt(z,C,N),h[w+0+64]=pt(C,N,G),h[w+0+32]=h[w+1+96]=pt(N,G,K),h[w+1+32]=h[w+2+96]=pt(G,K,X),h[w+2+32]=h[w+3+96]=pt(K,X,Z),h[w+3+32]=pt(X,Z,ie)}function jl(h,w){var N=h[w+0-32],C=h[w+1-32],z=h[w+2-32],G=h[w+3-32],K=h[w+4-32],X=h[w+5-32],Z=h[w+6-32],ie=h[w+7-32];h[w+0+0]=N+C+1>>1,h[w+1+0]=h[w+0+64]=C+z+1>>1,h[w+2+0]=h[w+1+64]=z+G+1>>1,h[w+3+0]=h[w+2+64]=G+K+1>>1,h[w+0+32]=pt(N,C,z),h[w+1+32]=h[w+0+96]=pt(C,z,G),h[w+2+32]=h[w+1+96]=pt(z,G,K),h[w+3+32]=h[w+2+96]=pt(G,K,X),h[w+3+64]=pt(K,X,Z),h[w+3+96]=pt(X,Z,ie)}function Eh(h,w){var N=h[w-1+0],C=h[w-1+32],z=h[w-1+64],G=h[w-1+96];h[w+0+0]=N+C+1>>1,h[w+2+0]=h[w+0+32]=C+z+1>>1,h[w+2+32]=h[w+0+64]=z+G+1>>1,h[w+1+0]=pt(N,C,z),h[w+3+0]=h[w+1+32]=pt(C,z,G),h[w+3+32]=h[w+1+64]=pt(z,G,G),h[w+3+64]=h[w+2+64]=h[w+0+96]=h[w+1+96]=h[w+2+96]=h[w+3+96]=G}function Oh(h,w){var N=h[w-1+0],C=h[w-1+32],z=h[w-1+64],G=h[w-1+96],K=h[w-1-32],X=h[w+0-32],Z=h[w+1-32],ie=h[w+2-32];h[w+0+0]=h[w+2+32]=N+K+1>>1,h[w+0+32]=h[w+2+64]=C+N+1>>1,h[w+0+64]=h[w+2+96]=z+C+1>>1,h[w+0+96]=G+z+1>>1,h[w+3+0]=pt(X,Z,ie),h[w+2+0]=pt(K,X,Z),h[w+1+0]=h[w+3+32]=pt(N,K,X),h[w+1+32]=h[w+3+64]=pt(C,N,K),h[w+1+64]=h[w+3+96]=pt(z,C,N),h[w+1+96]=pt(G,z,C)}function Lh(h,w){var N;for(N=0;8>N;++N)n(h,w+32*N,h,w-32,8)}function Cl(h,w){var N;for(N=0;8>N;++N)i(h,w,h[w-1],8),w+=32}function ma(h,w,N){var C;for(C=0;8>C;++C)i(w,N+32*C,h,8)}function Ao(h,w){var N,C=8;for(N=0;8>N;++N)C+=h[w+N-32]+h[w-1+32*N];ma(C>>4,h,w)}function Th(h,w){var N,C=4;for(N=0;8>N;++N)C+=h[w+N-32];ma(C>>3,h,w)}function va(h,w){var N,C=4;for(N=0;8>N;++N)C+=h[w-1+32*N];ma(C>>3,h,w)}function Rl(h,w){ma(128,h,w)}function ls(h,w,N){var C=h[w-N],z=h[w+0],G=3*(z-C)+Dh[1020+h[w-2*N]-h[w+N]],K=Mc[112+(G+4>>3)];h[w-N]=zn[255+C+Mc[112+(G+3>>3)]],h[w+0]=zn[255+z-K]}function Ac(h,w,N,C){var z=h[w+0],G=h[w+N];return ai[255+h[w-2*N]-h[w-N]]>C||ai[255+G-z]>C}function Nc(h,w,N,C){return 4*ai[255+h[w-N]-h[w+0]]+ai[255+h[w-2*N]-h[w+N]]<=C}function Ec(h,w,N,C,z){var G=h[w-3*N],K=h[w-2*N],X=h[w-N],Z=h[w+0],ie=h[w+N],ce=h[w+2*N],_e=h[w+3*N];return 4*ai[255+X-Z]+ai[255+K-ie]>C?0:ai[255+h[w-4*N]-G]<=z&&ai[255+G-K]<=z&&ai[255+K-X]<=z&&ai[255+_e-ce]<=z&&ai[255+ce-ie]<=z&&ai[255+ie-Z]<=z}function Oc(h,w,N,C){var z=2*C+1;for(C=0;16>C;++C)Nc(h,w+C,N,z)&&ls(h,w+C,N)}function qi(h,w,N,C){var z=2*C+1;for(C=0;16>C;++C)Nc(h,w+C*N,1,z)&&ls(h,w+C*N,1)}function to(h,w,N,C){var z;for(z=3;0<z;--z)Oc(h,w+=4*N,N,C)}function Ph(h,w,N,C){var z;for(z=3;0<z;--z)qi(h,w+=4,N,C)}function No(h,w,N,C,z,G,K,X){for(G=2*G+1;0<z--;){if(Ec(h,w,N,G,K))if(Ac(h,w,N,X))ls(h,w,N);else{var Z=h,ie=w,ce=N,_e=Z[ie-2*ce],xe=Z[ie-ce],ge=Z[ie+0],Ce=Z[ie+ce],Ae=Z[ie+2*ce],fe=27*(Pe=Dh[1020+3*(ge-xe)+Dh[1020+_e-Ce]])+63>>7,pe=18*Pe+63>>7,Pe=9*Pe+63>>7;Z[ie-3*ce]=zn[255+Z[ie-3*ce]+Pe],Z[ie-2*ce]=zn[255+_e+pe],Z[ie-ce]=zn[255+xe+fe],Z[ie+0]=zn[255+ge-fe],Z[ie+ce]=zn[255+Ce-pe],Z[ie+2*ce]=zn[255+Ae-Pe]}w+=C}}function wi(h,w,N,C,z,G,K,X){for(G=2*G+1;0<z--;){if(Ec(h,w,N,G,K))if(Ac(h,w,N,X))ls(h,w,N);else{var Z=h,ie=w,ce=N,_e=Z[ie-ce],xe=Z[ie+0],ge=Z[ie+ce],Ce=Mc[112+((Ae=3*(xe-_e))+4>>3)],Ae=Mc[112+(Ae+3>>3)],fe=Ce+1>>1;Z[ie-2*ce]=zn[255+Z[ie-2*ce]+fe],Z[ie-ce]=zn[255+_e+Ae],Z[ie+0]=zn[255+xe-Ce],Z[ie+ce]=zn[255+ge-fe]}w+=C}}function Il(h,w,N,C,z,G){No(h,w,N,1,16,C,z,G)}function ya(h,w,N,C,z,G){No(h,w,1,N,16,C,z,G)}function jh(h,w,N,C,z,G){var K;for(K=3;0<K;--K)wi(h,w+=4*N,N,1,16,C,z,G)}function us(h,w,N,C,z,G){var K;for(K=3;0<K;--K)wi(h,w+=4,1,N,16,C,z,G)}function Ch(h,w,N,C,z,G,K,X){No(h,w,z,1,8,G,K,X),No(N,C,z,1,8,G,K,X)}function Dl(h,w,N,C,z,G,K,X){No(h,w,1,z,8,G,K,X),No(N,C,1,z,8,G,K,X)}function Ml(h,w,N,C,z,G,K,X){wi(h,w+4*z,z,1,8,G,K,X),wi(N,C+4*z,z,1,8,G,K,X)}function Lc(h,w,N,C,z,G,K,X){wi(h,w+4,1,z,8,G,K,X),wi(N,C+4,1,z,8,G,K,X)}function cs(){this.ba=new zr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new jt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Fl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Bl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Tc(){this.ua=0,this.Wa=new ae,this.vb=new ae,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new E}function Rh(){this.xb=this.a=0,this.l=new ns,this.ca=new zr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Tc,this.ab=0,this.gc=a(4,Bl),this.Oc=0}function fs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ns,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wa(h,w,N,C,z,G,K){for(h=h==null?0:h[w+0],w=0;w<K;++w)z[G+w]=h+N[C+w]&255,h=z[G+w]}function ql(h,w,N,C,z,G,K){var X;if(h==null)wa(null,null,N,C,z,G,K);else for(X=0;X<K;++X)z[G+X]=h[w+X]+N[C+X]&255}function Eo(h,w,N,C,z,G,K){if(h==null)wa(null,null,N,C,z,G,K);else{var X,Z=h[w+0],ie=Z,ce=Z;for(X=0;X<K;++X)ie=ce+(Z=h[w+X])-ie,ce=N[C+X]+(-256&ie?0>ie?0:255:ie)&255,ie=Z,z[G+X]=ce}}function Ul(h,w,N,C){var z=w.width,G=w.o;if(e(h!=null&&w!=null),0>N||0>=C||N+C>G)return null;if(!h.Cc){if(h.ga==null){var K;if(h.ga=new fs,(K=h.ga==null)||(K=w.width*w.o,e(h.Gb.length==0),h.Gb=o(K),h.Uc=0,h.Gb==null?K=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,K=1),K=!K),!K){K=h.ga;var X=h.Fa,Z=h.P,ie=h.qc,ce=h.mb,_e=h.nb,xe=Z+1,ge=ie-1,Ce=K.l;if(e(X!=null&&ce!=null&&w!=null),Co[0]=null,Co[1]=wa,Co[2]=ql,Co[3]=Eo,K.ca=ce,K.tb=_e,K.c=w.width,K.i=w.height,e(0<K.c&&0<K.i),1>=ie)w=0;else if(K.$a=X[Z+0]>>0&3,K.Z=X[Z+0]>>2&3,K.Lc=X[Z+0]>>4&3,Z=X[Z+0]>>6&3,0>K.$a||1<K.$a||4<=K.Z||1<K.Lc||Z)w=0;else if(Ce.put=Jr,Ce.ac=Yt,Ce.bc=Ne,Ce.ma=K,Ce.width=w.width,Ce.height=w.height,Ce.Da=w.Da,Ce.v=w.v,Ce.va=w.va,Ce.j=w.j,Ce.o=w.o,K.$a)e:{e(K.$a==1),w=$r();t:for(;;){if(w==null){w=0;break e}if(e(K!=null),K.mc=w,w.c=K.c,w.i=K.i,w.l=K.l,w.l.ma=K,w.l.width=K.c,w.l.height=K.i,w.a=0,Q(w.m,X,xe,ge),!on(K.c,K.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&It(w.s)?(K.ic=1,X=w.c*w.i,w.Ta=null,w.Ua=0,w.V=o(X),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(K.ic=0,w=Dr(w,K.c)),!w))break t;w=1;break e}K.mc=null,w=0}else w=ge>=K.c*K.i;K=!w}if(K)return null;h.ga.Lc!=1?h.Ga=0:C=G-N}e(h.ga!=null),e(N+C<=G);e:{if(w=(X=h.ga).c,G=X.l.o,X.$a==0){if(xe=h.rc,ge=h.Vc,Ce=h.Fa,Z=h.P+1+N*w,ie=h.mb,ce=h.nb+N*w,e(Z<=h.P+h.qc),X.Z!=0)for(e(Co[X.Z]!=null),K=0;K<C;++K)Co[X.Z](xe,ge,Ce,Z,ie,ce,w),xe=ie,ge=ce,ce+=w,Z+=w;else for(K=0;K<C;++K)n(ie,ce,Ce,Z,w),xe=ie,ge=ce,ce+=w,Z+=w;h.rc=xe,h.Vc=ge}else{if(e(X.mc!=null),w=N+C,e((K=X.mc)!=null),e(w<=K.i),K.C>=w)w=1;else if(X.ic||we(),X.ic){X=K.V,xe=K.Ba,ge=K.c;var Ae=K.i,fe=(Ce=1,Z=K.$/ge,ie=K.$%ge,ce=K.m,_e=K.s,K.$),pe=ge*Ae,Pe=ge*w,Re=_e.wc,je=fe<Pe?bt(_e,ie,Z):null;e(fe<=pe),e(w<=Ae),e(It(_e));t:for(;;){for(;!ce.h&&fe<Pe;){if(ie&Re||(je=bt(_e,ie,Z)),e(je!=null),B(ce),256>(Ae=yt(je.G[0],je.H[0],ce)))X[xe+fe]=Ae,++fe,++ie>=ge&&(ie=0,++Z<=w&&!(Z%16)&&Ht(K,Z));else{if(!(280>Ae)){Ce=0;break t}Ae=tt(Ae-256,ce);var Ge,$e=yt(je.G[4],je.H[4],ce);if(B(ce),!(fe>=($e=rt(ge,$e=tt($e,ce)))&&pe-fe>=Ae)){Ce=0;break t}for(Ge=0;Ge<Ae;++Ge)X[xe+fe+Ge]=X[xe+fe+Ge-$e];for(fe+=Ae,ie+=Ae;ie>=ge;)ie-=ge,++Z<=w&&!(Z%16)&&Ht(K,Z);fe<Pe&&ie&Re&&(je=bt(_e,ie,Z))}e(ce.h==U(ce))}Ht(K,Z>w?w:Z);break t}!Ce||ce.h&&fe<pe?(Ce=0,K.a=ce.h?5:3):K.$=fe,w=Ce}else w=rr(K,K.V,K.Ba,K.c,K.i,w,Ye);if(!w){C=0;break e}}N+C>=G&&(h.Cc=1),C=1}if(!C)return null;if(h.Cc&&((C=h.ga)!=null&&(C.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+N*z}function k(h,w,N,C,z,G){for(;0<z--;){var K,X=h,Z=w+(N?1:0),ie=h,ce=w+(N?0:3);for(K=0;K<C;++K){var _e=ie[ce+4*K];_e!=255&&(_e*=32897,X[Z+4*K+0]=X[Z+4*K+0]*_e>>23,X[Z+4*K+1]=X[Z+4*K+1]*_e>>23,X[Z+4*K+2]=X[Z+4*K+2]*_e>>23)}w+=G}}function $(h,w,N,C,z){for(;0<C--;){var G;for(G=0;G<N;++G){var K=h[w+2*G+0],X=15&(ie=h[w+2*G+1]),Z=4369*X,ie=(240&ie|ie>>4)*Z>>16;h[w+2*G+0]=(240&K|K>>4)*Z>>16&240|(15&K|K<<4)*Z>>16>>4&15,h[w+2*G+1]=240&ie|X}w+=z}}function oe(h,w,N,C,z,G,K,X){var Z,ie,ce=255;for(ie=0;ie<z;++ie){for(Z=0;Z<C;++Z){var _e=h[w+Z];G[K+4*Z]=_e,ce&=_e}w+=N,K+=X}return ce!=255}function ue(h,w,N,C,z){var G;for(G=0;G<z;++G)N[C+G]=h[w+G]>>8}function we(){oi=k,Xt=$,Qt=oe,Ar=ue}function Ee(h,w,N){O[h]=function(C,z,G,K,X,Z,ie,ce,_e,xe,ge,Ce,Ae,fe,pe,Pe,Re){var je,Ge=Re-1>>1,$e=X[Z+0]|ie[ce+0]<<16,lt=_e[xe+0]|ge[Ce+0]<<16;e(C!=null);var He=3*$e+lt+131074>>2;for(w(C[z+0],255&He,He>>16,Ae,fe),G!=null&&(He=3*lt+$e+131074>>2,w(G[K+0],255&He,He>>16,pe,Pe)),je=1;je<=Ge;++je){var Rt=X[Z+je]|ie[ce+je]<<16,Ft=_e[xe+je]|ge[Ce+je]<<16,Tt=$e+Rt+lt+Ft+524296,Nt=Tt+2*(Rt+lt)>>3;He=Nt+$e>>1,$e=(Tt=Tt+2*($e+Ft)>>3)+Rt>>1,w(C[z+2*je-1],255&He,He>>16,Ae,fe+(2*je-1)*N),w(C[z+2*je-0],255&$e,$e>>16,Ae,fe+(2*je-0)*N),G!=null&&(He=Tt+lt>>1,$e=Nt+Ft>>1,w(G[K+2*je-1],255&He,He>>16,pe,Pe+(2*je-1)*N),w(G[K+2*je+0],255&$e,$e>>16,pe,Pe+(2*je+0)*N)),$e=Rt,lt=Ft}1&Re||(He=3*$e+lt+131074>>2,w(C[z+Re-1],255&He,He>>16,Ae,fe+(Re-1)*N),G!=null&&(He=3*lt+$e+131074>>2,w(G[K+Re-1],255&He,He>>16,pe,Pe+(Re-1)*N)))}}function Ie(){si[Fc]=z_,si[Bc]=Gg,si[zg]=$_,si[qc]=Kg,si[Uc]=Yg,si[Mh]=Jg,si[$g]=H_,si[Fh]=Gg,si[Bh]=Kg,si[zc]=Yg,si[qh]=Jg}function Ve(h){return h&-16384?0>h?0:255:h>>W_}function at(h,w){return Ve((19077*h>>8)+(26149*w>>8)-14234)}function vt(h,w,N){return Ve((19077*h>>8)-(6419*w>>8)-(13320*N>>8)+8708)}function gt(h,w){return Ve((19077*h>>8)+(33050*w>>8)-17685)}function Ot(h,w,N,C,z){C[z+0]=at(h,N),C[z+1]=vt(h,w,N),C[z+2]=gt(h,w)}function fr(h,w,N,C,z){C[z+0]=gt(h,w),C[z+1]=vt(h,w,N),C[z+2]=at(h,N)}function mr(h,w,N,C,z){var G=vt(h,w,N);w=G<<3&224|gt(h,w)>>3,C[z+0]=248&at(h,N)|G>>5,C[z+1]=w}function Pr(h,w,N,C,z){var G=240&gt(h,w)|15;C[z+0]=240&at(h,N)|vt(h,w,N)>>4,C[z+1]=G}function sn(h,w,N,C,z){C[z+0]=255,Ot(h,w,N,C,z+1)}function Hr(h,w,N,C,z){fr(h,w,N,C,z),C[z+3]=255}function bi(h,w,N,C,z){Ot(h,w,N,C,z),C[z+3]=255}function Un(h,w){return 0>h?0:h>w?w:h}function Ui(h,w,N){O[h]=function(C,z,G,K,X,Z,ie,ce,_e){for(var xe=ce+(-2&_e)*N;ce!=xe;)w(C[z+0],G[K+0],X[Z+0],ie,ce),w(C[z+1],G[K+0],X[Z+0],ie,ce+N),z+=2,++K,++Z,ce+=2*N;1&_e&&w(C[z+0],G[K+0],X[Z+0],ie,ce)}}function Pc(h,w,N){return N==0?h==0?w==0?6:5:w==0?4:0:N}function zl(h,w,N,C,z){switch(h>>>30){case 3:io(w,N,C,z,0);break;case 2:kr(w,N,C,z);break;case 1:yn(w,N,C,z)}}function $l(h,w){var N,C,z=w.M,G=w.Nb,K=h.oc,X=h.pc+40,Z=h.oc,ie=h.pc+584,ce=h.oc,_e=h.pc+600;for(N=0;16>N;++N)K[X+32*N-1]=129;for(N=0;8>N;++N)Z[ie+32*N-1]=129,ce[_e+32*N-1]=129;for(0<z?K[X-1-32]=Z[ie-1-32]=ce[_e-1-32]=129:(i(K,X-32-1,127,21),i(Z,ie-32-1,127,9),i(ce,_e-32-1,127,9)),C=0;C<h.za;++C){var xe=w.ya[w.aa+C];if(0<C){for(N=-1;16>N;++N)n(K,X+32*N-4,K,X+32*N+12,4);for(N=-1;8>N;++N)n(Z,ie+32*N-4,Z,ie+32*N+4,4),n(ce,_e+32*N-4,ce,_e+32*N+4,4)}var ge=h.Gd,Ce=h.Hd+C,Ae=xe.ad,fe=xe.Hc;if(0<z&&(n(K,X-32,ge[Ce].y,0,16),n(Z,ie-32,ge[Ce].f,0,8),n(ce,_e-32,ge[Ce].ea,0,8)),xe.Za){var pe=K,Pe=X-32+16;for(0<z&&(C>=h.za-1?i(pe,Pe,ge[Ce].y[15],4):n(pe,Pe,ge[Ce+1].y,0,4)),N=0;4>N;N++)pe[Pe+128+N]=pe[Pe+256+N]=pe[Pe+384+N]=pe[Pe+0+N];for(N=0;16>N;++N,fe<<=2)pe=K,Pe=X+Qg[N],_i[xe.Ob[N]](pe,Pe),zl(fe,Ae,16*+N,pe,Pe)}else if(pe=Pc(C,z,xe.Ob[0]),jo[pe](K,X),fe!=0)for(N=0;16>N;++N,fe<<=2)zl(fe,Ae,16*+N,K,X+Qg[N]);for(N=xe.Gc,pe=Pc(C,z,xe.Dd),ao[pe](Z,ie),ao[pe](ce,_e),fe=Ae,pe=Z,Pe=ie,255&(xe=N>>0)&&(170&xe?Kl(fe,256,pe,Pe):ni(fe,256,pe,Pe)),xe=ce,fe=_e,255&(N>>=8)&&(170&N?Kl(Ae,320,xe,fe):ni(Ae,320,xe,fe)),z<h.Ub-1&&(n(ge[Ce].y,0,K,X+480,16),n(ge[Ce].f,0,Z,ie+224,8),n(ge[Ce].ea,0,ce,_e+224,8)),N=8*G*h.B,ge=h.sa,Ce=h.ta+16*C+16*G*h.R,Ae=h.qa,xe=h.ra+8*C+N,fe=h.Ha,pe=h.Ia+8*C+N,N=0;16>N;++N)n(ge,Ce+N*h.R,K,X+32*N,16);for(N=0;8>N;++N)n(Ae,xe+N*h.B,Z,ie+32*N,8),n(fe,pe+N*h.B,ce,_e+32*N,8)}}function ds(h,w,N,C,z,G,K,X,Z){var ie=[0],ce=[0],_e=0,xe=Z!=null?Z.kd:0,ge=Z??new Fl;if(h==null||12>N)return 7;ge.data=h,ge.w=w,ge.ha=N,w=[w],N=[N],ge.gb=[ge.gb];e:{var Ce=w,Ae=N,fe=ge.gb;if(e(h!=null),e(Ae!=null),e(fe!=null),fe[0]=0,12<=Ae[0]&&!r(h,Ce[0],"RIFF")){if(r(h,Ce[0]+8,"WEBP")){fe=3;break e}var pe=Oe(h,Ce[0]+4);if(12>pe||4294967286<pe){fe=3;break e}if(xe&&pe>Ae[0]-8){fe=7;break e}fe[0]=pe,Ce[0]+=12,Ae[0]-=12}fe=0}if(fe!=0)return fe;for(pe=0<ge.gb[0],N=N[0];;){e:{var Pe=h;Ae=w,fe=N;var Re=ie,je=ce,Ge=Ce=[0];if((He=_e=[_e])[0]=0,8>fe[0])fe=7;else{if(!r(Pe,Ae[0],"VP8X")){if(Oe(Pe,Ae[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var $e=Oe(Pe,Ae[0]+8),lt=1+Te(Pe,Ae[0]+12);if(2147483648<=lt*(Pe=1+Te(Pe,Ae[0]+15))){fe=3;break e}Ge!=null&&(Ge[0]=$e),Re!=null&&(Re[0]=lt),je!=null&&(je[0]=Pe),Ae[0]+=18,fe[0]-=18,He[0]=1}fe=0}}if(_e=_e[0],Ce=Ce[0],fe!=0)return fe;if(Ae=!!(2&Ce),!pe&&_e)return 3;if(G!=null&&(G[0]=!!(16&Ce)),K!=null&&(K[0]=Ae),X!=null&&(X[0]=0),K=ie[0],Ce=ce[0],_e&&Ae&&Z==null){fe=0;break}if(4>N){fe=7;break}if(pe&&_e||!pe&&!_e&&!r(h,w[0],"ALPH")){N=[N],ge.na=[ge.na],ge.P=[ge.P],ge.Sa=[ge.Sa];e:{$e=h,fe=w,pe=N;var He=ge.gb;Re=ge.na,je=ge.P,Ge=ge.Sa,lt=22,e($e!=null),e(pe!=null),Pe=fe[0];var Rt=pe[0];for(e(Re!=null),e(Ge!=null),Re[0]=null,je[0]=null,Ge[0]=0;;){if(fe[0]=Pe,pe[0]=Rt,8>Rt){fe=7;break e}var Ft=Oe($e,Pe+4);if(4294967286<Ft){fe=3;break e}var Tt=8+Ft+1&-2;if(lt+=Tt,0<He&&lt>He){fe=3;break e}if(!r($e,Pe,"VP8 ")||!r($e,Pe,"VP8L")){fe=0;break e}if(Rt[0]<Tt){fe=7;break e}r($e,Pe,"ALPH")||(Re[0]=$e,je[0]=Pe+8,Ge[0]=Ft),Pe+=Tt,Rt-=Tt}}if(N=N[0],ge.na=ge.na[0],ge.P=ge.P[0],ge.Sa=ge.Sa[0],fe!=0)break}N=[N],ge.Ja=[ge.Ja],ge.xa=[ge.xa];e:if(He=h,fe=w,pe=N,Re=ge.gb[0],je=ge.Ja,Ge=ge.xa,$e=fe[0],Pe=!r(He,$e,"VP8 "),lt=!r(He,$e,"VP8L"),e(He!=null),e(pe!=null),e(je!=null),e(Ge!=null),8>pe[0])fe=7;else{if(Pe||lt){if(He=Oe(He,$e+4),12<=Re&&He>Re-12){fe=3;break e}if(xe&&He>pe[0]-8){fe=7;break e}je[0]=He,fe[0]+=8,pe[0]-=8,Ge[0]=lt}else Ge[0]=5<=pe[0]&&He[$e+0]==47&&!(He[$e+4]>>5),je[0]=pe[0];fe=0}if(N=N[0],ge.Ja=ge.Ja[0],ge.xa=ge.xa[0],w=w[0],fe!=0)break;if(4294967286<ge.Ja)return 3;if(X==null||Ae||(X[0]=ge.xa?2:1),K=[K],Ce=[Ce],ge.xa){if(5>N){fe=7;break}X=K,xe=Ce,Ae=G,h==null||5>N?h=0:5<=N&&h[w+0]==47&&!(h[w+4]>>5)?(pe=[0],He=[0],Re=[0],Q(je=new L,h,w,N),Le(je,pe,He,Re)?(X!=null&&(X[0]=pe[0]),xe!=null&&(xe[0]=He[0]),Ae!=null&&(Ae[0]=Re[0]),h=1):h=0):h=0}else{if(10>N){fe=7;break}X=Ce,h==null||10>N||!gc(h,w+3,N-3)?h=0:(xe=h[w+0]|h[w+1]<<8|h[w+2]<<16,Ae=16383&(h[w+7]<<8|h[w+6]),h=16383&(h[w+9]<<8|h[w+8]),1&xe||3<(xe>>1&7)||!(xe>>4&1)||xe>>5>=ge.Ja||!Ae||!h?h=0:(K&&(K[0]=Ae),X&&(X[0]=h),h=1))}if(!h||(K=K[0],Ce=Ce[0],_e&&(ie[0]!=K||ce[0]!=Ce)))return 3;Z!=null&&(Z[0]=ge,Z.offset=w-Z.w,e(4294967286>w-Z.w),e(Z.offset==Z.ha-N));break}return fe==0||fe==7&&_e&&Z==null?(G!=null&&(G[0]|=ge.na!=null&&0<ge.na.length),C!=null&&(C[0]=K),z!=null&&(z[0]=Ce),0):fe}function Hl(h,w,N){var C=w.width,z=w.height,G=0,K=0,X=C,Z=z;if(w.Da=h!=null&&0<h.Da,w.Da&&(X=h.cd,Z=h.bd,G=h.v,K=h.j,11>N||(G&=-2,K&=-2),0>G||0>K||0>=X||0>=Z||G+X>C||K+Z>z))return 0;if(w.v=G,w.j=K,w.va=G+X,w.o=K+Z,w.U=X,w.T=Z,w.da=h!=null&&0<h.da,w.da){if(!Ke(X,Z,N=[h.ib],G=[h.hb]))return 0;w.ib=N[0],w.hb=G[0]}return w.ob=h!=null&&h.ob,w.Kb=h==null||!h.Sd,w.da&&(w.ob=w.ib<3*C/4&&w.hb<3*z/4,w.Kb=0),1}function Wl(h){if(h==null)return 2;if(11>h.S){var w=h.f.RGBA;w.fb+=(h.height-1)*w.A,w.A=-w.A}else w=h.f.kb,h=h.height,w.O+=(h-1)*w.fa,w.fa=-w.fa,w.N+=(h-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(h-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(h-1)*w.lb,w.lb=-w.lb);return 0}function hs(h,w,N,C){if(C==null||0>=h||0>=w)return 2;if(N!=null){if(N.Da){var z=N.cd,G=N.bd,K=-2&N.v,X=-2&N.j;if(0>K||0>X||0>=z||0>=G||K+z>h||X+G>w)return 2;h=z,w=G}if(N.da){if(!Ke(h,w,z=[N.ib],G=[N.hb]))return 2;h=z[0],w=G[0]}}C.width=h,C.height=w;e:{var Z=C.width,ie=C.height;if(h=C.S,0>=Z||0>=ie||!(h>=Fc&&13>h))h=2;else{if(0>=C.Rd&&C.sd==null){K=G=z=w=0;var ce=(X=Z*Zg[h])*ie;if(11>h||(G=(ie+1)/2*(w=(Z+1)/2),h==12&&(K=(z=Z)*ie)),(ie=o(ce+2*G+K))==null){h=1;break e}C.sd=ie,11>h?((Z=C.f.RGBA).eb=ie,Z.fb=0,Z.A=X,Z.size=ce):((Z=C.f.kb).y=ie,Z.O=0,Z.fa=X,Z.Fd=ce,Z.f=ie,Z.N=0+ce,Z.Ab=w,Z.Cd=G,Z.ea=ie,Z.W=0+ce+G,Z.Db=w,Z.Ed=G,h==12&&(Z.F=ie,Z.J=0+ce+2*G),Z.Tc=K,Z.lb=z)}if(w=1,z=C.S,G=C.width,K=C.height,z>=Fc&&13>z)if(11>z)h=C.f.RGBA,w&=(X=Math.abs(h.A))*(K-1)+G<=h.size,w&=X>=G*Zg[z],w&=h.eb!=null;else{h=C.f.kb,X=(G+1)/2,ce=(K+1)/2,Z=Math.abs(h.fa),ie=Math.abs(h.Ab);var _e=Math.abs(h.Db),xe=Math.abs(h.lb),ge=xe*(K-1)+G;w&=Z*(K-1)+G<=h.Fd,w&=ie*(ce-1)+X<=h.Cd,w=(w&=_e*(ce-1)+X<=h.Ed)&Z>=G&ie>=X&_e>=X,w&=h.y!=null,w&=h.f!=null,w&=h.ea!=null,z==12&&(w&=xe>=G,w&=ge<=h.Tc,w&=h.F!=null)}else w=0;h=w?0:2}}return h!=0||N!=null&&N.fd&&(h=Wl(C)),h}var Xr=64,ps=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],gs=24,ms=32,Vl=8,Pn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];me("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(h){return h},O.Predictor2=function(h,w,N){return w[N+0]},O.Predictor3=function(h,w,N){return w[N+1]},O.Predictor4=function(h,w,N){return w[N-1]},O.Predictor5=function(h,w,N){return ve(ve(h,w[N+1]),w[N+0])},O.Predictor6=function(h,w,N){return ve(h,w[N-1])},O.Predictor7=function(h,w,N){return ve(h,w[N+0])},O.Predictor8=function(h,w,N){return ve(w[N-1],w[N+0])},O.Predictor9=function(h,w,N){return ve(w[N+0],w[N+1])},O.Predictor10=function(h,w,N){return ve(ve(h,w[N-1]),ve(w[N+0],w[N+1]))},O.Predictor11=function(h,w,N){var C=w[N+0];return 0>=Ue(C>>24&255,h>>24&255,(w=w[N-1])>>24&255)+Ue(C>>16&255,h>>16&255,w>>16&255)+Ue(C>>8&255,h>>8&255,w>>8&255)+Ue(255&C,255&h,255&w)?C:h},O.Predictor12=function(h,w,N){var C=w[N+0];return(Me((h>>24&255)+(C>>24&255)-((w=w[N-1])>>24&255))<<24|Me((h>>16&255)+(C>>16&255)-(w>>16&255))<<16|Me((h>>8&255)+(C>>8&255)-(w>>8&255))<<8|Me((255&h)+(255&C)-(255&w)))>>>0},O.Predictor13=function(h,w,N){var C=w[N-1];return(qe((h=ve(h,w[N+0]))>>24&255,C>>24&255)<<24|qe(h>>16&255,C>>16&255)<<16|qe(h>>8&255,C>>8&255)<<8|qe(h>>0&255,C>>0&255))>>>0};var Ih=O.PredictorAdd0;O.PredictorAdd1=Ze,me("Predictor2","PredictorAdd2"),me("Predictor3","PredictorAdd3"),me("Predictor4","PredictorAdd4"),me("Predictor5","PredictorAdd5"),me("Predictor6","PredictorAdd6"),me("Predictor7","PredictorAdd7"),me("Predictor8","PredictorAdd8"),me("Predictor9","PredictorAdd9"),me("Predictor10","PredictorAdd10"),me("Predictor11","PredictorAdd11"),me("Predictor12","PredictorAdd12"),me("Predictor13","PredictorAdd13");var Gl=O.PredictorAdd2;Qe("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),Qe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var jc,ri=O.ColorIndexInverseTransform,vs=O.MapARGB,Cc=O.VP8LColorIndexInverseTransformAlpha,Rc=O.MapAlpha,Oo=O.VP8LPredictorsAdd=[];Oo.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var ba,jn,vn,Lo,ro,no,ys,io,kr,Kl,yn,ni,ws,Ic,Yl,_a,xa,To,Sa,bs,ka,Po,Jl,ii,oi,Xt,Qt,Ar,Mr=o(511),oo=o(2041),Xl=o(225),_s=o(767),Dc=0,Dh=oo,Mc=Xl,zn=_s,ai=Mr,Fc=0,Bc=1,zg=2,qc=3,Uc=4,Mh=5,$g=6,Fh=7,Bh=8,zc=9,qh=10,O_=[2,3,7],L_=[3,3,11],Hg=[280,256,256,256,40],T_=[0,1,1,1,0],P_=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],j_=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],C_=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],R_=8,Uh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],zh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ql=null,I_=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],D_=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Wg=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],M_=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],F_=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],B_=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],q_=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],jo=[],_i=[],ao=[],U_=1,Vg=2,Co=[],si=[];Ee("UpsampleRgbLinePair",Ot,3),Ee("UpsampleBgrLinePair",fr,3),Ee("UpsampleRgbaLinePair",bi,4),Ee("UpsampleBgraLinePair",Hr,4),Ee("UpsampleArgbLinePair",sn,4),Ee("UpsampleRgba4444LinePair",Pr,2),Ee("UpsampleRgb565LinePair",mr,2);var z_=O.UpsampleRgbLinePair,$_=O.UpsampleBgrLinePair,Gg=O.UpsampleRgbaLinePair,Kg=O.UpsampleBgraLinePair,Yg=O.UpsampleArgbLinePair,Jg=O.UpsampleRgba4444LinePair,H_=O.UpsampleRgb565LinePair,$c=16,Hc=1<<$c-1,Zl=-227,$h=482,W_=6,Xg=0,V_=o(256),G_=o(256),K_=o(256),Y_=o(256),J_=o($h-Zl),X_=o($h-Zl);Ui("YuvToRgbRow",Ot,3),Ui("YuvToBgrRow",fr,3),Ui("YuvToRgbaRow",bi,4),Ui("YuvToBgraRow",Hr,4),Ui("YuvToArgbRow",sn,4),Ui("YuvToRgba4444Row",Pr,2),Ui("YuvToRgb565Row",mr,2);var Qg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Wc=[0,2,8],Q_=[8,7,6,4,4,2,2,2,1,1,1,1],Z_=1;this.WebPDecodeRGBA=function(h,w,N,C,z){var G=Bc,K=new cs,X=new zr;K.ba=X,X.S=G,X.width=[X.width],X.height=[X.height];var Z=X.width,ie=X.height,ce=new On;if(ce==null||h==null)var _e=2;else e(ce!=null),_e=ds(h,w,N,ce.width,ce.height,ce.Pd,ce.Qd,ce.format,null);if(_e!=0?Z=0:(Z!=null&&(Z[0]=ce.width[0]),ie!=null&&(ie[0]=ce.height[0]),Z=1),Z){X.width=X.width[0],X.height=X.height[0],C!=null&&(C[0]=X.width),z!=null&&(z[0]=X.height);e:{if(C=new ns,(z=new Fl).data=h,z.w=w,z.ha=N,z.kd=1,w=[0],e(z!=null),((h=ds(z.data,z.w,z.ha,null,null,null,w,null,z))==0||h==7)&&w[0]&&(h=4),(w=h)==0){if(e(K!=null),C.data=z.data,C.w=z.w+z.offset,C.ha=z.ha-z.offset,C.put=Jr,C.ac=Yt,C.bc=Ne,C.ma=K,z.xa){if((h=$r())==null){K=1;break e}if(function(xe,ge){var Ce=[0],Ae=[0],fe=[0];t:for(;;){if(xe==null)return 0;if(ge==null)return xe.a=2,0;if(xe.l=ge,xe.a=0,Q(xe.m,ge.data,ge.w,ge.ha),!Le(xe.m,Ce,Ae,fe)){xe.a=3;break t}if(xe.xb=Vg,ge.width=Ce[0],ge.height=Ae[0],!on(Ce[0],Ae[0],1,xe,null))break t;return 1}return e(xe.a!=0),0}(h,C)){if(C=(w=hs(C.width,C.height,K.Oa,K.ba))==0){t:{C=h;r:for(;;){if(C==null){C=0;break t}if(e(C.s.yc!=null),e(C.s.Ya!=null),e(0<C.s.Wb),e((N=C.l)!=null),e((z=N.ma)!=null),C.xb!=0){if(C.ca=z.ba,C.tb=z.tb,e(C.ca!=null),!Hl(z.Oa,N,qc)){C.a=2;break r}if(!Dr(C,N.width)||N.da)break r;if((N.da||At(C.ca.S))&&we(),11>C.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),C.ca.f.kb.F!=null&&we()),C.Pb&&0<C.s.ua&&C.s.vb.X==null&&!Fe(C.s.vb,C.s.Wa.Xa)){C.a=1;break r}C.xb=0}if(!rr(C,C.V,C.Ba,C.c,C.i,N.o,Ct))break r;z.Dc=C.Ma,C=1;break t}e(C.a!=0),C=0}C=!C}C&&(w=h.a)}else w=h.a}else{if((h=new mh)==null){K=1;break e}if(h.Fa=z.na,h.P=z.P,h.qc=z.Sa,mc(h,C)){if((w=hs(C.width,C.height,K.Oa,K.ba))==0){if(h.Aa=0,N=K.Oa,e((z=h)!=null),N!=null){if(0<(Z=0>(Z=N.Md)?0:100<Z?255:255*Z/100)){for(ie=ce=0;4>ie;++ie)12>(_e=z.pb[ie]).lc&&(_e.ia=Z*Q_[0>_e.lc?0:_e.lc]>>3),ce|=_e.ia;ce&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=N.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}vh(h,C)||(w=h.a)}}else w=h.a}w==0&&K.Oa!=null&&K.Oa.fd&&(w=Wl(K.ba))}K=w}G=K!=0?null:11>G?X.f.RGBA.eb:X.f.kb.y}else G=null;return G};var Zg=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(O,F){for(var R="",S=0;S<4;S++)R+=String.fromCharCode(O[F++]);return R}function p(O,F){return(O[F+0]<<0|O[F+1]<<8|O[F+2]<<16)>>>0}function d(O,F){return(O[F+0]<<0|O[F+1]<<8|O[F+2]<<16|O[F+3]<<24)>>>0}new l;var f=[0],u=[0],y=[],v=new l,b=t,g=function(O,F){var R={},S=0,E=!1,j=0,M=0;if(R.frames=[],!function(D,U,H,B){for(var Y=0;Y<B;Y++)if(D[U+Y]!=H.charCodeAt(Y))return!0;return!1}(O,F,"RIFF",4)){var V,ee;for(d(O,F+=4),F+=8;F<O.length;){var te=c(O,F),Q=d(O,F+=4);F+=4;var J=Q+(1&Q);switch(te){case"VP8 ":case"VP8L":R.frames[S]===void 0&&(R.frames[S]={}),(L=R.frames[S]).src_off=E?M:F-8,L.src_size=j+Q+8,S++,E&&(E=!1,j=0,M=0);break;case"VP8X":(L=R.header={}).feature_flags=O[F];var W=F+4;L.canvas_width=1+p(O,W),W+=3,L.canvas_height=1+p(O,W),W+=3;break;case"ALPH":E=!0,j=J+8,M=F-8;break;case"ANIM":(L=R.header).bgcolor=d(O,F),W=F+4,L.loop_count=(V=O)[(ee=W)+0]<<0|V[ee+1]<<8,W+=2;break;case"ANMF":var q,L;(L=R.frames[S]={}).offset_x=2*p(O,F),F+=3,L.offset_y=2*p(O,F),F+=3,L.width=1+p(O,F),F+=3,L.height=1+p(O,F),F+=3,L.duration=p(O,F),F+=3,q=O[F++],L.dispose=1&q,L.blend=q>>1&1}te!="ANMF"&&(F+=J)}return R}}(b,0);g.response=b,g.rgbaoutput=!0,g.dataurl=!1;var m=g.header?g.header:null,_=g.frames?g.frames:null;if(m){m.loop_counter=m.loop_count,f=[m.canvas_height],u=[m.canvas_width];for(var x=0;x<_.length&&_[x].blend!=0;x++);}var A=_[0],I=v.WebPDecodeRGBA(b,A.src_off,A.src_size,u,f);A.rgba=I,A.imgwidth=u[0],A.imgheight=f[0];for(var P=0;P<u[0]*f[0]*4;P++)y[P]=I[P];return this.width=u,this.height=f,this.data=y,this}(function(t){var e=function(){return typeof b1=="function"},r=function(f,u,y,v){var b=4,g=a;switch(v){case t.image_compression.FAST:b=1,g=o;break;case t.image_compression.MEDIUM:b=6,g=s;break;case t.image_compression.SLOW:b=9,g=l}f=n(f,u,y,g);var m=b1(f,{level:b});return t.__addimage__.arrayBufferToBinaryString(m)},n=function(f,u,y,v){for(var b,g,m,_=f.length/u,x=new Uint8Array(f.length+_),A=p(),I=0;I<_;I+=1){if(m=I*u,b=f.subarray(m,m+u),v)x.set(v(b,y,g),m+I);else{for(var P,O=A.length,F=[];P<O;P+=1)F[P]=A[P](b,y,g);var R=d(F.concat());x.set(F[R],m+I)}g=b}return x},i=function(f){var u=Array.apply([],f);return u.unshift(0),u},o=function(f,u){var y,v=[],b=f.length;v[0]=1;for(var g=0;g<b;g+=1)y=f[g-u]||0,v[g+1]=f[g]-y+256&255;return v},a=function(f,u,y){var v,b=[],g=f.length;b[0]=2;for(var m=0;m<g;m+=1)v=y&&y[m]||0,b[m+1]=f[m]-v+256&255;return b},s=function(f,u,y){var v,b,g=[],m=f.length;g[0]=3;for(var _=0;_<m;_+=1)v=f[_-u]||0,b=y&&y[_]||0,g[_+1]=f[_]+256-(v+b>>>1)&255;return g},l=function(f,u,y){var v,b,g,m,_=[],x=f.length;_[0]=4;for(var A=0;A<x;A+=1)v=f[A-u]||0,b=y&&y[A]||0,g=y&&y[A-u]||0,m=c(v,b,g),_[A+1]=f[A]-m+256&255;return _},c=function(f,u,y){if(f===u&&u===y)return f;var v=Math.abs(u-y),b=Math.abs(f-y),g=Math.abs(f+u-y-y);return v<=b&&v<=g?f:b<=g?u:y},p=function(){return[i,o,a,s,l]},d=function(f){var u=f.map(function(y){return y.reduce(function(v,b){return v+Math.abs(b)},0)});return u.indexOf(Math.min.apply(null,u))};t.processPNG=function(f,u,y,v){var b,g,m,_,x,A,I,P,O,F,R,S,E,j,M,V=this.decode.FLATE_DECODE,ee="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(m=new VP(f)).imgData,g=m.bits,b=m.colorSpace,x=m.colors,[4,6].indexOf(m.colorType)!==-1){if(m.bits===8){O=(P=m.pixelBitlength==32?new Uint32Array(m.decodePixels().buffer):m.pixelBitlength==16?new Uint16Array(m.decodePixels().buffer):new Uint8Array(m.decodePixels().buffer)).length,R=new Uint8Array(O*m.colors),F=new Uint8Array(O);var te,Q=m.pixelBitlength-m.bits;for(j=0,M=0;j<O;j++){for(E=P[j],te=0;te<Q;)R[M++]=E>>>te&255,te+=m.bits;F[j]=E>>>te&255}}if(m.bits===16){O=(P=new Uint32Array(m.decodePixels().buffer)).length,R=new Uint8Array(O*(32/m.pixelBitlength)*m.colors),F=new Uint8Array(O*(32/m.pixelBitlength)),S=m.colors>1,j=0,M=0;for(var J=0;j<O;)E=P[j++],R[M++]=E>>>0&255,S&&(R[M++]=E>>>16&255,E=P[j++],R[M++]=E>>>0&255),F[J++]=E>>>16&255;g=8}v!==t.image_compression.NONE&&e()?(f=r(R,m.width*m.colors,m.colors,v),I=r(F,m.width,1,v)):(f=R,I=F,V=void 0)}if(m.colorType===3&&(b=this.color_spaces.INDEXED,A=m.palette,m.transparency.indexed)){var W=m.transparency.indexed,q=0;for(j=0,O=W.length;j<O;++j)q+=W[j];if((q/=255)===O-1&&W.indexOf(0)!==-1)_=[W.indexOf(0)];else if(q!==O){for(P=m.decodePixels(),F=new Uint8Array(P.length),j=0,O=P.length;j<O;j++)F[j]=W[P[j]];I=r(F,m.width,1)}}var L=function(D){var U;switch(D){case t.image_compression.FAST:U=11;break;case t.image_compression.MEDIUM:U=13;break;case t.image_compression.SLOW:U=14;break;default:U=12}return U}(v);return V===this.decode.FLATE_DECODE&&(ee="/Predictor "+L+" "),ee+="/Colors "+x+" /BitsPerComponent "+g+" /Columns "+m.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:y,data:f,index:u,filter:V,decodeParameters:ee,transparency:_,palette:A,sMask:I,predictor:L,width:m.width,height:m.height,bitsPerComponent:g,colorSpace:b}}}})(ct.API),function(t){t.processGIF89A=function(e,r,n,i){var o=new GP(e),a=o.width,s=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:s},p=new Zp(100).encode(c,100);return t.processJPEG.call(this,p,r,n,i)},t.processGIF87A=t.processGIF89A}(ct.API),Ai.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ai.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Kt.log("bit decode error:"+r)}},Ai.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[o>>7-s&1];this.data[a+4*s]=l.blue,this.data[a+4*s+1]=l.green,this.data[a+4*s+2]=l.red,this.data[a+4*s+3]=255}r!==0&&(this.pos+=4-r)}},Ai.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var o=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*i*4,s=o>>4,l=15&o,c=this.palette[s];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Ai.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(i<this.palette.length){var a=this.palette[i];this.data[o]=a.red,this.data[o+1]=a.green,this.data[o+2]=a.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},Ai.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,s=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,c=o>>15?255:0,p=n*this.width*4+4*i;this.data[p]=l,this.data[p+1]=s,this.data[p+2]=a,this.data[p+3]=c}this.pos+=t}},Ai.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,l=(a>>5&r)/r*255|0,c=(a>>11)/e*255|0,p=i*this.width*4+4*o;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=s,this.data[p+3]=255}this.pos+=t}},Ai.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},Ai.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*r;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=a}},Ai.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,i){var o=new Ai(e,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},c=new Zp(100).encode(l,100);return t.processJPEG.call(this,c,r,n,i)}}(ct.API),oy.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,i){var o=new oy(e),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},c=new Zp(100).encode(l,100);return t.processJPEG.call(this,c,r,n,i)}}(ct.API),ct.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,o=new Uint8Array(i/4*3),a=new Uint8Array(i/4),s=0,l=0,c=0;c<i;c+=4){var p=n[c],d=n[c+1],f=n[c+2],u=n[c+3];o[s++]=p,o[s++]=d,o[s++]=f,a[l++]=u}var y=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:y,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ct.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Rs=ct.API,Df=Rs.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,p=c.fof?c.fof:1,d=e.doKerning!==!1,f=0,u=t.length,y=0,v=s[0]||l,b=[];for(r=0;r<u;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+a*(1e3/o)||0)/1e3):(f=d&&Ut(c[n])==="object"&&!isNaN(parseInt(c[n][y],10))?c[n][y]/p:0,b.push((s[n]||v)/l+f)),y=n;return b},ty=Rs.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Rs.processArabic&&(t=Rs.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:Df.apply(this,arguments).reduce(function(o,a){return o+a},0)},ry=function(t,e,r,n){for(var i=[],o=0,a=t.length,s=0;o!==a&&s+e[o]<r;)s+=e[o],o++;i.push(t.slice(0,o));var l=o;for(s=0;o!==a;)s+e[o]>n&&(i.push(t.slice(l,o)),s=0,l=o),s+=e[o],o++;return l!==o&&i.push(t.slice(l,o)),i},ny=function(t,e,r){r||(r={});var n,i,o,a,s,l,c,p=[],d=[p],f=r.textIndent||0,u=0,y=0,v=t.split(" "),b=Df.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var g=Array(l).join(" "),m=[];v.map(function(x){(x=x.split(/\s*\n/)).length>1?m=m.concat(x.map(function(A,I){return(I&&A.length?`
`:"")+A})):m.push(x[0])}),v=m,l=ty.apply(this,[g,r])}for(o=0,a=v.length;o<a;o++){var _=0;if(n=v[o],l&&n[0]==`
`&&(n=n.substr(1),_=1),f+u+(y=(i=Df.apply(this,[n,r])).reduce(function(x,A){return x+A},0))>e||_){if(y>e){for(s=ry.apply(this,[n,i,e-(f+u),e]),p.push(s.shift()),p=[s.pop()];s.length;)d.push([s.shift()]);y=i.slice(n.length-(p[0]?p[0].length:0)).reduce(function(x,A){return x+A},0)}else p=[n];d.push(p),f=y+l,u=b}else p.push(n),f+=u+y,u=b}return c=l?function(x,A){return(A?g:"")+x.join(" ")}:function(x){return x.join(" ")},d.map(c)},Rs.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var d=this.internal.getFont(p.fontName,p.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=r.lineIndent;var s,l,c=[];for(s=0,l=n.length;s<l;s++)c=c.concat(ny.apply(this,[n[s],a,o]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},i=0;i<e.length;i++)r[e[i]]="0123456789abcdef"[i],n["0123456789abcdef"[i]]=e[i];var o=function(d){return"0x"+parseInt(d,10).toString(16)},a=t.__fontmetrics__.compress=function(d){var f,u,y,v,b=["{"];for(var g in d){if(f=d[g],isNaN(parseInt(g,10))?u="'"+g+"'":(g=parseInt(g,10),u=(u=o(g).slice(2)).slice(0,-1)+n[u.slice(-1)]),typeof f=="number")f<0?(y=o(f).slice(3),v="-"):(y=o(f).slice(2),v=""),y=v+y.slice(0,-1)+n[y.slice(-1)];else{if(Ut(f)!=="object")throw new Error("Don't know what to do with value type "+Ut(f)+".");y=a(f)}b.push(u+y)}return b.push("}"),b.join("")},s=t.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,u,y,v,b={},g=1,m=b,_=[],x="",A="",I=d.length-1,P=1;P<I;P+=1)(v=d[P])=="'"?f?(y=f.join(""),f=void 0):f=[]:f?f.push(v):v=="{"?(_.push([m,y]),m={},y=void 0):v=="}"?((u=_.pop())[0][u[1]]=m,y=void 0,m=u[0]):v=="-"?g=-1:y===void 0?r.hasOwnProperty(v)?(x+=r[v],y=parseInt(x,16)*g,g=1,x=""):x+=v:r.hasOwnProperty(v)?(A+=r[v],m[y]=parseInt(A,16)*g,g=1,y=void 0,A=""):A+=v;return b},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},p={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(d){var f=d.font,u=p.Unicode[f.postScriptName];u&&(f.metadata.Unicode={},f.metadata.Unicode.widths=u.widths,f.metadata.Unicode.kerning=u.kerning);var y=c.Unicode[f.postScriptName];y&&(f.metadata.Unicode.encoding=y,f.encoding=y.codePages[0])}])}(ct.API),function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=r.charCodeAt(o);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,o=r.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e(Bu(s)),a.metadata=t.API.TTFFont.open(s),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,n)}}])}(ct),function(t){function e(){return(ft.canvg?Promise.resolve(ft.canvg):g1(()=>import("./index.es-CrS61r7R.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}ct.API.addSvgAsImage=function(r,n,i,o,a,s,l,c){if(isNaN(n)||isNaN(i))throw Kt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(a))throw Kt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=o,p.height=a;var d=p.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,p.width,p.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},u=this;return e().then(function(y){return y.fromString(d,r,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(f)}).then(function(){u.addImage(p.toDataURL("image/jpeg",1),n,i,o,a,l,c)})}}(),ct.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},ct.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(a),l=[],c=0,p=0,d=0;function f(y,v){var b,g=!1;for(b=0;b<y.length;b+=1)y[b]===v&&(g=!0);return g}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var u=s.length;for(d=0;d<u;d+=1)r[s[d]].value=r[s[d]].defaultValue,r[s[d]].explicitSet=!1}if(Ut(t)==="object"){for(i in t)if(o=t[i],f(s,i)&&o!==void 0){if(r[i].type==="boolean"&&typeof o=="boolean")r[i].value=o;else if(r[i].type==="name"&&f(r[i].valueSet,o))r[i].value=o;else if(r[i].type==="integer"&&Number.isInteger(o))r[i].value=o;else if(r[i].type==="array"){for(c=0;c<o.length;c+=1)if(n=!0,o[c].length===1&&typeof o[c][0]=="number")l.push(String(o[c]-1));else if(o[c].length>1){for(p=0;p<o[c].length;p+=1)typeof o[c][p]!="number"&&(n=!1);n===!0&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}r[i].value="["+l.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,v=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?v.push("/"+y+" /"+r[y].value):v.push("/"+y+" "+r[y].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=o.length+a.length+s.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+o+a+s+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(ct.API),function(t){var e=t.API,r=e.pdfEscape16=function(o,a){for(var s,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],p=[""],d=0,f=o.length;d<f;++d){if(s=a.metadata.characterToGlyph(o.charCodeAt(d)),a.metadata.glyIdsUsed.push(s),a.metadata.toUnicode[s]=o.charCodeAt(d),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(a.metadata.widthOfGlyph(s),10)])),s=="0")return p.join("");s=s.toString(16),p.push(c[4-s.length],s)}return p.join("")},n=function(o){var a,s,l,c,p,d,f;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,f=(s=Object.keys(o).sort(function(u,y){return u-y})).length;d<f;d++)a=s[d],l.length>=100&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[a]!==void 0&&o[a]!==null&&typeof o[a].toString=="function"&&(c=("0000"+o[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(a){var s=a.font,l=a.out,c=a.newObject,p=a.putStream;if(s.metadata instanceof t.API.TTFFont&&s.encoding==="Identity-H"){for(var d=s.metadata.Unicode.widths,f=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),u="",y=0;y<f.length;y++)u+=String.fromCharCode(f[y]);var v=c();p({data:u,addLength1:!0,objectId:v}),l("endobj");var b=c();p({data:n(s.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var g=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Fs(s.fontName)),l("/FontFile2 "+v+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var m=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Fs(s.fontName)),l("/FontDescriptor "+g+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+Fs(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+m+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(a){var s=a.font,l=a.out,c=a.newObject,p=a.putStream;if(s.metadata instanceof t.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var d=s.metadata.rawData,f="",u=0;u<d.length;u++)f+=String.fromCharCode(d[u]);var y=c();p({data:f,addLength1:!0,objectId:y}),l("endobj");var v=c();p({data:n(s.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var b=c();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+y+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+Fs(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=c();for(var g=0;g<s.metadata.hmtx.widths.length;g++)s.metadata.hmtx.widths[g]=parseInt(s.metadata.hmtx.widths[g]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+Fs(s.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(o)}]);var i=function(o){var a,s=o.text||"",l=o.x,c=o.y,p=o.options||{},d=o.mutex||{},f=d.pdfEscape,u=d.activeFontKey,y=d.fonts,v=u,b="",g=0,m="",_=y[v].encoding;if(y[v].encoding!=="Identity-H")return{text:s,x:l,y:c,options:p,mutex:d};for(m=s,v=u,Array.isArray(s)&&(m=s[0]),g=0;g<m.length;g+=1)y[v].metadata.hasOwnProperty("cmap")&&(a=y[v].metadata.cmap.unicode.codeMap[m[g].charCodeAt(0)]),a||m[g].charCodeAt(0)<256&&y[v].metadata.hasOwnProperty("Unicode")?b+=m[g]:b+="";var x="";return parseInt(v.slice(1))<14||_==="WinAnsiEncoding"?x=f(b,v).split("").map(function(A){return A.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(x=r(b,y[v])),d.isHex=!0,{text:x,x:l,y:c,options:p,mutex:d}};e.events.push(["postProcessText",function(o){var a=o.text||"",s=[],l={text:a,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?s.push([i(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):s.push(i(Object.assign({},l,{text:a[c]})).text);o.text=s}else o.text=i(Object.assign({},l,{text:a})).text}])}(ct),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ct.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,o,a,s,l,c,p,d=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,_=0;this.__bidiEngine__={};var x=function(S){var E=S.charCodeAt(),j=E>>8,M=v[j];return M!==void 0?d[256*M+(255&E)]:j===252||j===253?"AL":g.test(j)?"L":j===8?"R":"N"},A=function(S){for(var E,j=0;j<S.length;j++){if((E=x(S.charAt(j)))==="L")return!1;if(E==="R")return!0}return!1},I=function(S,E,j,M){var V,ee,te,Q,J=E[M];switch(J){case"L":case"R":m=!1;break;case"N":case"AN":break;case"EN":m&&(J="AN");break;case"AL":m=!0,J="R";break;case"WS":J="N";break;case"CS":M<1||M+1>=E.length||(V=j[M-1])!=="EN"&&V!=="AN"||(ee=E[M+1])!=="EN"&&ee!=="AN"?J="N":m&&(ee="AN"),J=ee===V?ee:"N";break;case"ES":J=(V=M>0?j[M-1]:"B")==="EN"&&M+1<E.length&&E[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&j[M-1]==="EN"){J="EN";break}if(m){J="N";break}for(te=M+1,Q=E.length;te<Q&&E[te]==="ET";)te++;J=te<Q&&E[te]==="EN"?"EN":"N";break;case"NSM":if(a&&!s){for(Q=E.length,te=M+1;te<Q&&E[te]==="NSM";)te++;if(te<Q){var W=S[M],q=W>=1425&&W<=2303||W===64286;if(V=E[te],q&&(V==="R"||V==="AL")){J="R";break}}}J=M<1||(V=E[M-1])==="B"?"N":j[M-1];break;case"B":m=!1,i=!0,J=_;break;case"S":o=!0,J="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"BN":J="N"}return J},P=function(S,E,j){var M=S.split("");return j&&O(M,j,{hiLevel:_}),M.reverse(),E&&E.reverse(),M.join("")},O=function(S,E,j){var M,V,ee,te,Q,J=-1,W=S.length,q=0,L=[],D=_?u:f,U=[];for(m=!1,i=!1,o=!1,V=0;V<W;V++)U[V]=x(S[V]);for(ee=0;ee<W;ee++){if(Q=q,L[ee]=I(S,U,L,ee),M=240&(q=D[Q][y[L[ee]]]),q&=15,E[ee]=te=D[q][5],M>0)if(M===16){for(V=J;V<ee;V++)E[V]=1;J=-1}else J=-1;if(D[q][6])J===-1&&(J=ee);else if(J>-1){for(V=J;V<ee;V++)E[V]=te;J=-1}U[ee]==="B"&&(E[ee]=0),j.hiLevel|=te}o&&function(H,B,Y){for(var re=0;re<Y;re++)if(H[re]==="S"){B[re]=_;for(var ne=re-1;ne>=0&&H[ne]==="WS";ne--)B[ne]=_}}(U,E,W)},F=function(S,E,j,M,V){if(!(V.hiLevel<S)){if(S===1&&_===1&&!i)return E.reverse(),void(j&&j.reverse());for(var ee,te,Q,J,W=E.length,q=0;q<W;){if(M[q]>=S){for(Q=q+1;Q<W&&M[Q]>=S;)Q++;for(J=q,te=Q-1;J<te;J++,te--)ee=E[J],E[J]=E[te],E[te]=ee,j&&(ee=j[J],j[J]=j[te],j[te]=ee);q=Q}q++}}},R=function(S,E,j){var M=S.split(""),V={hiLevel:_};return j||(j=[]),O(M,j,V),function(ee,te,Q){if(Q.hiLevel!==0&&p)for(var J,W=0;W<ee.length;W++)te[W]===1&&(J=b.indexOf(ee[W]))>=0&&(ee[W]=b[J+1])}(M,j,V),F(2,M,E,j,V),F(1,M,E,j,V),M.join("")};return this.__bidiEngine__.doBidiReorder=function(S,E,j){if(function(V,ee){if(ee)for(var te=0;te<V.length;te++)ee[te]=te;s===void 0&&(s=A(V)),c===void 0&&(c=A(V))}(S,E),a||!l||c)if(a&&l&&s^c)_=s?1:0,S=P(S,E,j);else if(!a&&l&&c)_=s?1:0,S=R(S,E,j),S=P(S,E);else if(!a||s||l||c){if(a&&!l&&s^c)S=P(S,E),s?(_=0,S=R(S,E,j)):(_=1,S=R(S,E,j),S=P(S,E));else if(a&&s&&!l&&c)_=1,S=R(S,E,j),S=P(S,E);else if(!a&&!l&&s^c){var M=p;s?(_=1,S=R(S,E,j),_=0,p=!1,S=R(S,E,j),p=M):(_=0,S=R(S,E,j),S=P(S,E),_=1,p=!1,S=R(S,E,j),p=M,S=P(S,E))}}else _=0,S=R(S,E,j);else _=s?1:0,S=R(S,E,j);return S},this.__bidiEngine__.setOptions=function(S){S&&(a=S.isInputVisual,l=S.isOutputVisual,s=S.isInputRtl,c=S.isOutputRtl,p=S.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text,o=(n.x,n.y,n.options||{}),a=(n.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(a=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?a.push([r.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):a.push([r.doBidiReorder(i[s])]);n.text=a}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(ct),ct.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new ca(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new lj(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new KP(this.contents),this.head=new JP(this),this.name=new tj(this),this.cmap=new x_(this),this.toUnicode={},this.hhea=new XP(this),this.maxp=new rj(this),this.hmtx=new nj(this),this.post=new ZP(this),this.os2=new QP(this),this.loca=new sj(this),this.glyf=new ij(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,s,l,c;for(c=[],a=0,s=(l=this.bbox).length;a<s;a++)e=l[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,o,a,s;for(a=0,o=0,s=(e=""+e).length;0<=s?o<s:o>s;o=0<=s?++o:--o)i=e.charCodeAt(o),a+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Mi,ca=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,o,a,s,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^o)+65536*(255^a)+256*(255^s)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*o+65536*a+256*s+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,o;for(o=[],n=0,i=e.length;n<i;n++)r=e[n],o.push(this.writeByte(r));return o},t}(),KP=function(){var t;function e(r){var n,i,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,o,a,s,l,c,p,d,f,u,y,v;for(v in u=Object.keys(r).length,l=Math.log(2),d=16*Math.floor(Math.log(u)/l),a=Math.floor(d/l),p=16*u-d,(i=new ca).writeInt(this.scalarType),i.writeShort(u),i.writeShort(d),i.writeShort(a),i.writeShort(p),o=16*u,c=i.pos+o,s=null,y=[],r)for(f=r[v],i.writeString(v),i.writeInt(t(f)),i.writeInt(c),i.writeInt(f.length),y=y.concat(f),v==="head"&&(s=c),c+=f.length;c%4;)y.push(0),c++;return i.write(y),n=2981146554-t(i.data),i.pos=s+8,i.writeUInt32(n),i.data},t=function(r){var n,i,o,a;for(r=S_.call(r);r.length%4;)r.push(0);for(o=new ca(r),i=0,n=0,a=r.length;n<a;n=n+=4)i+=o.readUInt32();return 4294967295&i},e}(),YP={}.hasOwnProperty,Qi=function(t,e){for(var r in e)YP.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Mi=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var JP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Mi),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new ca).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),ay=function(){function t(e,r){var n,i,o,a,s,l,c,p,d,f,u,y,v,b,g,m,_;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(u=e.readUInt16(),f=u/2,e.pos+=6,o=function(){var x,A;for(A=[],l=x=0;0<=f?x<f:x>f;l=0<=f?++x:--x)A.push(e.readUInt16());return A}(),e.pos+=2,v=function(){var x,A;for(A=[],l=x=0;0<=f?x<f:x>f;l=0<=f?++x:--x)A.push(e.readUInt16());return A}(),c=function(){var x,A;for(A=[],l=x=0;0<=f?x<f:x>f;l=0<=f?++x:--x)A.push(e.readUInt16());return A}(),p=function(){var x,A;for(A=[],l=x=0;0<=f?x<f:x>f;l=0<=f?++x:--x)A.push(e.readUInt16());return A}(),i=(this.length-e.pos+this.offset)/2,s=function(){var x,A;for(A=[],l=x=0;0<=i?x<i:x>i;l=0<=i?++x:--x)A.push(e.readUInt16());return A}(),l=g=0,_=o.length;g<_;l=++g)for(b=o[l],n=m=y=v[l];y<=b?m<=b:m>=b;n=y<=b?++m:--m)p[l]===0?a=n+c[l]:(a=s[p[l]/2+(n-y)-(f-l)]||0)!==0&&(a+=c[l]),this.codeMap[n]=65535&a}e.pos=d}return t.encode=function(e,r){var n,i,o,a,s,l,c,p,d,f,u,y,v,b,g,m,_,x,A,I,P,O,F,R,S,E,j,M,V,ee,te,Q,J,W,q,L,D,U,H,B,Y,re,ne,de,be,Te;switch(M=new ca,a=Object.keys(e).sort(function(Oe,Fe){return Oe-Fe}),r){case"macroman":for(v=0,b=function(){var Oe=[];for(y=0;y<256;++y)Oe.push(0);return Oe}(),m={0:0},o={},V=0,J=a.length;V<J;V++)m[ne=e[i=a[V]]]==null&&(m[ne]=++v),o[i]={old:e[i],new:m[e[i]]},b[i]=m[e[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(b),{charMap:o,subtable:M.data,maxGlyphID:v+1};case"unicode":for(E=[],d=[],_=0,m={},n={},g=c=null,ee=0,W=a.length;ee<W;ee++)m[A=e[i=a[ee]]]==null&&(m[A]=++_),n[i]={old:A,new:m[A]},s=m[A]-i,g!=null&&s===c||(g&&d.push(g),E.push(i),c=s),g=i;for(g&&d.push(g),d.push(65535),E.push(65535),R=2*(F=E.length),O=2*Math.pow(Math.log(F)/Math.LN2,2),f=Math.log(O/2)/Math.LN2,P=2*F-O,l=[],I=[],u=[],y=te=0,q=E.length;te<q;y=++te){if(S=E[y],p=d[y],S===65535){l.push(0),I.push(0);break}if(S-(j=n[S].new)>=32768)for(l.push(0),I.push(2*(u.length+F-y)),i=Q=S;S<=p?Q<=p:Q>=p;i=S<=p?++Q:--Q)u.push(n[i].new);else l.push(j-S),I.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*F+2*u.length),M.writeUInt16(0),M.writeUInt16(R),M.writeUInt16(O),M.writeUInt16(f),M.writeUInt16(P),Y=0,L=d.length;Y<L;Y++)i=d[Y],M.writeUInt16(i);for(M.writeUInt16(0),re=0,D=E.length;re<D;re++)i=E[re],M.writeUInt16(i);for(de=0,U=l.length;de<U;de++)s=l[de],M.writeUInt16(s);for(be=0,H=I.length;be<H;be++)x=I[be],M.writeUInt16(x);for(Te=0,B=u.length;Te<B;Te++)v=u[Te],M.writeUInt16(v);return{charMap:n,subtable:M.data,maxGlyphID:_+1}}},t}(),x_=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Mi),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,i,o;for(r.pos=this.offset,this.version=r.readUInt16(),o=r.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)n=new ay(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var i,o;return n==null&&(n="macroman"),i=ay.encode(r,n),(o=new ca).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},e}(),XP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Mi),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),QP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Mi),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,i;for(i=[],n=0;n<10;++n)i.push(r.readByte());return i}(),this.charRange=function(){var n,i;for(i=[],n=0;n<4;++n)i.push(r.readInt());return i}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(r.readInt());return i}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),ZP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Mi),e.prototype.tag="post",e.prototype.parse=function(r){var n,i,o;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var a;for(i=r.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],o=[];r.pos<this.offset+this.length;)n=r.readByte(),o.push(this.names.push(r.readString(n)));return o;case 151552:return i=r.readUInt16(),this.offsets=r.read(i);case 196608:break;case 262144:return this.map=(function(){var s,l,c;for(c=[],a=s=0,l=this.file.maxp.numGlyphs;0<=l?s<l:s>l;a=0<=l?++s:--s)c.push(r.readUInt32());return c}).call(this)}},e}(),ej=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},tj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Mi),e.prototype.tag="name",e.prototype.parse=function(r){var n,i,o,a,s,l,c,p,d,f,u;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),i=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)i.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(c={},a=d=0,f=i.length;d<f;a=++d)o=i[a],r.pos=o.offset,p=r.readString(o.length),s=new ej(p,o),c[u=o.nameID]==null&&(c[u]=[]),c[o.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),rj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Mi),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),nj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Mi),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,i,o,a,s,l,c;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,d;for(d=[],n=p=0;0<=o?p<o:p>o;n=0<=o?++p:--p)d.push(r.readInt16());return d}(),this.widths=(function(){var p,d,f,u;for(u=[],p=0,d=(f=this.metrics).length;p<d;p++)a=f[p],u.push(a.advance);return u}).call(this),i=this.widths[this.widths.length-1],c=[],n=s=0;0<=o?s<o:s>o;n=0<=o?++s:--s)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),S_=[].slice,ij=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Mi),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,i,o,a,s,l,c,p,d,f;return r in this.cache?this.cache[r]:(a=this.file.loca,n=this.file.contents,i=a.indexOf(r),(o=a.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+i,s=(l=new ca(n.read(o))).readShort(),p=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[r]=s===-1?new aj(l,p,f,c,d):new oj(l,s,p,f,c,d),this.cache[r]))},e.prototype.encode=function(r,n,i){var o,a,s,l,c;for(s=[],a=[],l=0,c=n.length;l<c;l++)o=r[n[l]],a.push(s.length),o&&(s=s.concat(o.encode(i)));return a.push(s.length),{table:s,offsets:a}},e}(),oj=function(){function t(e,r,n,i,o,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),aj=function(){function t(e,r,n,i,o){var a,s;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;s=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&s;)a.pos+=1&s?4:2,128&s?a.pos+=8:64&s?a.pos+=4:8&s&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new ca(S_.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),sj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Mi),e.prototype.tag="loca",e.prototype.parse=function(r){var n,i;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var o,a;for(a=[],i=0,o=this.length;i<o;i+=2)a.push(2*r.readUInt16());return a}).call(this):(function(){var o,a;for(a=[],i=0,o=this.length;i<o;i+=4)a.push(r.readUInt32());return a}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var i=new Uint32Array(this.offsets.length),o=0,a=0,s=0;s<i.length;++s)if(i[s]=o,a<n.length&&n[a]==s){++a,i[s]=o;var l=this.offsets[s],c=this.offsets[s+1]-l;c>0&&(o+=c)}for(var p=new Array(4*i.length),d=0;d<i.length;++d)p[4*d+3]=255&i[d],p[4*d+2]=(65280&i[d])>>8,p[4*d+1]=(16711680&i[d])>>16,p[4*d]=(4278190080&i[d])>>24;return p},e}(),lj=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,o;for(r in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)n=o[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,o,a,s,l;for(i={},a=0,s=e.length;a<s;a++)i[o=e[a]]=this.font.glyf.glyphFor(o);for(o in r=[],i)(n=i[o])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(o in l=this.glyphsFor(r))n=l[o],i[o]=n;return i},t.prototype.encode=function(e,r){var n,i,o,a,s,l,c,p,d,f,u,y,v,b,g;for(i in n=x_.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),u={0:0},g=n.charMap)u[(l=g[i]).old]=l.new;for(y in f=n.maxGlyphID,a)y in u||(u[y]=f++);return p=function(m){var _,x;for(_ in x={},m)x[m[_]]=_;return x}(u),d=Object.keys(p).sort(function(m,_){return m-_}),v=function(){var m,_,x;for(x=[],m=0,_=d.length;m<_;m++)s=d[m],x.push(p[s]);return x}(),o=this.font.glyf.encode(a,v,u),c=this.font.loca.encode(o.offsets,v),b={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},t}();ct.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,o,a;if(Array.isArray(r))return"["+function(){var s,l,c;for(c=[],s=0,l=r.length;s<l;s++)n=r[s],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in o=["<<"],r)a=r[i],o.push("/"+i+" "+e.convert(a));return o.push(">>"),o.join(`
`)}return""+r},e}();const k_=t=>{const e=new ct,r=e.internal.pageSize.getWidth(),n=20,i="#4F46E5",o="#334155",a="#0F172A";e.setFont("helvetica","bold"),e.setFontSize(22),e.setTextColor(i),e.text("Diary Recovery Kit",n,30),e.setFontSize(10),e.setTextColor("#64748B"),e.text(`Generated on: ${new Date().toLocaleDateString()}`,n,38),e.setDrawColor(239,68,68),e.setLineWidth(.5),e.rect(n,50,r-n*2,25),e.setFont("helvetica","bold"),e.setFontSize(12),e.setTextColor(220,38,38),e.text(" EXTREMELY SENSITIVE DOCUMENT",n+5,60),e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor(o),e.text("This document contains your Master Password and Encryption Keys.",n+5,68),e.text("Keep it safe. If you lose your password, this is the ONLY way to restore your data.",n+5,73);let s=95;e.setFont("helvetica","bold"),e.setFontSize(14),e.setTextColor(a),e.text("1. Login Credentials",n,s),s+=10,e.setFontSize(10),e.setTextColor("#64748B"),e.text("Email Address:",n,s),e.setFont("courier","bold"),e.setFontSize(12),e.setTextColor(a),e.text(t.email,n+40,s),s+=10,e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor("#64748B"),e.text("Master Password:",n,s),e.setFillColor(241,245,249),e.rect(n,s+5,r-n*2,15,"F"),e.setFont("courier","bold"),e.setFontSize(14),e.setTextColor(a),e.text(t.password,n+5,s+14),s+=40,e.setFont("helvetica","bold"),e.setFontSize(14),e.setTextColor(a),e.text("2. Emergency Technical Keys",n,s),s+=8,e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor(o),e.text("If the password mechanism ever changes or fails, these raw keys can mathematically",n,s),e.text("decrypt your data using standard AES-GCM algorithms.",n,s+5),s+=15,e.setFontSize(10),e.setTextColor("#64748B"),e.text("Encryption Salt:",n,s),e.setFont("courier","normal"),e.setFontSize(9),e.setTextColor(a),e.text(t.salt,n,s+6),s+=20,e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor("#64748B"),e.text("Raw Encryption Key (AES-GCM):",n,s),e.setFont("courier","normal"),e.setFontSize(9),e.setTextColor(a),e.text(t.rawKey,n,s+6),e.setFont("helvetica","italic"),e.setFontSize(8),e.setTextColor("#94A3B8"),e.text("Diary App - Zero Knowledge Architecture",r/2,280,{align:"center"}),e.save("Diary-Recovery-Kit.pdf")},uj=({onSuccess:t,session:e})=>{const[r,n]=ke.useState(""),[i,o]=ke.useState(!1),[a,s]=ke.useState(!1),[l,c]=ke.useState(null),[p,d]=ke.useState(!1),[f,u]=ke.useState(!1),[y,v]=ke.useState(null),[b,g]=ke.useState(!1),m=async A=>{var I,P,O;if(A.preventDefault(),r.length<6){c("Password must be at least 6 characters long.");return}s(!0),c(null);try{const F=e.user;if(!F)throw new Error("User not available.");const R=m6(),S=await Eb(r,R),{iv:E,data:j}=await Cg(S,Ab),M=(I=F.user_metadata)==null?void 0:I.full_name,V=((P=F.user_metadata)==null?void 0:P.avatar_url)||((O=F.user_metadata)==null?void 0:O.picture),{error:ee}=await er.from("profiles").insert({id:F.id,salt:R,key_check_value:j,key_check_iv:E,full_name:M,avatar_url:V});if(ee)throw ee;const te=await Ig(S);v({key:S,rawKey:te,salt:R,password:r,email:F.email||"Unknown Email"})}catch(F){c(F.error_description||F.message||"An unknown error occurred during setup."),console.error("Encryption initialization failed:",F)}finally{s(!1)}},_=()=>{y&&(k_({email:y.email,password:y.password,salt:y.salt,rawKey:y.rawKey}),g(!0))},x=()=>{y&&t(y.key)};return y?T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900",children:T.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md border-t-4 border-green-500 animate-fade-in",children:[T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900 mb-4",children:T.jsx("svg",{className:"h-6 w-6 text-green-600 dark:text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),T.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Setup Complete!"}),T.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Your secure diary is ready."})]}),T.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-md p-4",children:[T.jsxs("h3",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-200 flex items-center gap-2",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Important: Backup Required"]}),T.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-2",children:["Because we can't reset your password, you ",T.jsx("strong",{children:"must"})," download your Recovery Kit. It contains your password and raw encryption keys."]})]}),T.jsxs("button",{onClick:_,className:"w-full flex items-center justify-center gap-2 px-4 py-3 font-semibold text-white bg-slate-800 hover:bg-slate-700 dark:bg-slate-700 dark:hover:bg-slate-600 rounded-md transition-all shadow-lg",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Recovery Kit"]}),T.jsx("button",{onClick:x,disabled:!b,className:"w-full px-4 py-2 font-semibold text-indigo-600 bg-indigo-50 rounded-md hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-400 transition-colors dark:bg-transparent dark:text-indigo-400 dark:hover:text-indigo-300 dark:disabled:text-slate-600",children:b?"Continue to App":"Download Kit to Continue"})]})}):T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900",children:T.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[T.jsxs("div",{className:"text-center",children:[T.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Final Security Step"}),T.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"To complete your secure setup, please create your password."})]}),T.jsx("p",{className:"text-xs text-center text-slate-600 dark:text-slate-300 bg-slate-50 dark:bg-slate-900/50 p-3 rounded-md border dark:border-slate-700",children:"This is required to create your unique encryption key. Your password is never stored, and this one-time step ensures your diary remains private and end-to-end encrypted."}),l&&T.jsx("p",{className:"text-center text-red-500 bg-red-50 p-3 rounded-md",children:l}),T.jsxs("form",{className:"space-y-6",onSubmit:m,children:[T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:i?"text":"password",placeholder:"Your password",value:r,required:!0,minLength:6,onChange:A=>n(A.target.value),className:"w-full px-4 py-2 pr-10 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200"}),T.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute inset-y-0 right-0 flex items-center px-3 text-slate-500 dark:text-slate-400","aria-label":i?"Hide password":"Show password",children:i?T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[T.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),T.jsx("path",{fillRule:"evenodd",d:"M.458 10C3.732 4.943 9.522 3 10 3s6.268 1.943 9.542 7c-3.274 5.057-9.042 7-9.542 7S3.732 15.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[T.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.27 8.138 15.522 6 10 6c-1.55 0-2.998.48-4.257 1.254l-1.74-1.741zM10 12a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"}),T.jsx("path",{d:"M2.042 10c.832 2.345 3.16 4 5.918 4 1.55 0 2.998-.48 4.257-1.254l-1.473-1.473A3.999 3.999 0 0110 14c-2.209 0-4-1.791-4-4a3.999 3.999 0 011.21-2.828L5.293 5.293A10.014 10.014 0 00.458 10c1.274 1.862 4.022 4 9.542 4 1.105 0 2.158-.149 3.168-.43L10.373 12.16A4.003 4.003 0 0110 12z"})]})})]}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("label",{className:"flex items-start gap-3 cursor-pointer text-sm text-slate-600 dark:text-slate-400",children:[T.jsx("input",{type:"checkbox",checked:p,onChange:A=>d(A.target.checked),className:"mt-1 h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-slate-300 dark:border-slate-600 dark:bg-slate-900 dark:checked:bg-indigo-500",required:!0}),T.jsxs("span",{children:["I have read and agree to the ",T.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-indigo-600 hover:underline dark:text-indigo-400",children:"Privacy Policy"}),"."]})]}),T.jsxs("label",{className:"flex items-start gap-3 cursor-pointer text-sm text-slate-600 dark:text-slate-400",children:[T.jsx("input",{type:"checkbox",checked:f,onChange:A=>u(A.target.checked),className:"mt-1 h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-slate-300 dark:border-slate-600 dark:bg-slate-900 dark:checked:bg-indigo-500",required:!0}),T.jsxs("span",{children:["I have read and agree to the ",T.jsx("a",{href:"/terms.html",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-indigo-600 hover:underline dark:text-indigo-400",children:"Terms of Use"}),"."]})]})]}),T.jsx("button",{type:"submit",disabled:a||!p||!f,className:"w-full px-4 py-2 font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 disabled:bg-indigo-300 disabled:cursor-not-allowed transition-colors",children:a?"Securing...":"Initialize Diary"})]})]})})},A_=typeof PublicKeyCredential<"u"&&typeof PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable=="function",N_=async()=>{if(!A_)return!1;try{return await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()}catch{return!1}},cj=t=>Uint8Array.from(t,e=>e.charCodeAt(0)),fj=async(t,e)=>{var g,m;if(!A_)throw new Error("WebAuthn not supported");const r=window.crypto.getRandomValues(new Uint8Array(32)),n=Ja(r.buffer),i=window.crypto.getRandomValues(new Uint8Array(32)),o=cj(e),a={publicKey:{challenge:i,rp:{name:"Diary App",id:window.location.hostname},user:{id:o,name:"diary-user",displayName:"Diary Owner"},pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required",requireResidentKey:!1},timeout:6e4,extensions:{prf:{}}}},s=await navigator.credentials.create(a);if(!s)throw new Error("Failed to create credential");const l=Ja(s.rawId),c={publicKey:{challenge:window.crypto.getRandomValues(new Uint8Array(32)),rpId:window.location.hostname,allowCredentials:[{type:"public-key",id:s.rawId}],userVerification:"required",extensions:{prf:{eval:{first:r}}}}},p=await navigator.credentials.get(c),d=p==null?void 0:p.getClientExtensionResults();let f=null;if((m=(g=d==null?void 0:d.prf)==null?void 0:g.results)!=null&&m.first&&(f=new Uint8Array(d.prf.results.first)),!f)throw new Error("Authenticator does not support PRF extension. Please try again.");const u=await window.crypto.subtle.importKey("raw",f,"AES-GCM",!1,["encrypt","decrypt"]),y=await Ig(t),{iv:v,data:b}=await Cg(u,y);return{credentialId:l,salt:n,encryptedKey:b,iv:v}},dj=async t=>{var c;const e=Xa(t.salt),r=Xa(t.credentialId),n={publicKey:{challenge:window.crypto.getRandomValues(new Uint8Array(32)),rpId:window.location.hostname,allowCredentials:[{type:"public-key",id:r}],userVerification:"required",extensions:{prf:{eval:{first:e}}}}},i=await navigator.credentials.get(n);if(!i)throw new Error("Authentication failed");const o=(c=i==null?void 0:i.getClientExtensionResults())==null?void 0:c.prf;if(!o||!o.results||!o.results.first)throw new Error("Could not retrieve PRF key from authenticator.");const a=new Uint8Array(o.results.first),s=await window.crypto.subtle.importKey("raw",a,"AES-GCM",!1,["encrypt","decrypt"]),l=await Rg(s,t.encryptedKey,t.iv);return b6(l)},hj=({onSuccess:t,session:e})=>{const[r,n]=ke.useState(""),[i,o]=ke.useState(!1),[a,s]=ke.useState(!1),[l,c]=ke.useState(null),{deriveAndVerifyKey:p}=ih(),[d,f]=ke.useState(!1),[u,y]=ke.useState(!1);ke.useEffect(()=>{(async()=>{const m=await N_();y(m),localStorage.getItem(`diary_bio_${e.user.id}`)&&f(!0)})()},[e.user.id]);const v=async g=>{g.preventDefault(),s(!0),c(null);try{const m=e.user;if(!m)throw new Error("User not available.");const _=await p(r,m.id);_?t(_):c("Incorrect password. Please try again.")}catch(m){c(m.error_description||m.message||"An unknown error occurred."),console.error("Key derivation failed:",m)}finally{s(!1)}},b=async()=>{s(!0),c(null);try{const g=localStorage.getItem(`diary_bio_${e.user.id}`);if(!g)throw new Error("No biometric data found.");const m=JSON.parse(g),_=await dj(m);t(_)}catch(g){console.error("Biometric unlock failed:",g),c("Biometric unlock failed. Please use your password.")}finally{s(!1)}};return T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900",children:T.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[T.jsxs("div",{className:"text-center",children:[T.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Unlock Your Diary"}),T.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"For your security, please enter your password to continue."})]}),T.jsx("p",{className:"text-xs text-center text-slate-600 dark:text-slate-300 bg-slate-50 dark:bg-slate-900/50 p-3 rounded-md border dark:border-slate-700",children:"Your diary is end-to-end encrypted. We need your password to securely decrypt your entries."}),l&&T.jsx("p",{className:"text-center text-red-500 bg-red-50 p-3 rounded-md",children:l}),T.jsxs("form",{className:"space-y-6",onSubmit:v,children:[T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:i?"text":"password",placeholder:"Your password",value:r,required:!0,onChange:g=>n(g.target.value),className:"w-full px-4 py-2 pr-10 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200","aria-label":"Password for decryption"}),T.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute inset-y-0 right-0 flex items-center px-3 text-slate-500 dark:text-slate-400","aria-label":i?"Hide password":"Show password",children:i?T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[T.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),T.jsx("path",{fillRule:"evenodd",d:"M.458 10C3.732 4.943 9.522 3 10 3s6.268 1.943 9.542 7c-3.274 5.057-9.042 7-9.542 7S3.732 15.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[T.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.27 8.138 15.522 6 10 6c-1.55 0-2.998.48-4.257 1.254l-1.74-1.741zM10 12a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"}),T.jsx("path",{d:"M2.042 10c.832 2.345 3.16 4 5.918 4 1.55 0 2.998-.48 4.257-1.254l-1.473-1.473A3.999 3.999 0 0110 14c-2.209 0-4-1.791-4-4a3.999 3.999 0 011.21-2.828L5.293 5.293A10.014 10.014 0 00.458 10c1.274 1.862 4.022 4 9.542 4 1.105 0 2.158-.149 3.168-.43L10.373 12.16A4.003 4.003 0 0110 12z"})]})})]}),T.jsx("button",{type:"submit",disabled:a,className:"w-full px-4 py-2 font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 disabled:bg-indigo-300",children:a?"Unlocking...":"Unlock with Password"})]}),u&&d&&T.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700 text-center",children:T.jsxs("button",{type:"button",onClick:b,disabled:a,className:"flex flex-col items-center justify-center gap-2 w-full p-4 rounded-lg border-2 border-dashed border-indigo-300 hover:border-indigo-500 hover:bg-indigo-50 dark:border-slate-600 dark:hover:border-indigo-400 dark:hover:bg-indigo-900/20 transition-all group",children:[T.jsx("div",{className:"h-12 w-12 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 group-hover:scale-110 transition-transform",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})})}),T.jsx("span",{className:"font-semibold text-indigo-600 dark:text-indigo-300",children:"Unlock with Biometrics"})]})})]})})},pj=({session:t,profile:e,onUpdateProfile:r,onAvatarUpload:n,onExportData:i,onSignOut:o,theme:a,onToggleTheme:s})=>{const[l,c]=ke.useState(""),[p,d]=ke.useState(!1),[f,u]=ke.useState(!1),[y,v]=ke.useState(!1),[b,g]=ke.useState(!1),[m,_]=ke.useState(""),[x,A]=ke.useState(!1),[I,P]=ke.useState(""),[O,F]=ke.useState(null),[R,S]=ke.useState(!1),[E,j]=ke.useState(!1),[M,V]=ke.useState(!1),[ee,te]=ke.useState(!1),{deriveAndVerifyKey:Q,key:J}=ih(),{addToast:W}=nh();ke.useEffect(()=>{c((e==null?void 0:e.full_name)||"")},[e==null?void 0:e.full_name]),ke.useEffect(()=>{(async()=>{const Y=await N_();j(Y);const re=localStorage.getItem(`diary_bio_${t.user.id}`);V(!!re)})()},[t.user.id]);const q=async B=>{B.preventDefault(),l.trim()!==(e==null?void 0:e.full_name)&&(v(!0),await r({full_name:l.trim()}),v(!1)),d(!1)},L=async B=>{B.target.files&&B.target.files.length>0&&(u(!0),await n(B.target.files[0]),u(!1))},D=async()=>{g(!0),_("Preparing...");try{await i(B=>_(B))}catch(B){console.error("Export failed",B)}finally{g(!1),_("")}},U=async B=>{B.preventDefault(),F(null),S(!0);try{const Y=await Q(I,t.user.id);if(!Y){F("Incorrect password."),S(!1);return}if(!e){F("Profile data unavailable."),S(!1);return}const re=await Ig(Y);k_({email:t.user.email||"Unknown",password:I,salt:e.salt,rawKey:re}),P(""),A(!1)}catch(Y){console.error("Error generating kit:",Y),F("An error occurred. Please try again.")}finally{S(!1)}},H=async()=>{if(!J){W("Encryption key not available. Please re-login.","error");return}if(te(!0),M)localStorage.removeItem(`diary_bio_${t.user.id}`),V(!1),W("Biometric unlock disabled.","info");else try{const B=await fj(J,t.user.id);localStorage.setItem(`diary_bio_${t.user.id}`,JSON.stringify(B)),V(!0),W("Biometric unlock enabled successfully!","success")}catch(B){console.error("Bio enable failed",B),W(B.message||"Failed to enable biometrics.","error")}te(!1)};return T.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 animate-fade-in pb-24",children:[T.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-8",children:"Profile & Settings"}),T.jsx("div",{className:"bg-white/50 dark:bg-slate-800/50 p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:T.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[T.jsxs("div",{className:"relative flex-shrink-0",children:[T.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden flex items-center justify-center",children:e!=null&&e.avatar_url?T.jsx("img",{src:e.avatar_url,alt:"User avatar",className:"w-full h-full object-cover"}):T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),T.jsx("input",{type:"file",id:"avatar-upload",className:"hidden",onChange:L,accept:"image/*",disabled:f}),T.jsx("label",{htmlFor:"avatar-upload",className:"absolute -bottom-1 -right-1 bg-white dark:bg-slate-600 rounded-full p-1.5 cursor-pointer shadow-md hover:bg-slate-100 dark:hover:bg-slate-500 transition-colors",children:f?T.jsxs("svg",{className:"animate-spin h-5 w-5 text-slate-600 dark:text-slate-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-600 dark:text-slate-200",viewBox:"0 0 20 20",fill:"currentColor",children:[T.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),T.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]})})]}),T.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[p?T.jsxs("form",{onSubmit:q,className:"flex items-center gap-2",children:[T.jsx("input",{type:"text",value:l,onChange:B=>c(B.target.value),className:"w-full px-3 py-2 text-xl font-bold border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 disabled:opacity-75",autoFocus:!0,disabled:y}),T.jsx("button",{type:"submit",className:"px-3 py-2 text-sm font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 disabled:bg-indigo-400",disabled:y,children:y?"Saving...":"Save"})]}):T.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:(e==null?void 0:e.full_name)||"Your Name"}),T.jsx("button",{onClick:()=>d(!0),className:"p-1.5 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 flex-shrink-0 text-slate-500",children:T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[T.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),T.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]})})]}),T.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:t.user.email})]})]})}),T.jsxs("div",{className:"mt-8 space-y-4",children:[T.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Dark Mode"}),T.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Toggle between light and dark themes."})]}),T.jsx("button",{onClick:s,className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${a==="dark"?"bg-indigo-500":"bg-slate-300"}`,children:T.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${a==="dark"?"translate-x-6":"translate-x-1"}`})})]}),E&&T.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Biometric Unlock"}),T.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Use FaceID or TouchID to unlock your diary."})]}),T.jsx("button",{onClick:H,disabled:ee,className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${M?"bg-green-500":"bg-slate-300"}`,children:T.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${M?"translate-x-6":"translate-x-1"}`})})]}),T.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Export Data (ZIP)"}),T.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Download entries as monthly JSON files."})]}),T.jsx("button",{onClick:D,disabled:b,className:"px-4 py-2 text-sm font-semibold bg-slate-100 text-slate-700 rounded-md hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 min-w-[100px] justify-center",children:b?T.jsxs(T.Fragment,{children:[T.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),T.jsx("span",{children:m})]}):"Export"})]}),T.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Recovery Kit"}),T.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Download a backup of your encryption keys."})]}),T.jsxs("button",{onClick:()=>A(!0),className:"px-4 py-2 text-sm font-semibold bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-200 dark:hover:bg-yellow-900/50 flex items-center gap-2",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Backup Keys"]})]})]}),T.jsx("div",{className:"mt-12",children:T.jsx("button",{onClick:o,className:"w-full sm:w-auto px-6 py-2 font-semibold text-red-600 bg-red-100 rounded-md hover:bg-red-200 dark:bg-red-900/50 dark:text-red-300 dark:hover:bg-red-900/80 transition-colors",children:"Sign Out"})}),x&&T.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:T.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 animate-fade-in-down",children:[T.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 mb-2",children:"Verify Identity"}),T.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Please enter your master password to authenticate and generate your Recovery Kit. This will contain your raw encryption keys."}),T.jsxs("form",{onSubmit:U,children:[T.jsx("input",{type:"password",placeholder:"Your Password",value:I,onChange:B=>P(B.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 mb-2",autoFocus:!0}),O&&T.jsx("p",{className:"text-red-500 text-sm mb-4",children:O}),T.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[T.jsx("button",{type:"button",onClick:()=>{A(!1),P(""),F(null)},className:"px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100 rounded-md dark:text-slate-300 dark:hover:bg-slate-700",children:"Cancel"}),T.jsx("button",{type:"submit",disabled:R||!I,className:"px-4 py-2 text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 rounded-md disabled:bg-indigo-400",children:R?"Generating...":"Download Kit"})]})]})]})})]})},gj=({onClick:t})=>T.jsx("button",{onClick:t,className:"fixed top-3 left-4 z-40 p-2 rounded-md bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm hover:bg-slate-200/50 dark:hover:bg-slate-700/50","aria-label":"Open navigation menu",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),mj=({isOpen:t,onClose:e,onConfirm:r,title:n,message:i,isProcessing:o})=>{if(!t)return null;vy.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const a=()=>{r()},s=document.getElementById("portal-root");return s?Sg.createPortal(T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center animate-fade-in","aria-modal":"true",role:"dialog",onClick:e,children:T.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl p-6 w-full max-w-sm m-4",role:"document",onClick:l=>l.stopPropagation(),children:[T.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:n}),T.jsx("p",{className:"mt-2 text-slate-600 dark:text-slate-300",children:i}),T.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[T.jsx("button",{onClick:e,disabled:o,className:"px-4 py-2 text-sm font-semibold bg-slate-100 text-slate-700 rounded-md hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Cancel deletion",children:"Cancel"}),T.jsx("button",{onClick:a,disabled:o,className:"px-4 py-2 text-sm font-semibold text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors disabled:bg-red-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[140px]","aria-label":"Confirm deletion",children:o?T.jsxs(T.Fragment,{children:[T.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),T.jsx("span",{children:"Deleting..."})]}):"Confirm Delete"})]})]})}),s):null},vj=({isOpen:t,existingTags:e,suggestedTags:r,onConfirm:n,onCancel:i})=>{const[o,a]=ke.useState([]);if(ke.useEffect(()=>{if(t){const c=Array.from(new Set([...e,...r]));a(c)}},[t,e,r]),!t)return null;const s=c=>{a(p=>p.filter(d=>d!==c))},l=document.getElementById("portal-root");return l?Sg.createPortal(T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",role:"dialog","aria-modal":"true",children:T.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md border border-slate-200 dark:border-slate-700 overflow-hidden",children:[T.jsxs("div",{className:"p-6",children:[T.jsx("div",{className:"flex items-start justify-between mb-4",children:T.jsxs("div",{children:[T.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})}),"Smart Tags"]}),T.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"We found some keywords in your entry. Review them before saving."})]})}),T.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-lg p-4 min-h-[100px] border border-slate-100 dark:border-slate-700",children:o.length>0?T.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(c=>{const p=!e.includes(c);return T.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium transition-colors group ${p?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/60 dark:text-indigo-200 border border-indigo-200 dark:border-indigo-800":"bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 border border-transparent"}`,children:[c,T.jsx("button",{onClick:()=>s(c),className:"hover:text-red-500 dark:hover:text-red-400 focus:outline-none opacity-60 group-hover:opacity-100 transition-opacity","aria-label":`Remove tag ${c}`,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},c)})}):T.jsx("p",{className:"text-sm text-slate-400 italic text-center mt-4",children:"No tags selected."})}),T.jsxs("p",{className:"text-xs text-slate-400 mt-3",children:[T.jsx("span",{className:"font-semibold text-amber-500",children:"Note:"})," Tags are stored unencrypted to help with searching. Remove any sensitive words."]})]}),T.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/80 px-6 py-4 flex justify-end gap-3 border-t border-slate-100 dark:border-slate-700",children:[T.jsx("button",{onClick:i,className:"px-4 py-2 text-sm font-semibold text-slate-600 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 transition-colors",children:"Save without suggestions"}),T.jsx("button",{onClick:()=>n(o),className:"px-6 py-2 text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg shadow-sm shadow-indigo-200 dark:shadow-none transition-all transform active:scale-95",children:"Confirm & Save"})]})]})}),l):null},e0=()=>new Promise(t=>setTimeout(t,0)),yj=({session:t,theme:e,onToggleTheme:r})=>{const[n,i]=ke.useState([]),[o,a]=ke.useState(!0),[s,l]=ke.useState("timeline"),[c,p]=ke.useState(null),[d,f]=ke.useState(null),[u,y]=ke.useState(null),{key:v,setKey:b,encrypt:g,decrypt:m,encryptBinary:_}=ih(),[x,A]=ke.useState("checking"),[I,P]=ke.useState(null),[O,F]=ke.useState(()=>window.innerWidth>=768),[R,S]=ke.useState(!0),[E,j]=ke.useState("synced"),[M,V]=ke.useState(null),[ee,te]=ke.useState(0),[Q,J]=ke.useState(0),W=ke.useRef(null),[q,L]=ke.useState("serif"),[D,U]=ke.useState(null),[H,B]=ke.useState(null),[Y,re]=ke.useState(!1),[ne,de]=ke.useState(!1),[be,Te]=ke.useState(null),[Oe,Fe]=ke.useState(!1),[ye,ae]=ke.useState(null),[Ke,he]=ke.useState([]),se=ke.useRef(new Set),{addToast:me}=nh();ke.useEffect(()=>{navigator.geolocation.getCurrentPosition(async Ne=>{try{const Le=await S6(Ne.coords.latitude,Ne.coords.longitude);V(Le)}catch(Le){console.error("Failed to fetch weather:",Le)}},Ne=>{console.warn("Geolocation permission denied. Weather feature disabled.",Ne.message)},{enableHighAccuracy:!1,timeout:1e4,maximumAge:1e3*60*60})},[]),ke.useEffect(()=>{(async()=>{if(v){A("ready");return}try{const{data:Le}=await er.from("profiles").select("id").eq("id",t.user.id).maybeSingle();A(Le?"reauth":"needed")}catch(Le){console.error("Error checking profile:",Le),me("Error accessing profile. Please log out and in again.","error"),await er.auth.signOut()}})()},[v,t.user.id,me]);const Se=Ne=>{b(Ne),A("ready")},ve=ke.useCallback(async()=>{try{const{data:Ne,error:Le}=await er.from("profiles").select("*").eq("id",t.user.id).single();if(Le)throw Le;P(Ne)}catch(Ne){console.error("Error fetching profile:",Ne)}},[t.user.id]),Me=ke.useCallback(async()=>{if(v){a(!0);try{const{data:Ne,error:Le}=await er.from("diaries").select("id, created_at, mood, tags, owner_id, journal").order("created_at",{ascending:!1});if(Le)throw Le;const tt=(Ne||[]).map(rt=>({id:rt.id,created_at:rt.created_at,mood:rt.mood,tags:rt.tags,owner_id:rt.owner_id,journal:rt.journal||"Personal",title:"",content:"",isDecrypted:!1,isLoading:!1}));i(tt)}catch(Ne){console.error("Error fetching entries:",Ne),me("Could not fetch entries.","error")}finally{a(!1)}}},[v,me]),qe=ke.useCallback(async Ne=>{if(se.current.has(Ne)||!v)return;const Le=n.findIndex(tt=>tt.id===Ne);if(Le!==-1&&!n[Le].isDecrypted){se.current.add(Ne),i(tt=>tt.map(rt=>rt.id===Ne?{...rt,isLoading:!0}:rt));try{const{data:tt,error:rt}=await er.from("diaries").select("encrypted_entry, iv").eq("id",Ne).single();if(rt)throw rt;const yt=await m(v,tt.encrypted_entry,tt.iv),{title:ht,content:bt,audio:Jt}=JSON.parse(yt);i(Ct=>Ct.map(It=>It.id===Ne?{...It,title:ht,content:bt,audio:Jt,isDecrypted:!0,isLoading:!1}:It))}catch(tt){console.error(`Error decrypting entry ${Ne}:`,tt),i(rt=>rt.map(yt=>yt.id===Ne?{...yt,isLoading:!1}:yt))}finally{se.current.delete(Ne)}}},[n,v,m]);ke.useEffect(()=>{x==="ready"&&(Me(),ve())},[Me,ve,x]),ke.useEffect(()=>{u&&!u.isDecrypted&&!u.isLoading&&qe(u.id)},[u,qe]),ke.useEffect(()=>{if(u){const Ne=n.find(Le=>Le.id===u.id);Ne&&(Ne.isDecrypted!==u.isDecrypted||Ne.isLoading!==u.isLoading)&&y(Ne)}},[n,u]),ke.useEffect(()=>{if(!W.current||!d)return;const Ne=W.current.getEditor();if(!Ne)return;const Le=tt=>{if(tt&&tt.length===0){const[rt]=Ne.getLeaf(tt.index);if(rt&&rt.statics.blotName==="image"){const yt=Ne.getFormat(tt.index,1),ht=Ne.getFormat(tt.index-1,1);Te({width:yt.width,align:ht.align,float:yt.float})}else Te(null)}else tt||Te(null)};return Ne.on("selection-change",Le),()=>{Ne.off("selection-change",Le)}},[d]);const Ue=ke.useMemo(()=>{const Ne=new Date,Le=Ne.getMonth(),tt=Ne.getDate();return n.filter(rt=>{const yt=new Date(rt.created_at);return yt.getMonth()===Le&&yt.getDate()===tt&&yt.getFullYear()<Ne.getFullYear()}).sort((rt,yt)=>new Date(yt.created_at).getTime()-new Date(rt.created_at).getTime())},[n]),Ze=ke.useMemo(()=>{const Ne=new Set;return n.forEach(Le=>{Le.journal?Ne.add(Le.journal):Ne.add("Personal")}),Array.from(Ne).sort()},[n]),ot=ke.useCallback(async Ne=>{if(!v){me("Security session expired.","error");return}if(!d){me("Cannot save: no entry is currently being edited.","error");return}j("encrypting");try{let Le=null;const tt=d==="new"?{}:d;if(Ne.tempAudioBlob)try{const Ct=await Ne.tempAudioBlob.arrayBuffer(),{iv:It,data:sr}=await _(v,Ct),Ht=new Blob([sr],{type:"application/octet-stream"}),rr=`${t.user.id}/${Date.now()}-audio.bin`,{error:cr}=await er.storage.from("diary-audio").upload(rr,Ht,{upsert:!0});if(cr)throw cr;Le={path:rr,iv:It,type:Ne.tempAudioBlob.type}}catch(Ct){console.error("Audio upload failed",Ct),me("Failed to secure audio. Saving text only.","error")}else"audio"in tt&&(Le=tt.audio);const rt=JSON.stringify({title:Ne.title,content:Ne.content,audio:Le}),{iv:yt,data:ht}=await g(v,rt),bt=typeof d=="object"&&"id"in d&&d.id!=="",Jt={encrypted_entry:ht,iv:yt,mood:Ne.mood,tags:Ne.tags,journal:Ne.journal||"Personal",created_at:Ne.created_at};if(bt){const{error:Ct}=await er.from("diaries").update(Jt).eq("id",d.id);if(Ct)throw Ct;i(It=>It.map(sr=>sr.id===d.id?{...sr,...Ne,audio:Le,isDecrypted:!0}:sr))}else{const{data:Ct,error:It}=await er.from("diaries").insert({...Jt,owner_id:t.user.id}).select("id, created_at, mood, tags, owner_id, journal").single();if(It)throw It;const sr={...Ct,...Ne,audio:Le,id:Ct.id,isDecrypted:!0,isLoading:!1};i(Ht=>[sr,...Ht].sort((rr,cr)=>new Date(cr.created_at).getTime()-new Date(rr.created_at).getTime()))}me("Entry saved!","success"),f(null),l("timeline"),F(!0),j("synced"),Fe(!1),ae(null)}catch(Le){console.error("Error saving entry:",Le),me("Failed to save entry.","error"),j("error")}},[v,d,t.user.id,g,_,me]),it=ke.useCallback(Ne=>{const Le=Ne.tags||[],rt=k6(Ne.content).filter(yt=>!Le.includes(yt));rt.length>0?(ae(Ne),he(rt),Fe(!0)):ot(Ne)},[ot]),st=Ne=>{ye&&ot({...ye,tags:Ne})},Qe=()=>{ye&&ot(ye)},ze=Ne=>{U(Ne)},br=async()=>{if(!(!D||Y)){re(!0);try{const{error:Ne}=await er.from("diaries").delete().eq("id",D.id);if(Ne)throw Ne;i(Le=>Le.filter(tt=>tt.id!==D.id)),me("Entry deleted successfully.","success"),y(null),U(null)}catch(Ne){console.error("Error deleting entry:",Ne),me("Failed to delete entry.","error"),U(null)}finally{re(!1)}}},_t=Ne=>{B(Ne),y(null),l("timeline")},Ur=Ne=>{p(Ne),l("timeline"),y(null),B(null)},xt=()=>{y(null)},Lt=async()=>{await er.auth.signOut()},nn=async Ne=>{try{const{data:Le,error:tt}=await er.from("profiles").update(Ne).eq("id",t.user.id).select().single();if(tt)throw tt;P(Le),me("Profile updated successfully!","success")}catch(Le){me("Failed to update profile.","error"),console.error("Error updating profile:",Le)}},At=async Ne=>{try{const Le=Ne.name.split(".").pop(),tt=`${t.user.id}/${Date.now()}.${Le}`,{error:rt}=await er.storage.from("avatars").upload(tt,Ne,{upsert:!0});if(rt)throw rt;const{data:yt}=er.storage.from("avatars").getPublicUrl(tt),{error:ht}=await er.from("profiles").update({avatar_url:yt.publicUrl}).eq("id",t.user.id);if(ht)throw ht;P(bt=>bt?{...bt,avatar_url:yt.publicUrl}:null),me("Avatar updated!","success")}catch(Le){me("Failed to upload avatar.","error"),console.error("Error uploading avatar:",Le)}},vi=async Ne=>{if(v)try{const{count:Le,error:tt}=await er.from("diaries").select("*",{count:"exact",head:!0});if(tt)throw tt;const rt=Le||0;if(rt===0){me("No entries to export.","info");return}const yt=new dx("application/zip"),ht=new hx(yt),bt=50;let Jt=0,Ct=[],It="";for(let cr=0;cr<rt;cr+=bt){Ne(`Processing ${Jt} / ${rt}`),await e0();const{data:$r,error:on}=await er.from("diaries").select("*").order("created_at",{ascending:!1}).range(cr,cr+bt-1);if(on)throw on;if($r)for(const Dr of $r){try{const Ye=await m(v,Dr.encrypted_entry,Dr.iv),le=JSON.parse(Ye),De=new Date(Dr.created_at),We=`${De.getFullYear()}-${String(De.getMonth()+1).padStart(2,"0")}`;It&&We!==It&&Ct.length>0&&(await ht.add(`${It}.json`,new gm(JSON.stringify(Ct,null,2))),Ct=[],await e0()),It=We,Ct.push({id:Dr.id,created_at:Dr.created_at,title:le.title,content:le.content,tags:Dr.tags,mood:Dr.mood,journal:Dr.journal,audio:le.audio?"Audio file attached (encrypted, not exported)":void 0})}catch(Ye){console.error(`Failed to export entry ${Dr.id}`,Ye)}Jt++}}Ct.length>0&&await ht.add(`${It}.json`,new gm(JSON.stringify(Ct,null,2))),Ne("Finalizing ZIP..."),await e0();const sr=await ht.close(),Ht=URL.createObjectURL(sr),rr=document.createElement("a");rr.href=Ht,rr.download=`diary_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(rr),rr.click(),document.body.removeChild(rr),URL.revokeObjectURL(Ht),me("Export complete!","success")}catch(Le){console.error("Export failed:",Le),me("Export failed. Please check console.","error")}},Dt=async Ne=>{var tt;const Le=(tt=W.current)==null?void 0:tt.getEditor();if(Le){de(!0);try{const{blob:rt,extension:yt}=await A6(Ne),ht=`${t.user.id}/${Date.now()}.${yt}`,{error:bt}=await er.storage.from("diary-images").upload(ht,rt,{contentType:"image/webp",upsert:!1});if(bt)throw bt;const{data:Jt}=er.storage.from("diary-images").getPublicUrl(ht),Ct=Le.getSelection(!0);Le.insertEmbed(Ct.index,"image",Jt.publicUrl,"user"),Le.setSelection(Ct.index+1,0,"user")}catch(rt){me("Failed to upload image.","error"),console.error("Error uploading image:",rt)}finally{de(!1)}}},zr=Ne=>{var tt;const Le=(tt=W.current)==null?void 0:tt.getEditor();Le&&(Object.keys(Ne).forEach(rt=>{Le.format(rt,Ne[rt],"user")}),setTimeout(()=>{const rt=Le.getSelection();rt&&Le.emitter.emit("selection-change",rt,rt,"user")},0))},On=Ne=>new Date(Ne.getTime()-Ne.getTimezoneOffset()*6e4).toISOString().split("T")[0],jt=Ne=>{y(null),f(Ne),F(!1)},dt=()=>{y(null),f("new"),l("timeline"),F(!1)},Et=()=>{f(null),F(!0)},$t=()=>{var Ne;(Ne=W.current)==null||Ne.save()};if(x!=="ready"){let Ne;switch(x){case"checking":Ne=T.jsx("p",{children:"Initializing Secure Session..."});break;case"needed":Ne=T.jsx(uj,{onSuccess:Se,session:t});break;case"reauth":Ne=T.jsx(hj,{onSuccess:Se,session:t});break;default:Ne=T.jsx("p",{children:"An unexpected error occurred."})}return T.jsx("main",{className:"flex items-center justify-center h-screen",children:Ne})}const Yt=()=>{switch(s){case"calendar":return T.jsx(sP,{entries:n,onSelectDate:_t,onBack:()=>Jr("timeline")});case"search":return T.jsx(uP,{entries:n,onSelectEntry:Le=>jt(n.find(tt=>tt.id===Le)),onBack:()=>Jr("timeline")});case"profile":return T.jsx(pj,{session:t,profile:I,onUpdateProfile:nn,onAvatarUpload:At,onExportData:vi,onSignOut:Lt,theme:e,onToggleTheme:r});case"timeline":default:if(u)return T.jsx(AN,{entry:u,onEdit:()=>jt(u),onDelete:()=>ze(u),onBack:xt});let Ne=n;return H&&(Ne=Ne.filter(Le=>On(new Date(Le.created_at))===On(H))),c&&(Ne=Ne.filter(Le=>(Le.journal||"Personal")===c)),T.jsx(rN,{entries:Ne,onThisDayEntries:Ue,onSelectEntry:Le=>y(n.find(tt=>tt.id===Le)||null),onLoadContent:qe,profile:I,filteredDate:H,onClearFilter:()=>B(null)})}},Jr=Ne=>{y(null),f(null),B(null),l(Ne)};return T.jsxs("div",{className:"h-screen w-screen flex flex-col font-sans bg-[#FBF8F3] dark:bg-slate-900",children:[T.jsx(GA,{isEditing:!!d,onSave:$t,onCancel:Et,currentDate:d&&typeof d=="object"?new Date(d.created_at):u?new Date(u.created_at):new Date,weather:M,theme:e,onToggleTheme:r,saveStatus:E,profile:I,onShowProfile:()=>Jr("profile"),isToolsPanelVisible:R,onToggleToolsPanel:()=>S(Ne=>!Ne),isLeftSidebarVisible:O}),!O&&T.jsx(gj,{onClick:()=>F(!0)}),O&&T.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-20 md:hidden",onClick:()=>F(!1),"aria-hidden":"true"}),T.jsxs("div",{className:`flex flex-1 overflow-hidden transition-all duration-300 ${O?"md:pl-64":"pl-0"} relative`,children:[T.jsx(N6,{isVisible:O,onClose:()=>F(!1),activeView:s,onChangeView:Jr,onNewEntry:dt,journals:Ze,activeJournal:c,onSelectJournal:Ur}),T.jsx("main",{className:"flex-1 p-4 sm:p-6 md:p-8 overflow-y-auto min-w-0 w-full",children:d?T.jsx(aP,{ref:W,entry:typeof d=="object"?d:void 0,onSave:it,onWordCountChange:te,onCharacterCountChange:J,editorFont:q},typeof d=="object"&&d.id?d.id:"draft_session"):o?T.jsx("div",{className:"flex items-center justify-center h-full",children:T.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 text-slate-500 dark:text-slate-400",children:[T.jsxs("svg",{className:"animate-spin h-12 w-12",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),T.jsx("p",{className:"text-sm",children:"Loading your encrypted diary..."})]})}):Yt()}),d&&R&&T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-20 md:hidden",onClick:()=>S(!1),"aria-hidden":"true"}),T.jsx("div",{className:"fixed inset-y-0 right-0 z-30 h-full w-64 shadow-2xl md:relative md:shadow-none md:z-auto animate-slide-in-right md:animate-none",children:T.jsx(XA,{entry:d,onUpdateEntry:Ne=>{f(d==="new"?Le=>({id:"",owner_id:"",title:"",content:"",created_at:new Date().toISOString(),...typeof Le=="object"?Le:{},...Ne}):Le=>({...Le,...Ne}))},editorFont:q,onFontChange:L,onImageUpload:Dt,isUploadingImage:ne,selectedImageFormat:be,onImageFormatChange:zr,availableJournals:Ze})})]})]}),d&&T.jsx(KA,{wordCount:ee,characterCount:Q,saveStatus:E}),T.jsx(mj,{isOpen:!!D,isProcessing:Y,onClose:()=>U(null),onConfirm:br,title:"Delete Entry?",message:"Are you sure you want to permanently delete this entry? This action cannot be undone."}),T.jsx(vj,{isOpen:Oe,existingTags:(ye==null?void 0:ye.tags)||[],suggestedTags:Ke,onConfirm:st,onCancel:Qe})]})},wj=()=>{const[t,e]=ke.useState(null),[r,n]=ke.useState(!0),[i,o]=ke.useState(()=>localStorage.getItem("theme")||"light");ke.useEffect(()=>{er.auth.getSession().then(({data:{session:l}})=>{e(l),n(!1)});const{data:{subscription:s}}=er.auth.onAuthStateChange((l,c)=>{e(c)});return()=>s==null?void 0:s.unsubscribe()},[]),ke.useEffect(()=>{const s=window.document.documentElement;i==="dark"?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("theme",i)},[i]),ke.useEffect(()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(s=>{console.log("ServiceWorker registration successful with scope: ",s.scope)}).catch(s=>{console.log("ServiceWorker registration failed: ",s)})})},[]);const a=()=>{o(s=>s==="light"?"dark":"light")};return r?T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:T.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Loading..."})}):T.jsx(d6,{children:T.jsx(_6,{children:T.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 font-sans",children:t?T.jsx(yj,{session:t,theme:i,onToggleTheme:a},t.user.id):T.jsx(p6,{})})})})},E_=document.getElementById("root");if(!E_)throw new Error("Could not find root element to mount to");const bj=t0.createRoot(E_);bj.render(T.jsx(vy.StrictMode,{children:T.jsx(wj,{})}));export{Ut as _,Yn as c,E1 as g};
