import yv from"compromise";import{BlobWriter as Z4,ZipWriter as e3,TextReader as wv}from"@zip.js/zip.js";function t3(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r3(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var A5={exports:{}},bh={},j5={exports:{}},wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc=Symbol.for("react.element"),n3=Symbol.for("react.portal"),i3=Symbol.for("react.fragment"),a3=Symbol.for("react.strict_mode"),o3=Symbol.for("react.profiler"),s3=Symbol.for("react.provider"),l3=Symbol.for("react.context"),u3=Symbol.for("react.forward_ref"),c3=Symbol.for("react.suspense"),f3=Symbol.for("react.memo"),d3=Symbol.for("react.lazy"),bv=Symbol.iterator;function h3(t){return t===null||typeof t!="object"?null:(t=bv&&t[bv]||t["@@iterator"],typeof t=="function"?t:null)}var O5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L5=Object.assign,P5={};function Rl(t,e,r){this.props=t,this.context=e,this.refs=P5,this.updater=r||O5}Rl.prototype.isReactComponent={};Rl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function T5(){}T5.prototype=Rl.prototype;function kg(t,e,r){this.props=t,this.context=e,this.refs=P5,this.updater=r||O5}var Ng=kg.prototype=new T5;Ng.constructor=kg;L5(Ng,Rl.prototype);Ng.isPureReactComponent=!0;var xv=Array.isArray,C5=Object.prototype.hasOwnProperty,Eg={current:null},R5={key:!0,ref:!0,__self:!0,__source:!0};function I5(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)C5.call(e,n)&&!R5.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:Tc,type:t,key:a,ref:o,props:i,_owner:Eg.current}}function p3(t,e){return{$$typeof:Tc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ag(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tc}function m3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var _v=/\/+/g;function Mp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?m3(""+t.key):e.toString(36)}function dd(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Tc:case n3:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Mp(o,0):n,xv(i)?(r="",t!=null&&(r=t.replace(_v,"$&/")+"/"),dd(i,e,r,"",function(u){return u})):i!=null&&(Ag(i)&&(i=p3(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_v,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",xv(t))for(var s=0;s<t.length;s++){a=t[s];var l=n+Mp(a,s);o+=dd(a,e,r,l,i)}else if(l=h3(t),typeof l=="function")for(t=l.call(t),s=0;!(a=t.next()).done;)a=a.value,l=n+Mp(a,s++),o+=dd(a,e,r,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Of(t,e,r){if(t==null)return t;var n=[],i=0;return dd(t,n,"","",function(a){return e.call(r,a,i++)}),n}function g3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vn={current:null},hd={transition:null},v3={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:hd,ReactCurrentOwner:Eg};function D5(){throw Error("act(...) is not supported in production builds of React.")}wt.Children={map:Of,forEach:function(t,e,r){Of(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Of(t,function(){e++}),e},toArray:function(t){return Of(t,function(e){return e})||[]},only:function(t){if(!Ag(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};wt.Component=Rl;wt.Fragment=i3;wt.Profiler=o3;wt.PureComponent=kg;wt.StrictMode=a3;wt.Suspense=c3;wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v3;wt.act=D5;wt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=L5({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Eg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)C5.call(e,l)&&!R5.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:Tc,type:t.type,key:i,ref:a,props:n,_owner:o}};wt.createContext=function(t){return t={$$typeof:l3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:s3,_context:t},t.Consumer=t};wt.createElement=I5;wt.createFactory=function(t){var e=I5.bind(null,t);return e.type=t,e};wt.createRef=function(){return{current:null}};wt.forwardRef=function(t){return{$$typeof:u3,render:t}};wt.isValidElement=Ag;wt.lazy=function(t){return{$$typeof:d3,_payload:{_status:-1,_result:t},_init:g3}};wt.memo=function(t,e){return{$$typeof:f3,type:t,compare:e===void 0?null:e}};wt.startTransition=function(t){var e=hd.transition;hd.transition={};try{t()}finally{hd.transition=e}};wt.unstable_act=D5;wt.useCallback=function(t,e){return vn.current.useCallback(t,e)};wt.useContext=function(t){return vn.current.useContext(t)};wt.useDebugValue=function(){};wt.useDeferredValue=function(t){return vn.current.useDeferredValue(t)};wt.useEffect=function(t,e){return vn.current.useEffect(t,e)};wt.useId=function(){return vn.current.useId()};wt.useImperativeHandle=function(t,e,r){return vn.current.useImperativeHandle(t,e,r)};wt.useInsertionEffect=function(t,e){return vn.current.useInsertionEffect(t,e)};wt.useLayoutEffect=function(t,e){return vn.current.useLayoutEffect(t,e)};wt.useMemo=function(t,e){return vn.current.useMemo(t,e)};wt.useReducer=function(t,e,r){return vn.current.useReducer(t,e,r)};wt.useRef=function(t){return vn.current.useRef(t)};wt.useState=function(t){return vn.current.useState(t)};wt.useSyncExternalStore=function(t,e,r){return vn.current.useSyncExternalStore(t,e,r)};wt.useTransition=function(){return vn.current.useTransition()};wt.version="18.3.1";j5.exports=wt;var ie=j5.exports;const M5=wh(ie);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y3=ie,w3=Symbol.for("react.element"),b3=Symbol.for("react.fragment"),x3=Object.prototype.hasOwnProperty,_3=y3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S3={key:!0,ref:!0,__self:!0,__source:!0};function F5(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)x3.call(e,n)&&!S3.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:w3,type:t,key:a,ref:o,props:i,_owner:_3.current}}bh.Fragment=b3;bh.jsx=F5;bh.jsxs=F5;A5.exports=bh;var x=A5.exports,q0={},B5={exports:{}},ti={},q5={exports:{}},U5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,K){var W=Q.length;Q.push(K);e:for(;0<W;){var q=W-1>>>1,P=Q[q];if(0<i(P,K))Q[q]=K,Q[W]=P,W=q;else break e}}function r(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var K=Q[0],W=Q.pop();if(W!==K){Q[0]=W;e:for(var q=0,P=Q.length,F=P>>>1;q<F;){var U=2*(q+1)-1,H=Q[U],B=U+1,J=Q[B];if(0>i(H,W))B<P&&0>i(J,H)?(Q[q]=J,Q[B]=W,q=B):(Q[q]=H,Q[U]=W,q=U);else if(B<P&&0>i(J,W))Q[q]=J,Q[B]=W,q=B;else break e}}return K}function i(Q,K){var W=Q.sortIndex-K.sortIndex;return W!==0?W:Q.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],h=1,f=null,d=3,c=!1,y=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Q){for(var K=r(u);K!==null;){if(K.callback===null)n(u);else if(K.startTime<=Q)n(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=r(u)}}function S(Q){if(v=!1,b(Q),!y)if(r(l)!==null)y=!0,Z(E);else{var K=r(u);K!==null&&te(S,K.startTime-Q)}}function E(Q,K){y=!1,v&&(v=!1,m(O),O=-1),c=!0;var W=d;try{for(b(K),f=r(l);f!==null&&(!(f.expirationTime>K)||Q&&!k());){var q=f.callback;if(typeof q=="function"){f.callback=null,d=f.priorityLevel;var P=q(f.expirationTime<=K);K=t.unstable_now(),typeof P=="function"?f.callback=P:f===r(l)&&n(l),b(K)}else n(l);f=r(l)}if(f!==null)var F=!0;else{var U=r(u);U!==null&&te(S,U.startTime-K),F=!1}return F}finally{f=null,d=W,c=!1}}var I=!1,L=null,O=-1,M=5,T=-1;function k(){return!(t.unstable_now()-T<M)}function A(){if(L!==null){var Q=t.unstable_now();T=Q;var K=!0;try{K=L(!0,Q)}finally{K?R():(I=!1,L=null)}}else I=!1}var R;if(typeof g=="function")R=function(){g(A)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,V=C.port2;C.port1.onmessage=A,R=function(){V.postMessage(null)}}else R=function(){w(A,0)};function Z(Q){L=Q,I||(I=!0,R())}function te(Q,K){O=w(function(){Q(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){y||c||(y=!0,Z(E))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(Q){switch(d){case 1:case 2:case 3:var K=3;break;default:K=d}var W=d;d=K;try{return Q()}finally{d=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,K){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var W=d;d=Q;try{return K()}finally{d=W}},t.unstable_scheduleCallback=function(Q,K,W){var q=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?q+W:q):W=q,Q){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=W+P,Q={id:h++,callback:K,priorityLevel:Q,startTime:W,expirationTime:P,sortIndex:-1},W>q?(Q.sortIndex=W,e(u,Q),r(l)===null&&Q===r(u)&&(v?(m(O),O=-1):v=!0,te(S,W-q))):(Q.sortIndex=P,e(l,Q),y||c||(y=!0,Z(E))),Q},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(Q){var K=d;return function(){var W=d;d=K;try{return Q.apply(this,arguments)}finally{d=W}}}})(U5);q5.exports=U5;var k3=q5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N3=ie,Zn=k3;function Be(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var z5=new Set,lc={};function fs(t,e){kl(t,e),kl(t+"Capture",e)}function kl(t,e){for(lc[t]=e,t=0;t<e.length;t++)z5.add(e[t])}var Aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),U0=Object.prototype.hasOwnProperty,E3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sv={},kv={};function A3(t){return U0.call(kv,t)?!0:U0.call(Sv,t)?!1:E3.test(t)?kv[t]=!0:(Sv[t]=!0,!1)}function j3(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function O3(t,e,r,n){if(e===null||typeof e>"u"||j3(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yn(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Wr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wr[t]=new yn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wr[e]=new yn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wr[t]=new yn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wr[t]=new yn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wr[t]=new yn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wr[t]=new yn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wr[t]=new yn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wr[t]=new yn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wr[t]=new yn(t,5,!1,t.toLowerCase(),null,!1,!1)});var jg=/[\-:]([a-z])/g;function Og(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jg,Og);Wr[e]=new yn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jg,Og);Wr[e]=new yn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jg,Og);Wr[e]=new yn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wr[t]=new yn(t,1,!1,t.toLowerCase(),null,!1,!1)});Wr.xlinkHref=new yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wr[t]=new yn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lg(t,e,r,n){var i=Wr.hasOwnProperty(e)?Wr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(O3(e,r,i,n)&&(r=null),n||i===null?A3(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ca=N3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lf=Symbol.for("react.element"),el=Symbol.for("react.portal"),tl=Symbol.for("react.fragment"),Pg=Symbol.for("react.strict_mode"),z0=Symbol.for("react.profiler"),$5=Symbol.for("react.provider"),H5=Symbol.for("react.context"),Tg=Symbol.for("react.forward_ref"),$0=Symbol.for("react.suspense"),H0=Symbol.for("react.suspense_list"),Cg=Symbol.for("react.memo"),to=Symbol.for("react.lazy"),W5=Symbol.for("react.offscreen"),Nv=Symbol.iterator;function ku(t){return t===null||typeof t!="object"?null:(t=Nv&&t[Nv]||t["@@iterator"],typeof t=="function"?t:null)}var sr=Object.assign,Fp;function Wu(t){if(Fp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Fp=e&&e[1]||""}return`
`+Fp+t}var Bp=!1;function qp(t,e){if(!t||Bp)return"";Bp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{Bp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Wu(t):""}function L3(t){switch(t.tag){case 5:return Wu(t.type);case 16:return Wu("Lazy");case 13:return Wu("Suspense");case 19:return Wu("SuspenseList");case 0:case 2:case 15:return t=qp(t.type,!1),t;case 11:return t=qp(t.type.render,!1),t;case 1:return t=qp(t.type,!0),t;default:return""}}function W0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case tl:return"Fragment";case el:return"Portal";case z0:return"Profiler";case Pg:return"StrictMode";case $0:return"Suspense";case H0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case H5:return(t.displayName||"Context")+".Consumer";case $5:return(t._context.displayName||"Context")+".Provider";case Tg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cg:return e=t.displayName||null,e!==null?e:W0(t.type)||"Memo";case to:e=t._payload,t=t._init;try{return W0(t(e))}catch{}}return null}function P3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W0(e);case 8:return e===Pg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function V5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function T3(t){var e=V5(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pf(t){t._valueTracker||(t._valueTracker=T3(t))}function G5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=V5(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Id(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function V0(t,e){var r=e.checked;return sr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ev(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=yo(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function K5(t,e){e=e.checked,e!=null&&Lg(t,"checked",e,!1)}function G0(t,e){K5(t,e);var r=yo(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?K0(t,e.type,r):e.hasOwnProperty("defaultValue")&&K0(t,e.type,yo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Av(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function K0(t,e,r){(e!=="number"||Id(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Vu=Array.isArray;function hl(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+yo(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Y0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Be(91));return sr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jv(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Be(92));if(Vu(r)){if(1<r.length)throw Error(Be(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:yo(r)}}function Y5(t,e){var r=yo(e.value),n=yo(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Ov(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function J5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?J5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tf,X5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tf=Tf||document.createElement("div"),Tf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ju={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},C3=["Webkit","ms","Moz","O"];Object.keys(Ju).forEach(function(t){C3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ju[e]=Ju[t]})});function Q5(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ju.hasOwnProperty(t)&&Ju[t]?(""+e).trim():e+"px"}function Z5(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Q5(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var R3=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function X0(t,e){if(e){if(R3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Be(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Be(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Be(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Be(62))}}function Q0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z0=null;function Rg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var em=null,pl=null,ml=null;function Lv(t){if(t=Ic(t)){if(typeof em!="function")throw Error(Be(280));var e=t.stateNode;e&&(e=Nh(e),em(t.stateNode,t.type,e))}}function ew(t){pl?ml?ml.push(t):ml=[t]:pl=t}function tw(){if(pl){var t=pl,e=ml;if(ml=pl=null,Lv(t),e)for(t=0;t<e.length;t++)Lv(e[t])}}function rw(t,e){return t(e)}function nw(){}var Up=!1;function iw(t,e,r){if(Up)return t(e,r);Up=!0;try{return rw(t,e,r)}finally{Up=!1,(pl!==null||ml!==null)&&(nw(),tw())}}function cc(t,e){var r=t.stateNode;if(r===null)return null;var n=Nh(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Be(231,e,typeof r));return r}var tm=!1;if(Aa)try{var Nu={};Object.defineProperty(Nu,"passive",{get:function(){tm=!0}}),window.addEventListener("test",Nu,Nu),window.removeEventListener("test",Nu,Nu)}catch{tm=!1}function I3(t,e,r,n,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var Xu=!1,Dd=null,Md=!1,rm=null,D3={onError:function(t){Xu=!0,Dd=t}};function M3(t,e,r,n,i,a,o,s,l){Xu=!1,Dd=null,I3.apply(D3,arguments)}function F3(t,e,r,n,i,a,o,s,l){if(M3.apply(this,arguments),Xu){if(Xu){var u=Dd;Xu=!1,Dd=null}else throw Error(Be(198));Md||(Md=!0,rm=u)}}function ds(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function aw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pv(t){if(ds(t)!==t)throw Error(Be(188))}function B3(t){var e=t.alternate;if(!e){if(e=ds(t),e===null)throw Error(Be(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Pv(i),t;if(a===n)return Pv(i),e;a=a.sibling}throw Error(Be(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o)throw Error(Be(189))}}if(r.alternate!==n)throw Error(Be(190))}if(r.tag!==3)throw Error(Be(188));return r.stateNode.current===r?t:e}function ow(t){return t=B3(t),t!==null?sw(t):null}function sw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sw(t);if(e!==null)return e;t=t.sibling}return null}var lw=Zn.unstable_scheduleCallback,Tv=Zn.unstable_cancelCallback,q3=Zn.unstable_shouldYield,U3=Zn.unstable_requestPaint,yr=Zn.unstable_now,z3=Zn.unstable_getCurrentPriorityLevel,Ig=Zn.unstable_ImmediatePriority,uw=Zn.unstable_UserBlockingPriority,Fd=Zn.unstable_NormalPriority,$3=Zn.unstable_LowPriority,cw=Zn.unstable_IdlePriority,xh=null,ea=null;function H3(t){if(ea&&typeof ea.onCommitFiberRoot=="function")try{ea.onCommitFiberRoot(xh,t,void 0,(t.current.flags&128)===128)}catch{}}var Di=Math.clz32?Math.clz32:G3,W3=Math.log,V3=Math.LN2;function G3(t){return t>>>=0,t===0?32:31-(W3(t)/V3|0)|0}var Cf=64,Rf=4194304;function Gu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bd(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var s=o&~i;s!==0?n=Gu(s):(a&=o,a!==0&&(n=Gu(a)))}else o=r&~i,o!==0?n=Gu(o):a!==0&&(n=Gu(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Di(e),i=1<<r,n|=t[r],e&=~i;return n}function K3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y3(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Di(a),s=1<<o,l=i[o];l===-1?(!(s&r)||s&n)&&(i[o]=K3(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}function nm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fw(){var t=Cf;return Cf<<=1,!(Cf&4194240)&&(Cf=64),t}function zp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Cc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Di(e),t[e]=r}function J3(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Di(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function Dg(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Di(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Ct=0;function dw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hw,Mg,pw,mw,gw,im=!1,If=[],uo=null,co=null,fo=null,fc=new Map,dc=new Map,no=[],X3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cv(t,e){switch(t){case"focusin":case"focusout":uo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":fo=null;break;case"pointerover":case"pointerout":fc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dc.delete(e.pointerId)}}function Eu(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Ic(e),e!==null&&Mg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Q3(t,e,r,n,i){switch(e){case"focusin":return uo=Eu(uo,t,e,r,n,i),!0;case"dragenter":return co=Eu(co,t,e,r,n,i),!0;case"mouseover":return fo=Eu(fo,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return fc.set(a,Eu(fc.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,dc.set(a,Eu(dc.get(a)||null,t,e,r,n,i)),!0}return!1}function vw(t){var e=Jo(t.target);if(e!==null){var r=ds(e);if(r!==null){if(e=r.tag,e===13){if(e=aw(r),e!==null){t.blockedOn=e,gw(t.priority,function(){pw(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=am(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Z0=n,r.target.dispatchEvent(n),Z0=null}else return e=Ic(r),e!==null&&Mg(e),t.blockedOn=r,!1;e.shift()}return!0}function Rv(t,e,r){pd(t)&&r.delete(e)}function Z3(){im=!1,uo!==null&&pd(uo)&&(uo=null),co!==null&&pd(co)&&(co=null),fo!==null&&pd(fo)&&(fo=null),fc.forEach(Rv),dc.forEach(Rv)}function Au(t,e){t.blockedOn===e&&(t.blockedOn=null,im||(im=!0,Zn.unstable_scheduleCallback(Zn.unstable_NormalPriority,Z3)))}function hc(t){function e(i){return Au(i,t)}if(0<If.length){Au(If[0],t);for(var r=1;r<If.length;r++){var n=If[r];n.blockedOn===t&&(n.blockedOn=null)}}for(uo!==null&&Au(uo,t),co!==null&&Au(co,t),fo!==null&&Au(fo,t),fc.forEach(e),dc.forEach(e),r=0;r<no.length;r++)n=no[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<no.length&&(r=no[0],r.blockedOn===null);)vw(r),r.blockedOn===null&&no.shift()}var gl=Ca.ReactCurrentBatchConfig,qd=!0;function eS(t,e,r,n){var i=Ct,a=gl.transition;gl.transition=null;try{Ct=1,Fg(t,e,r,n)}finally{Ct=i,gl.transition=a}}function tS(t,e,r,n){var i=Ct,a=gl.transition;gl.transition=null;try{Ct=4,Fg(t,e,r,n)}finally{Ct=i,gl.transition=a}}function Fg(t,e,r,n){if(qd){var i=am(t,e,r,n);if(i===null)Qp(t,e,n,Ud,r),Cv(t,n);else if(Q3(i,t,e,r,n))n.stopPropagation();else if(Cv(t,n),e&4&&-1<X3.indexOf(t)){for(;i!==null;){var a=Ic(i);if(a!==null&&hw(a),a=am(t,e,r,n),a===null&&Qp(t,e,n,Ud,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else Qp(t,e,n,null,r)}}var Ud=null;function am(t,e,r,n){if(Ud=null,t=Rg(n),t=Jo(t),t!==null)if(e=ds(t),e===null)t=null;else if(r=e.tag,r===13){if(t=aw(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ud=t,null}function yw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(z3()){case Ig:return 1;case uw:return 4;case Fd:case $3:return 16;case cw:return 536870912;default:return 16}default:return 16}}var oo=null,Bg=null,md=null;function ww(){if(md)return md;var t,e=Bg,r=e.length,n,i="value"in oo?oo.value:oo.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return md=i.slice(t,1<n?1-n:void 0)}function gd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Df(){return!0}function Iv(){return!1}function ri(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Df:Iv,this.isPropagationStopped=Iv,this}return sr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Df)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Df)},persist:function(){},isPersistent:Df}),e}var Il={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qg=ri(Il),Rc=sr({},Il,{view:0,detail:0}),rS=ri(Rc),$p,Hp,ju,_h=sr({},Rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ug,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ju&&(ju&&t.type==="mousemove"?($p=t.screenX-ju.screenX,Hp=t.screenY-ju.screenY):Hp=$p=0,ju=t),$p)},movementY:function(t){return"movementY"in t?t.movementY:Hp}}),Dv=ri(_h),nS=sr({},_h,{dataTransfer:0}),iS=ri(nS),aS=sr({},Rc,{relatedTarget:0}),Wp=ri(aS),oS=sr({},Il,{animationName:0,elapsedTime:0,pseudoElement:0}),sS=ri(oS),lS=sr({},Il,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uS=ri(lS),cS=sr({},Il,{data:0}),Mv=ri(cS),fS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hS[t])?!!e[t]:!1}function Ug(){return pS}var mS=sr({},Rc,{key:function(t){if(t.key){var e=fS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ug,charCode:function(t){return t.type==="keypress"?gd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gS=ri(mS),vS=sr({},_h,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fv=ri(vS),yS=sr({},Rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ug}),wS=ri(yS),bS=sr({},Il,{propertyName:0,elapsedTime:0,pseudoElement:0}),xS=ri(bS),_S=sr({},_h,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),SS=ri(_S),kS=[9,13,27,32],zg=Aa&&"CompositionEvent"in window,Qu=null;Aa&&"documentMode"in document&&(Qu=document.documentMode);var NS=Aa&&"TextEvent"in window&&!Qu,bw=Aa&&(!zg||Qu&&8<Qu&&11>=Qu),Bv=" ",qv=!1;function xw(t,e){switch(t){case"keyup":return kS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _w(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rl=!1;function ES(t,e){switch(t){case"compositionend":return _w(e);case"keypress":return e.which!==32?null:(qv=!0,Bv);case"textInput":return t=e.data,t===Bv&&qv?null:t;default:return null}}function AS(t,e){if(rl)return t==="compositionend"||!zg&&xw(t,e)?(t=ww(),md=Bg=oo=null,rl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bw&&e.locale!=="ko"?null:e.data;default:return null}}var jS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jS[t.type]:e==="textarea"}function Sw(t,e,r,n){ew(n),e=zd(e,"onChange"),0<e.length&&(r=new qg("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Zu=null,pc=null;function OS(t){Rw(t,0)}function Sh(t){var e=al(t);if(G5(e))return t}function LS(t,e){if(t==="change")return e}var kw=!1;if(Aa){var Vp;if(Aa){var Gp="oninput"in document;if(!Gp){var zv=document.createElement("div");zv.setAttribute("oninput","return;"),Gp=typeof zv.oninput=="function"}Vp=Gp}else Vp=!1;kw=Vp&&(!document.documentMode||9<document.documentMode)}function $v(){Zu&&(Zu.detachEvent("onpropertychange",Nw),pc=Zu=null)}function Nw(t){if(t.propertyName==="value"&&Sh(pc)){var e=[];Sw(e,pc,t,Rg(t)),iw(OS,e)}}function PS(t,e,r){t==="focusin"?($v(),Zu=e,pc=r,Zu.attachEvent("onpropertychange",Nw)):t==="focusout"&&$v()}function TS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sh(pc)}function CS(t,e){if(t==="click")return Sh(e)}function RS(t,e){if(t==="input"||t==="change")return Sh(e)}function IS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fi=typeof Object.is=="function"?Object.is:IS;function mc(t,e){if(Fi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!U0.call(e,i)||!Fi(t[i],e[i]))return!1}return!0}function Hv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wv(t,e){var r=Hv(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Hv(r)}}function Ew(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ew(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Aw(){for(var t=window,e=Id();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Id(t.document)}return e}function $g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DS(t){var e=Aw(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Ew(r.ownerDocument.documentElement,r)){if(n!==null&&$g(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=Wv(r,a);var o=Wv(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MS=Aa&&"documentMode"in document&&11>=document.documentMode,nl=null,om=null,ec=null,sm=!1;function Vv(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sm||nl==null||nl!==Id(n)||(n=nl,"selectionStart"in n&&$g(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ec&&mc(ec,n)||(ec=n,n=zd(om,"onSelect"),0<n.length&&(e=new qg("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=nl)))}function Mf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var il={animationend:Mf("Animation","AnimationEnd"),animationiteration:Mf("Animation","AnimationIteration"),animationstart:Mf("Animation","AnimationStart"),transitionend:Mf("Transition","TransitionEnd")},Kp={},jw={};Aa&&(jw=document.createElement("div").style,"AnimationEvent"in window||(delete il.animationend.animation,delete il.animationiteration.animation,delete il.animationstart.animation),"TransitionEvent"in window||delete il.transitionend.transition);function kh(t){if(Kp[t])return Kp[t];if(!il[t])return t;var e=il[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in jw)return Kp[t]=e[r];return t}var Ow=kh("animationend"),Lw=kh("animationiteration"),Pw=kh("animationstart"),Tw=kh("transitionend"),Cw=new Map,Gv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _o(t,e){Cw.set(t,e),fs(e,[t])}for(var Yp=0;Yp<Gv.length;Yp++){var Jp=Gv[Yp],FS=Jp.toLowerCase(),BS=Jp[0].toUpperCase()+Jp.slice(1);_o(FS,"on"+BS)}_o(Ow,"onAnimationEnd");_o(Lw,"onAnimationIteration");_o(Pw,"onAnimationStart");_o("dblclick","onDoubleClick");_o("focusin","onFocus");_o("focusout","onBlur");_o(Tw,"onTransitionEnd");kl("onMouseEnter",["mouseout","mouseover"]);kl("onMouseLeave",["mouseout","mouseover"]);kl("onPointerEnter",["pointerout","pointerover"]);kl("onPointerLeave",["pointerout","pointerover"]);fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ku));function Kv(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,F3(n,e,void 0,t),t.currentTarget=null}function Rw(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Kv(i,s,u),a=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Kv(i,s,u),a=l}}}if(Md)throw t=rm,Md=!1,rm=null,t}function Yt(t,e){var r=e[dm];r===void 0&&(r=e[dm]=new Set);var n=t+"__bubble";r.has(n)||(Iw(e,t,2,!1),r.add(n))}function Xp(t,e,r){var n=0;e&&(n|=4),Iw(r,t,n,e)}var Ff="_reactListening"+Math.random().toString(36).slice(2);function gc(t){if(!t[Ff]){t[Ff]=!0,z5.forEach(function(r){r!=="selectionchange"&&(qS.has(r)||Xp(r,!1,t),Xp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ff]||(e[Ff]=!0,Xp("selectionchange",!1,e))}}function Iw(t,e,r,n){switch(yw(e)){case 1:var i=eS;break;case 4:i=tS;break;default:i=Fg}r=i.bind(null,e,r,t),i=void 0,!tm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Qp(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=Jo(s),o===null)return;if(l=o.tag,l===5||l===6){n=a=o;continue e}s=s.parentNode}}n=n.return}iw(function(){var u=a,h=Rg(r),f=[];e:{var d=Cw.get(t);if(d!==void 0){var c=qg,y=t;switch(t){case"keypress":if(gd(r)===0)break e;case"keydown":case"keyup":c=gS;break;case"focusin":y="focus",c=Wp;break;case"focusout":y="blur",c=Wp;break;case"beforeblur":case"afterblur":c=Wp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=Dv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=iS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=wS;break;case Ow:case Lw:case Pw:c=sS;break;case Tw:c=xS;break;case"scroll":c=rS;break;case"wheel":c=SS;break;case"copy":case"cut":case"paste":c=uS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Fv}var v=(e&4)!==0,w=!v&&t==="scroll",m=v?d!==null?d+"Capture":null:d;v=[];for(var g=u,b;g!==null;){b=g;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,m!==null&&(S=cc(g,m),S!=null&&v.push(vc(g,S,b)))),w)break;g=g.return}0<v.length&&(d=new c(d,y,null,r,h),f.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",c=t==="mouseout"||t==="pointerout",d&&r!==Z0&&(y=r.relatedTarget||r.fromElement)&&(Jo(y)||y[ja]))break e;if((c||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,c?(y=r.relatedTarget||r.toElement,c=u,y=y?Jo(y):null,y!==null&&(w=ds(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(c=null,y=u),c!==y)){if(v=Dv,S="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=Fv,S="onPointerLeave",m="onPointerEnter",g="pointer"),w=c==null?d:al(c),b=y==null?d:al(y),d=new v(S,g+"leave",c,r,h),d.target=w,d.relatedTarget=b,S=null,Jo(h)===u&&(v=new v(m,g+"enter",y,r,h),v.target=b,v.relatedTarget=w,S=v),w=S,c&&y)t:{for(v=c,m=y,g=0,b=v;b;b=qs(b))g++;for(b=0,S=m;S;S=qs(S))b++;for(;0<g-b;)v=qs(v),g--;for(;0<b-g;)m=qs(m),b--;for(;g--;){if(v===m||m!==null&&v===m.alternate)break t;v=qs(v),m=qs(m)}v=null}else v=null;c!==null&&Yv(f,d,c,v,!1),y!==null&&w!==null&&Yv(f,w,y,v,!0)}}e:{if(d=u?al(u):window,c=d.nodeName&&d.nodeName.toLowerCase(),c==="select"||c==="input"&&d.type==="file")var E=LS;else if(Uv(d))if(kw)E=RS;else{E=TS;var I=PS}else(c=d.nodeName)&&c.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=CS);if(E&&(E=E(t,u))){Sw(f,E,r,h);break e}I&&I(t,d,u),t==="focusout"&&(I=d._wrapperState)&&I.controlled&&d.type==="number"&&K0(d,"number",d.value)}switch(I=u?al(u):window,t){case"focusin":(Uv(I)||I.contentEditable==="true")&&(nl=I,om=u,ec=null);break;case"focusout":ec=om=nl=null;break;case"mousedown":sm=!0;break;case"contextmenu":case"mouseup":case"dragend":sm=!1,Vv(f,r,h);break;case"selectionchange":if(MS)break;case"keydown":case"keyup":Vv(f,r,h)}var L;if(zg)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else rl?xw(t,r)&&(O="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(bw&&r.locale!=="ko"&&(rl||O!=="onCompositionStart"?O==="onCompositionEnd"&&rl&&(L=ww()):(oo=h,Bg="value"in oo?oo.value:oo.textContent,rl=!0)),I=zd(u,O),0<I.length&&(O=new Mv(O,t,null,r,h),f.push({event:O,listeners:I}),L?O.data=L:(L=_w(r),L!==null&&(O.data=L)))),(L=NS?ES(t,r):AS(t,r))&&(u=zd(u,"onBeforeInput"),0<u.length&&(h=new Mv("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:u}),h.data=L))}Rw(f,e)})}function vc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function zd(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=cc(t,r),a!=null&&n.unshift(vc(t,a,i)),a=cc(t,e),a!=null&&n.push(vc(t,a,i))),t=t.return}return n}function qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yv(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,i?(l=cc(r,a),l!=null&&o.unshift(vc(r,l,s))):i||(l=cc(r,a),l!=null&&o.push(vc(r,l,s)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var US=/\r\n?/g,zS=/\u0000|\uFFFD/g;function Jv(t){return(typeof t=="string"?t:""+t).replace(US,`
`).replace(zS,"")}function Bf(t,e,r){if(e=Jv(e),Jv(t)!==e&&r)throw Error(Be(425))}function $d(){}var lm=null,um=null;function cm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fm=typeof setTimeout=="function"?setTimeout:void 0,$S=typeof clearTimeout=="function"?clearTimeout:void 0,Xv=typeof Promise=="function"?Promise:void 0,HS=typeof queueMicrotask=="function"?queueMicrotask:typeof Xv<"u"?function(t){return Xv.resolve(null).then(t).catch(WS)}:fm;function WS(t){setTimeout(function(){throw t})}function Zp(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),hc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);hc(e)}function ho(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Dl=Math.random().toString(36).slice(2),Qi="__reactFiber$"+Dl,yc="__reactProps$"+Dl,ja="__reactContainer$"+Dl,dm="__reactEvents$"+Dl,VS="__reactListeners$"+Dl,GS="__reactHandles$"+Dl;function Jo(t){var e=t[Qi];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ja]||r[Qi]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Qv(t);t!==null;){if(r=t[Qi])return r;t=Qv(t)}return e}t=r,r=t.parentNode}return null}function Ic(t){return t=t[Qi]||t[ja],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function al(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Be(33))}function Nh(t){return t[yc]||null}var hm=[],ol=-1;function So(t){return{current:t}}function Qt(t){0>ol||(t.current=hm[ol],hm[ol]=null,ol--)}function Kt(t,e){ol++,hm[ol]=t.current,t.current=e}var wo={},on=So(wo),Tn=So(!1),ns=wo;function Nl(t,e){var r=t.type.contextTypes;if(!r)return wo;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Cn(t){return t=t.childContextTypes,t!=null}function Hd(){Qt(Tn),Qt(on)}function Zv(t,e,r){if(on.current!==wo)throw Error(Be(168));Kt(on,e),Kt(Tn,r)}function Dw(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Be(108,P3(t)||"Unknown",i));return sr({},r,n)}function Wd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wo,ns=on.current,Kt(on,t),Kt(Tn,Tn.current),!0}function ey(t,e,r){var n=t.stateNode;if(!n)throw Error(Be(169));r?(t=Dw(t,e,ns),n.__reactInternalMemoizedMergedChildContext=t,Qt(Tn),Qt(on),Kt(on,t)):Qt(Tn),Kt(Tn,r)}var _a=null,Eh=!1,e0=!1;function Mw(t){_a===null?_a=[t]:_a.push(t)}function KS(t){Eh=!0,Mw(t)}function ko(){if(!e0&&_a!==null){e0=!0;var t=0,e=Ct;try{var r=_a;for(Ct=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}_a=null,Eh=!1}catch(i){throw _a!==null&&(_a=_a.slice(t+1)),lw(Ig,ko),i}finally{Ct=e,e0=!1}}return null}var sl=[],ll=0,Vd=null,Gd=0,fi=[],di=0,is=null,Sa=1,ka="";function Bo(t,e){sl[ll++]=Gd,sl[ll++]=Vd,Vd=t,Gd=e}function Fw(t,e,r){fi[di++]=Sa,fi[di++]=ka,fi[di++]=is,is=t;var n=Sa;t=ka;var i=32-Di(n)-1;n&=~(1<<i),r+=1;var a=32-Di(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Sa=1<<32-Di(e)+i|r<<i|n,ka=a+t}else Sa=1<<a|r<<i|n,ka=t}function Hg(t){t.return!==null&&(Bo(t,1),Fw(t,1,0))}function Wg(t){for(;t===Vd;)Vd=sl[--ll],sl[ll]=null,Gd=sl[--ll],sl[ll]=null;for(;t===is;)is=fi[--di],fi[di]=null,ka=fi[--di],fi[di]=null,Sa=fi[--di],fi[di]=null}var Qn=null,Jn=null,tr=!1,Ii=null;function Bw(t,e){var r=hi(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function ty(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qn=t,Jn=ho(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qn=t,Jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=is!==null?{id:Sa,overflow:ka}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=hi(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Qn=t,Jn=null,!0):!1;default:return!1}}function pm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mm(t){if(tr){var e=Jn;if(e){var r=e;if(!ty(t,e)){if(pm(t))throw Error(Be(418));e=ho(r.nextSibling);var n=Qn;e&&ty(t,e)?Bw(n,r):(t.flags=t.flags&-4097|2,tr=!1,Qn=t)}}else{if(pm(t))throw Error(Be(418));t.flags=t.flags&-4097|2,tr=!1,Qn=t}}}function ry(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qn=t}function qf(t){if(t!==Qn)return!1;if(!tr)return ry(t),tr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cm(t.type,t.memoizedProps)),e&&(e=Jn)){if(pm(t))throw qw(),Error(Be(418));for(;e;)Bw(t,e),e=ho(e.nextSibling)}if(ry(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Be(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Jn=ho(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Jn=null}}else Jn=Qn?ho(t.stateNode.nextSibling):null;return!0}function qw(){for(var t=Jn;t;)t=ho(t.nextSibling)}function El(){Jn=Qn=null,tr=!1}function Vg(t){Ii===null?Ii=[t]:Ii.push(t)}var YS=Ca.ReactCurrentBatchConfig;function Ou(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Be(309));var n=r.stateNode}if(!n)throw Error(Be(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Be(284));if(!r._owner)throw Error(Be(290,t))}return t}function Uf(t,e){throw t=Object.prototype.toString.call(e),Error(Be(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ny(t){var e=t._init;return e(t._payload)}function Uw(t){function e(m,g){if(t){var b=m.deletions;b===null?(m.deletions=[g],m.flags|=16):b.push(g)}}function r(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function n(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function i(m,g){return m=vo(m,g),m.index=0,m.sibling=null,m}function a(m,g,b){return m.index=b,t?(b=m.alternate,b!==null?(b=b.index,b<g?(m.flags|=2,g):b):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function s(m,g,b,S){return g===null||g.tag!==6?(g=s0(b,m.mode,S),g.return=m,g):(g=i(g,b),g.return=m,g)}function l(m,g,b,S){var E=b.type;return E===tl?h(m,g,b.props.children,S,b.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===to&&ny(E)===g.type)?(S=i(g,b.props),S.ref=Ou(m,g,b),S.return=m,S):(S=Sd(b.type,b.key,b.props,null,m.mode,S),S.ref=Ou(m,g,b),S.return=m,S)}function u(m,g,b,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=l0(b,m.mode,S),g.return=m,g):(g=i(g,b.children||[]),g.return=m,g)}function h(m,g,b,S,E){return g===null||g.tag!==7?(g=ts(b,m.mode,S,E),g.return=m,g):(g=i(g,b),g.return=m,g)}function f(m,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=s0(""+g,m.mode,b),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Lf:return b=Sd(g.type,g.key,g.props,null,m.mode,b),b.ref=Ou(m,null,g),b.return=m,b;case el:return g=l0(g,m.mode,b),g.return=m,g;case to:var S=g._init;return f(m,S(g._payload),b)}if(Vu(g)||ku(g))return g=ts(g,m.mode,b,null),g.return=m,g;Uf(m,g)}return null}function d(m,g,b,S){var E=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:s(m,g,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Lf:return b.key===E?l(m,g,b,S):null;case el:return b.key===E?u(m,g,b,S):null;case to:return E=b._init,d(m,g,E(b._payload),S)}if(Vu(b)||ku(b))return E!==null?null:h(m,g,b,S,null);Uf(m,b)}return null}function c(m,g,b,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(b)||null,s(g,m,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Lf:return m=m.get(S.key===null?b:S.key)||null,l(g,m,S,E);case el:return m=m.get(S.key===null?b:S.key)||null,u(g,m,S,E);case to:var I=S._init;return c(m,g,b,I(S._payload),E)}if(Vu(S)||ku(S))return m=m.get(b)||null,h(g,m,S,E,null);Uf(g,S)}return null}function y(m,g,b,S){for(var E=null,I=null,L=g,O=g=0,M=null;L!==null&&O<b.length;O++){L.index>O?(M=L,L=null):M=L.sibling;var T=d(m,L,b[O],S);if(T===null){L===null&&(L=M);break}t&&L&&T.alternate===null&&e(m,L),g=a(T,g,O),I===null?E=T:I.sibling=T,I=T,L=M}if(O===b.length)return r(m,L),tr&&Bo(m,O),E;if(L===null){for(;O<b.length;O++)L=f(m,b[O],S),L!==null&&(g=a(L,g,O),I===null?E=L:I.sibling=L,I=L);return tr&&Bo(m,O),E}for(L=n(m,L);O<b.length;O++)M=c(L,m,O,b[O],S),M!==null&&(t&&M.alternate!==null&&L.delete(M.key===null?O:M.key),g=a(M,g,O),I===null?E=M:I.sibling=M,I=M);return t&&L.forEach(function(k){return e(m,k)}),tr&&Bo(m,O),E}function v(m,g,b,S){var E=ku(b);if(typeof E!="function")throw Error(Be(150));if(b=E.call(b),b==null)throw Error(Be(151));for(var I=E=null,L=g,O=g=0,M=null,T=b.next();L!==null&&!T.done;O++,T=b.next()){L.index>O?(M=L,L=null):M=L.sibling;var k=d(m,L,T.value,S);if(k===null){L===null&&(L=M);break}t&&L&&k.alternate===null&&e(m,L),g=a(k,g,O),I===null?E=k:I.sibling=k,I=k,L=M}if(T.done)return r(m,L),tr&&Bo(m,O),E;if(L===null){for(;!T.done;O++,T=b.next())T=f(m,T.value,S),T!==null&&(g=a(T,g,O),I===null?E=T:I.sibling=T,I=T);return tr&&Bo(m,O),E}for(L=n(m,L);!T.done;O++,T=b.next())T=c(L,m,O,T.value,S),T!==null&&(t&&T.alternate!==null&&L.delete(T.key===null?O:T.key),g=a(T,g,O),I===null?E=T:I.sibling=T,I=T);return t&&L.forEach(function(A){return e(m,A)}),tr&&Bo(m,O),E}function w(m,g,b,S){if(typeof b=="object"&&b!==null&&b.type===tl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Lf:e:{for(var E=b.key,I=g;I!==null;){if(I.key===E){if(E=b.type,E===tl){if(I.tag===7){r(m,I.sibling),g=i(I,b.props.children),g.return=m,m=g;break e}}else if(I.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===to&&ny(E)===I.type){r(m,I.sibling),g=i(I,b.props),g.ref=Ou(m,I,b),g.return=m,m=g;break e}r(m,I);break}else e(m,I);I=I.sibling}b.type===tl?(g=ts(b.props.children,m.mode,S,b.key),g.return=m,m=g):(S=Sd(b.type,b.key,b.props,null,m.mode,S),S.ref=Ou(m,g,b),S.return=m,m=S)}return o(m);case el:e:{for(I=b.key;g!==null;){if(g.key===I)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){r(m,g.sibling),g=i(g,b.children||[]),g.return=m,m=g;break e}else{r(m,g);break}else e(m,g);g=g.sibling}g=l0(b,m.mode,S),g.return=m,m=g}return o(m);case to:return I=b._init,w(m,g,I(b._payload),S)}if(Vu(b))return y(m,g,b,S);if(ku(b))return v(m,g,b,S);Uf(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(r(m,g.sibling),g=i(g,b),g.return=m,m=g):(r(m,g),g=s0(b,m.mode,S),g.return=m,m=g),o(m)):r(m,g)}return w}var Al=Uw(!0),zw=Uw(!1),Kd=So(null),Yd=null,ul=null,Gg=null;function Kg(){Gg=ul=Yd=null}function Yg(t){var e=Kd.current;Qt(Kd),t._currentValue=e}function gm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function vl(t,e){Yd=t,Gg=ul=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pn=!0),t.firstContext=null)}function mi(t){var e=t._currentValue;if(Gg!==t)if(t={context:t,memoizedValue:e,next:null},ul===null){if(Yd===null)throw Error(Be(308));ul=t,Yd.dependencies={lanes:0,firstContext:t}}else ul=ul.next=t;return e}var Xo=null;function Jg(t){Xo===null?Xo=[t]:Xo.push(t)}function $w(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Jg(e)):(r.next=i.next,i.next=r),e.interleaved=r,Oa(t,n)}function Oa(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ro=!1;function Xg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Na(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function po(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,kt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Oa(t,r)}return i=n.interleaved,i===null?(e.next=e,Jg(n)):(e.next=i.next,i.next=e),n.interleaved=e,Oa(t,r)}function vd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Dg(t,r)}}function iy(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Jd(t,e,r,n){var i=t.updateQueue;ro=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?a=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,s=h.lastBaseUpdate,s!==o&&(s===null?h.firstBaseUpdate=u:s.next=u,h.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;o=0,h=u=l=null,s=a;do{var d=s.lane,c=s.eventTime;if((n&d)===d){h!==null&&(h=h.next={eventTime:c,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=t,v=s;switch(d=e,c=r,v.tag){case 1:if(y=v.payload,typeof y=="function"){f=y.call(c,f,d);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,d=typeof y=="function"?y.call(c,f,d):y,d==null)break e;f=sr({},f,d);break e;case 2:ro=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else c={eventTime:c,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},h===null?(u=h=c,l=f):h=h.next=c,o|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);os|=o,t.lanes=o,t.memoizedState=f}}function ay(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Be(191,i));i.call(n)}}}var Dc={},ta=So(Dc),wc=So(Dc),bc=So(Dc);function Qo(t){if(t===Dc)throw Error(Be(174));return t}function Qg(t,e){switch(Kt(bc,e),Kt(wc,t),Kt(ta,Dc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:J0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=J0(e,t)}Qt(ta),Kt(ta,e)}function jl(){Qt(ta),Qt(wc),Qt(bc)}function Ww(t){Qo(bc.current);var e=Qo(ta.current),r=J0(e,t.type);e!==r&&(Kt(wc,t),Kt(ta,r))}function Zg(t){wc.current===t&&(Qt(ta),Qt(wc))}var ar=So(0);function Xd(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var t0=[];function e1(){for(var t=0;t<t0.length;t++)t0[t]._workInProgressVersionPrimary=null;t0.length=0}var yd=Ca.ReactCurrentDispatcher,r0=Ca.ReactCurrentBatchConfig,as=0,or=null,Pr=null,Dr=null,Qd=!1,tc=!1,xc=0,JS=0;function Xr(){throw Error(Be(321))}function t1(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Fi(t[r],e[r]))return!1;return!0}function r1(t,e,r,n,i,a){if(as=a,or=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yd.current=t===null||t.memoizedState===null?ek:tk,t=r(n,i),tc){a=0;do{if(tc=!1,xc=0,25<=a)throw Error(Be(301));a+=1,Dr=Pr=null,e.updateQueue=null,yd.current=rk,t=r(n,i)}while(tc)}if(yd.current=Zd,e=Pr!==null&&Pr.next!==null,as=0,Dr=Pr=or=null,Qd=!1,e)throw Error(Be(300));return t}function n1(){var t=xc!==0;return xc=0,t}function Xi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dr===null?or.memoizedState=Dr=t:Dr=Dr.next=t,Dr}function gi(){if(Pr===null){var t=or.alternate;t=t!==null?t.memoizedState:null}else t=Pr.next;var e=Dr===null?or.memoizedState:Dr.next;if(e!==null)Dr=e,Pr=t;else{if(t===null)throw Error(Be(310));Pr=t,t={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},Dr===null?or.memoizedState=Dr=t:Dr=Dr.next=t}return Dr}function _c(t,e){return typeof e=="function"?e(t):e}function n0(t){var e=gi(),r=e.queue;if(r===null)throw Error(Be(311));r.lastRenderedReducer=t;var n=Pr,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var s=o=null,l=null,u=a;do{var h=u.lane;if((as&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=f,o=n):l=l.next=f,or.lanes|=h,os|=h}u=u.next}while(u!==null&&u!==a);l===null?o=n:l.next=s,Fi(n,e.memoizedState)||(Pn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,or.lanes|=a,os|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function i0(t){var e=gi(),r=e.queue;if(r===null)throw Error(Be(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Fi(a,e.memoizedState)||(Pn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function Vw(){}function Gw(t,e){var r=or,n=gi(),i=e(),a=!Fi(n.memoizedState,i);if(a&&(n.memoizedState=i,Pn=!0),n=n.queue,i1(Jw.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Dr!==null&&Dr.memoizedState.tag&1){if(r.flags|=2048,Sc(9,Yw.bind(null,r,n,i,e),void 0,null),Fr===null)throw Error(Be(349));as&30||Kw(r,e,i)}return i}function Kw(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Yw(t,e,r,n){e.value=r,e.getSnapshot=n,Xw(e)&&Qw(t)}function Jw(t,e,r){return r(function(){Xw(e)&&Qw(t)})}function Xw(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Fi(t,r)}catch{return!0}}function Qw(t){var e=Oa(t,1);e!==null&&Mi(e,t,1,-1)}function oy(t){var e=Xi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_c,lastRenderedState:t},e.queue=t,t=t.dispatch=ZS.bind(null,or,t),[e.memoizedState,t]}function Sc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Zw(){return gi().memoizedState}function wd(t,e,r,n){var i=Xi();or.flags|=t,i.memoizedState=Sc(1|e,r,void 0,n===void 0?null:n)}function Ah(t,e,r,n){var i=gi();n=n===void 0?null:n;var a=void 0;if(Pr!==null){var o=Pr.memoizedState;if(a=o.destroy,n!==null&&t1(n,o.deps)){i.memoizedState=Sc(e,r,a,n);return}}or.flags|=t,i.memoizedState=Sc(1|e,r,a,n)}function sy(t,e){return wd(8390656,8,t,e)}function i1(t,e){return Ah(2048,8,t,e)}function eb(t,e){return Ah(4,2,t,e)}function tb(t,e){return Ah(4,4,t,e)}function rb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function nb(t,e,r){return r=r!=null?r.concat([t]):null,Ah(4,4,rb.bind(null,e,t),r)}function a1(){}function ib(t,e){var r=gi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&t1(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function ab(t,e){var r=gi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&t1(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function ob(t,e,r){return as&21?(Fi(r,e)||(r=fw(),or.lanes|=r,os|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pn=!0),t.memoizedState=r)}function XS(t,e){var r=Ct;Ct=r!==0&&4>r?r:4,t(!0);var n=r0.transition;r0.transition={};try{t(!1),e()}finally{Ct=r,r0.transition=n}}function sb(){return gi().memoizedState}function QS(t,e,r){var n=go(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},lb(t))ub(e,r);else if(r=$w(t,e,r,n),r!==null){var i=pn();Mi(r,t,n,i),cb(r,e,n)}}function ZS(t,e,r){var n=go(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(lb(t))ub(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,r);if(i.hasEagerState=!0,i.eagerState=s,Fi(s,o)){var l=e.interleaved;l===null?(i.next=i,Jg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=$w(t,e,i,n),r!==null&&(i=pn(),Mi(r,t,n,i),cb(r,e,n))}}function lb(t){var e=t.alternate;return t===or||e!==null&&e===or}function ub(t,e){tc=Qd=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function cb(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Dg(t,r)}}var Zd={readContext:mi,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useInsertionEffect:Xr,useLayoutEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useDeferredValue:Xr,useTransition:Xr,useMutableSource:Xr,useSyncExternalStore:Xr,useId:Xr,unstable_isNewReconciler:!1},ek={readContext:mi,useCallback:function(t,e){return Xi().memoizedState=[t,e===void 0?null:e],t},useContext:mi,useEffect:sy,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,wd(4194308,4,rb.bind(null,e,t),r)},useLayoutEffect:function(t,e){return wd(4194308,4,t,e)},useInsertionEffect:function(t,e){return wd(4,2,t,e)},useMemo:function(t,e){var r=Xi();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Xi();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=QS.bind(null,or,t),[n.memoizedState,t]},useRef:function(t){var e=Xi();return t={current:t},e.memoizedState=t},useState:oy,useDebugValue:a1,useDeferredValue:function(t){return Xi().memoizedState=t},useTransition:function(){var t=oy(!1),e=t[0];return t=XS.bind(null,t[1]),Xi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=or,i=Xi();if(tr){if(r===void 0)throw Error(Be(407));r=r()}else{if(r=e(),Fr===null)throw Error(Be(349));as&30||Kw(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,sy(Jw.bind(null,n,a,t),[t]),n.flags|=2048,Sc(9,Yw.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Xi(),e=Fr.identifierPrefix;if(tr){var r=ka,n=Sa;r=(n&~(1<<32-Di(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=xc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=JS++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tk={readContext:mi,useCallback:ib,useContext:mi,useEffect:i1,useImperativeHandle:nb,useInsertionEffect:eb,useLayoutEffect:tb,useMemo:ab,useReducer:n0,useRef:Zw,useState:function(){return n0(_c)},useDebugValue:a1,useDeferredValue:function(t){var e=gi();return ob(e,Pr.memoizedState,t)},useTransition:function(){var t=n0(_c)[0],e=gi().memoizedState;return[t,e]},useMutableSource:Vw,useSyncExternalStore:Gw,useId:sb,unstable_isNewReconciler:!1},rk={readContext:mi,useCallback:ib,useContext:mi,useEffect:i1,useImperativeHandle:nb,useInsertionEffect:eb,useLayoutEffect:tb,useMemo:ab,useReducer:i0,useRef:Zw,useState:function(){return i0(_c)},useDebugValue:a1,useDeferredValue:function(t){var e=gi();return Pr===null?e.memoizedState=t:ob(e,Pr.memoizedState,t)},useTransition:function(){var t=i0(_c)[0],e=gi().memoizedState;return[t,e]},useMutableSource:Vw,useSyncExternalStore:Gw,useId:sb,unstable_isNewReconciler:!1};function Li(t,e){if(t&&t.defaultProps){e=sr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function vm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:sr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var jh={isMounted:function(t){return(t=t._reactInternals)?ds(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=pn(),i=go(t),a=Na(n,i);a.payload=e,r!=null&&(a.callback=r),e=po(t,a,i),e!==null&&(Mi(e,t,i,n),vd(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=pn(),i=go(t),a=Na(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=po(t,a,i),e!==null&&(Mi(e,t,i,n),vd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=pn(),n=go(t),i=Na(r,n);i.tag=2,e!=null&&(i.callback=e),e=po(t,i,n),e!==null&&(Mi(e,t,n,r),vd(e,t,n))}};function ly(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!mc(r,n)||!mc(i,a):!0}function fb(t,e,r){var n=!1,i=wo,a=e.contextType;return typeof a=="object"&&a!==null?a=mi(a):(i=Cn(e)?ns:on.current,n=e.contextTypes,a=(n=n!=null)?Nl(t,i):wo),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jh,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function uy(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&jh.enqueueReplaceState(e,e.state,null)}function ym(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Xg(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=mi(a):(a=Cn(e)?ns:on.current,i.context=Nl(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(vm(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&jh.enqueueReplaceState(i,i.state,null),Jd(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ol(t,e){try{var r="",n=e;do r+=L3(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function a0(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function wm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var nk=typeof WeakMap=="function"?WeakMap:Map;function db(t,e,r){r=Na(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){th||(th=!0,Om=n),wm(t,e)},r}function hb(t,e,r){r=Na(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){wm(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){wm(t,e),typeof n!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function cy(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new nk;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=vk.bind(null,t,e,r),e.then(t,t))}function fy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dy(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Na(-1,1),e.tag=2,po(r,e,1))),r.lanes|=1),t)}var ik=Ca.ReactCurrentOwner,Pn=!1;function dn(t,e,r,n){e.child=t===null?zw(e,null,r,n):Al(e,t.child,r,n)}function hy(t,e,r,n,i){r=r.render;var a=e.ref;return vl(e,i),n=r1(t,e,r,n,a,i),r=n1(),t!==null&&!Pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,La(t,e,i)):(tr&&r&&Hg(e),e.flags|=1,dn(t,e,n,i),e.child)}function py(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!h1(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,pb(t,e,a,n,i)):(t=Sd(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:mc,r(o,n)&&t.ref===e.ref)return La(t,e,i)}return e.flags|=1,t=vo(a,n),t.ref=e.ref,t.return=e,e.child=t}function pb(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(mc(a,n)&&t.ref===e.ref)if(Pn=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(Pn=!0);else return e.lanes=t.lanes,La(t,e,i)}return bm(t,e,r,n,i)}function mb(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(fl,Vn),Vn|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Kt(fl,Vn),Vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Kt(fl,Vn),Vn|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,Kt(fl,Vn),Vn|=n;return dn(t,e,i,r),e.child}function gb(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function bm(t,e,r,n,i){var a=Cn(r)?ns:on.current;return a=Nl(e,a),vl(e,i),r=r1(t,e,r,n,a,i),n=n1(),t!==null&&!Pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,La(t,e,i)):(tr&&n&&Hg(e),e.flags|=1,dn(t,e,r,i),e.child)}function my(t,e,r,n,i){if(Cn(r)){var a=!0;Wd(e)}else a=!1;if(vl(e,i),e.stateNode===null)bd(t,e),fb(e,r,n),ym(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=mi(u):(u=Cn(r)?ns:on.current,u=Nl(e,u));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==u)&&uy(e,o,n,u),ro=!1;var d=e.memoizedState;o.state=d,Jd(e,n,o,i),l=e.memoizedState,s!==n||d!==l||Tn.current||ro?(typeof h=="function"&&(vm(e,r,h,n),l=e.memoizedState),(s=ro||ly(e,r,s,n,d,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Hw(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:Li(e.type,s),o.props=u,f=e.pendingProps,d=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=mi(l):(l=Cn(r)?ns:on.current,l=Nl(e,l));var c=r.getDerivedStateFromProps;(h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||d!==l)&&uy(e,o,n,l),ro=!1,d=e.memoizedState,o.state=d,Jd(e,n,o,i);var y=e.memoizedState;s!==f||d!==y||Tn.current||ro?(typeof c=="function"&&(vm(e,r,c,n),y=e.memoizedState),(u=ro||ly(e,r,u,n,d,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),o.props=n,o.state=y,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return xm(t,e,r,n,a,i)}function xm(t,e,r,n,i,a){gb(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&ey(e,r,!1),La(t,e,a);n=e.stateNode,ik.current=e;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Al(e,t.child,null,a),e.child=Al(e,null,s,a)):dn(t,e,s,a),e.memoizedState=n.state,i&&ey(e,r,!0),e.child}function vb(t){var e=t.stateNode;e.pendingContext?Zv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zv(t,e.context,!1),Qg(t,e.containerInfo)}function gy(t,e,r,n,i){return El(),Vg(i),e.flags|=256,dn(t,e,r,n),e.child}var _m={dehydrated:null,treeContext:null,retryLane:0};function Sm(t){return{baseLanes:t,cachePool:null,transitions:null}}function yb(t,e,r){var n=e.pendingProps,i=ar.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Kt(ar,i&1),t===null)return mm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Ph(o,n,0,null),t=ts(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Sm(r),e.memoizedState=_m,t):o1(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return ak(t,e,o,n,s,i,r);if(a){a=n.fallback,o=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=vo(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=vo(s,a):(a=ts(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?Sm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=_m,n}return a=t.child,t=a.sibling,n=vo(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function o1(t,e){return e=Ph({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zf(t,e,r,n){return n!==null&&Vg(n),Al(e,t.child,null,r),t=o1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ak(t,e,r,n,i,a,o){if(r)return e.flags&256?(e.flags&=-257,n=a0(Error(Be(422))),zf(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=Ph({mode:"visible",children:n.children},i,0,null),a=ts(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Al(e,t.child,null,o),e.child.memoizedState=Sm(o),e.memoizedState=_m,a);if(!(e.mode&1))return zf(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,a=Error(Be(419)),n=a0(a,n,void 0),zf(t,e,o,n)}if(s=(o&t.childLanes)!==0,Pn||s){if(n=Fr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Oa(t,i),Mi(n,t,i,-1))}return d1(),n=a0(Error(Be(421))),zf(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=yk.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Jn=ho(i.nextSibling),Qn=e,tr=!0,Ii=null,t!==null&&(fi[di++]=Sa,fi[di++]=ka,fi[di++]=is,Sa=t.id,ka=t.overflow,is=e),e=o1(e,n.children),e.flags|=4096,e)}function vy(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),gm(t.return,e,r)}function o0(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function wb(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(dn(t,e,n.children,r),n=ar.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vy(t,r,e);else if(t.tag===19)vy(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Kt(ar,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Xd(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),o0(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Xd(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}o0(e,!0,r,null,a);break;case"together":o0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function La(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),os|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Be(153));if(e.child!==null){for(t=e.child,r=vo(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=vo(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function ok(t,e,r){switch(e.tag){case 3:vb(e),El();break;case 5:Ww(e);break;case 1:Cn(e.type)&&Wd(e);break;case 4:Qg(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Kt(Kd,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Kt(ar,ar.current&1),e.flags|=128,null):r&e.child.childLanes?yb(t,e,r):(Kt(ar,ar.current&1),t=La(t,e,r),t!==null?t.sibling:null);Kt(ar,ar.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return wb(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Kt(ar,ar.current),n)break;return null;case 22:case 23:return e.lanes=0,mb(t,e,r)}return La(t,e,r)}var bb,km,xb,_b;bb=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};km=function(){};xb=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Qo(ta.current);var a=null;switch(r){case"input":i=V0(t,i),n=V0(t,n),a=[];break;case"select":i=sr({},i,{value:void 0}),n=sr({},n,{value:void 0}),a=[];break;case"textarea":i=Y0(t,i),n=Y0(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=$d)}X0(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(lc.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(s=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(a||(a=[]),a.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(lc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Yt("scroll",t),a||s===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};_b=function(t,e,r,n){r!==n&&(e.flags|=4)};function Lu(t,e){if(!tr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Qr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function sk(t,e,r){var n=e.pendingProps;switch(Wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(e),null;case 1:return Cn(e.type)&&Hd(),Qr(e),null;case 3:return n=e.stateNode,jl(),Qt(Tn),Qt(on),e1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(qf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ii!==null&&(Tm(Ii),Ii=null))),km(t,e),Qr(e),null;case 5:Zg(e);var i=Qo(bc.current);if(r=e.type,t!==null&&e.stateNode!=null)xb(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Be(166));return Qr(e),null}if(t=Qo(ta.current),qf(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Qi]=e,n[yc]=a,t=(e.mode&1)!==0,r){case"dialog":Yt("cancel",n),Yt("close",n);break;case"iframe":case"object":case"embed":Yt("load",n);break;case"video":case"audio":for(i=0;i<Ku.length;i++)Yt(Ku[i],n);break;case"source":Yt("error",n);break;case"img":case"image":case"link":Yt("error",n),Yt("load",n);break;case"details":Yt("toggle",n);break;case"input":Ev(n,a),Yt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Yt("invalid",n);break;case"textarea":jv(n,a),Yt("invalid",n)}X0(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?n.textContent!==s&&(a.suppressHydrationWarning!==!0&&Bf(n.textContent,s,t),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&Bf(n.textContent,s,t),i=["children",""+s]):lc.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Yt("scroll",n)}switch(r){case"input":Pf(n),Av(n,a,!0);break;case"textarea":Pf(n),Ov(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=$d)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=J5(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Qi]=e,t[yc]=n,bb(t,e,!1,!1),e.stateNode=t;e:{switch(o=Q0(r,n),r){case"dialog":Yt("cancel",t),Yt("close",t),i=n;break;case"iframe":case"object":case"embed":Yt("load",t),i=n;break;case"video":case"audio":for(i=0;i<Ku.length;i++)Yt(Ku[i],t);i=n;break;case"source":Yt("error",t),i=n;break;case"img":case"image":case"link":Yt("error",t),Yt("load",t),i=n;break;case"details":Yt("toggle",t),i=n;break;case"input":Ev(t,n),i=V0(t,n),Yt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=sr({},n,{value:void 0}),Yt("invalid",t);break;case"textarea":jv(t,n),i=Y0(t,n),Yt("invalid",t);break;default:i=n}X0(r,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?Z5(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&X5(t,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&uc(t,l):typeof l=="number"&&uc(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(lc.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Yt("scroll",t):l!=null&&Lg(t,a,l,o))}switch(r){case"input":Pf(t),Av(t,n,!1);break;case"textarea":Pf(t),Ov(t);break;case"option":n.value!=null&&t.setAttribute("value",""+yo(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?hl(t,!!n.multiple,a,!1):n.defaultValue!=null&&hl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=$d)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qr(e),null;case 6:if(t&&e.stateNode!=null)_b(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Be(166));if(r=Qo(bc.current),Qo(ta.current),qf(e)){if(n=e.stateNode,r=e.memoizedProps,n[Qi]=e,(a=n.nodeValue!==r)&&(t=Qn,t!==null))switch(t.tag){case 3:Bf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bf(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Qi]=e,e.stateNode=n}return Qr(e),null;case 13:if(Qt(ar),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tr&&Jn!==null&&e.mode&1&&!(e.flags&128))qw(),El(),e.flags|=98560,a=!1;else if(a=qf(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(Be(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Be(317));a[Qi]=e}else El(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qr(e),a=!1}else Ii!==null&&(Tm(Ii),Ii=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ar.current&1?Tr===0&&(Tr=3):d1())),e.updateQueue!==null&&(e.flags|=4),Qr(e),null);case 4:return jl(),km(t,e),t===null&&gc(e.stateNode.containerInfo),Qr(e),null;case 10:return Yg(e.type._context),Qr(e),null;case 17:return Cn(e.type)&&Hd(),Qr(e),null;case 19:if(Qt(ar),a=e.memoizedState,a===null)return Qr(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Lu(a,!1);else{if(Tr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Xd(t),o!==null){for(e.flags|=128,Lu(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Kt(ar,ar.current&1|2),e.child}t=t.sibling}a.tail!==null&&yr()>Ll&&(e.flags|=128,n=!0,Lu(a,!1),e.lanes=4194304)}else{if(!n)if(t=Xd(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Lu(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!tr)return Qr(e),null}else 2*yr()-a.renderingStartTime>Ll&&r!==1073741824&&(e.flags|=128,n=!0,Lu(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=yr(),e.sibling=null,r=ar.current,Kt(ar,n?r&1|2:r&1),e):(Qr(e),null);case 22:case 23:return f1(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Vn&1073741824&&(Qr(e),e.subtreeFlags&6&&(e.flags|=8192)):Qr(e),null;case 24:return null;case 25:return null}throw Error(Be(156,e.tag))}function lk(t,e){switch(Wg(e),e.tag){case 1:return Cn(e.type)&&Hd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return jl(),Qt(Tn),Qt(on),e1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Zg(e),null;case 13:if(Qt(ar),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Be(340));El()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qt(ar),null;case 4:return jl(),null;case 10:return Yg(e.type._context),null;case 22:case 23:return f1(),null;case 24:return null;default:return null}}var $f=!1,nn=!1,uk=typeof WeakSet=="function"?WeakSet:Set,Je=null;function cl(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){fr(t,e,n)}else r.current=null}function Nm(t,e,r){try{r()}catch(n){fr(t,e,n)}}var yy=!1;function ck(t,e){if(lm=qd,t=Aw(),$g(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,u=0,h=0,f=t,d=null;t:for(;;){for(var c;f!==r||i!==0&&f.nodeType!==3||(s=o+i),f!==a||n!==0&&f.nodeType!==3||(l=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(c=f.firstChild)!==null;)d=f,f=c;for(;;){if(f===t)break t;if(d===r&&++u===i&&(s=o),d===a&&++h===n&&(l=o),(c=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=c}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(um={focusedElem:t,selectionRange:r},qd=!1,Je=e;Je!==null;)if(e=Je,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Je=t;else for(;Je!==null;){e=Je;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,w=y.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:Li(e.type,v),w);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Be(163))}}catch(S){fr(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Je=t;break}Je=e.return}return y=yy,yy=!1,y}function rc(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Nm(e,r,a)}i=i.next}while(i!==n)}}function Oh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Em(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Sb(t){var e=t.alternate;e!==null&&(t.alternate=null,Sb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qi],delete e[yc],delete e[dm],delete e[VS],delete e[GS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kb(t){return t.tag===5||t.tag===3||t.tag===4}function wy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Am(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=$d));else if(n!==4&&(t=t.child,t!==null))for(Am(t,e,r),t=t.sibling;t!==null;)Am(t,e,r),t=t.sibling}function jm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(jm(t,e,r),t=t.sibling;t!==null;)jm(t,e,r),t=t.sibling}var $r=null,Ci=!1;function Ja(t,e,r){for(r=r.child;r!==null;)Nb(t,e,r),r=r.sibling}function Nb(t,e,r){if(ea&&typeof ea.onCommitFiberUnmount=="function")try{ea.onCommitFiberUnmount(xh,r)}catch{}switch(r.tag){case 5:nn||cl(r,e);case 6:var n=$r,i=Ci;$r=null,Ja(t,e,r),$r=n,Ci=i,$r!==null&&(Ci?(t=$r,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):$r.removeChild(r.stateNode));break;case 18:$r!==null&&(Ci?(t=$r,r=r.stateNode,t.nodeType===8?Zp(t.parentNode,r):t.nodeType===1&&Zp(t,r),hc(t)):Zp($r,r.stateNode));break;case 4:n=$r,i=Ci,$r=r.stateNode.containerInfo,Ci=!0,Ja(t,e,r),$r=n,Ci=i;break;case 0:case 11:case 14:case 15:if(!nn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Nm(r,e,o),i=i.next}while(i!==n)}Ja(t,e,r);break;case 1:if(!nn&&(cl(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){fr(r,e,s)}Ja(t,e,r);break;case 21:Ja(t,e,r);break;case 22:r.mode&1?(nn=(n=nn)||r.memoizedState!==null,Ja(t,e,r),nn=n):Ja(t,e,r);break;default:Ja(t,e,r)}}function by(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new uk),e.forEach(function(n){var i=wk.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Ni(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:$r=s.stateNode,Ci=!1;break e;case 3:$r=s.stateNode.containerInfo,Ci=!0;break e;case 4:$r=s.stateNode.containerInfo,Ci=!0;break e}s=s.return}if($r===null)throw Error(Be(160));Nb(a,o,i),$r=null,Ci=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){fr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Eb(e,t),e=e.sibling}function Eb(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ni(e,t),Ki(t),n&4){try{rc(3,t,t.return),Oh(3,t)}catch(v){fr(t,t.return,v)}try{rc(5,t,t.return)}catch(v){fr(t,t.return,v)}}break;case 1:Ni(e,t),Ki(t),n&512&&r!==null&&cl(r,r.return);break;case 5:if(Ni(e,t),Ki(t),n&512&&r!==null&&cl(r,r.return),t.flags&32){var i=t.stateNode;try{uc(i,"")}catch(v){fr(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&K5(i,a),Q0(s,o);var u=Q0(s,a);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?Z5(i,f):h==="dangerouslySetInnerHTML"?X5(i,f):h==="children"?uc(i,f):Lg(i,h,f,u)}switch(s){case"input":G0(i,a);break;case"textarea":Y5(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var c=a.value;c!=null?hl(i,!!a.multiple,c,!1):d!==!!a.multiple&&(a.defaultValue!=null?hl(i,!!a.multiple,a.defaultValue,!0):hl(i,!!a.multiple,a.multiple?[]:"",!1))}i[yc]=a}catch(v){fr(t,t.return,v)}}break;case 6:if(Ni(e,t),Ki(t),n&4){if(t.stateNode===null)throw Error(Be(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){fr(t,t.return,v)}}break;case 3:if(Ni(e,t),Ki(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{hc(e.containerInfo)}catch(v){fr(t,t.return,v)}break;case 4:Ni(e,t),Ki(t);break;case 13:Ni(e,t),Ki(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(u1=yr())),n&4&&by(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(nn=(u=nn)||h,Ni(e,t),nn=u):Ni(e,t),Ki(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Je=t,h=t.child;h!==null;){for(f=Je=h;Je!==null;){switch(d=Je,c=d.child,d.tag){case 0:case 11:case 14:case 15:rc(4,d,d.return);break;case 1:cl(d,d.return);var y=d.stateNode;if(typeof y.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){fr(n,r,v)}}break;case 5:cl(d,d.return);break;case 22:if(d.memoizedState!==null){_y(f);continue}}c!==null?(c.return=d,Je=c):_y(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=Q5("display",o))}catch(v){fr(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){fr(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ni(e,t),Ki(t),n&4&&by(t);break;case 21:break;default:Ni(e,t),Ki(t)}}function Ki(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(kb(r)){var n=r;break e}r=r.return}throw Error(Be(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(uc(i,""),n.flags&=-33);var a=wy(t);jm(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,s=wy(t);Am(t,s,o);break;default:throw Error(Be(161))}}catch(l){fr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fk(t,e,r){Je=t,Ab(t)}function Ab(t,e,r){for(var n=(t.mode&1)!==0;Je!==null;){var i=Je,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||$f;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||nn;s=$f;var u=nn;if($f=o,(nn=l)&&!u)for(Je=i;Je!==null;)o=Je,l=o.child,o.tag===22&&o.memoizedState!==null?Sy(i):l!==null?(l.return=o,Je=l):Sy(i);for(;a!==null;)Je=a,Ab(a),a=a.sibling;Je=i,$f=s,nn=u}xy(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Je=a):xy(t)}}function xy(t){for(;Je!==null;){var e=Je;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nn||Oh(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!nn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Li(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&ay(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ay(e,o,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&hc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Be(163))}nn||e.flags&512&&Em(e)}catch(d){fr(e,e.return,d)}}if(e===t){Je=null;break}if(r=e.sibling,r!==null){r.return=e.return,Je=r;break}Je=e.return}}function _y(t){for(;Je!==null;){var e=Je;if(e===t){Je=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Je=r;break}Je=e.return}}function Sy(t){for(;Je!==null;){var e=Je;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Oh(4,e)}catch(l){fr(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){fr(e,i,l)}}var a=e.return;try{Em(e)}catch(l){fr(e,a,l)}break;case 5:var o=e.return;try{Em(e)}catch(l){fr(e,o,l)}}}catch(l){fr(e,e.return,l)}if(e===t){Je=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Je=s;break}Je=e.return}}var dk=Math.ceil,eh=Ca.ReactCurrentDispatcher,s1=Ca.ReactCurrentOwner,pi=Ca.ReactCurrentBatchConfig,kt=0,Fr=null,jr=null,Hr=0,Vn=0,fl=So(0),Tr=0,kc=null,os=0,Lh=0,l1=0,nc=null,Ln=null,u1=0,Ll=1/0,ba=null,th=!1,Om=null,mo=null,Hf=!1,so=null,rh=0,ic=0,Lm=null,xd=-1,_d=0;function pn(){return kt&6?yr():xd!==-1?xd:xd=yr()}function go(t){return t.mode&1?kt&2&&Hr!==0?Hr&-Hr:YS.transition!==null?(_d===0&&(_d=fw()),_d):(t=Ct,t!==0||(t=window.event,t=t===void 0?16:yw(t.type)),t):1}function Mi(t,e,r,n){if(50<ic)throw ic=0,Lm=null,Error(Be(185));Cc(t,r,n),(!(kt&2)||t!==Fr)&&(t===Fr&&(!(kt&2)&&(Lh|=r),Tr===4&&io(t,Hr)),Rn(t,n),r===1&&kt===0&&!(e.mode&1)&&(Ll=yr()+500,Eh&&ko()))}function Rn(t,e){var r=t.callbackNode;Y3(t,e);var n=Bd(t,t===Fr?Hr:0);if(n===0)r!==null&&Tv(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Tv(r),e===1)t.tag===0?KS(ky.bind(null,t)):Mw(ky.bind(null,t)),HS(function(){!(kt&6)&&ko()}),r=null;else{switch(dw(n)){case 1:r=Ig;break;case 4:r=uw;break;case 16:r=Fd;break;case 536870912:r=cw;break;default:r=Fd}r=Ib(r,jb.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function jb(t,e){if(xd=-1,_d=0,kt&6)throw Error(Be(327));var r=t.callbackNode;if(yl()&&t.callbackNode!==r)return null;var n=Bd(t,t===Fr?Hr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=nh(t,n);else{e=n;var i=kt;kt|=2;var a=Lb();(Fr!==t||Hr!==e)&&(ba=null,Ll=yr()+500,es(t,e));do try{mk();break}catch(s){Ob(t,s)}while(!0);Kg(),eh.current=a,kt=i,jr!==null?e=0:(Fr=null,Hr=0,e=Tr)}if(e!==0){if(e===2&&(i=nm(t),i!==0&&(n=i,e=Pm(t,i))),e===1)throw r=kc,es(t,0),io(t,n),Rn(t,yr()),r;if(e===6)io(t,n);else{if(i=t.current.alternate,!(n&30)&&!hk(i)&&(e=nh(t,n),e===2&&(a=nm(t),a!==0&&(n=a,e=Pm(t,a))),e===1))throw r=kc,es(t,0),io(t,n),Rn(t,yr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Be(345));case 2:qo(t,Ln,ba);break;case 3:if(io(t,n),(n&130023424)===n&&(e=u1+500-yr(),10<e)){if(Bd(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){pn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=fm(qo.bind(null,t,Ln,ba),e);break}qo(t,Ln,ba);break;case 4:if(io(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Di(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=yr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*dk(n/1960))-n,10<n){t.timeoutHandle=fm(qo.bind(null,t,Ln,ba),n);break}qo(t,Ln,ba);break;case 5:qo(t,Ln,ba);break;default:throw Error(Be(329))}}}return Rn(t,yr()),t.callbackNode===r?jb.bind(null,t):null}function Pm(t,e){var r=nc;return t.current.memoizedState.isDehydrated&&(es(t,e).flags|=256),t=nh(t,e),t!==2&&(e=Ln,Ln=r,e!==null&&Tm(e)),t}function Tm(t){Ln===null?Ln=t:Ln.push.apply(Ln,t)}function hk(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Fi(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function io(t,e){for(e&=~l1,e&=~Lh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Di(e),n=1<<r;t[r]=-1,e&=~n}}function ky(t){if(kt&6)throw Error(Be(327));yl();var e=Bd(t,0);if(!(e&1))return Rn(t,yr()),null;var r=nh(t,e);if(t.tag!==0&&r===2){var n=nm(t);n!==0&&(e=n,r=Pm(t,n))}if(r===1)throw r=kc,es(t,0),io(t,e),Rn(t,yr()),r;if(r===6)throw Error(Be(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qo(t,Ln,ba),Rn(t,yr()),null}function c1(t,e){var r=kt;kt|=1;try{return t(e)}finally{kt=r,kt===0&&(Ll=yr()+500,Eh&&ko())}}function ss(t){so!==null&&so.tag===0&&!(kt&6)&&yl();var e=kt;kt|=1;var r=pi.transition,n=Ct;try{if(pi.transition=null,Ct=1,t)return t()}finally{Ct=n,pi.transition=r,kt=e,!(kt&6)&&ko()}}function f1(){Vn=fl.current,Qt(fl)}function es(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,$S(r)),jr!==null)for(r=jr.return;r!==null;){var n=r;switch(Wg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Hd();break;case 3:jl(),Qt(Tn),Qt(on),e1();break;case 5:Zg(n);break;case 4:jl();break;case 13:Qt(ar);break;case 19:Qt(ar);break;case 10:Yg(n.type._context);break;case 22:case 23:f1()}r=r.return}if(Fr=t,jr=t=vo(t.current,null),Hr=Vn=e,Tr=0,kc=null,l1=Lh=os=0,Ln=nc=null,Xo!==null){for(e=0;e<Xo.length;e++)if(r=Xo[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}Xo=null}return t}function Ob(t,e){do{var r=jr;try{if(Kg(),yd.current=Zd,Qd){for(var n=or.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Qd=!1}if(as=0,Dr=Pr=or=null,tc=!1,xc=0,s1.current=null,r===null||r.return===null){Tr=1,kc=e,jr=null;break}e:{var a=t,o=r.return,s=r,l=e;if(e=Hr,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=s,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var c=fy(o);if(c!==null){c.flags&=-257,dy(c,o,s,a,e),c.mode&1&&cy(a,u,e),e=c,l=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){cy(a,u,e),d1();break e}l=Error(Be(426))}}else if(tr&&s.mode&1){var w=fy(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),dy(w,o,s,a,e),Vg(Ol(l,s));break e}}a=l=Ol(l,s),Tr!==4&&(Tr=2),nc===null?nc=[a]:nc.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var m=db(a,l,e);iy(a,m);break e;case 1:s=l;var g=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(mo===null||!mo.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var S=hb(a,s,e);iy(a,S);break e}}a=a.return}while(a!==null)}Tb(r)}catch(E){e=E,jr===r&&r!==null&&(jr=r=r.return);continue}break}while(!0)}function Lb(){var t=eh.current;return eh.current=Zd,t===null?Zd:t}function d1(){(Tr===0||Tr===3||Tr===2)&&(Tr=4),Fr===null||!(os&268435455)&&!(Lh&268435455)||io(Fr,Hr)}function nh(t,e){var r=kt;kt|=2;var n=Lb();(Fr!==t||Hr!==e)&&(ba=null,es(t,e));do try{pk();break}catch(i){Ob(t,i)}while(!0);if(Kg(),kt=r,eh.current=n,jr!==null)throw Error(Be(261));return Fr=null,Hr=0,Tr}function pk(){for(;jr!==null;)Pb(jr)}function mk(){for(;jr!==null&&!q3();)Pb(jr)}function Pb(t){var e=Rb(t.alternate,t,Vn);t.memoizedProps=t.pendingProps,e===null?Tb(t):jr=e,s1.current=null}function Tb(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=lk(r,e),r!==null){r.flags&=32767,jr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tr=6,jr=null;return}}else if(r=sk(r,e,Vn),r!==null){jr=r;return}if(e=e.sibling,e!==null){jr=e;return}jr=e=t}while(e!==null);Tr===0&&(Tr=5)}function qo(t,e,r){var n=Ct,i=pi.transition;try{pi.transition=null,Ct=1,gk(t,e,r,n)}finally{pi.transition=i,Ct=n}return null}function gk(t,e,r,n){do yl();while(so!==null);if(kt&6)throw Error(Be(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Be(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(J3(t,a),t===Fr&&(jr=Fr=null,Hr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hf||(Hf=!0,Ib(Fd,function(){return yl(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=pi.transition,pi.transition=null;var o=Ct;Ct=1;var s=kt;kt|=4,s1.current=null,ck(t,r),Eb(r,t),DS(um),qd=!!lm,um=lm=null,t.current=r,fk(r),U3(),kt=s,Ct=o,pi.transition=a}else t.current=r;if(Hf&&(Hf=!1,so=t,rh=i),a=t.pendingLanes,a===0&&(mo=null),H3(r.stateNode),Rn(t,yr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(th)throw th=!1,t=Om,Om=null,t;return rh&1&&t.tag!==0&&yl(),a=t.pendingLanes,a&1?t===Lm?ic++:(ic=0,Lm=t):ic=0,ko(),null}function yl(){if(so!==null){var t=dw(rh),e=pi.transition,r=Ct;try{if(pi.transition=null,Ct=16>t?16:t,so===null)var n=!1;else{if(t=so,so=null,rh=0,kt&6)throw Error(Be(331));var i=kt;for(kt|=4,Je=t.current;Je!==null;){var a=Je,o=a.child;if(Je.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Je=u;Je!==null;){var h=Je;switch(h.tag){case 0:case 11:case 15:rc(8,h,a)}var f=h.child;if(f!==null)f.return=h,Je=f;else for(;Je!==null;){h=Je;var d=h.sibling,c=h.return;if(Sb(h),h===u){Je=null;break}if(d!==null){d.return=c,Je=d;break}Je=c}}}var y=a.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}Je=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Je=o;else e:for(;Je!==null;){if(a=Je,a.flags&2048)switch(a.tag){case 0:case 11:case 15:rc(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,Je=m;break e}Je=a.return}}var g=t.current;for(Je=g;Je!==null;){o=Je;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Je=b;else e:for(o=g;Je!==null;){if(s=Je,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Oh(9,s)}}catch(E){fr(s,s.return,E)}if(s===o){Je=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,Je=S;break e}Je=s.return}}if(kt=i,ko(),ea&&typeof ea.onPostCommitFiberRoot=="function")try{ea.onPostCommitFiberRoot(xh,t)}catch{}n=!0}return n}finally{Ct=r,pi.transition=e}}return!1}function Ny(t,e,r){e=Ol(r,e),e=db(t,e,1),t=po(t,e,1),e=pn(),t!==null&&(Cc(t,1,e),Rn(t,e))}function fr(t,e,r){if(t.tag===3)Ny(t,t,r);else for(;e!==null;){if(e.tag===3){Ny(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(mo===null||!mo.has(n))){t=Ol(r,t),t=hb(e,t,1),e=po(e,t,1),t=pn(),e!==null&&(Cc(e,1,t),Rn(e,t));break}}e=e.return}}function vk(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=pn(),t.pingedLanes|=t.suspendedLanes&r,Fr===t&&(Hr&r)===r&&(Tr===4||Tr===3&&(Hr&130023424)===Hr&&500>yr()-u1?es(t,0):l1|=r),Rn(t,e)}function Cb(t,e){e===0&&(t.mode&1?(e=Rf,Rf<<=1,!(Rf&130023424)&&(Rf=4194304)):e=1);var r=pn();t=Oa(t,e),t!==null&&(Cc(t,e,r),Rn(t,r))}function yk(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Cb(t,r)}function wk(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Be(314))}n!==null&&n.delete(e),Cb(t,r)}var Rb;Rb=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tn.current)Pn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Pn=!1,ok(t,e,r);Pn=!!(t.flags&131072)}else Pn=!1,tr&&e.flags&1048576&&Fw(e,Gd,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;bd(t,e),t=e.pendingProps;var i=Nl(e,on.current);vl(e,r),i=r1(null,e,n,t,i,r);var a=n1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cn(n)?(a=!0,Wd(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Xg(e),i.updater=jh,e.stateNode=i,i._reactInternals=e,ym(e,n,t,r),e=xm(null,e,n,!0,a,r)):(e.tag=0,tr&&a&&Hg(e),dn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(bd(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=xk(n),t=Li(n,t),i){case 0:e=bm(null,e,n,t,r);break e;case 1:e=my(null,e,n,t,r);break e;case 11:e=hy(null,e,n,t,r);break e;case 14:e=py(null,e,n,Li(n.type,t),r);break e}throw Error(Be(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Li(n,i),bm(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Li(n,i),my(t,e,n,i,r);case 3:e:{if(vb(e),t===null)throw Error(Be(387));n=e.pendingProps,a=e.memoizedState,i=a.element,Hw(t,e),Jd(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Ol(Error(Be(423)),e),e=gy(t,e,n,r,i);break e}else if(n!==i){i=Ol(Error(Be(424)),e),e=gy(t,e,n,r,i);break e}else for(Jn=ho(e.stateNode.containerInfo.firstChild),Qn=e,tr=!0,Ii=null,r=zw(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(El(),n===i){e=La(t,e,r);break e}dn(t,e,n,r)}e=e.child}return e;case 5:return Ww(e),t===null&&mm(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,cm(n,i)?o=null:a!==null&&cm(n,a)&&(e.flags|=32),gb(t,e),dn(t,e,o,r),e.child;case 6:return t===null&&mm(e),null;case 13:return yb(t,e,r);case 4:return Qg(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Al(e,null,n,r):dn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Li(n,i),hy(t,e,n,i,r);case 7:return dn(t,e,e.pendingProps,r),e.child;case 8:return dn(t,e,e.pendingProps.children,r),e.child;case 12:return dn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Kt(Kd,n._currentValue),n._currentValue=o,a!==null)if(Fi(a.value,o)){if(a.children===i.children&&!Tn.current){e=La(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=Na(-1,r&-r),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),gm(a.return,r,e),s.lanes|=r;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Be(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),gm(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}dn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,vl(e,r),i=mi(i),n=n(i),e.flags|=1,dn(t,e,n,r),e.child;case 14:return n=e.type,i=Li(n,e.pendingProps),i=Li(n.type,i),py(t,e,n,i,r);case 15:return pb(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Li(n,i),bd(t,e),e.tag=1,Cn(n)?(t=!0,Wd(e)):t=!1,vl(e,r),fb(e,n,i),ym(e,n,i,r),xm(null,e,n,!0,t,r);case 19:return wb(t,e,r);case 22:return mb(t,e,r)}throw Error(Be(156,e.tag))};function Ib(t,e){return lw(t,e)}function bk(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hi(t,e,r,n){return new bk(t,e,r,n)}function h1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xk(t){if(typeof t=="function")return h1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tg)return 11;if(t===Cg)return 14}return 2}function vo(t,e){var r=t.alternate;return r===null?(r=hi(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Sd(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")h1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case tl:return ts(r.children,i,a,e);case Pg:o=8,i|=8;break;case z0:return t=hi(12,r,e,i|2),t.elementType=z0,t.lanes=a,t;case $0:return t=hi(13,r,e,i),t.elementType=$0,t.lanes=a,t;case H0:return t=hi(19,r,e,i),t.elementType=H0,t.lanes=a,t;case W5:return Ph(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $5:o=10;break e;case H5:o=9;break e;case Tg:o=11;break e;case Cg:o=14;break e;case to:o=16,n=null;break e}throw Error(Be(130,t==null?t:typeof t,""))}return e=hi(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function ts(t,e,r,n){return t=hi(7,t,n,e),t.lanes=r,t}function Ph(t,e,r,n){return t=hi(22,t,n,e),t.elementType=W5,t.lanes=r,t.stateNode={isHidden:!1},t}function s0(t,e,r){return t=hi(6,t,null,e),t.lanes=r,t}function l0(t,e,r){return e=hi(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _k(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zp(0),this.expirationTimes=zp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zp(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function p1(t,e,r,n,i,a,o,s,l){return t=new _k(t,e,r,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=hi(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xg(a),t}function Sk(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:el,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Db(t){if(!t)return wo;t=t._reactInternals;e:{if(ds(t)!==t||t.tag!==1)throw Error(Be(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Be(171))}if(t.tag===1){var r=t.type;if(Cn(r))return Dw(t,r,e)}return e}function Mb(t,e,r,n,i,a,o,s,l){return t=p1(r,n,!0,t,i,a,o,s,l),t.context=Db(null),r=t.current,n=pn(),i=go(r),a=Na(n,i),a.callback=e??null,po(r,a,i),t.current.lanes=i,Cc(t,i,n),Rn(t,n),t}function Th(t,e,r,n){var i=e.current,a=pn(),o=go(i);return r=Db(r),e.context===null?e.context=r:e.pendingContext=r,e=Na(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=po(i,e,o),t!==null&&(Mi(t,i,o,a),vd(t,i,o)),o}function ih(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ey(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function m1(t,e){Ey(t,e),(t=t.alternate)&&Ey(t,e)}function kk(){return null}var Fb=typeof reportError=="function"?reportError:function(t){console.error(t)};function g1(t){this._internalRoot=t}Ch.prototype.render=g1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Be(409));Th(t,e,null,null)};Ch.prototype.unmount=g1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ss(function(){Th(null,t,null,null)}),e[ja]=null}};function Ch(t){this._internalRoot=t}Ch.prototype.unstable_scheduleHydration=function(t){if(t){var e=mw();t={blockedOn:null,target:t,priority:e};for(var r=0;r<no.length&&e!==0&&e<no[r].priority;r++);no.splice(r,0,t),r===0&&vw(t)}};function v1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ay(){}function Nk(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=ih(o);a.call(u)}}var o=Mb(e,n,t,0,null,!1,!1,"",Ay);return t._reactRootContainer=o,t[ja]=o.current,gc(t.nodeType===8?t.parentNode:t),ss(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var u=ih(l);s.call(u)}}var l=p1(t,0,!1,null,null,!1,!1,"",Ay);return t._reactRootContainer=l,t[ja]=l.current,gc(t.nodeType===8?t.parentNode:t),ss(function(){Th(e,l,r,n)}),l}function Ih(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=ih(o);s.call(l)}}Th(e,o,t,i)}else o=Nk(r,e,t,i,n);return ih(o)}hw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Gu(e.pendingLanes);r!==0&&(Dg(e,r|1),Rn(e,yr()),!(kt&6)&&(Ll=yr()+500,ko()))}break;case 13:ss(function(){var n=Oa(t,1);if(n!==null){var i=pn();Mi(n,t,1,i)}}),m1(t,1)}};Mg=function(t){if(t.tag===13){var e=Oa(t,134217728);if(e!==null){var r=pn();Mi(e,t,134217728,r)}m1(t,134217728)}};pw=function(t){if(t.tag===13){var e=go(t),r=Oa(t,e);if(r!==null){var n=pn();Mi(r,t,e,n)}m1(t,e)}};mw=function(){return Ct};gw=function(t,e){var r=Ct;try{return Ct=t,e()}finally{Ct=r}};em=function(t,e,r){switch(e){case"input":if(G0(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Nh(n);if(!i)throw Error(Be(90));G5(n),G0(n,i)}}}break;case"textarea":Y5(t,r);break;case"select":e=r.value,e!=null&&hl(t,!!r.multiple,e,!1)}};rw=c1;nw=ss;var Ek={usingClientEntryPoint:!1,Events:[Ic,al,Nh,ew,tw,c1]},Pu={findFiberByHostInstance:Jo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ak={bundleType:Pu.bundleType,version:Pu.version,rendererPackageName:Pu.rendererPackageName,rendererConfig:Pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ca.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ow(t),t===null?null:t.stateNode},findFiberByHostInstance:Pu.findFiberByHostInstance||kk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wf.isDisabled&&Wf.supportsFiber)try{xh=Wf.inject(Ak),ea=Wf}catch{}}ti.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ek;ti.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v1(e))throw Error(Be(200));return Sk(t,e,null,r)};ti.createRoot=function(t,e){if(!v1(t))throw Error(Be(299));var r=!1,n="",i=Fb;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=p1(t,1,!1,null,null,r,!1,n,i),t[ja]=e.current,gc(t.nodeType===8?t.parentNode:t),new g1(e)};ti.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Be(188)):(t=Object.keys(t).join(","),Error(Be(268,t)));return t=ow(e),t=t===null?null:t.stateNode,t};ti.flushSync=function(t){return ss(t)};ti.hydrate=function(t,e,r){if(!Rh(e))throw Error(Be(200));return Ih(null,t,e,!0,r)};ti.hydrateRoot=function(t,e,r){if(!v1(t))throw Error(Be(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=Fb;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Mb(e,null,t,1,r??null,i,!1,a,o),t[ja]=e.current,gc(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Ch(e)};ti.render=function(t,e,r){if(!Rh(e))throw Error(Be(200));return Ih(null,t,e,!1,r)};ti.unmountComponentAtNode=function(t){if(!Rh(t))throw Error(Be(40));return t._reactRootContainer?(ss(function(){Ih(null,null,t,!1,function(){t._reactRootContainer=null,t[ja]=null})}),!0):!1};ti.unstable_batchedUpdates=c1;ti.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Rh(r))throw Error(Be(200));if(t==null||t._reactInternals===void 0)throw Error(Be(38));return Ih(t,e,r,!1,n)};ti.version="18.3.1-next-f1338f8080-20240426";function Bb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bb)}catch(t){console.error(t)}}Bb(),B5.exports=ti;var y1=B5.exports;const w1=wh(y1);var jy=y1;q0.createRoot=jy.createRoot,q0.hydrateRoot=jy.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Oy="popstate";function jk(t={}){function e(i,a){let{pathname:o="/",search:s="",hash:l=""}=hs(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Cm("",{pathname:o,search:s,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){let o=i.document.querySelector("base"),s="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");s=u===-1?l:l.slice(0,u)}return s+"#"+(typeof a=="string"?a:Nc(a))}function n(i,a){ei(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return Lk(e,r,n,t)}function rr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ei(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ok(){return Math.random().toString(36).substring(2,10)}function Ly(t,e){return{usr:t.state,key:t.key,idx:e}}function Cm(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?hs(e):e,state:r,key:e&&e.key||n||Ok()}}function Nc({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function hs(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function Lk(t,e,r,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,s="POP",l=null,u=h();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function h(){return(o.state||{idx:null}).idx}function f(){s="POP";let w=h(),m=w==null?null:w-u;u=w,l&&l({action:s,location:v.location,delta:m})}function d(w,m){s="PUSH";let g=Cm(v.location,w,m);r&&r(g,w),u=h()+1;let b=Ly(g,u),S=v.createHref(g);try{o.pushState(b,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(S)}a&&l&&l({action:s,location:v.location,delta:1})}function c(w,m){s="REPLACE";let g=Cm(v.location,w,m);r&&r(g,w),u=h();let b=Ly(g,u),S=v.createHref(g);o.replaceState(b,"",S),a&&l&&l({action:s,location:v.location,delta:0})}function y(w){return Pk(w)}let v={get action(){return s},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Oy,f),l=w,()=>{i.removeEventListener(Oy,f),l=null}},createHref(w){return e(i,w)},createURL:y,encodeLocation(w){let m=y(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:d,replace:c,go(w){return o.go(w)}};return v}function Pk(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),rr(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Nc(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function qb(t,e,r="/"){return Tk(t,e,r,!1)}function Tk(t,e,r,n){let i=typeof e=="string"?hs(e):e,a=Pa(i.pathname||"/",r);if(a==null)return null;let o=Ub(t);Ck(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let u=Hk(a);s=zk(o[l],u,n)}return s}function Ub(t,e=[],r=[],n="",i=!1){let a=(o,s,l=i,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&l)return;rr(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let f=Ea([n,h.relativePath]),d=r.concat(h);o.children&&o.children.length>0&&(rr(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Ub(o.children,e,d,f,l)),!(o.path==null&&!o.index)&&e.push({path:f,score:qk(f,o.index),routesMeta:d})};return t.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,s);else for(let u of zb(o.path))a(o,s,!0,u)}),e}function zb(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=zb(n.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function Ck(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Uk(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Rk=/^:[\w-]+$/,Ik=3,Dk=2,Mk=1,Fk=10,Bk=-2,Py=t=>t==="*";function qk(t,e){let r=t.split("/"),n=r.length;return r.some(Py)&&(n+=Bk),e&&(n+=Dk),r.filter(i=>!Py(i)).reduce((i,a)=>i+(Rk.test(a)?Ik:a===""?Mk:Fk),n)}function Uk(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function zk(t,e,r=!1){let{routesMeta:n}=t,i={},a="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],u=s===n.length-1,h=a==="/"?e:e.slice(a.length)||"/",f=ah({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),d=l.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=ah({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Ea([a,f.pathname]),pathnameBase:Yk(Ea([a,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(a=Ea([a,f.pathnameBase]))}return o}function ah(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=$k(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((u,{paramName:h,isOptional:f},d)=>{if(h==="*"){let y=s[d]||"";o=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const c=s[d];return f&&!c?u[h]=void 0:u[h]=(c||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function $k(t,e=!1,r=!0){ei(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(n.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Hk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ei(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Pa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}var Wk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vk=t=>Wk.test(t);function Gk(t,e="/"){let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?hs(t):t,a;if(r)if(Vk(r))a=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),ei(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${r}`)}r.startsWith("/")?a=Ty(r.substring(1),"/"):a=Ty(r,e)}else a=e;return{pathname:a,search:Jk(n),hash:Xk(i)}}function Ty(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function u0(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Kk(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function b1(t){let e=Kk(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function x1(t,e,r,n=!1){let i;typeof t=="string"?i=hs(t):(i={...t},rr(!i.pathname||!i.pathname.includes("?"),u0("?","pathname","search",i)),rr(!i.pathname||!i.pathname.includes("#"),u0("#","pathname","hash",i)),rr(!i.search||!i.search.includes("#"),u0("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}s=f>=0?e[f]:"/"}let l=Gk(i,s),u=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}var Ea=t=>t.join("/").replace(/\/\/+/g,"/"),Yk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Jk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Xk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Qk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $b=["POST","PUT","PATCH","DELETE"];new Set($b);var Zk=["GET",...$b];new Set(Zk);var Ml=ie.createContext(null);Ml.displayName="DataRouter";var Dh=ie.createContext(null);Dh.displayName="DataRouterState";ie.createContext(!1);var Hb=ie.createContext({isTransitioning:!1});Hb.displayName="ViewTransition";var eN=ie.createContext(new Map);eN.displayName="Fetchers";var tN=ie.createContext(null);tN.displayName="Await";var Bi=ie.createContext(null);Bi.displayName="Navigation";var Mc=ie.createContext(null);Mc.displayName="Location";var yi=ie.createContext({outlet:null,matches:[],isDataRoute:!1});yi.displayName="Route";var _1=ie.createContext(null);_1.displayName="RouteError";function rN(t,{relative:e}={}){rr(Fl(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=ie.useContext(Bi),{hash:i,pathname:a,search:o}=Fc(t,{relative:e}),s=a;return r!=="/"&&(s=a==="/"?r:Ea([r,a])),n.createHref({pathname:s,search:o,hash:i})}function Fl(){return ie.useContext(Mc)!=null}function qi(){return rr(Fl(),"useLocation() may be used only in the context of a <Router> component."),ie.useContext(Mc).location}var Wb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vb(t){ie.useContext(Bi).static||ie.useLayoutEffect(t)}function Ra(){let{isDataRoute:t}=ie.useContext(yi);return t?vN():nN()}function nN(){rr(Fl(),"useNavigate() may be used only in the context of a <Router> component.");let t=ie.useContext(Ml),{basename:e,navigator:r}=ie.useContext(Bi),{matches:n}=ie.useContext(yi),{pathname:i}=qi(),a=JSON.stringify(b1(n)),o=ie.useRef(!1);return Vb(()=>{o.current=!0}),ie.useCallback((l,u={})=>{if(ei(o.current,Wb),!o.current)return;if(typeof l=="number"){r.go(l);return}let h=x1(l,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ea([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,a,i,t])}var Gb=ie.createContext(null);function iN(){return ie.useContext(Gb)}function aN(t){let e=ie.useContext(yi).outlet;return ie.useMemo(()=>e&&ie.createElement(Gb.Provider,{value:t},e),[e,t])}function Kb(){let{matches:t}=ie.useContext(yi),e=t[t.length-1];return e?e.params:{}}function Fc(t,{relative:e}={}){let{matches:r}=ie.useContext(yi),{pathname:n}=qi(),i=JSON.stringify(b1(r));return ie.useMemo(()=>x1(t,JSON.parse(i),n,e==="path"),[t,i,n,e])}function oN(t,e){return Yb(t,e)}function Yb(t,e,r,n,i){var g;rr(Fl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=ie.useContext(Bi),{matches:o}=ie.useContext(yi),s=o[o.length-1],l=s?s.params:{},u=s?s.pathname:"/",h=s?s.pathnameBase:"/",f=s&&s.route;{let b=f&&f.path||"";Jb(u,!f||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let d=qi(),c;if(e){let b=typeof e=="string"?hs(e):e;rr(h==="/"||((g=b.pathname)==null?void 0:g.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${b.pathname}" was given in the \`location\` prop.`),c=b}else c=d;let y=c.pathname||"/",v=y;if(h!=="/"){let b=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=qb(t,{pathname:v});ei(f||w!=null,`No routes matched location "${c.pathname}${c.search}${c.hash}" `),ei(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${c.pathname}${c.search}${c.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let m=fN(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Ea([h,a.encodeLocation?a.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?h:Ea([h,a.encodeLocation?a.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),o,r,n,i);return e&&m?ie.createElement(Mc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...c},navigationType:"POP"}},m):m}function sN(){let t=gN(),e=Qk(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=ie.createElement(ie.Fragment,null,ie.createElement("p",null," Hey developer "),ie.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ie.createElement("code",{style:a},"ErrorBoundary")," or"," ",ie.createElement("code",{style:a},"errorElement")," prop on your route.")),ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},e),r?ie.createElement("pre",{style:i},r):null,o)}var lN=ie.createElement(sN,null),uN=class extends ie.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?ie.createElement(yi.Provider,{value:this.props.routeContext},ie.createElement(_1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cN({routeContext:t,match:e,children:r}){let n=ie.useContext(Ml);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),ie.createElement(yi.Provider,{value:t},r)}function fN(t,e=[],r=null,n=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=r==null?void 0:r.errors;if(o!=null){let h=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);rr(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let s=!1,l=-1;if(r)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=h),f.route.id){let{loaderData:d,errors:c}=r,y=f.route.loader&&!d.hasOwnProperty(f.route.id)&&(!c||c[f.route.id]===void 0);if(f.route.lazy||y){s=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}let u=r&&n?(h,f)=>{var d,c;n(h,{location:r.location,params:((c=(d=r.matches)==null?void 0:d[0])==null?void 0:c.params)??{},errorInfo:f})}:void 0;return a.reduceRight((h,f,d)=>{let c,y=!1,v=null,w=null;r&&(c=o&&f.route.id?o[f.route.id]:void 0,v=f.route.errorElement||lN,s&&(l<0&&d===0?(Jb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,w=null):l===d&&(y=!0,w=f.route.hydrateFallbackElement||null)));let m=e.concat(a.slice(0,d+1)),g=()=>{let b;return c?b=v:y?b=w:f.route.Component?b=ie.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=h,ie.createElement(cN,{match:f,routeContext:{outlet:h,matches:m,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?ie.createElement(uN,{location:r.location,revalidation:r.revalidation,component:v,error:c,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:u}):g()},null)}function S1(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dN(t){let e=ie.useContext(Ml);return rr(e,S1(t)),e}function hN(t){let e=ie.useContext(Dh);return rr(e,S1(t)),e}function pN(t){let e=ie.useContext(yi);return rr(e,S1(t)),e}function k1(t){let e=pN(t),r=e.matches[e.matches.length-1];return rr(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function mN(){return k1("useRouteId")}function gN(){var n;let t=ie.useContext(_1),e=hN("useRouteError"),r=k1("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function vN(){let{router:t}=dN("useNavigate"),e=k1("useNavigate"),r=ie.useRef(!1);return Vb(()=>{r.current=!0}),ie.useCallback(async(i,a={})=>{ei(r.current,Wb),r.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var Cy={};function Jb(t,e,r){!e&&!Cy[t]&&(Cy[t]=!0,ei(!1,r))}ie.memo(yN);function yN({routes:t,future:e,state:r,unstable_onError:n}){return Yb(t,void 0,r,n,e)}function Rm({to:t,replace:e,state:r,relative:n}){rr(Fl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=ie.useContext(Bi);ei(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=ie.useContext(yi),{pathname:o}=qi(),s=Ra(),l=x1(t,b1(a),o,n==="path"),u=JSON.stringify(l);return ie.useEffect(()=>{s(JSON.parse(u),{replace:e,state:r,relative:n})},[s,u,n,e,r]),null}function wN(t){return aN(t.context)}function On(t){rr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bN({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:i,static:a=!1}){rr(!Fl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),s=ie.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof r=="string"&&(r=hs(r));let{pathname:l="/",search:u="",hash:h="",state:f=null,key:d="default"}=r,c=ie.useMemo(()=>{let y=Pa(l,o);return y==null?null:{location:{pathname:y,search:u,hash:h,state:f,key:d},navigationType:n}},[o,l,u,h,f,d,n]);return ei(c!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),c==null?null:ie.createElement(Bi.Provider,{value:s},ie.createElement(Mc.Provider,{children:e,value:c}))}function xN({children:t,location:e}){return oN(Im(t),e)}function Im(t,e=[]){let r=[];return ie.Children.forEach(t,(n,i)=>{if(!ie.isValidElement(n))return;let a=[...e,i];if(n.type===ie.Fragment){r.push.apply(r,Im(n.props.children,a));return}rr(n.type===On,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),rr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Im(n.props.children,a)),r.push(o)}),r}var kd="get",Nd="application/x-www-form-urlencoded";function Mh(t){return t!=null&&typeof t.tagName=="string"}function _N(t){return Mh(t)&&t.tagName.toLowerCase()==="button"}function SN(t){return Mh(t)&&t.tagName.toLowerCase()==="form"}function kN(t){return Mh(t)&&t.tagName.toLowerCase()==="input"}function NN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function EN(t,e){return t.button===0&&(!e||e==="_self")&&!NN(t)}var Vf=null;function AN(){if(Vf===null)try{new FormData(document.createElement("form"),0),Vf=!1}catch{Vf=!0}return Vf}var jN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function c0(t){return t!=null&&!jN.has(t)?(ei(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nd}"`),null):t}function ON(t,e){let r,n,i,a,o;if(SN(t)){let s=t.getAttribute("action");n=s?Pa(s,e):null,r=t.getAttribute("method")||kd,i=c0(t.getAttribute("enctype"))||Nd,a=new FormData(t)}else if(_N(t)||kN(t)&&(t.type==="submit"||t.type==="image")){let s=t.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||s.getAttribute("action");if(n=l?Pa(l,e):null,r=t.getAttribute("formmethod")||s.getAttribute("method")||kd,i=c0(t.getAttribute("formenctype"))||c0(s.getAttribute("enctype"))||Nd,a=new FormData(s,t),!AN()){let{name:u,type:h,value:f}=t;if(h==="image"){let d=u?`${u}.`:"";a.append(`${d}x`,"0"),a.append(`${d}y`,"0")}else u&&a.append(u,f)}}else{if(Mh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=kd,n=null,i=Nd,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function N1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function LN(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&Pa(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function PN(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function TN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function CN(t,e,r){let n=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await PN(a,r);return o.links?o.links():[]}return[]}));return MN(n.flat(1).filter(TN).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Ry(t,e,r,n,i,a){let o=(l,u)=>r[u]?l.route.id!==r[u].route.id:!0,s=(l,u)=>{var h;return r[u].pathname!==l.pathname||((h=r[u].route.path)==null?void 0:h.endsWith("*"))&&r[u].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,u)=>o(l,u)||s(l,u)):a==="data"?e.filter((l,u)=>{var f;let h=n.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,u)||s(l,u))return!0;if(l.route.shouldRevalidate){let d=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function RN(t,e,{includeHydrateFallback:r}={}){return IN(t.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function IN(t){return[...new Set(t)]}function DN(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function MN(t,e){let r=new Set;return new Set(e),t.reduce((n,i)=>{let a=JSON.stringify(DN(i));return r.has(a)||(r.add(a),n.push({key:a,link:i})),n},[])}function Xb(){let t=ie.useContext(Ml);return N1(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function FN(){let t=ie.useContext(Dh);return N1(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var E1=ie.createContext(void 0);E1.displayName="FrameworkContext";function Qb(){let t=ie.useContext(E1);return N1(t,"You must render this element inside a <HydratedRouter> element"),t}function BN(t,e){let r=ie.useContext(E1),[n,i]=ie.useState(!1),[a,o]=ie.useState(!1),{onFocus:s,onBlur:l,onMouseEnter:u,onMouseLeave:h,onTouchStart:f}=e,d=ie.useRef(null);ie.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let v=m=>{m.forEach(g=>{o(g.isIntersecting)})},w=new IntersectionObserver(v,{threshold:.5});return d.current&&w.observe(d.current),()=>{w.disconnect()}}},[t]),ie.useEffect(()=>{if(n){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[n]);let c=()=>{i(!0)},y=()=>{i(!1),o(!1)};return r?t!=="intent"?[a,d,{}]:[a,d,{onFocus:Tu(s,c),onBlur:Tu(l,y),onMouseEnter:Tu(u,c),onMouseLeave:Tu(h,y),onTouchStart:Tu(f,c)}]:[!1,d,{}]}function Tu(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function qN({page:t,...e}){let{router:r}=Xb(),n=ie.useMemo(()=>qb(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?ie.createElement(zN,{page:t,matches:n,...e}):null}function UN(t){let{manifest:e,routeModules:r}=Qb(),[n,i]=ie.useState([]);return ie.useEffect(()=>{let a=!1;return CN(t,e,r).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,r]),n}function zN({page:t,matches:e,...r}){let n=qi(),{manifest:i,routeModules:a}=Qb(),{basename:o}=Xb(),{loaderData:s,matches:l}=FN(),u=ie.useMemo(()=>Ry(t,e,l,i,n,"data"),[t,e,l,i,n]),h=ie.useMemo(()=>Ry(t,e,l,i,n,"assets"),[t,e,l,i,n]),f=ie.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let y=new Set,v=!1;if(e.forEach(m=>{var b;let g=i.routes[m.route.id];!g||!g.hasLoader||(!u.some(S=>S.route.id===m.route.id)&&m.route.id in s&&((b=a[m.route.id])!=null&&b.shouldRevalidate)||g.hasClientLoader?v=!0:y.add(m.route.id))}),y.size===0)return[];let w=LN(t,o,"data");return v&&y.size>0&&w.searchParams.set("_routes",e.filter(m=>y.has(m.route.id)).map(m=>m.route.id).join(",")),[w.pathname+w.search]},[o,s,n,i,u,e,t,a]),d=ie.useMemo(()=>RN(h,i),[h,i]),c=UN(h);return ie.createElement(ie.Fragment,null,f.map(y=>ie.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),d.map(y=>ie.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),c.map(({key:y,link:v})=>ie.createElement("link",{key:y,nonce:r.nonce,...v})))}function $N(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var Zb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Zb&&(window.__reactRouterVersion="7.9.6")}catch{}function HN({basename:t,children:e,window:r}){let n=ie.useRef();n.current==null&&(n.current=jk({window:r,v5Compat:!0}));let i=n.current,[a,o]=ie.useState({action:i.action,location:i.location}),s=ie.useCallback(l=>{ie.startTransition(()=>o(l))},[o]);return ie.useLayoutEffect(()=>i.listen(s),[i,s]),ie.createElement(bN,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var ex=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pl=ie.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:i,reloadDocument:a,replace:o,state:s,target:l,to:u,preventScrollReset:h,viewTransition:f,...d},c){let{basename:y}=ie.useContext(Bi),v=typeof u=="string"&&ex.test(u),w,m=!1;if(typeof u=="string"&&v&&(w=u,Zb))try{let M=new URL(window.location.href),T=u.startsWith("//")?new URL(M.protocol+u):new URL(u),k=Pa(T.pathname,y);T.origin===M.origin&&k!=null?u=k+T.search+T.hash:m=!0}catch{ei(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=rN(u,{relative:i}),[b,S,E]=BN(n,d),I=GN(u,{replace:o,state:s,target:l,preventScrollReset:h,relative:i,viewTransition:f});function L(M){e&&e(M),M.defaultPrevented||I(M)}let O=ie.createElement("a",{...d,...E,href:w||g,onClick:m||a?e:L,ref:$N(c,S),target:l,"data-discover":!v&&r==="render"?"true":void 0});return b&&!v?ie.createElement(ie.Fragment,null,O,ie.createElement(qN,{page:g})):O});Pl.displayName="Link";var Dm=ie.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:i=!1,style:a,to:o,viewTransition:s,children:l,...u},h){let f=Fc(o,{relative:u.relative}),d=qi(),c=ie.useContext(Dh),{navigator:y,basename:v}=ie.useContext(Bi),w=c!=null&&QN(f)&&s===!0,m=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,g=d.pathname,b=c&&c.navigation&&c.navigation.location?c.navigation.location.pathname:null;r||(g=g.toLowerCase(),b=b?b.toLowerCase():null,m=m.toLowerCase()),b&&v&&(b=Pa(b,v)||b);const S=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let E=g===m||!i&&g.startsWith(m)&&g.charAt(S)==="/",I=b!=null&&(b===m||!i&&b.startsWith(m)&&b.charAt(m.length)==="/"),L={isActive:E,isPending:I,isTransitioning:w},O=E?e:void 0,M;typeof n=="function"?M=n(L):M=[n,E?"active":null,I?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let T=typeof a=="function"?a(L):a;return ie.createElement(Pl,{...u,"aria-current":O,className:M,ref:h,style:T,to:o,viewTransition:s},typeof l=="function"?l(L):l)});Dm.displayName="NavLink";var WN=ie.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:i,state:a,method:o=kd,action:s,onSubmit:l,relative:u,preventScrollReset:h,viewTransition:f,...d},c)=>{let y=JN(),v=XN(s,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",m=typeof s=="string"&&ex.test(s),g=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let S=b.nativeEvent.submitter,E=(S==null?void 0:S.getAttribute("formmethod"))||o;y(S||b.currentTarget,{fetcherKey:e,method:E,navigate:r,replace:i,state:a,relative:u,preventScrollReset:h,viewTransition:f})};return ie.createElement("form",{ref:c,method:w,action:v,onSubmit:n?l:g,...d,"data-discover":!m&&t==="render"?"true":void 0})});WN.displayName="Form";function VN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tx(t){let e=ie.useContext(Ml);return rr(e,VN(t)),e}function GN(t,{target:e,replace:r,state:n,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=Ra(),l=qi(),u=Fc(t,{relative:a});return ie.useCallback(h=>{if(EN(h,e)){h.preventDefault();let f=r!==void 0?r:Nc(l)===Nc(u);s(t,{replace:f,state:n,preventScrollReset:i,relative:a,viewTransition:o})}},[l,s,u,r,n,e,t,i,a,o])}var KN=0,YN=()=>`__${String(++KN)}__`;function JN(){let{router:t}=tx("useSubmit"),{basename:e}=ie.useContext(Bi),r=mN();return ie.useCallback(async(n,i={})=>{let{action:a,method:o,encType:s,formData:l,body:u}=ON(n,e);if(i.navigate===!1){let h=i.fetcherKey||YN();await t.fetch(h,r,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,r])}function XN(t,{relative:e}={}){let{basename:r}=ie.useContext(Bi),n=ie.useContext(yi);rr(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...Fc(t||".",{relative:e})},o=qi();if(t==null){a.search=o.search;let s=new URLSearchParams(a.search),l=s.getAll("index");if(l.some(h=>h==="")){s.delete("index"),l.filter(f=>f).forEach(f=>s.append("index",f));let h=s.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Ea([r,a.pathname])),Nc(a)}function QN(t,{relative:e}={}){let r=ie.useContext(Hb);rr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=tx("useViewTransitionState"),i=Fc(t,{relative:e});if(!r.isTransitioning)return!1;let a=Pa(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Pa(r.nextLocation.pathname,n)||r.nextLocation.pathname;return ah(i.pathname,o)!=null||ah(i.pathname,a)!=null}var Mm=function(t,e){return Mm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Mm(t,e)};function A1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Mm(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Er=function(){return Er=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Er.apply(this,arguments)};function Bl(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function rx(t,e,r,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function nx(t,e){return function(r,n){e(r,n,t)}}function ix(t,e,r,n,i,a){function o(m){if(m!==void 0&&typeof m!="function")throw new TypeError("Function expected");return m}for(var s=n.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,h=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,d=!1,c=r.length-1;c>=0;c--){var y={};for(var v in n)y[v]=v==="access"?{}:n[v];for(var v in n.access)y.access[v]=n.access[v];y.addInitializer=function(m){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(m||null))};var w=(0,r[c])(s==="accessor"?{get:h.get,set:h.set}:h[l],y);if(s==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(f=o(w.get))&&(h.get=f),(f=o(w.set))&&(h.set=f),(f=o(w.init))&&i.unshift(f)}else(f=o(w))&&(s==="field"?i.unshift(f):h[l]=f)}u&&Object.defineProperty(u,n.name,h),d=!0}function ax(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function ox(t){return typeof t=="symbol"?t:"".concat(t)}function sx(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function lx(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Xe(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(h){try{u(n.next(h))}catch(f){o(f)}}function l(h){try{u(n.throw(h))}catch(f){o(f)}}function u(h){h.done?a(h.value):i(h.value).then(s,l)}u((n=n.apply(t,e||[])).next())})}function ux(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(h){return l([u,h])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(h){u=[6,h],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Fh=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function cx(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Fh(e,t,r)}function oh(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function j1(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function fx(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(j1(arguments[e]));return t}function dx(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function hx(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function Tl(t){return this instanceof Tl?(this.v=t,this):new Tl(t)}function px(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(c){return function(y){return Promise.resolve(y).then(c,f)}}function s(c,y){n[c]&&(i[c]=function(v){return new Promise(function(w,m){a.push([c,v,w,m])>1||l(c,v)})},y&&(i[c]=y(i[c])))}function l(c,y){try{u(n[c](y))}catch(v){d(a[0][3],v)}}function u(c){c.value instanceof Tl?Promise.resolve(c.value.v).then(h,f):d(a[0][2],c)}function h(c){l("next",c)}function f(c){l("throw",c)}function d(c,y){c(y),a.shift(),a.length&&l(a[0][0],a[0][1])}}function mx(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=t[i]?function(o){return(r=!r)?{value:Tl(t[i](o)),done:!1}:a?a(o):o}:a}}function gx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof oh=="function"?oh(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(o){return new Promise(function(s,l){o=t[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}function vx(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var ZN=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Fm=function(t){return Fm=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Fm(t)};function yx(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Fm(t),n=0;n<r.length;n++)r[n]!=="default"&&Fh(e,t,r[n]);return ZN(e,t),e}function wx(t){return t&&t.__esModule?t:{default:t}}function bx(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function xx(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function _x(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Sx(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var e6=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function kx(t){function e(a){t.error=t.hasError?new e6(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function Nx(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,a,o){return n?e?".jsx":".js":i&&(!a||!o)?r:i+a+"."+o.toLowerCase()+"js"}):t}const t6={__extends:A1,__assign:Er,__rest:Bl,__decorate:rx,__param:nx,__esDecorate:ix,__runInitializers:ax,__propKey:ox,__setFunctionName:sx,__metadata:lx,__awaiter:Xe,__generator:ux,__createBinding:Fh,__exportStar:cx,__values:oh,__read:j1,__spread:fx,__spreadArrays:dx,__spreadArray:hx,__await:Tl,__asyncGenerator:px,__asyncDelegator:mx,__asyncValues:gx,__makeTemplateObject:vx,__importStar:yx,__importDefault:wx,__classPrivateFieldGet:bx,__classPrivateFieldSet:xx,__classPrivateFieldIn:_x,__addDisposableResource:Sx,__disposeResources:kx,__rewriteRelativeImportExtension:Nx},r6=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Sx,get __assign(){return Er},__asyncDelegator:mx,__asyncGenerator:px,__asyncValues:gx,__await:Tl,__awaiter:Xe,__classPrivateFieldGet:bx,__classPrivateFieldIn:_x,__classPrivateFieldSet:xx,__createBinding:Fh,__decorate:rx,__disposeResources:kx,__esDecorate:ix,__exportStar:cx,__extends:A1,__generator:ux,__importDefault:wx,__importStar:yx,__makeTemplateObject:vx,__metadata:lx,__param:nx,__propKey:ox,__read:j1,__rest:Bl,__rewriteRelativeImportExtension:Nx,__runInitializers:ax,__setFunctionName:sx,__spread:fx,__spreadArray:hx,__spreadArrays:dx,__values:oh,default:t6},Symbol.toStringTag,{value:"Module"})),n6=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class O1 extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class i6 extends O1{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Iy extends O1{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Dy extends O1{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Bm;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Bm||(Bm={}));class a6{constructor(e,{headers:r={},customFetch:n,region:i=Bm.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=n6(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Xe(this,arguments,void 0,function*(r,n={}){var i;let a,o;try{const{headers:s,method:l,body:u,signal:h,timeout:f}=n;let d={},{region:c}=n;c||(c=this.region);const y=new URL(`${this.url}/${r}`);c&&c!=="any"&&(d["x-region"]=c,y.searchParams.set("forceFunctionRegion",c));let v;u&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(d["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(d["Content-Type"]="application/json",v=JSON.stringify(u)):v=u;let w=h;f&&(o=new AbortController,a=setTimeout(()=>o.abort(),f),h?(w=o.signal,h.addEventListener("abort",()=>o.abort())):w=o.signal);const m=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),s),body:v,signal:w}).catch(E=>{throw new i6(E)}),g=m.headers.get("x-relay-error");if(g&&g==="true")throw new Iy(m);if(!m.ok)throw new Dy(m);let b=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return b==="application/json"?S=yield m.json():b==="application/octet-stream"||b==="application/pdf"?S=yield m.blob():b==="text/event-stream"?S=m:b==="multipart/form-data"?S=yield m.formData():S=yield m.text(),{data:S,error:null,response:m}}catch(s){return{data:null,error:s,response:s instanceof Dy||s instanceof Iy?s.context:void 0}}finally{a&&clearTimeout(a)}})}}var hn={};const ql=r3(r6);var Gf={},Kf={},Yf={},Jf={},Xf={},Qf={},My;function Ex(){if(My)return Qf;My=1,Object.defineProperty(Qf,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Qf.default=t,Qf}var Fy;function Ax(){if(Fy)return Xf;Fy=1,Object.defineProperty(Xf,"__esModule",{value:!0});const e=ql.__importDefault(Ex());class r{constructor(i){var a,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let s=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,h,f,d;let c=null,y=null,v=null,w=l.status,m=l.statusText;if(l.ok){if(this.method!=="HEAD"){const E=await l.text();E===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?y=E:y=JSON.parse(E))}const b=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),S=(f=l.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");b&&S&&S.length>1&&(v=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(c={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,v=null,w=406,m="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const b=await l.text();try{c=JSON.parse(b),Array.isArray(c)&&l.status===404&&(y=[],c=null,w=200,m="OK")}catch{l.status===404&&b===""?(w=204,m="No Content"):c={message:b}}if(c&&this.isMaybeSingle&&(!((d=c==null?void 0:c.details)===null||d===void 0)&&d.includes("0 rows"))&&(c=null,w=200,m="OK"),c&&this.shouldThrowOnError)throw new e.default(c)}return{error:c,data:y,count:v,status:w,statusText:m}});return this.shouldThrowOnError||(s=s.catch(l=>{var u,h,f,d,c,y;let v="";const w=l==null?void 0:l.cause;if(w){const m=(u=w==null?void 0:w.message)!==null&&u!==void 0?u:"",g=(h=w==null?void 0:w.code)!==null&&h!==void 0?h:"";v=`${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"FetchError"}: ${l==null?void 0:l.message}`,v+=`

Caused by: ${(d=w==null?void 0:w.name)!==null&&d!==void 0?d:"Error"}: ${m}`,g&&(v+=` (${g})`),w!=null&&w.stack&&(v+=`
${w.stack}`)}else v=(c=l==null?void 0:l.stack)!==null&&c!==void 0?c:"";return{error:{message:`${(y=l==null?void 0:l.name)!==null&&y!==void 0?y:"FetchError"}: ${l==null?void 0:l.message}`,details:v,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(i,a)}returns(){return this}overrideTypes(){return this}}return Xf.default=r,Xf}var By;function jx(){if(By)return Jf;By=1,Object.defineProperty(Jf,"__esModule",{value:!0});const e=ql.__importDefault(Ax());class r extends e.default{select(i){let a=!1;const o=(i??"*").split("").map(s=>/\s/.test(s)&&!a?"":(s==='"'&&(a=!a),s)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:s,referencedTable:l=s}={}){const u=l?`${l}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const s=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:s=o}={}){const l=typeof s>"u"?"offset":`${s}.offset`,u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:s=!1,wal:l=!1,format:u="text"}={}){var h;const f=[i?"analyze":null,a?"verbose":null,o?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),d=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${d}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Jf.default=r,Jf}var qy;function L1(){if(qy)return Yf;qy=1,Object.defineProperty(Yf,"__esModule",{value:!0});const e=ql.__importDefault(jx()),r=new RegExp("[,()]");class n extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}regexMatch(a,o){return this.url.searchParams.append(a,`match.${o}`),this}regexIMatch(a,o){return this.url.searchParams.append(a,`imatch.${o}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}isDistinct(a,o){return this.url.searchParams.append(a,`isdistinct.${o}`),this}in(a,o){const s=Array.from(new Set(o)).map(l=>typeof l=="string"&&r.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`in.(${s})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:s,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const h=s===void 0?"":`(${s})`;return this.url.searchParams.append(a,`${u}fts${h}.${o}`),this}match(a){return Object.entries(a).forEach(([o,s])=>{this.url.searchParams.append(o,`eq.${s}`)}),this}not(a,o,s){return this.url.searchParams.append(a,`not.${o}.${s}`),this}or(a,{foreignTable:o,referencedTable:s=o}={}){const l=s?`${s}.or`:"or";return this.url.searchParams.append(l,`(${a})`),this}filter(a,o,s){return this.url.searchParams.append(a,`${o}.${s}`),this}}return Yf.default=n,Yf}var Uy;function Ox(){if(Uy)return Kf;Uy=1,Object.defineProperty(Kf,"__esModule",{value:!0});const e=ql.__importDefault(L1());class r{constructor(i,{headers:a={},schema:o,fetch:s}){this.url=i,this.headers=new Headers(a),this.schema=o,this.fetch=s}select(i,a){const{head:o=!1,count:s}=a??{},l=o?"HEAD":"GET";let u=!1;const h=(i??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",h),s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:o=!0}={}){var s;const l="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:s,defaultToNull:l=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((d,c)=>d.concat(Object.keys(c)),[]);if(f.length>0){const d=[...new Set(f)].map(c=>`"${c}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:a}={}){var o;const s="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var a;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Kf.default=r,Kf}var zy;function o6(){if(zy)return Gf;zy=1,Object.defineProperty(Gf,"__esModule",{value:!0});const t=ql,e=t.__importDefault(Ox()),r=t.__importDefault(L1());class n{constructor(a,{headers:o={},schema:s,fetch:l}={}){this.url=a,this.headers=new Headers(o),this.schemaName=s,this.fetch=l}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:s=!1,get:l=!1,count:u}={}){var h;let f;const d=new URL(`${this.url}/rpc/${a}`);let c;s||l?(f=s?"HEAD":"GET",Object.entries(o).filter(([v,w])=>w!==void 0).map(([v,w])=>[v,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([v,w])=>{d.searchParams.append(v,w)})):(f="POST",c=o);const y=new Headers(this.headers);return u&&y.set("Prefer",`count=${u}`),new r.default({method:f,url:d,headers:y,schema:this.schemaName,body:c,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Gf.default=n,Gf}Object.defineProperty(hn,"__esModule",{value:!0});var Lx=hn.PostgrestError=qx=hn.PostgrestBuilder=Fx=hn.PostgrestTransformBuilder=Dx=hn.PostgrestFilterBuilder=Rx=hn.PostgrestQueryBuilder=Tx=hn.PostgrestClient=void 0;const Ul=ql,Px=Ul.__importDefault(o6());var Tx=hn.PostgrestClient=Px.default;const Cx=Ul.__importDefault(Ox());var Rx=hn.PostgrestQueryBuilder=Cx.default;const Ix=Ul.__importDefault(L1());var Dx=hn.PostgrestFilterBuilder=Ix.default;const Mx=Ul.__importDefault(jx());var Fx=hn.PostgrestTransformBuilder=Mx.default;const Bx=Ul.__importDefault(Ax());var qx=hn.PostgrestBuilder=Bx.default;const Ux=Ul.__importDefault(Ex());Lx=hn.PostgrestError=Ux.default;var zx=hn.default={PostgrestClient:Px.default,PostgrestQueryBuilder:Cx.default,PostgrestFilterBuilder:Ix.default,PostgrestTransformBuilder:Mx.default,PostgrestBuilder:Bx.default,PostgrestError:Ux.default};const s6=t3({__proto__:null,get PostgrestBuilder(){return qx},get PostgrestClient(){return Tx},get PostgrestError(){return Lx},get PostgrestFilterBuilder(){return Dx},get PostgrestQueryBuilder(){return Rx},get PostgrestTransformBuilder(){return Fx},default:zx},[hn]),{PostgrestClient:l6,PostgrestQueryBuilder:A9,PostgrestFilterBuilder:j9,PostgrestTransformBuilder:O9,PostgrestBuilder:L9,PostgrestError:P9}=zx||s6;class u6{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const c6="2.86.0",f6=`realtime-js/${c6}`,$x="1.0.0",d6="2.0.0",$y=$x,qm=1e4,h6=1e3,p6=100;var Wo;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Wo||(Wo={}));var Lr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Lr||(Lr={}));var Ri;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ri||(Ri={}));var Um;(function(t){t.websocket="websocket"})(Um||(Um={}));var Vo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Vo||(Vo={}));class m6{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var i,a;const o=e.topic,s=(i=e.ref)!==null&&i!==void 0?i:"",l=(a=e.join_ref)!==null&&a!==void 0?a:"",u=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(h).length===0?"":JSON.stringify(h);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+s.length+o.length+u.length+f.length,c=new ArrayBuffer(this.HEADER_LENGTH+d);let y=new DataView(c),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,l.length),y.setUint8(v++,s.length),y.setUint8(v++,o.length),y.setUint8(v++,u.length),y.setUint8(v++,f.length),y.setUint8(v++,r),Array.from(l,m=>y.setUint8(v++,m.charCodeAt(0))),Array.from(s,m=>y.setUint8(v++,m.charCodeAt(0))),Array.from(o,m=>y.setUint8(v++,m.charCodeAt(0))),Array.from(u,m=>y.setUint8(v++,m.charCodeAt(0))),Array.from(f,m=>y.setUint8(v++,m.charCodeAt(0)));var w=new Uint8Array(c.byteLength+n.byteLength);return w.set(new Uint8Array(c),0),w.set(new Uint8Array(n),c.byteLength),w.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,a,o,s,l]=n;return r({join_ref:i,ref:a,topic:o,event:s,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,i)}}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),a=r.getUint8(2),o=r.getUint8(3),s=r.getUint8(4);let l=this.HEADER_LENGTH+4;const u=n.decode(e.slice(l,l+i));l=l+i;const h=n.decode(e.slice(l,l+a));l=l+a;const f=n.decode(e.slice(l,l+o));l=l+o;const d=e.slice(l,e.byteLength),c=s===this.JSON_ENCODING?JSON.parse(n.decode(d)):d,y={type:this.BROADCAST_EVENT,event:h,payload:c};return o>0&&(y.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class Hx{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Gt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Gt||(Gt={}));const Hy=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((a,o)=>(a[o]=g6(o,t,e,i),a),{}):{}},g6=(t,e,r,n)=>{const i=e.find(s=>s.name===t),a=i==null?void 0:i.type,o=r[t];return a&&!n.includes(a)?Wx(a,o):zm(o)},Wx=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return b6(e,r)}switch(t){case Gt.bool:return v6(e);case Gt.float4:case Gt.float8:case Gt.int2:case Gt.int4:case Gt.int8:case Gt.numeric:case Gt.oid:return y6(e);case Gt.json:case Gt.jsonb:return w6(e);case Gt.timestamp:return x6(e);case Gt.abstime:case Gt.date:case Gt.daterange:case Gt.int4range:case Gt.int8range:case Gt.money:case Gt.reltime:case Gt.text:case Gt.time:case Gt.timestamptz:case Gt.timetz:case Gt.tsrange:case Gt.tstzrange:return zm(e);default:return zm(e)}},zm=t=>t,v6=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},y6=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},w6=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},b6=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(s=>Wx(e,s))}return t},x6=t=>typeof t=="string"?t.replace(" ","T"):t,Vx=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class f0{constructor(e,r,n={},i=qm){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Wy;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Wy||(Wy={}));class ac{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ac.syncState(this.state,i,a,o),this.pendingDiffs.forEach(l=>{this.state=ac.syncDiff(this.state,l,a,o)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ac.syncDiff(this.state,i,a,o),s())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const a=this.cloneDeep(e),o=this.transformState(r),s={},l={};return this.map(a,(u,h)=>{o[u]||(l[u]=h)}),this.map(o,(u,h)=>{const f=a[u];if(f){const d=h.map(w=>w.presence_ref),c=f.map(w=>w.presence_ref),y=h.filter(w=>c.indexOf(w.presence_ref)<0),v=f.filter(w=>d.indexOf(w.presence_ref)<0);y.length>0&&(s[u]=y),v.length>0&&(l[u]=v)}else s[u]=h}),this.syncDiff(a,{joins:s,leaves:l},n,i)}static syncDiff(e,r,n,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(s,l)=>{var u;const h=(u=e[s])!==null&&u!==void 0?u:[];if(e[s]=this.cloneDeep(l),h.length>0){const f=e[s].map(c=>c.presence_ref),d=h.filter(c=>f.indexOf(c.presence_ref)<0);e[s].unshift(...d)}n(s,h,l)}),this.map(o,(s,l)=>{let u=e[s];if(!u)return;const h=l.map(f=>f.presence_ref);u=u.filter(f=>h.indexOf(f.presence_ref)<0),e[s]=u,i(s,u,l),u.length===0&&delete e[s]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Vy;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Vy||(Vy={}));var oc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(oc||(oc={}));var xa;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(xa||(xa={}));class P1{constructor(e,r={config:{}},n){var i,a;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Lr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new f0(this,Ri.join,this.params,this.timeout),this.rejoinTimer=new Hx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Lr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Lr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Lr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Lr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Lr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ri.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new ac(this),this.broadcastEndpointURL=Vx(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Lr.closed){const{config:{broadcast:o,presence:s,private:l}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(c=>c.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[oc.PRESENCE]&&this.bindings[oc.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},d={broadcast:o,presence:Object.assign(Object.assign({},s),{enabled:h}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(c=>e==null?void 0:e(xa.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(xa.CLOSED)),this.updateJoinPayload(Object.assign({config:d},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:c})=>{var y;if(this.socket.setAuth(),c===void 0){e==null||e(xa.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,w=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,m=[];for(let g=0;g<w;g++){const b=v[g],{filter:{event:S,schema:E,table:I,filter:L}}=b,O=c&&c[g];if(O&&O.event===S&&O.schema===E&&O.table===I&&O.filter===L)m.push(Object.assign(Object.assign({},b),{id:O.id}));else{this.unsubscribe(),this.state=Lr.errored,e==null||e(xa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(xa.SUBSCRIBED);return}}).receive("error",c=>{this.state=Lr.errored,e==null||e(xa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(xa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Lr.joined&&e===oc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let l=s.statusText;try{const u=await s.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,s,l;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(s=(o=this.params)===null||o===void 0?void 0:o.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Lr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ri.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new f0(this,Ri.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Lr.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new f0(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>p6){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,a;const o=e.toLocaleLowerCase(),{close:s,error:l,leave:u,join:h}=Ri;if(n&&[s,l,u,h].indexOf(o)>=0&&n!==this._joinRef())return;let d=this._onMessage(o,r,n);if(r&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(c=>{var y,v,w;return((y=c.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(v=c.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(c=>c.callback(d,n)):(a=this.bindings[o])===null||a===void 0||a.filter(c=>{var y,v,w,m,g,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in c){const S=c.id,E=(y=c.filter)===null||y===void 0?void 0:y.event;return S&&((v=r.ids)===null||v===void 0?void 0:v.includes(S))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const S=(g=(m=c==null?void 0:c.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return S==="*"||S===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return c.type.toLocaleLowerCase()===o}).map(c=>{if(typeof d=="object"&&"ids"in d){const y=d.data,{schema:v,table:w,commit_timestamp:m,type:g,errors:b}=y;d=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:m,eventType:g,new:{},old:{},errors:b}),this._getPayloadRecords(y))}c.callback(d,n)})}_isClosed(){return this.state===Lr.closed}_isJoined(){return this.state===Lr.joined}_isJoining(){return this.state===Lr.joining}_isLeaving(){return this.state===Lr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&P1.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ri.close,{},e)}_onError(e){this._on(Ri.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Lr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Hy(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Hy(e.columns,e.old_record)),r}}const d0=()=>{},Zf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_6=[1e3,2e3,5e3,1e4],S6=1e4,k6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class N6{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qm,this.transport=null,this.heartbeatIntervalMs=Zf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=d0,this.ref=0,this.reconnectTimer=null,this.vsn=$y,this.logger=d0,this.conn=null,this.sendBuffer=[],this.serializer=new m6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Um.websocket}`,this.httpEndpoint=Vx(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=u6.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Wo.connecting:return Vo.Connecting;case Wo.open:return Vo.Open;case Wo.closing:return Vo.Closing;default:return Vo.Closed}}isConnected(){return this.connectionState()===Vo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new P1(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:i,ref:a}=e,o=()=>{this.encode(e,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(h6,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Zf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:o}=r,s=o?`(${o})`:"",l=a.status||"";this.log("receive",`${l} ${n} ${i} ${s}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Wo.open||this.conn.readyState===Wo.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ri.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([k6],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:f6};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Ri.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Hx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Zf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,a,o,s,l,u,h,f,d,c;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:qm,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Zf.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(s=e==null?void 0:e.heartbeatCallback)!==null&&s!==void 0?s:d0,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:$y,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:y=>_6[y-1]||S6,this.vsn){case $x:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(y,v)=>v(JSON.stringify(y)),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:(y,v)=>v(JSON.parse(y));break;case d6:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:this.serializer.encode.bind(this.serializer),this.decode=(c=e==null?void 0:e.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Bh extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ir(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class E6 extends Bh{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class $m extends Bh{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const T1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),A6=()=>Response,Hm=t=>{if(Array.isArray(t))return t.map(r=>Hm(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Hm(n)}),e},j6=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},O6=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),h0=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},L6=(t,e,r)=>Xe(void 0,void 0,void 0,function*(){const n=yield A6();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const a=t.status||500,o=(i==null?void 0:i.statusCode)||a+"";e(new E6(h0(i),a,o))}).catch(i=>{e(new $m(h0(i),i))}):e(new $m(h0(t),t))}),P6=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(j6(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function Bc(t,e,r,n,i,a){return Xe(this,void 0,void 0,function*(){return new Promise((o,s)=>{t(r,P6(e,n,i,a)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>L6(l,s,n))})})}function Ec(t,e,r,n){return Xe(this,void 0,void 0,function*(){return Bc(t,"GET",e,r,n)})}function Pi(t,e,r,n,i){return Xe(this,void 0,void 0,function*(){return Bc(t,"POST",e,n,i,r)})}function Wm(t,e,r,n,i){return Xe(this,void 0,void 0,function*(){return Bc(t,"PUT",e,n,i,r)})}function T6(t,e,r,n){return Xe(this,void 0,void 0,function*(){return Bc(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function C1(t,e,r,n,i){return Xe(this,void 0,void 0,function*(){return Bc(t,"DELETE",e,n,i,r)})}class C6{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return Xe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ir(e))return{data:null,error:e};throw e}})}}var Gx;class R6{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[Gx]="BlobDownloadBuilder",this.promise=null}asStream(){return new C6(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Xe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ir(e))return{data:null,error:e};throw e}})}}Gx=Symbol.toStringTag;const I6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class D6{constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=T1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return Xe(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Gy),i);let s=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),l&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(l))):(a=n,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),i!=null&&i.headers&&(s=Object.assign(Object.assign({},s),i.headers));const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),f=yield(e=="PUT"?Wm:Pi)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:s},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ir(a))return{data:null,error:a};throw a}})}upload(e,r,n){return Xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return Xe(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:Gy.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const f=yield Wm(this.fetch,s.toString(),l,{headers:h});return{data:{path:a,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ir(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return Xe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield Pi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),s=o.searchParams.get("token");if(!s)throw new Bh("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:s},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ir(n))return{data:null,error:n};throw n}})}update(e,r,n){return Xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Xe(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ir(i))return{data:null,error:i};throw i}})}copy(e,r,n){return Xe(this,void 0,void 0,function*(){try{return{data:{path:(yield Pi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ir(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return Xe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Pi(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ir(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return Xe(this,void 0,void 0,function*(){try{const i=yield Pi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ir(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"",s=this._getFinalPath(e),l=()=>Ec(this.fetch,`${this.url}/${i}/${s}${o}`,{headers:this.headers,noResolveJson:!0});return new R6(l,this.shouldThrowOnError)}info(e){return Xe(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Ec(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Hm(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ir(n))return{data:null,error:n};throw n}})}exists(e){return Xe(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield T6(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ir(n)&&n instanceof $m){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const s=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${u}`)}}}remove(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield C1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ir(r))return{data:null,error:r};throw r}})}list(e,r,n){return Xe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},I6),r),{prefix:e||""});return{data:yield Pi(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ir(i))return{data:null,error:i};throw i}})}listV2(e,r){return Xe(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Pi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ir(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Kx="2.86.0",Yx={"X-Client-Info":`storage-js/${Kx}`};class M6{constructor(e,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yx),r),this.fetch=T1(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Xe(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Ec(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ir(r))return{data:null,error:r};throw r}})}getBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Ec(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ir(r))return{data:null,error:r};throw r}})}createBucket(e){return Xe(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Pi(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ir(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return Xe(this,void 0,void 0,function*(){try{return{data:yield Wm(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ir(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ir(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield C1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ir(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Ac=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function F6(t,e,r){const n=new URL(e,t);if(r)for(const[i,a]of Object.entries(r))a!==void 0&&n.searchParams.set(i,a);return n.toString()}async function B6(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function q6(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:a,headers:o}){const s=F6(t.baseUrl,n,i),l=await B6(t.auth),u=await e(s,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...l,...o},body:a?JSON.stringify(a):void 0}),h=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),d=f&&h?JSON.parse(h):h;if(!u.ok){const c=f?d:void 0,y=c==null?void 0:c.error;throw new Ac((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:c})}return{status:u.status,headers:u.headers,data:d}}}}function ed(t){return t.join("")}var U6=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ed(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ed(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ed(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ed(t.namespace)}`}),!0}catch(e){if(e instanceof Ac&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Ac&&r.status===409)return;throw r}}};function Us(t){return t.join("")}var z6=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Us(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Us(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Us(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Us(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Us(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Us(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Ac&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Ac&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},$6=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=q6({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new U6(this.client,e),this.tableOps=new z6(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class H6{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yx),r),this.fetch=T1(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ir(r))return{data:null,error:r};throw r}})}listBuckets(e){return Xe(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Ec(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ir(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield C1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ir(r))return{data:null,error:r};throw r}})}from(e){if(!O6(e))throw new Bh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new $6({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>Xe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const R1={"X-Client-Info":`storage-js/${Kx}`,"Content-Type":"application/json"};class Jx extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Gn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class p0 extends Jx{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class W6 extends Jx{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var Ky;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Ky||(Ky={}));const I1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),V6=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Yy=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),G6=(t,e,r)=>Xe(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const i=t.status||500,a=t;if(typeof a.json=="function")a.json().then(o=>{const s=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new p0(Yy(o),i,s))}).catch(()=>{const o=i+"",s=a.statusText||`HTTP ${i} error`;e(new p0(s,i,o))});else{const o=i+"",s=a.statusText||`HTTP ${i} error`;e(new p0(s,i,o))}}else e(new W6(Yy(t),t))}),K6=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(V6(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function Y6(t,e,r,n,i,a){return Xe(this,void 0,void 0,function*(){return new Promise((o,s)=>{t(r,K6(e,n,i,a)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>G6(l,s,n))})})}function Kn(t,e,r,n,i){return Xe(this,void 0,void 0,function*(){return Y6(t,"POST",e,n,i,r)})}class J6{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},R1),r),this.fetch=I1(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Xe(this,void 0,void 0,function*(){try{return{data:(yield Kn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}getIndex(e,r){return Xe(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gn(n))return{data:null,error:n};throw n}})}listIndexes(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return Xe(this,void 0,void 0,function*(){try{return{data:(yield Kn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gn(n))return{data:null,error:n};throw n}})}}class X6{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},R1),r),this.fetch=I1(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Xe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Kn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}getVectors(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}listVectors(e){return Xe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Kn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}queryVectors(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}deleteVectors(e){return Xe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Kn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}}class Q6{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},R1),r),this.fetch=I1(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:(yield Kn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}getBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}listBuckets(){return Xe(this,arguments,void 0,function*(e={}){try{return{data:yield Kn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:(yield Kn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}}class Z6 extends Q6{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new eE(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Xe(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Xe(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Xe(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Xe(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class eE extends J6{constructor(e,r,n,i){super(e,r,i),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Xe(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Xe(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Xe(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Xe(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new tE(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class tE extends X6{constructor(e,r,n,i,a){super(e,r,a),this.vectorBucketName=n,this.indexName=i}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Xe(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Xe(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Xe(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Xe(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Xe(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class rE extends M6{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new D6(this.url,this.headers,e,this.fetch)}get vectors(){return new Z6(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new H6(this.url+"/iceberg",this.headers,this.fetch)}}const nE="2.86.0";let Yu="";typeof Deno<"u"?Yu="deno":typeof document<"u"?Yu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Yu="react-native":Yu="node";const iE={"X-Client-Info":`supabase-js-${Yu}/${nE}`},aE={headers:iE},oE={schema:"public"},sE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lE={},uE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),cE=()=>Headers,fE=(t,e,r)=>{const n=uE(r),i=cE();return async(a,o)=>{var s;const l=(s=await e())!==null&&s!==void 0?s:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(a,Object.assign(Object.assign({},o),{headers:u}))}};function dE(t){return t.endsWith("/")?t:t+"/"}function hE(t,e){var r,n;const{db:i,auth:a,realtime:o,global:s}=t,{db:l,auth:u,realtime:h,global:f}=e,d={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),s),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=s==null?void 0:s.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}function pE(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(dE(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Xx="2.86.0",Js=30*1e3,Vm=3,m0=Vm*Js,mE="http://localhost:9999",gE="supabase.auth.token",vE={"X-Client-Info":`gotrue-js/${Xx}`},Gm="X-Supabase-Api-Version",Qx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wE=10*60*1e3;class jc extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function rt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class bE extends jc{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function xE(t){return rt(t)&&t.name==="AuthApiError"}class Go extends jc{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class No extends jc{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class Wn extends No{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _E(t){return rt(t)&&t.name==="AuthSessionMissingError"}class zs extends No{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class td extends No{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class rd extends No{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function SE(t){return rt(t)&&t.name==="AuthImplicitGrantRedirectError"}class Jy extends No{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Km extends No{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function g0(t){return rt(t)&&t.name==="AuthRetryableFetchError"}class Xy extends No{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Ym extends No{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const sh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qy=` 	
\r=`.split(""),kE=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Qy.length;e+=1)t[Qy[e].charCodeAt(0)]=-2;for(let e=0;e<sh.length;e+=1)t[sh[e].charCodeAt(0)]=e;return t})();function Zy(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(sh[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(sh[n]),e.queuedBits-=6}}function Zx(t,e,r){const n=kE[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function e2(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{AE(o,n,r)};for(let o=0;o<t.length;o+=1)Zx(t.charCodeAt(o),i,a);return e.join("")}function NE(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function EE(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}NE(n,e)}}function AE(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function wl(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Zx(t.charCodeAt(i),r,n);return new Uint8Array(e)}function jE(t){const e=[];return EE(t,r=>e.push(r)),new Uint8Array(e)}function Zo(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>Zy(i,r,n)),Zy(null,r,n),e.join("")}function OE(t){return Math.round(Date.now()/1e3)+t}function LE(){return Symbol("auth-callback")}const zr=()=>typeof window<"u"&&typeof document<"u",Mo={tested:!1,writable:!1},e_=()=>{if(!zr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mo.tested)return Mo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Mo.tested=!0,Mo.writable=!0}catch{Mo.tested=!0,Mo.writable=!1}return Mo.writable};function PE(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const t_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),TE=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Xs=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Fo=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Xa=async(t,e)=>{await t.removeItem(e)};class qh{constructor(){this.promise=new qh.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}qh.promiseConstructor=Promise;function v0(t){const e=t.split(".");if(e.length!==3)throw new Ym("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!yE.test(e[n]))throw new Ym("JWT not in base64url format");return{header:JSON.parse(e2(e[0])),payload:JSON.parse(e2(e[1])),signature:wl(e[2]),raw:{header:e[0],payload:e[1]}}}async function CE(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function RE(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function IE(t){return("0"+t.toString(16)).substr(-2)}function DE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,IE).join("")}async function ME(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function FE(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await ME(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $s(t,e,r=!1){const n=DE();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Xs(t,`${e}-code-verifier`,i);const a=await FE(n);return[a,n===a?"plain":"s256"]}const BE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qE(t){const e=t.headers.get(Gm);if(!e||!e.match(BE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function UE(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function zE(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $E=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hs(t){if(!$E.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function y0(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function HE(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function t2(t){return JSON.parse(JSON.stringify(t))}const Uo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),WE=[502,503,504];async function r2(t){var e;if(!TE(t))throw new Km(Uo(t),0);if(WE.includes(t.status))throw new Km(Uo(t),t.status);let r;try{r=await t.json()}catch(a){throw new Go(Uo(a),a)}let n;const i=qE(t);if(i&&i.getTime()>=Qx["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Xy(Uo(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Wn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Xy(Uo(r),t.status,r.weak_password.reasons);throw new bE(Uo(r),t.status||500,n)}const VE=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ot(t,e,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[Gm]||(a[Gm]=Qx["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await GE(t,e,r+s,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function GE(t,e,r,n,i,a){const o=VE(e,n,i,a);let s;try{s=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new Km(Uo(l),0)}if(s.ok||await r2(s),n!=null&&n.noResolveJson)return s;try{return await s.json()}catch(l){await r2(l)}}function ji(t){var e;let r=null;JE(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=OE(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function n2(t){const e=ji(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ao(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function KE(t){return{data:t,error:null}}function YE(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=t,o=Bl(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},l=Object.assign({},o);return{data:{properties:s,user:l},error:null}}function i2(t){return t}function JE(t){return t.access_token&&t.refresh_token&&t.expires_in}const w0=["global","local","others"];class XE{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=t_(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=w0[0]){if(w0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${w0.join(", ")}`);try{return await ot(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ot(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ao})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Bl(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await ot(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:YE,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(rt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ot(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ao})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,a,o,s,l;try{const u={nextPage:null,lastPage:0,total:0},h=await ot(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:i2});if(h.error)throw h.error;const f=await h.json(),d=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,c=(l=(s=h.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return c.length>0&&(c.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(rt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Hs(e);try{return await ot(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ao})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Hs(e);try{return await ot(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ao})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Hs(e);try{return await ot(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ao})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Hs(e.userId);try{const{data:r,error:n}=await ot(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Hs(e.userId),Hs(e.id);try{return{data:await ot(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,a,o,s,l;try{const u={nextPage:null,lastPage:0,total:0},h=await ot(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:i2});if(h.error)throw h.error;const f=await h.json(),d=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,c=(l=(s=h.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return c.length>0&&(c.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(rt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await ot(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await ot(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await ot(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(rt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ot(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await ot(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}}function a2(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Ws={debug:!!(globalThis&&e_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class r_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class QE extends r_{}async function ZE(t,e,r){Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new QE(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ws.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function eA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function n_(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function tA(t){return parseInt(t,16)}function rA(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function nA(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:s,requestId:l,resources:u,scheme:h,uri:f,version:d}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const c=n_(t.address),y=h?`${h}://${n}`:n,v=t.statement?`${t.statement}
`:"",w=`${y} wants you to sign in with your Ethereum account:
${c}

${v}`;let m=`URI: ${f}
Version: ${d}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(m+=`
Expiration Time: ${i.toISOString()}`),s&&(m+=`
Not Before: ${s.toISOString()}`),l&&(m+=`
Request ID: ${l}`),u){let g=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);g+=`
- ${b}`}m+=g}return`${w}
${m}`}class Ar extends Error{constructor({message:e,code:r,cause:n,name:i}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class lh extends Ar{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function iA({error:t,options:e}){var r,n,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ar({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ar({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ar({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ar({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ar({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ar({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new Ar({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ar({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(i_(o)){if(a.rp.id!==o)return new Ar({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ar({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Ar({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ar({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ar({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function aA({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ar({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ar({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(i_(n)){if(r.rpId!==n)return new Ar({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ar({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ar({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ar({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class oA{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const sA=new oA;function lA(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=Bl(t,["challenge","user","excludeCredentials"]),a=wl(e).buffer,o=Object.assign(Object.assign({},r),{id:wl(r.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:a,user:o});if(n&&n.length>0){s.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];s.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:wl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function uA(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Bl(t,["challenge","allowCredentials"]),i=wl(e).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const s=r[o];a.allowCredentials[o]=Object.assign(Object.assign({},s),{id:wl(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return a}function cA(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Zo(new Uint8Array(t.response.attestationObject)),clientDataJSON:Zo(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function fA(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Zo(new Uint8Array(i.authenticatorData)),clientDataJSON:Zo(new Uint8Array(i.clientDataJSON)),signature:Zo(new Uint8Array(i.signature)),userHandle:i.userHandle?Zo(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function i_(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function o2(){var t,e;return!!(zr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function dA(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lh("Browser returned unexpected credential type",e)}:{data:null,error:new lh("Empty credential response",e)}}catch(e){return{data:null,error:iA({error:e,options:t})}}}async function hA(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lh("Browser returned unexpected credential type",e)}:{data:null,error:new lh("Empty credential response",e)}}catch(e){return{data:null,error:aA({error:e,options:t})}}}const pA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},mA={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function uh(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))n[a]=o;else if(r(o))n[a]=o;else if(e(o)){const s=n[a];e(s)?n[a]=uh(s,o):n[a]=uh(o)}else n[a]=o}return n}function gA(t,e){return uh(pA,t,e||{})}function vA(t,e){return uh(mA,t,e||{})}class yA{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},a){try{const{data:o,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:s};const l=i??sA.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=gA(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:f}=await dA({publicKey:u,signal:l});return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const u=vA(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:f}=await hA(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(o){return rt(o)?{data:null,error:o}:{data:null,error:new Go("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new jc("rpId is required for WebAuthn authentication")};try{if(!o2())return{data:null,error:new Go("Browser does not support WebAuthn",null)};const{data:o,error:s}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!o)return{data:null,error:s};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return rt(o)?{data:null,error:o}:{data:null,error:new Go("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new jc("rpId is required for WebAuthn registration")};try{if(!o2())return{data:null,error:new Go("Browser does not support WebAuthn",null)};const{data:o,error:s}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(d=>d.factor_type==="webauthn"&&d.friendly_name===e&&d.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:s};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return rt(o)?{data:null,error:o}:{data:null,error:new Go("Unexpected error in register",o)}}}}eA();const wA={url:mE,storageKey:gE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function s2(t,e,r){return await r()}const Vs={};class Oc{get jwks(){var e,r;return(r=(e=Vs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Vs[this.storageKey]=Object.assign(Object.assign({},Vs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Vs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vs[this.storageKey]=Object.assign(Object.assign({},Vs[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},wA),e);if(this.storageKey=a.storageKey,this.instanceID=(r=Oc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Oc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&zr()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new XE({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=t_(a.fetch),this.lock=a.lock||s2,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:zr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ZE:this.lock=s2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new yA(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:e_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=a2(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=a2(this.memoryStorage)),zr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Xx}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(zr()&&(r=PE(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),zr()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),SE(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return rt(r)?this._returnResult({error:r}):this._returnResult({error:new Go("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const a=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ji}),{data:o,error:s}=a;if(s||!o)return this._returnResult({data:{user:null,session:null},error:s});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(rt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var r,n,i;try{let a;if("email"in e){const{email:h,password:f,options:d}=e;let c=null,y=null;this.flowType==="pkce"&&([c,y]=await $s(this.storage,this.storageKey)),a=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:h,password:f,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:c,code_challenge_method:y},xform:ji})}else if("phone"in e){const{phone:h,password:f,options:d}=e;a=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:ji})}else throw new td("You must provide either an email or phone number and a password");const{data:o,error:s}=a;if(s||!o)return this._returnResult({data:{user:null,session:null},error:s});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(rt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:s}=e;r=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:n2})}else if("phone"in e){const{phone:a,password:o,options:s}=e;r=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:n2})}else throw new td("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new zs;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(rt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,a,o,s,l,u,h,f,d;let c,y;if("message"in e)c=e.message,y=e.signature;else{const{chain:v,wallet:w,statement:m,options:g}=e;let b;if(zr())if(typeof w=="object")b=w;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")b=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=w}const S=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href),E=await b.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=n_(E[0]);let L=(n=g==null?void 0:g.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!L){const M=await b.request({method:"eth_chainId"});L=tA(M)}const O={domain:S.host,address:I,statement:m,uri:S.href,version:"1",chainId:L,nonce:(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=g==null?void 0:g.signInWithEthereum)===null||h===void 0?void 0:h.resources};c=nA(O),y=await b.request({method:"personal_sign",params:[rA(c),I]})}try{const{data:v,error:w}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:c,signature:y},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:ji});if(w)throw w;if(!v||!v.session||!v.user){const m=new zs;return this._returnResult({data:{user:null,session:null},error:m})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:w})}catch(v){if(rt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var r,n,i,a,o,s,l,u,h,f,d,c;let y,v;if("message"in e)y=e.message,v=e.signature;else{const{chain:w,wallet:m,statement:g,options:b}=e;let S;if(zr())if(typeof m=="object")S=m;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))S=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=m}const E=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const I=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),g?{statement:g}:null));let L;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")L=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)L=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)y=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),v=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${E.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(i=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(h=b==null?void 0:b.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const I=await S.signMessage(new TextEncoder().encode(y),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=I}}try{const{data:w,error:m}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Zo(v)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(c=e.options)===null||c===void 0?void 0:c.captchaToken}}:null),xform:ji});if(m)throw m;if(!w||!w.session||!w.user){const g=new zs;return this._returnResult({data:{user:null,session:null},error:g})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:m})}catch(w){if(rt(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const r=await Fo(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:o}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ji});if(await Xa(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const s=new zs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(rt(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:a,nonce:o}=e,s=await ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ji}),{data:l,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const h=new zs;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(rt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,a,o;try{if("email"in e){const{email:s,options:l}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await $s(this.storage,this.storageKey));const{error:f}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:s,options:l}=e,{data:u,error:h}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new td("You must provide either an email or phone number.")}catch(s){if(rt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var r,n;try{let i,a;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:s}=await ot(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:ji});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(rt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,a,o;try{let s=null,l=null;this.flowType==="pkce"&&([s,l]=await $s(this.storage,this.storageKey));const u=await ot(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:KE});return!((a=u.data)===null||a===void 0)&&a.url&&zr()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(s){if(rt(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Wn;const{error:i}=await ot(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(rt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:o}=await ot(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:o,error:s}=await ot(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:s})}throw new td("You must provide either an email or phone number and a type")}catch(r){if(rt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Fo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<m0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Fo(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=y0()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=HE(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ao}):await this._useSession(async r=>{var n,i,a;const{data:o,error:s}=r;if(s)throw s;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wn}:await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:ao})})}catch(r){if(rt(r))return _E(r)&&(await this._removeSession(),await Xa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new Wn;const o=i.session;let s=null,l=null;this.flowType==="pkce"&&e.email!=null&&([s,l]=await $s(this.storage,this.storageKey));const{data:u,error:h}=await ot(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:o.access_token,xform:ao});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(rt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Wn;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:o}=v0(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{data:s,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s)return{data:{user:null,session:null},error:null};a=s}else{const{data:s,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(rt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:s}=r;if(s)throw s;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Wn;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(rt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!zr())throw new rd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new rd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Jy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new rd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Jy("No code detected.");const{data:g,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:s,expires_at:l,token_type:u}=e;if(!a||!s||!o||!u)throw new rd("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(s);let d=h+f;l&&(d=parseInt(l));const c=d-h;c*1e3<=Js&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${c}s, should have been closer to ${f}s`);const y=d-f;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,d,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,d,h);const{data:v,error:w}=await this._getUser(a);if(w)throw w;const m={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:d,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:e.type},error:null})}catch(n){if(rt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Fo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({error:a});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:s}=await this.admin.signOut(o,e);if(s&&!(xE(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await Xa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=LE(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await $s(this.storage,this.storageKey,!0));try{return await ot(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(rt(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var o,s,l,u,h;const{data:f,error:d}=a;if(d)throw d;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ot(this.fetch,"GET",c,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return zr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(rt(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:o,provider:s,token:l,access_token:u,nonce:h}=e,f=await ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:s,id_token:l,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ji}),{data:d,error:c}=f;return c?this._returnResult({data:{user:null,session:null},error:c}):!d||!d.session||!d.user?this._returnResult({data:{user:null,session:null},error:new zs}):(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:c}))}catch(i){if(rt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)throw o;return await ot(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await RE(async i=>(i>0&&await CE(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await ot(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ji})),(i,a)=>{const o=200*Math.pow(2,i);return a&&g0(a)&&Date.now()+o-n<Js})}catch(n){if(this._debug(r,"error",n),rt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),zr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Fo(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Fo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Xs(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:y0()}else if(i&&!i.user&&!i.user){const o=await Fo(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Xa(this.storage,this.storageKey+"-user"),await Xs(this.storage,this.storageKey,i)):i.user=y0()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<m0;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${m0}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),g0(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:s}=await this._getUser(i.access_token);!s&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Wn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new qh;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new Wn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const s={data:a.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(a){if(this._debug(i,"error",a),rt(a)){const o={data:null,error:a};return g0(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,r)}catch(l){a.push(l)}});if(await Promise.all(o),a.length>0){for(let s=0;s<a.length;s+=1)console.error(a[s]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Xs(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=t2(i);await Xs(this.storage,this.storageKey,a)}else{const i=t2(r);await Xs(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Xa(this.storage,this.storageKey),await Xa(this.storage,this.storageKey+"-code-verifier"),await Xa(this.storage,this.storageKey+"-user"),this.userStorage&&await Xa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&zr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Js);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Js);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Js}ms, refresh threshold is ${Vm} ticks`),i<=Vm&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof r_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await $s(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(s.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?this._returnResult({data:null,error:a}):await ot(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await ot(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?cA(e.webauthn.credential_response):fA(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:l}=await ot(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:l}))})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=await ot(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:s}=o;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:lA(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:uA(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=v0(n.access_token);let o=null;a.aal&&(o=a.aal);let s=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(s="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:s,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await ot(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Wn})})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new Wn});const o=await ot(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return o.data&&o.data.redirect_url&&zr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(rt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new Wn});const o=await ot(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return o.data&&o.data.redirect_url&&zr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(rt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await ot(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Wn})})}catch(e){if(rt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await ot(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Wn})})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(s=>s.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(s=>s.kid===e),n&&this.jwks_cached_at+wE>i)return n;const{data:a,error:o}=await ot(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(s=>s.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:c,error:y}=await this.getSession();if(y||!c.session)return this._returnResult({data:null,error:y});n=c.session.access_token}const{header:i,payload:a,signature:o,raw:{header:s,payload:l}}=v0(n);r!=null&&r.allowExpired||UE(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:c}=await this.getUser(n);if(c)throw c;return{data:{claims:a,header:i,signature:o},error:null}}const h=zE(i.alg),f=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,o,jE(`${s}.${l}`)))throw new Ym("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(n){if(rt(n))return this._returnResult({data:null,error:n});throw n}}}Oc.nextInstanceID={};const bA=Oc;class xA extends bA{constructor(e){super(e)}}class _A{constructor(e,r,n){var i,a,o;this.supabaseUrl=e,this.supabaseKey=r;const s=pE(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,u={db:oE,realtime:lE,auth:Object.assign(Object.assign({},sE),{storageKey:l}),global:aE},h=hE(n??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=fE(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new l6(new URL("rest/v1",s).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new rE(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new a6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:o,flowType:s,lock:l,debug:u,throwOnError:h},f,d){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new xA({url:this.authUrl.href,headers:Object.assign(Object.assign({},c),f),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:s,lock:l,debug:u,throwOnError:h,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new N6(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const SA=(t,e,r)=>new _A(t,e,r);function kA(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}kA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const NA="https://ccgiozknvlknbrkzfcdx.supabase.co",EA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNjZ2lvemtudmxrbmJya3pmY2R4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4NTY3NTMsImV4cCI6MjA3ODQzMjc1M30.lmmuGnynbY_n_4UlsrGw5ofRd6p9QLKCcrfHf7itEg8",Mt=SA(NA,EA),AA={success:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),error:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),info:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},jA={success:"bg-green-50 border-green-200 dark:bg-green-900/50 dark:border-green-700 text-green-800 dark:text-green-200",error:"bg-red-50 border-red-200 dark:bg-red-900/50 dark:border-red-700 text-red-800 dark:text-red-200",info:"bg-blue-50 border-blue-200 dark:bg-blue-900/50 dark:border-blue-700 text-blue-800 dark:text-blue-200"},OA=({toast:t,onDismiss:e})=>{const[r,n]=ie.useState(!1);ie.useEffect(()=>{const o=setTimeout(()=>{n(!0),setTimeout(()=>e(t.id),300)},5e3);return()=>clearTimeout(o)},[t.id,e]);const i=()=>{n(!0),setTimeout(()=>e(t.id),300)},a=r?"animate-toast-out":"animate-toast-in";return x.jsxs("div",{role:"alert",className:`w-full p-4 rounded-lg shadow-lg border flex items-start gap-4 ${jA[t.type]} ${a}`,children:[x.jsx("div",{className:"flex-shrink-0",children:AA[t.type]}),x.jsx("div",{className:"flex-1 text-sm font-medium",children:t.message}),x.jsx("button",{onClick:i,className:"p-1 rounded-md -m-1 hover:bg-black/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-current","aria-label":"Dismiss",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})},LA=({toasts:t,onDismiss:e})=>x.jsx("div",{className:"fixed top-5 right-5 z-50 space-y-3 w-full max-w-sm","aria-live":"assertive",children:t.map(r=>x.jsx(OA,{toast:r,onDismiss:e},r.id))}),a_=ie.createContext(void 0),PA=({children:t})=>{const[e,r]=ie.useState([]),[n,i]=ie.useState(null);ie.useEffect(()=>{const s=document.getElementById("portal-root");s&&i(s)},[]);const a=ie.useCallback((s,l="info")=>{const u=Date.now().toString()+Math.random().toString();r(h=>[...h,{id:u,message:s,type:l}])},[]),o=ie.useCallback(s=>{r(l=>l.filter(u=>u.id!==s))},[]);return x.jsxs(a_.Provider,{value:{addToast:a},children:[t,n&&w1.createPortal(x.jsx(LA,{toasts:e,onDismiss:o}),n)]})},Uh=()=>{const t=ie.useContext(a_);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},TA=({focusState:t,emailProgress:e,typingCounter:r,isPasswordVisible:n=!1})=>{const i=()=>t==="email"?`rotate(${Math.max(-8,Math.min(8,e*16-8))}deg)`:"rotate(0deg)",a=()=>t==="password"?"translate(0px, 5px)":t==="email"?`translate(${r%2===0?-1.5:1.5}px, 5px)`:"translate(0px, 0px)",o=()=>t==="password"?n?"translateY(15px)":"translateY(0px)":"translateY(100px)";return x.jsxs("svg",{width:"140",height:"140",viewBox:"0 0 100 100",className:"mx-auto -mb-6",style:{zIndex:10,position:"relative",overflow:"hidden"},"aria-hidden":"true",children:[x.jsxs("defs",{children:[x.jsxs("linearGradient",{id:"furGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[x.jsx("stop",{offset:"0%",stopColor:"#D97706"})," ",x.jsx("stop",{offset:"100%",stopColor:"#92400E"})," "]}),x.jsxs("linearGradient",{id:"skinGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[x.jsx("stop",{offset:"0%",stopColor:"#FEF3C7"})," ",x.jsx("stop",{offset:"100%",stopColor:"#FDE68A"})," "]}),x.jsxs("radialGradient",{id:"eyeShine",cx:"30%",cy:"30%",r:"50%",children:[x.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0.9"}),x.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]}),x.jsxs("filter",{id:"softShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[x.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"3"}),x.jsx("feOffset",{dx:"0",dy:"4",result:"offsetblur"}),x.jsx("feComponentTransfer",{children:x.jsx("feFuncA",{type:"linear",slope:"0.2"})}),x.jsxs("feMerge",{children:[x.jsx("feMergeNode",{}),x.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),x.jsxs("g",{id:"head-group",style:{transition:"transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",transform:i(),transformOrigin:"50px 55px"},filter:"url(#softShadow)",children:[x.jsx("circle",{cx:"18",cy:"50",r:"12",fill:"url(#furGradient)"}),x.jsx("circle",{cx:"82",cy:"50",r:"12",fill:"url(#furGradient)"}),x.jsx("ellipse",{cx:"50",cy:"55",rx:"38",ry:"34",fill:"url(#furGradient)"}),x.jsx("path",{d:"M50 35 C 35 35, 25 45, 25 60 C 25 75, 35 85, 50 85 C 65 85, 75 75, 75 60 C 75 45, 65 35, 50 35 Z",fill:"url(#skinGradient)"}),x.jsx("circle",{cx:"18",cy:"50",r:"7",fill:"#FDE68A",opacity:"0.8"}),x.jsx("circle",{cx:"82",cy:"50",r:"7",fill:"#FDE68A",opacity:"0.8"}),x.jsx("path",{d:"M46 22 Q 50 15, 54 22",stroke:"url(#furGradient)",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),x.jsxs("g",{id:"eyes",transform:"translate(0, 2)",children:[x.jsx("circle",{cx:"36",cy:"52",r:"9",fill:"white"}),x.jsx("circle",{cx:"64",cy:"52",r:"9",fill:"white"}),x.jsxs("g",{style:{transition:"transform 0.1s ease-out",transform:a()},children:[x.jsx("circle",{cx:"36",cy:"52",r:"4",fill:"#1E293B"}),x.jsx("circle",{cx:"64",cy:"52",r:"4",fill:"#1E293B"}),x.jsx("circle",{cx:"38",cy:"50",r:"2",fill:"white",opacity:"0.6"}),x.jsx("circle",{cx:"66",cy:"50",r:"2",fill:"white",opacity:"0.6"})]})]}),x.jsx("ellipse",{cx:"50",cy:"68",rx:"5",ry:"3",fill:"#1E293B",opacity:"0.8"}),x.jsx("path",{d:"M42 76 Q 50 82, 58 76",stroke:"#4B5563",strokeWidth:"2",fill:"transparent",strokeLinecap:"round",style:{transition:"d 0.3s"}})]}),x.jsxs("g",{id:"hands-group",style:{transition:"transform 0.5s cubic-bezier(0.25, 1, 0.5, 1)",transform:o()},filter:"url(#softShadow)",children:[x.jsx("path",{d:"M10 100 L 15 60 Q 15 45, 30 45 Q 45 45, 45 60 L 45 100 Z",fill:"url(#furGradient)",stroke:"#78350F",strokeWidth:"1"}),x.jsx("path",{d:"M30 45 L 30 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),x.jsx("path",{d:"M37 47 L 37 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),x.jsx("path",{d:"M23 47 L 23 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),x.jsx("path",{d:"M90 100 L 85 60 Q 85 45, 70 45 Q 55 45, 55 60 L 55 100 Z",fill:"url(#furGradient)",stroke:"#78350F",strokeWidth:"1"}),x.jsx("path",{d:"M70 45 L 70 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),x.jsx("path",{d:"M63 47 L 63 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),x.jsx("path",{d:"M77 47 L 77 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"})]})]})},CA=()=>{const t=Ra(),[e,r]=ie.useState(!1),[n,i]=ie.useState(""),[a,o]=ie.useState(""),[s,l]=ie.useState(!1),[u,h]=ie.useState(null),{addToast:f}=Uh(),[d,c]=ie.useState("idle"),[y,v]=ie.useState(0),[w,m]=ie.useState(!1),g=()=>c("email"),b=()=>c("password"),S=()=>c("idle"),E=()=>{v(C=>C+1)},I=ie.useMemo(()=>{if(!a)return 0;let C=0;return a.length>=6&&C++,a.length>=10&&C++,/[A-Z]/.test(a)&&C++,(/[0-9]/.test(a)||/[^A-Za-z0-9]/.test(a))&&C++,C},[a]),L=()=>{switch(I){case 0:return"Too Short";case 1:return"Weak";case 2:return"Fair";case 3:return"Good";case 4:return"Strong";default:return""}},O=()=>{switch(I){case 0:case 1:return"bg-red-500";case 2:return"bg-yellow-500";case 3:return"bg-blue-500";case 4:return"bg-green-500";default:return"bg-slate-200"}},M=async()=>{const{error:C}=await Mt.auth.signUp({email:n,password:a,options:{emailRedirectTo:"https://aklabx.github.io/diary/"}});if(C)throw C;f("Check your email for the confirmation link!","success")},T=async()=>{const{error:C}=await Mt.auth.signInWithPassword({email:n,password:a});if(C)throw C},k=async()=>{r(!0),h(null);try{const{error:C}=await Mt.auth.signInWithOAuth({provider:"google",options:{redirectTo:"https://aklabx.github.io/diary/"}});if(C)throw C}catch(C){h(C.error_description||C.message),r(!1)}},A=async C=>{C.preventDefault(),r(!0),h(null);try{s?await M():await T()}catch(V){h(V.error_description||V.message)}finally{r(!1)}},R=Math.min(n.length/30,1);return x.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[#FBF8F3] dark:bg-slate-900 animate-fade-in relative p-4",children:[x.jsxs("button",{onClick:()=>t("/"),className:"absolute top-6 left-6 flex items-center gap-2 text-slate-500 hover:text-indigo-600 transition-colors font-medium",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Home"]}),x.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-700",children:[x.jsx(TA,{focusState:d,emailProgress:R,typingCounter:y,isPasswordVisible:w}),x.jsxs("div",{className:"text-center",children:[x.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Diary"}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:s?"Create a secure, encrypted account.":"Sign in to access your journal."})]}),u&&x.jsx("p",{className:"text-center text-red-500 bg-red-50 dark:bg-red-900/20 dark:text-red-300 p-3 rounded-md",children:u}),x.jsxs("form",{className:"space-y-6",onSubmit:A,children:[x.jsx("input",{type:"email",placeholder:"Your email",value:n,required:!0,onChange:C=>{i(C.target.value),E()},onFocus:g,onBlur:S,onKeyDown:E,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 transition-all",autoComplete:"username"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:w?"text":"password",placeholder:"Your password (min 6 characters)",value:a,required:!0,minLength:6,onChange:C=>{o(C.target.value),E()},onFocus:b,onBlur:S,onKeyDown:E,className:"w-full px-4 py-3 pr-12 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 transition-all",autoComplete:s?"new-password":"current-password"}),x.jsx("button",{type:"button",onClick:()=>m(!w),className:"absolute inset-y-0 right-0 flex items-center px-4 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors",tabIndex:-1,"aria-label":w?"Hide password":"Show password",children:w?x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),x.jsx("path",{fillRule:"evenodd",d:"M.458 10C3.732 4.943 9.522 3 10 3s6.268 1.943 9.542 7c-3.274 5.057-9.042 7-9.542 7S3.732 15.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.27 8.138 15.522 6 10 6c-1.55 0-2.998.48-4.257 1.254l-1.74-1.741zM10 12a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"}),x.jsx("path",{d:"M2.042 10c.832 2.345 3.16 4 5.918 4 1.55 0 2.998-.48 4.257-1.254l-1.473-1.473A3.999 3.999 0 0110 14c-2.209 0-4-1.791-4-4a3.999 3.999 0 011.21-2.828L5.293 5.293A10.014 10.014 0 00.458 10c1.274 1.862 4.022 4 9.542 4 1.105 0 2.158-.149 3.168-.43L10.373 12.16A4.003 4.003 0 0110 12z"})]})})]}),s&&a.length>0&&x.jsxs("div",{className:"space-y-2 animate-fade-in",children:[x.jsxs("div",{className:"flex gap-1 h-1.5 w-full",children:[x.jsx("div",{className:`h-full rounded-full flex-1 transition-all duration-300 ${I>=1?O():"bg-slate-100 dark:bg-slate-700"}`}),x.jsx("div",{className:`h-full rounded-full flex-1 transition-all duration-300 ${I>=2?O():"bg-slate-100 dark:bg-slate-700"}`}),x.jsx("div",{className:`h-full rounded-full flex-1 transition-all duration-300 ${I>=3?O():"bg-slate-100 dark:bg-slate-700"}`}),x.jsx("div",{className:`h-full rounded-full flex-1 transition-all duration-300 ${I>=4?O():"bg-slate-100 dark:bg-slate-700"}`})]}),x.jsxs("div",{className:"flex justify-between text-xs",children:[x.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Strength"}),x.jsx("span",{className:`font-medium ${I<2?"text-red-500":I<4?"text-blue-500":"text-green-500"}`,children:L()})]})]}),x.jsx("button",{type:"submit",disabled:e,className:"w-full px-4 py-3 font-bold text-white bg-indigo-500 rounded-xl hover:bg-indigo-600 disabled:bg-indigo-300 transition-all transform active:scale-95 shadow-lg shadow-indigo-500/30",children:e?"Loading...":s?"Sign Up":"Sign In"})]}),x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute inset-0 flex items-center",children:x.jsx("div",{className:"w-full border-t border-slate-200 dark:border-slate-600"})}),x.jsx("div",{className:"relative flex justify-center text-sm",children:x.jsx("span",{className:"px-2 bg-.white dark:bg-slate-800 text-slate-500 dark:text-slate-400",children:"Or continue with"})})]}),x.jsxs("button",{type:"button",onClick:k,disabled:e,className:"w-full flex items-center justify-center gap-3 px-4 py-3 border border-slate-200 rounded-xl hover:bg-slate-50 disabled:bg-slate-50 dark:border-slate-600 dark:hover:bg-slate-700 dark:disabled:bg-slate-700 transition-colors",children:[x.jsxs("svg",{className:"w-5 h-5","aria-hidden":"true",viewBox:"0 0 24 24",children:[x.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),x.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.8 0-5.2-1.89-6.06-4.44H2.36v2.84C4.01 20.44 7.7 23 12 23z",fill:"#34A853"}),x.jsx("path",{d:"M5.94 14.06c-.18-.54-.28-1.11-.28-1.69s.1-1.15.28-1.69V7.84H2.36C1.5 9.49 1 11.18 1 12.87s.5 3.38 1.36 4.96l3.58-2.77z",fill:"#FBBC05"}),x.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 1.33 14.97 0 12 0 7.7 0 4.01 2.56 2.36 6.21l3.58 2.84C6.8 4.73 9.2 2.84 12 5.38z",fill:"#EA4335"})]}),x.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Sign in with Google"})]}),x.jsxs("p",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:[s?"Already have an account? ":"Don't have an account? ",x.jsx("button",{onClick:()=>{l(!s),h(null)},className:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300",children:s?"Sign In":"Sign Up"})]})]})]})},RA=()=>{const t=Ra(),[e,r]=ie.useState(0),n=["Thoughts","Secrets","Memories","Dreams"],[i,a]=ie.useState(0),[o,s]=ie.useState(""),[l,u]=ie.useState(!1),[h,f]=ie.useState(null);ie.useEffect(()=>{const y=v=>{v.preventDefault(),f(v)};return window.addEventListener("beforeinstallprompt",y),()=>window.removeEventListener("beforeinstallprompt",y)},[]);const d=async()=>{if(!h)return;h.prompt();const{outcome:y}=await h.userChoice;console.log(`User response to the install prompt: ${y}`),f(null)};ie.useEffect(()=>{const y=n[i],w=setTimeout(()=>{if(!l&&o===y)setTimeout(()=>u(!0),2e3);else if(l&&o==="")u(!1),a(m=>(m+1)%n.length);else{const m=l?y.substring(0,o.length-1):y.substring(0,o.length+1);s(m)}},l?50:100);return()=>clearTimeout(w)},[o,l,i]),ie.useEffect(()=>{const y=()=>{r(0),setTimeout(()=>r(1),2500),setTimeout(()=>r(2),4e3),setTimeout(()=>r(0),6e3)};y();const v=setInterval(y,6e3);return()=>clearInterval(v)},[]);const c=()=>{t("/login")};return x.jsxs("div",{className:"min-h-screen bg-[#FBF8F3] text-slate-800 font-sans overflow-x-hidden selection:bg-indigo-200",children:[x.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none overflow-hidden",children:[x.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] rounded-full bg-indigo-200/30 blur-[100px]"}),x.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] rounded-full bg-orange-100/50 blur-[100px]"})]}),x.jsxs("nav",{className:"relative z-20 flex items-center justify-between px-6 py-6 max-w-6xl mx-auto",children:[x.jsxs("div",{className:"text-2xl font-bold font-serif tracking-tight flex items-center gap-2 text-slate-800",children:[x.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-lg shadow-indigo-900/5 border border-slate-100",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-indigo-600",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),x.jsx("span",{children:"Diary"})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[h&&x.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-3 py-2 sm:px-5 sm:py-2.5 rounded-full text-indigo-700 font-semibold bg-white shadow-sm border border-indigo-100 hover:bg-indigo-50 transition-all hover:scale-105 text-sm sm:text-base",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),x.jsx("span",{className:"sm:hidden",children:"Install"}),x.jsx("span",{className:"hidden sm:inline",children:"Install App"})]}),x.jsx("button",{onClick:c,className:"px-8 py-2.5 rounded-full text-white font-semibold bg-gradient-to-br from-indigo-400 to-purple-600 shadow-[inset_0_2px_4px_rgba(255,255,255,0.3),inset_0_-2px_4px_rgba(0,0,0,0.2),0_8px_20px_-6px_rgba(124,58,237,0.5)] hover:scale-105 transition-transform border border-indigo-300/50",children:"Log In"})]})]}),x.jsxs("main",{className:"relative z-10 w-full flex flex-col items-center",children:[x.jsxs("section",{className:"max-w-6xl mx-auto px-6 pb-20 pt-10 w-full flex flex-col items-center",children:[x.jsxs("div",{className:"w-full flex justify-center perspective-1000 py-12 sm:py-16 relative",children:[x.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 w-56 h-8 bg-black/20 blur-2xl rounded-[100%]"}),x.jsxs("div",{className:"relative w-[280px] h-[580px] bg-slate-900 rounded-[3.5rem] border-[6px] border-slate-950 shadow-[0_0_0_1.5px_rgba(255,255,255,0.15),0_50px_100px_-20px_rgba(0,0,0,0.5)] animate-float-phone preserve-3d",children:[x.jsx("div",{className:"absolute inset-0 rounded-[3.2rem] bg-gradient-to-tr from-white/10 via-transparent to-transparent pointer-events-none z-20"}),x.jsx("div",{className:"absolute top-24 -right-[7px] w-[7px] h-16 bg-slate-800 rounded-r-md border-l border-slate-950 shadow-sm"}),x.jsx("div",{className:"absolute top-24 -left-[7px] w-[7px] h-10 bg-slate-800 rounded-l-md border-r border-slate-950 shadow-sm"}),x.jsx("div",{className:"absolute top-36 -left-[7px] w-[7px] h-10 bg-slate-800 rounded-l-md border-r border-slate-950 shadow-sm"}),x.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1/3 h-7 bg-black rounded-b-2xl z-30 flex justify-center items-center",children:x.jsx("div",{className:"w-12 h-1.5 bg-slate-800/50 rounded-full"})}),x.jsxs("div",{className:"absolute inset-[6px] bg-[#FBF8F3] rounded-[3.1rem] overflow-hidden flex flex-col shadow-inner",children:[x.jsxs("div",{className:"h-20 bg-white flex items-end pb-4 px-6 justify-between border-b border-slate-100",children:[x.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 animate-pulse"}),x.jsx("div",{className:"h-4 w-24 bg-slate-100 rounded"})]}),x.jsxs("div",{className:"flex-1 p-5 space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("div",{className:"h-6 w-3/4 bg-slate-200/50 rounded"}),x.jsx("div",{className:"h-3 w-1/2 bg-slate-200/30 rounded"})]}),x.jsxs("div",{className:"p-5 rounded-2xl bg-white shadow-sm border border-slate-100 min-h-[220px] font-serif text-lg relative overflow-hidden flex flex-col",children:[x.jsx("div",{className:"text-xs font-sans uppercase tracking-wider text-slate-300 mb-4",children:"Nov 18, 2025"}),e===0&&x.jsxs("div",{className:"text-slate-700 leading-relaxed",children:["My deepest secret is",x.jsx("span",{className:"typing-cursor border-indigo-500",children:"|"})]}),e===1&&x.jsx("div",{className:"break-all animate-matrix text-emerald-600 font-mono text-xs leading-relaxed opacity-80",children:"0x9F3a2B1c8D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e"}),e===2&&x.jsxs("div",{className:"flex flex-1 items-center justify-center flex-col gap-3",children:[x.jsx("div",{className:"w-16 h-16 bg-indigo-50 rounded-full flex items-center justify-center",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-indigo-500",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),x.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:"Secure"})]})]})]}),x.jsx("div",{className:"h-6 w-full flex justify-center items-start pt-1",children:x.jsx("div",{className:"w-1/3 h-1 bg-slate-300 rounded-full"})})]})]})]}),x.jsxs("div",{className:"text-center space-y-8 max-w-2xl",children:[x.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-bold font-serif leading-[1.1] tracking-tight text-slate-900",children:["Your ",x.jsx("span",{className:"text-indigo-600 inline-block min-w-[200px] border-b-4 border-indigo-200",children:o}),x.jsx("br",{}),"Encrypted. Forever."]}),x.jsxs("p",{className:"text-lg sm:text-xl text-slate-500 leading-relaxed max-w-lg mx-auto",children:["Write freely in a beautiful, private space. Secured with military-grade encryption that only ",x.jsx("strong",{children:"you"})," hold the keys to."]}),x.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 justify-center pt-4",children:[x.jsxs("button",{onClick:c,className:"px-8 py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-bold text-lg transition-all hover:scale-105 hover:-translate-y-1 shadow-xl shadow-indigo-200 flex items-center gap-2",children:["Get Started for Free",x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),h&&x.jsxs("button",{onClick:d,className:"px-8 py-4 bg-white text-indigo-700 border-2 border-indigo-100 rounded-2xl font-bold text-lg transition-all hover:scale-105 hover:-translate-y-1 shadow-lg hover:shadow-xl flex items-center gap-2",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M10.75 2.75a.75.75 0 00-1.5 0v8.614L6.295 8.235a.75.75 0 10-1.09 1.03l4.25 4.5a.75.75 0 001.09 0l4.25-4.5a.75.75 0 00-1.09-1.03l-2.965 3.129V2.75z"}),x.jsx("path",{d:"M3.5 12.75a.75.75 0 00-1.5 0v2.5A2.75 2.75 0 004.75 18h10.5A2.75 2.75 0 0018 15.25v-2.5a.75.75 0 00-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5z"})]}),"Download App"]})]}),x.jsxs("div",{className:"pt-10 flex flex-wrap justify-center gap-x-8 gap-y-4 opacity-60 text-slate-400 font-medium text-sm",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"End-to-End Encrypted"]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),"Biometric Lock"]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Local First"]})]})]})]}),x.jsx("section",{className:"w-full bg-white py-24 border-y border-slate-100",children:x.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[x.jsxs("div",{className:"text-center mb-16",children:[x.jsx("h2",{className:"text-3xl font-bold font-serif text-slate-900 mb-4",children:"How Your Privacy is Guaranteed"}),x.jsx("p",{className:"text-slate-500 max-w-lg mx-auto",children:"We don't rely on trust. We rely on math. Here is the lifecycle of your diary data."})]}),x.jsxs("div",{className:"relative border-l-2 border-indigo-100 ml-6 md:ml-12 space-y-16",children:[x.jsxs("div",{className:"relative pl-8 md:pl-12",children:[x.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-indigo-500 shadow-lg shadow-indigo-200 ring-4 ring-white"}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-8",children:[x.jsx("div",{className:"w-16 h-16 rounded-2xl bg-orange-50 flex items-center justify-center text-orange-500 flex-shrink-0",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"1. Local Key Generation"}),x.jsx("p",{className:"text-slate-600 leading-relaxed",children:"When you create your account, your browser generates a unique 256-bit encryption key. This process happens entirely on your device. We never see this key."})]})]})]}),x.jsxs("div",{className:"relative pl-8 md:pl-12",children:[x.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-white border-2 border-indigo-300"}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-8",children:[x.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-500 flex-shrink-0",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"2. The Biometric Vault"}),x.jsx("p",{className:"text-slate-600 leading-relaxed",children:"Your key is wrapped using your device's secure hardware (FaceID or TouchID). This allows you to unlock your diary instantly without typing a password, while keeping the key mathematically secure."})]})]})]}),x.jsxs("div",{className:"relative pl-8 md:pl-12",children:[x.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-white border-2 border-indigo-300"}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-8",children:[x.jsx("div",{className:"w-16 h-16 rounded-2xl bg-emerald-50 flex items-center justify-center text-emerald-500 flex-shrink-0",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"3. Zero-Knowledge Sync"}),x.jsxs("p",{className:"text-slate-600 leading-relaxed",children:["When you save an entry, it is encrypted ",x.jsx("i",{children:"before"}),' it leaves your browser. Our servers only receive a scrambled "blob" of data. We cannot decrypt it even if compelled by law.']})]})]})]})]})]})}),x.jsxs("section",{className:"max-w-6xl mx-auto px-6 py-24",children:[x.jsxs("div",{className:"text-center mb-16",children:[x.jsx("h2",{className:"text-3xl font-bold font-serif text-slate-900 mb-4",children:"More Than Just Text"}),x.jsx("p",{className:"text-slate-500",children:"A complete suite of tools to capture your life in high fidelity."})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[x.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[x.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-2xl flex items-center justify-center text-indigo-600 mb-6",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Rich Editor"}),x.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Format your thoughts with a beautiful, distraction-free editor. Supports custom fonts, lists, and dynamic layouts."})]}),x.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[x.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-2xl flex items-center justify-center text-pink-600 mb-6",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Secure Media"}),x.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Attach photos and images. They are encrypted with the same military-grade key as your text."})]}),x.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[x.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-2xl flex items-center justify-center text-purple-600 mb-6",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Voice Memos"}),x.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Record encrypted audio notes for when typing feels like too much work. Stored securely in the cloud."})]}),x.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[x.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-2xl flex items-center justify-center text-yellow-600 mb-6",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Mood Tracking"}),x.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Track your emotional journey over time. Filter entries by mood to see patterns in your life."})]}),x.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[x.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-2xl flex items-center justify-center text-blue-600 mb-6",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Smart Organization"}),x.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Organize entries with tags, journals, and location data (weather). Find any memory instantly."})]}),x.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[x.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center text-slate-600 mb-6",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),x.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Total Ownership"}),x.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Your data is yours. Export your entire diary history to JSON or ZIP at any time. No lock-in."})]})]})]}),x.jsxs("section",{className:"w-full bg-indigo-900 text-white py-20 mt-12 relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"}),x.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 bg-indigo-500/30 rounded-full blur-3xl translate-x-1/2 translate-y-1/2"}),x.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center relative z-10",children:[x.jsx("h2",{className:"text-4xl font-bold font-serif mb-6",children:"Ready to start writing?"}),x.jsx("p",{className:"text-indigo-200 text-lg mb-10 max-w-xl mx-auto",children:"Join thousands of others who have reclaimed their privacy. No credit card required."}),x.jsx("button",{onClick:c,className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:bg-indigo-50 transition-all hover:scale-105 shadow-xl",children:"Create Your Sanctuary"})]})]})]})]})},IA=()=>x.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 font-serif text-slate-700 dark:text-slate-300",children:x.jsxs("div",{className:"max-w-4xl mx-auto p-8 sm:p-12",children:[x.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Privacy Policy"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Last updated: October 26, 2024"}),x.jsxs("article",{className:"prose prose-lg dark:prose-invert mt-8 max-w-none",children:[x.jsx("p",{children:"Welcome to Diary. Your privacy is critically important to us. This Privacy Policy outlines how your personal information is handled in our application."}),x.jsx("h2",{children:"The Core Principle: End-to-End Encryption"}),x.jsxs("p",{children:["The single most important thing to know about your privacy in this application is that ",x.jsx("strong",{children:"we cannot read your diary entries."})," All your entries are end-to-end encrypted on your device before they are sent to our servers for storage. This means:"]}),x.jsxs("ul",{children:[x.jsx("li",{children:"Your diary entries (titles and content) are encrypted using a key derived from a password only you know."}),x.jsx("li",{children:"This password is never sent to our servers or stored anywhere."}),x.jsx("li",{children:"The encryption and decryption happens exclusively on your device (in your browser)."}),x.jsx("li",{children:"Because we do not have your key, we cannot decrypt your data, and therefore cannot read it, share it, or provide it to any third party."})]}),x.jsx("h2",{children:"Information We Collect"}),x.jsx("p",{children:"We collect the absolute minimum information required to provide the service:"}),x.jsxs("ul",{children:[x.jsxs("li",{children:[x.jsx("strong",{children:"Account Information:"})," We store your email address for authentication purposes, provided by you or through a third-party OAuth provider like Google."]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Encryption Materials:"})," We store your salt and a key-check value. These are used to verify your password during login but cannot be used to derive your password or encryption key."]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Encrypted Diary Data:"})," Your diary entries are stored on our servers in an encrypted, unreadable format. We also store the associated Initialization Vector (IV), which is necessary for decryption but does not compromise security."]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Metadata:"})," To provide features like the calendar view and search, we store non-sensitive metadata such as entry creation dates, tags, and moods in an unencrypted format."]})]}),x.jsx("h2",{children:"How We Use Your Information ?"}),x.jsx("p",{children:"The information we collect is used solely to:"}),x.jsxs("ul",{children:[x.jsx("li",{children:"Provide, operate, and maintain the Diary service."}),x.jsx("li",{children:"Authenticate your access to your account."}),x.jsx("li",{children:"Securely store and retrieve your encrypted data."})]}),x.jsx("p",{children:"We do not analyze, profile, or sell your data. We cannot read it, so we cannot use it for advertising or any other purpose."}),x.jsx("h2",{children:"Third-Party Services"}),x.jsxs("ul",{children:[x.jsxs("li",{children:[x.jsx("strong",{children:"Supabase:"})," We use Supabase for our backend, which includes database storage and authentication. All data stored in the database is subject to the security principles described above."]}),x.jsxs("li",{children:[x.jsx("strong",{children:"OpenWeatherMap:"})," If you grant location access, we use your coordinates to fetch weather data from OpenWeatherMap. Your precise location is not stored by us."]})]}),x.jsx("h2",{children:"Your Rights"}),x.jsx("p",{children:"You have full control over your data."}),x.jsxs("ul",{children:[x.jsxs("li",{children:[x.jsx("strong",{children:"Data Export:"})," You can export all of your diary entries in a human-readable JSON format at any time from the Profile & Settings page."]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Data Deletion:"})," You can delete individual entries or your entire account. Deleting your account will permanently remove all associated data from our servers."]})]}),x.jsx("h2",{children:"Data Security"}),x.jsxs("p",{children:["We implement industry-standard security measures, including robust Row Level Security policies on our database, to prevent unauthorized access to your account metadata and encrypted data. However, the ultimate security of your diary rests on the strength and secrecy of your password. ",x.jsx("strong",{children:"If you lose your password, your data is irrecoverable, as we have no way to decrypt it for you."})]}),x.jsx("h2",{children:"Changes to This Privacy Policy"}),x.jsx("p",{children:"We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page. You are advised to review this Privacy Policy periodically for any changes."}),x.jsx("h2",{children:"Contact Us"}),x.jsx("p",{children:"If you have any questions about this Privacy Policy, please contact us."})]})]})}),DA=()=>x.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 font-serif text-slate-700 dark:text-slate-300",children:x.jsxs("div",{className:"max-w-4xl mx-auto p-8 sm:p-12",children:[x.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Terms of Use"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Last updated: October 26, 2024"}),x.jsxs("article",{className:"prose prose-lg dark:prose-invert mt-8 max-w-none",children:[x.jsx("h2",{children:"1. Acceptance of Terms"}),x.jsx("p",{children:'By accessing or using the Diary application ("Service"), you agree to be bound by these Terms of Use ("Terms"). If you disagree with any part of the terms, then you may not access the Service.'}),x.jsx("h2",{children:"2. User Accounts and Security"}),x.jsx("p",{children:"To use the Service, you must create an account. You are responsible for safeguarding the password that you use to access the Service and for any activities or actions under your password."}),x.jsxs("p",{children:[x.jsx("strong",{children:"Crucially, our service is end-to-end encrypted. Your password is your key. We do not store your password and have no way to recover it. If you lose your password, you will permanently lose access to all of your data."})," You agree not to disclose your password to any third party. You must notify us immediately upon becoming aware of any breach of security or unauthorized use of your account."]}),x.jsx("h2",{children:"3. User Content"}),x.jsx("p",{children:'You retain full ownership of all the content, including text and metadata, that you create in your diary ("User Content"). We claim no ownership rights over your User Content.'}),x.jsx("p",{children:"You are solely responsible for the User Content that you post on or through the Service. You represent and warrant that the posting of your User Content on or through the Service does not violate the privacy rights, publicity rights, copyrights, contract rights, or any other rights of any person."}),x.jsx("h2",{children:"4. Prohibited Conduct"}),x.jsx("p",{children:"You agree not to use the Service for any unlawful purpose or to engage in any activity that is illegal, harmful, or otherwise objectionable. You may not use the Service to store or transmit any content that is infringing, libelous, or otherwise unlawful or tortious, or to store or transmit material in violation of third-party privacy rights."}),x.jsx("h2",{children:"5. Termination"}),x.jsx("p",{children:"We may terminate or suspend your account immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms."}),x.jsx("p",{children:"Upon termination, your right to use the Service will immediately cease. If you wish to terminate your account, you may do so by signing out and deleting your account, which will result in the permanent deletion of your data."}),x.jsx("h2",{children:"6. Disclaimers"}),x.jsx("p",{children:'The Service is provided on an "AS IS" and "AS AVAILABLE" basis. The Service is provided without warranties of any kind, whether express or implied, including, but not limited to, implied warranties of merchantability, fitness for a particular purpose, non-infringement, or course of performance.'}),x.jsx("h2",{children:"7. Limitation of Liability"}),x.jsx("p",{children:"In no event shall Diary, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from (i) your access to or use of or inability to access or use the Service; (ii) any conduct or content of any third party on the Service; (iii) any content obtained from the Service; and (iv) unauthorized access, use or alteration of your transmissions or content, whether based on warranty, contract, tort (including negligence) or any other legal theory, whether or not we have been informed of the possibility of such damage, and even if a remedy set forth herein is found to have failed of its essential purpose."}),x.jsx("h2",{children:"8. Changes to Terms"}),x.jsx("p",{children:"We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material we will try to provide at least 30 days' notice prior to any new terms taking effect. What constitutes a material change will be determined at our sole discretion."}),x.jsx("h2",{children:"Contact Us"}),x.jsx("p",{children:"If you have any questions about these Terms, please contact us."})]})]})}),MA=()=>x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900 font-sans",children:x.jsxs("div",{className:"text-center p-8",children:[x.jsx("h1",{className:"text-6xl font-bold text-indigo-600 mb-4",children:"404"}),x.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-6",children:"Page Not Found"}),x.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-8 max-w-md mx-auto",children:"The page you are looking for doesn't exist or has been moved."}),x.jsx(Pl,{to:"/",className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full font-semibold transition-colors shadow-lg shadow-indigo-200 dark:shadow-none",children:"Go Back Home"})]})}),o_="DAILY_DIARY_KEY_CHECK_v1",ls=t=>btoa(String.fromCharCode(...new Uint8Array(t))),us=t=>Uint8Array.from(atob(t),e=>e.charCodeAt(0)).buffer,s_=new TextEncoder,FA=new TextDecoder,BA=()=>{const t=window.crypto.getRandomValues(new Uint8Array(16));return ls(t.buffer)},l_=async(t,e)=>{const r=s_.encode(t);let n=1e5,i=e;if(e.startsWith("v1:")){const s=e.split(":");if(s.length===3){const l=parseInt(s[1],10);isNaN(l)||(n=l,i=s[2])}}const a=us(i),o=await window.crypto.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey"]);return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:a,iterations:n,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])},D1=async(t,e)=>{const r=window.crypto.getRandomValues(new Uint8Array(12)),n=s_.encode(e),i=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,n);return{iv:ls(r.buffer),data:ls(i)}},M1=async(t,e,r)=>{const n=us(r),i=us(e),a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},t,i);return FA.decode(a)},qA=async(t,e)=>{const r=window.crypto.getRandomValues(new Uint8Array(12)),n=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,e);return{iv:ls(r.buffer),data:n}},UA=async(t,e,r)=>{const n=us(r);return await window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},t,e)};async function zA(t,e){const{data:r,error:n}=await Mt.from("profiles").select("*").eq("id",e).single();if(n||!r)return console.error("Profile not found for user:",e),null;const i=r;try{const a=await l_(t,i.salt);return await M1(a,i.key_check_value,i.key_check_iv)===o_?a:null}catch(a){return console.error("Key derivation or verification failed:",a),null}}const F1=async t=>{const e=await window.crypto.subtle.exportKey("raw",t);return ls(e)},$A=async t=>{const e=us(t);return window.crypto.subtle.importKey("raw",e,{name:"AES-GCM"},!0,["encrypt","decrypt"])},u_=ie.createContext(void 0),HA=({children:t})=>{const[e,r]=ie.useState(null),n=ie.useCallback(()=>{r(null)},[]),i={key:e,setKey:r,deriveAndVerifyKey:zA,encrypt:D1,decrypt:M1,encryptBinary:qA,decryptBinary:UA,lock:n};return x.jsx(u_.Provider,{value:i,children:t})},ps=()=>{const t=ie.useContext(u_);if(t===void 0)throw new Error("useCrypto must be used within a CryptoProvider");return t},WA="227b57dcb9e272db9e362fee3a14b924";async function VA(t,e){const r=`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${e}&appid=${WA}&units=metric`;try{const n=await fetch(r);if(!n.ok)throw new Error(`Weather API request failed with status ${n.status}`);const i=await n.json();return{temp:i.main.temp,description:i.weather[0].description,icon:i.weather[0].icon,location:i.name}}catch(n){return console.error("Could not fetch weather data:",n),null}}const GA=t=>{try{const r=new DOMParser().parseFromString(t,"text/html").body.textContent||"";if(console.log("SmartTags: Analyzing text length:",r.length),r.length<3)return[];const n=[],i=/#(\w+)/g;let a;for(;(a=i.exec(r))!==null;)a[1].length>1&&n.push(a[1]);if(yv){const l=yv(r),u=l.topics().out("array"),h=l.places().out("array"),f=l.people().out("array"),d=l.organizations().out("array"),c=l.match("#ProperNoun").out("array");n.push(...u,...h,...f,...d,...c)}else console.warn("SmartTags: 'compromise' library not loaded. Only hashtags will work.");const o=n.map(l=>l.trim()).map(l=>l.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9]+$/g,"")).filter(l=>l.length>2).map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()),s=Array.from(new Set(o));return console.log("SmartTags: Suggestions found:",s),s}catch(e){return console.error("SmartTags: Error generating tags",e),[]}},KA=({isVisible:t,onClose:e,journals:r,activeJournal:n,onSelectJournal:i})=>{const a=[{path:"/app",end:!0,label:"Timeline",icon:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})},{path:"/app/calendar",label:"Calendar",icon:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{path:"/app/search",label:"Search",icon:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})},{path:"/app/profile",label:"Profile",icon:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}],o=()=>{window.innerWidth<768&&e()};return x.jsxs("aside",{className:`bg-[#F4EFE9] dark:bg-slate-900 border-r border-[#EAE1D6] dark:border-slate-800 flex flex-col transition-transform duration-300 ease-in-out w-64 fixed md:absolute md:top-0 md:left-0 z-30 h-full ${t?"translate-x-0":"-translate-x-full"}`,children:[x.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#EAE1D6] dark:border-slate-800",children:[x.jsx("h1",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Diary"}),x.jsx("button",{onClick:e,className:"p-2 rounded-md hover:bg-slate-200/50 dark:hover:bg-slate-700/50",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),x.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[x.jsxs(Dm,{to:"/app/new",onClick:o,className:"w-full flex items-center gap-3 p-3 rounded-lg text-white font-semibold transition-colors bg-indigo-500 hover:bg-indigo-600 shadow-sm mb-6",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),x.jsx("span",{children:"New Entry"})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"px-3 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2",children:"Views"}),a.map(s=>x.jsxs(Dm,{to:s.path,end:s.end,onClick:o,className:({isActive:l})=>`w-full flex items-center gap-3 p-2.5 rounded-lg text-left text-sm font-medium transition-colors ${l?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-200/50 dark:hover:bg-slate-800"}`,children:[s.icon,x.jsx("span",{children:s.label})]},s.path))]}),x.jsxs("div",{className:"pt-6",children:[x.jsxs("h3",{className:"px-3 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 flex items-center justify-between",children:[x.jsx("span",{children:"Journals"}),x.jsx("span",{className:"bg-slate-200 dark:bg-slate-700 text-[10px] px-1.5 py-0.5 rounded-full text-slate-600 dark:text-slate-300",children:r.length})]}),x.jsxs("div",{className:"space-y-1",children:[x.jsxs("button",{onClick:()=>{i(null),o()},className:`w-full flex items-center gap-3 p-2.5 rounded-lg text-left text-sm font-medium transition-colors ${n===null?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-200/50 dark:hover:bg-slate-800"}`,children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 opacity-70",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"})}),x.jsx("span",{children:"All Entries"})]}),r.map(s=>x.jsxs("button",{onClick:()=>{i(s),o()},className:`w-full flex items-center gap-3 p-2.5 rounded-lg text-left text-sm font-medium transition-colors ${n===s?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-200/50 dark:hover:bg-slate-800"}`,children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 opacity-70",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"})}),x.jsx("span",{className:"truncate",children:s})]},s))]})]})]})]})};function Ft(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Ta(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function YA(t,e){const r=Ft(t);return isNaN(e)?Ta(t,NaN):(r.setDate(r.getDate()+e),r)}const c_=6048e5,JA=864e5,nd=43200,l2=1440;let XA={};function qc(){return XA}function cs(t,e){var s,l,u,h;const r=qc(),n=(e==null?void 0:e.weekStartsOn)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((h=(u=r.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,i=Ft(t),a=i.getDay(),o=(a<n?7:0)+a-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function ch(t){return cs(t,{weekStartsOn:1})}function f_(t){const e=Ft(t),r=e.getFullYear(),n=Ta(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=ch(n),a=Ta(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=ch(a);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function fh(t){const e=Ft(t);return e.setHours(0,0,0,0),e}function dh(t){const e=Ft(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function QA(t,e){const r=fh(t),n=fh(e),i=+r-dh(r),a=+n-dh(n);return Math.round((i-a)/JA)}function ZA(t){const e=f_(t),r=Ta(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),ch(r)}function Ed(t,e){const r=Ft(t),n=Ft(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function zh(t){return Ta(t,Date.now())}function d_(t,e){const r=fh(t),n=fh(e);return+r==+n}function e8(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function t8(t){if(!e8(t)&&typeof t!="number")return!1;const e=Ft(t);return!isNaN(Number(e))}function r8(t,e){const r=Ft(t),n=Ft(e),i=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return i*12+a}function n8(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function i8(t,e){return+Ft(t)-+Ft(e)}function a8(t){const e=Ft(t);return e.setHours(23,59,59,999),e}function o8(t){const e=Ft(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function s8(t){const e=Ft(t);return+a8(e)==+o8(e)}function l8(t,e){const r=Ft(t),n=Ft(e),i=Ed(r,n),a=Math.abs(r8(r,n));let o;if(a<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*a);let s=Ed(r,n)===-i;s8(Ft(t))&&a===1&&Ed(t,n)===1&&(s=!1),o=i*(a-Number(s))}return o===0?0:o}function u8(t,e,r){const n=i8(t,e)/1e3;return n8(r==null?void 0:r.roundingMethod)(n)}function c8(t){const e=Ft(t),r=Ta(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const f8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},d8=(t,e,r)=>{let n;const i=f8[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function b0(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const h8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},p8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},m8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},g8={date:b0({formats:h8,defaultWidth:"full"}),time:b0({formats:p8,defaultWidth:"full"}),dateTime:b0({formats:m8,defaultWidth:"full"})},v8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},y8=(t,e,r,n)=>v8[t];function Cu(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,s=r!=null&&r.width?String(r.width):o;i=t.formattingValues[s]||t.formattingValues[o]}else{const o=t.defaultWidth,s=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[s]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const w8={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},b8={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},x8={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_8={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},S8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},k8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},N8=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},E8={ordinalNumber:N8,era:Cu({values:w8,defaultWidth:"wide"}),quarter:Cu({values:b8,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Cu({values:x8,defaultWidth:"wide"}),day:Cu({values:_8,defaultWidth:"wide"}),dayPeriod:Cu({values:S8,defaultWidth:"wide",formattingValues:k8,defaultFormattingWidth:"wide"})};function Ru(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],s=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(s)?j8(s,f=>f.test(o)):A8(s,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const h=e.slice(o.length);return{value:u,rest:h}}}function A8(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function j8(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function O8(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const s=e.slice(i.length);return{value:o,rest:s}}}const L8=/^(\d+)(th|st|nd|rd)?/i,P8=/\d+/i,T8={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},C8={any:[/^b/i,/^(a|c)/i]},R8={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},I8={any:[/1/i,/2/i,/3/i,/4/i]},D8={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},M8={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},F8={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},B8={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},q8={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},U8={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},z8={ordinalNumber:O8({matchPattern:L8,parsePattern:P8,valueCallback:t=>parseInt(t,10)}),era:Ru({matchPatterns:T8,defaultMatchWidth:"wide",parsePatterns:C8,defaultParseWidth:"any"}),quarter:Ru({matchPatterns:R8,defaultMatchWidth:"wide",parsePatterns:I8,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ru({matchPatterns:D8,defaultMatchWidth:"wide",parsePatterns:M8,defaultParseWidth:"any"}),day:Ru({matchPatterns:F8,defaultMatchWidth:"wide",parsePatterns:B8,defaultParseWidth:"any"}),dayPeriod:Ru({matchPatterns:q8,defaultMatchWidth:"any",parsePatterns:U8,defaultParseWidth:"any"})},h_={code:"en-US",formatDistance:d8,formatLong:g8,formatRelative:y8,localize:E8,match:z8,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $8(t){const e=Ft(t);return QA(e,c8(e))+1}function H8(t){const e=Ft(t),r=+ch(e)-+ZA(e);return Math.round(r/c_)+1}function p_(t,e){var h,f,d,c;const r=Ft(t),n=r.getFullYear(),i=qc(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((c=(d=i.locale)==null?void 0:d.options)==null?void 0:c.firstWeekContainsDate)??1,o=Ta(t,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const s=cs(o,e),l=Ta(t,0);l.setFullYear(n,0,a),l.setHours(0,0,0,0);const u=cs(l,e);return r.getTime()>=s.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function W8(t,e){var s,l,u,h;const r=qc(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(u=r.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,i=p_(t,e),a=Ta(t,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),cs(a,e)}function V8(t,e){const r=Ft(t),n=+cs(r,e)-+W8(r,e);return Math.round(n/c_)+1}function Pt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Qa={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Pt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Pt(r+1,2)},d(t,e){return Pt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Pt(t.getHours()%12||12,e.length)},H(t,e){return Pt(t.getHours(),e.length)},m(t,e){return Pt(t.getMinutes(),e.length)},s(t,e){return Pt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return Pt(i,e.length)}},Gs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},u2={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Qa.y(t,e)},Y:function(t,e,r,n){const i=p_(t,n),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return Pt(o,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):Pt(a,e.length)},R:function(t,e){const r=f_(t);return Pt(r,e.length)},u:function(t,e){const r=t.getFullYear();return Pt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Pt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Pt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Qa.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Pt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=V8(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):Pt(i,e.length)},I:function(t,e,r){const n=H8(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Pt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Qa.d(t,e)},D:function(t,e,r){const n=$8(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Pt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Pt(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Pt(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Pt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=Gs.noon:n===0?i=Gs.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=Gs.evening:n>=12?i=Gs.afternoon:n>=4?i=Gs.morning:i=Gs.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Qa.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Qa.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Pt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Pt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Qa.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Qa.s(t,e)},S:function(t,e){return Qa.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return f2(n);case"XXXX":case"XX":return zo(n);case"XXXXX":case"XXX":default:return zo(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return f2(n);case"xxxx":case"xx":return zo(n);case"xxxxx":case"xxx":default:return zo(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+c2(n,":");case"OOOO":default:return"GMT"+zo(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+c2(n,":");case"zzzz":default:return"GMT"+zo(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Pt(n,e.length)},T:function(t,e,r){const n=t.getTime();return Pt(n,e.length)}};function c2(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),a=n%60;return a===0?r+String(i):r+String(i)+e+Pt(a,2)}function f2(t,e){return t%60===0?(t>0?"-":"+")+Pt(Math.abs(t)/60,2):zo(t,e)}function zo(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Pt(Math.trunc(n/60),2),a=Pt(n%60,2);return r+i+e+a}const d2=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},m_=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},G8=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return d2(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",d2(n,e)).replace("{{time}}",m_(i,e))},K8={p:m_,P:G8},Y8=/^D+$/,J8=/^Y+$/,X8=["D","DD","YY","YYYY"];function Q8(t){return Y8.test(t)}function Z8(t){return J8.test(t)}function ej(t,e,r){const n=tj(t,e,r);if(console.warn(n),X8.includes(t))throw new RangeError(n)}function tj(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const rj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ij=/^'([^]*?)'?$/,aj=/''/g,oj=/[a-zA-Z]/;function Lc(t,e,r){var h,f,d,c;const n=qc(),i=n.locale??h_,a=n.firstWeekContainsDate??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,o=n.weekStartsOn??((c=(d=n.locale)==null?void 0:d.options)==null?void 0:c.weekStartsOn)??0,s=Ft(t);if(!t8(s))throw new RangeError("Invalid time value");let l=e.match(nj).map(y=>{const v=y[0];if(v==="p"||v==="P"){const w=K8[v];return w(y,i.formatLong)}return y}).join("").match(rj).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const v=y[0];if(v==="'")return{isToken:!1,value:sj(y)};if(u2[v])return{isToken:!0,value:y};if(v.match(oj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(l=i.localize.preprocessor(s,l));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return l.map(y=>{if(!y.isToken)return y.value;const v=y.value;(Z8(v)||Q8(v))&&ej(v,e,String(t));const w=u2[v[0]];return w(s,v,i.localize,u)}).join("")}function sj(t){const e=t.match(ij);return e?e[1].replace(aj,"'"):t}function lj(t,e,r){const n=qc(),i=(r==null?void 0:r.locale)??n.locale??h_,a=2520,o=Ed(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const s=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,u;o>0?(l=Ft(e),u=Ft(t)):(l=Ft(t),u=Ft(e));const h=u8(u,l),f=(dh(u)-dh(l))/1e3,d=Math.round((h-f)/60);let c;if(d<2)return r!=null&&r.includeSeconds?h<5?i.formatDistance("lessThanXSeconds",5,s):h<10?i.formatDistance("lessThanXSeconds",10,s):h<20?i.formatDistance("lessThanXSeconds",20,s):h<40?i.formatDistance("halfAMinute",0,s):h<60?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",1,s):d===0?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",d,s);if(d<45)return i.formatDistance("xMinutes",d,s);if(d<90)return i.formatDistance("aboutXHours",1,s);if(d<l2){const y=Math.round(d/60);return i.formatDistance("aboutXHours",y,s)}else{if(d<a)return i.formatDistance("xDays",1,s);if(d<nd){const y=Math.round(d/l2);return i.formatDistance("xDays",y,s)}else if(d<nd*2)return c=Math.round(d/nd),i.formatDistance("aboutXMonths",c,s)}if(c=l8(u,l),c<12){const y=Math.round(d/nd);return i.formatDistance("xMonths",y,s)}else{const y=c%12,v=Math.trunc(c/12);return y<3?i.formatDistance("aboutXYears",v,s):y<9?i.formatDistance("overXYears",v,s):i.formatDistance("almostXYears",v+1,s)}}function g_(t,e){return lj(t,zh(t),e)}function uj(t,e,r){const n=cs(t,r),i=cs(e,r);return+n==+i}function cj(t,e){return uj(t,zh(t),e)}function fj(t){return d_(t,zh(t))}function dj(t,e){return YA(t,-1)}function hj(t){return d_(t,dj(zh(t)))}const pj=({status:t})=>{const e={encrypting:{text:"Encrypting...",icon:x.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})},synced:{text:"Synced",icon:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})},error:{text:"Error",icon:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}},{text:r,icon:n}=e[t];return x.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400",children:[n,x.jsx("span",{className:"hidden sm:inline",children:r})]})},mj=({isEditing:t,onSave:e,onCancel:r,currentDate:n,weather:i,theme:a,onToggleTheme:o,saveStatus:s,profile:l,onShowProfile:u,isToolsPanelVisible:h,onToggleToolsPanel:f,isLeftSidebarVisible:d})=>{const[c,y]=ie.useState(new Date),[v,w]=ie.useState(null),{lock:m}=ps();return ie.useEffect(()=>{const g=setInterval(()=>{y(new Date)},6e4);return()=>clearInterval(g)},[]),ie.useEffect(()=>{let g=!0;return(async()=>{if(!(l!=null&&l.avatar_url)){g&&w(null);return}if(l.avatar_url.startsWith("http"))g&&w(l.avatar_url);else try{const{data:S,error:E}=await Mt.storage.from("avatars").createSignedUrl(l.avatar_url,3600);if(E)throw E;g&&(S!=null&&S.signedUrl)&&w(S.signedUrl)}catch(S){console.error("Error resolving avatar URL in TopBar:",S),g&&w(null)}})(),()=>{g=!1}},[l==null?void 0:l.avatar_url]),x.jsx("header",{className:"bg-white/80 dark:bg-slate-900/50 backdrop-blur-sm border-b border-[#EAE1D6] dark:border-slate-800 min-h-[4rem] flex-shrink-0 relative z-20 transition-all duration-200",children:x.jsxs("div",{className:"min-h-[4rem] flex flex-wrap items-center justify-between px-4 sm:px-6 py-2 gap-y-2",children:[x.jsxs("div",{className:`flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-slate-600 dark:text-slate-300 transition-all duration-300 ${d?"":"pl-12 md:pl-16"} ${t?"hidden md:flex":"flex"}`,children:[x.jsx("span",{className:"font-semibold",children:Lc(c,"p")}),x.jsx("span",{className:"font-semibold",children:Lc(n,"MMMM d, yyyy")}),i&&x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full"}),x.jsxs("span",{children:[i.location,", ",Math.round(i.temp),"C"]})]})]}),x.jsx("div",{className:`flex items-center gap-3 ${t&&!d?"pl-12 md:pl-0":""}`,children:t?x.jsxs(x.Fragment,{children:[x.jsx(pj,{status:s}),x.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-semibold rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),x.jsx("button",{onClick:e,className:"px-4 py-1.5 text-sm font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 transition-colors shadow-sm",children:"Save"})]}):x.jsx("div",{className:"hidden md:block h-9"})}),x.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 ml-auto md:ml-0",children:[t&&x.jsx("button",{onClick:f,title:"Toggle Tools Panel",className:`p-2 rounded-full transition-colors ${h?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-600":"hover:bg-slate-200/50 dark:hover:bg-slate-700/50 text-slate-500"}`,children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),x.jsx("button",{onClick:m,title:"Lock Diary",className:"p-2 rounded-full hover:bg-slate-200/50 dark:hover:bg-slate-700/50 text-slate-500 dark:text-slate-400",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),x.jsx("button",{onClick:o,title:"Toggle Theme",className:"p-2 rounded-full hover:bg-slate-200/50 dark:hover:bg-slate-700/50 text-slate-500 dark:text-slate-400",children:a==="dark"?x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 14.464A1 1 0 106.465 13.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zm-1.414-2.12a1 1 0 011.414 0l.707.707a1 1 0 11-1.414 1.414l-.707-.707a1 1 0 010-1.414zM4 11a1 1 0 100-2H3a1 1 0 100 2h1z",clipRule:"evenodd"})})}),x.jsx("button",{onClick:u,title:"Profile & Settings",className:"w-9 h-9 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden flex items-center justify-center hover:ring-2 ring-indigo-500 ring-offset-2 ring-offset-white dark:ring-offset-slate-900 transition-all",children:v?x.jsx("img",{src:v,alt:"User avatar",className:"w-full h-full object-cover"}):x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})})]})]})})},gj="modulepreload",vj=function(t){return"/diary/"+t},h2={},Jm=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=vj(l),l in h2)return;h2[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":gj,u||(f.as="script"),f.crossOrigin="",f.href=l,s&&f.setAttribute("nonce",s),document.head.appendChild(f),u)return new Promise((d,c)=>{f.addEventListener("load",d),f.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};function Tt(t){"@babel/helpers - typeof";return Tt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(t)}var an=Uint8Array,Xn=Uint16Array,B1=Int32Array,$h=new an([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hh=new an([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Xm=new an([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),v_=function(t,e){for(var r=new Xn(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new B1(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return{b:r,r:i}},y_=v_($h,2),w_=y_.b,Qm=y_.r;w_[28]=258,Qm[258]=28;var b_=v_(Hh,0),yj=b_.b,p2=b_.r,Zm=new Xn(32768);for(var Xt=0;Xt<32768;++Xt){var Za=(Xt&43690)>>1|(Xt&21845)<<1;Za=(Za&52428)>>2|(Za&13107)<<2,Za=(Za&61680)>>4|(Za&3855)<<4,Zm[Xt]=((Za&65280)>>8|(Za&255)<<8)>>1}var ra=function(t,e,r){for(var n=t.length,i=0,a=new Xn(e);i<n;++i)t[i]&&++a[t[i]-1];var o=new Xn(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(r){s=new Xn(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var u=i<<4|t[i],h=e-t[i],f=o[t[i]-1]++<<h,d=f|(1<<h)-1;f<=d;++f)s[Zm[f]>>l]=u}else for(s=new Xn(n),i=0;i<n;++i)t[i]&&(s[i]=Zm[o[t[i]-1]++]>>15-t[i]);return s},bo=new an(288);for(var Xt=0;Xt<144;++Xt)bo[Xt]=8;for(var Xt=144;Xt<256;++Xt)bo[Xt]=9;for(var Xt=256;Xt<280;++Xt)bo[Xt]=7;for(var Xt=280;Xt<288;++Xt)bo[Xt]=8;var Pc=new an(32);for(var Xt=0;Xt<32;++Xt)Pc[Xt]=5;var wj=ra(bo,9,0),bj=ra(bo,9,1),xj=ra(Pc,5,0),_j=ra(Pc,5,1),x0=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Ei=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},_0=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},q1=function(t){return(t+7)/8|0},x_=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new an(t.subarray(e,r))},Sj=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ti=function(t,e,r){var n=new Error(e||Sj[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Ti),!r)throw n;return n},kj=function(t,e,r,n){var i=t.length,a=0;if(!i||e.f&&!e.l)return r||new an(0);var o=!r,s=o||e.i!=2,l=e.i;o&&(r=new an(i*3));var u=function(be){var Ee=r.length;if(be>Ee){var Ae=new an(Math.max(Ee*2,be));Ae.set(r),r=Ae}},h=e.f||0,f=e.p||0,d=e.b||0,c=e.l,y=e.d,v=e.m,w=e.n,m=i*8;do{if(!c){h=Ei(t,f,1);var g=Ei(t,f+1,3);if(f+=3,g)if(g==1)c=bj,y=_j,v=9,w=5;else if(g==2){var I=Ei(t,f,31)+257,L=Ei(t,f+10,15)+4,O=I+Ei(t,f+5,31)+1;f+=14;for(var M=new an(O),T=new an(19),k=0;k<L;++k)T[Xm[k]]=Ei(t,f+k*3,7);f+=L*3;for(var A=x0(T),R=(1<<A)-1,C=ra(T,A,1),k=0;k<O;){var V=C[Ei(t,f,R)];f+=V&15;var b=V>>4;if(b<16)M[k++]=b;else{var Z=0,te=0;for(b==16?(te=3+Ei(t,f,3),f+=2,Z=M[k-1]):b==17?(te=3+Ei(t,f,7),f+=3):b==18&&(te=11+Ei(t,f,127),f+=7);te--;)M[k++]=Z}}var Q=M.subarray(0,I),K=M.subarray(I);v=x0(Q),w=x0(K),c=ra(Q,v,1),y=ra(K,w,1)}else Ti(1);else{var b=q1(f)+4,S=t[b-4]|t[b-3]<<8,E=b+S;if(E>i){l&&Ti(0);break}s&&u(d+S),r.set(t.subarray(b,E),d),e.b=d+=S,e.p=f=E*8,e.f=h;continue}if(f>m){l&&Ti(0);break}}s&&u(d+131072);for(var W=(1<<v)-1,q=(1<<w)-1,P=f;;P=f){var Z=c[_0(t,f)&W],F=Z>>4;if(f+=Z&15,f>m){l&&Ti(0);break}if(Z||Ti(2),F<256)r[d++]=F;else if(F==256){P=f,c=null;break}else{var U=F-254;if(F>264){var k=F-257,H=$h[k];U=Ei(t,f,(1<<H)-1)+w_[k],f+=H}var B=y[_0(t,f)&q],J=B>>4;B||Ti(3),f+=B&15;var K=yj[J];if(J>3){var H=Hh[J];K+=_0(t,f)&(1<<H)-1,f+=H}if(f>m){l&&Ti(0);break}s&&u(d+131072);var re=d+U;if(d<K){var ne=a-K,ge=Math.min(K,re);for(ne+d<0&&Ti(3);d<ge;++d)r[d]=n[ne+d]}for(;d<re;++d)r[d]=r[d-K]}}e.l=c,e.p=P,e.b=d,e.f=h,c&&(h=1,e.m=v,e.d=y,e.n=w)}while(!h);return d!=r.length&&o?x_(r,0,d):r.subarray(0,d)},va=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Iu=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},S0=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,a=r.slice();if(!i)return{t:S_,l:0};if(i==1){var o=new an(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(E,I){return E.f-I.f}),r.push({s:-1,f:25001});var s=r[0],l=r[1],u=0,h=1,f=2;for(r[0]={s:-1,f:s.f+l.f,l:s,r:l};h!=i-1;)s=r[r[u].f<r[f].f?u++:f++],l=r[u!=h&&r[u].f<r[f].f?u++:f++],r[h++]={s:-1,f:s.f+l.f,l:s,r:l};for(var d=a[0].s,n=1;n<i;++n)a[n].s>d&&(d=a[n].s);var c=new Xn(d+1),y=eg(r[h-1],c,0);if(y>e){var n=0,v=0,w=y-e,m=1<<w;for(a.sort(function(I,L){return c[L.s]-c[I.s]||I.f-L.f});n<i;++n){var g=a[n].s;if(c[g]>e)v+=m-(1<<y-c[g]),c[g]=e;else break}for(v>>=w;v>0;){var b=a[n].s;c[b]<e?v-=1<<e-c[b]++-1:++n}for(;n>=0&&v;--n){var S=a[n].s;c[S]==e&&(--c[S],++v)}y=e}return{t:new an(c),l:y}},eg=function(t,e,r){return t.s==-1?Math.max(eg(t.l,e,r+1),eg(t.r,e,r+1)):e[t.s]=r},m2=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Xn(++e),n=0,i=t[0],a=1,o=function(l){r[n++]=l},s=1;s<=e;++s)if(t[s]==i&&s!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=t[s]}return{c:r.subarray(0,n),n:e}},Du=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},__=function(t,e,r){var n=r.length,i=q1(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var a=0;a<n;++a)t[i+a+4]=r[a];return(i+4+n)*8},g2=function(t,e,r,n,i,a,o,s,l,u,h){va(e,h++,r),++i[256];for(var f=S0(i,15),d=f.t,c=f.l,y=S0(a,15),v=y.t,w=y.l,m=m2(d),g=m.c,b=m.n,S=m2(v),E=S.c,I=S.n,L=new Xn(19),O=0;O<g.length;++O)++L[g[O]&31];for(var O=0;O<E.length;++O)++L[E[O]&31];for(var M=S0(L,7),T=M.t,k=M.l,A=19;A>4&&!T[Xm[A-1]];--A);var R=u+5<<3,C=Du(i,bo)+Du(a,Pc)+o,V=Du(i,d)+Du(a,v)+o+14+3*A+Du(L,T)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&R<=C&&R<=V)return __(e,h,t.subarray(l,l+u));var Z,te,Q,K;if(va(e,h,1+(V<C)),h+=2,V<C){Z=ra(d,c,0),te=d,Q=ra(v,w,0),K=v;var W=ra(T,k,0);va(e,h,b-257),va(e,h+5,I-1),va(e,h+10,A-4),h+=14;for(var O=0;O<A;++O)va(e,h+3*O,T[Xm[O]]);h+=3*A;for(var q=[g,E],P=0;P<2;++P)for(var F=q[P],O=0;O<F.length;++O){var U=F[O]&31;va(e,h,W[U]),h+=T[U],U>15&&(va(e,h,F[O]>>5&127),h+=F[O]>>12)}}else Z=wj,te=bo,Q=xj,K=Pc;for(var O=0;O<s;++O){var H=n[O];if(H>255){var U=H>>18&31;Iu(e,h,Z[U+257]),h+=te[U+257],U>7&&(va(e,h,H>>23&31),h+=$h[U]);var B=H&31;Iu(e,h,Q[B]),h+=K[B],B>3&&(Iu(e,h,H>>5&8191),h+=Hh[B])}else Iu(e,h,Z[H]),h+=te[H]}return Iu(e,h,Z[256]),h+te[256]},Nj=new B1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),S_=new an(0),Ej=function(t,e,r,n,i,a){var o=a.z||t.length,s=new an(n+o+5*(1+Math.ceil(o/7e3))+i),l=s.subarray(n,s.length-i),u=a.l,h=(a.r||0)&7;if(e){h&&(l[0]=a.r>>3);for(var f=Nj[e-1],d=f>>13,c=f&8191,y=(1<<r)-1,v=a.p||new Xn(32768),w=a.h||new Xn(y+1),m=Math.ceil(r/3),g=2*m,b=function(De){return(t[De]^t[De+1]<<m^t[De+2]<<g)&y},S=new B1(25e3),E=new Xn(288),I=new Xn(32),L=0,O=0,M=a.i||0,T=0,k=a.w||0,A=0;M+2<o;++M){var R=b(M),C=M&32767,V=w[R];if(v[C]=V,w[R]=C,k<=M){var Z=o-M;if((L>7e3||T>24576)&&(Z>423||!u)){h=g2(t,l,0,S,E,I,O,T,A,M-A,h),T=L=O=0,A=M;for(var te=0;te<286;++te)E[te]=0;for(var te=0;te<30;++te)I[te]=0}var Q=2,K=0,W=c,q=C-V&32767;if(Z>2&&R==b(M-q))for(var P=Math.min(d,Z)-1,F=Math.min(32767,M),U=Math.min(258,Z);q<=F&&--W&&C!=V;){if(t[M+Q]==t[M+Q-q]){for(var H=0;H<U&&t[M+H]==t[M+H-q];++H);if(H>Q){if(Q=H,K=q,H>P)break;for(var B=Math.min(q,H-2),J=0,te=0;te<B;++te){var re=M-q+te&32767,ne=v[re],ge=re-ne&32767;ge>J&&(J=ge,V=re)}}}C=V,V=v[C],q+=C-V&32767}if(K){S[T++]=268435456|Qm[Q]<<18|p2[K];var be=Qm[Q]&31,Ee=p2[K]&31;O+=$h[be]+Hh[Ee],++E[257+be],++I[Ee],k=M+Q,++L}else S[T++]=t[M],++E[t[M]]}}for(M=Math.max(M,k);M<o;++M)S[T++]=t[M],++E[t[M]];h=g2(t,l,u,S,E,I,O,T,A,M-A,h),u||(a.r=h&7|l[h/8|0]<<3,h-=7,a.h=w,a.p=v,a.i=M,a.w=k)}else{for(var M=a.w||0;M<o+u;M+=65535){var Ae=M+65535;Ae>=o&&(l[h/8|0]=u,Ae=o),h=__(l,h+1,t.subarray(M,Ae))}a.i=o}return x_(s,0,n+q1(h)+i)},k_=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,a=r.length|0,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=n+=r[o];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Aj=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new an(a.length+t.length);o.set(a),o.set(t,a.length),t=o,i.w=a.length}return Ej(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},N_=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},jj=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=k_();i.p(e.dictionary),N_(t,2,i.d())}},Oj=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Ti(6,"invalid zlib data"),(t[1]>>5&1)==1&&Ti(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function tg(t,e){e||(e={});var r=k_();r.p(t);var n=Aj(t,e,e.dictionary?6:2,4);return jj(n,e),N_(n,n.length-4,r.d()),n}function Lj(t,e){return kj(t.subarray(Oj(t),-4),{i:2},e,e)}var Pj=typeof TextDecoder<"u"&&new TextDecoder,Tj=0;try{Pj.decode(S_,{stream:!0}),Tj=1}catch{}var lt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function k0(){lt.console&&typeof lt.console.log=="function"&&lt.console.log.apply(lt.console,arguments)}var zt={log:k0,warn:function(t){lt.console&&(typeof lt.console.warn=="function"?lt.console.warn.apply(lt.console,arguments):k0.call(null,arguments))},error:function(t){lt.console&&(typeof lt.console.error=="function"?lt.console.error.apply(lt.console,arguments):k0(t))}};function N0(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){$o(n.response,e,r)},n.onerror=function(){zt.error("could not download file")},n.send()}function v2(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function id(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var sc,rg,$o=lt.saveAs||((typeof window>"u"?"undefined":Tt(window))!=="object"||window!==lt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=lt.URL||lt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?v2(i.href)?N0(t,e,r):id(i,i.target="_blank"):id(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){id(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(v2(t))N0(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){id(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:Tt(a)!=="object"&&(zt.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return N0(t,e,r);var i=t.type==="application/octet-stream",a=/constructor/i.test(lt.HTMLElement)||lt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":Tt(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var h=s.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=h:location=h,n=null},s.readAsDataURL(t)}else{var l=lt.URL||lt.webkitURL,u=l.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function E_(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,a=r[n].process,o=i.exec(t);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+s+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function E0(t,e){var r=t[0],n=t[1],i=t[2],a=t[3];r=Zr(r,n,i,a,e[0],7,-680876936),a=Zr(a,r,n,i,e[1],12,-389564586),i=Zr(i,a,r,n,e[2],17,606105819),n=Zr(n,i,a,r,e[3],22,-1044525330),r=Zr(r,n,i,a,e[4],7,-176418897),a=Zr(a,r,n,i,e[5],12,1200080426),i=Zr(i,a,r,n,e[6],17,-1473231341),n=Zr(n,i,a,r,e[7],22,-45705983),r=Zr(r,n,i,a,e[8],7,1770035416),a=Zr(a,r,n,i,e[9],12,-1958414417),i=Zr(i,a,r,n,e[10],17,-42063),n=Zr(n,i,a,r,e[11],22,-1990404162),r=Zr(r,n,i,a,e[12],7,1804603682),a=Zr(a,r,n,i,e[13],12,-40341101),i=Zr(i,a,r,n,e[14],17,-1502002290),r=en(r,n=Zr(n,i,a,r,e[15],22,1236535329),i,a,e[1],5,-165796510),a=en(a,r,n,i,e[6],9,-1069501632),i=en(i,a,r,n,e[11],14,643717713),n=en(n,i,a,r,e[0],20,-373897302),r=en(r,n,i,a,e[5],5,-701558691),a=en(a,r,n,i,e[10],9,38016083),i=en(i,a,r,n,e[15],14,-660478335),n=en(n,i,a,r,e[4],20,-405537848),r=en(r,n,i,a,e[9],5,568446438),a=en(a,r,n,i,e[14],9,-1019803690),i=en(i,a,r,n,e[3],14,-187363961),n=en(n,i,a,r,e[8],20,1163531501),r=en(r,n,i,a,e[13],5,-1444681467),a=en(a,r,n,i,e[2],9,-51403784),i=en(i,a,r,n,e[7],14,1735328473),r=tn(r,n=en(n,i,a,r,e[12],20,-1926607734),i,a,e[5],4,-378558),a=tn(a,r,n,i,e[8],11,-2022574463),i=tn(i,a,r,n,e[11],16,1839030562),n=tn(n,i,a,r,e[14],23,-35309556),r=tn(r,n,i,a,e[1],4,-1530992060),a=tn(a,r,n,i,e[4],11,1272893353),i=tn(i,a,r,n,e[7],16,-155497632),n=tn(n,i,a,r,e[10],23,-1094730640),r=tn(r,n,i,a,e[13],4,681279174),a=tn(a,r,n,i,e[0],11,-358537222),i=tn(i,a,r,n,e[3],16,-722521979),n=tn(n,i,a,r,e[6],23,76029189),r=tn(r,n,i,a,e[9],4,-640364487),a=tn(a,r,n,i,e[12],11,-421815835),i=tn(i,a,r,n,e[15],16,530742520),r=rn(r,n=tn(n,i,a,r,e[2],23,-995338651),i,a,e[0],6,-198630844),a=rn(a,r,n,i,e[7],10,1126891415),i=rn(i,a,r,n,e[14],15,-1416354905),n=rn(n,i,a,r,e[5],21,-57434055),r=rn(r,n,i,a,e[12],6,1700485571),a=rn(a,r,n,i,e[3],10,-1894986606),i=rn(i,a,r,n,e[10],15,-1051523),n=rn(n,i,a,r,e[1],21,-2054922799),r=rn(r,n,i,a,e[8],6,1873313359),a=rn(a,r,n,i,e[15],10,-30611744),i=rn(i,a,r,n,e[6],15,-1560198380),n=rn(n,i,a,r,e[13],21,1309151649),r=rn(r,n,i,a,e[4],6,-145523070),a=rn(a,r,n,i,e[11],10,-1120210379),i=rn(i,a,r,n,e[2],15,718787259),n=rn(n,i,a,r,e[9],21,-343485551),t[0]=lo(r,t[0]),t[1]=lo(n,t[1]),t[2]=lo(i,t[2]),t[3]=lo(a,t[3])}function Wh(t,e,r,n,i,a){return e=lo(lo(e,t),lo(n,a)),lo(e<<i|e>>>32-i,r)}function Zr(t,e,r,n,i,a,o){return Wh(e&r|~e&n,t,e,i,a,o)}function en(t,e,r,n,i,a,o){return Wh(e&n|r&~n,t,e,i,a,o)}function tn(t,e,r,n,i,a,o){return Wh(e^r^n,t,e,i,a,o)}function rn(t,e,r,n,i,a,o){return Wh(r^(e|~n),t,e,i,a,o)}function A_(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)E0(n,Cj(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(E0(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,E0(n,i),n}function Cj(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}sc=lt.atob.bind(lt),rg=lt.btoa.bind(lt);var y2="0123456789abcdef".split("");function Rj(t){for(var e="",r=0;r<4;r++)e+=y2[t>>8*r+4&15]+y2[t>>8*r&15];return e}function Ij(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function ng(t){return A_(t).map(Ij).join("")}var Dj=function(t){for(var e=0;e<t.length;e++)t[e]=Rj(t[e]);return t.join("")}(A_("hello"))!="5d41402abc4b2a76b9719d911017c592";function lo(t,e){if(Dj){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ig(t,e){var r,n,i,a;if(t!==r){for(var o=(i=t,a=1+(256/t.length>>0),new Array(a+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var u=0;for(l=0;l<256;l++){var h=s[l];u=(u+h+o.charCodeAt(l))%256,s[l]=s[u],s[u]=h}r=t,n=s}else s=n;var f=e.length,d=0,c=0,y="";for(l=0;l<f;l++)c=(c+(h=s[d=(d+1)%256]))%256,s[d]=s[c],s[c]=h,o=s[(s[d]+s[c])%256],y+=String.fromCharCode(e.charCodeAt(l)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var w2={print:4,modify:8,copy:16,"annot-forms":32};function Qs(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(s){if(w2.perm!==void 0)throw new Error("Invalid permission: "+s);i+=w2[s]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=ng(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=ig(this.encryptionKey,this.padding)}function Zs(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[n]}return e}function b2(t){if(Tt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var a=Math.random().toString(35);return e[r][a]=[n,!!i],a},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[r]){var o=e[r][a];try{o[0].apply(t,n)}catch(s){lt.console&&zt.error("jsPDF PubSub Error",s.message,s)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function hh(t){if(!(this instanceof hh))return new hh(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function j_(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Ko(t,e,r,n,i){if(!(this instanceof Ko))return new Ko(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,j_.call(this,n,i)}function dl(t,e,r,n,i){if(!(this instanceof dl))return new dl(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,j_.call(this,n,i)}function st(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],o=[],s=1,l=16,u="S",h=null;Tt(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,a=t.compress||t.compressPdf||a,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),s=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(a===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,d={},c={internal:{},__private__:{}};c.__private__.PubSub=b2;var y="1.3",v=c.__private__.getPdfVersion=function(){return y};c.__private__.setPdfVersion=function(N){y=N};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};c.__private__.getPageFormats=function(){return w};var m=c.__private__.getPageFormat=function(N){return w[N]};i=i||"a4";var g={COMPAT:"compat",ADVANCED:"advanced"},b=g.COMPAT;function S(){this.saveGraphicsState(),ue(new it(Fe,0,0,-Fe,0,Fa()*Fe).toString()+" cm"),this.setFontSize(this.getFontSize()/Fe),u="n",b=g.ADVANCED}function E(){this.restoreGraphicsState(),u="S",b=g.COMPAT}var I=c.__private__.combineFontStyleAndFontWeight=function(N,$){if(N=="bold"&&$=="normal"||N=="bold"&&$==400||N=="normal"&&$=="italic"||N=="bold"&&$=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $&&(N=$==400||$==="normal"?N==="italic"?"italic":"normal":$!=700&&$!=="bold"||N!=="normal"?($==700?"bold":$)+""+N:"bold"),N};c.advancedAPI=function(N){var $=b===g.COMPAT;return $&&S.call(this),typeof N!="function"||(N(this),$&&E.call(this)),this},c.compatAPI=function(N){var $=b===g.ADVANCED;return $&&E.call(this),typeof N!="function"||(N(this),$&&S.call(this)),this},c.isAdvancedAPI=function(){return b===g.ADVANCED};var L,O=function(N){if(b!==g.ADVANCED)throw new Error(N+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=c.roundToPrecision=c.__private__.roundToPrecision=function(N,$){var le=e||$;if(isNaN(N)||isNaN(le))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return N.toFixed(le).replace(/0+$/,"")};L=c.hpf=c.__private__.hpf=typeof l=="number"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return M(N,l)}:l==="smart"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return M(N,N>-1&&N<1?16:5)}:function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return M(N,16)};var T=c.f2=c.__private__.f2=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f2");return M(N,2)},k=c.__private__.f3=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f3");return M(N,3)},A=c.scale=c.__private__.scale=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.scale");return b===g.COMPAT?N*Fe:b===g.ADVANCED?N:void 0},R=function(N){return b===g.COMPAT?Fa()-N:b===g.ADVANCED?N:void 0},C=function(N){return A(R(N))};c.__private__.setPrecision=c.setPrecision=function(N){typeof parseInt(N,10)=="number"&&(e=parseInt(N,10))};var V,Z="00000000000000000000000000000000",te=c.__private__.getFileId=function(){return Z},Q=c.__private__.setFileId=function(N){return Z=N!==void 0&&/^[a-fA-F0-9]{32}$/.test(N)?N.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(Yr=new Qs(h.userPermissions,h.userPassword,h.ownerPassword,Z)),Z};c.setFileId=function(N){return Q(N),this},c.getFileId=function(){return te()};var K=c.__private__.convertDateToPDFDate=function(N){var $=N.getTimezoneOffset(),le=$<0?"+":"-",fe=Math.floor(Math.abs($/60)),xe=Math.abs($%60),je=[le,U(fe),"'",U(xe),"'"].join("");return["D:",N.getFullYear(),U(N.getMonth()+1),U(N.getDate()),U(N.getHours()),U(N.getMinutes()),U(N.getSeconds()),je].join("")},W=c.__private__.convertPDFDateToDate=function(N){var $=parseInt(N.substr(2,4),10),le=parseInt(N.substr(6,2),10)-1,fe=parseInt(N.substr(8,2),10),xe=parseInt(N.substr(10,2),10),je=parseInt(N.substr(12,2),10),Re=parseInt(N.substr(14,2),10);return new Date($,le,fe,xe,je,Re,0)},q=c.__private__.setCreationDate=function(N){var $;if(N===void 0&&(N=new Date),N instanceof Date)$=K(N);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(N))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$=N}return V=$},P=c.__private__.getCreationDate=function(N){var $=V;return N==="jsDate"&&($=W(V)),$};c.setCreationDate=function(N){return q(N),this},c.getCreationDate=function(N){return P(N)};var F,U=c.__private__.padd2=function(N){return("0"+parseInt(N)).slice(-2)},H=c.__private__.padd2Hex=function(N){return("00"+(N=N.toString())).substr(N.length)},B=0,J=[],re=[],ne=0,ge=[],be=[],Ee=!1,Ae=re,De=function(){B=0,ne=0,re=[],J=[],ge=[],Fn=It(),bn=It()};c.__private__.setCustomOutputDestination=function(N){Ee=!0,Ae=N};var _e=function(N){Ee||(Ae=N)};c.__private__.resetCustomOutputDestination=function(){Ee=!1,Ae=re};var ue=c.__private__.out=function(N){return N=N.toString(),ne+=N.length+1,Ae.push(N),Ae},He=c.__private__.write=function(N){return ue(arguments.length===1?N.toString():Array.prototype.join.call(arguments," "))},oe=c.__private__.getArrayBuffer=function(N){for(var $=N.length,le=new ArrayBuffer($),fe=new Uint8Array(le);$--;)fe[$]=N.charCodeAt($);return le},se=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];c.__private__.getStandardFonts=function(){return se};var ce=t.fontSize||16;c.__private__.setFontSize=c.setFontSize=function(N){return ce=b===g.ADVANCED?N/Fe:N,this};var ve,de=c.__private__.getFontSize=c.getFontSize=function(){return b===g.COMPAT?ce:ce*Fe},Le=t.R2L||!1;c.__private__.setR2L=c.setR2L=function(N){return Le=N,this},c.__private__.getR2L=c.getR2L=function(){return Le};var Me,qe=c.__private__.setZoomMode=function(N){var $=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(N))ve=N;else if(isNaN(N)){if($.indexOf(N)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+N+'" is not recognized.');ve=N}else ve=parseInt(N,10)};c.__private__.getZoomMode=function(){return ve};var Ke,Ze=c.__private__.setPageMode=function(N){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(N)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+N+'" is not recognized.');Me=N};c.__private__.getPageMode=function(){return Me};var Ve=c.__private__.setLayoutMode=function(N){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(N)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+N+'" is not recognized.');Ke=N};c.__private__.getLayoutMode=function(){return Ke},c.__private__.setDisplayMode=c.setDisplayMode=function(N,$,le){return qe(N),Ve($),Ze(le),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};c.__private__.getDocumentProperty=function(N){if(Object.keys(et).indexOf(N)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[N]},c.__private__.getDocumentProperties=function(){return et},c.__private__.setDocumentProperties=c.setProperties=c.setDocumentProperties=function(N){for(var $ in et)et.hasOwnProperty($)&&N[$]&&(et[$]=N[$]);return this},c.__private__.setDocumentProperty=function(N,$){if(Object.keys(et).indexOf(N)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[N]=$};var $e,Fe,Bt,ct,$t,gt={},xt={},Br=[],vt={},ia={},qt={},Vr={},wi=null,Rt=0,ut=[],Nt=new b2(c),Ht=t.hotfixes||[],Zt={},ni={},Dn=[],it=function N($,le,fe,xe,je,Re){if(!(this instanceof N))return new N($,le,fe,xe,je,Re);isNaN($)&&($=1),isNaN(le)&&(le=0),isNaN(fe)&&(fe=0),isNaN(xe)&&(xe=1),isNaN(je)&&(je=0),isNaN(Re)&&(Re=0),this._matrix=[$,le,fe,xe,je,Re]};Object.defineProperty(it.prototype,"sx",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(it.prototype,"shy",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(it.prototype,"shx",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(it.prototype,"sy",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(it.prototype,"tx",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(it.prototype,"ty",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(it.prototype,"a",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(it.prototype,"b",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(it.prototype,"c",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(it.prototype,"d",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(it.prototype,"e",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(it.prototype,"f",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(it.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(it.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(it.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(it.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),it.prototype.join=function(N){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(N)},it.prototype.multiply=function(N){var $=N.sx*this.sx+N.shy*this.shx,le=N.sx*this.shy+N.shy*this.sy,fe=N.shx*this.sx+N.sy*this.shx,xe=N.shx*this.shy+N.sy*this.sy,je=N.tx*this.sx+N.ty*this.shx+this.tx,Re=N.tx*this.shy+N.ty*this.sy+this.ty;return new it($,le,fe,xe,je,Re)},it.prototype.decompose=function(){var N=this.sx,$=this.shy,le=this.shx,fe=this.sy,xe=this.tx,je=this.ty,Re=Math.sqrt(N*N+$*$),We=(N/=Re)*le+($/=Re)*fe;le-=N*We,fe-=$*We;var nt=Math.sqrt(le*le+fe*fe);return We/=nt,N*(fe/=nt)<$*(le/=nt)&&(N=-N,$=-$,We=-We,Re=-Re),{scale:new it(Re,0,0,nt,0,0),translate:new it(1,0,0,1,xe,je),rotate:new it(N,$,-$,N,0,0),skew:new it(1,0,We,1,0,0)}},it.prototype.toString=function(N){return this.join(" ")},it.prototype.inversed=function(){var N=this.sx,$=this.shy,le=this.shx,fe=this.sy,xe=this.tx,je=this.ty,Re=1/(N*fe-$*le),We=fe*Re,nt=-$*Re,pt=-le*Re,dt=N*Re;return new it(We,nt,pt,dt,-We*xe-pt*je,-nt*xe-dt*je)},it.prototype.applyToPoint=function(N){var $=N.x*this.sx+N.y*this.shx+this.tx,le=N.x*this.shy+N.y*this.sy+this.ty;return new ks($,le)},it.prototype.applyToRectangle=function(N){var $=this.applyToPoint(N),le=this.applyToPoint(new ks(N.x+N.w,N.y+N.h));return new iu($.x,$.y,le.x-$.x,le.y-$.y)},it.prototype.clone=function(){var N=this.sx,$=this.shy,le=this.shx,fe=this.sy,xe=this.tx,je=this.ty;return new it(N,$,le,fe,xe,je)},c.Matrix=it;var wn=c.matrixMult=function(N,$){return $.multiply(N)},Mn=new it(1,0,0,1,0,0);c.unitMatrix=c.identityMatrix=Mn;var Gr=function(N,$){if(!ia[N]){var le=($ instanceof Ko?"Sh":"P")+(Object.keys(vt).length+1).toString(10);$.id=le,ia[N]=le,vt[le]=$,Nt.publish("addPattern",$)}};c.ShadingPattern=Ko,c.TilingPattern=dl,c.addShadingPattern=function(N,$){return O("addShadingPattern()"),Gr(N,$),this},c.beginTilingPattern=function(N){O("beginTilingPattern()"),rf(N.boundingBox[0],N.boundingBox[1],N.boundingBox[2]-N.boundingBox[0],N.boundingBox[3]-N.boundingBox[1],N.matrix)},c.endTilingPattern=function(N,$){O("endTilingPattern()"),$.stream=be[F].join(`
`),Gr(N,$),Nt.publish("endTilingPattern",$),Dn.pop().restore()};var At=c.__private__.newObject=function(){var N=It();return Kr(N,!0),N},It=c.__private__.newObjectDeferred=function(){return B++,J[B]=function(){return ne},B},Kr=function(N,$){return $=typeof $=="boolean"&&$,J[N]=ne,$&&ue(N+" 0 obj"),N},aa=c.__private__.newAdditionalObject=function(){var N={objId:It(),content:""};return ge.push(N),N},Fn=It(),bn=It(),dr=c.__private__.decodeColorString=function(N){var $=N.split(" ");if($.length!==2||$[1]!=="g"&&$[1]!=="G")$.length===5&&($[4]==="k"||$[4]==="K")&&($=[(1-$[0])*(1-$[3]),(1-$[1])*(1-$[3]),(1-$[2])*(1-$[3]),"r"]);else{var le=parseFloat($[0]);$=[le,le,le,"r"]}for(var fe="#",xe=0;xe<3;xe++)fe+=("0"+Math.floor(255*parseFloat($[xe])).toString(16)).slice(-2);return fe},xn=c.__private__.encodeColorString=function(N){var $;typeof N=="string"&&(N={ch1:N});var le=N.ch1,fe=N.ch2,xe=N.ch3,je=N.ch4,Re=N.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof le=="string"&&le.charAt(0)!=="#"){var We=new E_(le);if(We.ok)le=We.toHex();else if(!/^\d*\.?\d*$/.test(le))throw new Error('Invalid color "'+le+'" passed to jsPDF.encodeColorString.')}if(typeof le=="string"&&/^#[0-9A-Fa-f]{3}$/.test(le)&&(le="#"+le[1]+le[1]+le[2]+le[2]+le[3]+le[3]),typeof le=="string"&&/^#[0-9A-Fa-f]{6}$/.test(le)){var nt=parseInt(le.substr(1),16);le=nt>>16&255,fe=nt>>8&255,xe=255&nt}if(fe===void 0||je===void 0&&le===fe&&fe===xe)if(typeof le=="string")$=le+" "+Re[0];else switch(N.precision){case 2:$=T(le/255)+" "+Re[0];break;case 3:default:$=k(le/255)+" "+Re[0]}else if(je===void 0||Tt(je)==="object"){if(je&&!isNaN(je.a)&&je.a===0)return $=["1.","1.","1.",Re[1]].join(" ");if(typeof le=="string")$=[le,fe,xe,Re[1]].join(" ");else switch(N.precision){case 2:$=[T(le/255),T(fe/255),T(xe/255),Re[1]].join(" ");break;default:case 3:$=[k(le/255),k(fe/255),k(xe/255),Re[1]].join(" ")}}else if(typeof le=="string")$=[le,fe,xe,je,Re[2]].join(" ");else switch(N.precision){case 2:$=[T(le),T(fe),T(xe),T(je),Re[2]].join(" ");break;case 3:default:$=[k(le),k(fe),k(xe),k(je),Re[2]].join(" ")}return $},Bn=c.__private__.getFilters=function(){return o},sn=c.__private__.putStream=function(N){var $=(N=N||{}).data||"",le=N.filters||Bn(),fe=N.alreadyAppliedFilters||[],xe=N.addLength1||!1,je=$.length,Re=N.objectId,We=function(Jr){return Jr};if(h!==null&&Re===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(We=Yr.encryptor(Re,0));var nt={};le===!0&&(le=["FlateEncode"]);var pt=N.additionalKeyValues||[],dt=(nt=st.API.processDataByFilters!==void 0?st.API.processDataByFilters($,le):{data:$,reverseChain:[]}).reverseChain+(Array.isArray(fe)?fe.join(" "):fe.toString());if(nt.data.length!==0&&(pt.push({key:"Length",value:nt.data.length}),xe===!0&&pt.push({key:"Length1",value:je})),dt.length!=0)if(dt.split("/").length-1==1)pt.push({key:"Filter",value:dt});else{pt.push({key:"Filter",value:"["+dt+"]"});for(var _t=0;_t<pt.length;_t+=1)if(pt[_t].key==="DecodeParms"){for(var nr=[],lr=0;lr<nt.reverseChain.split("/").length-1;lr+=1)nr.push("null");nr.push(pt[_t].value),pt[_t].value="["+nr.join(" ")+"]"}}ue("<<");for(var Sr=0;Sr<pt.length;Sr++)ue("/"+pt[Sr].key+" "+pt[Sr].value);ue(">>"),nt.data.length!==0&&(ue("stream"),ue(We(nt.data)),ue("endstream"))},qn=c.__private__.putPage=function(N){var $=N.number,le=N.data,fe=N.objId,xe=N.contentsObjId;Kr(fe,!0),ue("<</Type /Page"),ue("/Parent "+N.rootDictionaryObjId+" 0 R"),ue("/Resources "+N.resourceDictionaryObjId+" 0 R"),ue("/MediaBox ["+parseFloat(L(N.mediaBox.bottomLeftX))+" "+parseFloat(L(N.mediaBox.bottomLeftY))+" "+L(N.mediaBox.topRightX)+" "+L(N.mediaBox.topRightY)+"]"),N.cropBox!==null&&ue("/CropBox ["+L(N.cropBox.bottomLeftX)+" "+L(N.cropBox.bottomLeftY)+" "+L(N.cropBox.topRightX)+" "+L(N.cropBox.topRightY)+"]"),N.bleedBox!==null&&ue("/BleedBox ["+L(N.bleedBox.bottomLeftX)+" "+L(N.bleedBox.bottomLeftY)+" "+L(N.bleedBox.topRightX)+" "+L(N.bleedBox.topRightY)+"]"),N.trimBox!==null&&ue("/TrimBox ["+L(N.trimBox.bottomLeftX)+" "+L(N.trimBox.bottomLeftY)+" "+L(N.trimBox.topRightX)+" "+L(N.trimBox.topRightY)+"]"),N.artBox!==null&&ue("/ArtBox ["+L(N.artBox.bottomLeftX)+" "+L(N.artBox.bottomLeftY)+" "+L(N.artBox.topRightX)+" "+L(N.artBox.topRightY)+"]"),typeof N.userUnit=="number"&&N.userUnit!==1&&ue("/UserUnit "+N.userUnit),Nt.publish("putPage",{objId:fe,pageContext:ut[$],pageNumber:$,page:le}),ue("/Contents "+xe+" 0 R"),ue(">>"),ue("endobj");var je=le.join(`
`);return b===g.ADVANCED&&(je+=`
Q`),Kr(xe,!0),sn({data:je,filters:Bn(),objectId:xe}),ue("endobj"),fe},oa=c.__private__.putPages=function(){var N,$,le=[];for(N=1;N<=Rt;N++)ut[N].objId=It(),ut[N].contentsObjId=It();for(N=1;N<=Rt;N++)le.push(qn({number:N,data:be[N],objId:ut[N].objId,contentsObjId:ut[N].contentsObjId,mediaBox:ut[N].mediaBox,cropBox:ut[N].cropBox,bleedBox:ut[N].bleedBox,trimBox:ut[N].trimBox,artBox:ut[N].artBox,userUnit:ut[N].userUnit,rootDictionaryObjId:Fn,resourceDictionaryObjId:bn}));Kr(Fn,!0),ue("<</Type /Pages");var fe="/Kids [";for($=0;$<Rt;$++)fe+=le[$]+" 0 R ";ue(fe+"]"),ue("/Count "+Rt),ue(">>"),ue("endobj"),Nt.publish("postPutPages")},tt=function(N){Nt.publish("putFont",{font:N,out:ue,newObject:At,putStream:sn}),N.isAlreadyPutted!==!0&&(N.objectNumber=At(),ue("<<"),ue("/Type /Font"),ue("/BaseFont /"+Zs(N.postScriptName)),ue("/Subtype /Type1"),typeof N.encoding=="string"&&ue("/Encoding /"+N.encoding),ue("/FirstChar 32"),ue("/LastChar 255"),ue(">>"),ue("endobj"))},he=function(){for(var N in gt)gt.hasOwnProperty(N)&&(f===!1||f===!0&&d.hasOwnProperty(N))&&tt(gt[N])},Ie=function(N){N.objectNumber=At();var $=[];$.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Form"}),$.push({key:"BBox",value:"["+[L(N.x),L(N.y),L(N.x+N.width),L(N.y+N.height)].join(" ")+"]"}),$.push({key:"Matrix",value:"["+N.matrix.toString()+"]"});var le=N.pages[1].join(`
`);sn({data:le,additionalKeyValues:$,objectId:N.objectNumber}),ue("endobj")},Ye=function(){for(var N in Zt)Zt.hasOwnProperty(N)&&Ie(Zt[N])},jt=function(N,$){var le,fe=[],xe=1/($-1);for(le=0;le<1;le+=xe)fe.push(le);if(fe.push(1),N[0].offset!=0){var je={offset:0,color:N[0].color};N.unshift(je)}if(N[N.length-1].offset!=1){var Re={offset:1,color:N[N.length-1].color};N.push(Re)}for(var We="",nt=0,pt=0;pt<fe.length;pt++){for(le=fe[pt];le>N[nt+1].offset;)nt++;var dt=N[nt].offset,_t=(le-dt)/(N[nt+1].offset-dt),nr=N[nt].color,lr=N[nt+1].color;We+=H(Math.round((1-_t)*nr[0]+_t*lr[0]).toString(16))+H(Math.round((1-_t)*nr[1]+_t*lr[1]).toString(16))+H(Math.round((1-_t)*nr[2]+_t*lr[2]).toString(16))}return We.trim()},_r=function(N,$){$||($=21);var le=At(),fe=jt(N.colors,$),xe=[];xe.push({key:"FunctionType",value:"0"}),xe.push({key:"Domain",value:"[0.0 1.0]"}),xe.push({key:"Size",value:"["+$+"]"}),xe.push({key:"BitsPerSample",value:"8"}),xe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),sn({data:fe,additionalKeyValues:xe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:le}),ue("endobj"),N.objectNumber=At(),ue("<< /ShadingType "+N.type),ue("/ColorSpace /DeviceRGB");var je="/Coords ["+L(parseFloat(N.coords[0]))+" "+L(parseFloat(N.coords[1]))+" ";N.type===2?je+=L(parseFloat(N.coords[2]))+" "+L(parseFloat(N.coords[3])):je+=L(parseFloat(N.coords[2]))+" "+L(parseFloat(N.coords[3]))+" "+L(parseFloat(N.coords[4]))+" "+L(parseFloat(N.coords[5])),ue(je+="]"),N.matrix&&ue("/Matrix ["+N.matrix.toString()+"]"),ue("/Function "+le+" 0 R"),ue("/Extend [true true]"),ue(">>"),ue("endobj")},er=function(N,$){var le=It(),fe=At();$.push({resourcesOid:le,objectOid:fe}),N.objectNumber=fe;var xe=[];xe.push({key:"Type",value:"/Pattern"}),xe.push({key:"PatternType",value:"1"}),xe.push({key:"PaintType",value:"1"}),xe.push({key:"TilingType",value:"1"}),xe.push({key:"BBox",value:"["+N.boundingBox.map(L).join(" ")+"]"}),xe.push({key:"XStep",value:L(N.xStep)}),xe.push({key:"YStep",value:L(N.yStep)}),xe.push({key:"Resources",value:le+" 0 R"}),N.matrix&&xe.push({key:"Matrix",value:"["+N.matrix.toString()+"]"}),sn({data:N.stream,additionalKeyValues:xe,objectId:N.objectNumber}),ue("endobj")},hr=function(N){var $;for($ in vt)vt.hasOwnProperty($)&&(vt[$]instanceof Ko?_r(vt[$]):vt[$]instanceof dl&&er(vt[$],N))},_n=function(N){for(var $ in N.objectNumber=At(),ue("<<"),N)switch($){case"opacity":ue("/ca "+T(N[$]));break;case"stroke-opacity":ue("/CA "+T(N[$]))}ue(">>"),ue("endobj")},$i=function(){var N;for(N in qt)qt.hasOwnProperty(N)&&_n(qt[N])},sa=function(){for(var N in ue("/XObject <<"),Zt)Zt.hasOwnProperty(N)&&Zt[N].objectNumber>=0&&ue("/"+N+" "+Zt[N].objectNumber+" 0 R");Nt.publish("putXobjectDict"),ue(">>")},pr=function(){Yr.oid=At(),ue("<<"),ue("/Filter /Standard"),ue("/V "+Yr.v),ue("/R "+Yr.r),ue("/U <"+Yr.toHexString(Yr.U)+">"),ue("/O <"+Yr.toHexString(Yr.O)+">"),ue("/P "+Yr.P),ue(">>"),ue("endobj")},Eo=function(){for(var N in ue("/Font <<"),gt)gt.hasOwnProperty(N)&&(f===!1||f===!0&&d.hasOwnProperty(N))&&ue("/"+N+" "+gt[N].objectNumber+" 0 R");ue(">>")},gs=function(){if(Object.keys(vt).length>0){for(var N in ue("/Shading <<"),vt)vt.hasOwnProperty(N)&&vt[N]instanceof Ko&&vt[N].objectNumber>=0&&ue("/"+N+" "+vt[N].objectNumber+" 0 R");Nt.publish("putShadingPatternDict"),ue(">>")}},vs=function(N){if(Object.keys(vt).length>0){for(var $ in ue("/Pattern <<"),vt)vt.hasOwnProperty($)&&vt[$]instanceof c.TilingPattern&&vt[$].objectNumber>=0&&vt[$].objectNumber<N&&ue("/"+$+" "+vt[$].objectNumber+" 0 R");Nt.publish("putTilingPatternDict"),ue(">>")}},ep=function(){if(Object.keys(qt).length>0){var N;for(N in ue("/ExtGState <<"),qt)qt.hasOwnProperty(N)&&qt[N].objectNumber>=0&&ue("/"+N+" "+qt[N].objectNumber+" 0 R");Nt.publish("putGStateDict"),ue(">>")}},mr=function(N){Kr(N.resourcesOid,!0),ue("<<"),ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Eo(),gs(),vs(N.objectOid),ep(),sa(),ue(">>"),ue("endobj")},Uc=function(){var N=[];he(),$i(),Ye(),hr(N),Nt.publish("putResources"),N.forEach(mr),mr({resourcesOid:bn,objectOid:Number.MAX_SAFE_INTEGER}),Nt.publish("postPutResources")},zc=function(){Nt.publish("putAdditionalObjects");for(var N=0;N<ge.length;N++){var $=ge[N];Kr($.objId,!0),ue($.content),ue("endobj")}Nt.publish("postPutAdditionalObjects")},$c=function(N){xt[N.fontName]=xt[N.fontName]||{},xt[N.fontName][N.fontStyle]=N.id},Yl=function(N,$,le,fe,xe){var je={id:"F"+(Object.keys(gt).length+1).toString(10),postScriptName:N,fontName:$,fontStyle:le,encoding:fe,isStandardFont:xe||!1,metadata:{}};return Nt.publish("addFont",{font:je,instance:this}),gt[je.id]=je,$c(je),je.id},tp=function(N){for(var $=0,le=se.length;$<le;$++){var fe=Yl.call(this,N[$][0],N[$][1],N[$][2],se[$][3],!0);f===!1&&(d[fe]=!0);var xe=N[$][0].split("-");$c({id:fe,fontName:xe[0],fontStyle:xe[1]||""})}Nt.publish("addFonts",{fonts:gt,dictionary:xt})},bi=function(N){return N.foo=function(){try{return N.apply(this,arguments)}catch(fe){var $=fe.stack||"";~$.indexOf(" at ")&&($=$.split(" at ")[1]);var le="Error in function "+$.split(`
`)[0].split("<")[0]+": "+fe.message;if(!lt.console)throw new Error(le);lt.console.error(le,fe),lt.alert&&alert(le)}},N.foo.bar=N,N.foo},ys=function(N,$){var le,fe,xe,je,Re,We,nt,pt,dt;if(xe=($=$||{}).sourceEncoding||"Unicode",Re=$.outputEncoding,($.autoencode||Re)&&gt[$e].metadata&&gt[$e].metadata[xe]&&gt[$e].metadata[xe].encoding&&(je=gt[$e].metadata[xe].encoding,!Re&&gt[$e].encoding&&(Re=gt[$e].encoding),!Re&&je.codePages&&(Re=je.codePages[0]),typeof Re=="string"&&(Re=je[Re]),Re)){for(nt=!1,We=[],le=0,fe=N.length;le<fe;le++)(pt=Re[N.charCodeAt(le)])?We.push(String.fromCharCode(pt)):We.push(N[le]),We[le].charCodeAt(0)>>8&&(nt=!0);N=We.join("")}for(le=N.length;nt===void 0&&le!==0;)N.charCodeAt(le-1)>>8&&(nt=!0),le--;if(!nt)return N;for(We=$.noBOM?[]:[254,255],le=0,fe=N.length;le<fe;le++){if((dt=(pt=N.charCodeAt(le))>>8)>>8)throw new Error("Character at position "+le+" of string '"+N+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");We.push(dt),We.push(pt-(dt<<8))}return String.fromCharCode.apply(void 0,We)},Sn=c.__private__.pdfEscape=c.pdfEscape=function(N,$){return ys(N,$).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Jl=c.__private__.beginPage=function(N){be[++Rt]=[],ut[Rt]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(N[0]),topRightY:Number(N[1])}},Wc(Rt),_e(be[F])},Hc=function(N,$){var le,fe,xe;switch(r=$||r,typeof N=="string"&&(le=m(N.toLowerCase()),Array.isArray(le)&&(fe=le[0],xe=le[1])),Array.isArray(N)&&(fe=N[0]*Fe,xe=N[1]*Fe),isNaN(fe)&&(fe=i[0],xe=i[1]),(fe>14400||xe>14400)&&(zt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),fe=Math.min(14400,fe),xe=Math.min(14400,xe)),i=[fe,xe],r.substr(0,1)){case"l":xe>fe&&(i=[xe,fe]);break;case"p":fe>xe&&(i=[xe,fe])}Jl(i),Xc(eu),ue(xi),ru!==0&&ue(ru+" J"),nu!==0&&ue(nu+" j"),Nt.publish("addPage",{pageNumber:Rt})},rp=function(N){N>0&&N<=Rt&&(be.splice(N,1),ut.splice(N,1),Rt--,F>Rt&&(F=Rt),this.setPage(F))},Wc=function(N){N>0&&N<=Rt&&(F=N)},np=c.__private__.getNumberOfPages=c.getNumberOfPages=function(){return be.length-1},Vc=function(N,$,le){var fe,xe=void 0;return le=le||{},N=N!==void 0?N:gt[$e].fontName,$=$!==void 0?$:gt[$e].fontStyle,fe=N.toLowerCase(),xt[fe]!==void 0&&xt[fe][$]!==void 0?xe=xt[fe][$]:xt[N]!==void 0&&xt[N][$]!==void 0?xe=xt[N][$]:le.disableWarning===!1&&zt.warn("Unable to look up font label for font '"+N+"', '"+$+"'. Refer to getFontList() for available fonts."),xe||le.noFallback||(xe=xt.times[$])==null&&(xe=xt.times.normal),xe},ip=c.__private__.putInfo=function(){var N=At(),$=function(fe){return fe};for(var le in h!==null&&($=Yr.encryptor(N,0)),ue("<<"),ue("/Producer ("+Sn($("jsPDF "+st.version))+")"),et)et.hasOwnProperty(le)&&et[le]&&ue("/"+le.substr(0,1).toUpperCase()+le.substr(1)+" ("+Sn($(et[le]))+")");ue("/CreationDate ("+Sn($(V))+")"),ue(">>"),ue("endobj")},Xl=c.__private__.putCatalog=function(N){var $=(N=N||{}).rootDictionaryObjId||Fn;switch(At(),ue("<<"),ue("/Type /Catalog"),ue("/Pages "+$+" 0 R"),ve||(ve="fullwidth"),ve){case"fullwidth":ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ue("/OpenAction [3 0 R /Fit]");break;case"original":ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var le=""+ve;le.substr(le.length-1)==="%"&&(ve=parseInt(ve)/100),typeof ve=="number"&&ue("/OpenAction [3 0 R /XYZ null null "+T(ve)+"]")}switch(Ke||(Ke="continuous"),Ke){case"continuous":ue("/PageLayout /OneColumn");break;case"single":ue("/PageLayout /SinglePage");break;case"two":case"twoleft":ue("/PageLayout /TwoColumnLeft");break;case"tworight":ue("/PageLayout /TwoColumnRight")}Me&&ue("/PageMode /"+Me),Nt.publish("putCatalog"),ue(">>"),ue("endobj")},ap=c.__private__.putTrailer=function(){ue("trailer"),ue("<<"),ue("/Size "+(B+1)),ue("/Root "+B+" 0 R"),ue("/Info "+(B-1)+" 0 R"),h!==null&&ue("/Encrypt "+Yr.oid+" 0 R"),ue("/ID [ <"+Z+"> <"+Z+"> ]"),ue(">>")},op=c.__private__.putHeader=function(){ue("%PDF-"+y),ue("%")},sp=c.__private__.putXRef=function(){var N="0000000000";ue("xref"),ue("0 "+(B+1)),ue("0000000000 65535 f ");for(var $=1;$<=B;$++)typeof J[$]=="function"?ue((N+J[$]()).slice(-10)+" 00000 n "):J[$]!==void 0?ue((N+J[$]).slice(-10)+" 00000 n "):ue("0000000000 00000 n ")},la=c.__private__.buildDocument=function(){De(),_e(re),Nt.publish("buildDocument"),op(),oa(),zc(),Uc(),h!==null&&pr(),ip(),Xl();var N=ne;return sp(),ap(),ue("startxref"),ue(""+N),ue("%%EOF"),_e(be[F]),re.join(`
`)},ws=c.__private__.getBlob=function(N){return new Blob([oe(N)],{type:"application/pdf"})},bs=c.output=c.__private__.output=bi(function(N,$){switch(typeof($=$||{})=="string"?$={filename:$}:$.filename=$.filename||"generated.pdf",N){case void 0:return la();case"save":c.save($.filename);break;case"arraybuffer":return oe(la());case"blob":return ws(la());case"bloburi":case"bloburl":if(lt.URL!==void 0&&typeof lt.URL.createObjectURL=="function")return lt.URL&&lt.URL.createObjectURL(ws(la()))||void 0;zt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var le="",fe=la();try{le=rg(fe)}catch{le=rg(unescape(encodeURIComponent(fe)))}return"data:application/pdf;filename="+$.filename+";base64,"+le;case"pdfobjectnewwindow":if(Object.prototype.toString.call(lt)==="[object Window]"){var xe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",je=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$.pdfObjectUrl&&(xe=$.pdfObjectUrl,je="");var Re='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xe+'"'+je+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($)+");<\/script></body></html>",We=lt.open();return We!==null&&We.document.write(Re),We}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(lt)==="[object Window]"){var nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$.filename+'" width="500px" height="400px" /></body></html>',pt=lt.open();if(pt!==null){pt.document.write(nt);var dt=this;pt.document.documentElement.querySelector("#pdfViewer").onload=function(){pt.document.title=$.filename,pt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(dt.output("bloburl"))}}return pt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(lt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$)+'"></iframe></body></html>',nr=lt.open();if(nr!==null&&(nr.document.write(_t),nr.document.title=$.filename),nr||typeof safari>"u")return nr;break;case"datauri":case"dataurl":return lt.document.location.href=this.output("datauristring",$);default:return null}}),Gc=function(N){return Array.isArray(Ht)===!0&&Ht.indexOf(N)>-1};switch(n){case"pt":Fe=1;break;case"mm":Fe=72/25.4;break;case"cm":Fe=72/2.54;break;case"in":Fe=72;break;case"px":Fe=Gc("px_scaling")==1?.75:96/72;break;case"pc":case"em":Fe=12;break;case"ex":Fe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Fe=n}var Yr=null;q(),Q();var lp=function(N){return h!==null?Yr.encryptor(N,0):function($){return $}},Kc=c.__private__.getPageInfo=c.getPageInfo=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ut[N].objId,pageNumber:N,pageContext:ut[N]}},ft=c.__private__.getPageInfoByObjId=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $ in ut)if(ut[$].objId===N)break;return Kc($)},up=c.__private__.getCurrentPageInfo=c.getCurrentPageInfo=function(){return{objId:ut[F].objId,pageNumber:F,pageContext:ut[F]}};c.addPage=function(){return Hc.apply(this,arguments),this},c.setPage=function(){return Wc.apply(this,arguments),_e.call(this,be[F]),this},c.insertPage=function(N){return this.addPage(),this.movePage(F,N),this},c.movePage=function(N,$){var le,fe;if(N>$){le=be[N],fe=ut[N];for(var xe=N;xe>$;xe--)be[xe]=be[xe-1],ut[xe]=ut[xe-1];be[$]=le,ut[$]=fe,this.setPage($)}else if(N<$){le=be[N],fe=ut[N];for(var je=N;je<$;je++)be[je]=be[je+1],ut[je]=ut[je+1];be[$]=le,ut[$]=fe,this.setPage($)}return this},c.deletePage=function(){return rp.apply(this,arguments),this},c.__private__.text=c.text=function(N,$,le,fe,xe){var je,Re,We,nt,pt,dt,_t,nr,lr,Sr=(fe=fe||{}).scope||this;if(typeof N=="number"&&typeof $=="number"&&(typeof le=="string"||Array.isArray(le))){var Jr=le;le=$,$=N,N=Jr}if(arguments[3]instanceof it?(O("The transform parameter of text() with a Matrix value"),lr=xe):(We=arguments[4],nt=arguments[5],Tt(_t=arguments[3])==="object"&&_t!==null||(typeof We=="string"&&(nt=We,We=null),typeof _t=="string"&&(nt=_t,_t=null),typeof _t=="number"&&(We=_t,_t=null),fe={flags:_t,angle:We,align:nt})),isNaN($)||isNaN(le)||N==null)throw new Error("Invalid arguments passed to jsPDF.text");if(N.length===0)return Sr;var Cr="",_i=!1,Un=typeof fe.lineHeightFactor=="number"?fe.lineHeightFactor:jo,Vi=Sr.internal.scaleFactor;function nf(Wt){return Wt=Wt.split("	").join(Array(fe.TabLen||9).join(" ")),Sn(Wt,_t)}function lu(Wt){for(var Vt,vr=Wt.concat(),Or=[],ha=vr.length;ha--;)typeof(Vt=vr.shift())=="string"?Or.push(Vt):Array.isArray(Wt)&&(Vt.length===1||Vt[1]===void 0&&Vt[2]===void 0)?Or.push(Vt[0]):Or.push([Vt[0],Vt[1],Vt[2]]);return Or}function uu(Wt,Vt){var vr;if(typeof Wt=="string")vr=Vt(Wt)[0];else if(Array.isArray(Wt)){for(var Or,ha,vu=Wt.concat(),Is=[],uf=vu.length;uf--;)typeof(Or=vu.shift())=="string"?Is.push(Vt(Or)[0]):Array.isArray(Or)&&typeof Or[0]=="string"&&(ha=Vt(Or[0],Or[1],Or[2]),Is.push([ha[0],ha[1],ha[2]]));vr=Is}return vr}var Es=!1,cu=!0;if(typeof N=="string")Es=!0;else if(Array.isArray(N)){var fu=N.concat();Re=[];for(var As,qr=fu.length;qr--;)(typeof(As=fu.shift())!="string"||Array.isArray(As)&&typeof As[0]!="string")&&(cu=!1);Es=cu}if(Es===!1)throw new Error('Type of text must be string or Array. "'+N+'" is not recognized.');typeof N=="string"&&(N=N.match(/[\r?\n]/)?N.split(/\r\n|\r|\n/g):[N]);var js=ce/Sr.internal.scaleFactor,Os=js*(Un-1);switch(fe.baseline){case"bottom":le-=Os;break;case"top":le+=js-Os;break;case"hanging":le+=js-2*Os;break;case"middle":le+=js/2-Os}if((dt=fe.maxWidth||0)>0&&(typeof N=="string"?N=Sr.splitTextToSize(N,dt):Object.prototype.toString.call(N)==="[object Array]"&&(N=N.reduce(function(Wt,Vt){return Wt.concat(Sr.splitTextToSize(Vt,dt))},[]))),je={text:N,x:$,y:le,options:fe,mutex:{pdfEscape:Sn,activeFontKey:$e,fonts:gt,activeFontSize:ce}},Nt.publish("preProcessText",je),N=je.text,We=(fe=je.options).angle,!(lr instanceof it)&&We&&typeof We=="number"){We*=Math.PI/180,fe.rotationDirection===0&&(We=-We),b===g.ADVANCED&&(We=-We);var Ls=Math.cos(We),du=Math.sin(We);lr=new it(Ls,du,-du,Ls,0,0)}else We&&We instanceof it&&(lr=We);b!==g.ADVANCED||lr||(lr=Mn),(pt=fe.charSpace||Ss)!==void 0&&(Cr+=L(A(pt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(nr=fe.horizontalScale)!==void 0&&(Cr+=L(100*nr)+` Tz
`),fe.lang;var kn=-1,wp=fe.renderingMode!==void 0?fe.renderingMode:fe.stroke,hu=Sr.internal.getCurrentPageInfo().pageContext;switch(wp){case 0:case!1:case"fill":kn=0;break;case 1:case!0:case"stroke":kn=1;break;case 2:case"fillThenStroke":kn=2;break;case 3:case"invisible":kn=3;break;case 4:case"fillAndAddForClipping":kn=4;break;case 5:case"strokeAndAddPathForClipping":kn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":kn=6;break;case 7:case"addToPathForClipping":kn=7}var af=hu.usedRenderingMode!==void 0?hu.usedRenderingMode:-1;kn!==-1?Cr+=kn+` Tr
`:af!==-1&&(Cr+=`0 Tr
`),kn!==-1&&(hu.usedRenderingMode=kn),nt=fe.align||"left";var ii,Ps=ce*Un,of=Sr.internal.pageSize.getWidth(),sf=gt[$e];pt=fe.charSpace||Ss,dt=fe.maxWidth||0,_t=Object.assign({autoencode:!0,noBOM:!0},fe.flags);var Ba=[],Po=function(Wt){return Sr.getStringUnitWidth(Wt,{font:sf,charSpace:pt,fontSize:ce,doKerning:!1})*ce/Vi};if(Object.prototype.toString.call(N)==="[object Array]"){var Nn;Re=lu(N),nt!=="left"&&(ii=Re.map(Po));var ln,qa=0;if(nt==="right"){$-=ii[0],N=[],qr=Re.length;for(var ca=0;ca<qr;ca++)ca===0?(ln=Wi($),Nn=ua(le)):(ln=A(qa-ii[ca]),Nn=-Ps),N.push([Re[ca],ln,Nn]),qa=ii[ca]}else if(nt==="center"){$-=ii[0]/2,N=[],qr=Re.length;for(var fa=0;fa<qr;fa++)fa===0?(ln=Wi($),Nn=ua(le)):(ln=A((qa-ii[fa])/2),Nn=-Ps),N.push([Re[fa],ln,Nn]),qa=ii[fa]}else if(nt==="left"){N=[],qr=Re.length;for(var Ts=0;Ts<qr;Ts++)N.push(Re[Ts])}else if(nt==="justify"&&sf.encoding==="Identity-H"){N=[],qr=Re.length,dt=dt!==0?dt:of;for(var da=0,gr=0;gr<qr;gr++)if(Nn=gr===0?ua(le):-Ps,ln=gr===0?Wi($):da,gr<qr-1){var pu=A((dt-ii[gr])/(Re[gr].split(" ").length-1)),un=Re[gr].split(" ");N.push([un[0]+" ",ln,Nn]),da=0;for(var ai=1;ai<un.length;ai++){var Cs=(Po(un[ai-1]+" "+un[ai])-Po(un[ai]))*Vi+pu;ai==un.length-1?N.push([un[ai],Cs,0]):N.push([un[ai]+" ",Cs,0]),da-=Cs}}else N.push([Re[gr],ln,Nn]);N.push(["",da,0])}else{if(nt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(N=[],qr=Re.length,dt=dt!==0?dt:of,gr=0;gr<qr;gr++)Nn=gr===0?ua(le):-Ps,ln=gr===0?Wi($):0,gr<qr-1?Ba.push(L(A((dt-ii[gr])/(Re[gr].split(" ").length-1)))):Ba.push(0),N.push([Re[gr],ln,Nn])}}var lf=typeof fe.R2L=="boolean"?fe.R2L:Le;lf===!0&&(N=uu(N,function(Wt,Vt,vr){return[Wt.split("").reverse().join(""),Vt,vr]})),je={text:N,x:$,y:le,options:fe,mutex:{pdfEscape:Sn,activeFontKey:$e,fonts:gt,activeFontSize:ce}},Nt.publish("postProcessText",je),N=je.text,_i=je.mutex.isHex||!1;var mu=gt[$e].encoding;mu!=="WinAnsiEncoding"&&mu!=="StandardEncoding"||(N=uu(N,function(Wt,Vt,vr){return[nf(Wt),Vt,vr]})),Re=lu(N),N=[];for(var To,Co,Ua,Ro=0,Rs=1,Io=Array.isArray(Re[0])?Rs:Ro,za="",gu=function(Wt,Vt,vr){var Or="";return vr instanceof it?(vr=typeof fe.angle=="number"?wn(vr,new it(1,0,0,1,Wt,Vt)):wn(new it(1,0,0,1,Wt,Vt),vr),b===g.ADVANCED&&(vr=wn(new it(1,0,0,-1,0,0),vr)),Or=vr.join(" ")+` Tm
`):Or=L(Wt)+" "+L(Vt)+` Td
`,Or},oi=0;oi<Re.length;oi++){switch(za="",Io){case Rs:Ua=(_i?"<":"(")+Re[oi][0]+(_i?">":")"),To=parseFloat(Re[oi][1]),Co=parseFloat(Re[oi][2]);break;case Ro:Ua=(_i?"<":"(")+Re[oi]+(_i?">":")"),To=Wi($),Co=ua(le)}Ba!==void 0&&Ba[oi]!==void 0&&(za=Ba[oi]+` Tw
`),oi===0?N.push(za+gu(To,Co,lr)+Ua):Io===Ro?N.push(za+Ua):Io===Rs&&N.push(za+gu(To,Co,lr)+Ua)}N=Io===Ro?N.join(` Tj
T* `):N.join(` Tj
`),N+=` Tj
`;var si=`BT
/`;return si+=$e+" "+ce+` Tf
`,si+=L(ce*Un)+` TL
`,si+=Oo+`
`,si+=Cr,si+=N,ue(si+="ET"),d[$e]=!0,Sr};var cp=c.__private__.clip=c.clip=function(N){return ue(N==="evenodd"?"W*":"W"),this};c.clipEvenOdd=function(){return cp("evenodd")},c.__private__.discardPath=c.discardPath=function(){return ue("n"),this};var Hi=c.__private__.isValidStyle=function(N){var $=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(N)!==-1&&($=!0),$};c.__private__.setDefaultPathOperation=c.setDefaultPathOperation=function(N){return Hi(N)&&(u=N),this};var Yc=c.__private__.getStyle=c.getStyle=function(N){var $=u;switch(N){case"D":case"S":$="S";break;case"F":$="f";break;case"FD":case"DF":$="B";break;case"f":case"f*":case"B":case"B*":$=N}return $},Jc=c.close=function(){return ue("h"),this};c.stroke=function(){return ue("S"),this},c.fill=function(N){return xs("f",N),this},c.fillEvenOdd=function(N){return xs("f*",N),this},c.fillStroke=function(N){return xs("B",N),this},c.fillStrokeEvenOdd=function(N){return xs("B*",N),this};var xs=function(N,$){Tt($)==="object"?dp($,N):ue(N)},Ql=function(N){N===null||b===g.ADVANCED&&N===void 0||(N=Yc(N),ue(N))};function fp(N,$,le,fe,xe){var je=new dl($||this.boundingBox,le||this.xStep,fe||this.yStep,this.gState,xe||this.matrix);je.stream=this.stream;var Re=N+"$$"+this.cloneIndex+++"$$";return Gr(Re,je),je}var dp=function(N,$){var le=ia[N.key],fe=vt[le];if(fe instanceof Ko)ue("q"),ue(hp($)),fe.gState&&c.setGState(fe.gState),ue(N.matrix.toString()+" cm"),ue("/"+le+" sh"),ue("Q");else if(fe instanceof dl){var xe=new it(1,0,0,-1,0,Fa());N.matrix&&(xe=xe.multiply(N.matrix||Mn),le=fp.call(fe,N.key,N.boundingBox,N.xStep,N.yStep,xe).id),ue("q"),ue("/Pattern cs"),ue("/"+le+" scn"),fe.gState&&c.setGState(fe.gState),ue($),ue("Q")}},hp=function(N){switch(N){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Zl=c.moveTo=function(N,$){return ue(L(A(N))+" "+L(C($))+" m"),this},Ao=c.lineTo=function(N,$){return ue(L(A(N))+" "+L(C($))+" l"),this},Da=c.curveTo=function(N,$,le,fe,xe,je){return ue([L(A(N)),L(C($)),L(A(le)),L(C(fe)),L(A(xe)),L(C(je)),"c"].join(" ")),this};c.__private__.line=c.line=function(N,$,le,fe,xe){if(isNaN(N)||isNaN($)||isNaN(le)||isNaN(fe)||!Hi(xe))throw new Error("Invalid arguments passed to jsPDF.line");return b===g.COMPAT?this.lines([[le-N,fe-$]],N,$,[1,1],xe||"S"):this.lines([[le-N,fe-$]],N,$,[1,1]).stroke()},c.__private__.lines=c.lines=function(N,$,le,fe,xe,je){var Re,We,nt,pt,dt,_t,nr,lr,Sr,Jr,Cr,_i;if(typeof N=="number"&&(_i=le,le=$,$=N,N=_i),fe=fe||[1,1],je=je||!1,isNaN($)||isNaN(le)||!Array.isArray(N)||!Array.isArray(fe)||!Hi(xe)||typeof je!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Zl($,le),Re=fe[0],We=fe[1],pt=N.length,Jr=$,Cr=le,nt=0;nt<pt;nt++)(dt=N[nt]).length===2?(Jr=dt[0]*Re+Jr,Cr=dt[1]*We+Cr,Ao(Jr,Cr)):(_t=dt[0]*Re+Jr,nr=dt[1]*We+Cr,lr=dt[2]*Re+Jr,Sr=dt[3]*We+Cr,Jr=dt[4]*Re+Jr,Cr=dt[5]*We+Cr,Da(_t,nr,lr,Sr,Jr,Cr));return je&&Jc(),Ql(xe),this},c.path=function(N){for(var $=0;$<N.length;$++){var le=N[$],fe=le.c;switch(le.op){case"m":Zl(fe[0],fe[1]);break;case"l":Ao(fe[0],fe[1]);break;case"c":Da.apply(this,fe);break;case"h":Jc()}}return this},c.__private__.rect=c.rect=function(N,$,le,fe,xe){if(isNaN(N)||isNaN($)||isNaN(le)||isNaN(fe)||!Hi(xe))throw new Error("Invalid arguments passed to jsPDF.rect");return b===g.COMPAT&&(fe=-fe),ue([L(A(N)),L(C($)),L(A(le)),L(A(fe)),"re"].join(" ")),Ql(xe),this},c.__private__.triangle=c.triangle=function(N,$,le,fe,xe,je,Re){if(isNaN(N)||isNaN($)||isNaN(le)||isNaN(fe)||isNaN(xe)||isNaN(je)||!Hi(Re))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[le-N,fe-$],[xe-le,je-fe],[N-xe,$-je]],N,$,[1,1],Re,!0),this},c.__private__.roundedRect=c.roundedRect=function(N,$,le,fe,xe,je,Re){if(isNaN(N)||isNaN($)||isNaN(le)||isNaN(fe)||isNaN(xe)||isNaN(je)||!Hi(Re))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var We=4/3*(Math.SQRT2-1);return xe=Math.min(xe,.5*le),je=Math.min(je,.5*fe),this.lines([[le-2*xe,0],[xe*We,0,xe,je-je*We,xe,je],[0,fe-2*je],[0,je*We,-xe*We,je,-xe,je],[2*xe-le,0],[-xe*We,0,-xe,-je*We,-xe,-je],[0,2*je-fe],[0,-je*We,xe*We,-je,xe,-je]],N+xe,$,[1,1],Re,!0),this},c.__private__.ellipse=c.ellipse=function(N,$,le,fe,xe){if(isNaN(N)||isNaN($)||isNaN(le)||isNaN(fe)||!Hi(xe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var je=4/3*(Math.SQRT2-1)*le,Re=4/3*(Math.SQRT2-1)*fe;return Zl(N+le,$),Da(N+le,$-Re,N+je,$-fe,N,$-fe),Da(N-je,$-fe,N-le,$-Re,N-le,$),Da(N-le,$+Re,N-je,$+fe,N,$+fe),Da(N+je,$+fe,N+le,$+Re,N+le,$),Ql(xe),this},c.__private__.circle=c.circle=function(N,$,le,fe){if(isNaN(N)||isNaN($)||isNaN(le)||!Hi(fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(N,$,le,le,fe)},c.setFont=function(N,$,le){return le&&($=I($,le)),$e=Vc(N,$,{disableWarning:!1}),this};var pp=c.__private__.getFont=c.getFont=function(){return gt[Vc.apply(c,arguments)]};c.__private__.getFontList=c.getFontList=function(){var N,$,le={};for(N in xt)if(xt.hasOwnProperty(N))for($ in le[N]=[],xt[N])xt[N].hasOwnProperty($)&&le[N].push($);return le},c.addFont=function(N,$,le,fe,xe){var je=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&je.indexOf(arguments[3])!==-1?xe=arguments[3]:arguments[3]&&je.indexOf(arguments[3])==-1&&(le=I(le,fe)),xe=xe||"Identity-H",Yl.call(this,N,$,le,xe)};var jo,eu=t.lineWidth||.200025,_s=c.__private__.getLineWidth=c.getLineWidth=function(){return eu},Xc=c.__private__.setLineWidth=c.setLineWidth=function(N){return eu=N,ue(L(A(N))+" w"),this};c.__private__.setLineDash=st.API.setLineDash=st.API.setLineDashPattern=function(N,$){if(N=N||[],$=$||0,isNaN($)||!Array.isArray(N))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return N=N.map(function(le){return L(A(le))}).join(" "),$=L(A($)),ue("["+N+"] "+$+" d"),this};var Qc=c.__private__.getLineHeight=c.getLineHeight=function(){return ce*jo};c.__private__.getLineHeight=c.getLineHeight=function(){return ce*jo};var Zc=c.__private__.setLineHeightFactor=c.setLineHeightFactor=function(N){return typeof(N=N||1.15)=="number"&&(jo=N),this},ef=c.__private__.getLineHeightFactor=c.getLineHeightFactor=function(){return jo};Zc(t.lineHeight);var Wi=c.__private__.getHorizontalCoordinate=function(N){return A(N)},ua=c.__private__.getVerticalCoordinate=function(N){return b===g.ADVANCED?N:ut[F].mediaBox.topRightY-ut[F].mediaBox.bottomLeftY-A(N)},mp=c.__private__.getHorizontalCoordinateString=c.getHorizontalCoordinateString=function(N){return L(Wi(N))},Ma=c.__private__.getVerticalCoordinateString=c.getVerticalCoordinateString=function(N){return L(ua(N))},xi=t.strokeColor||"0 G";c.__private__.getStrokeColor=c.getDrawColor=function(){return dr(xi)},c.__private__.setStrokeColor=c.setDrawColor=function(N,$,le,fe){return xi=xn({ch1:N,ch2:$,ch3:le,ch4:fe,pdfColorType:"draw",precision:2}),ue(xi),this};var tu=t.fillColor||"0 g";c.__private__.getFillColor=c.getFillColor=function(){return dr(tu)},c.__private__.setFillColor=c.setFillColor=function(N,$,le,fe){return tu=xn({ch1:N,ch2:$,ch3:le,ch4:fe,pdfColorType:"fill",precision:2}),ue(tu),this};var Oo=t.textColor||"0 g",gp=c.__private__.getTextColor=c.getTextColor=function(){return dr(Oo)};c.__private__.setTextColor=c.setTextColor=function(N,$,le,fe){return Oo=xn({ch1:N,ch2:$,ch3:le,ch4:fe,pdfColorType:"text",precision:3}),this};var Ss=t.charSpace,vp=c.__private__.getCharSpace=c.getCharSpace=function(){return parseFloat(Ss||0)};c.__private__.setCharSpace=c.setCharSpace=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ss=N,this};var ru=0;c.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},c.__private__.setLineCap=c.setLineCap=function(N){var $=c.CapJoinStyles[N];if($===void 0)throw new Error("Line cap style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ru=$,ue($+" J"),this};var nu=0;c.__private__.setLineJoin=c.setLineJoin=function(N){var $=c.CapJoinStyles[N];if($===void 0)throw new Error("Line join style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return nu=$,ue($+" j"),this},c.__private__.setLineMiterLimit=c.__private__.setMiterLimit=c.setLineMiterLimit=c.setMiterLimit=function(N){if(N=N||0,isNaN(N))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ue(L(A(N))+" M"),this},c.GState=hh,c.setGState=function(N){(N=typeof N=="string"?qt[Vr[N]]:tf(null,N)).equals(wi)||(ue("/"+N.id+" gs"),wi=N)};var tf=function(N,$){if(!N||!Vr[N]){var le=!1;for(var fe in qt)if(qt.hasOwnProperty(fe)&&qt[fe].equals($)){le=!0;break}if(le)$=qt[fe];else{var xe="GS"+(Object.keys(qt).length+1).toString(10);qt[xe]=$,$.id=xe}return N&&(Vr[N]=$.id),Nt.publish("addGState",$),$}};c.addGState=function(N,$){return tf(N,$),this},c.saveGraphicsState=function(){return ue("q"),Br.push({key:$e,size:ce,color:Oo}),this},c.restoreGraphicsState=function(){ue("Q");var N=Br.pop();return $e=N.key,ce=N.size,Oo=N.color,wi=null,this},c.setCurrentTransformationMatrix=function(N){return ue(N.toString()+" cm"),this},c.comment=function(N){return ue("#"+N),this};var ks=function(N,$){var le=N||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return le},set:function(je){isNaN(je)||(le=parseFloat(je))}});var fe=$||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return fe},set:function(je){isNaN(je)||(fe=parseFloat(je))}});var xe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xe},set:function(je){xe=je.toString()}}),this},iu=function(N,$,le,fe){ks.call(this,N,$),this.type="rect";var xe=le||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xe},set:function(Re){isNaN(Re)||(xe=parseFloat(Re))}});var je=fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return je},set:function(Re){isNaN(Re)||(je=parseFloat(Re))}}),this},au=function(){this.page=Rt,this.currentPage=F,this.pages=be.slice(0),this.pagesContext=ut.slice(0),this.x=Bt,this.y=ct,this.matrix=$t,this.width=Lo(F),this.height=Fa(F),this.outputDestination=Ae,this.id="",this.objectNumber=-1};au.prototype.restore=function(){Rt=this.page,F=this.currentPage,ut=this.pagesContext,be=this.pages,Bt=this.x,ct=this.y,$t=this.matrix,ou(F,this.width),su(F,this.height),Ae=this.outputDestination};var rf=function(N,$,le,fe,xe){Dn.push(new au),Rt=F=0,be=[],Bt=N,ct=$,$t=xe,Jl([le,fe])},yp=function(N){if(ni[N])Dn.pop().restore();else{var $=new au,le="Xo"+(Object.keys(Zt).length+1).toString(10);$.id=le,ni[N]=le,Zt[le]=$,Nt.publish("addFormObject",$),Dn.pop().restore()}};for(var Ns in c.beginFormObject=function(N,$,le,fe,xe){return rf(N,$,le,fe,xe),this},c.endFormObject=function(N){return yp(N),this},c.doFormObject=function(N,$){var le=Zt[ni[N]];return ue("q"),ue($.toString()+" cm"),ue("/"+le.id+" Do"),ue("Q"),this},c.getFormObject=function(N){var $=Zt[ni[N]];return{x:$.x,y:$.y,width:$.width,height:$.height,matrix:$.matrix}},c.save=function(N,$){return N=N||"generated.pdf",($=$||{}).returnPromise=$.returnPromise||!1,$.returnPromise===!1?($o(ws(la()),N),typeof $o.unload=="function"&&lt.setTimeout&&setTimeout($o.unload,911),this):new Promise(function(le,fe){try{var xe=$o(ws(la()),N);typeof $o.unload=="function"&&lt.setTimeout&&setTimeout($o.unload,911),le(xe)}catch(je){fe(je.message)}})},st.API)st.API.hasOwnProperty(Ns)&&(Ns==="events"&&st.API.events.length?function(N,$){var le,fe,xe;for(xe=$.length-1;xe!==-1;xe--)le=$[xe][0],fe=$[xe][1],N.subscribe.apply(N,[le].concat(typeof fe=="function"?[fe]:fe))}(Nt,st.API.events):c[Ns]=st.API[Ns]);var Lo=c.getPageWidth=function(N){return(ut[N=N||F].mediaBox.topRightX-ut[N].mediaBox.bottomLeftX)/Fe},ou=c.setPageWidth=function(N,$){ut[N].mediaBox.topRightX=$*Fe+ut[N].mediaBox.bottomLeftX},Fa=c.getPageHeight=function(N){return(ut[N=N||F].mediaBox.topRightY-ut[N].mediaBox.bottomLeftY)/Fe},su=c.setPageHeight=function(N,$){ut[N].mediaBox.topRightY=$*Fe+ut[N].mediaBox.bottomLeftY};return c.internal={pdfEscape:Sn,getStyle:Yc,getFont:pp,getFontSize:de,getCharSpace:vp,getTextColor:gp,getLineHeight:Qc,getLineHeightFactor:ef,getLineWidth:_s,write:He,getHorizontalCoordinate:Wi,getVerticalCoordinate:ua,getCoordinateString:mp,getVerticalCoordinateString:Ma,collections:{},newObject:At,newAdditionalObject:aa,newObjectDeferred:It,newObjectDeferredBegin:Kr,getFilters:Bn,putStream:sn,events:Nt,scaleFactor:Fe,pageSize:{getWidth:function(){return Lo(F)},setWidth:function(N){ou(F,N)},getHeight:function(){return Fa(F)},setHeight:function(N){su(F,N)}},encryptionOptions:h,encryption:Yr,getEncryptor:lp,output:bs,getNumberOfPages:np,pages:be,out:ue,f2:T,f3:k,getPageInfo:Kc,getPageInfoByObjId:ft,getCurrentPageInfo:up,getPDFVersion:v,Point:ks,Rectangle:iu,Matrix:it,hasHotfix:Gc},Object.defineProperty(c.internal.pageSize,"width",{get:function(){return Lo(F)},set:function(N){ou(F,N)},enumerable:!0,configurable:!0}),Object.defineProperty(c.internal.pageSize,"height",{get:function(){return Fa(F)},set:function(N){su(F,N)},enumerable:!0,configurable:!0}),tp.call(c,se),$e="F1",Hc(i,r),Nt.publish("initialized"),c}Qs.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Qs.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Qs.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Qs.prototype.processOwnerPassword=function(t,e){return ig(ng(e).substr(0,5),t)},Qs.prototype.encryptor=function(t,e){var r=ng(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return ig(r,n)}},hh.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Tt(t)!==Tt(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},st.API={events:[]},st.version="2.5.2";var cr=st.API,U1=1,ms=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ks=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ht=function(t){return t.toFixed(2)},eo=function(t){return t.toFixed(5)};cr.__acroform__={};var In=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},x2=function(t){return t*U1},Ji=function(t){var e=new L_,r=Qe.internal.getHeight(t)||0,n=Qe.internal.getWidth(t)||0;return e.BBox=[0,0,Number(ht(n)),Number(ht(r))],e},Mj=cr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Fj=cr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Bj=cr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},wr=cr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Bj(t,e-1)},br=cr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Mj(t,e-1)},xr=cr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Fj(t,e-1)},qj=cr.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],a=t[1],o=t[2],s=t[3],l={};return l.lowerLeft_X=r(i)||0,l.lowerLeft_Y=n(a+s)||0,l.upperRight_X=r(i+o)||0,l.upperRight_Y=n(a)||0,[Number(ht(l.lowerLeft_X)),Number(ht(l.lowerLeft_Y)),Number(ht(l.upperRight_X)),Number(ht(l.upperRight_Y))]},Uj=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=ag(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+ht(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Ji(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},ag=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(k){return k.split(`
`)}):i.map(function(k){return[k]});var a=r,o=Qe.internal.getHeight(t)||0;o=o<0?-o:o;var s=Qe.internal.getWidth(t)||0;s=s<0?-s:s;var l=function(k,A,R){if(k+1<i.length){var C=A+" "+i[k+1][0];return ad(C,t,R).width<=s-4}return!1};a++;e:for(;a>0;){e="",a--;var u,h,f=ad("3",t,a).height,d=t.multiline?o-a:(o-f)/2,c=d+=2,y=0,v=0,w=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+ad(e,t,a=12).width+", FieldWidth:"+s+`
`;break}for(var m="",g=0,b=0;b<i.length;b++)if(i.hasOwnProperty(b)){var S=!1;if(i[b].length!==1&&w!==i[b].length-1){if((f+2)*(g+2)+2>o)continue e;m+=i[b][w],S=!0,v=b,b--}else{m=(m+=i[b][w]+" ").substr(m.length-1)==" "?m.substr(0,m.length-1):m;var E=parseInt(b),I=l(E,m,a),L=b>=i.length-1;if(I&&!L){m+=" ",w=0;continue}if(I||L){if(L)v=E;else if(t.multiline&&(f+2)*(g+2)+2>o)continue e}else{if(!t.multiline||(f+2)*(g+2)+2>o)continue e;v=E}}for(var O="",M=y;M<=v;M++){var T=i[M];if(t.multiline){if(M===v){O+=T[w]+" ",w=(w+1)%T.length;continue}if(M===y){O+=T[T.length-1]+" ";continue}}O+=T[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,h=ad(O,t,a).width,t.textAlign){case"right":u=s-h-2;break;case"center":u=(s-h)/2;break;case"left":default:u=2}e+=ht(u)+" "+ht(c)+` Td
`,e+="("+ms(O)+`) Tj
`,e+=-ht(u)+` 0 Td
`,c=-(a+2),h=0,y=S?v:v+1,g++,m=""}break}return n.text=e,n.fontSize=a,n},ad=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},zj={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},$j=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Hj=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,i=t[r];e.internal.newObjectDeferredBegin(i.objId,!0),Tt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[n]}},Wj=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ui.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(zj)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");U1=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new P_,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&$j(a,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var a=!n;for(var o in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var s=n[o],l=[],u=s.Rect;if(s.Rect&&(s.Rect=qj(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Qe.createDefaultAppearanceStream(s),Tt(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=u,s.hasAppearanceStream&&!s.appearanceStreamContent){var h=Uj(s);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(s.appearanceStreamContent){var f="";for(var d in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(d)){var c=s.appearanceStreamContent[d];if(f+="/"+d+" ",f+="<<",Object.keys(c).length>=1||Array.isArray(c)){for(var o in c)if(c.hasOwnProperty(o)){var y=c[o];typeof y=="function"&&(y=y.call(i,s)),f+="/"+o+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=c)=="function"&&(y=y.call(i,s)),f+="/"+o+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:s.objId}),i.internal.out("endobj")}a&&Hj(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},O_=cr.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var i="[",a=0;a<t.length;a++)switch(a!==0&&(i+=" "),Tt(t[a])){case"boolean":case"number":case"object":i+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+ms(n(t[a].toString()))+")"):i+=t[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},A0=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+ms(n(t))+")"},Zi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Zi.prototype.toString=function(){return this.objId+" 0 R"},Zi.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Zi.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:O_(i,this.objId,this.scope)}):i instanceof Zi?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var L_=function(){Zi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};In(L_,Zi);var P_=function(){Zi.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+ms(r(t))+")"}},set:function(r){t=r}})};In(P_,Zi);var Ui=function t(){Zi.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(m){if(isNaN(m))throw new Error('Invalid value "'+m+'" for attribute F supplied.');e=m}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!wr(e,3)},set:function(m){m?this.F=br(e,3):this.F=xr(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(m){if(isNaN(m))throw new Error('Invalid value "'+m+'" for attribute Ff supplied.');r=m}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(m){n=m!==void 0?m:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(m){n[0]=m}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(m){n[1]=m}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(m){n[2]=m}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(m){n[3]=m}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(m){switch(m){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=m;break;default:throw new Error('Invalid value "'+m+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof ph)return;a="FieldObject"+t.FieldNum++}var m=function(g){return g};return this.scope&&(m=this.scope.internal.getEncryptor(this.objId)),"("+ms(m(a))+")"},set:function(m){a=m.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(m){a=m}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(m){o=m}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(m){s=m}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(m){l=m}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/U1:u},set:function(m){u=m}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(m){h=m}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof ph||this instanceof rs))return A0(f,this.objId,this.scope)},set:function(m){m=m.toString(),f=m}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof Mr?d:A0(d,this.objId,this.scope)},set:function(m){m=m.toString(),d=this instanceof Mr?m:m.substr(0,1)==="("?Ks(m.substr(1,m.length-2)):Ks(m)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Mr?Ks(d.substr(1,d.length-1)):d},set:function(m){m=m.toString(),d=this instanceof Mr?"/"+m:m}});var c=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(c)return c},set:function(m){this.V=m}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(c)return this instanceof Mr?c:A0(c,this.objId,this.scope)},set:function(m){m=m.toString(),c=this instanceof Mr?m:m.substr(0,1)==="("?Ks(m.substr(1,m.length-2)):Ks(m)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Mr?Ks(c.substr(1,c.length-1)):c},set:function(m){m=m.toString(),c=this instanceof Mr?"/"+m:m}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(m){m=!!m,v=m}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(m){y=m}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,1)},set:function(m){m?this.Ff=br(this.Ff,1):this.Ff=xr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,2)},set:function(m){m?this.Ff=br(this.Ff,2):this.Ff=xr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,3)},set:function(m){m?this.Ff=br(this.Ff,3):this.Ff=xr(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(m){if([0,1,2].indexOf(m)===-1)throw new Error('Invalid value "'+m+'" for attribute Q supplied.');w=m}}),Object.defineProperty(this,"textAlign",{get:function(){var m;switch(w){case 0:default:m="left";break;case 1:m="center";break;case 2:m="right"}return m},configurable:!0,enumerable:!0,set:function(m){switch(m){case"right":case 2:w=2;break;case"center":case 1:w=1;break;case"left":case 0:default:w=0}}})};In(Ui,Zi);var bl=function(){Ui.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return O_(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(a,o,s){s||(s=1);for(var l,u=[];l=o.exec(a);)u.push(l[s]);return u}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,18)},set:function(r){r?this.Ff=br(this.Ff,18):this.Ff=xr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=br(this.Ff,19):this.Ff=xr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,20)},set:function(r){r?(this.Ff=br(this.Ff,20),e.sort()):this.Ff=xr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,22)},set:function(r){r?this.Ff=br(this.Ff,22):this.Ff=xr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,23)},set:function(r){r?this.Ff=br(this.Ff,23):this.Ff=xr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,27)},set:function(r){r?this.Ff=br(this.Ff,27):this.Ff=xr(this.Ff,27)}}),this.hasAppearanceStream=!1};In(bl,Ui);var xl=function(){bl.call(this),this.fontName="helvetica",this.combo=!1};In(xl,bl);var _l=function(){xl.call(this),this.combo=!0};In(_l,xl);var Ad=function(){_l.call(this),this.edit=!0};In(Ad,_l);var Mr=function(){Ui.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,15)},set:function(r){r?this.Ff=br(this.Ff,15):this.Ff=xr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,16)},set:function(r){r?this.Ff=br(this.Ff,16):this.Ff=xr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,17)},set:function(r){r?this.Ff=br(this.Ff,17):this.Ff=xr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,26)},set:function(r){r?this.Ff=br(this.Ff,26):this.Ff=xr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+ms(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){Tt(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};In(Mr,Ui);var jd=function(){Mr.call(this),this.pushButton=!0};In(jd,Mr);var Sl=function(){Mr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};In(Sl,Mr);var ph=function(){var t,e;Ui.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),n)o.push("/"+a+" ("+ms(i(n[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Tt(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};In(ph,Ui),Sl.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Sl.prototype.createOption=function(t){var e=new ph;return e.Parent=this,e.optionName=t,this.Kids.push(e),Vj.call(this.scope,e),e};var Od=function(){Mr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qe.CheckBox.createAppearanceStream()};In(Od,Mr);var rs=function(){Ui.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,13)},set:function(e){e?this.Ff=br(this.Ff,13):this.Ff=xr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,21)},set:function(e){e?this.Ff=br(this.Ff,21):this.Ff=xr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,23)},set:function(e){e?this.Ff=br(this.Ff,23):this.Ff=xr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,24)},set:function(e){e?this.Ff=br(this.Ff,24):this.Ff=xr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,25)},set:function(e){e?this.Ff=br(this.Ff,25):this.Ff=xr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,26)},set:function(e){e?this.Ff=br(this.Ff,26):this.Ff=xr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};In(rs,Ui);var Ld=function(){rs.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,14)},set:function(t){t?this.Ff=br(this.Ff,14):this.Ff=xr(this.Ff,14)}}),this.password=!0};In(Ld,rs);var Qe={CheckBox:{createAppearanceStream:function(){return{N:{On:Qe.CheckBox.YesNormal},D:{On:Qe.CheckBox.YesPushDown,Off:Qe.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ji(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=ag(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+ht(Qe.internal.getWidth(t))+" "+ht(Qe.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+ht(a.fontSize)+" Tf "+i),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Ji(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],a=Qe.internal.getHeight(t),o=Qe.internal.getWidth(t),s=ag(t,t.caption);return i.push("1 g"),i.push("0 0 "+ht(o)+" "+ht(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ht(o-1)+" "+ht(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+ht(s.fontSize)+" Tf "+n),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Ji(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ht(Qe.internal.getWidth(t))+" "+ht(Qe.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Qe.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Qe.RadioButton.Circle.YesNormal,e.D[t]=Qe.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ji(t);e.scope=t.scope;var r=[],n=Qe.internal.getWidth(t)<=Qe.internal.getHeight(t)?Qe.internal.getWidth(t)/4:Qe.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Qe.internal.Bezier_C,a=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+eo(Qe.internal.getWidth(t)/2)+" "+eo(Qe.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Ji(t);e.scope=t.scope;var r=[],n=Qe.internal.getWidth(t)<=Qe.internal.getHeight(t)?Qe.internal.getWidth(t)/4:Qe.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*Qe.internal.Bezier_C).toFixed(5)),o=Number((n*Qe.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+eo(Qe.internal.getWidth(t)/2)+" "+eo(Qe.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+eo(Qe.internal.getWidth(t)/2)+" "+eo(Qe.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ji(t);e.scope=t.scope;var r=[],n=Qe.internal.getWidth(t)<=Qe.internal.getHeight(t)?Qe.internal.getWidth(t)/4:Qe.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*Qe.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+eo(Qe.internal.getWidth(t)/2)+" "+eo(Qe.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Qe.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Qe.RadioButton.Cross.YesNormal,e.D[t]=Qe.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ji(t);e.scope=t.scope;var r=[],n=Qe.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+ht(Qe.internal.getWidth(t)-2)+" "+ht(Qe.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(ht(n.x1.x)+" "+ht(n.x1.y)+" m"),r.push(ht(n.x2.x)+" "+ht(n.x2.y)+" l"),r.push(ht(n.x4.x)+" "+ht(n.x4.y)+" m"),r.push(ht(n.x3.x)+" "+ht(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Ji(t);e.scope=t.scope;var r=Qe.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+ht(Qe.internal.getWidth(t))+" "+ht(Qe.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+ht(Qe.internal.getWidth(t)-2)+" "+ht(Qe.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(ht(r.x1.x)+" "+ht(r.x1.y)+" m"),n.push(ht(r.x2.x)+" "+ht(r.x2.y)+" l"),n.push(ht(r.x4.x)+" "+ht(r.x4.y)+" m"),n.push(ht(r.x3.x)+" "+ht(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ji(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ht(Qe.internal.getWidth(t))+" "+ht(Qe.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Qe.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Qe.internal.getWidth(t),r=Qe.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Qe.internal.getWidth=function(t){var e=0;return Tt(t)==="object"&&(e=x2(t.Rect[2])),e},Qe.internal.getHeight=function(t){var e=0;return Tt(t)==="object"&&(e=x2(t.Rect[3])),e};var Vj=cr.addField=function(t){if(Wj(this,t),!(t instanceof Ui))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};cr.AcroFormChoiceField=bl,cr.AcroFormListBox=xl,cr.AcroFormComboBox=_l,cr.AcroFormEditBox=Ad,cr.AcroFormButton=Mr,cr.AcroFormPushButton=jd,cr.AcroFormRadioButton=Sl,cr.AcroFormCheckBox=Od,cr.AcroFormTextField=rs,cr.AcroFormPasswordField=Ld,cr.AcroFormAppearance=Qe,cr.AcroForm={ChoiceField:bl,ListBox:xl,ComboBox:_l,EditBox:Ad,Button:Mr,PushButton:jd,RadioButton:Sl,CheckBox:Od,TextField:rs,PasswordField:Ld,Appearance:Qe},st.AcroForm={ChoiceField:bl,ListBox:xl,ComboBox:_l,EditBox:Ad,Button:Mr,PushButton:jd,RadioButton:Sl,CheckBox:Od,TextField:rs,PasswordField:Ld,Appearance:Qe};st.AcroForm;function T_(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(k,A){var R,C,V,Z,te,Q=e;if((A=A||e)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(I(k))for(te in r)for(V=r[te],R=0;R<V.length;R+=1){for(Z=!0,C=0;C<V[R].length;C+=1)if(V[R][C]!==void 0&&V[R][C]!==k[C]){Z=!1;break}if(Z===!0){Q=te;break}}else for(te in r)for(V=r[te],R=0;R<V.length;R+=1){for(Z=!0,C=0;C<V[R].length;C+=1)if(V[R][C]!==void 0&&V[R][C]!==k.charCodeAt(C)){Z=!1;break}if(Z===!0){Q=te;break}}return Q===e&&A!==e&&(Q=A),Q},i=function k(A){for(var R=this.internal.write,C=this.internal.putStream,V=(0,this.internal.getFilters)();V.indexOf("FlateEncode")!==-1;)V.splice(V.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:A.width}),Z.push({key:"Height",value:A.height}),A.colorSpace===w.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===w.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var te="",Q=0,K=A.transparency.length;Q<K;Q++)te+=A.transparency[Q]+" "+A.transparency[Q]+" ";Z.push({key:"Mask",value:"["+te+"]"})}A.sMask!==void 0&&Z.push({key:"SMask",value:A.objectId+1+" 0 R"});var W=A.filter!==void 0?["/"+A.filter]:void 0;if(C({data:A.data,additionalKeyValues:Z,alreadyAppliedFilters:W,objectId:A.objectId}),R("endobj"),"sMask"in A&&A.sMask!==void 0){var q="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,P={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:q,data:A.sMask};"filter"in A&&(P.filter=A.filter),k.call(this,P)}if(A.colorSpace===w.INDEXED){var F=this.internal.newObject();C({data:O(new Uint8Array(A.palette)),objectId:F}),R("endobj")}},a=function(){var k=this.internal.collections.addImage_images;for(var A in k)i.call(this,k[A])},o=function(){var k,A=this.internal.collections.addImage_images,R=this.internal.write;for(var C in A)R("/I"+(k=A[C]).index,k.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var k=this.internal.collections.addImage_images;return s.call(this),k},u=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(k){return typeof t["process"+k.toUpperCase()]=="function"},f=function(k){return Tt(k)==="object"&&k.nodeType===1},d=function(k,A){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var R=""+k.getAttribute("src");if(R.indexOf("data:image/")===0)return sc(unescape(R).split("base64,").pop());var C=t.loadFile(R,!0);if(C!==void 0)return C}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var V;switch(A){case"PNG":V="image/png";break;case"WEBP":V="image/webp";break;case"JPEG":case"JPG":default:V="image/jpeg"}return sc(k.toDataURL(V,1).split("base64,").pop())}},c=function(k){var A=this.internal.collections.addImage_images;if(A){for(var R in A)if(k===A[R].alias)return A[R]}},y=function(k,A,R){return k||A||(k=-96,A=-96),k<0&&(k=-1*R.width*72/k/this.internal.scaleFactor),A<0&&(A=-1*R.height*72/A/this.internal.scaleFactor),k===0&&(k=A*R.width/R.height),A===0&&(A=k*R.height/R.width),[k,A]},v=function(k,A,R,C,V,Z){var te=y.call(this,R,C,V),Q=this.internal.getCoordinateString,K=this.internal.getVerticalCoordinateString,W=l.call(this);if(R=te[0],C=te[1],W[V.index]=V,Z){Z*=Math.PI/180;var q=Math.cos(Z),P=Math.sin(Z),F=function(H){return H.toFixed(4)},U=[F(q),F(P),F(-1*P),F(q),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,Q(k),K(A+C),"cm"].join(" ")),this.internal.write(U.join(" ")),this.internal.write([Q(R),"0","0",Q(C),"0","0","cm"].join(" "))):this.internal.write([Q(R),"0","0",Q(C),Q(k),K(A+C),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+V.index+" Do"),this.internal.write("Q")},w=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var m=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},g=t.__addimage__.sHashCode=function(k){var A,R,C=0;if(typeof k=="string")for(R=k.length,A=0;A<R;A++)C=(C<<5)-C+k.charCodeAt(A),C|=0;else if(I(k))for(R=k.byteLength/2,A=0;A<R;A++)C=(C<<5)-C+k[A],C|=0;return C},b=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var A=!0;return k.length===0&&(A=!1),k.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(A=!1),A},S=t.__addimage__.extractImageFromDataUrl=function(k){var A=(k=k||"").split("base64,"),R=null;if(A.length===2){var C=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(A[0]);Array.isArray(C)&&(R={mimeType:C[1],charset:C[2],data:A[1]})}return R},E=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(k){return E()&&k instanceof ArrayBuffer};var I=t.__addimage__.isArrayBufferView=function(k){return E()&&typeof Uint32Array<"u"&&(k instanceof Int8Array||k instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array)},L=t.__addimage__.binaryStringToUint8Array=function(k){for(var A=k.length,R=new Uint8Array(A),C=0;C<A;C++)R[C]=k.charCodeAt(C);return R},O=t.__addimage__.arrayBufferToBinaryString=function(k){for(var A="",R=I(k)?k:new Uint8Array(k),C=0;C<R.length;C+=8192)A+=String.fromCharCode.apply(null,R.subarray(C,C+8192));return A};t.addImage=function(){var k,A,R,C,V,Z,te,Q,K;if(typeof arguments[1]=="number"?(A=e,R=arguments[1],C=arguments[2],V=arguments[3],Z=arguments[4],te=arguments[5],Q=arguments[6],K=arguments[7]):(A=arguments[1],R=arguments[2],C=arguments[3],V=arguments[4],Z=arguments[5],te=arguments[6],Q=arguments[7],K=arguments[8]),Tt(k=arguments[0])==="object"&&!f(k)&&"imageData"in k){var W=k;k=W.imageData,A=W.format||A||e,R=W.x||R||0,C=W.y||C||0,V=W.w||W.width||V,Z=W.h||W.height||Z,te=W.alias||te,Q=W.compression||Q,K=W.rotation||W.angle||K}var q=this.internal.getFilters();if(Q===void 0&&q.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(R)||isNaN(C))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var P=M.call(this,k,A,te,Q);return v.call(this,R,C,V,Z,P,K),this};var M=function(k,A,R,C){var V,Z,te;if(typeof k=="string"&&n(k)===e){k=unescape(k);var Q=T(k,!1);(Q!==""||(Q=t.loadFile(k,!0))!==void 0)&&(k=Q)}if(f(k)&&(k=d(k,A)),A=n(k,A),!h(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((te=R)==null||te.length===0)&&(R=function(K){return typeof K=="string"||I(K)?g(K):I(K.data)?g(K.data):null}(k)),(V=c.call(this,R))||(E()&&(k instanceof Uint8Array||A==="RGBA"||(Z=k,k=L(k))),V=this["process"+A.toUpperCase()](k,u.call(this),R,function(K){return K&&typeof K=="string"&&(K=K.toUpperCase()),K in t.image_compression?K:m.NONE}(C),Z)),!V)throw new Error("An unknown error occurred whilst processing the image.");return V},T=t.__addimage__.convertBase64ToBinaryString=function(k,A){var R;A=typeof A!="boolean"||A;var C,V="";if(typeof k=="string"){C=(R=S(k))!==null?R.data:k;try{V=sc(C)}catch(Z){if(A)throw b(C)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};t.getImageProperties=function(k){var A,R,C="";if(f(k)&&(k=d(k)),typeof k=="string"&&n(k)===e&&((C=T(k,!1))===""&&(C=t.loadFile(k)||""),k=C),R=n(k),!h(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!E()||k instanceof Uint8Array||(k=L(k)),!(A=this["process"+R.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=R,A}})(st.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};st.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,a,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,h=!1,f=0;f<u.length&&!h;f++)switch((n=u[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var d=0;d<u.length;d++){n=u[d];var c=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),m=this.internal.getEncryptor(v.objId),g=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+c(m(n.contents))+")",a+=" /Popup "+w.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+c(m(g))+") >>",v.content=a;var b=v.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(a+=" /Open true"),a+=" >>",w.content=a,this.internal.write(v.objId,"0 R",w.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var S=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+c(y(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+S+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var E=this.annotations._nameMap[n.options.name];n.options.pageNumber=E.page,n.options.top=E.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+c(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var I=s(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,a,o){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+i),h:u(n+a)},options:o,type:"link"})},t.textWithLink=function(r,n,i,a){var o,s,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var h=this.splitTextToSize(r,s).length;o=Math.ceil(u*h)}else s=l,o=u;return this.text(r,n,i,a),i+=.2*u,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,i-u,s,o,a),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(st.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(v){return e[v.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},s=t.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&i.indexOf(v.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(v){var w=0,m=r,g="",b=0;for(w=0;w<v.length;w+=1)m[v.charCodeAt(w)]!==void 0?(b++,typeof(m=m[v.charCodeAt(w)])=="number"&&(g+=String.fromCharCode(m),m=r,b=0),w===v.length-1&&(m=r,g+=v.charAt(w-(b-1)),w-=b-1,b=0)):(m=r,g+=v.charAt(w-b),w-=b,b=0);return g};t.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var d=t.__arabicParser__.getCorrectForm=function(v,w,m){return o(v)?a(v)===!1?-1:!u(v)||!o(w)&&!o(m)||!o(m)&&s(w)||s(v)&&!o(w)||s(v)&&l(w)||s(v)&&s(w)?0:h(v)&&o(w)&&!s(w)&&o(m)&&u(m)?3:s(v)||!o(m)?1:2:-1},c=function(v){var w=0,m=0,g=0,b="",S="",E="",I=(v=v||"").split("\\s+"),L=[];for(w=0;w<I.length;w+=1){for(L.push(""),m=0;m<I[w].length;m+=1)b=I[w][m],S=I[w][m-1],E=I[w][m+1],o(b)?(g=d(b,S,E),L[w]+=g!==-1?String.fromCharCode(e[b.charCodeAt(0)][g]):b):L[w]+=b;L[w]=f(L[w])}return L.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var v,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,m=[];if(Array.isArray(w)){var g=0;for(m=[],g=0;g<w.length;g+=1)Array.isArray(w[g])?m.push([c(w[g][0]),w[g][1],w[g][2]]):m.push([c(w[g])]);v=m}else v=c(w);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};t.events.push(["preProcessText",y])}(st.API),st.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(s){r=s}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(s){n=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(st.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var d=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var c=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(v){y=v}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){n.call(this);var h=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),d=u.scaleFactor||this.internal.scaleFactor,c=0,y=0,v=0,w=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var m=u.maxWidth;m>0?typeof l=="string"?l=this.splitTextToSize(l,m):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(b,S){return b.concat(w.splitTextToSize(S,m))},[])):l=Array.isArray(l)?l:[l];for(var g=0;g<l.length;g++)c<(v=this.getStringUnitWidth(l[g],{font:f})*h)&&(c=v);return c!==0&&(y=l.length),{w:c/=d,h:Math.max((y*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/d,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,d=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,c&&d&&(this.printHeaderRow(l.lineNumber,!0),l.y+=d[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,h,f,d){if(n.call(this),!h)throw new Error("No data for PDF table.");var c,y,v,w,m=[],g=[],b=[],S={},E={},I=[],L=[],O=(d=d||{}).autoSize||!1,M=d.printHeaders!==!1,T=d.css&&d.css["font-size"]!==void 0?16*d.css["font-size"]:d.fontSize||12,k=d.margins||Object.assign({width:this.getPageWidth()},e),A=typeof d.padding=="number"?d.padding:3,R=d.headerBackgroundColor||"#c8c8c8",C=d.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=T,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=C,this.setFontSize(T),f==null)g=m=Object.keys(h[0]),b=m.map(function(){return"left"});else if(Array.isArray(f)&&Tt(f[0])==="object")for(m=f.map(function(W){return W.name}),g=f.map(function(W){return W.prompt||W.name||""}),b=f.map(function(W){return W.align||"left"}),c=0;c<f.length;c+=1)E[f[c].name]=f[c].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(g=m=f,b=m.map(function(){return"left"}));if(O||Array.isArray(f)&&typeof f[0]=="string")for(c=0;c<m.length;c+=1){for(S[w=m[c]]=h.map(function(W){return W[w]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(g[c],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=S[w],this.setFont(void 0,"normal"),v=0;v<y.length;v+=1)I.push(this.getTextDimensions(y[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);E[w]=Math.max.apply(null,I)+A+A,I=[]}if(M){var V={};for(c=0;c<m.length;c+=1)V[m[c]]={},V[m[c]].text=g[c],V[m[c]].align=b[c];var Z=s.call(this,V,E);L=m.map(function(W){return new a(l,u,E[W],Z,V[W].text,void 0,V[W].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var te=f.reduce(function(W,q){return W[q.name]=q.align,W},{});for(c=0;c<h.length;c+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:c,data:h[c]},this);var Q=s.call(this,h[c],E);for(v=0;v<m.length;v+=1){var K=h[c][m[v]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:c,col:v,data:K},this),o.call(this,new a(l,u,E[m[v]],Q,K,c+2,te[m[v]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var s=function(l,u){var h=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,d=this.internal.scaleFactor;return Object.keys(l).map(function(c){var y=l[c];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,u[c]-h-h)},this).map(function(c){return this.getLineHeightFactor()*c.length*f/d+h+h},this).reduce(function(c,y){return Math.max(c,y)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var d=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){h=this.internal.__cell__.tableHeaderRow[c].clone(),u&&(h.y=this.internal.__cell__.margins.top||0,d.push(h)),h.lineNumber=l;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(y)}d.length>0&&this.setTableHeaderRow(d),this.setFont(void 0,"normal"),r=!1}}(st.API);var C_={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},R_=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],og=T_(R_),I_=[100,200,300,400,500,600,700,800,900],Gj=T_(I_);function sg(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return C_[a=a||"normal"]?a:"normal"}(t.style),n=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(a){return typeof og[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function _2(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var Kj={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},S2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function k2(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Yj(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",i=Object.assign({},Kj,r.genericFontFamilies||{}),a=null,o=null,s=0;s<e.length;++s)if(i[(a=sg(e[s])).family]&&(a.family=i[a.family]),t.hasOwnProperty(a.family)){o=t[a.family];break}if(!(o=o||t[n]))throw new Error("Could not find a font-family for the rule '"+k2(a)+"' and default family '"+n+"'.");if(o=function(l,u){if(u[l])return u[l];var h=og[l],f=h<=og.normal?-1:1,d=_2(u,R_,h,f);if(!d)throw new Error("Could not find a matching font-stretch value for "+l);return d}(a.stretch,o),o=function(l,u){if(u[l])return u[l];for(var h=C_[l],f=0;f<h.length;++f)if(u[h[f]])return u[h[f]];throw new Error("Could not find a matching font-style for "+l)}(a.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var h=Gj[l],f=_2(u,I_,h,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(a.weight,o)))throw new Error("Failed to resolve a font for the rule '"+k2(a)+"'.");return o}function N2(t){return t.trimLeft()}function Jj(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Xj(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var od,E2,A2,j0=["times"];(function(t){var e,r,n,i,a,o,s,l,u,h=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new o,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new o,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,u=new h}]);var f=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=P;Object.defineProperty(this,"pdf",{get:function(){return F}});var U=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return U},set:function(_e){U=!!_e}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(_e){H=!!_e}});var B=0;Object.defineProperty(this,"posX",{get:function(){return B},set:function(_e){isNaN(_e)||(B=_e)}});var J=0;Object.defineProperty(this,"posY",{get:function(){return J},set:function(_e){isNaN(_e)||(J=_e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(_e){var ue;typeof _e=="number"?ue=[_e,_e,_e,_e]:((ue=new Array(4))[0]=_e[0],ue[1]=_e.length>=2?_e[1]:ue[0],ue[2]=_e.length>=3?_e[2]:ue[0],ue[3]=_e.length>=4?_e[3]:ue[1]),u.margin=ue}});var re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return re},set:function(_e){re=_e}});var ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return ne},set:function(_e){ne=_e}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(_e){ge=_e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(_e){_e instanceof h&&(u=_e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(_e){u.path=_e}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(_e){be=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var ue;ue=d(_e),this.ctx.fillStyle=ue.style,this.ctx.isFillTransparent=ue.a===0,this.ctx.fillOpacity=ue.a,this.pdf.setFillColor(ue.r,ue.g,ue.b,{a:ue.a}),this.pdf.setTextColor(ue.r,ue.g,ue.b,{a:ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var ue=d(_e);this.ctx.strokeStyle=ue.style,this.ctx.isStrokeTransparent=ue.a===0,this.ctx.strokeOpacity=ue.a,ue.a===0?this.pdf.setDrawColor(255,255,255):(ue.a,this.pdf.setDrawColor(ue.r,ue.g,ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var Ee=null;function Ae(_e,ue){if(Ee===null){var He=function(oe){var se=[];return Object.keys(oe).forEach(function(ce){oe[ce].forEach(function(ve){var de=null;switch(ve){case"bold":de={family:ce,weight:"bold"};break;case"italic":de={family:ce,style:"italic"};break;case"bolditalic":de={family:ce,weight:"bold",style:"italic"};break;case"":case"normal":de={family:ce}}de!==null&&(de.ref={name:ce,style:ve},se.push(de))})}),se}(_e.getFontList());Ee=function(oe){for(var se={},ce=0;ce<oe.length;++ce){var ve=sg(oe[ce]),de=ve.family,Le=ve.stretch,Me=ve.style,qe=ve.weight;se[de]=se[de]||{},se[de][Le]=se[de][Le]||{},se[de][Le][Me]=se[de][Le][Me]||{},se[de][Le][Me][qe]=ve}return se}(He.concat(ue))}return Ee}var De=null;Object.defineProperty(this,"fontFaces",{get:function(){return De},set:function(_e){Ee=null,De=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var ue;if(this.ctx.font=_e,(ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var He=ue[1],oe=(ue[2],ue[3]),se=ue[4],ce=(ue[5],ue[6]),ve=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(se)[2];se=Math.floor(ve==="px"?parseFloat(se)*this.pdf.internal.scaleFactor:ve==="em"?parseFloat(se)*this.pdf.getFontSize():parseFloat(se)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(se);var de=function(et){var $e,Fe,Bt=[],ct=et.trim();if(ct==="")return j0;if(ct in S2)return[S2[ct]];for(;ct!=="";){switch(Fe=null,$e=(ct=N2(ct)).charAt(0)){case'"':case"'":Fe=Jj(ct.substring(1),$e);break;default:Fe=Xj(ct)}if(Fe===null||(Bt.push(Fe[0]),(ct=N2(Fe[1]))!==""&&ct.charAt(0)!==","))return j0;ct=ct.replace(/^,/,"")}return Bt}(ce);if(this.fontFaces){var Le=Yj(Ae(this.pdf,this.fontFaces),de.map(function(et){return{family:et,stretch:"normal",weight:oe,style:He}}));this.pdf.setFont(Le.ref.name,Le.ref.style)}else{var Me="";(oe==="bold"||parseInt(oe,10)>=700||He==="bold")&&(Me="bold"),He==="italic"&&(Me+="italic"),Me.length===0&&(Me="normal");for(var qe="",Ke={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ze=0;Ze<de.length;Ze++){if(this.pdf.internal.getFont(de[Ze],Me,{noFallback:!0,disableWarning:!0})!==void 0){qe=de[Ze];break}if(Me==="bolditalic"&&this.pdf.internal.getFont(de[Ze],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qe=de[Ze],Me="bold";else if(this.pdf.internal.getFont(de[Ze],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qe=de[Ze],Me="normal";break}}if(qe===""){for(var Ve=0;Ve<de.length;Ve++)if(Ke[de[Ve]]){qe=Ke[de[Ve]];break}}qe=qe===""?"Times":qe,this.pdf.setFont(qe,Me)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=!!_e}})};f.prototype.setLineDash=function(P){this.lineDash=P},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){S.call(this,"fill",!1)},f.prototype.stroke=function(){S.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(P,F){if(isNaN(P)||isNaN(F))throw zt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var U=this.ctx.transform.applyToPoint(new o(P,F));this.path.push({type:"mt",x:U.x,y:U.y}),this.ctx.lastPoint=new o(P,F)},f.prototype.closePath=function(){var P=new o(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&Tt(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){P=new o(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(P.x,P.y)},f.prototype.lineTo=function(P,F){if(isNaN(P)||isNaN(F))throw zt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var U=this.ctx.transform.applyToPoint(new o(P,F));this.path.push({type:"lt",x:U.x,y:U.y}),this.ctx.lastPoint=new o(U.x,U.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),S.call(this,null,!0)},f.prototype.quadraticCurveTo=function(P,F,U,H){if(isNaN(U)||isNaN(H)||isNaN(P)||isNaN(F))throw zt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var B=this.ctx.transform.applyToPoint(new o(U,H)),J=this.ctx.transform.applyToPoint(new o(P,F));this.path.push({type:"qct",x1:J.x,y1:J.y,x:B.x,y:B.y}),this.ctx.lastPoint=new o(B.x,B.y)},f.prototype.bezierCurveTo=function(P,F,U,H,B,J){if(isNaN(B)||isNaN(J)||isNaN(P)||isNaN(F)||isNaN(U)||isNaN(H))throw zt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var re=this.ctx.transform.applyToPoint(new o(B,J)),ne=this.ctx.transform.applyToPoint(new o(P,F)),ge=this.ctx.transform.applyToPoint(new o(U,H));this.path.push({type:"bct",x1:ne.x,y1:ne.y,x2:ge.x,y2:ge.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},f.prototype.arc=function(P,F,U,H,B,J){if(isNaN(P)||isNaN(F)||isNaN(U)||isNaN(H)||isNaN(B))throw zt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(J=!!J,!this.ctx.transform.isIdentity){var re=this.ctx.transform.applyToPoint(new o(P,F));P=re.x,F=re.y;var ne=this.ctx.transform.applyToPoint(new o(0,U)),ge=this.ctx.transform.applyToPoint(new o(0,0));U=Math.sqrt(Math.pow(ne.x-ge.x,2)+Math.pow(ne.y-ge.y,2))}Math.abs(B-H)>=2*Math.PI&&(H=0,B=2*Math.PI),this.path.push({type:"arc",x:P,y:F,radius:U,startAngle:H,endAngle:B,counterclockwise:J})},f.prototype.arcTo=function(P,F,U,H,B){throw new Error("arcTo not implemented.")},f.prototype.rect=function(P,F,U,H){if(isNaN(P)||isNaN(F)||isNaN(U)||isNaN(H))throw zt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,F),this.lineTo(P+U,F),this.lineTo(P+U,F+H),this.lineTo(P,F+H),this.lineTo(P,F),this.lineTo(P+U,F),this.lineTo(P,F)},f.prototype.fillRect=function(P,F,U,H){if(isNaN(P)||isNaN(F)||isNaN(U)||isNaN(H))throw zt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!c.call(this)){var B={};this.lineCap!=="butt"&&(B.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(B.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,F,U,H),this.fill(),B.hasOwnProperty("lineCap")&&(this.lineCap=B.lineCap),B.hasOwnProperty("lineJoin")&&(this.lineJoin=B.lineJoin)}},f.prototype.strokeRect=function(P,F,U,H){if(isNaN(P)||isNaN(F)||isNaN(U)||isNaN(H))throw zt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(P,F,U,H),this.stroke())},f.prototype.clearRect=function(P,F,U,H){if(isNaN(P)||isNaN(F)||isNaN(U)||isNaN(H))throw zt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,F,U,H))},f.prototype.save=function(P){P=typeof P!="boolean"||P;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},f.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("Q");this.pdf.setPage(F),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(P){var F,U,H,B;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))F=0,U=0,H=0,B=0;else{var J=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(J!==null)F=parseInt(J[1]),U=parseInt(J[2]),H=parseInt(J[3]),B=1;else if((J=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)F=parseInt(J[1]),U=parseInt(J[2]),H=parseInt(J[3]),B=parseFloat(J[4]);else{if(B=1,typeof P=="string"&&P.charAt(0)!=="#"){var re=new E_(P);P=re.ok?re.toHex():"#000000"}P.length===4?(F=P.substring(1,2),F+=F,U=P.substring(2,3),U+=U,H=P.substring(3,4),H+=H):(F=P.substring(1,3),U=P.substring(3,5),H=P.substring(5,7)),F=parseInt(F,16),U=parseInt(U,16),H=parseInt(H,16)}}return{r:F,g:U,b:H,a:B,style:P}},c=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(P,F,U,H){if(isNaN(F)||isNaN(U)||typeof P!="string")throw zt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!c.call(this)){var B=Q(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;A.call(this,{text:P,x:F,y:U,scale:J,angle:B,align:this.textAlign,maxWidth:H})}},f.prototype.strokeText=function(P,F,U,H){if(isNaN(F)||isNaN(U)||typeof P!="string")throw zt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){H=isNaN(H)?void 0:H;var B=Q(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;A.call(this,{text:P,x:F,y:U,scale:J,renderingMode:"stroke",angle:B,align:this.textAlign,maxWidth:H})}},f.prototype.measureText=function(P){if(typeof P!="string")throw zt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,U=this.pdf.internal.scaleFactor,H=F.internal.getFontSize(),B=F.getStringUnitWidth(P)*H/F.internal.scaleFactor,J=function(re){var ne=(re=re||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ne}}),this};return new J({width:B*=Math.round(96*U/72*1e4)/1e4})},f.prototype.scale=function(P,F){if(isNaN(P)||isNaN(F))throw zt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var U=new l(P,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(U)},f.prototype.rotate=function(P){if(isNaN(P))throw zt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},f.prototype.translate=function(P,F){if(isNaN(P)||isNaN(F))throw zt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var U=new l(1,0,0,1,P,F);this.ctx.transform=this.ctx.transform.multiply(U)},f.prototype.transform=function(P,F,U,H,B,J){if(isNaN(P)||isNaN(F)||isNaN(U)||isNaN(H)||isNaN(B)||isNaN(J))throw zt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var re=new l(P,F,U,H,B,J);this.ctx.transform=this.ctx.transform.multiply(re)},f.prototype.setTransform=function(P,F,U,H,B,J){P=isNaN(P)?1:P,F=isNaN(F)?0:F,U=isNaN(U)?0:U,H=isNaN(H)?1:H,B=isNaN(B)?0:B,J=isNaN(J)?0:J,this.ctx.transform=new l(P,F,U,H,B,J)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(P,F,U,H,B,J,re,ne,ge){var be=this.pdf.getImageProperties(P),Ee=1,Ae=1,De=1,_e=1;H!==void 0&&ne!==void 0&&(De=ne/H,_e=ge/B,Ee=be.width/H*ne/H,Ae=be.height/B*ge/B),J===void 0&&(J=F,re=U,F=0,U=0),H!==void 0&&ne===void 0&&(ne=H,ge=B),H===void 0&&ne===void 0&&(ne=be.width,ge=be.height);for(var ue,He=this.ctx.transform.decompose(),oe=Q(He.rotate.shx),se=new l,ce=(se=(se=(se=se.multiply(He.translate)).multiply(He.skew)).multiply(He.scale)).applyToRectangle(new s(J-F*De,re-U*_e,H*Ee,B*Ae)),ve=w.call(this,ce),de=[],Le=0;Le<ve.length;Le+=1)de.indexOf(ve[Le])===-1&&de.push(ve[Le]);if(b(de),this.autoPaging)for(var Me=de[0],qe=de[de.length-1],Ke=Me;Ke<qe+1;Ke++){this.pdf.setPage(Ke);var Ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=Ke===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Fe=Ke===1?0:et+(Ke-2)*$e;if(this.ctx.clip_path.length!==0){var Bt=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(ue,this.posX+this.margin[3],-Fe+Ve+this.ctx.prevPageLastElemOffset),E.call(this,"fill",!0),this.path=Bt}var ct=JSON.parse(JSON.stringify(ce));ct=g([ct],this.posX+this.margin[3],-Fe+Ve+this.ctx.prevPageLastElemOffset)[0];var $t=(Ke>Me||Ke<qe)&&v.call(this);$t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,$e,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",ct.x,ct.y,ct.w,ct.h,null,null,oe),$t&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",ce.x,ce.y,ce.w,ce.h,null,null,oe)};var w=function(P,F,U){var H=[];F=F||this.pdf.internal.pageSize.width,U=U||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var B=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":H.push(Math.floor((P.y+B)/U)+1);break;case"arc":H.push(Math.floor((P.y+B-P.radius)/U)+1),H.push(Math.floor((P.y+B+P.radius)/U)+1);break;case"qct":var J=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);H.push(Math.floor((J.y+B)/U)+1),H.push(Math.floor((J.y+J.h+B)/U)+1);break;case"bct":var re=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);H.push(Math.floor((re.y+B)/U)+1),H.push(Math.floor((re.y+re.h+B)/U)+1);break;case"rect":H.push(Math.floor((P.y+B)/U)+1),H.push(Math.floor((P.y+P.h+B)/U)+1)}for(var ne=0;ne<H.length;ne+=1)for(;this.pdf.internal.getNumberOfPages()<H[ne];)m.call(this);return H},m=function(){var P=this.fillStyle,F=this.strokeStyle,U=this.font,H=this.lineCap,B=this.lineWidth,J=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=F,this.font=U,this.lineCap=H,this.lineWidth=B,this.lineJoin=J},g=function(P,F,U){for(var H=0;H<P.length;H++)switch(P[H].type){case"bct":P[H].x2+=F,P[H].y2+=U;case"qct":P[H].x1+=F,P[H].y1+=U;case"mt":case"lt":case"arc":default:P[H].x+=F,P[H].y+=U}return P},b=function(P){return P.sort(function(F,U){return F-U})},S=function(P,F){for(var U,H,B=this.fillStyle,J=this.strokeStyle,re=this.lineCap,ne=this.lineWidth,ge=Math.abs(ne*this.ctx.transform.scaleX),be=this.lineJoin,Ee=JSON.parse(JSON.stringify(this.path)),Ae=JSON.parse(JSON.stringify(this.path)),De=[],_e=0;_e<Ae.length;_e++)if(Ae[_e].x!==void 0)for(var ue=w.call(this,Ae[_e]),He=0;He<ue.length;He+=1)De.indexOf(ue[He])===-1&&De.push(ue[He]);for(var oe=0;oe<De.length;oe++)for(;this.pdf.internal.getNumberOfPages()<De[oe];)m.call(this);if(b(De),this.autoPaging)for(var se=De[0],ce=De[De.length-1],ve=se;ve<ce+1;ve++){this.pdf.setPage(ve),this.fillStyle=B,this.strokeStyle=J,this.lineCap=re,this.lineWidth=ge,this.lineJoin=be;var de=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Le=ve===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ke=ve===1?0:Me+(ve-2)*qe;if(this.ctx.clip_path.length!==0){var Ze=this.path;U=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(U,this.posX+this.margin[3],-Ke+Le+this.ctx.prevPageLastElemOffset),E.call(this,P,!0),this.path=Ze}if(H=JSON.parse(JSON.stringify(Ee)),this.path=g(H,this.posX+this.margin[3],-Ke+Le+this.ctx.prevPageLastElemOffset),F===!1||ve===0){var Ve=(ve>se||ve<ce)&&v.call(this);Ve&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],de,qe,null).clip().discardPath()),E.call(this,P,F),Ve&&this.pdf.restoreGraphicsState()}this.lineWidth=ne}else this.lineWidth=ge,E.call(this,P,F),this.lineWidth=ne;this.path=Ee},E=function(P,F){if((P!=="stroke"||F||!y.call(this))&&(P==="stroke"||F||!c.call(this))){for(var U,H,B=[],J=this.path,re=0;re<J.length;re++){var ne=J[re];switch(ne.type){case"begin":B.push({begin:!0});break;case"close":B.push({close:!0});break;case"mt":B.push({start:ne,deltas:[],abs:[]});break;case"lt":var ge=B.length;if(J[re-1]&&!isNaN(J[re-1].x)&&(U=[ne.x-J[re-1].x,ne.y-J[re-1].y],ge>0)){for(;ge>=0;ge--)if(B[ge-1].close!==!0&&B[ge-1].begin!==!0){B[ge-1].deltas.push(U),B[ge-1].abs.push(ne);break}}break;case"bct":U=[ne.x1-J[re-1].x,ne.y1-J[re-1].y,ne.x2-J[re-1].x,ne.y2-J[re-1].y,ne.x-J[re-1].x,ne.y-J[re-1].y],B[B.length-1].deltas.push(U);break;case"qct":var be=J[re-1].x+2/3*(ne.x1-J[re-1].x),Ee=J[re-1].y+2/3*(ne.y1-J[re-1].y),Ae=ne.x+2/3*(ne.x1-ne.x),De=ne.y+2/3*(ne.y1-ne.y),_e=ne.x,ue=ne.y;U=[be-J[re-1].x,Ee-J[re-1].y,Ae-J[re-1].x,De-J[re-1].y,_e-J[re-1].x,ue-J[re-1].y],B[B.length-1].deltas.push(U);break;case"arc":B.push({deltas:[],abs:[],arc:!0}),Array.isArray(B[B.length-1].abs)&&B[B.length-1].abs.push(ne)}}H=F?null:P==="stroke"?"stroke":"fill";for(var He=!1,oe=0;oe<B.length;oe++)if(B[oe].arc)for(var se=B[oe].abs,ce=0;ce<se.length;ce++){var ve=se[ce];ve.type==="arc"?O.call(this,ve.x,ve.y,ve.radius,ve.startAngle,ve.endAngle,ve.counterclockwise,void 0,F,!He):R.call(this,ve.x,ve.y),He=!0}else if(B[oe].close===!0)this.pdf.internal.out("h"),He=!1;else if(B[oe].begin!==!0){var de=B[oe].start.x,Le=B[oe].start.y;C.call(this,B[oe].deltas,de,Le),He=!0}H&&M.call(this,H),F&&T.call(this)}},I=function(P){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,U=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-U;case"top":return P+F-U;case"hanging":return P+F-2*U;case"middle":return P+F/2-U;case"ideographic":return P;case"alphabetic":default:return P}},L=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(F,U){this.colorStops.push([F,U])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(P,F,U,H,B,J,re,ne,ge){for(var be=Z.call(this,U,H,B,J),Ee=0;Ee<be.length;Ee++){var Ae=be[Ee];Ee===0&&(ge?k.call(this,Ae.x1+P,Ae.y1+F):R.call(this,Ae.x1+P,Ae.y1+F)),V.call(this,P,F,Ae.x2,Ae.y2,Ae.x3,Ae.y3,Ae.x4,Ae.y4)}ne?T.call(this):M.call(this,re)},M=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},T=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(P,F){this.pdf.internal.out(r(P)+" "+n(F)+" m")},A=function(P){var F;switch(P.align){case"right":case"end":F="right";break;case"center":F="center";break;case"left":case"start":default:F="left"}var U=this.pdf.getTextDimensions(P.text),H=I.call(this,P.y),B=L.call(this,H)-U.h,J=this.ctx.transform.applyToPoint(new o(P.x,H)),re=this.ctx.transform.decompose(),ne=new l;ne=(ne=(ne=ne.multiply(re.translate)).multiply(re.skew)).multiply(re.scale);for(var ge,be,Ee,Ae=this.ctx.transform.applyToRectangle(new s(P.x,H,U.w,U.h)),De=ne.applyToRectangle(new s(P.x,B,U.w,U.h)),_e=w.call(this,De),ue=[],He=0;He<_e.length;He+=1)ue.indexOf(_e[He])===-1&&ue.push(_e[He]);if(b(ue),this.autoPaging)for(var oe=ue[0],se=ue[ue.length-1],ce=oe;ce<se+1;ce++){this.pdf.setPage(ce);var ve=ce===1?this.posY+this.margin[0]:this.margin[0],de=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Le=this.pdf.internal.pageSize.height-this.margin[2],Me=Le-this.margin[0],qe=this.pdf.internal.pageSize.width-this.margin[1],Ke=qe-this.margin[3],Ze=ce===1?0:de+(ce-2)*Me;if(this.ctx.clip_path.length!==0){var Ve=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(ge,this.posX+this.margin[3],-1*Ze+ve),E.call(this,"fill",!0),this.path=Ve}var et=g([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-Ze+ve+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*P.scale),Ee=this.lineWidth,this.lineWidth=Ee*P.scale);var $e=this.autoPaging!=="text";if($e||et.y+et.h<=Le){if($e||et.y>=ve&&et.x<=qe){var Fe=$e?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||qe-et.x)[0],Bt=g([JSON.parse(JSON.stringify(Ae))],this.posX+this.margin[3],-Ze+ve+this.ctx.prevPageLastElemOffset)[0],ct=$e&&(ce>oe||ce<se)&&v.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,Me,null).clip().discardPath()),this.pdf.text(Fe,Bt.x,Bt.y,{angle:P.angle,align:F,renderingMode:P.renderingMode}),ct&&this.pdf.restoreGraphicsState()}}else et.y<Le&&(this.ctx.prevPageLastElemOffset+=Le-et.y);P.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Ee)}else P.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*P.scale),Ee=this.lineWidth,this.lineWidth=Ee*P.scale),this.pdf.text(P.text,J.x+this.posX,J.y+this.posY,{angle:P.angle,align:F,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Ee)},R=function(P,F,U,H){U=U||0,H=H||0,this.pdf.internal.out(r(P+U)+" "+n(F+H)+" l")},C=function(P,F,U){return this.pdf.lines(P,F,U,null,null)},V=function(P,F,U,H,B,J,re,ne){this.pdf.internal.out([e(i(U+P)),e(a(H+F)),e(i(B+P)),e(a(J+F)),e(i(re+P)),e(a(ne+F)),"c"].join(" "))},Z=function(P,F,U,H){for(var B=2*Math.PI,J=Math.PI/2;F>U;)F-=B;var re=Math.abs(U-F);re<B&&H&&(re=B-re);for(var ne=[],ge=H?-1:1,be=F;re>1e-5;){var Ee=be+ge*Math.min(re,J);ne.push(te.call(this,P,be,Ee)),re-=Math.abs(Ee-be),be=Ee}return ne},te=function(P,F,U){var H=(U-F)/2,B=P*Math.cos(H),J=P*Math.sin(H),re=B,ne=-J,ge=re*re+ne*ne,be=ge+re*B+ne*J,Ee=4/3*(Math.sqrt(2*ge*be)-be)/(re*J-ne*B),Ae=re-Ee*ne,De=ne+Ee*re,_e=Ae,ue=-De,He=H+F,oe=Math.cos(He),se=Math.sin(He);return{x1:P*Math.cos(F),y1:P*Math.sin(F),x2:Ae*oe-De*se,y2:Ae*se+De*oe,x3:_e*oe-ue*se,y3:_e*se+ue*oe,x4:P*Math.cos(U),y4:P*Math.sin(U)}},Q=function(P){return 180*P/Math.PI},K=function(P,F,U,H,B,J){var re=P+.5*(U-P),ne=F+.5*(H-F),ge=B+.5*(U-B),be=J+.5*(H-J),Ee=Math.min(P,B,re,ge),Ae=Math.max(P,B,re,ge),De=Math.min(F,J,ne,be),_e=Math.max(F,J,ne,be);return new s(Ee,De,Ae-Ee,_e-De)},W=function(P,F,U,H,B,J,re,ne){var ge,be,Ee,Ae,De,_e,ue,He,oe,se,ce,ve,de,Le,Me=U-P,qe=H-F,Ke=B-U,Ze=J-H,Ve=re-B,et=ne-J;for(be=0;be<41;be++)oe=(ue=(Ee=P+(ge=be/40)*Me)+ge*((De=U+ge*Ke)-Ee))+ge*(De+ge*(B+ge*Ve-De)-ue),se=(He=(Ae=F+ge*qe)+ge*((_e=H+ge*Ze)-Ae))+ge*(_e+ge*(J+ge*et-_e)-He),be==0?(ce=oe,ve=se,de=oe,Le=se):(ce=Math.min(ce,oe),ve=Math.min(ve,se),de=Math.max(de,oe),Le=Math.max(Le,se));return new s(Math.round(ce),Math.round(ve),Math.round(de-ce),Math.round(Le-ve))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,F,U=(P=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:F}));this.prevLineDash!==U&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=U)}}})(st.API),function(t){var e=function(a){var o,s,l,u,h,f,d,c,y,v;for(s=[],l=0,u=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;u>l;l+=4)(h=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(f=(h=((h=((h=((h=(h-(v=h%85))/85)-(y=h%85))/85)-(c=h%85))/85)-(d=h%85))/85)%85,s.push(f+33,d+33,c+33,y+33,v+33)):s.push(122);return function(w,m){for(var g=m;g>0;g--)w.pop()}(s,o.length),String.fromCharCode.apply(String,s)+"~>"},r=function(a){var o,s,l,u,h,f=String,d="length",c=255,y="charCodeAt",v="slice",w="replace";for(a[v](-2),a=a[v](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),l=[],u=0,h=(a+=o="uuuuu"[v](a[d]%5||5))[d];h>u;u+=5)s=52200625*(a[y](u)-33)+614125*(a[y](u+1)-33)+7225*(a[y](u+2)-33)+85*(a[y](u+3)-33)+(a[y](u+4)-33),l.push(c&s>>24,c&s>>16,c&s>>8,c&s);return function(m,g){for(var b=g;b>0;b--)m.pop()}(l,o[d]),f.fromCharCode.apply(f,l)},n=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var s="",l=0;l<a.length;l+=2)s+=String.fromCharCode("0x"+(a[l]+a[l+1]));return s},i=function(a){for(var o=new Uint8Array(a.length),s=a.length;s--;)o[s]=a.charCodeAt(s);return a=(o=tg(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(a,o){var s=0,l=a||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),s=0;s<o.length;s+=1)switch(o[s]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[s]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(st.API),function(t){t.loadFile=function(e,r,n){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(l,u,h){var f=new XMLHttpRequest,d=0,c=function(y){var v=y.length,w=[],m=String.fromCharCode;for(d=0;d<v;d+=1)w.push(m(255&y.charCodeAt(d)));return w.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?h(c(this.responseText)):h(void 0)}),f.send(null),u&&f.status===200)return c(f.responseText)}(i,a,o)}catch{}return s}(e,r,n)},t.loadImageFile=t.loadFile}(st.API),function(t){function e(){return(lt.html2canvas?Promise.resolve(lt.html2canvas):Jm(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(lt.DOMPurify?Promise.resolve(lt.DOMPurify):Jm(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var s=Tt(o);return s==="undefined"?"undefined":s==="string"||o instanceof String?"string":s==="number"||o instanceof Number?"number":s==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":s==="object"?"object":"unknown"},i=function(o,s){var l=document.createElement(o);for(var u in s.className&&(l.className=s.className),s.innerHTML&&s.dompurify&&(l.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)l.style[u]=s.style[u];return l},a=function o(s){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(s)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,s){return o.__proto__=s||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,s){return this.then(function(){switch(s=s||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function l(u,h){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),d=u.firstChild;d;d=d.nextSibling)h!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||f.appendChild(l(d,h));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,s(this.prop.container,l)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var l=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var d=0;d<u.length;++d){var c=u[d],y=c.src.find(function(v){return v.format==="truetype"});y&&l.addFont(y.url,c.ref.name,c.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),s(this.prop.container,f)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,s,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,s):this.outputPdf(o,s)},a.prototype.outputPdf=function(o,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,s)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var s=Object.keys(o||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(s)})},a.prototype.get=function(o,s){return this.then(function(){var l=o in a.template.prop?this.prop[o]:this.opt[o];return s?s(l):l})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function s(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||st.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:s(o.inner.width,o.k),height:s(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,s,l,u){return o!=null&&(this.progress.val=o),s!=null&&(this.progress.state=s),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,s,l,u){return this.setProgress(o?this.progress.val+o:null,s||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(o,s){var l=this;return this.thenCore(o,s,function(u,h){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,u),f}).then(u,h).then(function(f){return l.updateProgress(1),f})})},a.prototype.thenCore=function(o,s,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),s&&(s=s.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),h=l.call(u,o,s);return a.convert(h,this.__proto__)},a.prototype.thenExternal=function(o,s){return Promise.prototype.then.call(this,o,s)},a.prototype.thenList=function(o){var s=this;return o.forEach(function(l){s=s.thenCore(l)}),s},a.prototype.catch=function(o){o&&(o=o.bind(this));var s=Promise.prototype.catch.call(this,o);return a.convert(s,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,st.getPageSize=function(o,s,l){if(Tt(o)==="object"){var u=o;o=u.orientation,s=u.unit||s,l=u.format||l}s=s||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var h,f=(""+l).toLowerCase(),d={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+s}var c,y=0,v=0;if(d.hasOwnProperty(f))y=d[f][1]/h,v=d[f][0]/h;else try{y=l[1],v=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",v>y&&(c=v,v=y,y=c);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>v&&(c=v,v=y,y=c)}return{width:v,height:y,unit:s,k:h,orientation:o}},t.html=function(o,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(sg):null;var l=new a(s);return s.worker?l:l.from(o).doCallback()}}(st.API),st.API.addJS=function(t){return A2=t,this.internal.events.subscribe("postPutResources",function(){od=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(od+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),E2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+A2+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){od!==void 0&&E2!==void 0&&this.internal.out("/Names <</JavaScript "+od+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],s=n.exec(o);if(s!=null){var l=s[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,h=[];for(a=0;a<u;a++){var f=r.internal.newObject();h.push(f);var d=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var c=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<h.length;a++)r.internal.write("(page_"+(a+1)+")"+h[a]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+c+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,a){var o={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var o=n.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var l=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(st.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,a,o,s){var l,u=this.decode.DCT_DECODE,h=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(f){for(var d,c=256*f.charCodeAt(4)+f.charCodeAt(5),y=f.length,v={width:0,height:0,numcomponents:1},w=4;w<y;w+=2){if(w+=c,e.indexOf(f.charCodeAt(w+1))!==-1){d=256*f.charCodeAt(w+5)+f.charCodeAt(w+6),v={width:256*f.charCodeAt(w+7)+f.charCodeAt(w+8),height:d,numcomponents:f.charCodeAt(w+9)};break}c=256*f.charCodeAt(w+2)+f.charCodeAt(w+3)}return v}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}h={data:r,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:u,index:n,alias:i}}return h}}(st.API);var Ys,sd,j2,O2,L2,Qj=function(){var t,e,r;function n(a){var o,s,l,u,h,f,d,c,y,v,w,m,g,b;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),y=(function(){var S,E;for(E=[],S=0;S<4;++S)E.push(String.fromCharCode(this.data[this.pos++]));return E}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*h/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),a=(f!=null?f.data:void 0)||this.imgData,m=0;0<=o?m<o:m>o;0<=o?++m:--m)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((v=l-this.transparency.indexed.length)>0)for(g=0;0<=v?g<v:g>v;0<=v?++g:--g)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":d=(w=this.read(o)).indexOf(0),c=String.fromCharCode.apply(String,w.slice(0,d)),this.text[c]=String.fromCharCode.apply(String,w.slice(d+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(b=this.colorType)===4||b===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(a){var o,s;for(s=[],o=0;0<=a?o<a:o>a;0<=a?++o:--o)s.push(this.data[this.pos++]);return s},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(a){var o=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*o),l=0,u=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function h(f,d,c,y){var v,w,m,g,b,S,E,I,L,O,M,T,k,A,R,C,V,Z,te,Q,K,W=Math.ceil((u.width-f)/c),q=Math.ceil((u.height-d)/y),P=u.width==W&&u.height==q;for(A=o*W,T=P?s:new Uint8Array(A*q),S=a.length,k=0,w=0;k<q&&l<S;){switch(a[l++]){case 0:for(g=V=0;V<A;g=V+=1)T[w++]=a[l++];break;case 1:for(g=Z=0;Z<A;g=Z+=1)v=a[l++],b=g<o?0:T[w-o],T[w++]=(v+b)%256;break;case 2:for(g=te=0;te<A;g=te+=1)v=a[l++],m=(g-g%o)/o,R=k&&T[(k-1)*A+m*o+g%o],T[w++]=(R+v)%256;break;case 3:for(g=Q=0;Q<A;g=Q+=1)v=a[l++],m=(g-g%o)/o,b=g<o?0:T[w-o],R=k&&T[(k-1)*A+m*o+g%o],T[w++]=(v+Math.floor((b+R)/2))%256;break;case 4:for(g=K=0;K<A;g=K+=1)v=a[l++],m=(g-g%o)/o,b=g<o?0:T[w-o],k===0?R=C=0:(R=T[(k-1)*A+m*o+g%o],C=m&&T[(k-1)*A+(m-1)*o+g%o]),E=b+R-C,I=Math.abs(E-b),O=Math.abs(E-R),M=Math.abs(E-C),L=I<=O&&I<=M?b:O<=M?R:C,T[w++]=(v+L)%256;break;default:throw new Error("Invalid filter algorithm: "+a[l-1])}if(!P){var F=((d+k*y)*u.width+f)*o,U=k*A;for(g=0;g<W;g+=1){for(var H=0;H<o;H+=1)s[F++]=T[U++];F+=(c-1)*o}}k++}}return a=Lj(a),u.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),s},n.prototype.decodePalette=function(){var a,o,s,l,u,h,f,d,c;for(s=this.palette,h=this.transparency.indexed||[],u=new Uint8Array((h.length||0)+s.length),l=0,a=0,o=f=0,d=s.length;f<d;o=f+=3)u[l++]=s[o],u[l++]=s[o+1],u[l++]=s[o+2],u[l++]=(c=h[a++])!=null?c:255;return u},n.prototype.copyToImageData=function(a,o){var s,l,u,h,f,d,c,y,v,w,m;if(l=this.colors,v=null,s=this.hasAlphaChannel,this.palette.length&&(v=(m=this._decodedPalette)!=null?m:this._decodedPalette=this.decodePalette(),l=4,s=!0),y=(u=a.data||a).length,f=v||o,h=d=0,l===1)for(;h<y;)c=v?4*o[h/4]:d,w=f[c++],u[h++]=w,u[h++]=w,u[h++]=w,u[h++]=s?f[c++]:255,d=c;else for(;h<y;)c=v?4*o[h/4]:d,u[h++]=f[c++],u[h++]=f[c++],u[h++]=f[c++],u[h++]=s?f[c++]:255,d=c},n.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(lt)==="[object Window]"){try{e=lt.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(a){var o;if(i()===!0)return r.width=a.width,r.height=a.height,r.clearRect(0,0,a.width,a.height),r.putImageData(a,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(a){var o,s,l,u,h,f,d,c;if(this.animation){for(c=[],s=h=0,f=(d=this.animation.frames).length;h<f;s=++h)o=d[s],l=a.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,c.push(o.image=t(l));return c}},n.prototype.renderFrame=function(a,o){var s,l,u;return s=(l=this.animation.frames)[o],u=l[o-1],o===0&&a.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?a.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&a.putImageData(u.imageData,u.xOffset,u.yOffset),s.blendOp===0&&a.clearRect(s.xOffset,s.yOffset,s.width,s.height),a.drawImage(s.image,s.xOffset,s.yOffset)},n.prototype.animate=function(a){var o,s,l,u,h,f,d=this;return s=0,f=this.animation,u=f.numFrames,l=f.frames,h=f.numPlays,(o=function(){var c,y;if(c=s++%u,y=l[c],d.renderFrame(a,c),u>1&&s/u<h)return d.animation._timeout=setTimeout(o,y.delay)})()},n.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},n.prototype.render=function(a){var o,s;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,o=a.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(s=o.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),o.putImageData(s,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zj(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var s=null,l=null;a&&(s=e,l=o,e+=3*o);var u=!0,h=[],f=0,d=null,c=0,y=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var v=t[e++];f=t[e++]|t[e++]<<8,d=t[e++],!(1&v)&&(d=null),c=v>>2&7,e++;break;case 254:for(;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var w=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,g=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,S=t[e++],E=S>>6&1,I=1<<(7&S)+1,L=s,O=l,M=!1;S>>7&&(M=!0,L=e,O=I,e+=3*I);var T=e;for(e++;;){var k;if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}h.push({x:w,y:m,width:g,height:b,has_local_palette:M,palette_offset:L,palette_size:O,data_offset:T,data_length:e-T,transparent_index:d,interlaced:!!E,delay:f,disposal:c});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return y},this.frameInfo=function(A){if(A<0||A>=h.length)throw new Error("Frame index out of range.");return h[A]},this.decodeAndBlitFrameBGRA=function(A,R){var C=this.frameInfo(A),V=C.width*C.height,Z=new Uint8Array(V);P2(t,C.data_offset,Z,V);var te=C.palette_offset,Q=C.transparent_index;Q===null&&(Q=256);var K=C.width,W=r-K,q=K,P=4*(C.y*r+C.x),F=4*((C.y+C.height)*r+C.x),U=P,H=4*W;C.interlaced===!0&&(H+=4*r*7);for(var B=8,J=0,re=Z.length;J<re;++J){var ne=Z[J];if(q===0&&(q=K,(U+=H)>=F&&(H=4*W+4*r*(B-1),U=P+(K+W)*(B<<1),B>>=1)),ne===Q)U+=4;else{var ge=t[te+3*ne],be=t[te+3*ne+1],Ee=t[te+3*ne+2];R[U++]=Ee,R[U++]=be,R[U++]=ge,R[U++]=255}--q}},this.decodeAndBlitFrameRGBA=function(A,R){var C=this.frameInfo(A),V=C.width*C.height,Z=new Uint8Array(V);P2(t,C.data_offset,Z,V);var te=C.palette_offset,Q=C.transparent_index;Q===null&&(Q=256);var K=C.width,W=r-K,q=K,P=4*(C.y*r+C.x),F=4*((C.y+C.height)*r+C.x),U=P,H=4*W;C.interlaced===!0&&(H+=4*r*7);for(var B=8,J=0,re=Z.length;J<re;++J){var ne=Z[J];if(q===0&&(q=K,(U+=H)>=F&&(H=4*W+4*r*(B-1),U=P+(K+W)*(B<<1),B>>=1)),ne===Q)U+=4;else{var ge=t[te+3*ne],be=t[te+3*ne+1],Ee=t[te+3*ne+2];R[U++]=ge,R[U++]=be,R[U++]=Ee,R[U++]=255}--q}}}function P2(t,e,r,n){for(var i=t[e++],a=1<<i,o=a+1,s=o+1,l=i+1,u=(1<<l)-1,h=0,f=0,d=0,c=t[e++],y=new Int32Array(4096),v=null;;){for(;h<16&&c!==0;)f|=t[e++]<<h,h+=8,c===1?c=t[e++]:--c;if(h<l)break;var w=f&u;if(f>>=l,h-=l,w!==a){if(w===o)break;for(var m=w<s?w:v,g=0,b=m;b>a;)b=y[b]>>8,++g;var S=b;if(d+g+(m!==w?1:0)>n)return void zt.log("Warning, gif stream longer than expected.");r[d++]=S;var E=d+=g;for(m!==w&&(r[d++]=S),b=m;g--;)b=y[b],r[--E]=255&b,b>>=8;v!==null&&s<4096&&(y[s++]=v<<8|S,s>=u+1&&l<12&&(++l,u=u<<1|1)),v=w}else s=o+1,u=(1<<(l=i+1))-1,v=null}return d!==n&&zt.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function O0(t){var e,r,n,i,a,o=Math.floor,s=new Array(64),l=new Array(64),u=new Array(64),h=new Array(64),f=new Array(65535),d=new Array(65535),c=new Array(64),y=new Array(64),v=[],w=0,m=7,g=new Array(64),b=new Array(64),S=new Array(64),E=new Array(256),I=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],V=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(P,F){for(var U=0,H=0,B=new Array,J=1;J<=16;J++){for(var re=1;re<=P[J];re++)B[F[H]]=[],B[F[H]][0]=U,B[F[H]][1]=J,H++,U++;U*=2}return B}function te(P){for(var F=P[0],U=P[1]-1;U>=0;)F&1<<U&&(w|=1<<m),U--,--m<0&&(w==255?(Q(255),Q(0)):Q(w),m=7,w=0)}function Q(P){v.push(P)}function K(P){Q(P>>8&255),Q(255&P)}function W(P,F,U,H,B){for(var J,re=B[0],ne=B[240],ge=function(se,ce){var ve,de,Le,Me,qe,Ke,Ze,Ve,et,$e,Fe=0;for(et=0;et<8;++et){ve=se[Fe],de=se[Fe+1],Le=se[Fe+2],Me=se[Fe+3],qe=se[Fe+4],Ke=se[Fe+5],Ze=se[Fe+6];var Bt=ve+(Ve=se[Fe+7]),ct=ve-Ve,$t=de+Ze,gt=de-Ze,xt=Le+Ke,Br=Le-Ke,vt=Me+qe,ia=Me-qe,qt=Bt+vt,Vr=Bt-vt,wi=$t+xt,Rt=$t-xt;se[Fe]=qt+wi,se[Fe+4]=qt-wi;var ut=.707106781*(Rt+Vr);se[Fe+2]=Vr+ut,se[Fe+6]=Vr-ut;var Nt=.382683433*((qt=ia+Br)-(Rt=gt+ct)),Ht=.5411961*qt+Nt,Zt=1.306562965*Rt+Nt,ni=.707106781*(wi=Br+gt),Dn=ct+ni,it=ct-ni;se[Fe+5]=it+Ht,se[Fe+3]=it-Ht,se[Fe+1]=Dn+Zt,se[Fe+7]=Dn-Zt,Fe+=8}for(Fe=0,et=0;et<8;++et){ve=se[Fe],de=se[Fe+8],Le=se[Fe+16],Me=se[Fe+24],qe=se[Fe+32],Ke=se[Fe+40],Ze=se[Fe+48];var wn=ve+(Ve=se[Fe+56]),Mn=ve-Ve,Gr=de+Ze,At=de-Ze,It=Le+Ke,Kr=Le-Ke,aa=Me+qe,Fn=Me-qe,bn=wn+aa,dr=wn-aa,xn=Gr+It,Bn=Gr-It;se[Fe]=bn+xn,se[Fe+32]=bn-xn;var sn=.707106781*(Bn+dr);se[Fe+16]=dr+sn,se[Fe+48]=dr-sn;var qn=.382683433*((bn=Fn+Kr)-(Bn=At+Mn)),oa=.5411961*bn+qn,tt=1.306562965*Bn+qn,he=.707106781*(xn=Kr+At),Ie=Mn+he,Ye=Mn-he;se[Fe+40]=Ye+oa,se[Fe+24]=Ye-oa,se[Fe+8]=Ie+tt,se[Fe+56]=Ie-tt,Fe++}for(et=0;et<64;++et)$e=se[et]*ce[et],c[et]=$e>0?$e+.5|0:$e-.5|0;return c}(P,F),be=0;be<64;++be)y[L[be]]=ge[be];var Ee=y[0]-U;U=y[0],Ee==0?te(H[0]):(te(H[d[J=32767+Ee]]),te(f[J]));for(var Ae=63;Ae>0&&y[Ae]==0;)Ae--;if(Ae==0)return te(re),U;for(var De,_e=1;_e<=Ae;){for(var ue=_e;y[_e]==0&&_e<=Ae;)++_e;var He=_e-ue;if(He>=16){De=He>>4;for(var oe=1;oe<=De;++oe)te(ne);He&=15}J=32767+y[_e],te(B[(He<<4)+d[J]]),te(f[J]),_e++}return Ae!=63&&te(re),U}function q(P){P=Math.min(Math.max(P,1),100),a!=P&&(function(F){for(var U=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var B=o((U[H]*F+50)/100);B=Math.min(Math.max(B,1),255),s[L[H]]=B}for(var J=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],re=0;re<64;re++){var ne=o((J[re]*F+50)/100);ne=Math.min(Math.max(ne,1),255),l[L[re]]=ne}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,Ee=0;Ee<8;Ee++)for(var Ae=0;Ae<8;Ae++)u[be]=1/(s[L[be]]*ge[Ee]*ge[Ae]*8),h[be]=1/(l[L[be]]*ge[Ee]*ge[Ae]*8),be++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),a=P)}this.encode=function(P,F){F&&q(F),v=new Array,w=0,m=7,K(65496),K(65504),K(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),K(1),K(1),Q(0),Q(0),function(){K(65499),K(132),Q(0);for(var de=0;de<64;de++)Q(s[de]);Q(1);for(var Le=0;Le<64;Le++)Q(l[Le])}(),function(de,Le){K(65472),K(17),Q(8),K(Le),K(de),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(P.width,P.height),function(){K(65476),K(418),Q(0);for(var de=0;de<16;de++)Q(O[de+1]);for(var Le=0;Le<=11;Le++)Q(M[Le]);Q(16);for(var Me=0;Me<16;Me++)Q(T[Me+1]);for(var qe=0;qe<=161;qe++)Q(k[qe]);Q(1);for(var Ke=0;Ke<16;Ke++)Q(A[Ke+1]);for(var Ze=0;Ze<=11;Ze++)Q(R[Ze]);Q(17);for(var Ve=0;Ve<16;Ve++)Q(C[Ve+1]);for(var et=0;et<=161;et++)Q(V[et])}(),K(65498),K(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var U=0,H=0,B=0;w=0,m=7,this.encode.displayName="_encode_";for(var J,re,ne,ge,be,Ee,Ae,De,_e,ue=P.data,He=P.width,oe=P.height,se=4*He,ce=0;ce<oe;){for(J=0;J<se;){for(be=se*ce+J,Ae=-1,De=0,_e=0;_e<64;_e++)Ee=be+(De=_e>>3)*se+(Ae=4*(7&_e)),ce+De>=oe&&(Ee-=se*(ce+1+De-oe)),J+Ae>=se&&(Ee-=J+Ae-se+4),re=ue[Ee++],ne=ue[Ee++],ge=ue[Ee++],g[_e]=(I[re]+I[ne+256>>0]+I[ge+512>>0]>>16)-128,b[_e]=(I[re+768>>0]+I[ne+1024>>0]+I[ge+1280>>0]>>16)-128,S[_e]=(I[re+1280>>0]+I[ne+1536>>0]+I[ge+1792>>0]>>16)-128;U=W(g,u,U,e,n),H=W(b,h,H,r,i),B=W(S,h,B,r,i),J+=32}ce+=8}if(m>=0){var ve=[];ve[1]=m+1,ve[0]=(1<<m+1)-1,te(ve)}return K(65497),new Uint8Array(v)},t=t||50,function(){for(var P=String.fromCharCode,F=0;F<256;F++)E[F]=P(F)}(),e=Z(O,M),r=Z(A,R),n=Z(T,k),i=Z(C,V),function(){for(var P=1,F=2,U=1;U<=15;U++){for(var H=P;H<F;H++)d[32767+H]=U,f[32767+H]=[],f[32767+H][1]=U,f[32767+H][0]=H;for(var B=-(F-1);B<=-P;B++)d[32767+B]=U,f[32767+B]=[],f[32767+B][1]=U,f[32767+B][0]=F-1+B;P<<=1,F<<=1}}(),function(){for(var P=0;P<256;P++)I[P]=19595*P,I[P+256>>0]=38470*P,I[P+512>>0]=7471*P+32768,I[P+768>>0]=-11059*P,I[P+1024>>0]=-21709*P,I[P+1280>>0]=32768*P+8421375,I[P+1536>>0]=-27439*P,I[P+1792>>0]=-5329*P}(),q(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ai(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function T2(t){function e(O){if(!O)throw Error("assert :P")}function r(O,M,T){for(var k=0;4>k;k++)if(O[M+k]!=T.charCodeAt(k))return!0;return!1}function n(O,M,T,k,A){for(var R=0;R<A;R++)O[M+R]=T[k+R]}function i(O,M,T,k){for(var A=0;A<k;A++)O[M+A]=T}function a(O){return new Int32Array(O)}function o(O,M){for(var T=[],k=0;k<O;k++)T.push(new M);return T}function s(O,M){var T=[];return function k(A,R,C){for(var V=C[R],Z=0;Z<V&&(A.push(C.length>R+1?[]:new M),!(C.length<R+1));Z++)k(A[Z],R+1,C)}(T,0,O),T}var l=function(){var O=this;function M(p,_){for(var j=1<<_-1>>>0;p&j;)j>>>=1;return j?(p&j-1)+j:p}function T(p,_,j,D,z){e(!(D%j));do p[_+(D-=j)]=z;while(0<D)}function k(p,_,j,D,z){if(e(2328>=z),512>=z)var G=a(512);else if((G=a(z))==null)return 0;return function(Y,X,ee,ae,pe,Se){var ke,we,Te=X,Ne=1<<ee,me=a(16),ye=a(16);for(e(pe!=0),e(ae!=null),e(Y!=null),e(0<ee),we=0;we<pe;++we){if(15<ae[we])return 0;++me[ae[we]]}if(me[0]==pe)return 0;for(ye[1]=0,ke=1;15>ke;++ke){if(me[ke]>1<<ke)return 0;ye[ke+1]=ye[ke]+me[ke]}for(we=0;we<pe;++we)ke=ae[we],0<ae[we]&&(Se[ye[ke]++]=we);if(ye[15]==1)return(ae=new A).g=0,ae.value=Se[0],T(Y,Te,1,Ne,ae),Ne;var Oe,Ce=-1,Pe=Ne-1,Ge=0,Ue=1,at=1,ze=1<<ee;for(we=0,ke=1,pe=2;ke<=ee;++ke,pe<<=1){if(Ue+=at<<=1,0>(at-=me[ke]))return 0;for(;0<me[ke];--me[ke])(ae=new A).g=ke,ae.value=Se[we++],T(Y,Te+Ge,pe,ze,ae),Ge=M(Ge,ke)}for(ke=ee+1,pe=2;15>=ke;++ke,pe<<=1){if(Ue+=at<<=1,0>(at-=me[ke]))return 0;for(;0<me[ke];--me[ke]){if(ae=new A,(Ge&Pe)!=Ce){for(Te+=ze,Oe=1<<(Ce=ke)-ee;15>Ce&&!(0>=(Oe-=me[Ce]));)++Ce,Oe<<=1;Ne+=ze=1<<(Oe=Ce-ee),Y[X+(Ce=Ge&Pe)].g=Oe+ee,Y[X+Ce].value=Te-X-Ce}ae.g=ke-ee,ae.value=Se[we++],T(Y,Te+(Ge>>ee),pe,ze,ae),Ge=M(Ge,ke)}}return Ue!=2*ye[15]-1?0:Ne}(p,_,j,D,z,G)}function A(){this.value=this.g=0}function R(){this.value=this.g=0}function C(){this.G=o(5,A),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(qr,R)}function V(p,_,j,D){e(p!=null),e(_!=null),e(2147483648>D),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=_,p.pa=j,p.Jd=_,p.Yc=j+D,p.Zc=4<=D?j+D-4+1:j,J(p)}function Z(p,_){for(var j=0;0<_--;)j|=ne(p,128)<<_;return j}function te(p,_){var j=Z(p,_);return re(p)?-j:j}function Q(p,_,j,D){var z,G=0;for(e(p!=null),e(_!=null),e(4294967288>D),p.Sb=D,p.Ra=0,p.u=0,p.h=0,4<D&&(D=4),z=0;z<D;++z)G+=_[j+z]<<8*z;p.Ra=G,p.bb=D,p.oa=_,p.pa=j}function K(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<Ls-8>>>0,++p.bb,p.u-=8;U(p)&&(p.h=1,p.u=0)}function W(p,_){if(e(0<=_),!p.h&&_<=Os){var j=F(p)&js[_];return p.u+=_,K(p),j}return p.h=1,p.u=0}function q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function F(p){return p.Ra>>>(p.u&Ls-1)>>>0}function U(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>Ls}function H(p,_){p.u=_,p.h=U(p)}function B(p){p.u>=du&&(e(p.u>=du),K(p))}function J(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function re(p){return Z(p,1)}function ne(p,_){var j=p.Ca;0>p.b&&J(p);var D=p.b,z=j*_>>>8,G=(p.I>>>D>z)+0;for(G?(j-=z,p.I-=z+1<<D>>>0):j=z+1,D=j,z=0;256<=D;)z+=8,D>>=8;return D=7^z+kn[D],p.b-=D,p.Ca=(j<<D)-1,G}function ge(p,_,j){p[_+0]=j>>24&255,p[_+1]=j>>16&255,p[_+2]=j>>8&255,p[_+3]=j>>0&255}function be(p,_){return p[_+0]<<0|p[_+1]<<8}function Ee(p,_){return be(p,_)|p[_+2]<<16}function Ae(p,_){return be(p,_)|be(p,_+2)<<16}function De(p,_){var j=1<<_;return e(p!=null),e(0<_),p.X=a(j),p.X==null?0:(p.Mb=32-_,p.Xa=_,1)}function _e(p,_){e(p!=null),e(_!=null),e(p.Xa==_.Xa),n(_.X,0,p.X,0,1<<_.Xa)}function ue(){this.X=[],this.Xa=this.Mb=0}function He(p,_,j,D){e(j!=null),e(D!=null);var z=j[0],G=D[0];return z==0&&(z=(p*G+_/2)/_),G==0&&(G=(_*z+p/2)/p),0>=z||0>=G?0:(j[0]=z,D[0]=G,1)}function oe(p,_){return p+(1<<_)-1>>>_}function se(p,_){return((4278255360&p)+(4278255360&_)>>>0&4278255360)+((16711935&p)+(16711935&_)>>>0&16711935)>>>0}function ce(p,_){O[_]=function(j,D,z,G,Y,X,ee){var ae;for(ae=0;ae<Y;++ae){var pe=O[p](X[ee+ae-1],z,G+ae);X[ee+ae]=se(j[D+ae],pe)}}}function ve(){this.ud=this.hd=this.jd=0}function de(p,_){return((4278124286&(p^_))>>>1)+(p&_)>>>0}function Le(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function Me(p,_){return Le(p+(p-_+.5>>1))}function qe(p,_,j){return Math.abs(_-j)-Math.abs(p-j)}function Ke(p,_,j,D,z,G,Y){for(D=G[Y-1],j=0;j<z;++j)G[Y+j]=D=se(p[_+j],D)}function Ze(p,_,j,D,z){var G;for(G=0;G<j;++G){var Y=p[_+G],X=Y>>8&255,ee=16711935&(ee=(ee=16711935&Y)+((X<<16)+X));D[z+G]=(4278255360&Y)+ee>>>0}}function Ve(p,_){_.jd=p>>0&255,_.hd=p>>8&255,_.ud=p>>16&255}function et(p,_,j,D,z,G){var Y;for(Y=0;Y<D;++Y){var X=_[j+Y],ee=X>>>8,ae=X,pe=255&(pe=(pe=X>>>16)+((p.jd<<24>>24)*(ee<<24>>24)>>>5));ae=255&(ae=(ae=ae+((p.hd<<24>>24)*(ee<<24>>24)>>>5))+((p.ud<<24>>24)*(pe<<24>>24)>>>5)),z[G+Y]=(4278255360&X)+(pe<<16)+ae}}function $e(p,_,j,D,z){O[_]=function(G,Y,X,ee,ae,pe,Se,ke,we){for(ee=Se;ee<ke;++ee)for(Se=0;Se<we;++Se)ae[pe++]=z(X[D(G[Y++])])},O[p]=function(G,Y,X,ee,ae,pe,Se){var ke=8>>G.b,we=G.Ea,Te=G.K[0],Ne=G.w;if(8>ke)for(G=(1<<G.b)-1,Ne=(1<<ke)-1;Y<X;++Y){var me,ye=0;for(me=0;me<we;++me)me&G||(ye=D(ee[ae++])),pe[Se++]=z(Te[ye&Ne]),ye>>=ke}else O["VP8LMapColor"+j](ee,ae,Te,Ne,pe,Se,Y,X,we)}}function Fe(p,_,j,D,z){for(j=_+j;_<j;){var G=p[_++];D[z++]=G>>16&255,D[z++]=G>>8&255,D[z++]=G>>0&255}}function Bt(p,_,j,D,z){for(j=_+j;_<j;){var G=p[_++];D[z++]=G>>16&255,D[z++]=G>>8&255,D[z++]=G>>0&255,D[z++]=G>>24&255}}function ct(p,_,j,D,z){for(j=_+j;_<j;){var G=(Y=p[_++])>>16&240|Y>>12&15,Y=Y>>0&240|Y>>28&15;D[z++]=G,D[z++]=Y}}function $t(p,_,j,D,z){for(j=_+j;_<j;){var G=(Y=p[_++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;D[z++]=G,D[z++]=Y}}function gt(p,_,j,D,z){for(j=_+j;_<j;){var G=p[_++];D[z++]=G>>0&255,D[z++]=G>>8&255,D[z++]=G>>16&255}}function xt(p,_,j,D,z,G){if(G==0)for(j=_+j;_<j;)ge(D,((G=p[_++])[0]>>24|G[1]>>8&65280|G[2]<<8&16711680|G[3]<<24)>>>0),z+=32;else n(D,z,p,_,j)}function Br(p,_){O[_][0]=O[p+"0"],O[_][1]=O[p+"1"],O[_][2]=O[p+"2"],O[_][3]=O[p+"3"],O[_][4]=O[p+"4"],O[_][5]=O[p+"5"],O[_][6]=O[p+"6"],O[_][7]=O[p+"7"],O[_][8]=O[p+"8"],O[_][9]=O[p+"9"],O[_][10]=O[p+"10"],O[_][11]=O[p+"11"],O[_][12]=O[p+"12"],O[_][13]=O[p+"13"],O[_][14]=O[p+"0"],O[_][15]=O[p+"0"]}function vt(p){return p==_p||p==Sp||p==mf||p==kp}function ia(){this.eb=[],this.size=this.A=this.fb=0}function qt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Vr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ia,this.f.kb=new qt,this.sd=null}function wi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Rt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ut(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function Nt(p,_){var j=p.T,D=_.ba.f.RGBA,z=D.eb,G=D.fb+p.ka*D.A,Y=ui[_.ba.S],X=p.y,ee=p.O,ae=p.f,pe=p.N,Se=p.ea,ke=p.W,we=_.cc,Te=_.dc,Ne=_.Mc,me=_.Nc,ye=p.ka,Oe=p.ka+p.T,Ce=p.U,Pe=Ce+1>>1;for(ye==0?Y(X,ee,null,null,ae,pe,Se,ke,ae,pe,Se,ke,z,G,null,null,Ce):(Y(_.ec,_.fc,X,ee,we,Te,Ne,me,ae,pe,Se,ke,z,G-D.A,z,G,Ce),++j);ye+2<Oe;ye+=2)we=ae,Te=pe,Ne=Se,me=ke,pe+=p.Rc,ke+=p.Rc,G+=2*D.A,Y(X,(ee+=2*p.fa)-p.fa,X,ee,we,Te,Ne,me,ae,pe,Se,ke,z,G-D.A,z,G,Ce);return ee+=p.fa,p.j+Oe<p.o?(n(_.ec,_.fc,X,ee,Ce),n(_.cc,_.dc,ae,pe,Pe),n(_.Mc,_.Nc,Se,ke,Pe),j--):1&Oe||Y(X,ee,null,null,ae,pe,Se,ke,ae,pe,Se,ke,z,G+D.A,null,null,Ce),j}function Ht(p,_,j){var D=p.F,z=[p.J];if(D!=null){var G=p.U,Y=_.ba.S,X=Y==pf||Y==mf;_=_.ba.f.RGBA;var ee=[0],ae=p.ka;ee[0]=p.T,p.Kb&&(ae==0?--ee[0]:(--ae,z[0]-=p.width),p.j+p.ka+p.T==p.o&&(ee[0]=p.o-p.j-ae));var pe=_.eb;ae=_.fb+ae*_.A,p=Vt(D,z[0],p.width,G,ee,pe,ae+(X?0:3),_.A),e(j==ee),p&&vt(Y)&&si(pe,ae,X,G,ee,_.A)}return 0}function Zt(p){var _=p.ma,j=_.ba.S,D=11>j,z=j==df||j==hf||j==pf||j==xp||j==12||vt(j);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!cu(_.Oa,p,z?11:12))return 0;if(z&&vt(j)&&Re(),p.da)alert("todo:use_scaling");else{if(D){if(_.Ib=ut,p.Kb){if(j=p.U+1>>1,_.memory=a(p.U+2*j),_.memory==null)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+p.U,_.Mc=_.cc,_.Nc=_.dc+j,_.Ib=Nt,Re()}}else alert("todo:EmitYUV");z&&(_.Jb=Ht,D&&xe())}if(D&&!ev){for(p=0;256>p;++p)R4[p]=89858*(p-128)+vf>>gf,M4[p]=-22014*(p-128)+vf,D4[p]=-45773*(p-128),I4[p]=113618*(p-128)+vf>>gf;for(p=wu;p<Ap;++p)_=76283*(p-16)+vf>>gf,F4[p-wu]=Un(_,255),B4[p-wu]=Un(_+8>>4,15);ev=1}return 1}function ni(p){var _=p.ma,j=p.U,D=p.T;return e(!(1&p.ka)),0>=j||0>=D?0:(j=_.Ib(p,_),_.Jb!=null&&_.Jb(p,_,j),_.Dc+=j,1)}function Dn(p){p.ma.memory=null}function it(p,_,j,D){return W(p,8)!=47?0:(_[0]=W(p,14)+1,j[0]=W(p,14)+1,D[0]=W(p,1),W(p,3)!=0?0:!p.h)}function wn(p,_){if(4>p)return p+1;var j=p-2>>1;return(2+(1&p)<<j)+W(_,j)+1}function Mn(p,_){return 120<_?_-120:1<=(j=((j=b4[_-1])>>4)*p+(8-(15&j)))?j:1;var j}function Gr(p,_,j){var D=F(j),z=p[_+=255&D].g-8;return 0<z&&(H(j,j.u+8),D=F(j),_+=p[_].value,_+=D&(1<<z)-1),H(j,j.u+p[_].g),p[_].value}function At(p,_,j){return j.g+=p.g,j.value+=p.value<<_>>>0,e(8>=j.g),p.g}function It(p,_,j){var D=p.xc;return e((_=D==0?0:p.vc[p.md*(j>>D)+(_>>D)])<p.Wb),p.Ya[_]}function Kr(p,_,j,D){var z=p.ab,G=p.c*_,Y=p.C;_=Y+_;var X=j,ee=D;for(D=p.Ta,j=p.Ua;0<z--;){var ae=p.gc[z],pe=Y,Se=_,ke=X,we=ee,Te=(ee=D,X=j,ae.Ea);switch(e(pe<Se),e(Se<=ae.nc),ae.hc){case 2:af(ke,we,(Se-pe)*Te,ee,X);break;case 0:var Ne=pe,me=Se,ye=ee,Oe=X,Ce=(ze=ae).Ea;Ne==0&&(wp(ke,we,null,null,1,ye,Oe),Ke(ke,we+1,0,0,Ce-1,ye,Oe+1),we+=Ce,Oe+=Ce,++Ne);for(var Pe=1<<ze.b,Ge=Pe-1,Ue=oe(Ce,ze.b),at=ze.K,ze=ze.w+(Ne>>ze.b)*Ue;Ne<me;){var Et=at,Ot=ze,St=1;for(hu(ke,we,ye,Oe-Ce,1,ye,Oe);St<Ce;){var bt=(St&~Ge)+Pe;bt>Ce&&(bt=Ce),(0,Ba[Et[Ot++]>>8&15])(ke,we+ +St,ye,Oe+St-Ce,bt-St,ye,Oe+St),St=bt}we+=Ce,Oe+=Ce,++Ne&Ge||(ze+=Ue)}Se!=ae.nc&&n(ee,X-Te,ee,X+(Se-pe-1)*Te,Te);break;case 1:for(Te=ke,me=we,Ce=(ke=ae.Ea)-(Oe=ke&~(ye=(we=1<<ae.b)-1)),Ne=oe(ke,ae.b),Pe=ae.K,ae=ae.w+(pe>>ae.b)*Ne;pe<Se;){for(Ge=Pe,Ue=ae,at=new ve,ze=me+Oe,Et=me+ke;me<ze;)Ve(Ge[Ue++],at),Po(at,Te,me,we,ee,X),me+=we,X+=we;me<Et&&(Ve(Ge[Ue++],at),Po(at,Te,me,Ce,ee,X),me+=Ce,X+=Ce),++pe&ye||(ae+=Ne)}break;case 3:if(ke==ee&&we==X&&0<ae.b){for(me=ee,ke=Te=X+(Se-pe)*Te-(Oe=(Se-pe)*oe(ae.Ea,ae.b)),we=ee,ye=X,Ne=[],Oe=(Ce=Oe)-1;0<=Oe;--Oe)Ne[Oe]=we[ye+Oe];for(Oe=Ce-1;0<=Oe;--Oe)me[ke+Oe]=Ne[Oe];ii(ae,pe,Se,ee,Te,ee,X)}else ii(ae,pe,Se,ke,we,ee,X)}X=D,ee=j}ee!=j&&n(D,j,X,ee,G)}function aa(p,_){var j=p.V,D=p.Ba+p.c*p.C,z=_-p.C;if(e(_<=p.l.o),e(16>=z),0<z){var G=p.l,Y=p.Ta,X=p.Ua,ee=G.width;if(Kr(p,z,j,D),z=X=[X],e((j=p.C)<(D=_)),e(G.v<G.va),D>G.o&&(D=G.o),j<G.j){var ae=G.j-j;j=G.j,z[0]+=ae*ee}if(j>=D?j=0:(z[0]+=4*G.v,G.ka=j-G.j,G.U=G.va-G.v,G.T=D-j,j=1),j){if(X=X[0],11>(j=p.ca).S){var pe=j.f.RGBA,Se=(D=j.S,z=G.U,G=G.T,ae=pe.eb,pe.A),ke=G;for(pe=pe.fb+p.Ma*pe.A;0<ke--;){var we=Y,Te=X,Ne=z,me=ae,ye=pe;switch(D){case ff:Nn(we,Te,Ne,me,ye);break;case df:ln(we,Te,Ne,me,ye);break;case _p:ln(we,Te,Ne,me,ye),si(me,ye,0,Ne,1,0);break;case W1:fa(we,Te,Ne,me,ye);break;case hf:xt(we,Te,Ne,me,ye,1);break;case Sp:xt(we,Te,Ne,me,ye,1),si(me,ye,0,Ne,1,0);break;case pf:xt(we,Te,Ne,me,ye,0);break;case mf:xt(we,Te,Ne,me,ye,0),si(me,ye,1,Ne,1,0);break;case xp:qa(we,Te,Ne,me,ye);break;case kp:qa(we,Te,Ne,me,ye),Wt(me,ye,Ne,1,0);break;case V1:ca(we,Te,Ne,me,ye);break;default:e(0)}X+=ee,pe+=Se}p.Ma+=G}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=j.height)}}p.C=_,e(p.C<=p.i)}function Fn(p){var _;if(0<p.ua)return 0;for(_=0;_<p.Wb;++_){var j=p.Ya[_].G,D=p.Ya[_].H;if(0<j[1][D[1]+0].g||0<j[2][D[2]+0].g||0<j[3][D[3]+0].g)return 0}return 1}function bn(p,_,j,D,z,G){if(p.Z!=0){var Y=p.qd,X=p.rd;for(e(Ha[p.Z]!=null);_<j;++_)Ha[p.Z](Y,X,D,z,D,z,G),Y=D,X=z,z+=G;p.qd=Y,p.rd=X}}function dr(p,_){var j=p.l.ma,D=j.Z==0||j.Z==1?p.l.j:p.C;if(D=p.C<D?D:p.C,e(_<=p.l.o),_>D){var z=p.l.width,G=j.ca,Y=j.tb+z*D,X=p.V,ee=p.Ba+p.c*D,ae=p.gc;e(p.ab==1),e(ae[0].hc==3),of(ae[0],D,_,X,ee,G,Y),bn(j,D,_,G,Y,z)}p.C=p.Ma=_}function xn(p,_,j,D,z,G,Y){var X=p.$/D,ee=p.$%D,ae=p.m,pe=p.s,Se=j+p.$,ke=Se;z=j+D*z;var we=j+D*G,Te=280+pe.ua,Ne=p.Pb?X:16777216,me=0<pe.ua?pe.Wa:null,ye=pe.wc,Oe=Se<we?It(pe,ee,X):null;e(p.C<G),e(we<=z);var Ce=!1;e:for(;;){for(;Ce||Se<we;){var Pe=0;if(X>=Ne){var Ge=Se-j;e((Ne=p).Pb),Ne.wd=Ne.m,Ne.xd=Ge,0<Ne.s.ua&&_e(Ne.s.Wa,Ne.s.vb),Ne=X+_4}if(ee&ye||(Oe=It(pe,ee,X)),e(Oe!=null),Oe.Qb&&(_[Se]=Oe.qb,Ce=!0),!Ce)if(B(ae),Oe.jc){Pe=ae,Ge=_;var Ue=Se,at=Oe.pd[F(Pe)&qr-1];e(Oe.jc),256>at.g?(H(Pe,Pe.u+at.g),Ge[Ue]=at.value,Pe=0):(H(Pe,Pe.u+at.g-256),e(256<=at.value),Pe=at.value),Pe==0&&(Ce=!0)}else Pe=Gr(Oe.G[0],Oe.H[0],ae);if(ae.h)break;if(Ce||256>Pe){if(!Ce)if(Oe.nd)_[Se]=(Oe.qb|Pe<<8)>>>0;else{if(B(ae),Ce=Gr(Oe.G[1],Oe.H[1],ae),B(ae),Ge=Gr(Oe.G[2],Oe.H[2],ae),Ue=Gr(Oe.G[3],Oe.H[3],ae),ae.h)break;_[Se]=(Ue<<24|Ce<<16|Pe<<8|Ge)>>>0}if(Ce=!1,++Se,++ee>=D&&(ee=0,++X,Y!=null&&X<=G&&!(X%16)&&Y(p,X),me!=null))for(;ke<Se;)Pe=_[ke++],me.X[(506832829*Pe&4294967295)>>>me.Mb]=Pe}else if(280>Pe){if(Pe=wn(Pe-256,ae),Ge=Gr(Oe.G[4],Oe.H[4],ae),B(ae),Ge=Mn(D,Ge=wn(Ge,ae)),ae.h)break;if(Se-j<Ge||z-Se<Pe)break e;for(Ue=0;Ue<Pe;++Ue)_[Se+Ue]=_[Se+Ue-Ge];for(Se+=Pe,ee+=Pe;ee>=D;)ee-=D,++X,Y!=null&&X<=G&&!(X%16)&&Y(p,X);if(e(Se<=z),ee&ye&&(Oe=It(pe,ee,X)),me!=null)for(;ke<Se;)Pe=_[ke++],me.X[(506832829*Pe&4294967295)>>>me.Mb]=Pe}else{if(!(Pe<Te))break e;for(Ce=Pe-280,e(me!=null);ke<Se;)Pe=_[ke++],me.X[(506832829*Pe&4294967295)>>>me.Mb]=Pe;Pe=Se,e(!(Ce>>>(Ge=me).Xa)),_[Pe]=Ge.X[Ce],Ce=!0}Ce||e(ae.h==U(ae))}if(p.Pb&&ae.h&&Se<z)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&_e(p.s.vb,p.s.Wa);else{if(ae.h)break e;Y!=null&&Y(p,X>G?G:X),p.a=0,p.$=Se-j}return 1}return p.a=3,0}function Bn(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var _=p.Wa;_!=null&&(_.X=null),p.vb=null,e(p!=null)}function sn(){var p=new yp;return p==null?null:(p.a=0,p.xb=Y1,Br("Predictor","VP8LPredictors"),Br("Predictor","VP8LPredictors_C"),Br("PredictorAdd","VP8LPredictorsAdd"),Br("PredictorAdd","VP8LPredictorsAdd_C"),af=Ze,Po=et,Nn=Fe,ln=Bt,qa=ct,ca=$t,fa=gt,O.VP8LMapColor32b=Ps,O.VP8LMapColor8b=sf,p)}function qn(p,_,j,D,z){var G=1,Y=[p],X=[_],ee=D.m,ae=D.s,pe=null,Se=0;e:for(;;){if(j)for(;G&&W(ee,1);){var ke=Y,we=X,Te=D,Ne=1,me=Te.m,ye=Te.gc[Te.ab],Oe=W(me,2);if(Te.Oc&1<<Oe)G=0;else{switch(Te.Oc|=1<<Oe,ye.hc=Oe,ye.Ea=ke[0],ye.nc=we[0],ye.K=[null],++Te.ab,e(4>=Te.ab),Oe){case 0:case 1:ye.b=W(me,3)+2,Ne=qn(oe(ye.Ea,ye.b),oe(ye.nc,ye.b),0,Te,ye.K),ye.K=ye.K[0];break;case 3:var Ce,Pe=W(me,8)+1,Ge=16<Pe?0:4<Pe?1:2<Pe?2:3;if(ke[0]=oe(ye.Ea,Ge),ye.b=Ge,Ce=Ne=qn(Pe,1,0,Te,ye.K)){var Ue,at=Pe,ze=ye,Et=1<<(8>>ze.b),Ot=a(Et);if(Ot==null)Ce=0;else{var St=ze.K[0],bt=ze.w;for(Ot[0]=ze.K[0][0],Ue=1;Ue<1*at;++Ue)Ot[Ue]=se(St[bt+Ue],Ot[Ue-1]);for(;Ue<4*Et;++Ue)Ot[Ue]=0;ze.K[0]=null,ze.K[0]=Ot,Ce=1}}Ne=Ce;break;case 2:break;default:e(0)}G=Ne}}if(Y=Y[0],X=X[0],G&&W(ee,1)&&!(G=1<=(Se=W(ee,4))&&11>=Se)){D.a=3;break e}var Ut;if(Ut=G)t:{var Dt,mt,kr,En=D,Nr=Y,An=X,Lt=Se,$n=j,Hn=En.m,Rr=En.s,Ur=[null],cn=1,ci=0,Gi=x4[Lt];r:for(;;){if($n&&W(Hn,1)){var Ir=W(Hn,3)+2,ma=oe(Nr,Ir),Do=oe(An,Ir),Ds=ma*Do;if(!qn(ma,Do,0,En,Ur))break r;for(Ur=Ur[0],Rr.xc=Ir,Dt=0;Dt<Ds;++Dt){var Wa=Ur[Dt]>>8&65535;Ur[Dt]=Wa,Wa>=cn&&(cn=Wa+1)}}if(Hn.h)break r;for(mt=0;5>mt;++mt){var ur=G1[mt];!mt&&0<Lt&&(ur+=1<<Lt),ci<ur&&(ci=ur)}var jp=o(cn*Gi,A),nv=cn,iv=o(nv,C);if(iv==null)var wf=null;else e(65536>=nv),wf=iv;var bu=a(ci);if(wf==null||bu==null||jp==null){En.a=1;break r}var bf=jp;for(Dt=kr=0;Dt<cn;++Dt){var ki=wf[Dt],Ms=ki.G,Fs=ki.H,av=0,xf=1,ov=0;for(mt=0;5>mt;++mt){ur=G1[mt],Ms[mt]=bf,Fs[mt]=kr,!mt&&0<Lt&&(ur+=1<<Lt);i:{var _f,Op=ur,Sf=En,xu=bu,z4=bf,$4=kr,Lp=0,Va=Sf.m,H4=W(Va,1);if(i(xu,0,0,Op),H4){var W4=W(Va,1)+1,V4=W(Va,1),sv=W(Va,V4==0?1:8);xu[sv]=1,W4==2&&(xu[sv=W(Va,8)]=1);var kf=1}else{var lv=a(19),uv=W(Va,4)+4;if(19<uv){Sf.a=3;var Nf=0;break i}for(_f=0;_f<uv;++_f)lv[w4[_f]]=W(Va,3);var Pp=void 0,_u=void 0,cv=Sf,G4=lv,Ef=Op,fv=xu,Tp=0,Ga=cv.m,dv=8,hv=o(128,A);n:for(;k(hv,0,7,G4,19);){if(W(Ga,1)){var K4=2+2*W(Ga,3);if((Pp=2+W(Ga,K4))>Ef)break n}else Pp=Ef;for(_u=0;_u<Ef&&Pp--;){B(Ga);var pv=hv[0+(127&F(Ga))];H(Ga,Ga.u+pv.g);var Bs=pv.value;if(16>Bs)fv[_u++]=Bs,Bs!=0&&(dv=Bs);else{var Y4=Bs==16,mv=Bs-16,J4=v4[mv],gv=W(Ga,g4[mv])+J4;if(_u+gv>Ef)break n;for(var X4=Y4?dv:0;0<gv--;)fv[_u++]=X4}}Tp=1;break n}Tp||(cv.a=3),kf=Tp}(kf=kf&&!Va.h)&&(Lp=k(z4,$4,8,xu,Op)),kf&&Lp!=0?Nf=Lp:(Sf.a=3,Nf=0)}if(Nf==0)break r;if(xf&&y4[mt]==1&&(xf=bf[kr].g==0),av+=bf[kr].g,kr+=Nf,3>=mt){var Su,Cp=bu[0];for(Su=1;Su<ur;++Su)bu[Su]>Cp&&(Cp=bu[Su]);ov+=Cp}}if(ki.nd=xf,ki.Qb=0,xf&&(ki.qb=(Ms[3][Fs[3]+0].value<<24|Ms[1][Fs[1]+0].value<<16|Ms[2][Fs[2]+0].value)>>>0,av==0&&256>Ms[0][Fs[0]+0].value&&(ki.Qb=1,ki.qb+=Ms[0][Fs[0]+0].value<<8)),ki.jc=!ki.Qb&&6>ov,ki.jc){var Af,ga=ki;for(Af=0;Af<qr;++Af){var Ka=Af,Ya=ga.pd[Ka],jf=ga.G[0][ga.H[0]+Ka];256<=jf.value?(Ya.g=jf.g+256,Ya.value=jf.value):(Ya.g=0,Ya.value=0,Ka>>=At(jf,8,Ya),Ka>>=At(ga.G[1][ga.H[1]+Ka],16,Ya),Ka>>=At(ga.G[2][ga.H[2]+Ka],0,Ya),At(ga.G[3][ga.H[3]+Ka],24,Ya))}}}Rr.vc=Ur,Rr.Wb=cn,Rr.Ya=wf,Rr.yc=jp,Ut=1;break t}Ut=0}if(!(G=Ut)){D.a=3;break e}if(0<Se){if(ae.ua=1<<Se,!De(ae.Wa,Se)){D.a=1,G=0;break e}}else ae.ua=0;var Rp=D,vv=Y,Q4=X,Ip=Rp.s,Dp=Ip.xc;if(Rp.c=vv,Rp.i=Q4,Ip.md=oe(vv,Dp),Ip.wc=Dp==0?-1:(1<<Dp)-1,j){D.xb=O4;break e}if((pe=a(Y*X))==null){D.a=1,G=0;break e}G=(G=xn(D,pe,0,Y,X,X,null))&&!ee.h;break e}return G?(z!=null?z[0]=pe:(e(pe==null),e(j)),D.$=0,j||Bn(ae)):Bn(ae),G}function oa(p,_){var j=p.c*p.i,D=j+_+16*_;return e(p.c<=_),p.V=a(D),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+j+_,1)}function tt(p,_){var j=p.C,D=_-j,z=p.V,G=p.Ba+p.c*j;for(e(_<=p.l.o);0<D;){var Y=16<D?16:D,X=p.l.ma,ee=p.l.width,ae=ee*Y,pe=X.ca,Se=X.tb+ee*j,ke=p.Ta,we=p.Ua;Kr(p,Y,z,G),vr(ke,we,pe,Se,ae),bn(X,j,j+Y,pe,Se,ee),D-=Y,z+=Y*p.c,j+=Y}e(j==_),p.C=p.Ma=_}function he(){this.ub=this.yd=this.td=this.Rb=0}function Ie(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ye(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function jt(){this.Yb=function(){var p=[];return function _(j,D,z){for(var G=z[D],Y=0;Y<G&&(j.push(z.length>D+1?[]:0),!(z.length<D+1));Y++)_(j[Y],D+1,z)}(p,0,[3,11]),p}()}function _r(){this.jb=a(3),this.Wc=s([4,8],jt),this.Xc=s([4,17],jt)}function er(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function hr(){this.ld=this.La=this.dd=this.tc=0}function _n(){this.Na=this.la=0}function $i(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function sa(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function pr(){this.uc=this.M=this.Nb=0,this.wa=Array(new hr),this.Y=0,this.ya=Array(new sa),this.aa=0,this.l=new vs}function Eo(){this.y=a(16),this.f=a(8),this.ea=a(8)}function gs(){this.cb=this.a=0,this.sc="",this.m=new q,this.Od=new he,this.Kc=new Ie,this.ed=new er,this.Qa=new Ye,this.Ic=this.$c=this.Aa=0,this.D=new pr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,q),this.ia=0,this.pb=o(4,$i),this.Pa=new _r,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Eo),this.Hd=0,this.rb=Array(new _n),this.sb=0,this.wa=Array(new hr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new sa),this.L=this.aa=0,this.gd=s([4,2],hr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function vs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ep(){var p=new gs;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,yu||(yu=$c)),p}function mr(p,_,j){return p.a==0&&(p.a=_,p.sc=j,p.cb=0),0}function Uc(p,_,j){return 3<=j&&p[_+0]==157&&p[_+1]==1&&p[_+2]==42}function zc(p,_){if(p==null)return 0;if(p.a=0,p.sc="OK",_==null)return mr(p,2,"null VP8Io passed to VP8GetHeaders()");var j=_.data,D=_.w,z=_.ha;if(4>z)return mr(p,7,"Truncated header.");var G=j[D+0]|j[D+1]<<8|j[D+2]<<16,Y=p.Od;if(Y.Rb=!(1&G),Y.td=G>>1&7,Y.yd=G>>4&1,Y.ub=G>>5,3<Y.td)return mr(p,3,"Incorrect keyframe parameters.");if(!Y.yd)return mr(p,4,"Frame not displayable.");D+=3,z-=3;var X=p.Kc;if(Y.Rb){if(7>z)return mr(p,7,"cannot parse picture header");if(!Uc(j,D,z))return mr(p,3,"Bad code word");X.c=16383&(j[D+4]<<8|j[D+3]),X.Td=j[D+4]>>6,X.i=16383&(j[D+6]<<8|j[D+5]),X.Ud=j[D+6]>>6,D+=7,z-=7,p.za=X.c+15>>4,p.Ub=X.i+15>>4,_.width=X.c,_.height=X.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,i((G=p.Pa).jb,0,255,G.jb.length),e((G=p.Qa)!=null),G.Cb=0,G.Bb=0,G.Fb=1,i(G.Zb,0,0,G.Zb.length),i(G.Lb,0,0,G.Lb)}if(Y.ub>z)return mr(p,7,"bad partition length");V(G=p.m,j,D,Y.ub),D+=Y.ub,z-=Y.ub,Y.Rb&&(X.Ld=re(G),X.Kd=re(G)),X=p.Qa;var ee,ae=p.Pa;if(e(G!=null),e(X!=null),X.Cb=re(G),X.Cb){if(X.Bb=re(G),re(G)){for(X.Fb=re(G),ee=0;4>ee;++ee)X.Zb[ee]=re(G)?te(G,7):0;for(ee=0;4>ee;++ee)X.Lb[ee]=re(G)?te(G,6):0}if(X.Bb)for(ee=0;3>ee;++ee)ae.jb[ee]=re(G)?Z(G,8):255}else X.Bb=0;if(G.Ka)return mr(p,3,"cannot parse segment header");if((X=p.ed).zd=re(G),X.Tb=Z(G,6),X.wb=Z(G,3),X.Pc=re(G),X.Pc&&re(G)){for(ae=0;4>ae;++ae)re(G)&&(X.vd[ae]=te(G,6));for(ae=0;4>ae;++ae)re(G)&&(X.od[ae]=te(G,6))}if(p.L=X.Tb==0?0:X.zd?1:2,G.Ka)return mr(p,3,"cannot parse filter header");var pe=z;if(z=ee=D,D=ee+pe,X=pe,p.Xb=(1<<Z(p.m,2))-1,pe<3*(ae=p.Xb))j=7;else{for(ee+=3*ae,X-=3*ae,pe=0;pe<ae;++pe){var Se=j[z+0]|j[z+1]<<8|j[z+2]<<16;Se>X&&(Se=X),V(p.Jc[+pe],j,ee,Se),ee+=Se,X-=Se,z+=3}V(p.Jc[+ae],j,ee,X),j=ee<D?0:5}if(j!=0)return mr(p,j,"cannot parse partitions");for(j=Z(ee=p.m,7),z=re(ee)?te(ee,4):0,D=re(ee)?te(ee,4):0,X=re(ee)?te(ee,4):0,ae=re(ee)?te(ee,4):0,ee=re(ee)?te(ee,4):0,pe=p.Qa,Se=0;4>Se;++Se){if(pe.Cb){var ke=pe.Zb[Se];pe.Fb||(ke+=j)}else{if(0<Se){p.pb[Se]=p.pb[0];continue}ke=j}var we=p.pb[Se];we.Sc[0]=Np[Un(ke+z,127)],we.Sc[1]=Ep[Un(ke+0,127)],we.Eb[0]=2*Np[Un(ke+D,127)],we.Eb[1]=101581*Ep[Un(ke+X,127)]>>16,8>we.Eb[1]&&(we.Eb[1]=8),we.Qc[0]=Np[Un(ke+ae,117)],we.Qc[1]=Ep[Un(ke+ee,127)],we.lc=ke+ee}if(!Y.Rb)return mr(p,4,"Not a key frame.");for(re(G),Y=p.Pa,j=0;4>j;++j){for(z=0;8>z;++z)for(D=0;3>D;++D)for(X=0;11>X;++X)ae=ne(G,A4[j][z][D][X])?Z(G,8):N4[j][z][D][X],Y.Wc[j][z].Yb[D][X]=ae;for(z=0;17>z;++z)Y.Xc[j][z]=Y.Wc[j][j4[z]]}return p.kc=re(G),p.kc&&(p.Bd=Z(G,8)),p.cb=1}function $c(p,_,j,D,z,G,Y){var X=_[z].Yb[j];for(j=0;16>z;++z){if(!ne(p,X[j+0]))return z;for(;!ne(p,X[j+1]);)if(X=_[++z].Yb[0],j=0,z==16)return 16;var ee=_[z+1].Yb;if(ne(p,X[j+2])){var ae=p,pe=0;if(ne(ae,(ke=X)[(Se=j)+3]))if(ne(ae,ke[Se+6])){for(X=0,Se=2*(pe=ne(ae,ke[Se+8]))+(ke=ne(ae,ke[Se+9+pe])),pe=0,ke=S4[Se];ke[X];++X)pe+=pe+ne(ae,ke[X]);pe+=3+(8<<Se)}else ne(ae,ke[Se+7])?(pe=7+2*ne(ae,165),pe+=ne(ae,145)):pe=5+ne(ae,159);else pe=ne(ae,ke[Se+4])?3+ne(ae,ke[Se+5]):2;X=ee[2]}else pe=1,X=ee[1];ee=Y+k4[z],0>(ae=p).b&&J(ae);var Se,ke=ae.b,we=(Se=ae.Ca>>1)-(ae.I>>ke)>>31;--ae.b,ae.Ca+=we,ae.Ca|=1,ae.I-=(Se+1&we)<<ke,G[ee]=((pe^we)-we)*D[(0<z)+0]}return 16}function Yl(p){var _=p.rb[p.sb-1];_.la=0,_.Na=0,i(p.zc,0,0,p.zc.length),p.ja=0}function tp(p,_){if(p==null)return 0;if(_==null)return mr(p,2,"NULL VP8Io parameter in VP8Decode().");if(!p.cb&&!zc(p,_))return 0;if(e(p.cb),_.ac==null||_.ac(_)){_.ob&&(p.L=0);var j=yf[p.L];if(p.L==2?(p.yb=0,p.zb=0):(p.yb=_.v-j>>4,p.zb=_.j-j>>4,0>p.yb&&(p.yb=0),0>p.zb&&(p.zb=0)),p.Va=_.o+15+j>>4,p.Hb=_.va+15+j>>4,p.Hb>p.za&&(p.Hb=p.za),p.Va>p.Ub&&(p.Va=p.Ub),0<p.L){var D=p.ed;for(j=0;4>j;++j){var z;if(p.Qa.Cb){var G=p.Qa.Lb[j];p.Qa.Fb||(G+=D.Tb)}else G=D.Tb;for(z=0;1>=z;++z){var Y=p.gd[j][z],X=G;if(D.Pc&&(X+=D.vd[0],z&&(X+=D.od[0])),0<(X=0>X?0:63<X?63:X)){var ee=X;0<D.wb&&(ee=4<D.wb?ee>>2:ee>>1)>9-D.wb&&(ee=9-D.wb),1>ee&&(ee=1),Y.dd=ee,Y.tc=2*X+ee,Y.ld=40<=X?2:15<=X?1:0}else Y.tc=0;Y.La=z}}}j=0}else mr(p,6,"Frame setup failed"),j=p.a;if(j=j==0){if(j){p.$c=0,0<p.Aa||(p.Ic=U4);e:{j=p.Ic,D=4*(ee=p.za);var ae=32*ee,pe=ee+1,Se=0<p.L?ee*(0<p.Aa?2:1):0,ke=(p.Aa==2?2:1)*ee;if((Y=D+832+(z=3*(16*j+yf[p.L])/2*ae)+(G=p.Fa!=null&&0<p.Fa.length?p.Kc.c*p.Kc.i:0))!=Y)j=0;else{if(Y>p.Vb){if(p.Vb=0,p.Ec=a(Y),p.Fc=0,p.Ec==null){j=mr(p,1,"no memory during frame initialization.");break e}p.Vb=Y}Y=p.Ec,X=p.Fc,p.Ac=Y,p.Bc=X,X+=D,p.Gd=o(ae,Eo),p.Hd=0,p.rb=o(pe+1,_n),p.sb=1,p.wa=Se?o(Se,hr):null,p.Y=0,p.D.Nb=0,p.D.wa=p.wa,p.D.Y=p.Y,0<p.Aa&&(p.D.Y+=ee),e(!0),p.oc=Y,p.pc=X,X+=832,p.ya=o(ke,sa),p.aa=0,p.D.ya=p.ya,p.D.aa=p.aa,p.Aa==2&&(p.D.aa+=ee),p.R=16*ee,p.B=8*ee,ee=(ae=yf[p.L])*p.R,ae=ae/2*p.B,p.sa=Y,p.ta=X+ee,p.qa=p.sa,p.ra=p.ta+16*j*p.R+ae,p.Ha=p.qa,p.Ia=p.ra+8*j*p.B+ae,p.$c=0,X+=z,p.mb=G?Y:null,p.nb=G?X:null,e(X+G<=p.Fc+p.Vb),Yl(p),i(p.Ac,p.Bc,0,D),j=1}}if(j){if(_.ka=0,_.y=p.sa,_.O=p.ta,_.f=p.qa,_.N=p.ra,_.ea=p.Ha,_.Vd=p.Ia,_.fa=p.R,_.Rc=p.B,_.F=null,_.J=0,!uf){for(j=-255;255>=j;++j)Or[255+j]=0>j?-j:j;for(j=-1020;1020>=j;++j)ha[1020+j]=-128>j?-128:127<j?127:j;for(j=-112;112>=j;++j)vu[112+j]=-16>j?-16:15<j?15:j;for(j=-255;510>=j;++j)Is[255+j]=0>j?0:255<j?255:j;uf=1}Ts=ip,da=rp,pu=Wc,un=np,ai=Vc,gr=Hc,Cs=tu,lf=Oo,mu=vp,To=ru,Co=gp,Ua=Ss,Ro=nu,Rs=tf,Io=ef,za=Wi,gu=ua,oi=mp,Si[0]=Hi,Si[1]=ap,Si[2]=up,Si[3]=cp,Si[4]=Yc,Si[5]=xs,Si[6]=Jc,Si[7]=Ql,Si[8]=dp,Si[9]=fp,$a[0]=Gc,$a[1]=sp,$a[2]=la,$a[3]=ws,$a[4]=Yr,$a[5]=lp,$a[6]=Kc,pa[0]=Da,pa[1]=op,pa[2]=hp,pa[3]=Zl,pa[4]=jo,pa[5]=pp,pa[6]=eu,j=1}else j=0}j&&(j=function(we,Te){for(we.M=0;we.M<we.Va;++we.M){var Ne,me=we.Jc[we.M&we.Xb],ye=we.m,Oe=we;for(Ne=0;Ne<Oe.za;++Ne){var Ce=ye,Pe=Oe,Ge=Pe.Ac,Ue=Pe.Bc+4*Ne,at=Pe.zc,ze=Pe.ya[Pe.aa+Ne];if(Pe.Qa.Bb?ze.$b=ne(Ce,Pe.Pa.jb[0])?2+ne(Ce,Pe.Pa.jb[2]):ne(Ce,Pe.Pa.jb[1]):ze.$b=0,Pe.kc&&(ze.Ad=ne(Ce,Pe.Bd)),ze.Za=!ne(Ce,145)+0,ze.Za){var Et=ze.Ob,Ot=0;for(Pe=0;4>Pe;++Pe){var St,bt=at[0+Pe];for(St=0;4>St;++St){bt=E4[Ge[Ue+St]][bt];for(var Ut=K1[ne(Ce,bt[0])];0<Ut;)Ut=K1[2*Ut+ne(Ce,bt[Ut])];bt=-Ut,Ge[Ue+St]=bt}n(Et,Ot,Ge,Ue,4),Ot+=4,at[0+Pe]=bt}}else bt=ne(Ce,156)?ne(Ce,128)?1:3:ne(Ce,163)?2:0,ze.Ob[0]=bt,i(Ge,Ue,bt,4),i(at,0,bt,4);ze.Dd=ne(Ce,142)?ne(Ce,114)?ne(Ce,183)?1:3:2:0}if(Oe.m.Ka)return mr(we,7,"Premature end-of-partition0 encountered.");for(;we.ja<we.za;++we.ja){if(Oe=me,Ce=(ye=we).rb[ye.sb-1],Ge=ye.rb[ye.sb+ye.ja],Ne=ye.ya[ye.aa+ye.ja],Ue=ye.kc?Ne.Ad:0)Ce.la=Ge.la=0,Ne.Za||(Ce.Na=Ge.Na=0),Ne.Hc=0,Ne.Gc=0,Ne.ia=0;else{var Dt,mt;if(Ce=Ge,Ge=Oe,Ue=ye.Pa.Xc,at=ye.ya[ye.aa+ye.ja],ze=ye.pb[at.$b],Pe=at.ad,Et=0,Ot=ye.rb[ye.sb-1],bt=St=0,i(Pe,Et,0,384),at.Za)var kr=0,En=Ue[3];else{Ut=a(16);var Nr=Ce.Na+Ot.Na;if(Nr=yu(Ge,Ue[1],Nr,ze.Eb,0,Ut,0),Ce.Na=Ot.Na=(0<Nr)+0,1<Nr)Ts(Ut,0,Pe,Et);else{var An=Ut[0]+3>>3;for(Ut=0;256>Ut;Ut+=16)Pe[Et+Ut]=An}kr=1,En=Ue[0]}var Lt=15&Ce.la,$n=15&Ot.la;for(Ut=0;4>Ut;++Ut){var Hn=1&$n;for(An=mt=0;4>An;++An)Lt=Lt>>1|(Hn=(Nr=yu(Ge,En,Nr=Hn+(1&Lt),ze.Sc,kr,Pe,Et))>kr)<<7,mt=mt<<2|(3<Nr?3:1<Nr?2:Pe[Et+0]!=0),Et+=16;Lt>>=4,$n=$n>>1|Hn<<7,St=(St<<8|mt)>>>0}for(En=Lt,kr=$n>>4,Dt=0;4>Dt;Dt+=2){for(mt=0,Lt=Ce.la>>4+Dt,$n=Ot.la>>4+Dt,Ut=0;2>Ut;++Ut){for(Hn=1&$n,An=0;2>An;++An)Nr=Hn+(1&Lt),Lt=Lt>>1|(Hn=0<(Nr=yu(Ge,Ue[2],Nr,ze.Qc,0,Pe,Et)))<<3,mt=mt<<2|(3<Nr?3:1<Nr?2:Pe[Et+0]!=0),Et+=16;Lt>>=2,$n=$n>>1|Hn<<5}bt|=mt<<4*Dt,En|=Lt<<4<<Dt,kr|=(240&$n)<<Dt}Ce.la=En,Ot.la=kr,at.Hc=St,at.Gc=bt,at.ia=43690&bt?0:ze.ia,Ue=!(St|bt)}if(0<ye.L&&(ye.wa[ye.Y+ye.ja]=ye.gd[Ne.$b][Ne.Za],ye.wa[ye.Y+ye.ja].La|=!Ue),Oe.Ka)return mr(we,7,"Premature end-of-file encountered.")}if(Yl(we),ye=Te,Oe=1,Ne=(me=we).D,Ce=0<me.L&&me.M>=me.zb&&me.M<=me.Va,me.Aa==0)e:{if(Ne.M=me.M,Ne.uc=Ce,uu(me,Ne),Oe=1,Ne=(mt=me.D).Nb,Ce=(bt=yf[me.L])*me.R,Ge=bt/2*me.B,Ut=16*Ne*me.R,An=8*Ne*me.B,Ue=me.sa,at=me.ta-Ce+Ut,ze=me.qa,Pe=me.ra-Ge+An,Et=me.Ha,Ot=me.Ia-Ge+An,$n=(Lt=mt.M)==0,St=Lt>=me.Va-1,me.Aa==2&&uu(me,mt),mt.uc)for(Hn=(Nr=me).D.M,e(Nr.D.uc),mt=Nr.yb;mt<Nr.Hb;++mt){kr=mt,En=Hn;var Rr=(Ur=(ur=Nr).D).Nb;Dt=ur.R;var Ur=Ur.wa[Ur.Y+kr],cn=ur.sa,ci=ur.ta+16*Rr*Dt+16*kr,Gi=Ur.dd,Ir=Ur.tc;if(Ir!=0)if(e(3<=Ir),ur.L==1)0<kr&&za(cn,ci,Dt,Ir+4),Ur.La&&oi(cn,ci,Dt,Ir),0<En&&Io(cn,ci,Dt,Ir+4),Ur.La&&gu(cn,ci,Dt,Ir);else{var ma=ur.B,Do=ur.qa,Ds=ur.ra+8*Rr*ma+8*kr,Wa=ur.Ha,ur=ur.Ia+8*Rr*ma+8*kr;Rr=Ur.ld,0<kr&&(lf(cn,ci,Dt,Ir+4,Gi,Rr),To(Do,Ds,Wa,ur,ma,Ir+4,Gi,Rr)),Ur.La&&(Ua(cn,ci,Dt,Ir,Gi,Rr),Rs(Do,Ds,Wa,ur,ma,Ir,Gi,Rr)),0<En&&(Cs(cn,ci,Dt,Ir+4,Gi,Rr),mu(Do,Ds,Wa,ur,ma,Ir+4,Gi,Rr)),Ur.La&&(Co(cn,ci,Dt,Ir,Gi,Rr),Ro(Do,Ds,Wa,ur,ma,Ir,Gi,Rr))}}if(me.ia&&alert("todo:DitherRow"),ye.put!=null){if(mt=16*Lt,Lt=16*(Lt+1),$n?(ye.y=me.sa,ye.O=me.ta+Ut,ye.f=me.qa,ye.N=me.ra+An,ye.ea=me.Ha,ye.W=me.Ia+An):(mt-=bt,ye.y=Ue,ye.O=at,ye.f=ze,ye.N=Pe,ye.ea=Et,ye.W=Ot),St||(Lt-=bt),Lt>ye.o&&(Lt=ye.o),ye.F=null,ye.J=null,me.Fa!=null&&0<me.Fa.length&&mt<Lt&&(ye.J=su(me,ye,mt,Lt-mt),ye.F=me.mb,ye.F==null&&ye.F.length==0)){Oe=mr(me,3,"Could not decode alpha data.");break e}mt<ye.j&&(bt=ye.j-mt,mt=ye.j,e(!(1&bt)),ye.O+=me.R*bt,ye.N+=me.B*(bt>>1),ye.W+=me.B*(bt>>1),ye.F!=null&&(ye.J+=ye.width*bt)),mt<Lt&&(ye.O+=ye.v,ye.N+=ye.v>>1,ye.W+=ye.v>>1,ye.F!=null&&(ye.J+=ye.v),ye.ka=mt-ye.j,ye.U=ye.va-ye.v,ye.T=Lt-mt,Oe=ye.put(ye))}Ne+1!=me.Ic||St||(n(me.sa,me.ta-Ce,Ue,at+16*me.R,Ce),n(me.qa,me.ra-Ge,ze,Pe+8*me.B,Ge),n(me.Ha,me.Ia-Ge,Et,Ot+8*me.B,Ge))}if(!Oe)return mr(we,6,"Output aborted.")}return 1}(p,_)),_.bc!=null&&_.bc(_),j&=1}return j?(p.cb=0,j):0}function bi(p,_,j,D,z){z=p[_+j+32*D]+(z>>3),p[_+j+32*D]=-256&z?0>z?0:255:z}function ys(p,_,j,D,z,G){bi(p,_,0,j,D+z),bi(p,_,1,j,D+G),bi(p,_,2,j,D-G),bi(p,_,3,j,D-z)}function Sn(p){return(20091*p>>16)+p}function Jl(p,_,j,D){var z,G=0,Y=a(16);for(z=0;4>z;++z){var X=p[_+0]+p[_+8],ee=p[_+0]-p[_+8],ae=(35468*p[_+4]>>16)-Sn(p[_+12]),pe=Sn(p[_+4])+(35468*p[_+12]>>16);Y[G+0]=X+pe,Y[G+1]=ee+ae,Y[G+2]=ee-ae,Y[G+3]=X-pe,G+=4,_++}for(z=G=0;4>z;++z)X=(p=Y[G+0]+4)+Y[G+8],ee=p-Y[G+8],ae=(35468*Y[G+4]>>16)-Sn(Y[G+12]),bi(j,D,0,0,X+(pe=Sn(Y[G+4])+(35468*Y[G+12]>>16))),bi(j,D,1,0,ee+ae),bi(j,D,2,0,ee-ae),bi(j,D,3,0,X-pe),G++,D+=32}function Hc(p,_,j,D){var z=p[_+0]+4,G=35468*p[_+4]>>16,Y=Sn(p[_+4]),X=35468*p[_+1]>>16;ys(j,D,0,z+Y,p=Sn(p[_+1]),X),ys(j,D,1,z+G,p,X),ys(j,D,2,z-G,p,X),ys(j,D,3,z-Y,p,X)}function rp(p,_,j,D,z){Jl(p,_,j,D),z&&Jl(p,_+16,j,D+4)}function Wc(p,_,j,D){da(p,_+0,j,D,1),da(p,_+32,j,D+128,1)}function np(p,_,j,D){var z;for(p=p[_+0]+4,z=0;4>z;++z)for(_=0;4>_;++_)bi(j,D,_,z,p)}function Vc(p,_,j,D){p[_+0]&&un(p,_+0,j,D),p[_+16]&&un(p,_+16,j,D+4),p[_+32]&&un(p,_+32,j,D+128),p[_+48]&&un(p,_+48,j,D+128+4)}function ip(p,_,j,D){var z,G=a(16);for(z=0;4>z;++z){var Y=p[_+0+z]+p[_+12+z],X=p[_+4+z]+p[_+8+z],ee=p[_+4+z]-p[_+8+z],ae=p[_+0+z]-p[_+12+z];G[0+z]=Y+X,G[8+z]=Y-X,G[4+z]=ae+ee,G[12+z]=ae-ee}for(z=0;4>z;++z)Y=(p=G[0+4*z]+3)+G[3+4*z],X=G[1+4*z]+G[2+4*z],ee=G[1+4*z]-G[2+4*z],ae=p-G[3+4*z],j[D+0]=Y+X>>3,j[D+16]=ae+ee>>3,j[D+32]=Y-X>>3,j[D+48]=ae-ee>>3,D+=64}function Xl(p,_,j){var D,z=_-32,G=zn,Y=255-p[z-1];for(D=0;D<j;++D){var X,ee=G,ae=Y+p[_-1];for(X=0;X<j;++X)p[_+X]=ee[ae+p[z+X]];_+=32}}function ap(p,_){Xl(p,_,4)}function op(p,_){Xl(p,_,8)}function sp(p,_){Xl(p,_,16)}function la(p,_){var j;for(j=0;16>j;++j)n(p,_+32*j,p,_-32,16)}function ws(p,_){var j;for(j=16;0<j;--j)i(p,_,p[_-1],16),_+=32}function bs(p,_,j){var D;for(D=0;16>D;++D)i(_,j+32*D,p,16)}function Gc(p,_){var j,D=16;for(j=0;16>j;++j)D+=p[_-1+32*j]+p[_+j-32];bs(D>>5,p,_)}function Yr(p,_){var j,D=8;for(j=0;16>j;++j)D+=p[_-1+32*j];bs(D>>4,p,_)}function lp(p,_){var j,D=8;for(j=0;16>j;++j)D+=p[_+j-32];bs(D>>4,p,_)}function Kc(p,_){bs(128,p,_)}function ft(p,_,j){return p+2*_+j+2>>2}function up(p,_){var j,D=_-32;for(D=new Uint8Array([ft(p[D-1],p[D+0],p[D+1]),ft(p[D+0],p[D+1],p[D+2]),ft(p[D+1],p[D+2],p[D+3]),ft(p[D+2],p[D+3],p[D+4])]),j=0;4>j;++j)n(p,_+32*j,D,0,D.length)}function cp(p,_){var j=p[_-1],D=p[_-1+32],z=p[_-1+64],G=p[_-1+96];ge(p,_+0,16843009*ft(p[_-1-32],j,D)),ge(p,_+32,16843009*ft(j,D,z)),ge(p,_+64,16843009*ft(D,z,G)),ge(p,_+96,16843009*ft(z,G,G))}function Hi(p,_){var j,D=4;for(j=0;4>j;++j)D+=p[_+j-32]+p[_-1+32*j];for(D>>=3,j=0;4>j;++j)i(p,_+32*j,D,4)}function Yc(p,_){var j=p[_-1+0],D=p[_-1+32],z=p[_-1+64],G=p[_-1-32],Y=p[_+0-32],X=p[_+1-32],ee=p[_+2-32],ae=p[_+3-32];p[_+0+96]=ft(D,z,p[_-1+96]),p[_+1+96]=p[_+0+64]=ft(j,D,z),p[_+2+96]=p[_+1+64]=p[_+0+32]=ft(G,j,D),p[_+3+96]=p[_+2+64]=p[_+1+32]=p[_+0+0]=ft(Y,G,j),p[_+3+64]=p[_+2+32]=p[_+1+0]=ft(X,Y,G),p[_+3+32]=p[_+2+0]=ft(ee,X,Y),p[_+3+0]=ft(ae,ee,X)}function Jc(p,_){var j=p[_+1-32],D=p[_+2-32],z=p[_+3-32],G=p[_+4-32],Y=p[_+5-32],X=p[_+6-32],ee=p[_+7-32];p[_+0+0]=ft(p[_+0-32],j,D),p[_+1+0]=p[_+0+32]=ft(j,D,z),p[_+2+0]=p[_+1+32]=p[_+0+64]=ft(D,z,G),p[_+3+0]=p[_+2+32]=p[_+1+64]=p[_+0+96]=ft(z,G,Y),p[_+3+32]=p[_+2+64]=p[_+1+96]=ft(G,Y,X),p[_+3+64]=p[_+2+96]=ft(Y,X,ee),p[_+3+96]=ft(X,ee,ee)}function xs(p,_){var j=p[_-1+0],D=p[_-1+32],z=p[_-1+64],G=p[_-1-32],Y=p[_+0-32],X=p[_+1-32],ee=p[_+2-32],ae=p[_+3-32];p[_+0+0]=p[_+1+64]=G+Y+1>>1,p[_+1+0]=p[_+2+64]=Y+X+1>>1,p[_+2+0]=p[_+3+64]=X+ee+1>>1,p[_+3+0]=ee+ae+1>>1,p[_+0+96]=ft(z,D,j),p[_+0+64]=ft(D,j,G),p[_+0+32]=p[_+1+96]=ft(j,G,Y),p[_+1+32]=p[_+2+96]=ft(G,Y,X),p[_+2+32]=p[_+3+96]=ft(Y,X,ee),p[_+3+32]=ft(X,ee,ae)}function Ql(p,_){var j=p[_+0-32],D=p[_+1-32],z=p[_+2-32],G=p[_+3-32],Y=p[_+4-32],X=p[_+5-32],ee=p[_+6-32],ae=p[_+7-32];p[_+0+0]=j+D+1>>1,p[_+1+0]=p[_+0+64]=D+z+1>>1,p[_+2+0]=p[_+1+64]=z+G+1>>1,p[_+3+0]=p[_+2+64]=G+Y+1>>1,p[_+0+32]=ft(j,D,z),p[_+1+32]=p[_+0+96]=ft(D,z,G),p[_+2+32]=p[_+1+96]=ft(z,G,Y),p[_+3+32]=p[_+2+96]=ft(G,Y,X),p[_+3+64]=ft(Y,X,ee),p[_+3+96]=ft(X,ee,ae)}function fp(p,_){var j=p[_-1+0],D=p[_-1+32],z=p[_-1+64],G=p[_-1+96];p[_+0+0]=j+D+1>>1,p[_+2+0]=p[_+0+32]=D+z+1>>1,p[_+2+32]=p[_+0+64]=z+G+1>>1,p[_+1+0]=ft(j,D,z),p[_+3+0]=p[_+1+32]=ft(D,z,G),p[_+3+32]=p[_+1+64]=ft(z,G,G),p[_+3+64]=p[_+2+64]=p[_+0+96]=p[_+1+96]=p[_+2+96]=p[_+3+96]=G}function dp(p,_){var j=p[_-1+0],D=p[_-1+32],z=p[_-1+64],G=p[_-1+96],Y=p[_-1-32],X=p[_+0-32],ee=p[_+1-32],ae=p[_+2-32];p[_+0+0]=p[_+2+32]=j+Y+1>>1,p[_+0+32]=p[_+2+64]=D+j+1>>1,p[_+0+64]=p[_+2+96]=z+D+1>>1,p[_+0+96]=G+z+1>>1,p[_+3+0]=ft(X,ee,ae),p[_+2+0]=ft(Y,X,ee),p[_+1+0]=p[_+3+32]=ft(j,Y,X),p[_+1+32]=p[_+3+64]=ft(D,j,Y),p[_+1+64]=p[_+3+96]=ft(z,D,j),p[_+1+96]=ft(G,z,D)}function hp(p,_){var j;for(j=0;8>j;++j)n(p,_+32*j,p,_-32,8)}function Zl(p,_){var j;for(j=0;8>j;++j)i(p,_,p[_-1],8),_+=32}function Ao(p,_,j){var D;for(D=0;8>D;++D)i(_,j+32*D,p,8)}function Da(p,_){var j,D=8;for(j=0;8>j;++j)D+=p[_+j-32]+p[_-1+32*j];Ao(D>>4,p,_)}function pp(p,_){var j,D=4;for(j=0;8>j;++j)D+=p[_+j-32];Ao(D>>3,p,_)}function jo(p,_){var j,D=4;for(j=0;8>j;++j)D+=p[_-1+32*j];Ao(D>>3,p,_)}function eu(p,_){Ao(128,p,_)}function _s(p,_,j){var D=p[_-j],z=p[_+0],G=3*(z-D)+bp[1020+p[_-2*j]-p[_+j]],Y=cf[112+(G+4>>3)];p[_-j]=zn[255+D+cf[112+(G+3>>3)]],p[_+0]=zn[255+z-Y]}function Xc(p,_,j,D){var z=p[_+0],G=p[_+j];return li[255+p[_-2*j]-p[_-j]]>D||li[255+G-z]>D}function Qc(p,_,j,D){return 4*li[255+p[_-j]-p[_+0]]+li[255+p[_-2*j]-p[_+j]]<=D}function Zc(p,_,j,D,z){var G=p[_-3*j],Y=p[_-2*j],X=p[_-j],ee=p[_+0],ae=p[_+j],pe=p[_+2*j],Se=p[_+3*j];return 4*li[255+X-ee]+li[255+Y-ae]>D?0:li[255+p[_-4*j]-G]<=z&&li[255+G-Y]<=z&&li[255+Y-X]<=z&&li[255+Se-pe]<=z&&li[255+pe-ae]<=z&&li[255+ae-ee]<=z}function ef(p,_,j,D){var z=2*D+1;for(D=0;16>D;++D)Qc(p,_+D,j,z)&&_s(p,_+D,j)}function Wi(p,_,j,D){var z=2*D+1;for(D=0;16>D;++D)Qc(p,_+D*j,1,z)&&_s(p,_+D*j,1)}function ua(p,_,j,D){var z;for(z=3;0<z;--z)ef(p,_+=4*j,j,D)}function mp(p,_,j,D){var z;for(z=3;0<z;--z)Wi(p,_+=4,j,D)}function Ma(p,_,j,D,z,G,Y,X){for(G=2*G+1;0<z--;){if(Zc(p,_,j,G,Y))if(Xc(p,_,j,X))_s(p,_,j);else{var ee=p,ae=_,pe=j,Se=ee[ae-2*pe],ke=ee[ae-pe],we=ee[ae+0],Te=ee[ae+pe],Ne=ee[ae+2*pe],me=27*(Oe=bp[1020+3*(we-ke)+bp[1020+Se-Te]])+63>>7,ye=18*Oe+63>>7,Oe=9*Oe+63>>7;ee[ae-3*pe]=zn[255+ee[ae-3*pe]+Oe],ee[ae-2*pe]=zn[255+Se+ye],ee[ae-pe]=zn[255+ke+me],ee[ae+0]=zn[255+we-me],ee[ae+pe]=zn[255+Te-ye],ee[ae+2*pe]=zn[255+Ne-Oe]}_+=D}}function xi(p,_,j,D,z,G,Y,X){for(G=2*G+1;0<z--;){if(Zc(p,_,j,G,Y))if(Xc(p,_,j,X))_s(p,_,j);else{var ee=p,ae=_,pe=j,Se=ee[ae-pe],ke=ee[ae+0],we=ee[ae+pe],Te=cf[112+((Ne=3*(ke-Se))+4>>3)],Ne=cf[112+(Ne+3>>3)],me=Te+1>>1;ee[ae-2*pe]=zn[255+ee[ae-2*pe]+me],ee[ae-pe]=zn[255+Se+Ne],ee[ae+0]=zn[255+ke-Te],ee[ae+pe]=zn[255+we-me]}_+=D}}function tu(p,_,j,D,z,G){Ma(p,_,j,1,16,D,z,G)}function Oo(p,_,j,D,z,G){Ma(p,_,1,j,16,D,z,G)}function gp(p,_,j,D,z,G){var Y;for(Y=3;0<Y;--Y)xi(p,_+=4*j,j,1,16,D,z,G)}function Ss(p,_,j,D,z,G){var Y;for(Y=3;0<Y;--Y)xi(p,_+=4,1,j,16,D,z,G)}function vp(p,_,j,D,z,G,Y,X){Ma(p,_,z,1,8,G,Y,X),Ma(j,D,z,1,8,G,Y,X)}function ru(p,_,j,D,z,G,Y,X){Ma(p,_,1,z,8,G,Y,X),Ma(j,D,1,z,8,G,Y,X)}function nu(p,_,j,D,z,G,Y,X){xi(p,_+4*z,z,1,8,G,Y,X),xi(j,D+4*z,z,1,8,G,Y,X)}function tf(p,_,j,D,z,G,Y,X){xi(p,_+4,1,z,8,G,Y,X),xi(j,D+4,1,z,8,G,Y,X)}function ks(){this.ba=new Vr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Rt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function iu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function au(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function rf(){this.ua=0,this.Wa=new ue,this.vb=new ue,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new C,this.yc=new A}function yp(){this.xb=this.a=0,this.l=new vs,this.ca=new Vr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new rf,this.ab=0,this.gc=o(4,au),this.Oc=0}function Ns(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new vs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Lo(p,_,j,D,z,G,Y){for(p=p==null?0:p[_+0],_=0;_<Y;++_)z[G+_]=p+j[D+_]&255,p=z[G+_]}function ou(p,_,j,D,z,G,Y){var X;if(p==null)Lo(null,null,j,D,z,G,Y);else for(X=0;X<Y;++X)z[G+X]=p[_+X]+j[D+X]&255}function Fa(p,_,j,D,z,G,Y){if(p==null)Lo(null,null,j,D,z,G,Y);else{var X,ee=p[_+0],ae=ee,pe=ee;for(X=0;X<Y;++X)ae=pe+(ee=p[_+X])-ae,pe=j[D+X]+(-256&ae?0>ae?0:255:ae)&255,ae=ee,z[G+X]=pe}}function su(p,_,j,D){var z=_.width,G=_.o;if(e(p!=null&&_!=null),0>j||0>=D||j+D>G)return null;if(!p.Cc){if(p.ga==null){var Y;if(p.ga=new Ns,(Y=p.ga==null)||(Y=_.width*_.o,e(p.Gb.length==0),p.Gb=a(Y),p.Uc=0,p.Gb==null?Y=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,Y=1),Y=!Y),!Y){Y=p.ga;var X=p.Fa,ee=p.P,ae=p.qc,pe=p.mb,Se=p.nb,ke=ee+1,we=ae-1,Te=Y.l;if(e(X!=null&&pe!=null&&_!=null),Ha[0]=null,Ha[1]=Lo,Ha[2]=ou,Ha[3]=Fa,Y.ca=pe,Y.tb=Se,Y.c=_.width,Y.i=_.height,e(0<Y.c&&0<Y.i),1>=ae)_=0;else if(Y.$a=X[ee+0]>>0&3,Y.Z=X[ee+0]>>2&3,Y.Lc=X[ee+0]>>4&3,ee=X[ee+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||ee)_=0;else if(Te.put=ni,Te.ac=Zt,Te.bc=Dn,Te.ma=Y,Te.width=_.width,Te.height=_.height,Te.Da=_.Da,Te.v=_.v,Te.va=_.va,Te.j=_.j,Te.o=_.o,Y.$a)e:{e(Y.$a==1),_=sn();t:for(;;){if(_==null){_=0;break e}if(e(Y!=null),Y.mc=_,_.c=Y.c,_.i=Y.i,_.l=Y.l,_.l.ma=Y,_.l.width=Y.c,_.l.height=Y.i,_.a=0,Q(_.m,X,ke,we),!qn(Y.c,Y.i,1,_,null)||(_.ab==1&&_.gc[0].hc==3&&Fn(_.s)?(Y.ic=1,X=_.c*_.i,_.Ta=null,_.Ua=0,_.V=a(X),_.Ba=0,_.V==null?(_.a=1,_=0):_=1):(Y.ic=0,_=oa(_,Y.c)),!_))break t;_=1;break e}Y.mc=null,_=0}else _=we>=Y.c*Y.i;Y=!_}if(Y)return null;p.ga.Lc!=1?p.Ga=0:D=G-j}e(p.ga!=null),e(j+D<=G);e:{if(_=(X=p.ga).c,G=X.l.o,X.$a==0){if(ke=p.rc,we=p.Vc,Te=p.Fa,ee=p.P+1+j*_,ae=p.mb,pe=p.nb+j*_,e(ee<=p.P+p.qc),X.Z!=0)for(e(Ha[X.Z]!=null),Y=0;Y<D;++Y)Ha[X.Z](ke,we,Te,ee,ae,pe,_),ke=ae,we=pe,pe+=_,ee+=_;else for(Y=0;Y<D;++Y)n(ae,pe,Te,ee,_),ke=ae,we=pe,pe+=_,ee+=_;p.rc=ke,p.Vc=we}else{if(e(X.mc!=null),_=j+D,e((Y=X.mc)!=null),e(_<=Y.i),Y.C>=_)_=1;else if(X.ic||xe(),X.ic){X=Y.V,ke=Y.Ba,we=Y.c;var Ne=Y.i,me=(Te=1,ee=Y.$/we,ae=Y.$%we,pe=Y.m,Se=Y.s,Y.$),ye=we*Ne,Oe=we*_,Ce=Se.wc,Pe=me<Oe?It(Se,ae,ee):null;e(me<=ye),e(_<=Ne),e(Fn(Se));t:for(;;){for(;!pe.h&&me<Oe;){if(ae&Ce||(Pe=It(Se,ae,ee)),e(Pe!=null),B(pe),256>(Ne=Gr(Pe.G[0],Pe.H[0],pe)))X[ke+me]=Ne,++me,++ae>=we&&(ae=0,++ee<=_&&!(ee%16)&&dr(Y,ee));else{if(!(280>Ne)){Te=0;break t}Ne=wn(Ne-256,pe);var Ge,Ue=Gr(Pe.G[4],Pe.H[4],pe);if(B(pe),!(me>=(Ue=Mn(we,Ue=wn(Ue,pe)))&&ye-me>=Ne)){Te=0;break t}for(Ge=0;Ge<Ne;++Ge)X[ke+me+Ge]=X[ke+me+Ge-Ue];for(me+=Ne,ae+=Ne;ae>=we;)ae-=we,++ee<=_&&!(ee%16)&&dr(Y,ee);me<Oe&&ae&Ce&&(Pe=It(Se,ae,ee))}e(pe.h==U(pe))}dr(Y,ee>_?_:ee);break t}!Te||pe.h&&me<ye?(Te=0,Y.a=pe.h?5:3):Y.$=me,_=Te}else _=xn(Y,Y.V,Y.Ba,Y.c,Y.i,_,tt);if(!_){D=0;break e}}j+D>=G&&(p.Cc=1),D=1}if(!D)return null;if(p.Cc&&((D=p.ga)!=null&&(D.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+j*z}function N(p,_,j,D,z,G){for(;0<z--;){var Y,X=p,ee=_+(j?1:0),ae=p,pe=_+(j?0:3);for(Y=0;Y<D;++Y){var Se=ae[pe+4*Y];Se!=255&&(Se*=32897,X[ee+4*Y+0]=X[ee+4*Y+0]*Se>>23,X[ee+4*Y+1]=X[ee+4*Y+1]*Se>>23,X[ee+4*Y+2]=X[ee+4*Y+2]*Se>>23)}_+=G}}function $(p,_,j,D,z){for(;0<D--;){var G;for(G=0;G<j;++G){var Y=p[_+2*G+0],X=15&(ae=p[_+2*G+1]),ee=4369*X,ae=(240&ae|ae>>4)*ee>>16;p[_+2*G+0]=(240&Y|Y>>4)*ee>>16&240|(15&Y|Y<<4)*ee>>16>>4&15,p[_+2*G+1]=240&ae|X}_+=z}}function le(p,_,j,D,z,G,Y,X){var ee,ae,pe=255;for(ae=0;ae<z;++ae){for(ee=0;ee<D;++ee){var Se=p[_+ee];G[Y+4*ee]=Se,pe&=Se}_+=j,Y+=X}return pe!=255}function fe(p,_,j,D,z){var G;for(G=0;G<z;++G)j[D+G]=p[_+G]>>8}function xe(){si=N,Wt=$,Vt=le,vr=fe}function je(p,_,j){O[p]=function(D,z,G,Y,X,ee,ae,pe,Se,ke,we,Te,Ne,me,ye,Oe,Ce){var Pe,Ge=Ce-1>>1,Ue=X[ee+0]|ae[pe+0]<<16,at=Se[ke+0]|we[Te+0]<<16;e(D!=null);var ze=3*Ue+at+131074>>2;for(_(D[z+0],255&ze,ze>>16,Ne,me),G!=null&&(ze=3*at+Ue+131074>>2,_(G[Y+0],255&ze,ze>>16,ye,Oe)),Pe=1;Pe<=Ge;++Pe){var Et=X[ee+Pe]|ae[pe+Pe]<<16,Ot=Se[ke+Pe]|we[Te+Pe]<<16,St=Ue+Et+at+Ot+524296,bt=St+2*(Et+at)>>3;ze=bt+Ue>>1,Ue=(St=St+2*(Ue+Ot)>>3)+Et>>1,_(D[z+2*Pe-1],255&ze,ze>>16,Ne,me+(2*Pe-1)*j),_(D[z+2*Pe-0],255&Ue,Ue>>16,Ne,me+(2*Pe-0)*j),G!=null&&(ze=St+at>>1,Ue=bt+Ot>>1,_(G[Y+2*Pe-1],255&ze,ze>>16,ye,Oe+(2*Pe-1)*j),_(G[Y+2*Pe+0],255&Ue,Ue>>16,ye,Oe+(2*Pe+0)*j)),Ue=Et,at=Ot}1&Ce||(ze=3*Ue+at+131074>>2,_(D[z+Ce-1],255&ze,ze>>16,Ne,me+(Ce-1)*j),G!=null&&(ze=3*at+Ue+131074>>2,_(G[Y+Ce-1],255&ze,ze>>16,ye,Oe+(Ce-1)*j)))}}function Re(){ui[ff]=L4,ui[df]=J1,ui[W1]=P4,ui[hf]=X1,ui[pf]=Q1,ui[xp]=Z1,ui[V1]=T4,ui[_p]=J1,ui[Sp]=X1,ui[mf]=Q1,ui[kp]=Z1}function We(p){return p&-16384?0>p?0:255:p>>C4}function nt(p,_){return We((19077*p>>8)+(26149*_>>8)-14234)}function pt(p,_,j){return We((19077*p>>8)-(6419*_>>8)-(13320*j>>8)+8708)}function dt(p,_){return We((19077*p>>8)+(33050*_>>8)-17685)}function _t(p,_,j,D,z){D[z+0]=nt(p,j),D[z+1]=pt(p,_,j),D[z+2]=dt(p,_)}function nr(p,_,j,D,z){D[z+0]=dt(p,_),D[z+1]=pt(p,_,j),D[z+2]=nt(p,j)}function lr(p,_,j,D,z){var G=pt(p,_,j);_=G<<3&224|dt(p,_)>>3,D[z+0]=248&nt(p,j)|G>>5,D[z+1]=_}function Sr(p,_,j,D,z){var G=240&dt(p,_)|15;D[z+0]=240&nt(p,j)|pt(p,_,j)>>4,D[z+1]=G}function Jr(p,_,j,D,z){D[z+0]=255,_t(p,_,j,D,z+1)}function Cr(p,_,j,D,z){nr(p,_,j,D,z),D[z+3]=255}function _i(p,_,j,D,z){_t(p,_,j,D,z),D[z+3]=255}function Un(p,_){return 0>p?0:p>_?_:p}function Vi(p,_,j){O[p]=function(D,z,G,Y,X,ee,ae,pe,Se){for(var ke=pe+(-2&Se)*j;pe!=ke;)_(D[z+0],G[Y+0],X[ee+0],ae,pe),_(D[z+1],G[Y+0],X[ee+0],ae,pe+j),z+=2,++Y,++ee,pe+=2*j;1&Se&&_(D[z+0],G[Y+0],X[ee+0],ae,pe)}}function nf(p,_,j){return j==0?p==0?_==0?6:5:_==0?4:0:j}function lu(p,_,j,D,z){switch(p>>>30){case 3:da(_,j,D,z,0);break;case 2:gr(_,j,D,z);break;case 1:un(_,j,D,z)}}function uu(p,_){var j,D,z=_.M,G=_.Nb,Y=p.oc,X=p.pc+40,ee=p.oc,ae=p.pc+584,pe=p.oc,Se=p.pc+600;for(j=0;16>j;++j)Y[X+32*j-1]=129;for(j=0;8>j;++j)ee[ae+32*j-1]=129,pe[Se+32*j-1]=129;for(0<z?Y[X-1-32]=ee[ae-1-32]=pe[Se-1-32]=129:(i(Y,X-32-1,127,21),i(ee,ae-32-1,127,9),i(pe,Se-32-1,127,9)),D=0;D<p.za;++D){var ke=_.ya[_.aa+D];if(0<D){for(j=-1;16>j;++j)n(Y,X+32*j-4,Y,X+32*j+12,4);for(j=-1;8>j;++j)n(ee,ae+32*j-4,ee,ae+32*j+4,4),n(pe,Se+32*j-4,pe,Se+32*j+4,4)}var we=p.Gd,Te=p.Hd+D,Ne=ke.ad,me=ke.Hc;if(0<z&&(n(Y,X-32,we[Te].y,0,16),n(ee,ae-32,we[Te].f,0,8),n(pe,Se-32,we[Te].ea,0,8)),ke.Za){var ye=Y,Oe=X-32+16;for(0<z&&(D>=p.za-1?i(ye,Oe,we[Te].y[15],4):n(ye,Oe,we[Te+1].y,0,4)),j=0;4>j;j++)ye[Oe+128+j]=ye[Oe+256+j]=ye[Oe+384+j]=ye[Oe+0+j];for(j=0;16>j;++j,me<<=2)ye=Y,Oe=X+tv[j],Si[ke.Ob[j]](ye,Oe),lu(me,Ne,16*+j,ye,Oe)}else if(ye=nf(D,z,ke.Ob[0]),$a[ye](Y,X),me!=0)for(j=0;16>j;++j,me<<=2)lu(me,Ne,16*+j,Y,X+tv[j]);for(j=ke.Gc,ye=nf(D,z,ke.Dd),pa[ye](ee,ae),pa[ye](pe,Se),me=Ne,ye=ee,Oe=ae,255&(ke=j>>0)&&(170&ke?pu(me,256,ye,Oe):ai(me,256,ye,Oe)),ke=pe,me=Se,255&(j>>=8)&&(170&j?pu(Ne,320,ke,me):ai(Ne,320,ke,me)),z<p.Ub-1&&(n(we[Te].y,0,Y,X+480,16),n(we[Te].f,0,ee,ae+224,8),n(we[Te].ea,0,pe,Se+224,8)),j=8*G*p.B,we=p.sa,Te=p.ta+16*D+16*G*p.R,Ne=p.qa,ke=p.ra+8*D+j,me=p.Ha,ye=p.Ia+8*D+j,j=0;16>j;++j)n(we,Te+j*p.R,Y,X+32*j,16);for(j=0;8>j;++j)n(Ne,ke+j*p.B,ee,ae+32*j,8),n(me,ye+j*p.B,pe,Se+32*j,8)}}function Es(p,_,j,D,z,G,Y,X,ee){var ae=[0],pe=[0],Se=0,ke=ee!=null?ee.kd:0,we=ee??new iu;if(p==null||12>j)return 7;we.data=p,we.w=_,we.ha=j,_=[_],j=[j],we.gb=[we.gb];e:{var Te=_,Ne=j,me=we.gb;if(e(p!=null),e(Ne!=null),e(me!=null),me[0]=0,12<=Ne[0]&&!r(p,Te[0],"RIFF")){if(r(p,Te[0]+8,"WEBP")){me=3;break e}var ye=Ae(p,Te[0]+4);if(12>ye||4294967286<ye){me=3;break e}if(ke&&ye>Ne[0]-8){me=7;break e}me[0]=ye,Te[0]+=12,Ne[0]-=12}me=0}if(me!=0)return me;for(ye=0<we.gb[0],j=j[0];;){e:{var Oe=p;Ne=_,me=j;var Ce=ae,Pe=pe,Ge=Te=[0];if((ze=Se=[Se])[0]=0,8>me[0])me=7;else{if(!r(Oe,Ne[0],"VP8X")){if(Ae(Oe,Ne[0]+4)!=10){me=3;break e}if(18>me[0]){me=7;break e}var Ue=Ae(Oe,Ne[0]+8),at=1+Ee(Oe,Ne[0]+12);if(2147483648<=at*(Oe=1+Ee(Oe,Ne[0]+15))){me=3;break e}Ge!=null&&(Ge[0]=Ue),Ce!=null&&(Ce[0]=at),Pe!=null&&(Pe[0]=Oe),Ne[0]+=18,me[0]-=18,ze[0]=1}me=0}}if(Se=Se[0],Te=Te[0],me!=0)return me;if(Ne=!!(2&Te),!ye&&Se)return 3;if(G!=null&&(G[0]=!!(16&Te)),Y!=null&&(Y[0]=Ne),X!=null&&(X[0]=0),Y=ae[0],Te=pe[0],Se&&Ne&&ee==null){me=0;break}if(4>j){me=7;break}if(ye&&Se||!ye&&!Se&&!r(p,_[0],"ALPH")){j=[j],we.na=[we.na],we.P=[we.P],we.Sa=[we.Sa];e:{Ue=p,me=_,ye=j;var ze=we.gb;Ce=we.na,Pe=we.P,Ge=we.Sa,at=22,e(Ue!=null),e(ye!=null),Oe=me[0];var Et=ye[0];for(e(Ce!=null),e(Ge!=null),Ce[0]=null,Pe[0]=null,Ge[0]=0;;){if(me[0]=Oe,ye[0]=Et,8>Et){me=7;break e}var Ot=Ae(Ue,Oe+4);if(4294967286<Ot){me=3;break e}var St=8+Ot+1&-2;if(at+=St,0<ze&&at>ze){me=3;break e}if(!r(Ue,Oe,"VP8 ")||!r(Ue,Oe,"VP8L")){me=0;break e}if(Et[0]<St){me=7;break e}r(Ue,Oe,"ALPH")||(Ce[0]=Ue,Pe[0]=Oe+8,Ge[0]=Ot),Oe+=St,Et-=St}}if(j=j[0],we.na=we.na[0],we.P=we.P[0],we.Sa=we.Sa[0],me!=0)break}j=[j],we.Ja=[we.Ja],we.xa=[we.xa];e:if(ze=p,me=_,ye=j,Ce=we.gb[0],Pe=we.Ja,Ge=we.xa,Ue=me[0],Oe=!r(ze,Ue,"VP8 "),at=!r(ze,Ue,"VP8L"),e(ze!=null),e(ye!=null),e(Pe!=null),e(Ge!=null),8>ye[0])me=7;else{if(Oe||at){if(ze=Ae(ze,Ue+4),12<=Ce&&ze>Ce-12){me=3;break e}if(ke&&ze>ye[0]-8){me=7;break e}Pe[0]=ze,me[0]+=8,ye[0]-=8,Ge[0]=at}else Ge[0]=5<=ye[0]&&ze[Ue+0]==47&&!(ze[Ue+4]>>5),Pe[0]=ye[0];me=0}if(j=j[0],we.Ja=we.Ja[0],we.xa=we.xa[0],_=_[0],me!=0)break;if(4294967286<we.Ja)return 3;if(X==null||Ne||(X[0]=we.xa?2:1),Y=[Y],Te=[Te],we.xa){if(5>j){me=7;break}X=Y,ke=Te,Ne=G,p==null||5>j?p=0:5<=j&&p[_+0]==47&&!(p[_+4]>>5)?(ye=[0],ze=[0],Ce=[0],Q(Pe=new P,p,_,j),it(Pe,ye,ze,Ce)?(X!=null&&(X[0]=ye[0]),ke!=null&&(ke[0]=ze[0]),Ne!=null&&(Ne[0]=Ce[0]),p=1):p=0):p=0}else{if(10>j){me=7;break}X=Te,p==null||10>j||!Uc(p,_+3,j-3)?p=0:(ke=p[_+0]|p[_+1]<<8|p[_+2]<<16,Ne=16383&(p[_+7]<<8|p[_+6]),p=16383&(p[_+9]<<8|p[_+8]),1&ke||3<(ke>>1&7)||!(ke>>4&1)||ke>>5>=we.Ja||!Ne||!p?p=0:(Y&&(Y[0]=Ne),X&&(X[0]=p),p=1))}if(!p||(Y=Y[0],Te=Te[0],Se&&(ae[0]!=Y||pe[0]!=Te)))return 3;ee!=null&&(ee[0]=we,ee.offset=_-ee.w,e(4294967286>_-ee.w),e(ee.offset==ee.ha-j));break}return me==0||me==7&&Se&&ee==null?(G!=null&&(G[0]|=we.na!=null&&0<we.na.length),D!=null&&(D[0]=Y),z!=null&&(z[0]=Te),0):me}function cu(p,_,j){var D=_.width,z=_.height,G=0,Y=0,X=D,ee=z;if(_.Da=p!=null&&0<p.Da,_.Da&&(X=p.cd,ee=p.bd,G=p.v,Y=p.j,11>j||(G&=-2,Y&=-2),0>G||0>Y||0>=X||0>=ee||G+X>D||Y+ee>z))return 0;if(_.v=G,_.j=Y,_.va=G+X,_.o=Y+ee,_.U=X,_.T=ee,_.da=p!=null&&0<p.da,_.da){if(!He(X,ee,j=[p.ib],G=[p.hb]))return 0;_.ib=j[0],_.hb=G[0]}return _.ob=p!=null&&p.ob,_.Kb=p==null||!p.Sd,_.da&&(_.ob=_.ib<3*D/4&&_.hb<3*z/4,_.Kb=0),1}function fu(p){if(p==null)return 2;if(11>p.S){var _=p.f.RGBA;_.fb+=(p.height-1)*_.A,_.A=-_.A}else _=p.f.kb,p=p.height,_.O+=(p-1)*_.fa,_.fa=-_.fa,_.N+=(p-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(p-1>>1)*_.Db,_.Db=-_.Db,_.F!=null&&(_.J+=(p-1)*_.lb,_.lb=-_.lb);return 0}function As(p,_,j,D){if(D==null||0>=p||0>=_)return 2;if(j!=null){if(j.Da){var z=j.cd,G=j.bd,Y=-2&j.v,X=-2&j.j;if(0>Y||0>X||0>=z||0>=G||Y+z>p||X+G>_)return 2;p=z,_=G}if(j.da){if(!He(p,_,z=[j.ib],G=[j.hb]))return 2;p=z[0],_=G[0]}}D.width=p,D.height=_;e:{var ee=D.width,ae=D.height;if(p=D.S,0>=ee||0>=ae||!(p>=ff&&13>p))p=2;else{if(0>=D.Rd&&D.sd==null){Y=G=z=_=0;var pe=(X=ee*rv[p])*ae;if(11>p||(G=(ae+1)/2*(_=(ee+1)/2),p==12&&(Y=(z=ee)*ae)),(ae=a(pe+2*G+Y))==null){p=1;break e}D.sd=ae,11>p?((ee=D.f.RGBA).eb=ae,ee.fb=0,ee.A=X,ee.size=pe):((ee=D.f.kb).y=ae,ee.O=0,ee.fa=X,ee.Fd=pe,ee.f=ae,ee.N=0+pe,ee.Ab=_,ee.Cd=G,ee.ea=ae,ee.W=0+pe+G,ee.Db=_,ee.Ed=G,p==12&&(ee.F=ae,ee.J=0+pe+2*G),ee.Tc=Y,ee.lb=z)}if(_=1,z=D.S,G=D.width,Y=D.height,z>=ff&&13>z)if(11>z)p=D.f.RGBA,_&=(X=Math.abs(p.A))*(Y-1)+G<=p.size,_&=X>=G*rv[z],_&=p.eb!=null;else{p=D.f.kb,X=(G+1)/2,pe=(Y+1)/2,ee=Math.abs(p.fa),ae=Math.abs(p.Ab);var Se=Math.abs(p.Db),ke=Math.abs(p.lb),we=ke*(Y-1)+G;_&=ee*(Y-1)+G<=p.Fd,_&=ae*(pe-1)+X<=p.Cd,_=(_&=Se*(pe-1)+X<=p.Ed)&ee>=G&ae>=X&Se>=X,_&=p.y!=null,_&=p.f!=null,_&=p.ea!=null,z==12&&(_&=ke>=G,_&=we<=p.Tc,_&=p.F!=null)}else _=0;p=_?0:2}}return p!=0||j!=null&&j.fd&&(p=fu(D)),p}var qr=64,js=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Os=24,Ls=32,du=8,kn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ce("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(p){return p},O.Predictor2=function(p,_,j){return _[j+0]},O.Predictor3=function(p,_,j){return _[j+1]},O.Predictor4=function(p,_,j){return _[j-1]},O.Predictor5=function(p,_,j){return de(de(p,_[j+1]),_[j+0])},O.Predictor6=function(p,_,j){return de(p,_[j-1])},O.Predictor7=function(p,_,j){return de(p,_[j+0])},O.Predictor8=function(p,_,j){return de(_[j-1],_[j+0])},O.Predictor9=function(p,_,j){return de(_[j+0],_[j+1])},O.Predictor10=function(p,_,j){return de(de(p,_[j-1]),de(_[j+0],_[j+1]))},O.Predictor11=function(p,_,j){var D=_[j+0];return 0>=qe(D>>24&255,p>>24&255,(_=_[j-1])>>24&255)+qe(D>>16&255,p>>16&255,_>>16&255)+qe(D>>8&255,p>>8&255,_>>8&255)+qe(255&D,255&p,255&_)?D:p},O.Predictor12=function(p,_,j){var D=_[j+0];return(Le((p>>24&255)+(D>>24&255)-((_=_[j-1])>>24&255))<<24|Le((p>>16&255)+(D>>16&255)-(_>>16&255))<<16|Le((p>>8&255)+(D>>8&255)-(_>>8&255))<<8|Le((255&p)+(255&D)-(255&_)))>>>0},O.Predictor13=function(p,_,j){var D=_[j-1];return(Me((p=de(p,_[j+0]))>>24&255,D>>24&255)<<24|Me(p>>16&255,D>>16&255)<<16|Me(p>>8&255,D>>8&255)<<8|Me(p>>0&255,D>>0&255))>>>0};var wp=O.PredictorAdd0;O.PredictorAdd1=Ke,ce("Predictor2","PredictorAdd2"),ce("Predictor3","PredictorAdd3"),ce("Predictor4","PredictorAdd4"),ce("Predictor5","PredictorAdd5"),ce("Predictor6","PredictorAdd6"),ce("Predictor7","PredictorAdd7"),ce("Predictor8","PredictorAdd8"),ce("Predictor9","PredictorAdd9"),ce("Predictor10","PredictorAdd10"),ce("Predictor11","PredictorAdd11"),ce("Predictor12","PredictorAdd12"),ce("Predictor13","PredictorAdd13");var hu=O.PredictorAdd2;$e("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),$e("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var af,ii=O.ColorIndexInverseTransform,Ps=O.MapARGB,of=O.VP8LColorIndexInverseTransformAlpha,sf=O.MapAlpha,Ba=O.VP8LPredictorsAdd=[];Ba.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var Po,Nn,ln,qa,ca,fa,Ts,da,gr,pu,un,ai,Cs,lf,mu,To,Co,Ua,Ro,Rs,Io,za,gu,oi,si,Wt,Vt,vr,Or=a(511),ha=a(2041),vu=a(225),Is=a(767),uf=0,bp=ha,cf=vu,zn=Is,li=Or,ff=0,df=1,W1=2,hf=3,pf=4,xp=5,V1=6,_p=7,Sp=8,mf=9,kp=10,g4=[2,3,7],v4=[3,3,11],G1=[280,256,256,256,40],y4=[0,1,1,1,0],w4=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],b4=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],x4=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_4=8,Np=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ep=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],yu=null,S4=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],k4=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],K1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],N4=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],E4=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],A4=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],j4=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],$a=[],Si=[],pa=[],O4=1,Y1=2,Ha=[],ui=[];je("UpsampleRgbLinePair",_t,3),je("UpsampleBgrLinePair",nr,3),je("UpsampleRgbaLinePair",_i,4),je("UpsampleBgraLinePair",Cr,4),je("UpsampleArgbLinePair",Jr,4),je("UpsampleRgba4444LinePair",Sr,2),je("UpsampleRgb565LinePair",lr,2);var L4=O.UpsampleRgbLinePair,P4=O.UpsampleBgrLinePair,J1=O.UpsampleRgbaLinePair,X1=O.UpsampleBgraLinePair,Q1=O.UpsampleArgbLinePair,Z1=O.UpsampleRgba4444LinePair,T4=O.UpsampleRgb565LinePair,gf=16,vf=1<<gf-1,wu=-227,Ap=482,C4=6,ev=0,R4=a(256),I4=a(256),D4=a(256),M4=a(256),F4=a(Ap-wu),B4=a(Ap-wu);Vi("YuvToRgbRow",_t,3),Vi("YuvToBgrRow",nr,3),Vi("YuvToRgbaRow",_i,4),Vi("YuvToBgraRow",Cr,4),Vi("YuvToArgbRow",Jr,4),Vi("YuvToRgba4444Row",Sr,2),Vi("YuvToRgb565Row",lr,2);var tv=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],yf=[0,2,8],q4=[8,7,6,4,4,2,2,2,1,1,1,1],U4=1;this.WebPDecodeRGBA=function(p,_,j,D,z){var G=df,Y=new ks,X=new Vr;Y.ba=X,X.S=G,X.width=[X.width],X.height=[X.height];var ee=X.width,ae=X.height,pe=new wi;if(pe==null||p==null)var Se=2;else e(pe!=null),Se=Es(p,_,j,pe.width,pe.height,pe.Pd,pe.Qd,pe.format,null);if(Se!=0?ee=0:(ee!=null&&(ee[0]=pe.width[0]),ae!=null&&(ae[0]=pe.height[0]),ee=1),ee){X.width=X.width[0],X.height=X.height[0],D!=null&&(D[0]=X.width),z!=null&&(z[0]=X.height);e:{if(D=new vs,(z=new iu).data=p,z.w=_,z.ha=j,z.kd=1,_=[0],e(z!=null),((p=Es(z.data,z.w,z.ha,null,null,null,_,null,z))==0||p==7)&&_[0]&&(p=4),(_=p)==0){if(e(Y!=null),D.data=z.data,D.w=z.w+z.offset,D.ha=z.ha-z.offset,D.put=ni,D.ac=Zt,D.bc=Dn,D.ma=Y,z.xa){if((p=sn())==null){Y=1;break e}if(function(ke,we){var Te=[0],Ne=[0],me=[0];t:for(;;){if(ke==null)return 0;if(we==null)return ke.a=2,0;if(ke.l=we,ke.a=0,Q(ke.m,we.data,we.w,we.ha),!it(ke.m,Te,Ne,me)){ke.a=3;break t}if(ke.xb=Y1,we.width=Te[0],we.height=Ne[0],!qn(Te[0],Ne[0],1,ke,null))break t;return 1}return e(ke.a!=0),0}(p,D)){if(D=(_=As(D.width,D.height,Y.Oa,Y.ba))==0){t:{D=p;r:for(;;){if(D==null){D=0;break t}if(e(D.s.yc!=null),e(D.s.Ya!=null),e(0<D.s.Wb),e((j=D.l)!=null),e((z=j.ma)!=null),D.xb!=0){if(D.ca=z.ba,D.tb=z.tb,e(D.ca!=null),!cu(z.Oa,j,hf)){D.a=2;break r}if(!oa(D,j.width)||j.da)break r;if((j.da||vt(D.ca.S))&&xe(),11>D.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),D.ca.f.kb.F!=null&&xe()),D.Pb&&0<D.s.ua&&D.s.vb.X==null&&!De(D.s.vb,D.s.Wa.Xa)){D.a=1;break r}D.xb=0}if(!xn(D,D.V,D.Ba,D.c,D.i,j.o,aa))break r;z.Dc=D.Ma,D=1;break t}e(D.a!=0),D=0}D=!D}D&&(_=p.a)}else _=p.a}else{if((p=new ep)==null){Y=1;break e}if(p.Fa=z.na,p.P=z.P,p.qc=z.Sa,zc(p,D)){if((_=As(D.width,D.height,Y.Oa,Y.ba))==0){if(p.Aa=0,j=Y.Oa,e((z=p)!=null),j!=null){if(0<(ee=0>(ee=j.Md)?0:100<ee?255:255*ee/100)){for(ae=pe=0;4>ae;++ae)12>(Se=z.pb[ae]).lc&&(Se.ia=ee*q4[0>Se.lc?0:Se.lc]>>3),pe|=Se.ia;pe&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=j.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}tp(p,D)||(_=p.a)}}else _=p.a}_==0&&Y.Oa!=null&&Y.Oa.fd&&(_=fu(Y.ba))}Y=_}G=Y!=0?null:11>G?X.f.RGBA.eb:X.f.kb.y}else G=null;return G};var rv=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(O,M){for(var T="",k=0;k<4;k++)T+=String.fromCharCode(O[M++]);return T}function h(O,M){return(O[M+0]<<0|O[M+1]<<8|O[M+2]<<16)>>>0}function f(O,M){return(O[M+0]<<0|O[M+1]<<8|O[M+2]<<16|O[M+3]<<24)>>>0}new l;var d=[0],c=[0],y=[],v=new l,w=t,m=function(O,M){var T={},k=0,A=!1,R=0,C=0;if(T.frames=[],!function(F,U,H,B){for(var J=0;J<B;J++)if(F[U+J]!=H.charCodeAt(J))return!0;return!1}(O,M,"RIFF",4)){var V,Z;for(f(O,M+=4),M+=8;M<O.length;){var te=u(O,M),Q=f(O,M+=4);M+=4;var K=Q+(1&Q);switch(te){case"VP8 ":case"VP8L":T.frames[k]===void 0&&(T.frames[k]={}),(P=T.frames[k]).src_off=A?C:M-8,P.src_size=R+Q+8,k++,A&&(A=!1,R=0,C=0);break;case"VP8X":(P=T.header={}).feature_flags=O[M];var W=M+4;P.canvas_width=1+h(O,W),W+=3,P.canvas_height=1+h(O,W),W+=3;break;case"ALPH":A=!0,R=K+8,C=M-8;break;case"ANIM":(P=T.header).bgcolor=f(O,M),W=M+4,P.loop_count=(V=O)[(Z=W)+0]<<0|V[Z+1]<<8,W+=2;break;case"ANMF":var q,P;(P=T.frames[k]={}).offset_x=2*h(O,M),M+=3,P.offset_y=2*h(O,M),M+=3,P.width=1+h(O,M),M+=3,P.height=1+h(O,M),M+=3,P.duration=h(O,M),M+=3,q=O[M++],P.dispose=1&q,P.blend=q>>1&1}te!="ANMF"&&(M+=K)}return T}}(w,0);m.response=w,m.rgbaoutput=!0,m.dataurl=!1;var g=m.header?m.header:null,b=m.frames?m.frames:null;if(g){g.loop_counter=g.loop_count,d=[g.canvas_height],c=[g.canvas_width];for(var S=0;S<b.length&&b[S].blend!=0;S++);}var E=b[0],I=v.WebPDecodeRGBA(w,E.src_off,E.src_size,c,d);E.rgba=I,E.imgwidth=c[0],E.imgheight=d[0];for(var L=0;L<c[0]*d[0]*4;L++)y[L]=I[L];return this.width=c,this.height=d,this.data=y,this}(function(t){var e=function(){return typeof tg=="function"},r=function(d,c,y,v){var w=4,m=o;switch(v){case t.image_compression.FAST:w=1,m=a;break;case t.image_compression.MEDIUM:w=6,m=s;break;case t.image_compression.SLOW:w=9,m=l}d=n(d,c,y,m);var g=tg(d,{level:w});return t.__addimage__.arrayBufferToBinaryString(g)},n=function(d,c,y,v){for(var w,m,g,b=d.length/c,S=new Uint8Array(d.length+b),E=h(),I=0;I<b;I+=1){if(g=I*c,w=d.subarray(g,g+c),v)S.set(v(w,y,m),g+I);else{for(var L,O=E.length,M=[];L<O;L+=1)M[L]=E[L](w,y,m);var T=f(M.concat());S.set(M[T],g+I)}m=w}return S},i=function(d){var c=Array.apply([],d);return c.unshift(0),c},a=function(d,c){var y,v=[],w=d.length;v[0]=1;for(var m=0;m<w;m+=1)y=d[m-c]||0,v[m+1]=d[m]-y+256&255;return v},o=function(d,c,y){var v,w=[],m=d.length;w[0]=2;for(var g=0;g<m;g+=1)v=y&&y[g]||0,w[g+1]=d[g]-v+256&255;return w},s=function(d,c,y){var v,w,m=[],g=d.length;m[0]=3;for(var b=0;b<g;b+=1)v=d[b-c]||0,w=y&&y[b]||0,m[b+1]=d[b]+256-(v+w>>>1)&255;return m},l=function(d,c,y){var v,w,m,g,b=[],S=d.length;b[0]=4;for(var E=0;E<S;E+=1)v=d[E-c]||0,w=y&&y[E]||0,m=y&&y[E-c]||0,g=u(v,w,m),b[E+1]=d[E]-g+256&255;return b},u=function(d,c,y){if(d===c&&c===y)return d;var v=Math.abs(c-y),w=Math.abs(d-y),m=Math.abs(d+c-y-y);return v<=w&&v<=m?d:w<=m?c:y},h=function(){return[i,a,o,s,l]},f=function(d){var c=d.map(function(y){return y.reduce(function(v,w){return v+Math.abs(w)},0)});return c.indexOf(Math.min.apply(null,c))};t.processPNG=function(d,c,y,v){var w,m,g,b,S,E,I,L,O,M,T,k,A,R,C,V=this.decode.FLATE_DECODE,Z="";if(this.__addimage__.isArrayBuffer(d)&&(d=new Uint8Array(d)),this.__addimage__.isArrayBufferView(d)){if(d=(g=new Qj(d)).imgData,m=g.bits,w=g.colorSpace,S=g.colors,[4,6].indexOf(g.colorType)!==-1){if(g.bits===8){O=(L=g.pixelBitlength==32?new Uint32Array(g.decodePixels().buffer):g.pixelBitlength==16?new Uint16Array(g.decodePixels().buffer):new Uint8Array(g.decodePixels().buffer)).length,T=new Uint8Array(O*g.colors),M=new Uint8Array(O);var te,Q=g.pixelBitlength-g.bits;for(R=0,C=0;R<O;R++){for(A=L[R],te=0;te<Q;)T[C++]=A>>>te&255,te+=g.bits;M[R]=A>>>te&255}}if(g.bits===16){O=(L=new Uint32Array(g.decodePixels().buffer)).length,T=new Uint8Array(O*(32/g.pixelBitlength)*g.colors),M=new Uint8Array(O*(32/g.pixelBitlength)),k=g.colors>1,R=0,C=0;for(var K=0;R<O;)A=L[R++],T[C++]=A>>>0&255,k&&(T[C++]=A>>>16&255,A=L[R++],T[C++]=A>>>0&255),M[K++]=A>>>16&255;m=8}v!==t.image_compression.NONE&&e()?(d=r(T,g.width*g.colors,g.colors,v),I=r(M,g.width,1,v)):(d=T,I=M,V=void 0)}if(g.colorType===3&&(w=this.color_spaces.INDEXED,E=g.palette,g.transparency.indexed)){var W=g.transparency.indexed,q=0;for(R=0,O=W.length;R<O;++R)q+=W[R];if((q/=255)===O-1&&W.indexOf(0)!==-1)b=[W.indexOf(0)];else if(q!==O){for(L=g.decodePixels(),M=new Uint8Array(L.length),R=0,O=L.length;R<O;R++)M[R]=W[L[R]];I=r(M,g.width,1)}}var P=function(F){var U;switch(F){case t.image_compression.FAST:U=11;break;case t.image_compression.MEDIUM:U=13;break;case t.image_compression.SLOW:U=14;break;default:U=12}return U}(v);return V===this.decode.FLATE_DECODE&&(Z="/Predictor "+P+" "),Z+="/Colors "+S+" /BitsPerComponent "+m+" /Columns "+g.width,(this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:y,data:d,index:c,filter:V,decodeParameters:Z,transparency:b,palette:E,sMask:I,predictor:P,width:g.width,height:g.height,bitsPerComponent:m,colorSpace:w}}}})(st.API),function(t){t.processGIF89A=function(e,r,n,i){var a=new Zj(e),o=a.width,s=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:s},h=new O0(100).encode(u,100);return t.processJPEG.call(this,h,r,n,i)},t.processGIF87A=t.processGIF89A}(st.API),Ai.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ai.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){zt.log("bit decode error:"+r)}},Ai.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[a>>7-s&1];this.data[o+4*s]=l.blue,this.data[o+4*s+1]=l.green,this.data[o+4*s+2]=l.red,this.data[o+4*s+3]=255}r!==0&&(this.pos+=4-r)}},Ai.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*i*4,s=a>>4,l=15&a,u=this.palette[s];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Ai.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Ai.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,s=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,h=n*this.width*4+4*i;this.data[h]=l,this.data[h+1]=s,this.data[h+2]=o,this.data[h+3]=u}this.pos+=t}},Ai.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,l=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,h=i*this.width*4+4*a;this.data[h]=u,this.data[h+1]=l,this.data[h+2]=s,this.data[h+3]=255}this.pos+=t}},Ai.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Ai.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*r;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=o}},Ai.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,i){var a=new Ai(e,!1),o=a.width,s=a.height,l={data:a.getData(),width:o,height:s},u=new O0(100).encode(l,100);return t.processJPEG.call(this,u,r,n,i)}}(st.API),T2.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,i){var a=new T2(e),o=a.width,s=a.height,l={data:a.getData(),width:o,height:s},u=new O0(100).encode(l,100);return t.processJPEG.call(this,u,r,n,i)}}(st.API),st.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,l=0,u=0;u<i;u+=4){var h=n[u],f=n[u+1],d=n[u+2],c=n[u+3];a[s++]=h,a[s++]=f,a[s++]=d,o[l++]=c}var y=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},st.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ys=st.API,sd=Ys.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=u.fof?u.fof:1,f=e.doKerning!==!1,d=0,c=t.length,y=0,v=s[0]||l,w=[];for(r=0;r<c;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?w.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+o*(1e3/a)||0)/1e3):(d=f&&Tt(u[n])==="object"&&!isNaN(parseInt(u[n][y],10))?u[n][y]/h:0,w.push((s[n]||v)/l+d)),y=n;return w},j2=Ys.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Ys.processArabic&&(t=Ys.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:sd.apply(this,arguments).reduce(function(a,o){return a+o},0)},O2=function(t,e,r,n){for(var i=[],a=0,o=t.length,s=0;a!==o&&s+e[a]<r;)s+=e[a],a++;i.push(t.slice(0,a));var l=a;for(s=0;a!==o;)s+e[a]>n&&(i.push(t.slice(l,a)),s=0,l=a),s+=e[a],a++;return l!==a&&i.push(t.slice(l,a)),i},L2=function(t,e,r){r||(r={});var n,i,a,o,s,l,u,h=[],f=[h],d=r.textIndent||0,c=0,y=0,v=t.split(" "),w=sd.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var m=Array(l).join(" "),g=[];v.map(function(S){(S=S.split(/\s*\n/)).length>1?g=g.concat(S.map(function(E,I){return(I&&E.length?`
`:"")+E})):g.push(S[0])}),v=g,l=j2.apply(this,[m,r])}for(a=0,o=v.length;a<o;a++){var b=0;if(n=v[a],l&&n[0]==`
`&&(n=n.substr(1),b=1),d+c+(y=(i=sd.apply(this,[n,r])).reduce(function(S,E){return S+E},0))>e||b){if(y>e){for(s=O2.apply(this,[n,i,e-(d+c),e]),h.push(s.shift()),h=[s.pop()];s.length;)f.push([s.shift()]);y=i.slice(n.length-(h[0]?h[0].length:0)).reduce(function(S,E){return S+E},0)}else h=[n];f.push(h),d=y+l,c=w}else h.push(n),d+=c+y,c=w}return u=l?function(S,E){return(E?m:"")+S.join(" ")}:function(S){return S.join(" ")},f.map(u)},Ys.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var f=this.internal.getFont(h.fontName,h.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=r.lineIndent;var s,l,u=[];for(s=0,l=n.length;s<l;s++)u=u.concat(L2.apply(this,[n[s],o,a]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},i=0;i<e.length;i++)r[e[i]]="0123456789abcdef"[i],n["0123456789abcdef"[i]]=e[i];var a=function(f){return"0x"+parseInt(f,10).toString(16)},o=t.__fontmetrics__.compress=function(f){var d,c,y,v,w=["{"];for(var m in f){if(d=f[m],isNaN(parseInt(m,10))?c="'"+m+"'":(m=parseInt(m,10),c=(c=a(m).slice(2)).slice(0,-1)+n[c.slice(-1)]),typeof d=="number")d<0?(y=a(d).slice(3),v="-"):(y=a(d).slice(2),v=""),y=v+y.slice(0,-1)+n[y.slice(-1)];else{if(Tt(d)!=="object")throw new Error("Don't know what to do with value type "+Tt(d)+".");y=o(d)}w.push(c+y)}return w.push("}"),w.join("")},s=t.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var d,c,y,v,w={},m=1,g=w,b=[],S="",E="",I=f.length-1,L=1;L<I;L+=1)(v=f[L])=="'"?d?(y=d.join(""),d=void 0):d=[]:d?d.push(v):v=="{"?(b.push([g,y]),g={},y=void 0):v=="}"?((c=b.pop())[0][c[1]]=g,y=void 0,g=c[0]):v=="-"?m=-1:y===void 0?r.hasOwnProperty(v)?(S+=r[v],y=parseInt(S,16)*m,m=1,S=""):S+=v:r.hasOwnProperty(v)?(E+=r[v],g[y]=parseInt(E,16)*m,m=1,y=void 0,E=""):E+=v;return w},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(f){var d=f.font,c=h.Unicode[d.postScriptName];c&&(d.metadata.Unicode={},d.metadata.Unicode.widths=c.widths,d.metadata.Unicode.kerning=c.kerning);var y=u.Unicode[d.postScriptName];y&&(d.metadata.Unicode.encoding=y,d.encoding=y.codePages[0])}])}(st.API),function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=r.charCodeAt(a);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,a=r.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e(sc(s)),o.metadata=t.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,n)}}])}(st),function(t){function e(){return(lt.canvg?Promise.resolve(lt.canvg):Jm(()=>import("./index.es-C1o4Vt8z.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}st.API.addSvgAsImage=function(r,n,i,a,o,s,l,u){if(isNaN(n)||isNaN(i))throw zt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw zt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=a,h.height=o;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},c=this;return e().then(function(y){return y.fromString(f,r,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(d)}).then(function(){c.addImage(h.toDataURL("image/jpeg",1),n,i,a,o,l,u)})}}(),st.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},st.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),l=[],u=0,h=0,f=0;function d(y,v){var w,m=!1;for(w=0;w<y.length;w+=1)y[w]===v&&(m=!0);return m}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var c=s.length;for(f=0;f<c;f+=1)r[s[f]].value=r[s[f]].defaultValue,r[s[f]].explicitSet=!1}if(Tt(t)==="object"){for(i in t)if(a=t[i],d(s,i)&&a!==void 0){if(r[i].type==="boolean"&&typeof a=="boolean")r[i].value=a;else if(r[i].type==="name"&&d(r[i].valueSet,a))r[i].value=a;else if(r[i].type==="integer"&&Number.isInteger(a))r[i].value=a;else if(r[i].type==="array"){for(u=0;u<a.length;u+=1)if(n=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(h=0;h<a[u].length;h+=1)typeof a[u][h]!="number"&&(n=!1);n===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}r[i].value="["+l.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,v=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?v.push("/"+y+" /"+r[y].value):v.push("/"+y+" "+r[y].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+o.length+s.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+s+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(st.API),function(t){var e=t.API,r=e.pdfEscape16=function(a,o){for(var s,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],h=[""],f=0,d=a.length;f<d;++f){if(s=o.metadata.characterToGlyph(a.charCodeAt(f)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=a.charCodeAt(f),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return h.join("");s=s.toString(16),h.push(u[4-s.length],s)}return h.join("")},n=function(a){var o,s,l,u,h,f,d;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,d=(s=Object.keys(a).sort(function(c,y){return c-y})).length;f<d;f++)o=s[f],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(u=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var s=o.font,l=o.out,u=o.newObject,h=o.putStream;if(s.metadata instanceof t.API.TTFFont&&s.encoding==="Identity-H"){for(var f=s.metadata.Unicode.widths,d=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),c="",y=0;y<d.length;y++)c+=String.fromCharCode(d[y]);var v=u();h({data:c,addLength1:!0,objectId:v}),l("endobj");var w=u();h({data:n(s.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var m=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Zs(s.fontName)),l("/FontFile2 "+v+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var g=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Zs(s.fontName)),l("/FontDescriptor "+m+" 0 R"),l("/W "+t.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+w+" 0 R"),l("/BaseFont /"+Zs(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+g+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var s=o.font,l=o.out,u=o.newObject,h=o.putStream;if(s.metadata instanceof t.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var f=s.metadata.rawData,d="",c=0;c<f.length;c++)d+=String.fromCharCode(f[c]);var y=u();h({data:d,addLength1:!0,objectId:y}),l("endobj");var v=u();h({data:n(s.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var w=u();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+y+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+Zs(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=u();for(var m=0;m<s.metadata.hmtx.widths.length;m++)s.metadata.hmtx.widths[m]=parseInt(s.metadata.hmtx.widths[m]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+Zs(s.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,s=a.text||"",l=a.x,u=a.y,h=a.options||{},f=a.mutex||{},d=f.pdfEscape,c=f.activeFontKey,y=f.fonts,v=c,w="",m=0,g="",b=y[v].encoding;if(y[v].encoding!=="Identity-H")return{text:s,x:l,y:u,options:h,mutex:f};for(g=s,v=c,Array.isArray(s)&&(g=s[0]),m=0;m<g.length;m+=1)y[v].metadata.hasOwnProperty("cmap")&&(o=y[v].metadata.cmap.unicode.codeMap[g[m].charCodeAt(0)]),o||g[m].charCodeAt(0)<256&&y[v].metadata.hasOwnProperty("Unicode")?w+=g[m]:w+="";var S="";return parseInt(v.slice(1))<14||b==="WinAnsiEncoding"?S=d(w,v).split("").map(function(E){return E.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(S=r(w,y[v])),f.isHex=!0,{text:S,x:l,y:u,options:h,mutex:f}};e.events.push(["postProcessText",function(a){var o=a.text||"",s=[],l={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?s.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):s.push(i(Object.assign({},l,{text:o[u]})).text);a.text=s}else a.text=i(Object.assign({},l,{text:o})).text}])}(st),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(st.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,a,o,s,l,u,h,f=e,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,b=0;this.__bidiEngine__={};var S=function(k){var A=k.charCodeAt(),R=A>>8,C=v[R];return C!==void 0?f[256*C+(255&A)]:R===252||R===253?"AL":m.test(R)?"L":R===8?"R":"N"},E=function(k){for(var A,R=0;R<k.length;R++){if((A=S(k.charAt(R)))==="L")return!1;if(A==="R")return!0}return!1},I=function(k,A,R,C){var V,Z,te,Q,K=A[C];switch(K){case"L":case"R":g=!1;break;case"N":case"AN":break;case"EN":g&&(K="AN");break;case"AL":g=!0,K="R";break;case"WS":K="N";break;case"CS":C<1||C+1>=A.length||(V=R[C-1])!=="EN"&&V!=="AN"||(Z=A[C+1])!=="EN"&&Z!=="AN"?K="N":g&&(Z="AN"),K=Z===V?Z:"N";break;case"ES":K=(V=C>0?R[C-1]:"B")==="EN"&&C+1<A.length&&A[C+1]==="EN"?"EN":"N";break;case"ET":if(C>0&&R[C-1]==="EN"){K="EN";break}if(g){K="N";break}for(te=C+1,Q=A.length;te<Q&&A[te]==="ET";)te++;K=te<Q&&A[te]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(Q=A.length,te=C+1;te<Q&&A[te]==="NSM";)te++;if(te<Q){var W=k[C],q=W>=1425&&W<=2303||W===64286;if(V=A[te],q&&(V==="R"||V==="AL")){K="R";break}}}K=C<1||(V=A[C-1])==="B"?"N":R[C-1];break;case"B":g=!1,i=!0,K=b;break;case"S":a=!0,K="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"BN":K="N"}return K},L=function(k,A,R){var C=k.split("");return R&&O(C,R,{hiLevel:b}),C.reverse(),A&&A.reverse(),C.join("")},O=function(k,A,R){var C,V,Z,te,Q,K=-1,W=k.length,q=0,P=[],F=b?c:d,U=[];for(g=!1,i=!1,a=!1,V=0;V<W;V++)U[V]=S(k[V]);for(Z=0;Z<W;Z++){if(Q=q,P[Z]=I(k,U,P,Z),C=240&(q=F[Q][y[P[Z]]]),q&=15,A[Z]=te=F[q][5],C>0)if(C===16){for(V=K;V<Z;V++)A[V]=1;K=-1}else K=-1;if(F[q][6])K===-1&&(K=Z);else if(K>-1){for(V=K;V<Z;V++)A[V]=te;K=-1}U[Z]==="B"&&(A[Z]=0),R.hiLevel|=te}a&&function(H,B,J){for(var re=0;re<J;re++)if(H[re]==="S"){B[re]=b;for(var ne=re-1;ne>=0&&H[ne]==="WS";ne--)B[ne]=b}}(U,A,W)},M=function(k,A,R,C,V){if(!(V.hiLevel<k)){if(k===1&&b===1&&!i)return A.reverse(),void(R&&R.reverse());for(var Z,te,Q,K,W=A.length,q=0;q<W;){if(C[q]>=k){for(Q=q+1;Q<W&&C[Q]>=k;)Q++;for(K=q,te=Q-1;K<te;K++,te--)Z=A[K],A[K]=A[te],A[te]=Z,R&&(Z=R[K],R[K]=R[te],R[te]=Z);q=Q}q++}}},T=function(k,A,R){var C=k.split(""),V={hiLevel:b};return R||(R=[]),O(C,R,V),function(Z,te,Q){if(Q.hiLevel!==0&&h)for(var K,W=0;W<Z.length;W++)te[W]===1&&(K=w.indexOf(Z[W]))>=0&&(Z[W]=w[K+1])}(C,R,V),M(2,C,A,R,V),M(1,C,A,R,V),C.join("")};return this.__bidiEngine__.doBidiReorder=function(k,A,R){if(function(V,Z){if(Z)for(var te=0;te<V.length;te++)Z[te]=te;s===void 0&&(s=E(V)),u===void 0&&(u=E(V))}(k,A),o||!l||u)if(o&&l&&s^u)b=s?1:0,k=L(k,A,R);else if(!o&&l&&u)b=s?1:0,k=T(k,A,R),k=L(k,A);else if(!o||s||l||u){if(o&&!l&&s^u)k=L(k,A),s?(b=0,k=T(k,A,R)):(b=1,k=T(k,A,R),k=L(k,A));else if(o&&s&&!l&&u)b=1,k=T(k,A,R),k=L(k,A);else if(!o&&!l&&s^u){var C=h;s?(b=1,k=T(k,A,R),b=0,h=!1,k=T(k,A,R),h=C):(b=0,k=T(k,A,R),k=L(k,A),b=1,h=!1,k=T(k,A,R),h=C,k=L(k,A))}}else b=0,k=T(k,A,R);else b=s?1:0,k=T(k,A,R);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,l=k.isOutputVisual,s=k.isInputRtl,u=k.isOutputRtl,h=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text,a=(n.x,n.y,n.options||{}),o=(n.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(o=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?o.push([r.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):o.push([r.doBidiReorder(i[s])]);n.text=o}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(st),st.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new xo(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new pO(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new eO(this.contents),this.head=new rO(this),this.name=new sO(this),this.cmap=new D_(this),this.toUnicode={},this.hhea=new nO(this),this.maxp=new lO(this),this.hmtx=new uO(this),this.post=new aO(this),this.os2=new iO(this),this.loca=new hO(this),this.glyf=new cO(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,l,u;for(u=[],o=0,s=(l=this.bbox).length;o<s;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,a,o,s;for(o=0,a=0,s=(e=""+e).length;0<=s?a<s:a>s;a=0<=s?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var zi,xo=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,a,o,s,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^s)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*a+65536*o+256*s+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,a;for(a=[],n=0,i=e.length;n<i;n++)r=e[n],a.push(this.writeByte(r));return a},t}(),eO=function(){var t;function e(r){var n,i,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,a,o,s,l,u,h,f,d,c,y,v;for(v in c=Object.keys(r).length,l=Math.log(2),f=16*Math.floor(Math.log(c)/l),o=Math.floor(f/l),h=16*c-f,(i=new xo).writeInt(this.scalarType),i.writeShort(c),i.writeShort(f),i.writeShort(o),i.writeShort(h),a=16*c,u=i.pos+a,s=null,y=[],r)for(d=r[v],i.writeString(v),i.writeInt(t(d)),i.writeInt(u),i.writeInt(d.length),y=y.concat(d),v==="head"&&(s=u),u+=d.length;u%4;)y.push(0),u++;return i.write(y),n=2981146554-t(i.data),i.pos=s+8,i.writeUInt32(n),i.data},t=function(r){var n,i,a,o;for(r=M_.call(r);r.length%4;)r.push(0);for(a=new xo(r),i=0,n=0,o=r.length;n<o;n=n+=4)i+=a.readUInt32();return 4294967295&i},e}(),tO={}.hasOwnProperty,na=function(t,e){for(var r in e)tO.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};zi=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var rO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return na(e,zi),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new xo).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),C2=function(){function t(e,r){var n,i,a,o,s,l,u,h,f,d,c,y,v,w,m,g,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(c=e.readUInt16(),d=c/2,e.pos+=6,a=function(){var S,E;for(E=[],l=S=0;0<=d?S<d:S>d;l=0<=d?++S:--S)E.push(e.readUInt16());return E}(),e.pos+=2,v=function(){var S,E;for(E=[],l=S=0;0<=d?S<d:S>d;l=0<=d?++S:--S)E.push(e.readUInt16());return E}(),u=function(){var S,E;for(E=[],l=S=0;0<=d?S<d:S>d;l=0<=d?++S:--S)E.push(e.readUInt16());return E}(),h=function(){var S,E;for(E=[],l=S=0;0<=d?S<d:S>d;l=0<=d?++S:--S)E.push(e.readUInt16());return E}(),i=(this.length-e.pos+this.offset)/2,s=function(){var S,E;for(E=[],l=S=0;0<=i?S<i:S>i;l=0<=i?++S:--S)E.push(e.readUInt16());return E}(),l=m=0,b=a.length;m<b;l=++m)for(w=a[l],n=g=y=v[l];y<=w?g<=w:g>=w;n=y<=w?++g:--g)h[l]===0?o=n+u[l]:(o=s[h[l]/2+(n-y)-(d-l)]||0)!==0&&(o+=u[l]),this.codeMap[n]=65535&o}e.pos=f}return t.encode=function(e,r){var n,i,a,o,s,l,u,h,f,d,c,y,v,w,m,g,b,S,E,I,L,O,M,T,k,A,R,C,V,Z,te,Q,K,W,q,P,F,U,H,B,J,re,ne,ge,be,Ee;switch(C=new xo,o=Object.keys(e).sort(function(Ae,De){return Ae-De}),r){case"macroman":for(v=0,w=function(){var Ae=[];for(y=0;y<256;++y)Ae.push(0);return Ae}(),g={0:0},a={},V=0,K=o.length;V<K;V++)g[ne=e[i=o[V]]]==null&&(g[ne]=++v),a[i]={old:e[i],new:g[e[i]]},w[i]=g[e[i]];return C.writeUInt16(1),C.writeUInt16(0),C.writeUInt32(12),C.writeUInt16(0),C.writeUInt16(262),C.writeUInt16(0),C.write(w),{charMap:a,subtable:C.data,maxGlyphID:v+1};case"unicode":for(A=[],f=[],b=0,g={},n={},m=u=null,Z=0,W=o.length;Z<W;Z++)g[E=e[i=o[Z]]]==null&&(g[E]=++b),n[i]={old:E,new:g[E]},s=g[E]-i,m!=null&&s===u||(m&&f.push(m),A.push(i),u=s),m=i;for(m&&f.push(m),f.push(65535),A.push(65535),T=2*(M=A.length),O=2*Math.pow(Math.log(M)/Math.LN2,2),d=Math.log(O/2)/Math.LN2,L=2*M-O,l=[],I=[],c=[],y=te=0,q=A.length;te<q;y=++te){if(k=A[y],h=f[y],k===65535){l.push(0),I.push(0);break}if(k-(R=n[k].new)>=32768)for(l.push(0),I.push(2*(c.length+M-y)),i=Q=k;k<=h?Q<=h:Q>=h;i=k<=h?++Q:--Q)c.push(n[i].new);else l.push(R-k),I.push(0)}for(C.writeUInt16(3),C.writeUInt16(1),C.writeUInt32(12),C.writeUInt16(4),C.writeUInt16(16+8*M+2*c.length),C.writeUInt16(0),C.writeUInt16(T),C.writeUInt16(O),C.writeUInt16(d),C.writeUInt16(L),J=0,P=f.length;J<P;J++)i=f[J],C.writeUInt16(i);for(C.writeUInt16(0),re=0,F=A.length;re<F;re++)i=A[re],C.writeUInt16(i);for(ge=0,U=l.length;ge<U;ge++)s=l[ge],C.writeUInt16(s);for(be=0,H=I.length;be<H;be++)S=I[be],C.writeUInt16(S);for(Ee=0,B=c.length;Ee<B;Ee++)v=c[Ee],C.writeUInt16(v);return{charMap:n,subtable:C.data,maxGlyphID:b+1}}},t}(),D_=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return na(e,zi),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,i,a;for(r.pos=this.offset,this.version=r.readUInt16(),a=r.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)n=new C2(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var i,a;return n==null&&(n="macroman"),i=C2.encode(r,n),(a=new xo).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},e}(),nO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return na(e,zi),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),iO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return na(e,zi),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,i;for(i=[],n=0;n<10;++n)i.push(r.readByte());return i}(),this.charRange=function(){var n,i;for(i=[],n=0;n<4;++n)i.push(r.readInt());return i}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(r.readInt());return i}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),aO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return na(e,zi),e.prototype.tag="post",e.prototype.parse=function(r){var n,i,a;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(i=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],a=[];r.pos<this.offset+this.length;)n=r.readByte(),a.push(this.names.push(r.readString(n)));return a;case 151552:return i=r.readUInt16(),this.offsets=r.read(i);case 196608:break;case 262144:return this.map=(function(){var s,l,u;for(u=[],o=s=0,l=this.file.maxp.numGlyphs;0<=l?s<l:s>l;o=0<=l?++s:--s)u.push(r.readUInt32());return u}).call(this)}},e}(),oO=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},sO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return na(e,zi),e.prototype.tag="name",e.prototype.parse=function(r){var n,i,a,o,s,l,u,h,f,d,c;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),i=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)i.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(u={},o=f=0,d=i.length;f<d;o=++f)a=i[o],r.pos=a.offset,h=r.readString(a.length),s=new oO(h,a),u[c=a.nameID]==null&&(u[c]=[]),u[a.nameID].push(s);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),lO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return na(e,zi),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),uO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return na(e,zi),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,i,a,o,s,l,u;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,f;for(f=[],n=h=0;0<=a?h<a:h>a;n=0<=a?++h:--h)f.push(r.readInt16());return f}(),this.widths=(function(){var h,f,d,c;for(c=[],h=0,f=(d=this.metrics).length;h<f;h++)o=d[h],c.push(o.advance);return c}).call(this),i=this.widths[this.widths.length-1],u=[],n=s=0;0<=a?s<a:s>a;n=0<=a?++s:--s)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),M_=[].slice,cO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return na(e,zi),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,i,a,o,s,l,u,h,f,d;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,i=o.indexOf(r),(a=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+i,s=(l=new xo(n.read(a))).readShort(),h=l.readShort(),d=l.readShort(),u=l.readShort(),f=l.readShort(),this.cache[r]=s===-1?new dO(l,h,d,u,f):new fO(l,s,h,d,u,f),this.cache[r]))},e.prototype.encode=function(r,n,i){var a,o,s,l,u;for(s=[],o=[],l=0,u=n.length;l<u;l++)a=r[n[l]],o.push(s.length),a&&(s=s.concat(a.encode(i)));return o.push(s.length),{table:s,offsets:o}},e}(),fO=function(){function t(e,r,n,i,a,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),dO=function(){function t(e,r,n,i,a){var o,s;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new xo(M_.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),hO=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return na(e,zi),e.prototype.tag="loca",e.prototype.parse=function(r){var n,i;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(r.readUInt32());return o}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,s=0;s<i.length;++s)if(i[s]=a,o<n.length&&n[o]==s){++o,i[s]=a;var l=this.offsets[s],u=this.offsets[s+1]-l;u>0&&(a+=u)}for(var h=new Array(4*i.length),f=0;f<i.length;++f)h[4*f+3]=255&i[f],h[4*f+2]=(65280&i[f])>>8,h[4*f+1]=(16711680&i[f])>>16,h[4*f]=(4278190080&i[f])>>24;return h},e}(),pO=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,a;for(r in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,a,o,s,l;for(i={},o=0,s=e.length;o<s;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in r=[],i)(n=i[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in l=this.glyphsFor(r))n=l[a],i[a]=n;return i},t.prototype.encode=function(e,r){var n,i,a,o,s,l,u,h,f,d,c,y,v,w,m;for(i in n=D_.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),c={0:0},m=n.charMap)c[(l=m[i]).old]=l.new;for(y in d=n.maxGlyphID,o)y in c||(c[y]=d++);return h=function(g){var b,S;for(b in S={},g)S[g[b]]=b;return S}(c),f=Object.keys(h).sort(function(g,b){return g-b}),v=function(){var g,b,S;for(S=[],g=0,b=f.length;g<b;g++)s=f[g],S.push(h[s]);return S}(),a=this.font.glyf.encode(o,v,c),u=this.font.loca.encode(a.offsets,v),w={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},t}();st.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,a,o;if(Array.isArray(r))return"["+function(){var s,l,u;for(u=[],s=0,l=r.length;s<l;s++)n=r[s],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in a=["<<"],r)o=r[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+r},e}();const F_=t=>{const e=new st,r=e.internal.pageSize.getWidth(),n=20,i="#4F46E5",a="#334155",o="#0F172A";e.setFont("helvetica","bold"),e.setFontSize(22),e.setTextColor(i),e.text("Diary Recovery Kit",n,30),e.setFontSize(10),e.setTextColor("#64748B"),e.text(`Generated on: ${new Date().toLocaleDateString()}`,n,38),e.setDrawColor(239,68,68),e.setLineWidth(.5),e.rect(n,50,r-n*2,25),e.setFont("helvetica","bold"),e.setFontSize(12),e.setTextColor(220,38,38),e.text(" EXTREMELY SENSITIVE DOCUMENT",n+5,60),e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor(a),e.text("This document contains your Master Password and Encryption Keys.",n+5,68),e.text("Keep it safe. If you lose your password, this is the ONLY way to restore your data.",n+5,73);let s=95;e.setFont("helvetica","bold"),e.setFontSize(14),e.setTextColor(o),e.text("1. Login Credentials",n,s),s+=10,e.setFontSize(10),e.setTextColor("#64748B"),e.text("Email Address:",n,s),e.setFont("courier","bold"),e.setFontSize(12),e.setTextColor(o),e.text(t.email,n+40,s),s+=10,e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor("#64748B"),e.text("Master Password:",n,s),e.setFillColor(241,245,249),e.rect(n,s+5,r-n*2,15,"F"),e.setFont("courier","bold"),e.setFontSize(14),e.setTextColor(o),e.text(t.password,n+5,s+14),s+=40,e.setFont("helvetica","bold"),e.setFontSize(14),e.setTextColor(o),e.text("2. Emergency Technical Keys",n,s),s+=8,e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor(a),e.text("If the password mechanism ever changes or fails, these raw keys can mathematically",n,s),e.text("decrypt your data using standard AES-GCM algorithms.",n,s+5),s+=15,e.setFontSize(10),e.setTextColor("#64748B"),e.text("Encryption Salt:",n,s),e.setFont("courier","normal"),e.setFontSize(9),e.setTextColor(o),e.text(t.salt,n,s+6),s+=20,e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor("#64748B"),e.text("Raw Encryption Key (AES-GCM):",n,s),e.setFont("courier","normal"),e.setFontSize(9),e.setTextColor(o),e.text(t.rawKey,n,s+6),e.setFont("helvetica","italic"),e.setFontSize(8),e.setTextColor("#94A3B8"),e.text("Diary App - Zero Knowledge Architecture",r/2,280,{align:"center"}),e.save("Diary-Recovery-Kit.pdf")},mO=({onSuccess:t,session:e})=>{const[r,n]=ie.useState(""),[i,a]=ie.useState(!1),[o,s]=ie.useState(!1),[l,u]=ie.useState(null),[h,f]=ie.useState(!1),[d,c]=ie.useState(!1),[y,v]=ie.useState(null),[w,m]=ie.useState(!1),g=async E=>{var I,L,O;if(E.preventDefault(),r.length<6){u("Password must be at least 6 characters long.");return}s(!0),u(null);try{const M=e.user;if(!M)throw new Error("User not available.");const k=`v1:600000:${BA()}`,A=await l_(r,k),{iv:R,data:C}=await D1(A,o_),V=(I=M.user_metadata)==null?void 0:I.full_name,Z=((L=M.user_metadata)==null?void 0:L.avatar_url)||((O=M.user_metadata)==null?void 0:O.picture),{error:te}=await Mt.from("profiles").insert({id:M.id,salt:k,key_check_value:C,key_check_iv:R,full_name:V,avatar_url:Z});if(te)throw te;const Q=await F1(A);v({key:A,rawKey:Q,salt:k,password:r,email:M.email||"Unknown Email"})}catch(M){u(M.error_description||M.message||"An unknown error occurred during setup."),console.error("Encryption initialization failed:",M)}finally{s(!1)}},b=()=>{y&&(F_({email:y.email,password:y.password,salt:y.salt,rawKey:y.rawKey}),m(!0))},S=()=>{y&&t(y.key)};return y?x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900",children:x.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md border-t-4 border-green-500 animate-fade-in",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900 mb-4",children:x.jsx("svg",{className:"h-6 w-6 text-green-600 dark:text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),x.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Setup Complete!"}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Your secure diary is ready."})]}),x.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-md p-4",children:[x.jsxs("h3",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-200 flex items-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Important: Backup Required"]}),x.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-2",children:["Because we can't reset your password, you ",x.jsx("strong",{children:"must"})," download your Recovery Kit. It contains your password and raw encryption keys."]})]}),x.jsxs("button",{onClick:b,className:"w-full flex items-center justify-center gap-2 px-4 py-3 font-semibold text-white bg-slate-800 hover:bg-slate-700 dark:bg-slate-700 dark:hover:bg-slate-600 rounded-md transition-all shadow-lg",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Recovery Kit"]}),x.jsx("button",{onClick:S,disabled:!w,className:"w-full px-4 py-2 font-semibold text-indigo-600 bg-indigo-50 rounded-md hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-400 transition-colors dark:bg-transparent dark:text-indigo-400 dark:hover:text-indigo-300 dark:disabled:text-slate-600",children:w?"Continue to App":"Download Kit to Continue"})]})}):x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900",children:x.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Final Security Step"}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"To complete your secure setup, please create your password."})]}),x.jsx("p",{className:"text-xs text-center text-slate-600 dark:text-slate-300 bg-slate-50 dark:bg-slate-900/50 p-3 rounded-md border dark:border-slate-700",children:"This is required to create your unique encryption key. Your password is never stored, and this one-time step ensures your diary remains private and end-to-end encrypted."}),l&&x.jsx("p",{className:"text-center text-red-500 bg-red-50 p-3 rounded-md",children:l}),x.jsxs("form",{className:"space-y-6",onSubmit:g,children:[x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:i?"text":"password",placeholder:"Your password",value:r,required:!0,minLength:6,onChange:E=>n(E.target.value),className:"w-full px-4 py-2 pr-10 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",autoComplete:"new-password"}),x.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute inset-y-0 right-0 flex items-center px-3 text-slate-500 dark:text-slate-400","aria-label":i?"Hide password":"Show password",children:i?x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),x.jsx("path",{fillRule:"evenodd",d:"M.458 10C3.732 4.943 9.522 3 10 3s6.268 1.943 9.542 7c-3.274 5.057-9.042 7-9.542 7S3.732 15.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.27 8.138 15.522 6 10 6c-1.55 0-2.998.48-4.257 1.254l-1.74-1.741zM10 12a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"}),x.jsx("path",{d:"M2.042 10c.832 2.345 3.16 4 5.918 4 1.55 0 2.998-.48 4.257-1.254l-1.473-1.473A3.999 3.999 0 0110 14c-2.209 0-4-1.791-4-4a3.999 3.999 0 011.21-2.828L5.293 5.293A10.014 10.014 0 00.458 10c1.274 1.862 4.022 4 9.542 4 1.105 0 2.158-.149 3.168-.43L10.373 12.16A4.003 4.003 0 0110 12z"})]})})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("label",{className:"flex items-start gap-3 cursor-pointer text-sm text-slate-600 dark:text-slate-400",children:[x.jsx("input",{type:"checkbox",checked:h,onChange:E=>f(E.target.checked),className:"mt-1 h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-slate-300 dark:border-slate-600 dark:bg-slate-900 dark:checked:bg-indigo-500",required:!0}),x.jsxs("span",{children:["I have read and agree to the ",x.jsx(Pl,{to:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-indigo-600 hover:underline dark:text-indigo-400",children:"Privacy Policy"}),"."]})]}),x.jsxs("label",{className:"flex items-start gap-3 cursor-pointer text-sm text-slate-600 dark:text-slate-400",children:[x.jsx("input",{type:"checkbox",checked:d,onChange:E=>c(E.target.checked),className:"mt-1 h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-slate-300 dark:border-slate-600 dark:bg-slate-900 dark:checked:bg-indigo-500",required:!0}),x.jsxs("span",{children:["I have read and agree to the ",x.jsx(Pl,{to:"/terms",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-indigo-600 hover:underline dark:text-indigo-400",children:"Terms of Use"}),"."]})]})]}),x.jsx("button",{type:"submit",disabled:o||!h||!d,className:"w-full px-4 py-2 font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 disabled:bg-indigo-300 disabled:cursor-not-allowed transition-colors",children:o?"Securing...":"Initialize Diary"})]})]})})},B_=typeof PublicKeyCredential<"u"&&typeof PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable=="function",q_=async()=>{if(!B_)return!1;try{return await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()}catch{return!1}},gO=t=>Uint8Array.from(t,e=>e.charCodeAt(0)),vO=async(t,e)=>{var v,w,m,g;if(!B_)throw new Error("WebAuthn not supported");const r=window.crypto.getRandomValues(new Uint8Array(32)),n=ls(r.buffer),i=window.crypto.getRandomValues(new Uint8Array(32)),a=gO(e),o={publicKey:{challenge:i,rp:{name:"Diary App",id:window.location.hostname},user:{id:a,name:"diary-user",displayName:"Diary Owner"},pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required",residentKey:"required",requireResidentKey:!0},timeout:6e4,extensions:{prf:{eval:{first:r}}}}},s=await navigator.credentials.create(o);if(!s)throw new Error("Failed to create credential");const l=ls(s.rawId);let u=null;const h=s.getClientExtensionResults();if((w=(v=h==null?void 0:h.prf)==null?void 0:v.results)!=null&&w.first)u=new Uint8Array(h.prf.results.first);else{const b={publicKey:{challenge:window.crypto.getRandomValues(new Uint8Array(32)),rpId:window.location.hostname,allowCredentials:[{type:"public-key",id:s.rawId}],userVerification:"required",extensions:{prf:{eval:{first:r}}}}},S=await navigator.credentials.get(b),E=S==null?void 0:S.getClientExtensionResults();(g=(m=E==null?void 0:E.prf)==null?void 0:m.results)!=null&&g.first&&(u=new Uint8Array(E.prf.results.first))}if(!u)throw new Error("Authenticator does not support PRF extension. Please ensure your device and browser support WebAuthn PRF.");const f=await window.crypto.subtle.importKey("raw",u,"AES-GCM",!1,["encrypt","decrypt"]),d=await F1(t),{iv:c,data:y}=await D1(f,d);return{credentialId:l,salt:n,encryptedKey:y,iv:c}},yO=async t=>{var u;const e=us(t.salt),r=us(t.credentialId),n={publicKey:{challenge:window.crypto.getRandomValues(new Uint8Array(32)),rpId:window.location.hostname,allowCredentials:[{type:"public-key",id:r}],userVerification:"required",extensions:{prf:{eval:{first:e}}}}},i=await navigator.credentials.get(n);if(!i)throw new Error("Authentication failed");const a=(u=i==null?void 0:i.getClientExtensionResults())==null?void 0:u.prf;if(!a||!a.results||!a.results.first)throw new Error("Could not retrieve PRF key from authenticator.");const o=new Uint8Array(a.results.first),s=await window.crypto.subtle.importKey("raw",o,"AES-GCM",!1,["encrypt","decrypt"]),l=await M1(s,t.encryptedKey,t.iv);return $A(l)},wO=({onSuccess:t,session:e})=>{const[r,n]=ie.useState(""),[i,a]=ie.useState(!1),[o,s]=ie.useState(!1),[l,u]=ie.useState(null),{deriveAndVerifyKey:h}=ps(),[f,d]=ie.useState(!1),[c,y]=ie.useState(!1);ie.useEffect(()=>{(async()=>{const g=await q_();y(g),localStorage.getItem(`diary_bio_${e.user.id}`)&&d(!0)})()},[e.user.id]);const v=async m=>{m.preventDefault(),s(!0),u(null);try{const g=e.user;if(!g)throw new Error("User not available.");const b=await h(r,g.id);b?t(b):u("Incorrect password. Please try again.")}catch(g){u(g.error_description||g.message||"An unknown error occurred."),console.error("Key derivation failed:",g)}finally{s(!1)}},w=async()=>{s(!0),u(null);try{const m=localStorage.getItem(`diary_bio_${e.user.id}`);if(!m)throw new Error("No biometric data found.");const g=JSON.parse(m),b=await yO(g);t(b)}catch(m){console.error("Biometric unlock failed:",m),u("Biometric unlock failed. Please use your password.")}finally{s(!1)}};return x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900",children:x.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Unlock Your Diary"}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"For your security, please enter your password to continue."})]}),x.jsx("p",{className:"text-xs text-center text-slate-600 dark:text-slate-300 bg-slate-50 dark:bg-slate-900/50 p-3 rounded-md border dark:border-slate-700",children:"Your diary is end-to-end encrypted. We need your password to securely decrypt your entries."}),l&&x.jsx("p",{className:"text-center text-red-500 bg-red-50 p-3 rounded-md",children:l}),x.jsxs("form",{className:"space-y-6",onSubmit:v,children:[x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:i?"text":"password",placeholder:"Your password",value:r,required:!0,onChange:m=>n(m.target.value),className:"w-full px-4 py-2 pr-10 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200","aria-label":"Password for decryption",autoComplete:"current-password"}),x.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute inset-y-0 right-0 flex items-center px-3 text-slate-500 dark:text-slate-400","aria-label":i?"Hide password":"Show password",children:i?x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),x.jsx("path",{fillRule:"evenodd",d:"M.458 10C3.732 4.943 9.522 3 10 3s6.268 1.943 9.542 7c-3.274 5.057-9.042 7-9.542 7S3.732 15.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.27 8.138 15.522 6 10 6c-1.55 0-2.998.48-4.257 1.254l-1.74-1.741zM10 12a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"}),x.jsx("path",{d:"M2.042 10c.832 2.345 3.16 4 5.918 4 1.55 0 2.998-.48 4.257-1.254l-1.473-1.473A3.999 3.999 0 0110 14c-2.209 0-4-1.791-4-4a3.999 3.999 0 011.21-2.828L5.293 5.293A10.014 10.014 0 00.458 10c1.274 1.862 4.022 4 9.542 4 1.105 0 2.158-.149 3.168-.43L10.373 12.16A4.003 4.003 0 0110 12z"})]})})]}),x.jsx("button",{type:"submit",disabled:o,className:"w-full px-4 py-2 font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 disabled:bg-indigo-300",children:o?"Unlocking...":"Unlock with Password"})]}),c&&f&&x.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700 text-center",children:x.jsxs("button",{type:"button",onClick:w,disabled:o,className:"flex flex-col items-center justify-center gap-2 w-full p-4 rounded-lg border-2 border-dashed border-indigo-300 hover:border-indigo-500 hover:bg-indigo-50 dark:border-slate-600 dark:hover:border-indigo-400 dark:hover:bg-indigo-900/20 transition-all group",children:[x.jsx("div",{className:"h-12 w-12 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 group-hover:scale-110 transition-transform",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})})}),x.jsx("span",{className:"font-semibold text-indigo-600 dark:text-indigo-300",children:"Unlock with Biometrics"})]})})]})})},bO=({onClick:t})=>x.jsx("button",{onClick:t,className:"fixed top-3 left-4 z-40 p-2 rounded-md bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm hover:bg-slate-200/50 dark:hover:bg-slate-700/50","aria-label":"Open navigation menu",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),xO=({isOpen:t,existingTags:e,suggestedTags:r,onConfirm:n,onCancel:i})=>{const[a,o]=ie.useState([]);if(ie.useEffect(()=>{if(t){const u=Array.from(new Set([...e,...r]));o(u)}},[t,e,r]),!t)return null;const s=u=>{o(h=>h.filter(f=>f!==u))},l=document.getElementById("portal-root");return l?w1.createPortal(x.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",role:"dialog","aria-modal":"true",children:x.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md border border-slate-200 dark:border-slate-700 overflow-hidden",children:[x.jsxs("div",{className:"p-6",children:[x.jsx("div",{className:"flex items-start justify-between mb-4",children:x.jsxs("div",{children:[x.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})}),"Smart Tags"]}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"We found some keywords in your entry. Review them before saving."})]})}),x.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-lg p-4 min-h-[100px] border border-slate-100 dark:border-slate-700",children:a.length>0?x.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(u=>{const h=!e.includes(u);return x.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium transition-colors group ${h?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/60 dark:text-indigo-200 border border-indigo-200 dark:border-indigo-800":"bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 border border-transparent"}`,children:[u,x.jsx("button",{onClick:()=>s(u),className:"hover:text-red-500 dark:hover:text-red-400 focus:outline-none opacity-60 group-hover:opacity-100 transition-opacity","aria-label":`Remove tag ${u}`,children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},u)})}):x.jsx("p",{className:"text-sm text-slate-400 italic text-center mt-4",children:"No tags selected."})}),x.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md border border-blue-100 dark:border-blue-800 flex gap-3",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),x.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-300",children:[x.jsx("p",{className:"font-semibold mb-1",children:"Privacy Check:"}),x.jsxs("p",{children:["1. Analysis happens ",x.jsx("strong",{children:"offline"})," on your device."]}),x.jsxs("p",{children:["2. Tags are saved as ",x.jsx("strong",{children:"unencrypted metadata"})," (for search)."]}),x.jsxs("p",{children:["3. Your diary body remains ",x.jsx("strong",{children:"fully encrypted"}),"."]})]})]})]}),x.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/80 px-6 py-4 flex justify-end gap-3 border-t border-slate-100 dark:border-slate-700",children:[x.jsx("button",{onClick:i,className:"px-4 py-2 text-sm font-semibold text-slate-600 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 transition-colors",children:"Save without suggestions"}),x.jsx("button",{onClick:()=>n(a),className:"px-6 py-2 text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg shadow-sm shadow-indigo-200 dark:shadow-none transition-all transform active:scale-95",children:"Confirm & Save"})]})]})}),l):null},_O="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",R2=()=>new Promise(t=>setTimeout(t,0)),SO=({session:t,theme:e,onToggleTheme:r})=>{const[n,i]=ie.useState([]),[a,o]=ie.useState(!0),{key:s,setKey:l,encrypt:u,decrypt:h,encryptBinary:f,lock:d}=ps(),[c,y]=ie.useState("checking"),[v,w]=ie.useState(null),[m,g]=ie.useState(()=>window.innerWidth>=768),[b,S]=ie.useState("synced"),[E,I]=ie.useState(null),[L,O]=ie.useState(!1),[M,T]=ie.useState(null),[k,A]=ie.useState([]),R=ie.useRef(new Set),{addToast:C}=Uh(),V=Ra(),Z=qi();ie.useEffect(()=>{navigator.geolocation.getCurrentPosition(async oe=>{try{const se=await VA(oe.coords.latitude,oe.coords.longitude);I(se)}catch(se){console.error("Failed to fetch weather:",se)}},oe=>{console.warn("Geolocation permission denied. Weather feature disabled.",oe.message)},{enableHighAccuracy:!1,timeout:1e4,maximumAge:1e3*60*60})},[]),ie.useEffect(()=>{(async()=>{if(s){y("ready");return}try{const{data:se}=await Mt.from("profiles").select("id").eq("id",t.user.id).maybeSingle();y(se?"reauth":"needed")}catch(se){console.error("Error checking profile:",se),C("Error accessing profile. Please log out and in again.","error"),await Mt.auth.signOut()}})()},[s,t.user.id,C]);const te=oe=>{l(oe),y("ready")};ie.useEffect(()=>{const oe=()=>{if(document.visibilityState==="hidden")localStorage.setItem("diary_last_active",Date.now().toString());else if(document.visibilityState==="visible"){const se=localStorage.getItem("diary_last_active");se&&(Date.now()-parseInt(se,10)>12e4&&s&&(d(),C("Diary locked for security.","info")),localStorage.removeItem("diary_last_active"))}};return document.addEventListener("visibilitychange",oe),()=>document.removeEventListener("visibilitychange",oe)},[s,d,C]);const Q=ie.useCallback(async()=>{try{const{data:oe,error:se}=await Mt.from("profiles").select("*").eq("id",t.user.id).single();if(se)throw se;w(oe)}catch(oe){console.error("Error fetching profile:",oe)}},[t.user.id]),K=ie.useCallback(async()=>{if(s){o(!0);try{const{data:oe,error:se}=await Mt.from("diaries").select("id, created_at, mood, tags, owner_id, journal").order("created_at",{ascending:!1});if(se)throw se;const ce=(oe||[]).map(ve=>({id:ve.id,created_at:ve.created_at,mood:ve.mood,tags:ve.tags,owner_id:ve.owner_id,journal:ve.journal||"Personal",title:"",content:"",isDecrypted:!1,isLoading:!1}));i(ce)}catch(oe){console.error("Error fetching entries:",oe),C("Could not fetch entries.","error")}finally{o(!1)}}},[s,C]),W=ie.useCallback(async oe=>{if(R.current.has(oe)||!s)return;const se=n.findIndex(ce=>ce.id===oe);if(se!==-1&&!n[se].isDecrypted){R.current.add(oe),i(ce=>ce.map(ve=>ve.id===oe?{...ve,isLoading:!0}:ve));try{const{data:ce,error:ve}=await Mt.from("diaries").select("encrypted_entry, iv").eq("id",oe).single();if(ve)throw ve;const de=await h(s,ce.encrypted_entry,ce.iv),{title:Le,content:Me,audio:qe}=JSON.parse(de);i(Ke=>Ke.map(Ze=>Ze.id===oe?{...Ze,title:Le,content:Me,audio:qe,isDecrypted:!0,isLoading:!1}:Ze))}catch(ce){console.error(`Error decrypting entry ${oe}:`,ce),i(ve=>ve.map(de=>de.id===oe?{...de,isLoading:!1}:de))}finally{R.current.delete(oe)}}},[n,s,h]);ie.useEffect(()=>{c==="ready"&&(K(),Q())},[K,Q,c]);const q=ie.useMemo(()=>{const oe=new Set;return n.forEach(se=>{se.journal?oe.add(se.journal):oe.add("Personal")}),Array.from(oe).sort()},[n]),P=oe=>{const ce=new DOMParser().parseFromString(oe,"text/html");return ce.querySelectorAll("img.secure-diary-image").forEach(de=>{var Le;(Le=de.getAttribute("src"))!=null&&Le.startsWith("blob:")&&de.setAttribute("src",_O)}),ce.body.innerHTML},F=ie.useCallback(async oe=>{if(!s){C("Security session expired.","error");return}S("encrypting");try{let se=null;const ve=(oe.id?n.find(Ve=>Ve.id===oe.id):null)||{};if(oe.tempAudioBlob)try{const Ve=await oe.tempAudioBlob.arrayBuffer(),{iv:et,data:$e}=await f(s,Ve),Fe=new Blob([$e],{type:"application/octet-stream"}),Bt=`${t.user.id}/${Date.now()}-audio.bin`,{error:ct}=await Mt.storage.from("diary-audio").upload(Bt,Fe,{upsert:!0});if(ct)throw ct;se={path:Bt,iv:et,type:oe.tempAudioBlob.type}}catch(Ve){console.error("Audio upload failed",Ve),C("Failed to secure audio. Saving text only.","error")}else"audio"in ve&&(se=ve.audio);oe.audio!==void 0&&(se=oe.audio);const de=P(oe.content),Le=JSON.stringify({title:oe.title,content:de,audio:se}),{iv:Me,data:qe}=await u(s,Le),Ke=!!oe.id,Ze={encrypted_entry:qe,iv:Me,mood:oe.mood,tags:oe.tags,journal:oe.journal||"Personal",created_at:oe.created_at};if(Ke){const{error:Ve}=await Mt.from("diaries").update(Ze).eq("id",oe.id);if(Ve)throw Ve;i(et=>et.map($e=>$e.id===oe.id?{...$e,...oe,audio:se,isDecrypted:!0}:$e)),C("Entry saved!","success"),V(`/app/entry/${oe.id}`)}else{const{data:Ve,error:et}=await Mt.from("diaries").insert({...Ze,owner_id:t.user.id}).select("id, created_at, mood, tags, owner_id, journal").single();if(et)throw et;const $e={...Ve,...oe,audio:se,id:Ve.id,isDecrypted:!0,isLoading:!1};i(Fe=>[$e,...Fe].sort((Bt,ct)=>new Date(ct.created_at).getTime()-new Date(Bt.created_at).getTime())),C("Entry created!","success"),V(`/app/entry/${Ve.id}`)}S("synced"),O(!1),T(null)}catch(se){console.error("Error saving entry:",se),C("Failed to save entry.","error"),S("error")}},[s,t.user.id,u,f,C,n,V]),U=ie.useCallback(async oe=>{const se=oe.tags||[],ve=GA(oe.content).filter(de=>!se.some(Le=>Le.toLowerCase()===de.toLowerCase()));ve.length>0?(T(oe),A(ve),O(!0)):await F(oe)},[F]),H=oe=>{if(M){const se=M.title||"",ce=M.content||"",ve=M.created_at||new Date().toISOString();F({...M,title:se,content:ce,created_at:ve,tags:oe})}},B=()=>{if(M){const oe=M.title||"",se=M.content||"",ce=M.created_at||new Date().toISOString();F({...M,title:oe,content:se,created_at:ce})}},J=async oe=>{try{const{error:se}=await Mt.from("diaries").delete().eq("id",oe);if(se)throw se;i(ce=>ce.filter(ve=>ve.id!==oe)),C("Entry deleted successfully.","success"),V("/app")}catch(se){console.error("Error deleting entry:",se),C("Failed to delete entry.","error")}},re=async oe=>{try{const{data:se,error:ce}=await Mt.from("profiles").update(oe).eq("id",t.user.id).select().single();if(ce)throw ce;w(se),C("Profile updated successfully!","success")}catch(se){C("Failed to update profile.","error"),console.error("Error updating profile:",se)}},ne=async oe=>{try{const se=oe.name.split(".").pop(),ce=`${t.user.id}/${Date.now()}.${se}`,{error:ve}=await Mt.storage.from("avatars").upload(ce,oe,{upsert:!0});if(ve)throw ve;const{error:de}=await Mt.from("profiles").update({avatar_url:ce}).eq("id",t.user.id);if(de)throw de;w(Le=>Le?{...Le,avatar_url:ce}:null)}catch(se){throw console.error("Error uploading avatar:",se),se}},ge=async oe=>{if(s)try{const{count:se,error:ce}=await Mt.from("diaries").select("*",{count:"exact",head:!0});if(ce)throw ce;const ve=se||0;if(ve===0){C("No entries to export.","info");return}const de=new Z4("application/zip"),Le=new e3(de),Me=50;let qe=0,Ke=[],Ze="";for(let Fe=0;Fe<ve;Fe+=Me){oe(`Processing ${qe} / ${ve}`),await R2();const{data:Bt,error:ct}=await Mt.from("diaries").select("*").order("created_at",{ascending:!1}).range(Fe,Fe+Me-1);if(ct)throw ct;if(Bt)for(const $t of Bt){try{const gt=await h(s,$t.encrypted_entry,$t.iv),xt=JSON.parse(gt),Br=new Date($t.created_at),vt=`${Br.getFullYear()}-${String(Br.getMonth()+1).padStart(2,"0")}`;Ze&&vt!==Ze&&Ke.length>0&&(await Le.add(`${Ze}.json`,new wv(JSON.stringify(Ke,null,2))),Ke=[],await R2()),Ze=vt,Ke.push({id:$t.id,created_at:$t.created_at,title:xt.title,content:xt.content,tags:$t.tags,mood:$t.mood,journal:$t.journal,audio:xt.audio?"Audio file attached":void 0})}catch(gt){console.error(`Failed to export entry ${$t.id}`,gt)}qe++}}Ke.length>0&&await Le.add(`${Ze}.json`,new wv(JSON.stringify(Ke,null,2))),oe("Finalizing ZIP...");const Ve=await Le.close(),et=URL.createObjectURL(Ve),$e=document.createElement("a");$e.href=et,$e.download=`diary_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild($e),$e.click(),document.body.removeChild($e),URL.revokeObjectURL(et),C("Export complete!","success")}catch(se){console.error("Export failed:",se),C("Export failed.","error")}},be=async()=>{await Mt.auth.signOut(),V("/")};let Ee="timeline";Z.pathname.includes("/calendar")?Ee="calendar":Z.pathname.includes("/search")?Ee="search":Z.pathname.includes("/profile")&&(Ee="profile");const De=new URLSearchParams(Z.search).get("journal"),_e=oe=>{V(oe?`/app?journal=${encodeURIComponent(oe)}`:"/app")},ue=oe=>{V(oe==="timeline"?"/app":`/app/${oe}`)};if(c!=="ready"){let oe;switch(c){case"checking":oe=x.jsx("p",{children:"Initializing Secure Session..."});break;case"needed":oe=x.jsx(mO,{onSuccess:te,session:t});break;case"reauth":oe=x.jsx(wO,{onSuccess:te,session:t});break;default:oe=x.jsx("p",{children:"An unexpected error occurred."})}return x.jsx("main",{className:"flex items-center justify-center h-screen bg-[#FBF8F3] dark:bg-slate-900 text-slate-800 dark:text-slate-200",children:oe})}const He={entries:n,profile:v,loading:a,weather:E,uniqueJournals:q,refreshEntries:K,loadEntryContent:W,saveEntry:U,deleteEntry:J,updateProfile:re,uploadAvatar:ne,exportData:ge,theme:e,onToggleTheme:r,key:s,encryptBinary:f,session:t,signOut:be};return x.jsxs("div",{className:"h-screen w-screen flex flex-col font-sans bg-[#FBF8F3] dark:bg-slate-900",children:[x.jsx(mj,{isEditing:Z.pathname.includes("/edit")||Z.pathname.includes("/new"),onSave:()=>{},onCancel:()=>V(-1),currentDate:new Date,weather:E,theme:e,onToggleTheme:r,saveStatus:b,profile:v,onShowProfile:()=>V("/app/profile"),isToolsPanelVisible:!1,onToggleToolsPanel:()=>{},isLeftSidebarVisible:m}),!m&&x.jsx(bO,{onClick:()=>g(!0)}),m&&x.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-20 md:hidden",onClick:()=>g(!1),"aria-hidden":"true"}),x.jsxs("div",{className:`flex flex-1 overflow-hidden transition-all duration-300 ${m?"md:pl-64":"pl-0"} relative`,children:[x.jsx(KA,{isVisible:m,onClose:()=>g(!1),activeView:Ee,onChangeView:ue,onNewEntry:()=>V("/app/new"),journals:q,activeJournal:De,onSelectJournal:_e}),x.jsx("main",{className:"flex-1 p-4 sm:p-6 md:p-8 overflow-y-auto min-w-0 w-full relative",children:x.jsx(wN,{context:He})})]}),x.jsx(xO,{isOpen:L,existingTags:(M==null?void 0:M.tags)||[],suggestedTags:k,onConfirm:H,onCancel:B})]})};function zl(){return iN()}const kO=({entries:t,onSelectEntry:e})=>t.length===0?null:x.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-slate-800/50 dark:to-slate-800/50 p-6 rounded-lg border border-indigo-200 dark:border-slate-700 shadow-sm",children:[x.jsxs("h3",{className:"text-lg font-bold text-indigo-800 dark:text-indigo-300 mb-4 flex items-center gap-2",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l-3-3m0 0l3-3m-3 3h9"})]}),"On This Day..."]}),x.jsx("div",{className:"space-y-3",children:t.map(r=>{const n=new Date(r.created_at).getFullYear(),i=new Date().getFullYear()-n;return x.jsxs("div",{onClick:()=>e(r.id),className:"bg-white/60 dark:bg-slate-700/50 p-3 rounded-md cursor-pointer hover:bg-white dark:hover:bg-slate-700 transition-colors flex justify-between items-center",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:r.title}),x.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i," year",i>1?"s":""," ago"]})]}),x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]},r.id)})})]}),U_=t=>{try{const e=new Date(t);return fj(e)?g_(e,{addSuffix:!0}):hj(e)?"Yesterday":cj(e,{weekStartsOn:0})?Lc(e,"EEEE"):Lc(e,"MMMM d, yyyy")}catch(e){return console.error("Error formatting date:",t,e),"Invalid date"}},NO=t=>{try{const e=new Date(t);return Lc(e,"EEEE, MMMM d, yyyy 'at' p")}catch(e){return console.error("Error formatting full date:",t,e),"Invalid date"}},EO=t=>{try{const e=new Date(t);return g_(e,{addSuffix:!0})}catch(e){return console.error("Error formatting relative time:",t,e),"Invalid time"}},AO=({entry:t,onLoadContent:e})=>{const r=ie.useRef(null);ie.useEffect(()=>{if(t.isDecrypted||t.isLoading)return;const i=new IntersectionObserver(a=>{a[0].isIntersecting&&(e(t.id),i.disconnect())},{rootMargin:"100px"});return r.current&&i.observe(r.current),()=>i.disconnect()},[t.id,t.isDecrypted,t.isLoading,e]);const n=i=>new DOMParser().parseFromString(i,"text/html").body.textContent||"";return x.jsxs(Pl,{ref:r,to:`/app/entry/${t.id}`,className:"block bg-white/50 dark:bg-slate-800/50 p-6 rounded-lg shadow-sm hover:shadow-lg transition-shadow duration-300 cursor-pointer border border-slate-200 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-600",children:[x.jsxs("div",{className:"flex justify-between items-start gap-4",children:[x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v11.494m0-11.494M12 6.253a4.093 4.093 0 00-3.32 6.19l-2.06 2.06a1 1 0 001.42 1.42l2.06-2.06A4.094 4.094 0 0012 17.747m0 0a4.093 4.093 0 003.32-6.19l2.06-2.06a1 1 0 00-1.42-1.42l-2.06 2.06A4.094 4.094 0 0012 6.253z"})}),x.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:t.journal||"Personal"})]}),t.isDecrypted?x.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:t.title||"Untitled"}):x.jsx("div",{className:"h-7 bg-slate-200 dark:bg-slate-700 rounded w-48 animate-pulse"})]}),x.jsxs("div",{className:"text-right flex-shrink-0",children:[x.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 whitespace-nowrap",title:new Date(t.created_at).toLocaleString(),children:U_(t.created_at)}),t.mood&&x.jsx("span",{className:"text-lg block mt-1","aria-label":`Mood: ${t.mood}`,children:t.mood})]})]}),t.tags&&t.tags.length>0&&x.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.tags.map(i=>x.jsx("span",{className:"text-xs font-medium bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded-full dark:bg-indigo-900/50 dark:text-indigo-300",children:i},i))}),x.jsx("div",{className:"mt-3",children:t.isDecrypted?x.jsx("p",{className:"text-slate-600 dark:text-slate-300 line-clamp-2",children:n(t.content)}):x.jsxs("div",{className:"space-y-2 animate-pulse mt-2",children:[x.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full"}),x.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-5/6"})]})})]})},jO=({entries:t,onSelectEntry:e,onLoadContent:r,onThisDayEntries:n,profile:i,filteredDate:a,onClearFilter:o})=>t.length===0?a?x.jsxs("div",{className:"text-center py-20 flex flex-col items-center",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-20 w-20 text-slate-300 dark:text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 4h-4m-4-4h-4"})]}),x.jsxs("h2",{className:"mt-6 text-2xl font-bold text-slate-700 dark:text-slate-200",children:["No entries found for ",a.toLocaleDateString("default",{month:"long",day:"numeric",year:"numeric"}),"."]}),x.jsx("button",{onClick:o,className:"mt-4 text-indigo-600 dark:text-indigo-400 hover:underline font-semibold",children:"Show All Entries"})]}):x.jsxs("div",{className:"text-center py-20 flex flex-col items-center",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-20 w-20 text-slate-300 dark:text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v11.494m-9-5.747h18"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]}),x.jsxs("h2",{className:"mt-6 text-3xl font-bold text-slate-700 dark:text-slate-200",children:["Welcome to Diary, ",(i==null?void 0:i.full_name)||"friend","!"]}),x.jsx("p",{className:"mt-2 text-slate-500 dark:text-slate-400",children:"This is your private, encrypted space to reflect and record."}),x.jsx("p",{className:"mt-4 text-slate-500 dark:text-slate-400",children:'Click "New Entry" to write your first post.'})]}):x.jsxs("div",{className:"space-y-6",children:[a?x.jsxs("div",{className:"bg-indigo-50 dark:bg-slate-800/50 p-4 rounded-lg border border-indigo-200 dark:border-slate-700 flex justify-between items-center",children:[x.jsxs("h3",{className:"text-lg font-bold text-indigo-800 dark:text-indigo-300",children:["Showing entries for ",a.toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric"})]}),x.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-sm font-semibold text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"Show All"]})]}):x.jsx(kO,{entries:n,onSelectEntry:e}),!a&&x.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Welcome back, ",(i==null?void 0:i.full_name)||"friend","!"]}),x.jsx("div",{className:"space-y-4",children:t.map(s=>x.jsx(AO,{entry:s,onLoadContent:r},s.id))})]}),OO=()=>{const{entries:t,loadEntryContent:e,profile:r}=zl(),[n,i]=ie.useState(null),a=qi(),o=Ra(),s=new URLSearchParams(a.search),l=s.get("journal"),u=s.get("date");ie.useEffect(()=>{if(u){const c=new Date(u);isNaN(c.getTime())||i(c)}else i(null)},[u]);const h=ie.useMemo(()=>{const c=new Date,y=c.getMonth(),v=c.getDate();return t.filter(w=>{const m=new Date(w.created_at);return m.getMonth()===y&&m.getDate()===v&&m.getFullYear()<c.getFullYear()}).sort((w,m)=>new Date(m.created_at).getTime()-new Date(w.created_at).getTime())},[t]);let f=t;if(l&&(f=f.filter(c=>(c.journal||"Personal")===l)),n){const c=n.toISOString().split("T")[0];f=f.filter(y=>{const v=new Date(y.created_at),w=v.getTimezoneOffset();return new Date(v.getTime()-w*60*1e3).toISOString().split("T")[0]===c})}const d=()=>{i(null),o("/app")};return x.jsx(jO,{entries:f,onThisDayEntries:h,onSelectEntry:()=>{},onLoadContent:e,profile:r,filteredDate:n,onClearFilter:d})},I2=t=>new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().split("T")[0],LO=({entries:t,onSelectDate:e,onBack:r})=>{const[n,i]=ie.useState(new Date),a=ie.useMemo(()=>{const h=new Set;return t.forEach(f=>{h.add(I2(new Date(f.created_at)))}),h},[t]),o=h=>{i(f=>{const d=new Date(f);return d.setMonth(d.getMonth()+h),d})},s=()=>x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsx("button",{onClick:()=>o(-1),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:"<"}),x.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200",children:n.toLocaleString("default",{month:"long",year:"numeric"})}),x.jsx("button",{onClick:()=>o(1),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:">"})]}),l=()=>{const h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return x.jsx("div",{className:"grid grid-cols-7 gap-1 text-center font-semibold text-slate-500 dark:text-slate-400 text-sm",children:h.map(f=>x.jsx("div",{children:f},f))})},u=()=>{const h=new Date(n.getFullYear(),n.getMonth(),1),f=new Date(n.getFullYear(),n.getMonth()+1,0),d=new Date(h);d.setDate(d.getDate()-h.getDay());const c=new Date(f);c.setDate(c.getDate()+(6-f.getDay()));const y=[];let v=[],w=d;for(;w<=c;){for(let m=0;m<7;m++){const g=new Date(w),b=I2(g),S=a.has(b);v.push(x.jsxs("div",{className:`p-1 h-20 flex flex-col items-center justify-center rounded-lg transition-colors ${g.getMonth()!==n.getMonth()?"text-slate-300 dark:text-slate-600":"text-slate-700 dark:text-slate-300"} ${S?"cursor-pointer bg-indigo-100 hover:bg-indigo-200 dark:bg-indigo-500/20 dark:hover:bg-indigo-500/30":""}`,onClick:S?()=>e(g):void 0,children:[x.jsx("span",{className:`text-sm ${new Date().toDateString()===g.toDateString()?"bg-indigo-500 text-white rounded-full h-6 w-6 flex items-center justify-center":""}`,children:g.getDate()}),S&&x.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 dark:bg-indigo-400 rounded-full mt-1"})]},w.toString())),w.setDate(w.getDate()+1)}y.push(x.jsx("div",{className:"grid grid-cols-7 gap-1",children:v},w.toString())),v=[]}return x.jsx("div",{className:"space-y-1",children:y})};return x.jsxs("div",{className:"animate-fade-in",children:[x.jsxs("button",{onClick:r,className:"mb-6 flex items-center text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors group",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 transform group-hover:-translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Timeline"]}),x.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 sm:p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[s(),l(),x.jsx("div",{className:"mt-2",children:u()})]})]})},PO=()=>{const{entries:t}=zl(),e=Ra(),r=n=>{const i=n.getTimezoneOffset(),o=new Date(n.getTime()-i*60*1e3).toISOString().split("T")[0];e(`/app?date=${o}`)};return x.jsx(LO,{entries:t,onSelectDate:r,onBack:()=>e("/app")})},TO=["","","","","","","",""],CO=({entries:t,onSelectEntry:e,onBack:r})=>{const[n,i]=ie.useState(""),[a,o]=ie.useState(null),[s,l]=ie.useState([]),[u,h]=ie.useState(""),[f,d]=ie.useState(""),[c,y]=ie.useState(!1),[v,w]=ie.useState(!1),[m,g]=ie.useState(!1),b=ie.useRef(null),S=ie.useRef(null),E=ie.useRef(null);ie.useEffect(()=>{const k=A=>{b.current&&!b.current.contains(A.target)&&y(!1),S.current&&!S.current.contains(A.target)&&w(!1),E.current&&!E.current.contains(A.target)&&g(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const I=ie.useMemo(()=>{const k=new Set;return t.forEach(A=>{var R;(R=A.tags)==null||R.forEach(C=>k.add(C))}),Array.from(k).sort()},[t]),L=k=>new DOMParser().parseFromString(k,"text/html").body.textContent||"",O=ie.useMemo(()=>n.trim()!==""||a||s.length>0||u||f?t.filter(A=>{const R=n.toLowerCase(),C=n.trim()===""||(A.title||"").toLowerCase().includes(R)||L(A.content||"").toLowerCase().includes(R),V=!a||A.mood===a,Z=s.length===0||s.every(Q=>{var K;return(K=A.tags)==null?void 0:K.includes(Q)});let te=!0;if(u||f){const Q=new Date(A.created_at);if(Q.setHours(0,0,0,0),u){const K=new Date(u+"T00:00:00");Q<K&&(te=!1)}if(f){const K=new Date(f+"T00:00:00");Q>K&&(te=!1)}}return C&&V&&Z&&te}):[],[t,n,a,s,u,f]),M=k=>{l(A=>A.includes(k)?A.filter(R=>R!==k):[...A,k])},T=n.trim()!==""||a||s.length>0||u||f;return x.jsxs("div",{className:"space-y-6 animate-fade-in",children:[x.jsxs("button",{onClick:r,className:"flex items-center text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors group",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 transform group-hover:-translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Timeline"]}),x.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[x.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Search Past Entries"}),x.jsxs("div",{className:"relative",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400 absolute left-4 top-1/2 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),x.jsx("input",{type:"search",placeholder:"Search by keywords, title, or date...",value:n,onChange:k=>i(k.target.value),className:"w-full pl-11 pr-4 py-3 border border-slate-300 dark:border-slate-600 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base dark:bg-slate-700 dark:text-slate-200 dark:placeholder-slate-400","aria-label":"Search diary entries"})]}),x.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[x.jsxs("div",{className:"relative",ref:b,children:[x.jsxs("button",{onClick:()=>y(k=>!k),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-slate-100 dark:bg-slate-700 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),x.jsx("span",{children:"Date Range"})]}),c&&x.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-slate-800 p-4 rounded-lg shadow-xl border dark:border-slate-700 z-10 w-64 space-y-3",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"From"}),x.jsx("input",{type:"date",value:u,onChange:k=>h(k.target.value),className:"w-full mt-1 border border-slate-300 rounded-md p-1.5 text-sm dark:bg-slate-700 dark:border-slate-600 dark:[color-scheme:dark]"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"To"}),x.jsx("input",{type:"date",value:f,onChange:k=>d(k.target.value),className:"w-full mt-1 border border-slate-300 rounded-md p-1.5 text-sm dark:bg-slate-700 dark:border-slate-600 dark:[color-scheme:dark]"})]})]})]}),x.jsxs("div",{className:"relative",ref:S,children:[x.jsxs("button",{onClick:()=>w(k=>!k),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-slate-100 dark:bg-slate-700 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600",children:[a?x.jsx("span",{className:"text-lg",children:a}):x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-.464 5.535a.5.5 S0 01.708 0 5 5 0 01-6.488 0 .5.5 0 01.708-.707A4 4 0 0013 12.5a.5.5 0 01.535.464z",clipRule:"evenodd"})}),x.jsx("span",{children:"Mood"})]}),v&&x.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-slate-800 p-2 rounded-lg shadow-xl border dark:border-slate-700 z-10 grid grid-cols-4 gap-2 w-64",children:TO.map(k=>x.jsx("button",{type:"button",onClick:()=>{o(k===a?null:k),w(!1)},className:`text-3xl p-2 rounded-md transition-all ${a===k?"bg-indigo-100 dark:bg-indigo-500/50 scale-110":"hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:k},k))})]}),x.jsxs("div",{className:"relative",ref:E,children:[x.jsxs("button",{onClick:()=>g(k=>!k),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-slate-100 dark:bg-slate-700 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M5.5 16a3.5 3.5 0 01-3.5-3.5V5.5A3.5 3.5 0 015.5 2h5.086a2 2 0 011.414.586l4.414 4.414a2 2 0 01.586 1.414V12.5A3.5 3.5 0 0113.5 16h-8z"})}),x.jsx("span",{children:"Tags"})]}),m&&x.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-slate-800 p-3 rounded-lg shadow-xl border dark:border-slate-700 z-10 w-64 max-h-60 overflow-y-auto",children:I.length>0?x.jsx("div",{className:"flex flex-col gap-2",children:I.map(k=>x.jsxs("label",{className:"flex items-center gap-2 p-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:s.includes(k),onChange:()=>M(k),className:"h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-slate-300 dark:border-slate-600 dark:bg-slate-900 dark:checked:bg-indigo-500"}),x.jsx("span",{className:"text-sm",children:k})]},k))}):x.jsx("p",{className:"text-sm text-slate-500",children:"No tags found."})})]})]})]}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Search Results"}),n.length>0&&x.jsx("p",{className:"text-xs text-slate-500 mb-4 bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded border border-yellow-200 dark:border-yellow-800",children:"Note: Text search only searches entries that have been viewed (decrypted) in this session. Tags and Moods search all entries."}),T?O.length>0?x.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(k=>x.jsxs("div",{onClick:()=>e(k.id),className:"bg-white dark:bg-slate-800 p-5 rounded-lg shadow-sm hover:shadow-lg transition-shadow duration-300 cursor-pointer border border-slate-200 dark:border-slate-700 flex flex-col",children:[x.jsxs("div",{className:"flex justify-between items-start gap-3",children:[k.isDecrypted?x.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100 line-clamp-1",children:k.title}):x.jsx("div",{className:"h-6 bg-slate-200 dark:bg-slate-700 rounded w-3/4 animate-pulse"}),k.mood&&x.jsx("span",{className:"text-2xl","aria-label":`Mood: ${k.mood}`,children:k.mood})]}),x.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1 mb-3",title:new Date(k.created_at).toLocaleString(),children:U_(k.created_at)}),x.jsx("div",{className:"flex-grow",children:k.isDecrypted?x.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 line-clamp-3",children:L(k.content)}):x.jsxs("div",{className:"space-y-2 animate-pulse",children:[x.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-full"}),x.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-5/6"})]})})]},k.id))}):x.jsxs("div",{className:"text-center py-16",children:[x.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-300",children:"No Entries Found"}),x.jsx("p",{className:"mt-2 text-slate-500 dark:text-slate-400",children:"Try adjusting your search or filter criteria."})]}):x.jsx("div",{className:"text-center py-16",children:x.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Use the search bar or filters above to find your entries."})})]})]})},RO=()=>{const{entries:t}=zl(),e=Ra();return x.jsx(CO,{entries:t,onSelectEntry:r=>e(`/app/entry/${r}`),onBack:()=>e("/app")})};var D2=!1,Yo,lg,ug,Pd,Td,z_,Cd,cg,fg,dg,$_,hg,pg,H_,W_;function jn(){if(!D2){D2=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),r=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(hg=/\b(iPhone|iP[ao]d)/.exec(t),pg=/\b(iP[ao]d)/.exec(t),dg=/Android/i.exec(t),H_=/FBAN\/\w+;/i.exec(t),W_=/Mobile/i.exec(t),$_=!!/Win64/.exec(t),e){Yo=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,Yo&&document&&document.documentMode&&(Yo=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(t);z_=n?parseFloat(n[1])+4:Yo,lg=e[2]?parseFloat(e[2]):NaN,ug=e[3]?parseFloat(e[3]):NaN,Pd=e[4]?parseFloat(e[4]):NaN,Pd?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),Td=e&&e[1]?parseFloat(e[1]):NaN):Td=NaN}else Yo=lg=ug=Td=Pd=NaN;if(r){if(r[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);Cd=i?parseFloat(i[1].replace("_",".")):!0}else Cd=!1;cg=!!r[2],fg=!!r[3]}else Cd=cg=fg=!1}}var mg={ie:function(){return jn()||Yo},ieCompatibilityMode:function(){return jn()||z_>Yo},ie64:function(){return mg.ie()&&$_},firefox:function(){return jn()||lg},opera:function(){return jn()||ug},webkit:function(){return jn()||Pd},safari:function(){return mg.webkit()},chrome:function(){return jn()||Td},windows:function(){return jn()||cg},osx:function(){return jn()||Cd},linux:function(){return jn()||fg},iphone:function(){return jn()||hg},mobile:function(){return jn()||hg||pg||dg||W_},nativeApp:function(){return jn()||H_},android:function(){return jn()||dg},ipad:function(){return jn()||pg}},IO=mg,DO=!!(typeof window<"u"&&window.document&&window.document.createElement),MO={canUseDOM:DO},FO=MO,V_=FO,G_;V_.canUseDOM&&(G_=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function BO(t,e){if(!V_.canUseDOM||e&&!("addEventListener"in document))return!1;var r="on"+t,n=r in document;if(!n){var i=document.createElement("div");i.setAttribute(r,"return;"),n=typeof i[r]=="function"}return!n&&G_&&t==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var qO=BO,UO=IO,zO=qO,M2=10,F2=40,B2=800;function K_(t){var e=0,r=0,n=0,i=0;return"detail"in t&&(r=t.detail),"wheelDelta"in t&&(r=-t.wheelDelta/120),"wheelDeltaY"in t&&(r=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=r,r=0),n=e*M2,i=r*M2,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||i)&&t.deltaMode&&(t.deltaMode==1?(n*=F2,i*=F2):(n*=B2,i*=B2)),n&&!e&&(e=n<1?-1:1),i&&!r&&(r=i<1?-1:1),{spinX:e,spinY:r,pixelX:n,pixelY:i}}K_.getEventType=function(){return UO.firefox()?"DOMMouseScroll":zO("wheel")?"wheel":"mousewheel"};var $O=K_,HO=$O;const WO=wh(HO);function VO(t,e,r,n,i,a){a===void 0&&(a=0);var o=Cl(t,e,a),s=o.width,l=o.height,u=Math.min(s,r),h=Math.min(l,n);return u>h*i?{width:h*i,height:h}:{width:u,height:u/i}}function GO(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function Mu(t,e,r,n,i){i===void 0&&(i=0);var a=Cl(e.width,e.height,i),o=a.width,s=a.height;return{x:q2(t.x,o,r.width,n),y:q2(t.y,s,r.height,n)}}function q2(t,e,r,n){var i=e*n/2-r/2;return Vh(t,-i,i)}function U2(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function z2(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function KO(t,e,r,n,i,a,o){a===void 0&&(a=0),o===void 0&&(o=!0);var s=o?YO:JO,l=Cl(e.width,e.height,a),u=Cl(e.naturalWidth,e.naturalHeight,a),h={x:s(100,((l.width-r.width/i)/2-t.x/i)/l.width*100),y:s(100,((l.height-r.height/i)/2-t.y/i)/l.height*100),width:s(100,r.width/l.width*100/i),height:s(100,r.height/l.height*100/i)},f=Math.round(s(u.width,h.width*u.width/100)),d=Math.round(s(u.height,h.height*u.height/100)),c=u.width>=u.height*n,y=c?{width:Math.round(d*n),height:d}:{width:f,height:Math.round(f/n)},v=Er(Er({},y),{x:Math.round(s(u.width-y.width,h.x*u.width/100)),y:Math.round(s(u.height-y.height,h.y*u.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:v}}function YO(t,e){return Math.min(t,Math.max(0,e))}function JO(t,e){return e}function XO(t,e,r,n,i,a){var o=Cl(e.width,e.height,r),s=Vh(n.width/o.width*(100/t.width),i,a),l={x:s*o.width/2-n.width/2-o.width*s*(t.x/100),y:s*o.height/2-n.height/2-o.height*s*(t.y/100)};return{crop:l,zoom:s}}function QO(t,e,r){var n=GO(e);return r.height>r.width?r.height/(t.height*n):r.width/(t.width*n)}function ZO(t,e,r,n,i,a){r===void 0&&(r=0);var o=Cl(e.naturalWidth,e.naturalHeight,r),s=Vh(QO(t,e,n),i,a),l=n.height>n.width?n.height/t.height:n.width/t.width,u={x:((o.width-t.width)/2-t.x)*l,y:((o.height-t.height)/2-t.y)*l};return{crop:u,zoom:s}}function $2(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function eL(t){return t*Math.PI/180}function Cl(t,e,r){var n=eL(r);return{width:Math.abs(Math.cos(n)*t)+Math.abs(Math.sin(n)*e),height:Math.abs(Math.sin(n)*t)+Math.abs(Math.cos(n)*e)}}function Vh(t,e,r){return Math.min(Math.max(t,e),r)}function ld(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(r){return typeof r=="string"&&r.length>0}).join(" ").trim()}var tL=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,rL=1,nL=3,iL=1,aL=function(t){A1(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.cropperRef=ie.createRef(),r.imageRef=ie.createRef(),r.videoRef=ie.createRef(),r.containerPosition={x:0,y:0},r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc=typeof document<"u"?document:null,r.currentWindow=typeof window<"u"?window:null,r.resizeObserver=null,r.previousCropSize=null,r.isInitialized=!1,r.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},r.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!r.containerRef)){var n=!0;r.resizeObserver=new window.ResizeObserver(function(i){if(n){n=!1;return}r.computeSizes()}),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(n){return n.preventDefault()},r.cleanEvents=function(){r.currentDoc&&(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturechange",r.onGestureChange),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd),r.currentDoc.removeEventListener("scroll",r.onScroll))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var n=r.computeSizes();n&&(r.previousCropSize=n,r.emitCropData(),r.setInitialCrop(n),r.isInitialized=!0),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(n){if(r.props.initialCroppedAreaPercentages){var i=XO(r.props.initialCroppedAreaPercentages,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),a=i.crop,o=i.zoom;r.props.onCropChange(a),r.props.onZoomChange&&r.props.onZoomChange(o)}else if(r.props.initialCroppedAreaPixels){var s=ZO(r.props.initialCroppedAreaPixels,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),a=s.crop,o=s.zoom;r.props.onCropChange(a),r.props.onZoomChange&&r.props.onZoomChange(o)}},r.computeSizes=function(){var n,i,a,o,s,l,u=r.imageRef.current||r.videoRef.current;if(u&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect(),r.saveContainerPosition();var h=r.containerRect.width/r.containerRect.height,f=((n=r.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((i=r.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,d=((a=r.imageRef.current)===null||a===void 0?void 0:a.naturalHeight)||((o=r.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,c=u.offsetWidth<f||u.offsetHeight<d,y=f/d,v=void 0;if(c)switch(r.state.mediaObjectFit){default:case"contain":v=h>y?{width:r.containerRect.height*y,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/y};break;case"horizontal-cover":v={width:r.containerRect.width,height:r.containerRect.width/y};break;case"vertical-cover":v={width:r.containerRect.height*y,height:r.containerRect.height};break}else v={width:u.offsetWidth,height:u.offsetHeight};r.mediaSize=Er(Er({},v),{naturalWidth:f,naturalHeight:d}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var w=r.props.cropSize?r.props.cropSize:VO(r.mediaSize.width,r.mediaSize.height,r.containerRect.width,r.containerRect.height,r.props.aspect,r.props.rotation);return(((s=r.state.cropSize)===null||s===void 0?void 0:s.height)!==w.height||((l=r.state.cropSize)===null||l===void 0?void 0:l.width)!==w.width)&&r.props.onCropSizeChange&&r.props.onCropSizeChange(w),r.setState({cropSize:w},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(w),w}},r.saveContainerPosition=function(){if(r.containerRef){var n=r.containerRef.getBoundingClientRect();r.containerPosition={x:n.left,y:n.top}}},r.onMouseDown=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.saveContainerPosition(),r.onDragStart(e.getMousePoint(n)))},r.onMouseMove=function(n){return r.onDrag(e.getMousePoint(n))},r.onScroll=function(n){r.currentDoc&&(n.preventDefault(),r.saveContainerPosition())},r.onTouchStart=function(n){r.currentDoc&&(r.isTouching=!0,!(r.props.onTouchRequest&&!r.props.onTouchRequest(n))&&(r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),r.saveContainerPosition(),n.touches.length===2?r.onPinchStart(n):n.touches.length===1&&r.onDragStart(e.getTouchPoint(n.touches[0]))))},r.onTouchMove=function(n){n.preventDefault(),n.touches.length===2?r.onPinchMove(n):n.touches.length===1&&r.onDrag(e.getTouchPoint(n.touches[0]))},r.onGestureStart=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureChange),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureChange=function(n){if(n.preventDefault(),!r.isTouching){var i=e.getMousePoint(n),a=r.gestureZoomStart-1+n.scale;if(r.setNewZoom(a,i,{shouldUpdatePosition:!0}),r.props.onRotationChange){var o=r.gestureRotationStart+n.rotation;r.props.onRotationChange(o)}}},r.onGestureEnd=function(n){r.cleanEvents()},r.onDragStart=function(n){var i,a,o=n.x,s=n.y;r.dragStartPosition={x:o,y:s},r.dragStartCrop=Er({},r.props.crop),(a=(i=r.props).onInteractionStart)===null||a===void 0||a.call(i)},r.onDrag=function(n){var i=n.x,a=n.y;r.currentWindow&&(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame(function(){if(r.state.cropSize&&!(i===void 0||a===void 0)){var o=i-r.dragStartPosition.x,s=a-r.dragStartPosition.y,l={x:r.dragStartCrop.x+o,y:r.dragStartCrop.y+s},u=r.props.restrictPosition?Mu(l,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):l;r.props.onCropChange(u)}}))},r.onDragStopped=function(){var n,i;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),(i=(n=r.props).onInteractionEnd)===null||i===void 0||i.call(n)},r.onWheel=function(n){if(r.currentWindow&&!(r.props.onWheelRequest&&!r.props.onWheelRequest(n))){n.preventDefault();var i=e.getMousePoint(n),a=WO(n).pixelY,o=r.props.zoom-a*r.props.zoomSpeed/200;r.setNewZoom(o,i,{shouldUpdatePosition:!0}),r.state.hasWheelJustStarted||r.setState({hasWheelJustStarted:!0},function(){var s,l;return(l=(s=r.props).onInteractionStart)===null||l===void 0?void 0:l.call(s)}),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout(function(){return r.setState({hasWheelJustStarted:!1},function(){var s,l;return(l=(s=r.props).onInteractionEnd)===null||l===void 0?void 0:l.call(s)})},250)}},r.getPointOnContainer=function(n,i){var a=n.x,o=n.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(a-i.x),y:r.containerRect.height/2-(o-i.y)}},r.getPointOnMedia=function(n){var i=n.x,a=n.y,o=r.props,s=o.crop,l=o.zoom;return{x:(i+s.x)/l,y:(a+s.y)/l}},r.setNewZoom=function(n,i,a){var o=a===void 0?{}:a,s=o.shouldUpdatePosition,l=s===void 0?!0:s;if(!(!r.state.cropSize||!r.props.onZoomChange)){var u=Vh(n,r.props.minZoom,r.props.maxZoom);if(l){var h=r.getPointOnContainer(i,r.containerPosition),f=r.getPointOnMedia(h),d={x:f.x*u-h.x,y:f.y*u-h.y},c=r.props.restrictPosition?Mu(d,r.mediaSize,r.state.cropSize,u,r.props.rotation):d;r.props.onCropChange(c)}r.props.onZoomChange(u)}},r.getCropData=function(){if(!r.state.cropSize)return null;var n=r.props.restrictPosition?Mu(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;return KO(n,r.mediaSize,r.state.cropSize,r.getAspect(),r.props.zoom,r.props.rotation,r.props.restrictPosition)},r.emitCropData=function(){var n=r.getCropData();if(n){var i=n.croppedAreaPercentages,a=n.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(i,a),r.props.onCropAreaChange&&r.props.onCropAreaChange(i,a)}},r.emitCropAreaChange=function(){var n=r.getCropData();if(n){var i=n.croppedAreaPercentages,a=n.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(i,a)}},r.recomputeCropPosition=function(){var n,i;if(r.state.cropSize){var a=r.props.crop;if(r.isInitialized&&(!((n=r.previousCropSize)===null||n===void 0)&&n.width)&&(!((i=r.previousCropSize)===null||i===void 0)&&i.height)){var o=Math.abs(r.previousCropSize.width-r.state.cropSize.width)>1e-6||Math.abs(r.previousCropSize.height-r.state.cropSize.height)>1e-6;if(o){var s=r.state.cropSize.width/r.previousCropSize.width,l=r.state.cropSize.height/r.previousCropSize.height;a={x:r.props.crop.x*s,y:r.props.crop.y*l}}}var u=r.props.restrictPosition?Mu(a,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):a;r.previousCropSize=r.state.cropSize,r.props.onCropChange(u),r.emitCropData()}},r.onKeyDown=function(n){var i,a,o=r.props,s=o.crop,l=o.onCropChange,u=o.keyboardStep,h=o.zoom,f=o.rotation,d=u;if(r.state.cropSize){n.shiftKey&&(d*=.2);var c=Er({},s);switch(n.key){case"ArrowUp":c.y-=d,n.preventDefault();break;case"ArrowDown":c.y+=d,n.preventDefault();break;case"ArrowLeft":c.x-=d,n.preventDefault();break;case"ArrowRight":c.x+=d,n.preventDefault();break;default:return}r.props.restrictPosition&&(c=Mu(c,r.mediaSize,r.state.cropSize,h,f)),n.repeat||(a=(i=r.props).onInteractionStart)===null||a===void 0||a.call(i),l(c)}},r.onKeyUp=function(n){var i,a;switch(n.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":n.preventDefault();break;default:return}r.emitCropData(),(a=(i=r.props).onInteractionEnd)===null||a===void 0||a.call(i)},r}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=tL,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var r,n;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(r=this.resizeObserver)===null||r===void 0||r.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((n=this.styleRef.parentNode)===null||n===void 0||n.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(r){var n,i,a,o,s,l,u,h,f;r.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):r.aspect!==this.props.aspect?this.computeSizes():r.objectFit!==this.props.objectFit?this.computeSizes():r.zoom!==this.props.zoom?this.recomputeCropPosition():((n=r.cropSize)===null||n===void 0?void 0:n.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((a=r.cropSize)===null||a===void 0?void 0:a.width)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.width)?this.computeSizes():(((s=r.crop)===null||s===void 0?void 0:s.x)!==((l=this.props.crop)===null||l===void 0?void 0:l.x)||((u=r.crop)===null||u===void 0?void 0:u.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),r.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),r.video!==this.props.video&&((f=this.videoRef.current)===null||f===void 0||f.load());var d=this.getObjectFit();d!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:d},this.computeSizes)},e.prototype.getAspect=function(){var r=this.props,n=r.cropSize,i=r.aspect;return n?n.width/n.height:i},e.prototype.getObjectFit=function(){var r,n,i,a;if(this.props.objectFit==="cover"){var o=this.imageRef.current||this.videoRef.current;if(o&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var s=this.containerRect.width/this.containerRect.height,l=((r=this.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((n=this.videoRef.current)===null||n===void 0?void 0:n.videoWidth)||0,u=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((a=this.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,h=l/u;return h<s?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(r){var n=e.getTouchPoint(r.touches[0]),i=e.getTouchPoint(r.touches[1]);this.lastPinchDistance=U2(n,i),this.lastPinchRotation=z2(n,i),this.onDragStart($2(n,i))},e.prototype.onPinchMove=function(r){var n=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(r.touches[0]),a=e.getTouchPoint(r.touches[1]),o=$2(i,a);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var s=U2(i,a),l=n.props.zoom*(s/n.lastPinchDistance);n.setNewZoom(l,o,{shouldUpdatePosition:!1}),n.lastPinchDistance=s;var u=z2(i,a),h=n.props.rotation+(u-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(h),n.lastPinchRotation=u})}},e.prototype.render=function(){var r=this,n,i=this.props,a=i.image,o=i.video,s=i.mediaProps,l=i.cropperProps,u=i.transform,h=i.crop,f=h.x,d=h.y,c=i.rotation,y=i.zoom,v=i.cropShape,w=i.showGrid,m=i.roundCropAreaPixels,g=i.style,b=g.containerStyle,S=g.cropAreaStyle,E=g.mediaStyle,I=i.classes,L=I.containerClassName,O=I.cropAreaClassName,M=I.mediaClassName,T=(n=this.state.mediaObjectFit)!==null&&n!==void 0?n:this.getObjectFit();return ie.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(A){return r.containerRef=A},"data-testid":"container",style:b,className:ld("reactEasyCrop_Container",L)},a?ie.createElement("img",Er({alt:"",className:ld("reactEasyCrop_Image",T==="contain"&&"reactEasyCrop_Contain",T==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",T==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",M)},s,{src:a,ref:this.imageRef,style:Er(Er({},E),{transform:u||"translate(".concat(f,"px, ").concat(d,"px) rotate(").concat(c,"deg) scale(").concat(y,")")}),onLoad:this.onMediaLoad})):o&&ie.createElement("video",Er({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:ld("reactEasyCrop_Video",T==="contain"&&"reactEasyCrop_Contain",T==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",T==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",M)},s,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Er(Er({},E),{transform:u||"translate(".concat(f,"px, ").concat(d,"px) rotate(").concat(c,"deg) scale(").concat(y,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map(function(k){return ie.createElement("source",Er({key:k.src},k))})),this.state.cropSize&&ie.createElement("div",Er({ref:this.cropperRef,style:Er(Er({},S),{width:m?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:m?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:ld("reactEasyCrop_CropArea",v==="round"&&"reactEasyCrop_CropAreaRound",w&&"reactEasyCrop_CropAreaGrid",O)},l)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:nL,minZoom:rL,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:iL},e.getMousePoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},e.getTouchPoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},e}(ie.Component);const oL=t=>new Promise((e,r)=>{const n=new Image;n.addEventListener("load",()=>e(n)),n.addEventListener("error",i=>r(i)),n.setAttribute("crossOrigin","anonymous"),n.src=t});async function sL(t,e,r="image/jpeg"){const n=await oL(t),i=document.createElement("canvas"),a=i.getContext("2d");if(!a)throw new Error("No 2d context");return i.width=e.width,i.height=e.height,a.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height),new Promise((o,s)=>{i.toBlob(l=>{if(!l){s(new Error("Canvas is empty"));return}o(l)},r)})}const lL=({session:t,profile:e,onUpdateProfile:r,onAvatarUpload:n,onExportData:i,onSignOut:a,theme:o,onToggleTheme:s})=>{const[l,u]=ie.useState(""),[h,f]=ie.useState(!1),[d,c]=ie.useState(!1),[y,v]=ie.useState(!1),[w,m]=ie.useState(!1),[g,b]=ie.useState(""),[S,E]=ie.useState(!1),[I,L]=ie.useState(""),[O,M]=ie.useState(null),[T,k]=ie.useState(!1),[A,R]=ie.useState(!1),[C,V]=ie.useState(!1),[Z,te]=ie.useState(!1),[Q,K]=ie.useState(null),[W,q]=ie.useState(null),[P,F]=ie.useState({x:0,y:0}),[U,H]=ie.useState(1),[B,J]=ie.useState(null),re=ie.useRef(null),{deriveAndVerifyKey:ne,key:ge}=ps(),{addToast:be}=Uh();ie.useEffect(()=>{u((e==null?void 0:e.full_name)||"")},[e==null?void 0:e.full_name]),ie.useEffect(()=>{(async()=>{const ve=await q_();R(ve);const de=localStorage.getItem(`diary_bio_${t.user.id}`);V(!!de)})()},[t.user.id]),ie.useEffect(()=>{let ce=!0;return(async()=>{if(!(e!=null&&e.avatar_url)){ce&&K(null);return}if(e.avatar_url.startsWith("http"))ce&&K(e.avatar_url);else try{const{data:de,error:Le}=await Mt.storage.from("avatars").createSignedUrl(e.avatar_url,3600);if(Le)throw Le;ce&&(de!=null&&de.signedUrl)&&K(de.signedUrl)}catch(de){console.error("Error resolving avatar URL. Check RLS policies.",de),ce&&K(null)}})(),()=>{ce=!1}},[e==null?void 0:e.avatar_url]);const Ee=async ce=>{ce.preventDefault(),l.trim()!==(e==null?void 0:e.full_name)&&(v(!0),await r({full_name:l.trim()}),v(!1)),f(!1)},Ae=ce=>{if(ce.target.files&&ce.target.files.length>0){const ve=ce.target.files[0],de=URL.createObjectURL(ve);q(de),H(1),F({x:0,y:0}),ce.target.value=""}},De=(ce,ve)=>{J(ve)},_e=async()=>{if(!(!W||!B))try{c(!0);const ce=await sL(W,B),ve=new File([ce],"avatar.jpg",{type:"image/jpeg"});await n(ve),q(null),be("Profile picture updated successfully","success")}catch(ce){console.error(ce),be(ce.message||"Failed to update profile picture","error")}finally{c(!1)}},ue=()=>{q(null),c(!1)},He=async()=>{m(!0),b("Preparing...");try{await i(ce=>b(ce))}catch(ce){console.error("Export failed",ce)}finally{m(!1),b("")}},oe=async ce=>{ce.preventDefault(),M(null),k(!0);try{const ve=await ne(I,t.user.id);if(!ve){M("Incorrect password."),k(!1);return}if(!e){M("Profile data unavailable."),k(!1);return}const de=await F1(ve);F_({email:t.user.email||"Unknown",password:I,salt:e.salt,rawKey:de}),L(""),E(!1)}catch(ve){console.error("Error generating kit:",ve),M("An error occurred. Please try again.")}finally{k(!1)}},se=async()=>{if(!ge){be("Encryption key not available. Please re-login.","error");return}if(te(!0),C)localStorage.removeItem(`diary_bio_${t.user.id}`),V(!1),be("Biometric unlock disabled.","info");else try{const ce=await vO(ge,t.user.id);localStorage.setItem(`diary_bio_${t.user.id}`,JSON.stringify(ce)),V(!0),be("Biometric unlock enabled successfully!","success")}catch(ce){console.error("Bio enable failed",ce),be(ce.message||"Failed to enable biometrics.","error")}te(!1)};return x.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 animate-fade-in pb-24",children:[x.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-8",children:"Profile & Settings"}),x.jsx("div",{className:"bg-white/50 dark:bg-slate-800/50 p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:x.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[x.jsxs("div",{className:"relative flex-shrink-0",children:[x.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden flex items-center justify-center",children:Q?x.jsx("img",{src:Q,alt:"User avatar",className:"w-full h-full object-cover"}):x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),x.jsx("input",{ref:re,type:"file",id:"avatar-upload",className:"hidden",onChange:Ae,accept:"image/*"}),x.jsx("label",{htmlFor:"avatar-upload",className:"absolute -bottom-1 -right-1 bg-white dark:bg-slate-600 rounded-full p-1.5 cursor-pointer shadow-md hover:bg-slate-100 dark:hover:bg-slate-500 transition-colors",children:d?x.jsxs("svg",{className:"animate-spin h-5 w-5 text-slate-600 dark:text-slate-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-600 dark:text-slate-200",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]})})]}),x.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[h?x.jsxs("form",{onSubmit:Ee,className:"flex items-center gap-2",children:[x.jsx("input",{type:"text",value:l,onChange:ce=>u(ce.target.value),className:"w-full px-3 py-2 text-xl font-bold border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 disabled:opacity-75",autoFocus:!0,disabled:y}),x.jsx("button",{type:"submit",className:"px-3 py-2 text-sm font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 disabled:bg-indigo-400",disabled:y,children:y?"Saving...":"Save"})]}):x.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:(e==null?void 0:e.full_name)||"Your Name"}),x.jsx("button",{onClick:()=>f(!0),className:"p-1.5 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 flex-shrink-0 text-slate-500",children:x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]})})]}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:t.user.email})]})]})}),x.jsxs("div",{className:"mt-8 space-y-4",children:[x.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Dark Mode"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Toggle between light and dark themes."})]}),x.jsx("button",{onClick:s,className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${o==="dark"?"bg-indigo-500":"bg-slate-300"}`,children:x.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${o==="dark"?"translate-x-6":"translate-x-1"}`})})]}),A&&x.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Biometric Unlock"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Use FaceID or TouchID to unlock your diary."})]}),x.jsx("button",{onClick:se,disabled:Z,className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${C?"bg-green-500":"bg-slate-300"}`,children:x.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${C?"translate-x-6":"translate-x-1"}`})})]}),x.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Export Data (ZIP)"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Download entries as monthly JSON files."})]}),x.jsx("button",{onClick:He,disabled:w,className:"px-4 py-2 text-sm font-semibold bg-slate-100 text-slate-700 rounded-md hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 min-w-[100px] justify-center",children:w?x.jsxs(x.Fragment,{children:[x.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),x.jsx("span",{children:g})]}):"Export"})]}),x.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Recovery Kit"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Download a backup of your encryption keys."})]}),x.jsxs("button",{onClick:()=>E(!0),className:"px-4 py-2 text-sm font-semibold bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-200 dark:hover:bg-yellow-900/50 flex items-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Backup Keys"]})]})]}),x.jsx("div",{className:"mt-12",children:x.jsx("button",{onClick:a,className:"w-full sm:w-auto px-6 py-2 font-semibold text-red-600 bg-red-100 rounded-md hover:bg-red-200 dark:bg-red-900/50 dark:text-red-300 dark:hover:bg-red-900/80 transition-colors",children:"Sign Out"})}),W&&x.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/90 p-4 animate-fade-in",children:[x.jsx("div",{className:"relative w-full max-w-lg h-[400px] bg-slate-800 rounded-lg overflow-hidden mb-4",children:x.jsx(aL,{image:W,crop:P,zoom:U,aspect:1,onCropChange:F,onCropComplete:De,onZoomChange:H,cropShape:"round",showGrid:!1})}),x.jsxs("div",{className:"w-full max-w-xs px-4 mb-6",children:[x.jsx("label",{className:"block text-xs text-slate-400 mb-1 text-center",children:"Zoom"}),x.jsx("input",{type:"range",value:U,min:1,max:3,step:.1,"aria-labelledby":"Zoom",onChange:ce=>H(Number(ce.target.value)),className:"w-full h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]}),x.jsxs("div",{className:"flex gap-4",children:[x.jsx("button",{onClick:ue,disabled:d,className:"px-6 py-2 text-sm font-semibold text-slate-300 bg-slate-700 hover:bg-slate-600 rounded-md",children:"Cancel"}),x.jsx("button",{onClick:_e,disabled:d,className:"px-6 py-2 text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 rounded-md flex items-center gap-2",children:d?"Saving...":"Save Avatar"})]})]}),S&&x.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:x.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 animate-fade-in-down",children:[x.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 mb-2",children:"Verify Identity"}),x.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Please enter your master password to authenticate and generate your Recovery Kit. This will contain your raw encryption keys."}),x.jsxs("form",{onSubmit:oe,children:[x.jsx("input",{type:"password",placeholder:"Your Password",value:I,onChange:ce=>L(ce.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 mb-2",autoFocus:!0,autoComplete:"current-password"}),O&&x.jsx("p",{className:"text-red-500 text-sm mb-4",children:O}),x.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[x.jsx("button",{type:"button",onClick:()=>{E(!1),L(""),M(null)},className:"px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100 rounded-md dark:text-slate-300 dark:hover:bg-slate-700",children:"Cancel"}),x.jsx("button",{type:"submit",disabled:T||!I,className:"px-4 py-2 text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 rounded-md disabled:bg-indigo-400",children:T?"Generating...":"Download Kit"})]})]})]})})]})},uL=()=>{const{session:t,profile:e,updateProfile:r,uploadAvatar:n,exportData:i,signOut:a,theme:o,onToggleTheme:s}=zl();return x.jsx(lL,{session:t,profile:e,onUpdateProfile:r,onAvatarUpload:n,onExportData:i,onSignOut:a,theme:o,onToggleTheme:s})};/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:Y_,setPrototypeOf:H2,isFrozen:cL,getPrototypeOf:fL,getOwnPropertyDescriptor:dL}=Object;let{freeze:mn,seal:vi,create:gg}=Object,{apply:vg,construct:yg}=typeof Reflect<"u"&&Reflect;mn||(mn=function(e){return e});vi||(vi=function(e){return e});vg||(vg=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return e.apply(r,i)});yg||(yg=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return new e(...n)});const ud=gn(Array.prototype.forEach),hL=gn(Array.prototype.lastIndexOf),W2=gn(Array.prototype.pop),Fu=gn(Array.prototype.push),pL=gn(Array.prototype.splice),Rd=gn(String.prototype.toLowerCase),L0=gn(String.prototype.toString),P0=gn(String.prototype.match),Bu=gn(String.prototype.replace),mL=gn(String.prototype.indexOf),gL=gn(String.prototype.trim),Oi=gn(Object.prototype.hasOwnProperty),fn=gn(RegExp.prototype.test),qu=vL(TypeError);function gn(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return vg(t,e,n)}}function vL(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return yg(t,r)}}function yt(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rd;H2&&H2(t,null);let n=e.length;for(;n--;){let i=e[n];if(typeof i=="string"){const a=r(i);a!==i&&(cL(e)||(e[n]=a),i=a)}t[i]=!0}return t}function yL(t){for(let e=0;e<t.length;e++)Oi(t,e)||(t[e]=null);return t}function wa(t){const e=gg(null);for(const[r,n]of Y_(t))Oi(t,r)&&(Array.isArray(n)?e[r]=yL(n):n&&typeof n=="object"&&n.constructor===Object?e[r]=wa(n):e[r]=n);return e}function Uu(t,e){for(;t!==null;){const n=dL(t,e);if(n){if(n.get)return gn(n.get);if(typeof n.value=="function")return gn(n.value)}t=fL(t)}function r(){return null}return r}const V2=mn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),T0=mn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),C0=mn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),wL=mn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),R0=mn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),bL=mn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),G2=mn(["#text"]),K2=mn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),I0=mn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Y2=mn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),cd=mn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),xL=vi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_L=vi(/<%[\w\W]*|[\w\W]*%>/gm),SL=vi(/\$\{[\w\W]*/gm),kL=vi(/^data-[\-\w.\u00B7-\uFFFF]+$/),NL=vi(/^aria-[\-\w]+$/),J_=vi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),EL=vi(/^(?:\w+script|data):/i),AL=vi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),X_=vi(/^html$/i),jL=vi(/^[a-z][.\w]*(-[.\w]+)+$/i);var J2=Object.freeze({__proto__:null,ARIA_ATTR:NL,ATTR_WHITESPACE:AL,CUSTOM_ELEMENT:jL,DATA_ATTR:kL,DOCTYPE_NAME:X_,ERB_EXPR:_L,IS_ALLOWED_URI:J_,IS_SCRIPT_OR_DATA:EL,MUSTACHE_EXPR:xL,TMPLIT_EXPR:SL});const zu={element:1,text:3,progressingInstruction:7,comment:8,document:9},OL=function(){return typeof window>"u"?null:window},LL=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(n=r.getAttribute(i));const a="dompurify"+(n?"#"+n:"");try{return e.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},X2=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Q_(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:OL();const e=tt=>Q_(tt);if(e.version="3.3.0",e.removed=[],!t||!t.document||t.document.nodeType!==zu.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const n=r,i=n.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:s,Element:l,NodeFilter:u,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:d,trustedTypes:c}=t,y=l.prototype,v=Uu(y,"cloneNode"),w=Uu(y,"remove"),m=Uu(y,"nextSibling"),g=Uu(y,"childNodes"),b=Uu(y,"parentNode");if(typeof o=="function"){const tt=r.createElement("template");tt.content&&tt.content.ownerDocument&&(r=tt.content.ownerDocument)}let S,E="";const{implementation:I,createNodeIterator:L,createDocumentFragment:O,getElementsByTagName:M}=r,{importNode:T}=n;let k=X2();e.isSupported=typeof Y_=="function"&&typeof b=="function"&&I&&I.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:A,ERB_EXPR:R,TMPLIT_EXPR:C,DATA_ATTR:V,ARIA_ATTR:Z,IS_SCRIPT_OR_DATA:te,ATTR_WHITESPACE:Q,CUSTOM_ELEMENT:K}=J2;let{IS_ALLOWED_URI:W}=J2,q=null;const P=yt({},[...V2,...T0,...C0,...R0,...G2]);let F=null;const U=yt({},[...K2,...I0,...Y2,...cd]);let H=Object.seal(gg(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),B=null,J=null;const re=Object.seal(gg(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ne=!0,ge=!0,be=!1,Ee=!0,Ae=!1,De=!0,_e=!1,ue=!1,He=!1,oe=!1,se=!1,ce=!1,ve=!0,de=!1;const Le="user-content-";let Me=!0,qe=!1,Ke={},Ze=null;const Ve=yt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let et=null;const $e=yt({},["audio","video","img","source","image","track"]);let Fe=null;const Bt=yt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ct="http://www.w3.org/1998/Math/MathML",$t="http://www.w3.org/2000/svg",gt="http://www.w3.org/1999/xhtml";let xt=gt,Br=!1,vt=null;const ia=yt({},[ct,$t,gt],L0);let qt=yt({},["mi","mo","mn","ms","mtext"]),Vr=yt({},["annotation-xml"]);const wi=yt({},["title","style","font","a","script"]);let Rt=null;const ut=["application/xhtml+xml","text/html"],Nt="text/html";let Ht=null,Zt=null;const ni=r.createElement("form"),Dn=function(he){return he instanceof RegExp||he instanceof Function},it=function(){let he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Zt&&Zt===he)){if((!he||typeof he!="object")&&(he={}),he=wa(he),Rt=ut.indexOf(he.PARSER_MEDIA_TYPE)===-1?Nt:he.PARSER_MEDIA_TYPE,Ht=Rt==="application/xhtml+xml"?L0:Rd,q=Oi(he,"ALLOWED_TAGS")?yt({},he.ALLOWED_TAGS,Ht):P,F=Oi(he,"ALLOWED_ATTR")?yt({},he.ALLOWED_ATTR,Ht):U,vt=Oi(he,"ALLOWED_NAMESPACES")?yt({},he.ALLOWED_NAMESPACES,L0):ia,Fe=Oi(he,"ADD_URI_SAFE_ATTR")?yt(wa(Bt),he.ADD_URI_SAFE_ATTR,Ht):Bt,et=Oi(he,"ADD_DATA_URI_TAGS")?yt(wa($e),he.ADD_DATA_URI_TAGS,Ht):$e,Ze=Oi(he,"FORBID_CONTENTS")?yt({},he.FORBID_CONTENTS,Ht):Ve,B=Oi(he,"FORBID_TAGS")?yt({},he.FORBID_TAGS,Ht):wa({}),J=Oi(he,"FORBID_ATTR")?yt({},he.FORBID_ATTR,Ht):wa({}),Ke=Oi(he,"USE_PROFILES")?he.USE_PROFILES:!1,ne=he.ALLOW_ARIA_ATTR!==!1,ge=he.ALLOW_DATA_ATTR!==!1,be=he.ALLOW_UNKNOWN_PROTOCOLS||!1,Ee=he.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ae=he.SAFE_FOR_TEMPLATES||!1,De=he.SAFE_FOR_XML!==!1,_e=he.WHOLE_DOCUMENT||!1,oe=he.RETURN_DOM||!1,se=he.RETURN_DOM_FRAGMENT||!1,ce=he.RETURN_TRUSTED_TYPE||!1,He=he.FORCE_BODY||!1,ve=he.SANITIZE_DOM!==!1,de=he.SANITIZE_NAMED_PROPS||!1,Me=he.KEEP_CONTENT!==!1,qe=he.IN_PLACE||!1,W=he.ALLOWED_URI_REGEXP||J_,xt=he.NAMESPACE||gt,qt=he.MATHML_TEXT_INTEGRATION_POINTS||qt,Vr=he.HTML_INTEGRATION_POINTS||Vr,H=he.CUSTOM_ELEMENT_HANDLING||{},he.CUSTOM_ELEMENT_HANDLING&&Dn(he.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=he.CUSTOM_ELEMENT_HANDLING.tagNameCheck),he.CUSTOM_ELEMENT_HANDLING&&Dn(he.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=he.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),he.CUSTOM_ELEMENT_HANDLING&&typeof he.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(H.allowCustomizedBuiltInElements=he.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ae&&(ge=!1),se&&(oe=!0),Ke&&(q=yt({},G2),F=[],Ke.html===!0&&(yt(q,V2),yt(F,K2)),Ke.svg===!0&&(yt(q,T0),yt(F,I0),yt(F,cd)),Ke.svgFilters===!0&&(yt(q,C0),yt(F,I0),yt(F,cd)),Ke.mathMl===!0&&(yt(q,R0),yt(F,Y2),yt(F,cd))),he.ADD_TAGS&&(typeof he.ADD_TAGS=="function"?re.tagCheck=he.ADD_TAGS:(q===P&&(q=wa(q)),yt(q,he.ADD_TAGS,Ht))),he.ADD_ATTR&&(typeof he.ADD_ATTR=="function"?re.attributeCheck=he.ADD_ATTR:(F===U&&(F=wa(F)),yt(F,he.ADD_ATTR,Ht))),he.ADD_URI_SAFE_ATTR&&yt(Fe,he.ADD_URI_SAFE_ATTR,Ht),he.FORBID_CONTENTS&&(Ze===Ve&&(Ze=wa(Ze)),yt(Ze,he.FORBID_CONTENTS,Ht)),Me&&(q["#text"]=!0),_e&&yt(q,["html","head","body"]),q.table&&(yt(q,["tbody"]),delete B.tbody),he.TRUSTED_TYPES_POLICY){if(typeof he.TRUSTED_TYPES_POLICY.createHTML!="function")throw qu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof he.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw qu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=he.TRUSTED_TYPES_POLICY,E=S.createHTML("")}else S===void 0&&(S=LL(c,i)),S!==null&&typeof E=="string"&&(E=S.createHTML(""));mn&&mn(he),Zt=he}},wn=yt({},[...T0,...C0,...wL]),Mn=yt({},[...R0,...bL]),Gr=function(he){let Ie=b(he);(!Ie||!Ie.tagName)&&(Ie={namespaceURI:xt,tagName:"template"});const Ye=Rd(he.tagName),jt=Rd(Ie.tagName);return vt[he.namespaceURI]?he.namespaceURI===$t?Ie.namespaceURI===gt?Ye==="svg":Ie.namespaceURI===ct?Ye==="svg"&&(jt==="annotation-xml"||qt[jt]):!!wn[Ye]:he.namespaceURI===ct?Ie.namespaceURI===gt?Ye==="math":Ie.namespaceURI===$t?Ye==="math"&&Vr[jt]:!!Mn[Ye]:he.namespaceURI===gt?Ie.namespaceURI===$t&&!Vr[jt]||Ie.namespaceURI===ct&&!qt[jt]?!1:!Mn[Ye]&&(wi[Ye]||!wn[Ye]):!!(Rt==="application/xhtml+xml"&&vt[he.namespaceURI]):!1},At=function(he){Fu(e.removed,{element:he});try{b(he).removeChild(he)}catch{w(he)}},It=function(he,Ie){try{Fu(e.removed,{attribute:Ie.getAttributeNode(he),from:Ie})}catch{Fu(e.removed,{attribute:null,from:Ie})}if(Ie.removeAttribute(he),he==="is")if(oe||se)try{At(Ie)}catch{}else try{Ie.setAttribute(he,"")}catch{}},Kr=function(he){let Ie=null,Ye=null;if(He)he="<remove></remove>"+he;else{const er=P0(he,/^[\r\n\t ]+/);Ye=er&&er[0]}Rt==="application/xhtml+xml"&&xt===gt&&(he='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+he+"</body></html>");const jt=S?S.createHTML(he):he;if(xt===gt)try{Ie=new d().parseFromString(jt,Rt)}catch{}if(!Ie||!Ie.documentElement){Ie=I.createDocument(xt,"template",null);try{Ie.documentElement.innerHTML=Br?E:jt}catch{}}const _r=Ie.body||Ie.documentElement;return he&&Ye&&_r.insertBefore(r.createTextNode(Ye),_r.childNodes[0]||null),xt===gt?M.call(Ie,_e?"html":"body")[0]:_e?Ie.documentElement:_r},aa=function(he){return L.call(he.ownerDocument||he,he,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Fn=function(he){return he instanceof f&&(typeof he.nodeName!="string"||typeof he.textContent!="string"||typeof he.removeChild!="function"||!(he.attributes instanceof h)||typeof he.removeAttribute!="function"||typeof he.setAttribute!="function"||typeof he.namespaceURI!="string"||typeof he.insertBefore!="function"||typeof he.hasChildNodes!="function")},bn=function(he){return typeof s=="function"&&he instanceof s};function dr(tt,he,Ie){ud(tt,Ye=>{Ye.call(e,he,Ie,Zt)})}const xn=function(he){let Ie=null;if(dr(k.beforeSanitizeElements,he,null),Fn(he))return At(he),!0;const Ye=Ht(he.nodeName);if(dr(k.uponSanitizeElement,he,{tagName:Ye,allowedTags:q}),De&&he.hasChildNodes()&&!bn(he.firstElementChild)&&fn(/<[/\w!]/g,he.innerHTML)&&fn(/<[/\w!]/g,he.textContent)||he.nodeType===zu.progressingInstruction||De&&he.nodeType===zu.comment&&fn(/<[/\w]/g,he.data))return At(he),!0;if(!(re.tagCheck instanceof Function&&re.tagCheck(Ye))&&(!q[Ye]||B[Ye])){if(!B[Ye]&&sn(Ye)&&(H.tagNameCheck instanceof RegExp&&fn(H.tagNameCheck,Ye)||H.tagNameCheck instanceof Function&&H.tagNameCheck(Ye)))return!1;if(Me&&!Ze[Ye]){const jt=b(he)||he.parentNode,_r=g(he)||he.childNodes;if(_r&&jt){const er=_r.length;for(let hr=er-1;hr>=0;--hr){const _n=v(_r[hr],!0);_n.__removalCount=(he.__removalCount||0)+1,jt.insertBefore(_n,m(he))}}}return At(he),!0}return he instanceof l&&!Gr(he)||(Ye==="noscript"||Ye==="noembed"||Ye==="noframes")&&fn(/<\/no(script|embed|frames)/i,he.innerHTML)?(At(he),!0):(Ae&&he.nodeType===zu.text&&(Ie=he.textContent,ud([A,R,C],jt=>{Ie=Bu(Ie,jt," ")}),he.textContent!==Ie&&(Fu(e.removed,{element:he.cloneNode()}),he.textContent=Ie)),dr(k.afterSanitizeElements,he,null),!1)},Bn=function(he,Ie,Ye){if(ve&&(Ie==="id"||Ie==="name")&&(Ye in r||Ye in ni))return!1;if(!(ge&&!J[Ie]&&fn(V,Ie))){if(!(ne&&fn(Z,Ie))){if(!(re.attributeCheck instanceof Function&&re.attributeCheck(Ie,he))){if(!F[Ie]||J[Ie]){if(!(sn(he)&&(H.tagNameCheck instanceof RegExp&&fn(H.tagNameCheck,he)||H.tagNameCheck instanceof Function&&H.tagNameCheck(he))&&(H.attributeNameCheck instanceof RegExp&&fn(H.attributeNameCheck,Ie)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(Ie,he))||Ie==="is"&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&fn(H.tagNameCheck,Ye)||H.tagNameCheck instanceof Function&&H.tagNameCheck(Ye))))return!1}else if(!Fe[Ie]){if(!fn(W,Bu(Ye,Q,""))){if(!((Ie==="src"||Ie==="xlink:href"||Ie==="href")&&he!=="script"&&mL(Ye,"data:")===0&&et[he])){if(!(be&&!fn(te,Bu(Ye,Q,"")))){if(Ye)return!1}}}}}}}return!0},sn=function(he){return he!=="annotation-xml"&&P0(he,K)},qn=function(he){dr(k.beforeSanitizeAttributes,he,null);const{attributes:Ie}=he;if(!Ie||Fn(he))return;const Ye={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:F,forceKeepAttr:void 0};let jt=Ie.length;for(;jt--;){const _r=Ie[jt],{name:er,namespaceURI:hr,value:_n}=_r,$i=Ht(er),sa=_n;let pr=er==="value"?sa:gL(sa);if(Ye.attrName=$i,Ye.attrValue=pr,Ye.keepAttr=!0,Ye.forceKeepAttr=void 0,dr(k.uponSanitizeAttribute,he,Ye),pr=Ye.attrValue,de&&($i==="id"||$i==="name")&&(It(er,he),pr=Le+pr),De&&fn(/((--!?|])>)|<\/(style|title|textarea)/i,pr)){It(er,he);continue}if($i==="attributename"&&P0(pr,"href")){It(er,he);continue}if(Ye.forceKeepAttr)continue;if(!Ye.keepAttr){It(er,he);continue}if(!Ee&&fn(/\/>/i,pr)){It(er,he);continue}Ae&&ud([A,R,C],gs=>{pr=Bu(pr,gs," ")});const Eo=Ht(he.nodeName);if(!Bn(Eo,$i,pr)){It(er,he);continue}if(S&&typeof c=="object"&&typeof c.getAttributeType=="function"&&!hr)switch(c.getAttributeType(Eo,$i)){case"TrustedHTML":{pr=S.createHTML(pr);break}case"TrustedScriptURL":{pr=S.createScriptURL(pr);break}}if(pr!==sa)try{hr?he.setAttributeNS(hr,er,pr):he.setAttribute(er,pr),Fn(he)?At(he):W2(e.removed)}catch{It(er,he)}}dr(k.afterSanitizeAttributes,he,null)},oa=function tt(he){let Ie=null;const Ye=aa(he);for(dr(k.beforeSanitizeShadowDOM,he,null);Ie=Ye.nextNode();)dr(k.uponSanitizeShadowNode,Ie,null),xn(Ie),qn(Ie),Ie.content instanceof a&&tt(Ie.content);dr(k.afterSanitizeShadowDOM,he,null)};return e.sanitize=function(tt){let he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ie=null,Ye=null,jt=null,_r=null;if(Br=!tt,Br&&(tt="<!-->"),typeof tt!="string"&&!bn(tt))if(typeof tt.toString=="function"){if(tt=tt.toString(),typeof tt!="string")throw qu("dirty is not a string, aborting")}else throw qu("toString is not a function");if(!e.isSupported)return tt;if(ue||it(he),e.removed=[],typeof tt=="string"&&(qe=!1),qe){if(tt.nodeName){const _n=Ht(tt.nodeName);if(!q[_n]||B[_n])throw qu("root node is forbidden and cannot be sanitized in-place")}}else if(tt instanceof s)Ie=Kr("<!---->"),Ye=Ie.ownerDocument.importNode(tt,!0),Ye.nodeType===zu.element&&Ye.nodeName==="BODY"||Ye.nodeName==="HTML"?Ie=Ye:Ie.appendChild(Ye);else{if(!oe&&!Ae&&!_e&&tt.indexOf("<")===-1)return S&&ce?S.createHTML(tt):tt;if(Ie=Kr(tt),!Ie)return oe?null:ce?E:""}Ie&&He&&At(Ie.firstChild);const er=aa(qe?tt:Ie);for(;jt=er.nextNode();)xn(jt),qn(jt),jt.content instanceof a&&oa(jt.content);if(qe)return tt;if(oe){if(se)for(_r=O.call(Ie.ownerDocument);Ie.firstChild;)_r.appendChild(Ie.firstChild);else _r=Ie;return(F.shadowroot||F.shadowrootmode)&&(_r=T.call(n,_r,!0)),_r}let hr=_e?Ie.outerHTML:Ie.innerHTML;return _e&&q["!doctype"]&&Ie.ownerDocument&&Ie.ownerDocument.doctype&&Ie.ownerDocument.doctype.name&&fn(X_,Ie.ownerDocument.doctype.name)&&(hr="<!DOCTYPE "+Ie.ownerDocument.doctype.name+`>
`+hr),Ae&&ud([A,R,C],_n=>{hr=Bu(hr,_n," ")}),S&&ce?S.createHTML(hr):hr},e.setConfig=function(){let tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};it(tt),ue=!0},e.clearConfig=function(){Zt=null,ue=!1},e.isValidAttribute=function(tt,he,Ie){Zt||it({});const Ye=Ht(tt),jt=Ht(he);return Bn(Ye,jt,Ie)},e.addHook=function(tt,he){typeof he=="function"&&Fu(k[tt],he)},e.removeHook=function(tt,he){if(he!==void 0){const Ie=hL(k[tt],he);return Ie===-1?void 0:pL(k[tt],Ie,1)[0]}return W2(k[tt])},e.removeHooks=function(tt){k[tt]=[]},e.removeAllHooks=function(){k=X2()},e}var D0=Q_();const PL=({path:t,iv:e,mimeType:r="audio/webm"})=>{const{key:n,decryptBinary:i}=ps(),[a,o]=ie.useState(null),[s,l]=ie.useState("idle"),u=ie.useRef(null),h=async()=>{if(n){l("loading");try{const{data:f,error:d}=await Mt.storage.from("diary-audio").download(t);if(d)throw d;l("decrypting");const c=await f.arrayBuffer(),y=await i(n,c,e),v=new Blob([y],{type:r}),w=URL.createObjectURL(v);o(w),l("ready")}catch(f){console.error("Error loading secure audio:",f),l("error")}}};return ie.useEffect(()=>()=>{a&&URL.revokeObjectURL(a)},[a]),s==="idle"?x.jsxs("button",{onClick:h,className:"flex items-center gap-3 bg-indigo-50 dark:bg-slate-700 px-4 py-3 rounded-lg border border-indigo-100 dark:border-slate-600 hover:bg-indigo-100 dark:hover:bg-slate-600 transition-colors w-full sm:w-auto",children:[x.jsx("div",{className:"p-2 bg-indigo-500 rounded-full text-white",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),x.jsxs("div",{className:"text-left",children:[x.jsx("span",{className:"block text-sm font-semibold text-indigo-900 dark:text-indigo-100",children:"Load Audio Memory"}),x.jsx("span",{className:"block text-xs text-indigo-600 dark:text-slate-400",children:"Encrypted"})]})]}):s==="loading"||s==="decrypting"?x.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 dark:bg-slate-800 px-4 py-3 rounded-lg border border-slate-200 dark:border-slate-700 w-full sm:w-auto animate-pulse",children:[x.jsxs("svg",{className:"animate-spin h-5 w-5 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),x.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:s==="loading"?"Downloading...":"Decrypting..."})]}):s==="error"?x.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),x.jsx("span",{children:"Failed to load audio."})]}):x.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 w-full",children:x.jsx("audio",{ref:u,controls:!0,className:"w-full h-8 focus:outline-none",src:a})})},TL=({entry:t,onEdit:e,onDelete:r,onBack:n})=>{const i=NO(t.created_at),a=EO(t.created_at),o=ie.useRef(null),{key:s,decryptBinary:l}=ps();if(ie.useEffect(()=>{const f=async()=>{if(!o.current||!s)return;const d=o.current.querySelectorAll("img.secure-diary-image");for(let c=0;c<d.length;c++){const y=d[c],v=y.getAttribute("data-secure-metadata")||y.getAttribute("alt");if(v&&!y.src.startsWith("blob:"))try{const w=JSON.parse(v);if(w.path&&w.iv){y.style.opacity="0.5",y.style.transition="opacity 0.3s";const{data:m,error:g}=await Mt.storage.from("diary-images").createSignedUrl(w.path,60);if(g)throw console.error("RLS Error: Could not sign URL. Check your Supabase policies.",g),g;const b=await fetch(m.signedUrl);if(!b.ok)throw new Error(`Failed to fetch image blob: ${b.status}`);const S=await b.arrayBuffer(),E=await l(s,S,w.iv),I=new Blob([E],{type:"image/webp"}),L=URL.createObjectURL(I);y.src=L,y.style.opacity="1"}}catch(w){console.error("Failed to decrypt image:",w),y.style.border="2px solid red",y.title="Decryption failed"}}};return t.isDecrypted&&f(),()=>{o.current&&o.current.querySelectorAll("img.secure-diary-image").forEach(c=>{const y=c.src;y.startsWith("blob:")&&URL.revokeObjectURL(y)})}},[t.isDecrypted,t.content,s,l]),!t.isDecrypted)return x.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 sm:p-8 rounded-lg shadow-md border border-slate-200 dark:border-slate-700 animate-fade-in flex items-center justify-center min-h-[300px]",children:x.jsxs("div",{className:"flex flex-col items-center gap-4",children:[x.jsxs("svg",{className:"animate-spin h-10 w-10 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Decrypting entry..."})]})});const u=["width","float","margin","margin-left","margin-right","margin-top","margin-bottom","text-align","opacity","transition"];D0.addHook("afterSanitizeAttributes",f=>{if(f instanceof Element&&f.hasAttribute("style")){const c=(f.getAttribute("style")||"").split(";").filter(y=>{if(!y.includes(":"))return!1;const v=y.split(":")[0].trim();return v&&u.includes(v)}).join(";");c?f.setAttribute("style",c):f.removeAttribute("style")}});const h=D0.sanitize(t.content,{ADD_TAGS:["img"],ADD_ATTR:["style","class","alt","data-secure-metadata"]});return D0.removeHook("afterSanitizeAttributes"),x.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 sm:p-8 rounded-lg shadow-md border border-slate-200 dark:border-slate-700 animate-fade-in",children:[x.jsxs("button",{onClick:n,className:"mb-6 flex items-center text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors group",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 transform group-hover:-translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Timeline"]}),x.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-700 pb-4 mb-4",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[x.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:t.title}),x.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i," (",a,")"]})]}),x.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[t.mood&&x.jsx("span",{className:"text-3xl","aria-label":`Mood: ${t.mood}`,children:t.mood}),t.tags&&t.tags.length>0&&x.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(f=>x.jsx("span",{className:"text-sm font-medium bg-indigo-100 text-indigo-800 px-2.5 py-1 rounded-full dark:bg-indigo-900/50 dark:text-indigo-300",children:f},f))})]})]}),t.audio&&x.jsx("div",{className:"my-6",children:x.jsx(PL,{path:t.audio.path,iv:t.audio.iv,mimeType:t.audio.type})}),x.jsx("div",{ref:o,className:"prose prose-slate dark:prose-invert max-w-none my-6",dangerouslySetInnerHTML:{__html:h}}),x.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-6 flex justify-end gap-3",children:[x.jsxs("button",{onClick:e,className:"flex items-center gap-2 bg-slate-100 text-slate-700 font-semibold px-4 py-2 rounded-lg hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 transition-colors",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),"Edit"]}),x.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-red-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Delete"]})]})]})},CL=({isOpen:t,onClose:e,onConfirm:r,title:n,message:i,isProcessing:a})=>{if(!t)return null;M5.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const o=()=>{r()},s=document.getElementById("portal-root");return s?w1.createPortal(x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center animate-fade-in","aria-modal":"true",role:"dialog",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl p-6 w-full max-w-sm m-4",role:"document",onClick:l=>l.stopPropagation(),children:[x.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:n}),x.jsx("p",{className:"mt-2 text-slate-600 dark:text-slate-300",children:i}),x.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[x.jsx("button",{onClick:e,disabled:a,className:"px-4 py-2 text-sm font-semibold bg-slate-100 text-slate-700 rounded-md hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Cancel deletion",children:"Cancel"}),x.jsx("button",{onClick:o,disabled:a,className:"px-4 py-2 text-sm font-semibold text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors disabled:bg-red-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[140px]","aria-label":"Confirm deletion",children:a?x.jsxs(x.Fragment,{children:[x.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),x.jsx("span",{children:"Deleting..."})]}):"Confirm Delete"})]})]})}),s):null},RL=()=>{const{id:t}=Kb(),{entries:e,loadEntryContent:r,deleteEntry:n,loading:i}=zl(),a=Ra(),[o,s]=ie.useState(null),[l,u]=ie.useState(!1),[h,f]=ie.useState(!1);ie.useEffect(()=>{if(t&&e.length>0){const c=e.find(y=>y.id===t);c&&(s(c),!c.isDecrypted&&!c.isLoading&&r(t))}},[t,e,r]);const d=async()=>{if(o){f(!0);try{await n(o.id)}catch{f(!1)}}};return i?x.jsx("p",{className:"text-center p-8 text-slate-500",children:"Loading entry..."}):o?x.jsxs(x.Fragment,{children:[x.jsx(TL,{entry:o,onEdit:()=>a(`/app/edit/${o.id}`),onDelete:()=>u(!0),onBack:()=>a("/app")}),x.jsx(CL,{isOpen:l,isProcessing:h,onClose:()=>u(!1),onConfirm:d,title:"Delete Entry?",message:"Are you sure you want to permanently delete this entry? This action cannot be undone."})]}):x.jsx("p",{className:"text-center p-8 text-slate-500",children:"Entry not found."})};function IL(){this.__data__=[],this.size=0}var DL=IL;function ML(t,e){return t===e||t!==t&&e!==e}var Z_=ML,FL=Z_;function BL(t,e){for(var r=t.length;r--;)if(FL(t[r][0],e))return r;return-1}var Gh=BL,qL=Gh,UL=Array.prototype,zL=UL.splice;function $L(t){var e=this.__data__,r=qL(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():zL.call(e,r,1),--this.size,!0}var HL=$L,WL=Gh;function VL(t){var e=this.__data__,r=WL(e,t);return r<0?void 0:e[r][1]}var GL=VL,KL=Gh;function YL(t){return KL(this.__data__,t)>-1}var JL=YL,XL=Gh;function QL(t,e){var r=this.__data__,n=XL(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var ZL=QL,e7=DL,t7=HL,r7=GL,n7=JL,i7=ZL;function $l(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}$l.prototype.clear=e7;$l.prototype.delete=t7;$l.prototype.get=r7;$l.prototype.has=n7;$l.prototype.set=i7;var Kh=$l,a7=Kh;function o7(){this.__data__=new a7,this.size=0}var s7=o7;function l7(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var u7=l7;function c7(t){return this.__data__.get(t)}var f7=c7;function d7(t){return this.__data__.has(t)}var h7=d7,p7=typeof Yn=="object"&&Yn&&Yn.Object===Object&&Yn,e4=p7,m7=e4,g7=typeof self=="object"&&self&&self.Object===Object&&self,v7=m7||g7||Function("return this")(),Ia=v7,y7=Ia,w7=y7.Symbol,z1=w7,Q2=z1,t4=Object.prototype,b7=t4.hasOwnProperty,x7=t4.toString,$u=Q2?Q2.toStringTag:void 0;function _7(t){var e=b7.call(t,$u),r=t[$u];try{t[$u]=void 0;var n=!0}catch{}var i=x7.call(t);return n&&(e?t[$u]=r:delete t[$u]),i}var S7=_7,k7=Object.prototype,N7=k7.toString;function E7(t){return N7.call(t)}var A7=E7,Z2=z1,j7=S7,O7=A7,L7="[object Null]",P7="[object Undefined]",e5=Z2?Z2.toStringTag:void 0;function T7(t){return t==null?t===void 0?P7:L7:e5&&e5 in Object(t)?j7(t):O7(t)}var Yh=T7;function C7(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var r4=C7,R7=Yh,I7=r4,D7="[object AsyncFunction]",M7="[object Function]",F7="[object GeneratorFunction]",B7="[object Proxy]";function q7(t){if(!I7(t))return!1;var e=R7(t);return e==M7||e==F7||e==D7||e==B7}var n4=q7,U7=Ia,z7=U7["__core-js_shared__"],$7=z7,M0=$7,t5=function(){var t=/[^.]+$/.exec(M0&&M0.keys&&M0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function H7(t){return!!t5&&t5 in t}var W7=H7,V7=Function.prototype,G7=V7.toString;function K7(t){if(t!=null){try{return G7.call(t)}catch{}try{return t+""}catch{}}return""}var i4=K7,Y7=n4,J7=W7,X7=r4,Q7=i4,Z7=/[\\^$.*+?()[\]{}|]/g,eP=/^\[object .+?Constructor\]$/,tP=Function.prototype,rP=Object.prototype,nP=tP.toString,iP=rP.hasOwnProperty,aP=RegExp("^"+nP.call(iP).replace(Z7,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oP(t){if(!X7(t)||J7(t))return!1;var e=Y7(t)?aP:eP;return e.test(Q7(t))}var sP=oP;function lP(t,e){return t==null?void 0:t[e]}var uP=lP,cP=sP,fP=uP;function dP(t,e){var r=fP(t,e);return cP(r)?r:void 0}var Hl=dP,hP=Hl,pP=Ia,mP=hP(pP,"Map"),$1=mP,gP=Hl,vP=gP(Object,"create"),Jh=vP,r5=Jh;function yP(){this.__data__=r5?r5(null):{},this.size=0}var wP=yP;function bP(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var xP=bP,_P=Jh,SP="__lodash_hash_undefined__",kP=Object.prototype,NP=kP.hasOwnProperty;function EP(t){var e=this.__data__;if(_P){var r=e[t];return r===SP?void 0:r}return NP.call(e,t)?e[t]:void 0}var AP=EP,jP=Jh,OP=Object.prototype,LP=OP.hasOwnProperty;function PP(t){var e=this.__data__;return jP?e[t]!==void 0:LP.call(e,t)}var TP=PP,CP=Jh,RP="__lodash_hash_undefined__";function IP(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=CP&&e===void 0?RP:e,this}var DP=IP,MP=wP,FP=xP,BP=AP,qP=TP,UP=DP;function Wl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Wl.prototype.clear=MP;Wl.prototype.delete=FP;Wl.prototype.get=BP;Wl.prototype.has=qP;Wl.prototype.set=UP;var zP=Wl,n5=zP,$P=Kh,HP=$1;function WP(){this.size=0,this.__data__={hash:new n5,map:new(HP||$P),string:new n5}}var VP=WP;function GP(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var KP=GP,YP=KP;function JP(t,e){var r=t.__data__;return YP(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Xh=JP,XP=Xh;function QP(t){var e=XP(this,t).delete(t);return this.size-=e?1:0,e}var ZP=QP,eT=Xh;function tT(t){return eT(this,t).get(t)}var rT=tT,nT=Xh;function iT(t){return nT(this,t).has(t)}var aT=iT,oT=Xh;function sT(t,e){var r=oT(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var lT=sT,uT=VP,cT=ZP,fT=rT,dT=aT,hT=lT;function Vl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Vl.prototype.clear=uT;Vl.prototype.delete=cT;Vl.prototype.get=fT;Vl.prototype.has=dT;Vl.prototype.set=hT;var a4=Vl,pT=Kh,mT=$1,gT=a4,vT=200;function yT(t,e){var r=this.__data__;if(r instanceof pT){var n=r.__data__;if(!mT||n.length<vT-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new gT(n)}return r.set(t,e),this.size=r.size,this}var wT=yT,bT=Kh,xT=s7,_T=u7,ST=f7,kT=h7,NT=wT;function Gl(t){var e=this.__data__=new bT(t);this.size=e.size}Gl.prototype.clear=xT;Gl.prototype.delete=_T;Gl.prototype.get=ST;Gl.prototype.has=kT;Gl.prototype.set=NT;var ET=Gl,AT="__lodash_hash_undefined__";function jT(t){return this.__data__.set(t,AT),this}var OT=jT;function LT(t){return this.__data__.has(t)}var PT=LT,TT=a4,CT=OT,RT=PT;function mh(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new TT;++e<r;)this.add(t[e])}mh.prototype.add=mh.prototype.push=CT;mh.prototype.has=RT;var IT=mh;function DT(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var MT=DT;function FT(t,e){return t.has(e)}var BT=FT,qT=IT,UT=MT,zT=BT,$T=1,HT=2;function WT(t,e,r,n,i,a){var o=r&$T,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(t),h=a.get(e);if(u&&h)return u==e&&h==t;var f=-1,d=!0,c=r&HT?new qT:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var y=t[f],v=e[f];if(n)var w=o?n(v,y,f,e,t,a):n(y,v,f,t,e,a);if(w!==void 0){if(w)continue;d=!1;break}if(c){if(!UT(e,function(m,g){if(!zT(c,g)&&(y===m||i(y,m,r,n,a)))return c.push(g)})){d=!1;break}}else if(!(y===v||i(y,v,r,n,a))){d=!1;break}}return a.delete(t),a.delete(e),d}var o4=WT,VT=Ia,GT=VT.Uint8Array,KT=GT;function YT(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var JT=YT;function XT(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var QT=XT,i5=z1,a5=KT,ZT=Z_,eC=o4,tC=JT,rC=QT,nC=1,iC=2,aC="[object Boolean]",oC="[object Date]",sC="[object Error]",lC="[object Map]",uC="[object Number]",cC="[object RegExp]",fC="[object Set]",dC="[object String]",hC="[object Symbol]",pC="[object ArrayBuffer]",mC="[object DataView]",o5=i5?i5.prototype:void 0,F0=o5?o5.valueOf:void 0;function gC(t,e,r,n,i,a,o){switch(r){case mC:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case pC:return!(t.byteLength!=e.byteLength||!a(new a5(t),new a5(e)));case aC:case oC:case uC:return ZT(+t,+e);case sC:return t.name==e.name&&t.message==e.message;case cC:case dC:return t==e+"";case lC:var s=tC;case fC:var l=n&nC;if(s||(s=rC),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;n|=iC,o.set(t,e);var h=eC(s(t),s(e),n,i,a,o);return o.delete(t),h;case hC:if(F0)return F0.call(t)==F0.call(e)}return!1}var vC=gC;function yC(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var wC=yC,bC=Array.isArray,H1=bC,xC=wC,_C=H1;function SC(t,e,r){var n=e(t);return _C(t)?n:xC(n,r(t))}var kC=SC;function NC(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}var EC=NC;function AC(){return[]}var jC=AC,OC=EC,LC=jC,PC=Object.prototype,TC=PC.propertyIsEnumerable,s5=Object.getOwnPropertySymbols,CC=s5?function(t){return t==null?[]:(t=Object(t),OC(s5(t),function(e){return TC.call(t,e)}))}:LC,RC=CC;function IC(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var DC=IC;function MC(t){return t!=null&&typeof t=="object"}var Qh=MC,FC=Yh,BC=Qh,qC="[object Arguments]";function UC(t){return BC(t)&&FC(t)==qC}var zC=UC,l5=zC,$C=Qh,s4=Object.prototype,HC=s4.hasOwnProperty,WC=s4.propertyIsEnumerable,VC=l5(function(){return arguments}())?l5:function(t){return $C(t)&&HC.call(t,"callee")&&!WC.call(t,"callee")},GC=VC,gh={exports:{}};function KC(){return!1}var YC=KC;gh.exports;(function(t,e){var r=Ia,n=YC,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?r.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||n;t.exports=u})(gh,gh.exports);var l4=gh.exports,JC=9007199254740991,XC=/^(?:0|[1-9]\d*)$/;function QC(t,e){var r=typeof t;return e=e??JC,!!e&&(r=="number"||r!="symbol"&&XC.test(t))&&t>-1&&t%1==0&&t<e}var ZC=QC,eR=9007199254740991;function tR(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=eR}var u4=tR,rR=Yh,nR=u4,iR=Qh,aR="[object Arguments]",oR="[object Array]",sR="[object Boolean]",lR="[object Date]",uR="[object Error]",cR="[object Function]",fR="[object Map]",dR="[object Number]",hR="[object Object]",pR="[object RegExp]",mR="[object Set]",gR="[object String]",vR="[object WeakMap]",yR="[object ArrayBuffer]",wR="[object DataView]",bR="[object Float32Array]",xR="[object Float64Array]",_R="[object Int8Array]",SR="[object Int16Array]",kR="[object Int32Array]",NR="[object Uint8Array]",ER="[object Uint8ClampedArray]",AR="[object Uint16Array]",jR="[object Uint32Array]",Jt={};Jt[bR]=Jt[xR]=Jt[_R]=Jt[SR]=Jt[kR]=Jt[NR]=Jt[ER]=Jt[AR]=Jt[jR]=!0;Jt[aR]=Jt[oR]=Jt[yR]=Jt[sR]=Jt[wR]=Jt[lR]=Jt[uR]=Jt[cR]=Jt[fR]=Jt[dR]=Jt[hR]=Jt[pR]=Jt[mR]=Jt[gR]=Jt[vR]=!1;function OR(t){return iR(t)&&nR(t.length)&&!!Jt[rR(t)]}var LR=OR;function PR(t){return function(e){return t(e)}}var TR=PR,vh={exports:{}};vh.exports;(function(t,e){var r=e4,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,o=a&&r.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s})(vh,vh.exports);var CR=vh.exports,RR=LR,IR=TR,u5=CR,c5=u5&&u5.isTypedArray,DR=c5?IR(c5):RR,c4=DR,MR=DC,FR=GC,BR=H1,qR=l4,UR=ZC,zR=c4,$R=Object.prototype,HR=$R.hasOwnProperty;function WR(t,e){var r=BR(t),n=!r&&FR(t),i=!r&&!n&&qR(t),a=!r&&!n&&!i&&zR(t),o=r||n||i||a,s=o?MR(t.length,String):[],l=s.length;for(var u in t)(e||HR.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||UR(u,l)))&&s.push(u);return s}var VR=WR,GR=Object.prototype;function KR(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||GR;return t===r}var YR=KR;function JR(t,e){return function(r){return t(e(r))}}var XR=JR,QR=XR,ZR=QR(Object.keys,Object),eI=ZR,tI=YR,rI=eI,nI=Object.prototype,iI=nI.hasOwnProperty;function aI(t){if(!tI(t))return rI(t);var e=[];for(var r in Object(t))iI.call(t,r)&&r!="constructor"&&e.push(r);return e}var oI=aI,sI=n4,lI=u4;function uI(t){return t!=null&&lI(t.length)&&!sI(t)}var cI=uI,fI=VR,dI=oI,hI=cI;function pI(t){return hI(t)?fI(t):dI(t)}var mI=pI,gI=kC,vI=RC,yI=mI;function wI(t){return gI(t,yI,vI)}var bI=wI,f5=bI,xI=1,_I=Object.prototype,SI=_I.hasOwnProperty;function kI(t,e,r,n,i,a){var o=r&xI,s=f5(t),l=s.length,u=f5(e),h=u.length;if(l!=h&&!o)return!1;for(var f=l;f--;){var d=s[f];if(!(o?d in e:SI.call(e,d)))return!1}var c=a.get(t),y=a.get(e);if(c&&y)return c==e&&y==t;var v=!0;a.set(t,e),a.set(e,t);for(var w=o;++f<l;){d=s[f];var m=t[d],g=e[d];if(n)var b=o?n(g,m,d,e,t,a):n(m,g,d,t,e,a);if(!(b===void 0?m===g||i(m,g,r,n,a):b)){v=!1;break}w||(w=d=="constructor")}if(v&&!w){var S=t.constructor,E=e.constructor;S!=E&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof E=="function"&&E instanceof E)&&(v=!1)}return a.delete(t),a.delete(e),v}var NI=kI,EI=Hl,AI=Ia,jI=EI(AI,"DataView"),OI=jI,LI=Hl,PI=Ia,TI=LI(PI,"Promise"),CI=TI,RI=Hl,II=Ia,DI=RI(II,"Set"),MI=DI,FI=Hl,BI=Ia,qI=FI(BI,"WeakMap"),UI=qI,wg=OI,bg=$1,xg=CI,_g=MI,Sg=UI,f4=Yh,Kl=i4,d5="[object Map]",zI="[object Object]",h5="[object Promise]",p5="[object Set]",m5="[object WeakMap]",g5="[object DataView]",$I=Kl(wg),HI=Kl(bg),WI=Kl(xg),VI=Kl(_g),GI=Kl(Sg),Ho=f4;(wg&&Ho(new wg(new ArrayBuffer(1)))!=g5||bg&&Ho(new bg)!=d5||xg&&Ho(xg.resolve())!=h5||_g&&Ho(new _g)!=p5||Sg&&Ho(new Sg)!=m5)&&(Ho=function(t){var e=f4(t),r=e==zI?t.constructor:void 0,n=r?Kl(r):"";if(n)switch(n){case $I:return g5;case HI:return d5;case WI:return h5;case VI:return p5;case GI:return m5}return e});var KI=Ho,B0=ET,YI=o4,JI=vC,XI=NI,v5=KI,y5=H1,w5=l4,QI=c4,ZI=1,b5="[object Arguments]",x5="[object Array]",fd="[object Object]",e9=Object.prototype,_5=e9.hasOwnProperty;function t9(t,e,r,n,i,a){var o=y5(t),s=y5(e),l=o?x5:v5(t),u=s?x5:v5(e);l=l==b5?fd:l,u=u==b5?fd:u;var h=l==fd,f=u==fd,d=l==u;if(d&&w5(t)){if(!w5(e))return!1;o=!0,h=!1}if(d&&!h)return a||(a=new B0),o||QI(t)?YI(t,e,r,n,i,a):JI(t,e,l,r,n,i,a);if(!(r&ZI)){var c=h&&_5.call(t,"__wrapped__"),y=f&&_5.call(e,"__wrapped__");if(c||y){var v=c?t.value():t,w=y?e.value():e;return a||(a=new B0),i(v,w,r,n,a)}}return d?(a||(a=new B0),XI(t,e,r,n,i,a)):!1}var r9=t9,n9=r9,S5=Qh;function d4(t,e,r,n,i){return t===e?!0:t==null||e==null||!S5(t)&&!S5(e)?t!==t&&e!==e:n9(t,e,r,n,d4,i)}var i9=d4,a9=i9;function o9(t,e){return a9(t,e)}var s9=o9,h4={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(n,i){t.exports=i()})(typeof self<"u"?self:Yn,function(){return function(r){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return r[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=r,i.c=n,i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:s})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=109)}([function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(17),o=i(18),s=i(19),l=i(45),u=i(46),h=i(47),f=i(48),d=i(49),c=i(12),y=i(32),v=i(33),w=i(31),m=i(1),g={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:a.default,Format:o.default,Leaf:s.default,Embed:f.default,Scroll:l.default,Block:h.default,Inline:u.default,Text:d.default,Attributor:{Attribute:c.default,Class:y.default,Style:v.default,Store:w.default}};n.default=g},function(r,n,i){var a=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var b in g)g.hasOwnProperty(b)&&(m[b]=g[b])};return function(m,g){w(m,g);function b(){this.constructor=m}m.prototype=g===null?Object.create(g):(b.prototype=g.prototype,new b)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(w){a(m,w);function m(g){var b=this;return g="[Parchment] "+g,b=w.call(this,g)||this,b.message=g,b.name=b.constructor.name,b}return m}(Error);n.ParchmentError=o;var s={},l={},u={},h={};n.DATA_KEY="__blot";var f;(function(w){w[w.TYPE=3]="TYPE",w[w.LEVEL=12]="LEVEL",w[w.ATTRIBUTE=13]="ATTRIBUTE",w[w.BLOT=14]="BLOT",w[w.INLINE=7]="INLINE",w[w.BLOCK=11]="BLOCK",w[w.BLOCK_BLOT=10]="BLOCK_BLOT",w[w.INLINE_BLOT=6]="INLINE_BLOT",w[w.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",w[w.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",w[w.ANY=15]="ANY"})(f=n.Scope||(n.Scope={}));function d(w,m){var g=y(w);if(g==null)throw new o("Unable to create "+w+" blot");var b=g,S=w instanceof Node||w.nodeType===Node.TEXT_NODE?w:b.create(m);return new b(S,m)}n.create=d;function c(w,m){return m===void 0&&(m=!1),w==null?null:w[n.DATA_KEY]!=null?w[n.DATA_KEY].blot:m?c(w.parentNode,m):null}n.find=c;function y(w,m){m===void 0&&(m=f.ANY);var g;if(typeof w=="string")g=h[w]||s[w];else if(w instanceof Text||w.nodeType===Node.TEXT_NODE)g=h.text;else if(typeof w=="number")w&f.LEVEL&f.BLOCK?g=h.block:w&f.LEVEL&f.INLINE&&(g=h.inline);else if(w instanceof HTMLElement){var b=(w.getAttribute("class")||"").split(/\s+/);for(var S in b)if(g=l[b[S]],g)break;g=g||u[w.tagName]}return g==null?null:m&f.LEVEL&g.scope&&m&f.TYPE&g.scope?g:null}n.query=y;function v(){for(var w=[],m=0;m<arguments.length;m++)w[m]=arguments[m];if(w.length>1)return w.map(function(S){return v(S)});var g=w[0];if(typeof g.blotName!="string"&&typeof g.attrName!="string")throw new o("Invalid definition");if(g.blotName==="abstract")throw new o("Cannot register abstract class");if(h[g.blotName||g.attrName]=g,typeof g.keyName=="string")s[g.keyName]=g;else if(g.className!=null&&(l[g.className]=g),g.tagName!=null){Array.isArray(g.tagName)?g.tagName=g.tagName.map(function(S){return S.toUpperCase()}):g.tagName=g.tagName.toUpperCase();var b=Array.isArray(g.tagName)?g.tagName:[g.tagName];b.forEach(function(S){(u[S]==null||g.className==null)&&(u[S]=g)})}return g}n.register=v},function(r,n,i){var a=i(51),o=i(11),s=i(3),l=i(20),u="\0",h=function(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]};h.prototype.insert=function(f,d){var c={};return f.length===0?this:(c.insert=f,d!=null&&typeof d=="object"&&Object.keys(d).length>0&&(c.attributes=d),this.push(c))},h.prototype.delete=function(f){return f<=0?this:this.push({delete:f})},h.prototype.retain=function(f,d){if(f<=0)return this;var c={retain:f};return d!=null&&typeof d=="object"&&Object.keys(d).length>0&&(c.attributes=d),this.push(c)},h.prototype.push=function(f){var d=this.ops.length,c=this.ops[d-1];if(f=s(!0,{},f),typeof c=="object"){if(typeof f.delete=="number"&&typeof c.delete=="number")return this.ops[d-1]={delete:c.delete+f.delete},this;if(typeof c.delete=="number"&&f.insert!=null&&(d-=1,c=this.ops[d-1],typeof c!="object"))return this.ops.unshift(f),this;if(o(f.attributes,c.attributes)){if(typeof f.insert=="string"&&typeof c.insert=="string")return this.ops[d-1]={insert:c.insert+f.insert},typeof f.attributes=="object"&&(this.ops[d-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof c.retain=="number")return this.ops[d-1]={retain:c.retain+f.retain},typeof f.attributes=="object"&&(this.ops[d-1].attributes=f.attributes),this}}return d===this.ops.length?this.ops.push(f):this.ops.splice(d,0,f),this},h.prototype.chop=function(){var f=this.ops[this.ops.length-1];return f&&f.retain&&!f.attributes&&this.ops.pop(),this},h.prototype.filter=function(f){return this.ops.filter(f)},h.prototype.forEach=function(f){this.ops.forEach(f)},h.prototype.map=function(f){return this.ops.map(f)},h.prototype.partition=function(f){var d=[],c=[];return this.forEach(function(y){var v=f(y)?d:c;v.push(y)}),[d,c]},h.prototype.reduce=function(f,d){return this.ops.reduce(f,d)},h.prototype.changeLength=function(){return this.reduce(function(f,d){return d.insert?f+l.length(d):d.delete?f-d.delete:f},0)},h.prototype.length=function(){return this.reduce(function(f,d){return f+l.length(d)},0)},h.prototype.slice=function(f,d){f=f||0,typeof d!="number"&&(d=1/0);for(var c=[],y=l.iterator(this.ops),v=0;v<d&&y.hasNext();){var w;v<f?w=y.next(f-v):(w=y.next(d-v),c.push(w)),v+=l.length(w)}return new h(c)},h.prototype.compose=function(f){var d=l.iterator(this.ops),c=l.iterator(f.ops),y=[],v=c.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var w=v.retain;d.peekType()==="insert"&&d.peekLength()<=w;)w-=d.peekLength(),y.push(d.next());v.retain-w>0&&c.next(v.retain-w)}for(var m=new h(y);d.hasNext()||c.hasNext();)if(c.peekType()==="insert")m.push(c.next());else if(d.peekType()==="delete")m.push(d.next());else{var g=Math.min(d.peekLength(),c.peekLength()),b=d.next(g),S=c.next(g);if(typeof S.retain=="number"){var E={};typeof b.retain=="number"?E.retain=g:E.insert=b.insert;var I=l.attributes.compose(b.attributes,S.attributes,typeof b.retain=="number");if(I&&(E.attributes=I),m.push(E),!c.hasNext()&&o(m.ops[m.ops.length-1],E)){var L=new h(d.rest());return m.concat(L).chop()}}else typeof S.delete=="number"&&typeof b.retain=="number"&&m.push(S)}return m.chop()},h.prototype.concat=function(f){var d=new h(this.ops.slice());return f.ops.length>0&&(d.push(f.ops[0]),d.ops=d.ops.concat(f.ops.slice(1))),d},h.prototype.diff=function(f,d){if(this.ops===f.ops)return new h;var c=[this,f].map(function(g){return g.map(function(b){if(b.insert!=null)return typeof b.insert=="string"?b.insert:u;var S=g===f?"on":"with";throw new Error("diff() called "+S+" non-document")}).join("")}),y=new h,v=a(c[0],c[1],d),w=l.iterator(this.ops),m=l.iterator(f.ops);return v.forEach(function(g){for(var b=g[1].length;b>0;){var S=0;switch(g[0]){case a.INSERT:S=Math.min(m.peekLength(),b),y.push(m.next(S));break;case a.DELETE:S=Math.min(b,w.peekLength()),w.next(S),y.delete(S);break;case a.EQUAL:S=Math.min(w.peekLength(),m.peekLength(),b);var E=w.next(S),I=m.next(S);o(E.insert,I.insert)?y.retain(S,l.attributes.diff(E.attributes,I.attributes)):y.push(I).delete(S);break}b-=S}}),y.chop()},h.prototype.eachLine=function(f,d){d=d||`
`;for(var c=l.iterator(this.ops),y=new h,v=0;c.hasNext();){if(c.peekType()!=="insert")return;var w=c.peek(),m=l.length(w)-c.peekLength(),g=typeof w.insert=="string"?w.insert.indexOf(d,m)-m:-1;if(g<0)y.push(c.next());else if(g>0)y.push(c.next(g));else{if(f(y,c.next(1).attributes||{},v)===!1)return;v+=1,y=new h}}y.length()>0&&f(y,{},v)},h.prototype.transform=function(f,d){if(d=!!d,typeof f=="number")return this.transformPosition(f,d);for(var c=l.iterator(this.ops),y=l.iterator(f.ops),v=new h;c.hasNext()||y.hasNext();)if(c.peekType()==="insert"&&(d||y.peekType()!=="insert"))v.retain(l.length(c.next()));else if(y.peekType()==="insert")v.push(y.next());else{var w=Math.min(c.peekLength(),y.peekLength()),m=c.next(w),g=y.next(w);if(m.delete)continue;g.delete?v.push(g):v.retain(w,l.attributes.transform(m.attributes,g.attributes,d))}return v.chop()},h.prototype.transformPosition=function(f,d){d=!!d;for(var c=l.iterator(this.ops),y=0;c.hasNext()&&y<=f;){var v=c.peekLength(),w=c.peekType();if(c.next(),w==="delete"){f-=Math.min(v,f-y);continue}else w==="insert"&&(y<f||!d)&&(f+=v);y+=v}return f},r.exports=h},function(r,n){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=function(c){return typeof Array.isArray=="function"?Array.isArray(c):a.call(c)==="[object Array]"},u=function(c){if(!c||a.call(c)!=="[object Object]")return!1;var y=i.call(c,"constructor"),v=c.constructor&&c.constructor.prototype&&i.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!y&&!v)return!1;var w;for(w in c);return typeof w>"u"||i.call(c,w)},h=function(c,y){o&&y.name==="__proto__"?o(c,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):c[y.name]=y.newValue},f=function(c,y){if(y==="__proto__")if(i.call(c,y)){if(s)return s(c,y).value}else return;return c[y]};r.exports=function d(){var c,y,v,w,m,g,b=arguments[0],S=1,E=arguments.length,I=!1;for(typeof b=="boolean"&&(I=b,b=arguments[1]||{},S=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});S<E;++S)if(c=arguments[S],c!=null)for(y in c)v=f(b,y),w=f(c,y),b!==w&&(I&&w&&(u(w)||(m=l(w)))?(m?(m=!1,g=v&&l(v)?v:[]):g=v&&u(v)?v:{},h(b,{name:y,newValue:d(I,g,w)})):typeof w<"u"&&h(b,{name:y,newValue:w}));return b}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var a=function(){function k(A,R){for(var C=0;C<R.length;C++){var V=R[C];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(A,V.key,V)}}return function(A,R,C){return R&&k(A.prototype,R),C&&k(A,C),A}}(),o=function k(A,R,C){A===null&&(A=Function.prototype);var V=Object.getOwnPropertyDescriptor(A,R);if(V===void 0){var Z=Object.getPrototypeOf(A);return Z===null?void 0:k(Z,R,C)}else{if("value"in V)return V.value;var te=V.get;return te===void 0?void 0:te.call(C)}},s=i(3),l=b(s),u=i(2),h=b(u),f=i(0),d=b(f),c=i(16),y=b(c),v=i(6),w=b(v),m=i(7),g=b(m);function b(k){return k&&k.__esModule?k:{default:k}}function S(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}function E(k,A){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:k}function I(k,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);k.prototype=Object.create(A&&A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(k,A):k.__proto__=A)}var L=1,O=function(k){I(A,k);function A(){return S(this,A),E(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return a(A,[{key:"attach",value:function(){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"attach",this).call(this),this.attributes=new d.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new h.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(C,V){var Z=d.default.query(C,d.default.Scope.BLOCK_ATTRIBUTE);Z!=null&&this.attributes.attribute(Z,V)}},{key:"formatAt",value:function(C,V,Z,te){this.format(Z,te)}},{key:"insertAt",value:function(C,V,Z){if(typeof V=="string"&&V.endsWith(`
`)){var te=d.default.create(M.blotName);this.parent.insertBefore(te,C===0?this:this.next),te.insertAt(0,V.slice(0,-1))}else o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,C,V,Z)}}]),A}(d.default.Embed);O.scope=d.default.Scope.BLOCK_BLOT;var M=function(k){I(A,k);function A(R){S(this,A);var C=E(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,R));return C.cache={},C}return a(A,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(d.default.Leaf).reduce(function(C,V){return V.length()===0?C:C.insert(V.value(),T(V))},new h.default).insert(`
`,T(this))),this.cache.delta}},{key:"deleteAt",value:function(C,V){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,C,V),this.cache={}}},{key:"formatAt",value:function(C,V,Z,te){V<=0||(d.default.query(Z,d.default.Scope.BLOCK)?C+V===this.length()&&this.format(Z,te):o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,C,Math.min(V,this.length()-C-1),Z,te),this.cache={})}},{key:"insertAt",value:function(C,V,Z){if(Z!=null)return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,C,V,Z);if(V.length!==0){var te=V.split(`
`),Q=te.shift();Q.length>0&&(C<this.length()-1||this.children.tail==null?o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,Math.min(C,this.length()-1),Q):this.children.tail.insertAt(this.children.tail.length(),Q),this.cache={});var K=this;te.reduce(function(W,q){return K=K.split(W,!0),K.insertAt(0,q),q.length},C+Q.length)}}},{key:"insertBefore",value:function(C,V){var Z=this.children.head;o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,C,V),Z instanceof y.default&&Z.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"length",this).call(this)+L),this.cache.length}},{key:"moveChildren",value:function(C,V){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"moveChildren",this).call(this,C,V),this.cache={}}},{key:"optimize",value:function(C){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,C),this.cache={}}},{key:"path",value:function(C){return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,C,!0)}},{key:"removeChild",value:function(C){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"removeChild",this).call(this,C),this.cache={}}},{key:"split",value:function(C){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(V&&(C===0||C>=this.length()-L)){var Z=this.clone();return C===0?(this.parent.insertBefore(Z,this),this):(this.parent.insertBefore(Z,this.next),Z)}else{var te=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"split",this).call(this,C,V);return this.cache={},te}}}]),A}(d.default.Block);M.blotName="block",M.tagName="P",M.defaultChild="break",M.allowedChildren=[w.default,d.default.Embed,g.default];function T(k){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k==null||(typeof k.formats=="function"&&(A=(0,l.default)(A,k.formats())),k.parent==null||k.parent.blotName=="scroll"||k.parent.statics.scope!==k.statics.scope)?A:T(k.parent,A)}n.bubbleFormats=T,n.BlockEmbed=O,n.default=M},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},o=function(){function K(W,q){var P=[],F=!0,U=!1,H=void 0;try{for(var B=W[Symbol.iterator](),J;!(F=(J=B.next()).done)&&(P.push(J.value),!(q&&P.length===q));F=!0);}catch(re){U=!0,H=re}finally{try{!F&&B.return&&B.return()}finally{if(U)throw H}}return P}return function(W,q){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return K(W,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function K(W,q){for(var P=0;P<q.length;P++){var F=q[P];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(W,F.key,F)}}return function(W,q,P){return q&&K(W.prototype,q),P&&K(W,P),W}}();i(50);var l=i(2),u=T(l),h=i(14),f=T(h),d=i(8),c=T(d),y=i(9),v=T(y),w=i(0),m=T(w),g=i(15),b=T(g),S=i(3),E=T(S),I=i(10),L=T(I),O=i(34),M=T(O);function T(K){return K&&K.__esModule?K:{default:K}}function k(K,W,q){return W in K?Object.defineProperty(K,W,{value:q,enumerable:!0,configurable:!0,writable:!0}):K[W]=q,K}function A(K,W){if(!(K instanceof W))throw new TypeError("Cannot call a class as a function")}var R=(0,L.default)("quill"),C=function(){s(K,null,[{key:"debug",value:function(q){q===!0&&(q="log"),L.default.level(q)}},{key:"find",value:function(q){return q.__quill||m.default.find(q)}},{key:"import",value:function(q){return this.imports[q]==null&&R.error("Cannot import "+q+". Are you sure it was registered?"),this.imports[q]}},{key:"register",value:function(q,P){var F=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof q!="string"){var H=q.attrName||q.blotName;typeof H=="string"?this.register("formats/"+H,q,P):Object.keys(q).forEach(function(B){F.register(B,q[B],P)})}else this.imports[q]!=null&&!U&&R.warn("Overwriting "+q+" with",P),this.imports[q]=P,(q.startsWith("blots/")||q.startsWith("formats/"))&&P.blotName!=="abstract"?m.default.register(P):q.startsWith("modules")&&typeof P.register=="function"&&P.register()}}]);function K(W){var q=this,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(A(this,K),this.options=V(W,P),this.container=this.options.container,this.container==null)return R.error("Invalid Quill container",W);this.options.debug&&K.debug(this.options.debug);var F=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new c.default,this.scroll=m.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new f.default(this.scroll),this.selection=new b.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(c.default.events.EDITOR_CHANGE,function(H){H===c.default.events.TEXT_CHANGE&&q.root.classList.toggle("ql-blank",q.editor.isBlank())}),this.emitter.on(c.default.events.SCROLL_UPDATE,function(H,B){var J=q.selection.lastRange,re=J&&J.length===0?J.index:void 0;Z.call(q,function(){return q.editor.update(null,B,re)},H)});var U=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+F+"<p><br></p></div>");this.setContents(U),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return s(K,[{key:"addContainer",value:function(q){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof q=="string"){var F=q;q=document.createElement("div"),q.classList.add(F)}return this.container.insertBefore(q,P),q}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(q,P,F){var U=this,H=te(q,P,F),B=o(H,4);return q=B[0],P=B[1],F=B[3],Z.call(this,function(){return U.editor.deleteText(q,P)},F,q,-1*P)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(q),this.container.classList.toggle("ql-disabled",!q)}},{key:"focus",value:function(){var q=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=q,this.scrollIntoView()}},{key:"format",value:function(q,P){var F=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c.default.sources.API;return Z.call(this,function(){var H=F.getSelection(!0),B=new u.default;if(H==null)return B;if(m.default.query(q,m.default.Scope.BLOCK))B=F.editor.formatLine(H.index,H.length,k({},q,P));else{if(H.length===0)return F.selection.format(q,P),B;B=F.editor.formatText(H.index,H.length,k({},q,P))}return F.setSelection(H,c.default.sources.SILENT),B},U)}},{key:"formatLine",value:function(q,P,F,U,H){var B=this,J=void 0,re=te(q,P,F,U,H),ne=o(re,4);return q=ne[0],P=ne[1],J=ne[2],H=ne[3],Z.call(this,function(){return B.editor.formatLine(q,P,J)},H,q,0)}},{key:"formatText",value:function(q,P,F,U,H){var B=this,J=void 0,re=te(q,P,F,U,H),ne=o(re,4);return q=ne[0],P=ne[1],J=ne[2],H=ne[3],Z.call(this,function(){return B.editor.formatText(q,P,J)},H,q,0)}},{key:"getBounds",value:function(q){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=void 0;typeof q=="number"?F=this.selection.getBounds(q,P):F=this.selection.getBounds(q.index,q.length);var U=this.container.getBoundingClientRect();return{bottom:F.bottom-U.top,height:F.height,left:F.left-U.left,right:F.right-U.left,top:F.top-U.top,width:F.width}}},{key:"getContents",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-q,F=te(q,P),U=o(F,2);return q=U[0],P=U[1],this.editor.getContents(q,P)}},{key:"getFormat",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof q=="number"?this.editor.getFormat(q,P):this.editor.getFormat(q.index,q.length)}},{key:"getIndex",value:function(q){return q.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(q){return this.scroll.leaf(q)}},{key:"getLine",value:function(q){return this.scroll.line(q)}},{key:"getLines",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof q!="number"?this.scroll.lines(q.index,q.length):this.scroll.lines(q,P)}},{key:"getModule",value:function(q){return this.theme.modules[q]}},{key:"getSelection",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return q&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-q,F=te(q,P),U=o(F,2);return q=U[0],P=U[1],this.editor.getText(q,P)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(q,P,F){var U=this,H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:K.sources.API;return Z.call(this,function(){return U.editor.insertEmbed(q,P,F)},H,q)}},{key:"insertText",value:function(q,P,F,U,H){var B=this,J=void 0,re=te(q,0,F,U,H),ne=o(re,4);return q=ne[0],J=ne[2],H=ne[3],Z.call(this,function(){return B.editor.insertText(q,P,J)},H,q,P.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(q,P,F){this.clipboard.dangerouslyPasteHTML(q,P,F)}},{key:"removeFormat",value:function(q,P,F){var U=this,H=te(q,P,F),B=o(H,4);return q=B[0],P=B[1],F=B[3],Z.call(this,function(){return U.editor.removeFormat(q,P)},F,q)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(q){var P=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.default.sources.API;return Z.call(this,function(){q=new u.default(q);var U=P.getLength(),H=P.editor.deleteText(0,U),B=P.editor.applyDelta(q),J=B.ops[B.ops.length-1];J!=null&&typeof J.insert=="string"&&J.insert[J.insert.length-1]===`
`&&(P.editor.deleteText(P.getLength()-1,1),B.delete(1));var re=H.compose(B);return re},F)}},{key:"setSelection",value:function(q,P,F){if(q==null)this.selection.setRange(null,P||K.sources.API);else{var U=te(q,P,F),H=o(U,4);q=H[0],P=H[1],F=H[3],this.selection.setRange(new g.Range(q,P),F),F!==c.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(q){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.default.sources.API,F=new u.default().insert(q);return this.setContents(F,P)}},{key:"update",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c.default.sources.USER,P=this.scroll.update(q);return this.selection.update(q),P}},{key:"updateContents",value:function(q){var P=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.default.sources.API;return Z.call(this,function(){return q=new u.default(q),P.editor.applyDelta(q,F)},F,!0)}}]),K}();C.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},C.events=c.default.events,C.sources=c.default.sources,C.version="1.3.7",C.imports={delta:u.default,parchment:m.default,"core/module":v.default,"core/theme":M.default};function V(K,W){if(W=(0,E.default)(!0,{container:K,modules:{clipboard:!0,keyboard:!0,history:!0}},W),!W.theme||W.theme===C.DEFAULTS.theme)W.theme=M.default;else if(W.theme=C.import("themes/"+W.theme),W.theme==null)throw new Error("Invalid theme "+W.theme+". Did you register it?");var q=(0,E.default)(!0,{},W.theme.DEFAULTS);[q,W].forEach(function(U){U.modules=U.modules||{},Object.keys(U.modules).forEach(function(H){U.modules[H]===!0&&(U.modules[H]={})})});var P=Object.keys(q.modules).concat(Object.keys(W.modules)),F=P.reduce(function(U,H){var B=C.import("modules/"+H);return B==null?R.error("Cannot load "+H+" module. Are you sure you registered it?"):U[H]=B.DEFAULTS||{},U},{});return W.modules!=null&&W.modules.toolbar&&W.modules.toolbar.constructor!==Object&&(W.modules.toolbar={container:W.modules.toolbar}),W=(0,E.default)(!0,{},C.DEFAULTS,{modules:F},q,W),["bounds","container","scrollingContainer"].forEach(function(U){typeof W[U]=="string"&&(W[U]=document.querySelector(W[U]))}),W.modules=Object.keys(W.modules).reduce(function(U,H){return W.modules[H]&&(U[H]=W.modules[H]),U},{}),W}function Z(K,W,q,P){if(this.options.strict&&!this.isEnabled()&&W===c.default.sources.USER)return new u.default;var F=q==null?null:this.getSelection(),U=this.editor.delta,H=K();if(F!=null&&(q===!0&&(q=F.index),P==null?F=Q(F,H,W):P!==0&&(F=Q(F,q,P,W)),this.setSelection(F,c.default.sources.SILENT)),H.length()>0){var B,J=[c.default.events.TEXT_CHANGE,H,U,W];if((B=this.emitter).emit.apply(B,[c.default.events.EDITOR_CHANGE].concat(J)),W!==c.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,J)}}return H}function te(K,W,q,P,F){var U={};return typeof K.index=="number"&&typeof K.length=="number"?typeof W!="number"?(F=P,P=q,q=W,W=K.length,K=K.index):(W=K.length,K=K.index):typeof W!="number"&&(F=P,P=q,q=W,W=0),(typeof q>"u"?"undefined":a(q))==="object"?(U=q,F=P):typeof q=="string"&&(P!=null?U[q]=P:F=q),F=F||c.default.sources.API,[K,W,U,F]}function Q(K,W,q,P){if(K==null)return null;var F=void 0,U=void 0;if(W instanceof u.default){var H=[K.index,K.index+K.length].map(function(ne){return W.transformPosition(ne,P!==c.default.sources.USER)}),B=o(H,2);F=B[0],U=B[1]}else{var J=[K.index,K.index+K.length].map(function(ne){return ne<W||ne===W&&P===c.default.sources.USER?ne:q>=0?ne+q:Math.max(W,ne+q)}),re=o(J,2);F=re[0],U=re[1]}return new g.Range(F,U-F)}n.expandConfig=V,n.overload=te,n.default=C},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(m,g){for(var b=0;b<g.length;b++){var S=g[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(m,S.key,S)}}return function(m,g,b){return g&&w(m.prototype,g),b&&w(m,b),m}}(),o=function w(m,g,b){m===null&&(m=Function.prototype);var S=Object.getOwnPropertyDescriptor(m,g);if(S===void 0){var E=Object.getPrototypeOf(m);return E===null?void 0:w(E,g,b)}else{if("value"in S)return S.value;var I=S.get;return I===void 0?void 0:I.call(b)}},s=i(7),l=f(s),u=i(0),h=f(u);function f(w){return w&&w.__esModule?w:{default:w}}function d(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function c(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w}function y(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)}var v=function(w){y(m,w);function m(){return d(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return a(m,[{key:"formatAt",value:function(b,S,E,I){if(m.compare(this.statics.blotName,E)<0&&h.default.query(E,h.default.Scope.BLOT)){var L=this.isolate(b,S);I&&L.wrap(E,I)}else o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"formatAt",this).call(this,b,S,E,I)}},{key:"optimize",value:function(b){if(o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,b),this.parent instanceof m&&m.compare(this.statics.blotName,this.parent.statics.blotName)>0){var S=this.parent.isolate(this.offset(),this.length());this.moveChildren(S),S.wrap(this)}}}],[{key:"compare",value:function(b,S){var E=m.order.indexOf(b),I=m.order.indexOf(S);return E>=0||I>=0?E-I:b===S?0:b<S?-1:1}}]),m}(h.default.Inline);v.allowedChildren=[v,h.default.Embed,l.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),o=s(a);function s(d){return d&&d.__esModule?d:{default:d}}function l(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function u(d,c){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:d}function h(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var f=function(d){h(c,d);function c(){return l(this,c),u(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return c}(o.default.Text);n.default=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function g(b,S){for(var E=0;E<S.length;E++){var I=S[E];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(b,I.key,I)}}return function(b,S,E){return S&&g(b.prototype,S),E&&g(b,E),b}}(),o=function g(b,S,E){b===null&&(b=Function.prototype);var I=Object.getOwnPropertyDescriptor(b,S);if(I===void 0){var L=Object.getPrototypeOf(b);return L===null?void 0:g(L,S,E)}else{if("value"in I)return I.value;var O=I.get;return O===void 0?void 0:O.call(E)}},s=i(54),l=f(s),u=i(10),h=f(u);function f(g){return g&&g.__esModule?g:{default:g}}function d(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function c(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function y(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var v=(0,h.default)("quill:events"),w=["selectionchange","mousedown","mouseup","click"];w.forEach(function(g){document.addEventListener(g,function(){for(var b=arguments.length,S=Array(b),E=0;E<b;E++)S[E]=arguments[E];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(I){if(I.__quill&&I.__quill.emitter){var L;(L=I.__quill.emitter).handleDOM.apply(L,S)}})})});var m=function(g){y(b,g);function b(){d(this,b);var S=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return S.listeners={},S.on("error",v.error),S}return a(b,[{key:"emit",value:function(){v.log.apply(v,arguments),o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(E){for(var I=arguments.length,L=Array(I>1?I-1:0),O=1;O<I;O++)L[O-1]=arguments[O];(this.listeners[E.type]||[]).forEach(function(M){var T=M.node,k=M.handler;(E.target===T||T.contains(E.target))&&k.apply(void 0,[E].concat(L))})}},{key:"listenDOM",value:function(E,I,L){this.listeners[E]||(this.listeners[E]=[]),this.listeners[E].push({node:I,handler:L})}}]),b}(l.default);m.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},m.sources={API:"api",SILENT:"silent",USER:"user"},n.default=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});function a(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function s(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,s),this.quill=l,this.options=u};o.DEFAULTS={},n.default=o},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=["error","warn","log","info"],o="warn";function s(u){if(a.indexOf(u)<=a.indexOf(o)){for(var h,f=arguments.length,d=Array(f>1?f-1:0),c=1;c<f;c++)d[c-1]=arguments[c];(h=console)[u].apply(h,d)}}function l(u){return a.reduce(function(h,f){return h[f]=s.bind(console,f,u),h},{})}s.level=l.level=function(u){o=u},n.default=l},function(r,n,i){var a=Array.prototype.slice,o=i(52),s=i(53),l=r.exports=function(d,c,y){return y||(y={}),d===c?!0:d instanceof Date&&c instanceof Date?d.getTime()===c.getTime():!d||!c||typeof d!="object"&&typeof c!="object"?y.strict?d===c:d==c:f(d,c,y)};function u(d){return d==null}function h(d){return!(!d||typeof d!="object"||typeof d.length!="number"||typeof d.copy!="function"||typeof d.slice!="function"||d.length>0&&typeof d[0]!="number")}function f(d,c,y){var v,w;if(u(d)||u(c)||d.prototype!==c.prototype)return!1;if(s(d))return s(c)?(d=a.call(d),c=a.call(c),l(d,c,y)):!1;if(h(d)){if(!h(c)||d.length!==c.length)return!1;for(v=0;v<d.length;v++)if(d[v]!==c[v])return!1;return!0}try{var m=o(d),g=o(c)}catch{return!1}if(m.length!=g.length)return!1;for(m.sort(),g.sort(),v=m.length-1;v>=0;v--)if(m[v]!=g[v])return!1;for(v=m.length-1;v>=0;v--)if(w=m[v],!l(d[w],c[w],y))return!1;return typeof d==typeof c}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(1),o=function(){function s(l,u,h){h===void 0&&(h={}),this.attrName=l,this.keyName=u;var f=a.Scope.TYPE&a.Scope.ATTRIBUTE;h.scope!=null?this.scope=h.scope&a.Scope.LEVEL|f:this.scope=a.Scope.ATTRIBUTE,h.whitelist!=null&&(this.whitelist=h.whitelist)}return s.keys=function(l){return[].map.call(l.attributes,function(u){return u.name})},s.prototype.add=function(l,u){return this.canAdd(l,u)?(l.setAttribute(this.keyName,u),!0):!1},s.prototype.canAdd=function(l,u){var h=a.query(l,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return h==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},s.prototype.remove=function(l){l.removeAttribute(this.keyName)},s.prototype.value=function(l){var u=l.getAttribute(this.keyName);return this.canAdd(l,u)&&u?u:""},s}();n.default=o},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var a=function(){function O(M,T){var k=[],A=!0,R=!1,C=void 0;try{for(var V=M[Symbol.iterator](),Z;!(A=(Z=V.next()).done)&&(k.push(Z.value),!(T&&k.length===T));A=!0);}catch(te){R=!0,C=te}finally{try{!A&&V.return&&V.return()}finally{if(R)throw C}}return k}return function(M,T){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return O(M,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function O(M,T){for(var k=0;k<T.length;k++){var A=T[k];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(M,A.key,A)}}return function(M,T,k){return T&&O(M.prototype,T),k&&O(M,k),M}}(),s=function O(M,T,k){M===null&&(M=Function.prototype);var A=Object.getOwnPropertyDescriptor(M,T);if(A===void 0){var R=Object.getPrototypeOf(M);return R===null?void 0:O(R,T,k)}else{if("value"in A)return A.value;var C=A.get;return C===void 0?void 0:C.call(k)}},l=i(2),u=g(l),h=i(0),f=g(h),d=i(4),c=g(d),y=i(6),v=g(y),w=i(7),m=g(w);function g(O){return O&&O.__esModule?O:{default:O}}function b(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")}function S(O,M){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:O}function E(O,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);O.prototype=Object.create(M&&M.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(O,M):O.__proto__=M)}var I=function(O){E(M,O);function M(){return b(this,M),S(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return M}(v.default);I.blotName="code",I.tagName="CODE";var L=function(O){E(M,O);function M(){return b(this,M),S(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return o(M,[{key:"delta",value:function(){var k=this,A=this.domNode.textContent;return A.endsWith(`
`)&&(A=A.slice(0,-1)),A.split(`
`).reduce(function(R,C){return R.insert(C).insert(`
`,k.formats())},new u.default)}},{key:"format",value:function(k,A){if(!(k===this.statics.blotName&&A)){var R=this.descendant(m.default,this.length()-1),C=a(R,1),V=C[0];V!=null&&V.deleteAt(V.length()-1,1),s(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"format",this).call(this,k,A)}}},{key:"formatAt",value:function(k,A,R,C){if(A!==0&&!(f.default.query(R,f.default.Scope.BLOCK)==null||R===this.statics.blotName&&C===this.statics.formats(this.domNode))){var V=this.newlineIndex(k);if(!(V<0||V>=k+A)){var Z=this.newlineIndex(k,!0)+1,te=V-Z+1,Q=this.isolate(Z,te),K=Q.next;Q.format(R,C),K instanceof M&&K.formatAt(0,k-Z+A-te,R,C)}}}},{key:"insertAt",value:function(k,A,R){if(R==null){var C=this.descendant(m.default,k),V=a(C,2),Z=V[0],te=V[1];Z.insertAt(te,A)}}},{key:"length",value:function(){var k=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?k:k+1}},{key:"newlineIndex",value:function(k){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(A)return this.domNode.textContent.slice(0,k).lastIndexOf(`
`);var R=this.domNode.textContent.slice(k).indexOf(`
`);return R>-1?k+R:-1}},{key:"optimize",value:function(k){this.domNode.textContent.endsWith(`
`)||this.appendChild(f.default.create("text",`
`)),s(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"optimize",this).call(this,k);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===A.statics.formats(A.domNode)&&(A.optimize(k),A.moveChildren(this),A.remove())}},{key:"replace",value:function(k){s(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"replace",this).call(this,k),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(A){var R=f.default.find(A);R==null?A.parentNode.removeChild(A):R instanceof f.default.Embed?R.remove():R.unwrap()})}}],[{key:"create",value:function(k){var A=s(M.__proto__||Object.getPrototypeOf(M),"create",this).call(this,k);return A.setAttribute("spellcheck",!1),A}},{key:"formats",value:function(){return!0}}]),M}(c.default);L.blotName="code-block",L.tagName="PRE",L.TAB="  ",n.Code=I,n.default=L},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},o=function(){function K(W,q){var P=[],F=!0,U=!1,H=void 0;try{for(var B=W[Symbol.iterator](),J;!(F=(J=B.next()).done)&&(P.push(J.value),!(q&&P.length===q));F=!0);}catch(re){U=!0,H=re}finally{try{!F&&B.return&&B.return()}finally{if(U)throw H}}return P}return function(W,q){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return K(W,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function K(W,q){for(var P=0;P<q.length;P++){var F=q[P];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(W,F.key,F)}}return function(W,q,P){return q&&K(W.prototype,q),P&&K(W,P),W}}(),l=i(2),u=A(l),h=i(20),f=A(h),d=i(0),c=A(d),y=i(13),v=A(y),w=i(24),m=A(w),g=i(4),b=A(g),S=i(16),E=A(S),I=i(21),L=A(I),O=i(11),M=A(O),T=i(3),k=A(T);function A(K){return K&&K.__esModule?K:{default:K}}function R(K,W,q){return W in K?Object.defineProperty(K,W,{value:q,enumerable:!0,configurable:!0,writable:!0}):K[W]=q,K}function C(K,W){if(!(K instanceof W))throw new TypeError("Cannot call a class as a function")}var V=/^[ -~]*$/,Z=function(){function K(W){C(this,K),this.scroll=W,this.delta=this.getDelta()}return s(K,[{key:"applyDelta",value:function(q){var P=this,F=!1;this.scroll.update();var U=this.scroll.length();return this.scroll.batchStart(),q=Q(q),q.reduce(function(H,B){var J=B.retain||B.delete||B.insert.length||1,re=B.attributes||{};if(B.insert!=null){if(typeof B.insert=="string"){var ne=B.insert;ne.endsWith(`
`)&&F&&(F=!1,ne=ne.slice(0,-1)),H>=U&&!ne.endsWith(`
`)&&(F=!0),P.scroll.insertAt(H,ne);var ge=P.scroll.line(H),be=o(ge,2),Ee=be[0],Ae=be[1],De=(0,k.default)({},(0,g.bubbleFormats)(Ee));if(Ee instanceof b.default){var _e=Ee.descendant(c.default.Leaf,Ae),ue=o(_e,1),He=ue[0];De=(0,k.default)(De,(0,g.bubbleFormats)(He))}re=f.default.attributes.diff(De,re)||{}}else if(a(B.insert)==="object"){var oe=Object.keys(B.insert)[0];if(oe==null)return H;P.scroll.insertAt(H,oe,B.insert[oe])}U+=J}return Object.keys(re).forEach(function(se){P.scroll.formatAt(H,J,se,re[se])}),H+J},0),q.reduce(function(H,B){return typeof B.delete=="number"?(P.scroll.deleteAt(H,B.delete),H):H+(B.retain||B.insert.length||1)},0),this.scroll.batchEnd(),this.update(q)}},{key:"deleteText",value:function(q,P){return this.scroll.deleteAt(q,P),this.update(new u.default().retain(q).delete(P))}},{key:"formatLine",value:function(q,P){var F=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(U).forEach(function(H){if(!(F.scroll.whitelist!=null&&!F.scroll.whitelist[H])){var B=F.scroll.lines(q,Math.max(P,1)),J=P;B.forEach(function(re){var ne=re.length();if(!(re instanceof v.default))re.format(H,U[H]);else{var ge=q-re.offset(F.scroll),be=re.newlineIndex(ge+J)-ge+1;re.formatAt(ge,be,H,U[H])}J-=ne})}}),this.scroll.optimize(),this.update(new u.default().retain(q).retain(P,(0,L.default)(U)))}},{key:"formatText",value:function(q,P){var F=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(U).forEach(function(H){F.scroll.formatAt(q,P,H,U[H])}),this.update(new u.default().retain(q).retain(P,(0,L.default)(U)))}},{key:"getContents",value:function(q,P){return this.delta.slice(q,q+P)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(q,P){return q.concat(P.delta())},new u.default)}},{key:"getFormat",value:function(q){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=[],U=[];P===0?this.scroll.path(q).forEach(function(B){var J=o(B,1),re=J[0];re instanceof b.default?F.push(re):re instanceof c.default.Leaf&&U.push(re)}):(F=this.scroll.lines(q,P),U=this.scroll.descendants(c.default.Leaf,q,P));var H=[F,U].map(function(B){if(B.length===0)return{};for(var J=(0,g.bubbleFormats)(B.shift());Object.keys(J).length>0;){var re=B.shift();if(re==null)return J;J=te((0,g.bubbleFormats)(re),J)}return J});return k.default.apply(k.default,H)}},{key:"getText",value:function(q,P){return this.getContents(q,P).filter(function(F){return typeof F.insert=="string"}).map(function(F){return F.insert}).join("")}},{key:"insertEmbed",value:function(q,P,F){return this.scroll.insertAt(q,P,F),this.update(new u.default().retain(q).insert(R({},P,F)))}},{key:"insertText",value:function(q,P){var F=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return P=P.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(q,P),Object.keys(U).forEach(function(H){F.scroll.formatAt(q,P.length,H,U[H])}),this.update(new u.default().retain(q).insert(P,(0,L.default)(U)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var q=this.scroll.children.head;return q.statics.blotName!==b.default.blotName||q.children.length>1?!1:q.children.head instanceof E.default}},{key:"removeFormat",value:function(q,P){var F=this.getText(q,P),U=this.scroll.line(q+P),H=o(U,2),B=H[0],J=H[1],re=0,ne=new u.default;B!=null&&(B instanceof v.default?re=B.newlineIndex(J)-J+1:re=B.length()-J,ne=B.delta().slice(J,J+re-1).insert(`
`));var ge=this.getContents(q,P+re),be=ge.diff(new u.default().insert(F).concat(ne)),Ee=new u.default().retain(q).concat(be);return this.applyDelta(Ee)}},{key:"update",value:function(q){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,U=this.delta;if(P.length===1&&P[0].type==="characterData"&&P[0].target.data.match(V)&&c.default.find(P[0].target)){var H=c.default.find(P[0].target),B=(0,g.bubbleFormats)(H),J=H.offset(this.scroll),re=P[0].oldValue.replace(m.default.CONTENTS,""),ne=new u.default().insert(re),ge=new u.default().insert(H.value()),be=new u.default().retain(J).concat(ne.diff(ge,F));q=be.reduce(function(Ee,Ae){return Ae.insert?Ee.insert(Ae.insert,B):Ee.push(Ae)},new u.default),this.delta=U.compose(q)}else this.delta=this.getDelta(),(!q||!(0,M.default)(U.compose(q),this.delta))&&(q=U.diff(this.delta,F));return q}}]),K}();function te(K,W){return Object.keys(W).reduce(function(q,P){return K[P]==null||(W[P]===K[P]?q[P]=W[P]:Array.isArray(W[P])?W[P].indexOf(K[P])<0&&(q[P]=W[P].concat([K[P]])):q[P]=[W[P],K[P]]),q},{})}function Q(K){return K.reduce(function(W,q){if(q.insert===1){var P=(0,L.default)(q.attributes);return delete P.image,W.insert({image:q.attributes.image},P)}if(q.attributes!=null&&(q.attributes.list===!0||q.attributes.bullet===!0)&&(q=(0,L.default)(q),q.attributes.list?q.attributes.list="ordered":(q.attributes.list="bullet",delete q.attributes.bullet)),typeof q.insert=="string"){var F=q.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return W.insert(F,q.attributes)}return W.push(q)},new u.default)}n.default=Z},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var a=function(){function O(M,T){var k=[],A=!0,R=!1,C=void 0;try{for(var V=M[Symbol.iterator](),Z;!(A=(Z=V.next()).done)&&(k.push(Z.value),!(T&&k.length===T));A=!0);}catch(te){R=!0,C=te}finally{try{!A&&V.return&&V.return()}finally{if(R)throw C}}return k}return function(M,T){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return O(M,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function O(M,T){for(var k=0;k<T.length;k++){var A=T[k];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(M,A.key,A)}}return function(M,T,k){return T&&O(M.prototype,T),k&&O(M,k),M}}(),s=i(0),l=m(s),u=i(21),h=m(u),f=i(11),d=m(f),c=i(8),y=m(c),v=i(10),w=m(v);function m(O){return O&&O.__esModule?O:{default:O}}function g(O){if(Array.isArray(O)){for(var M=0,T=Array(O.length);M<O.length;M++)T[M]=O[M];return T}else return Array.from(O)}function b(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")}var S=(0,w.default)("quill:selection"),E=function O(M){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;b(this,O),this.index=M,this.length=T},I=function(){function O(M,T){var k=this;b(this,O),this.emitter=T,this.scroll=M,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new E(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){k.mouseDown||setTimeout(k.update.bind(k,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(A,R){A===y.default.events.TEXT_CHANGE&&R.length()>0&&k.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(k.hasFocus()){var A=k.getNativeRange();A!=null&&A.start.node!==k.cursor.textNode&&k.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{k.setNativeRange(A.start.node,A.start.offset,A.end.node,A.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(A,R){if(R.range){var C=R.range,V=C.startNode,Z=C.startOffset,te=C.endNode,Q=C.endOffset;k.setNativeRange(V,Z,te,Q)}}),this.update(y.default.sources.SILENT)}return o(O,[{key:"handleComposition",value:function(){var T=this;this.root.addEventListener("compositionstart",function(){T.composing=!0}),this.root.addEventListener("compositionend",function(){if(T.composing=!1,T.cursor.parent){var k=T.cursor.restore();if(!k)return;setTimeout(function(){T.setNativeRange(k.startNode,k.startOffset,k.endNode,k.endOffset)},1)}})}},{key:"handleDragging",value:function(){var T=this;this.emitter.listenDOM("mousedown",document.body,function(){T.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){T.mouseDown=!1,T.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(T,k){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[T])){this.scroll.update();var A=this.getNativeRange();if(!(A==null||!A.native.collapsed||l.default.query(T,l.default.Scope.BLOCK))){if(A.start.node!==this.cursor.textNode){var R=l.default.find(A.start.node,!1);if(R==null)return;if(R instanceof l.default.Leaf){var C=R.split(A.start.offset);R.parent.insertBefore(this.cursor,C)}else R.insertBefore(this.cursor,A.start.node);this.cursor.attach()}this.cursor.format(T,k),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(T){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=this.scroll.length();T=Math.min(T,A-1),k=Math.min(T+k,A-1)-T;var R=void 0,C=this.scroll.leaf(T),V=a(C,2),Z=V[0],te=V[1];if(Z==null)return null;var Q=Z.position(te,!0),K=a(Q,2);R=K[0],te=K[1];var W=document.createRange();if(k>0){W.setStart(R,te);var q=this.scroll.leaf(T+k),P=a(q,2);if(Z=P[0],te=P[1],Z==null)return null;var F=Z.position(te,!0),U=a(F,2);return R=U[0],te=U[1],W.setEnd(R,te),W.getBoundingClientRect()}else{var H="left",B=void 0;return R instanceof Text?(te<R.data.length?(W.setStart(R,te),W.setEnd(R,te+1)):(W.setStart(R,te-1),W.setEnd(R,te),H="right"),B=W.getBoundingClientRect()):(B=Z.domNode.getBoundingClientRect(),te>0&&(H="right")),{bottom:B.top+B.height,height:B.height,left:B[H],right:B[H],top:B.top,width:0}}}},{key:"getNativeRange",value:function(){var T=document.getSelection();if(T==null||T.rangeCount<=0)return null;var k=T.getRangeAt(0);if(k==null)return null;var A=this.normalizeNative(k);return S.info("getNativeRange",A),A}},{key:"getRange",value:function(){var T=this.getNativeRange();if(T==null)return[null,null];var k=this.normalizedToRange(T);return[k,T]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(T){var k=this,A=[[T.start.node,T.start.offset]];T.native.collapsed||A.push([T.end.node,T.end.offset]);var R=A.map(function(Z){var te=a(Z,2),Q=te[0],K=te[1],W=l.default.find(Q,!0),q=W.offset(k.scroll);return K===0?q:W instanceof l.default.Container?q+W.length():q+W.index(Q,K)}),C=Math.min(Math.max.apply(Math,g(R)),this.scroll.length()-1),V=Math.min.apply(Math,[C].concat(g(R)));return new E(V,C-V)}},{key:"normalizeNative",value:function(T){if(!L(this.root,T.startContainer)||!T.collapsed&&!L(this.root,T.endContainer))return null;var k={start:{node:T.startContainer,offset:T.startOffset},end:{node:T.endContainer,offset:T.endOffset},native:T};return[k.start,k.end].forEach(function(A){for(var R=A.node,C=A.offset;!(R instanceof Text)&&R.childNodes.length>0;)if(R.childNodes.length>C)R=R.childNodes[C],C=0;else if(R.childNodes.length===C)R=R.lastChild,C=R instanceof Text?R.data.length:R.childNodes.length+1;else break;A.node=R,A.offset=C}),k}},{key:"rangeToNative",value:function(T){var k=this,A=T.collapsed?[T.index]:[T.index,T.index+T.length],R=[],C=this.scroll.length();return A.forEach(function(V,Z){V=Math.min(C-1,V);var te=void 0,Q=k.scroll.leaf(V),K=a(Q,2),W=K[0],q=K[1],P=W.position(q,Z!==0),F=a(P,2);te=F[0],q=F[1],R.push(te,q)}),R.length<2&&(R=R.concat(R)),R}},{key:"scrollIntoView",value:function(T){var k=this.lastRange;if(k!=null){var A=this.getBounds(k.index,k.length);if(A!=null){var R=this.scroll.length()-1,C=this.scroll.line(Math.min(k.index,R)),V=a(C,1),Z=V[0],te=Z;if(k.length>0){var Q=this.scroll.line(Math.min(k.index+k.length,R)),K=a(Q,1);te=K[0]}if(!(Z==null||te==null)){var W=T.getBoundingClientRect();A.top<W.top?T.scrollTop-=W.top-A.top:A.bottom>W.bottom&&(T.scrollTop+=A.bottom-W.bottom)}}}}},{key:"setNativeRange",value:function(T,k){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T,R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k,C=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(S.info("setNativeRange",T,k,A,R),!(T!=null&&(this.root.parentNode==null||T.parentNode==null||A.parentNode==null))){var V=document.getSelection();if(V!=null)if(T!=null){this.hasFocus()||this.root.focus();var Z=(this.getNativeRange()||{}).native;if(Z==null||C||T!==Z.startContainer||k!==Z.startOffset||A!==Z.endContainer||R!==Z.endOffset){T.tagName=="BR"&&(k=[].indexOf.call(T.parentNode.childNodes,T),T=T.parentNode),A.tagName=="BR"&&(R=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode);var te=document.createRange();te.setStart(T,k),te.setEnd(A,R),V.removeAllRanges(),V.addRange(te)}}else V.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(T){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof k=="string"&&(A=k,k=!1),S.info("setRange",T),T!=null){var R=this.rangeToNative(T);this.setNativeRange.apply(this,g(R).concat([k]))}else this.setNativeRange(null);this.update(A)}},{key:"update",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,k=this.lastRange,A=this.getRange(),R=a(A,2),C=R[0],V=R[1];if(this.lastRange=C,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,d.default)(k,this.lastRange)){var Z;!this.composing&&V!=null&&V.native.collapsed&&V.start.node!==this.cursor.textNode&&this.cursor.restore();var te=[y.default.events.SELECTION_CHANGE,(0,h.default)(this.lastRange),(0,h.default)(k),T];if((Z=this.emitter).emit.apply(Z,[y.default.events.EDITOR_CHANGE].concat(te)),T!==y.default.sources.SILENT){var Q;(Q=this.emitter).emit.apply(Q,te)}}}}]),O}();function L(O,M){try{M.parentNode}catch{return!1}return M instanceof Text&&(M=M.parentNode),O.contains(M)}n.Range=E,n.default=I},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,w){for(var m=0;m<w.length;m++){var g=w[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,w,m){return w&&y(v.prototype,w),m&&y(v,m),v}}(),o=function y(v,w,m){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,w);if(g===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:y(b,w,m)}else{if("value"in g)return g.value;var S=g.get;return S===void 0?void 0:S.call(m)}},s=i(0),l=u(s);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function f(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function d(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var c=function(y){d(v,y);function v(){return h(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"insertInto",value:function(m,g){m.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,m,g):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(l.default.Embed);c.blotName="break",c.tagName="BR",n.default=c},function(r,n,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var y in c)c.hasOwnProperty(y)&&(d[y]=c[y])};return function(d,c){f(d,c);function y(){this.constructor=d}d.prototype=c===null?Object.create(c):(y.prototype=c.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(44),s=i(30),l=i(1),u=function(f){a(d,f);function d(c){var y=f.call(this,c)||this;return y.build(),y}return d.prototype.appendChild=function(c){this.insertBefore(c)},d.prototype.attach=function(){f.prototype.attach.call(this),this.children.forEach(function(c){c.attach()})},d.prototype.build=function(){var c=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var v=h(y);c.insertBefore(v,c.children.head||void 0)}catch(w){if(w instanceof l.ParchmentError)return;throw w}})},d.prototype.deleteAt=function(c,y){if(c===0&&y===this.length())return this.remove();this.children.forEachAt(c,y,function(v,w,m){v.deleteAt(w,m)})},d.prototype.descendant=function(c,y){var v=this.children.find(y),w=v[0],m=v[1];return c.blotName==null&&c(w)||c.blotName!=null&&w instanceof c?[w,m]:w instanceof d?w.descendant(c,m):[null,-1]},d.prototype.descendants=function(c,y,v){y===void 0&&(y=0),v===void 0&&(v=Number.MAX_VALUE);var w=[],m=v;return this.children.forEachAt(y,v,function(g,b,S){(c.blotName==null&&c(g)||c.blotName!=null&&g instanceof c)&&w.push(g),g instanceof d&&(w=w.concat(g.descendants(c,b,m))),m-=S}),w},d.prototype.detach=function(){this.children.forEach(function(c){c.detach()}),f.prototype.detach.call(this)},d.prototype.formatAt=function(c,y,v,w){this.children.forEachAt(c,y,function(m,g,b){m.formatAt(g,b,v,w)})},d.prototype.insertAt=function(c,y,v){var w=this.children.find(c),m=w[0],g=w[1];if(m)m.insertAt(g,y,v);else{var b=v==null?l.create("text",y):l.create(y,v);this.appendChild(b)}},d.prototype.insertBefore=function(c,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return c instanceof v}))throw new l.ParchmentError("Cannot insert "+c.statics.blotName+" into "+this.statics.blotName);c.insertInto(this,y)},d.prototype.length=function(){return this.children.reduce(function(c,y){return c+y.length()},0)},d.prototype.moveChildren=function(c,y){this.children.forEach(function(v){c.insertBefore(v,y)})},d.prototype.optimize=function(c){if(f.prototype.optimize.call(this,c),this.children.length===0)if(this.statics.defaultChild!=null){var y=l.create(this.statics.defaultChild);this.appendChild(y),y.optimize(c)}else this.remove()},d.prototype.path=function(c,y){y===void 0&&(y=!1);var v=this.children.find(c,y),w=v[0],m=v[1],g=[[this,c]];return w instanceof d?g.concat(w.path(m,y)):(w!=null&&g.push([w,m]),g)},d.prototype.removeChild=function(c){this.children.remove(c)},d.prototype.replace=function(c){c instanceof d&&c.moveChildren(this),f.prototype.replace.call(this,c)},d.prototype.split=function(c,y){if(y===void 0&&(y=!1),!y){if(c===0)return this;if(c===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(c,this.length(),function(w,m,g){w=w.split(m,y),v.appendChild(w)}),v},d.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},d.prototype.update=function(c,y){var v=this,w=[],m=[];c.forEach(function(g){g.target===v.domNode&&g.type==="childList"&&(w.push.apply(w,g.addedNodes),m.push.apply(m,g.removedNodes))}),m.forEach(function(g){if(!(g.parentNode!=null&&g.tagName!=="IFRAME"&&document.body.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var b=l.find(g);b!=null&&(b.domNode.parentNode==null||b.domNode.parentNode===v.domNode)&&b.detach()}}),w.filter(function(g){return g.parentNode==v.domNode}).sort(function(g,b){return g===b?0:g.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(g){var b=null;g.nextSibling!=null&&(b=l.find(g.nextSibling));var S=h(g);(S.next!=b||S.next==null)&&(S.parent!=null&&S.parent.removeChild(v),v.insertBefore(S,b||void 0))})},d}(s.default);function h(f){var d=l.find(f);if(d==null)try{d=l.create(f)}catch{d=l.create(l.Scope.INLINE),[].slice.call(f.childNodes).forEach(function(y){d.domNode.appendChild(y)}),f.parentNode&&f.parentNode.replaceChild(d.domNode,f),d.attach()}return d}n.default=u},function(r,n,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var y in c)c.hasOwnProperty(y)&&(d[y]=c[y])};return function(d,c){f(d,c);function y(){this.constructor=d}d.prototype=c===null?Object.create(c):(y.prototype=c.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12),s=i(31),l=i(17),u=i(1),h=function(f){a(d,f);function d(c){var y=f.call(this,c)||this;return y.attributes=new s.default(y.domNode),y}return d.formats=function(c){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return c.tagName.toLowerCase()},d.prototype.format=function(c,y){var v=u.query(c);v instanceof o.default?this.attributes.attribute(v,y):y&&v!=null&&(c!==this.statics.blotName||this.formats()[c]!==y)&&this.replaceWith(c,y)},d.prototype.formats=function(){var c=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(c[this.statics.blotName]=y),c},d.prototype.replaceWith=function(c,y){var v=f.prototype.replaceWith.call(this,c,y);return this.attributes.copy(v),v},d.prototype.update=function(c,y){var v=this;f.prototype.update.call(this,c,y),c.some(function(w){return w.target===v.domNode&&w.type==="attributes"})&&this.attributes.build()},d.prototype.wrap=function(c,y){var v=f.prototype.wrap.call(this,c,y);return v instanceof d&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},d}(l.default);n.default=h},function(r,n,i){var a=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var d in f)f.hasOwnProperty(d)&&(h[d]=f[d])};return function(h,f){u(h,f);function d(){this.constructor=h}h.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(30),s=i(1),l=function(u){a(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.value=function(f){return!0},h.prototype.index=function(f,d){return this.domNode===f||this.domNode.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(d,1):-1},h.prototype.position=function(f,d){var c=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return f>0&&(c+=1),[this.parent.domNode,c]},h.prototype.value=function(){var f;return f={},f[this.statics.blotName]=this.statics.value(this.domNode)||!0,f},h.scope=s.Scope.INLINE_BLOT,h}(o.default);n.default=l},function(r,n,i){var a=i(11),o=i(3),s={attributes:{compose:function(u,h,f){typeof u!="object"&&(u={}),typeof h!="object"&&(h={});var d=o(!0,{},h);f||(d=Object.keys(d).reduce(function(y,v){return d[v]!=null&&(y[v]=d[v]),y},{}));for(var c in u)u[c]!==void 0&&h[c]===void 0&&(d[c]=u[c]);return Object.keys(d).length>0?d:void 0},diff:function(u,h){typeof u!="object"&&(u={}),typeof h!="object"&&(h={});var f=Object.keys(u).concat(Object.keys(h)).reduce(function(d,c){return a(u[c],h[c])||(d[c]=h[c]===void 0?null:h[c]),d},{});return Object.keys(f).length>0?f:void 0},transform:function(u,h,f){if(typeof u!="object")return h;if(typeof h=="object"){if(!f)return h;var d=Object.keys(h).reduce(function(c,y){return u[y]===void 0&&(c[y]=h[y]),c},{});return Object.keys(d).length>0?d:void 0}}},iterator:function(u){return new l(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function l(u){this.ops=u,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(u){u||(u=1/0);var h=this.ops[this.index];if(h){var f=this.offset,d=s.length(h);if(u>=d-f?(u=d-f,this.index+=1,this.offset=0):this.offset+=u,typeof h.delete=="number")return{delete:u};var c={};return h.attributes&&(c.attributes=h.attributes),typeof h.retain=="number"?c.retain=u:typeof h.insert=="string"?c.insert=h.insert.substr(f,u):c.insert=h.insert,c}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,h=this.index,f=this.next(),d=this.ops.slice(this.index);return this.offset=u,this.index=h,[f].concat(d)}else return[]},r.exports=s},function(r,n){var i=function(){function a(v,w){return w!=null&&v instanceof w}var o;try{o=Map}catch{o=function(){}}var s;try{s=Set}catch{s=function(){}}var l;try{l=Promise}catch{l=function(){}}function u(v,w,m,g,b){typeof w=="object"&&(m=w.depth,g=w.prototype,b=w.includeNonEnumerable,w=w.circular);var S=[],E=[],I=typeof Buffer<"u";typeof w>"u"&&(w=!0),typeof m>"u"&&(m=1/0);function L(O,M){if(O===null)return null;if(M===0)return O;var T,k;if(typeof O!="object")return O;if(a(O,o))T=new o;else if(a(O,s))T=new s;else if(a(O,l))T=new l(function(W,q){O.then(function(P){W(L(P,M-1))},function(P){q(L(P,M-1))})});else if(u.__isArray(O))T=[];else if(u.__isRegExp(O))T=new RegExp(O.source,y(O)),O.lastIndex&&(T.lastIndex=O.lastIndex);else if(u.__isDate(O))T=new Date(O.getTime());else{if(I&&Buffer.isBuffer(O))return Buffer.allocUnsafe?T=Buffer.allocUnsafe(O.length):T=new Buffer(O.length),O.copy(T),T;a(O,Error)?T=Object.create(O):typeof g>"u"?(k=Object.getPrototypeOf(O),T=Object.create(k)):(T=Object.create(g),k=g)}if(w){var A=S.indexOf(O);if(A!=-1)return E[A];S.push(O),E.push(T)}a(O,o)&&O.forEach(function(W,q){var P=L(q,M-1),F=L(W,M-1);T.set(P,F)}),a(O,s)&&O.forEach(function(W){var q=L(W,M-1);T.add(q)});for(var R in O){var C;k&&(C=Object.getOwnPropertyDescriptor(k,R)),!(C&&C.set==null)&&(T[R]=L(O[R],M-1))}if(Object.getOwnPropertySymbols)for(var V=Object.getOwnPropertySymbols(O),R=0;R<V.length;R++){var Z=V[R],te=Object.getOwnPropertyDescriptor(O,Z);te&&!te.enumerable&&!b||(T[Z]=L(O[Z],M-1),te.enumerable||Object.defineProperty(T,Z,{enumerable:!1}))}if(b)for(var Q=Object.getOwnPropertyNames(O),R=0;R<Q.length;R++){var K=Q[R],te=Object.getOwnPropertyDescriptor(O,K);te&&te.enumerable||(T[K]=L(O[K],M-1),Object.defineProperty(T,K,{enumerable:!1}))}return T}return L(v,m)}u.clonePrototype=function(w){if(w===null)return null;var m=function(){};return m.prototype=w,new m};function h(v){return Object.prototype.toString.call(v)}u.__objToStr=h;function f(v){return typeof v=="object"&&h(v)==="[object Date]"}u.__isDate=f;function d(v){return typeof v=="object"&&h(v)==="[object Array]"}u.__isArray=d;function c(v){return typeof v=="object"&&h(v)==="[object RegExp]"}u.__isRegExp=c;function y(v){var w="";return v.global&&(w+="g"),v.ignoreCase&&(w+="i"),v.multiline&&(w+="m"),w}return u.__getRegExpFlags=y,u}();typeof r=="object"&&r.exports&&(r.exports=i)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(k,A){var R=[],C=!0,V=!1,Z=void 0;try{for(var te=k[Symbol.iterator](),Q;!(C=(Q=te.next()).done)&&(R.push(Q.value),!(A&&R.length===A));C=!0);}catch(K){V=!0,Z=K}finally{try{!C&&te.return&&te.return()}finally{if(V)throw Z}}return R}return function(k,A){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return T(k,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function T(k,A){for(var R=0;R<A.length;R++){var C=A[R];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(k,C.key,C)}}return function(k,A,R){return A&&T(k.prototype,A),R&&T(k,R),k}}(),s=function T(k,A,R){k===null&&(k=Function.prototype);var C=Object.getOwnPropertyDescriptor(k,A);if(C===void 0){var V=Object.getPrototypeOf(k);return V===null?void 0:T(V,A,R)}else{if("value"in C)return C.value;var Z=C.get;return Z===void 0?void 0:Z.call(R)}},l=i(0),u=S(l),h=i(8),f=S(h),d=i(4),c=S(d),y=i(16),v=S(y),w=i(13),m=S(w),g=i(25),b=S(g);function S(T){return T&&T.__esModule?T:{default:T}}function E(T,k){if(!(T instanceof k))throw new TypeError("Cannot call a class as a function")}function I(T,k){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:T}function L(T,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);T.prototype=Object.create(k&&k.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(T,k):T.__proto__=k)}function O(T){return T instanceof c.default||T instanceof d.BlockEmbed}var M=function(T){L(k,T);function k(A,R){E(this,k);var C=I(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,A));return C.emitter=R.emitter,Array.isArray(R.whitelist)&&(C.whitelist=R.whitelist.reduce(function(V,Z){return V[Z]=!0,V},{})),C.domNode.addEventListener("DOMNodeInserted",function(){}),C.optimize(),C.enable(),C}return o(k,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(R,C){var V=this.line(R),Z=a(V,2),te=Z[0],Q=Z[1],K=this.line(R+C),W=a(K,1),q=W[0];if(s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"deleteAt",this).call(this,R,C),q!=null&&te!==q&&Q>0){if(te instanceof d.BlockEmbed||q instanceof d.BlockEmbed){this.optimize();return}if(te instanceof m.default){var P=te.newlineIndex(te.length(),!0);if(P>-1&&(te=te.split(P+1),te===q)){this.optimize();return}}else if(q instanceof m.default){var F=q.newlineIndex(0);F>-1&&q.split(F+1)}var U=q.children.head instanceof v.default?null:q.children.head;te.moveChildren(q,U),te.remove()}this.optimize()}},{key:"enable",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",R)}},{key:"formatAt",value:function(R,C,V,Z){this.whitelist!=null&&!this.whitelist[V]||(s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,R,C,V,Z),this.optimize())}},{key:"insertAt",value:function(R,C,V){if(!(V!=null&&this.whitelist!=null&&!this.whitelist[C])){if(R>=this.length())if(V==null||u.default.query(C,u.default.Scope.BLOCK)==null){var Z=u.default.create(this.statics.defaultChild);this.appendChild(Z),V==null&&C.endsWith(`
`)&&(C=C.slice(0,-1)),Z.insertAt(0,C,V)}else{var te=u.default.create(C,V);this.appendChild(te)}else s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,R,C,V);this.optimize()}}},{key:"insertBefore",value:function(R,C){if(R.statics.scope===u.default.Scope.INLINE_BLOT){var V=u.default.create(this.statics.defaultChild);V.appendChild(R),R=V}s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,R,C)}},{key:"leaf",value:function(R){return this.path(R).pop()||[null,-1]}},{key:"line",value:function(R){return R===this.length()?this.line(R-1):this.descendant(O,R)}},{key:"lines",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,V=function Z(te,Q,K){var W=[],q=K;return te.children.forEachAt(Q,K,function(P,F,U){O(P)?W.push(P):P instanceof u.default.Container&&(W=W.concat(Z(P,F,q))),q-=U}),W};return V(this,R,C)}},{key:"optimize",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,R,C),R.length>0&&this.emitter.emit(f.default.events.SCROLL_OPTIMIZE,R,C))}},{key:"path",value:function(R){return s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"path",this).call(this,R).slice(1)}},{key:"update",value:function(R){if(this.batch!==!0){var C=f.default.sources.USER;typeof R=="string"&&(C=R),Array.isArray(R)||(R=this.observer.takeRecords()),R.length>0&&this.emitter.emit(f.default.events.SCROLL_BEFORE_UPDATE,C,R),s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"update",this).call(this,R.concat([])),R.length>0&&this.emitter.emit(f.default.events.SCROLL_UPDATE,C,R)}}}]),k}(u.default.Scroll);M.blotName="scroll",M.className="ql-editor",M.tagName="DIV",M.defaultChild="block",M.allowedChildren=[c.default,d.BlockEmbed,b.default],n.default=M},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},o=function(){function B(J,re){var ne=[],ge=!0,be=!1,Ee=void 0;try{for(var Ae=J[Symbol.iterator](),De;!(ge=(De=Ae.next()).done)&&(ne.push(De.value),!(re&&ne.length===re));ge=!0);}catch(_e){be=!0,Ee=_e}finally{try{!ge&&Ae.return&&Ae.return()}finally{if(be)throw Ee}}return ne}return function(J,re){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return B(J,re);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function B(J,re){for(var ne=0;ne<re.length;ne++){var ge=re[ne];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(J,ge.key,ge)}}return function(J,re,ne){return re&&B(J.prototype,re),ne&&B(J,ne),J}}(),l=i(21),u=T(l),h=i(11),f=T(h),d=i(3),c=T(d),y=i(2),v=T(y),w=i(20),m=T(w),g=i(0),b=T(g),S=i(5),E=T(S),I=i(10),L=T(I),O=i(9),M=T(O);function T(B){return B&&B.__esModule?B:{default:B}}function k(B,J,re){return J in B?Object.defineProperty(B,J,{value:re,enumerable:!0,configurable:!0,writable:!0}):B[J]=re,B}function A(B,J){if(!(B instanceof J))throw new TypeError("Cannot call a class as a function")}function R(B,J){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J&&(typeof J=="object"||typeof J=="function")?J:B}function C(B,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof J);B.prototype=Object.create(J&&J.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(B,J):B.__proto__=J)}var V=(0,L.default)("quill:keyboard"),Z=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",te=function(B){C(J,B),s(J,null,[{key:"match",value:function(ne,ge){return ge=H(ge),["altKey","ctrlKey","metaKey","shiftKey"].some(function(be){return!!ge[be]!==ne[be]&&ge[be]!==null})?!1:ge.key===(ne.which||ne.keyCode)}}]);function J(re,ne){A(this,J);var ge=R(this,(J.__proto__||Object.getPrototypeOf(J)).call(this,re,ne));return ge.bindings={},Object.keys(ge.options.bindings).forEach(function(be){be==="list autofill"&&re.scroll.whitelist!=null&&!re.scroll.whitelist.list||ge.options.bindings[be]&&ge.addBinding(ge.options.bindings[be])}),ge.addBinding({key:J.keys.ENTER,shiftKey:null},P),ge.addBinding({key:J.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ge.addBinding({key:J.keys.BACKSPACE},{collapsed:!0},K),ge.addBinding({key:J.keys.DELETE},{collapsed:!0},W)):(ge.addBinding({key:J.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},K),ge.addBinding({key:J.keys.DELETE},{collapsed:!0,suffix:/^.?$/},W)),ge.addBinding({key:J.keys.BACKSPACE},{collapsed:!1},q),ge.addBinding({key:J.keys.DELETE},{collapsed:!1},q),ge.addBinding({key:J.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},K),ge.listen(),ge}return s(J,[{key:"addBinding",value:function(ne){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ee=H(ne);if(Ee==null||Ee.key==null)return V.warn("Attempted to add invalid keyboard binding",Ee);typeof ge=="function"&&(ge={handler:ge}),typeof be=="function"&&(be={handler:be}),Ee=(0,c.default)(Ee,ge,be),this.bindings[Ee.key]=this.bindings[Ee.key]||[],this.bindings[Ee.key].push(Ee)}},{key:"listen",value:function(){var ne=this;this.quill.root.addEventListener("keydown",function(ge){if(!ge.defaultPrevented){var be=ge.which||ge.keyCode,Ee=(ne.bindings[be]||[]).filter(function($e){return J.match(ge,$e)});if(Ee.length!==0){var Ae=ne.quill.getSelection();if(!(Ae==null||!ne.quill.hasFocus())){var De=ne.quill.getLine(Ae.index),_e=o(De,2),ue=_e[0],He=_e[1],oe=ne.quill.getLeaf(Ae.index),se=o(oe,2),ce=se[0],ve=se[1],de=Ae.length===0?[ce,ve]:ne.quill.getLeaf(Ae.index+Ae.length),Le=o(de,2),Me=Le[0],qe=Le[1],Ke=ce instanceof b.default.Text?ce.value().slice(0,ve):"",Ze=Me instanceof b.default.Text?Me.value().slice(qe):"",Ve={collapsed:Ae.length===0,empty:Ae.length===0&&ue.length()<=1,format:ne.quill.getFormat(Ae),offset:He,prefix:Ke,suffix:Ze},et=Ee.some(function($e){if($e.collapsed!=null&&$e.collapsed!==Ve.collapsed||$e.empty!=null&&$e.empty!==Ve.empty||$e.offset!=null&&$e.offset!==Ve.offset)return!1;if(Array.isArray($e.format)){if($e.format.every(function(Fe){return Ve.format[Fe]==null}))return!1}else if(a($e.format)==="object"&&!Object.keys($e.format).every(function(Fe){return $e.format[Fe]===!0?Ve.format[Fe]!=null:$e.format[Fe]===!1?Ve.format[Fe]==null:(0,f.default)($e.format[Fe],Ve.format[Fe])}))return!1;return $e.prefix!=null&&!$e.prefix.test(Ve.prefix)||$e.suffix!=null&&!$e.suffix.test(Ve.suffix)?!1:$e.handler.call(ne,Ae,Ve)!==!0});et&&ge.preventDefault()}}}})}}]),J}(M.default);te.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},te.DEFAULTS={bindings:{bold:U("bold"),italic:U("italic"),underline:U("underline"),indent:{key:te.keys.TAB,format:["blockquote","indent","list"],handler:function(J,re){if(re.collapsed&&re.offset!==0)return!0;this.quill.format("indent","+1",E.default.sources.USER)}},outdent:{key:te.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(J,re){if(re.collapsed&&re.offset!==0)return!0;this.quill.format("indent","-1",E.default.sources.USER)}},"outdent backspace":{key:te.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(J,re){re.format.indent!=null?this.quill.format("indent","-1",E.default.sources.USER):re.format.list!=null&&this.quill.format("list",!1,E.default.sources.USER)}},"indent code-block":F(!0),"outdent code-block":F(!1),"remove tab":{key:te.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(J){this.quill.deleteText(J.index-1,1,E.default.sources.USER)}},tab:{key:te.keys.TAB,handler:function(J){this.quill.history.cutoff();var re=new v.default().retain(J.index).delete(J.length).insert("	");this.quill.updateContents(re,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(J.index+1,E.default.sources.SILENT)}},"list empty enter":{key:te.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(J,re){this.quill.format("list",!1,E.default.sources.USER),re.format.indent&&this.quill.format("indent",!1,E.default.sources.USER)}},"checklist enter":{key:te.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(J){var re=this.quill.getLine(J.index),ne=o(re,2),ge=ne[0],be=ne[1],Ee=(0,c.default)({},ge.formats(),{list:"checked"}),Ae=new v.default().retain(J.index).insert(`
`,Ee).retain(ge.length()-be-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ae,E.default.sources.USER),this.quill.setSelection(J.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:te.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(J,re){var ne=this.quill.getLine(J.index),ge=o(ne,2),be=ge[0],Ee=ge[1],Ae=new v.default().retain(J.index).insert(`
`,re.format).retain(be.length()-Ee-1).retain(1,{header:null});this.quill.updateContents(Ae,E.default.sources.USER),this.quill.setSelection(J.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(J,re){var ne=re.prefix.length,ge=this.quill.getLine(J.index),be=o(ge,2),Ee=be[0],Ae=be[1];if(Ae>ne)return!0;var De=void 0;switch(re.prefix.trim()){case"[]":case"[ ]":De="unchecked";break;case"[x]":De="checked";break;case"-":case"*":De="bullet";break;default:De="ordered"}this.quill.insertText(J.index," ",E.default.sources.USER),this.quill.history.cutoff();var _e=new v.default().retain(J.index-Ae).delete(ne+1).retain(Ee.length()-2-Ae).retain(1,{list:De});this.quill.updateContents(_e,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(J.index-ne,E.default.sources.SILENT)}},"code exit":{key:te.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(J){var re=this.quill.getLine(J.index),ne=o(re,2),ge=ne[0],be=ne[1],Ee=new v.default().retain(J.index+ge.length()-be-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Ee,E.default.sources.USER)}},"embed left":Q(te.keys.LEFT,!1),"embed left shift":Q(te.keys.LEFT,!0),"embed right":Q(te.keys.RIGHT,!1),"embed right shift":Q(te.keys.RIGHT,!0)}};function Q(B,J){var re,ne=B===te.keys.LEFT?"prefix":"suffix";return re={key:B,shiftKey:J,altKey:null},k(re,ne,/^$/),k(re,"handler",function(be){var Ee=be.index;B===te.keys.RIGHT&&(Ee+=be.length+1);var Ae=this.quill.getLeaf(Ee),De=o(Ae,1),_e=De[0];return _e instanceof b.default.Embed?(B===te.keys.LEFT?J?this.quill.setSelection(be.index-1,be.length+1,E.default.sources.USER):this.quill.setSelection(be.index-1,E.default.sources.USER):J?this.quill.setSelection(be.index,be.length+1,E.default.sources.USER):this.quill.setSelection(be.index+be.length+1,E.default.sources.USER),!1):!0}),re}function K(B,J){if(!(B.index===0||this.quill.getLength()<=1)){var re=this.quill.getLine(B.index),ne=o(re,1),ge=ne[0],be={};if(J.offset===0){var Ee=this.quill.getLine(B.index-1),Ae=o(Ee,1),De=Ae[0];if(De!=null&&De.length()>1){var _e=ge.formats(),ue=this.quill.getFormat(B.index-1,1);be=m.default.attributes.diff(_e,ue)||{}}}var He=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(J.prefix)?2:1;this.quill.deleteText(B.index-He,He,E.default.sources.USER),Object.keys(be).length>0&&this.quill.formatLine(B.index-He,He,be,E.default.sources.USER),this.quill.focus()}}function W(B,J){var re=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(J.suffix)?2:1;if(!(B.index>=this.quill.getLength()-re)){var ne={},ge=0,be=this.quill.getLine(B.index),Ee=o(be,1),Ae=Ee[0];if(J.offset>=Ae.length()-1){var De=this.quill.getLine(B.index+1),_e=o(De,1),ue=_e[0];if(ue){var He=Ae.formats(),oe=this.quill.getFormat(B.index,1);ne=m.default.attributes.diff(He,oe)||{},ge=ue.length()}}this.quill.deleteText(B.index,re,E.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(B.index+ge-1,re,ne,E.default.sources.USER)}}function q(B){var J=this.quill.getLines(B),re={};if(J.length>1){var ne=J[0].formats(),ge=J[J.length-1].formats();re=m.default.attributes.diff(ge,ne)||{}}this.quill.deleteText(B,E.default.sources.USER),Object.keys(re).length>0&&this.quill.formatLine(B.index,1,re,E.default.sources.USER),this.quill.setSelection(B.index,E.default.sources.SILENT),this.quill.focus()}function P(B,J){var re=this;B.length>0&&this.quill.scroll.deleteAt(B.index,B.length);var ne=Object.keys(J.format).reduce(function(ge,be){return b.default.query(be,b.default.Scope.BLOCK)&&!Array.isArray(J.format[be])&&(ge[be]=J.format[be]),ge},{});this.quill.insertText(B.index,`
`,ne,E.default.sources.USER),this.quill.setSelection(B.index+1,E.default.sources.SILENT),this.quill.focus(),Object.keys(J.format).forEach(function(ge){ne[ge]==null&&(Array.isArray(J.format[ge])||ge!=="link"&&re.quill.format(ge,J.format[ge],E.default.sources.USER))})}function F(B){return{key:te.keys.TAB,shiftKey:!B,format:{"code-block":!0},handler:function(re){var ne=b.default.query("code-block"),ge=re.index,be=re.length,Ee=this.quill.scroll.descendant(ne,ge),Ae=o(Ee,2),De=Ae[0],_e=Ae[1];if(De!=null){var ue=this.quill.getIndex(De),He=De.newlineIndex(_e,!0)+1,oe=De.newlineIndex(ue+_e+be),se=De.domNode.textContent.slice(He,oe).split(`
`);_e=0,se.forEach(function(ce,ve){B?(De.insertAt(He+_e,ne.TAB),_e+=ne.TAB.length,ve===0?ge+=ne.TAB.length:be+=ne.TAB.length):ce.startsWith(ne.TAB)&&(De.deleteAt(He+_e,ne.TAB.length),_e-=ne.TAB.length,ve===0?ge-=ne.TAB.length:be-=ne.TAB.length),_e+=ce.length+1}),this.quill.update(E.default.sources.USER),this.quill.setSelection(ge,be,E.default.sources.SILENT)}}}}function U(B){return{key:B[0].toUpperCase(),shortKey:!0,handler:function(re,ne){this.quill.format(B,!ne.format[B],E.default.sources.USER)}}}function H(B){if(typeof B=="string"||typeof B=="number")return H({key:B});if((typeof B>"u"?"undefined":a(B))==="object"&&(B=(0,u.default)(B,!1)),typeof B.key=="string")if(te.keys[B.key.toUpperCase()]!=null)B.key=te.keys[B.key.toUpperCase()];else if(B.key.length===1)B.key=B.key.toUpperCase().charCodeAt(0);else return null;return B.shortKey&&(B[Z]=B.shortKey,delete B.shortKey),B}n.default=te,n.SHORTKEY=Z},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function m(g,b){var S=[],E=!0,I=!1,L=void 0;try{for(var O=g[Symbol.iterator](),M;!(E=(M=O.next()).done)&&(S.push(M.value),!(b&&S.length===b));E=!0);}catch(T){I=!0,L=T}finally{try{!E&&O.return&&O.return()}finally{if(I)throw L}}return S}return function(g,b){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return m(g,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function m(g,b,S){g===null&&(g=Function.prototype);var E=Object.getOwnPropertyDescriptor(g,b);if(E===void 0){var I=Object.getPrototypeOf(g);return I===null?void 0:m(I,b,S)}else{if("value"in E)return E.value;var L=E.get;return L===void 0?void 0:L.call(S)}},s=function(){function m(g,b){for(var S=0;S<b.length;S++){var E=b[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,b,S){return b&&m(g.prototype,b),S&&m(g,S),g}}(),l=i(0),u=d(l),h=i(7),f=d(h);function d(m){return m&&m.__esModule?m:{default:m}}function c(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function y(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function v(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var w=function(m){v(g,m),s(g,null,[{key:"value",value:function(){}}]);function g(b,S){c(this,g);var E=y(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,b));return E.selection=S,E.textNode=document.createTextNode(g.CONTENTS),E.domNode.appendChild(E.textNode),E._length=0,E}return s(g,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(S,E){if(this._length!==0)return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,S,E);for(var I=this,L=0;I!=null&&I.statics.scope!==u.default.Scope.BLOCK_BLOT;)L+=I.offset(I.parent),I=I.parent;I!=null&&(this._length=g.CONTENTS.length,I.optimize(),I.formatAt(L,g.CONTENTS.length,S,E),this._length=0)}},{key:"index",value:function(S,E){return S===this.textNode?0:o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"index",this).call(this,S,E)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var S=this.textNode,E=this.selection.getNativeRange(),I=void 0,L=void 0,O=void 0;if(E!=null&&E.start.node===S&&E.end.node===S){var M=[S,E.start.offset,E.end.offset];I=M[0],L=M[1],O=M[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==g.CONTENTS){var T=this.textNode.data.split(g.CONTENTS).join("");this.next instanceof f.default?(I=this.next.domNode,this.next.insertAt(0,T),this.textNode.data=g.CONTENTS):(this.textNode.data=T,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(g.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),L!=null){var k=[L,O].map(function(R){return Math.max(0,Math.min(I.data.length,R-1))}),A=a(k,2);return L=A[0],O=A[1],{startNode:I,startOffset:L,endNode:I,endOffset:O}}}}},{key:"update",value:function(S,E){var I=this;if(S.some(function(O){return O.type==="characterData"&&O.target===I.textNode})){var L=this.restore();L&&(E.range=L)}}},{key:"value",value:function(){return""}}]),g}(u.default.Embed);w.blotName="cursor",w.className="ql-cursor",w.tagName="span",w.CONTENTS="\uFEFF",n.default=w},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),o=u(a),s=i(4),l=u(s);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function f(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function d(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var c=function(y){d(v,y);function v(){return h(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(o.default.Container);c.allowedChildren=[l.default,s.BlockEmbed,c],n.default=c},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var a=function(){function w(m,g){for(var b=0;b<g.length;b++){var S=g[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(m,S.key,S)}}return function(m,g,b){return g&&w(m.prototype,g),b&&w(m,b),m}}(),o=function w(m,g,b){m===null&&(m=Function.prototype);var S=Object.getOwnPropertyDescriptor(m,g);if(S===void 0){var E=Object.getPrototypeOf(m);return E===null?void 0:w(E,g,b)}else{if("value"in S)return S.value;var I=S.get;return I===void 0?void 0:I.call(b)}},s=i(0),l=u(s);function u(w){return w&&w.__esModule?w:{default:w}}function h(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function f(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w}function d(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)}var c=function(w){d(m,w);function m(){return h(this,m),f(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return a(m,[{key:"value",value:function(b){var S=o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,b);return S.startsWith("rgb(")?(S=S.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+S.split(",").map(function(E){return("00"+parseInt(E).toString(16)).slice(-2)}).join("")):S}}]),m}(l.default.Attributor.Style),y=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),v=new c("color","color",{scope:l.default.Scope.INLINE});n.ColorAttributor=c,n.ColorClass=y,n.ColorStyle=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var a=function(){function v(w,m){for(var g=0;g<m.length;g++){var b=m[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(w,b.key,b)}}return function(w,m,g){return m&&v(w.prototype,m),g&&v(w,g),w}}(),o=function v(w,m,g){w===null&&(w=Function.prototype);var b=Object.getOwnPropertyDescriptor(w,m);if(b===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:v(S,m,g)}else{if("value"in b)return b.value;var E=b.get;return E===void 0?void 0:E.call(g)}},s=i(6),l=u(s);function u(v){return v&&v.__esModule?v:{default:v}}function h(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function f(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function d(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var c=function(v){d(w,v);function w(){return h(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"format",value:function(g,b){if(g!==this.statics.blotName||!b)return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,g,b);b=this.constructor.sanitize(b),this.domNode.setAttribute("href",b)}}],[{key:"create",value:function(g){var b=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,g);return g=this.sanitize(g),b.setAttribute("href",g),b.setAttribute("rel","noopener noreferrer"),b.setAttribute("target","_blank"),b}},{key:"formats",value:function(g){return g.getAttribute("href")}},{key:"sanitize",value:function(g){return y(g,this.PROTOCOL_WHITELIST)?g:this.SANITIZED_URL}}]),w}(l.default);c.blotName="link",c.tagName="A",c.SANITIZED_URL="about:blank",c.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(v,w){var m=document.createElement("a");m.href=v;var g=m.href.slice(0,m.href.indexOf(":"));return w.indexOf(g)>-1}n.default=c,n.sanitize=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},o=function(){function w(m,g){for(var b=0;b<g.length;b++){var S=g[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(m,S.key,S)}}return function(m,g,b){return g&&w(m.prototype,g),b&&w(m,b),m}}(),s=i(23),l=f(s),u=i(107),h=f(u);function f(w){return w&&w.__esModule?w:{default:w}}function d(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}var c=0;function y(w,m){w.setAttribute(m,w.getAttribute(m)!=="true")}var v=function(){function w(m){var g=this;d(this,w),this.select=m,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){g.togglePicker()}),this.label.addEventListener("keydown",function(b){switch(b.keyCode){case l.default.keys.ENTER:g.togglePicker();break;case l.default.keys.ESCAPE:g.escape(),b.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(w,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(g){var b=this,S=document.createElement("span");return S.tabIndex="0",S.setAttribute("role","button"),S.classList.add("ql-picker-item"),g.hasAttribute("value")&&S.setAttribute("data-value",g.getAttribute("value")),g.textContent&&S.setAttribute("data-label",g.textContent),S.addEventListener("click",function(){b.selectItem(S,!0)}),S.addEventListener("keydown",function(E){switch(E.keyCode){case l.default.keys.ENTER:b.selectItem(S,!0),E.preventDefault();break;case l.default.keys.ESCAPE:b.escape(),E.preventDefault();break}}),S}},{key:"buildLabel",value:function(){var g=document.createElement("span");return g.classList.add("ql-picker-label"),g.innerHTML=h.default,g.tabIndex="0",g.setAttribute("role","button"),g.setAttribute("aria-expanded","false"),this.container.appendChild(g),g}},{key:"buildOptions",value:function(){var g=this,b=document.createElement("span");b.classList.add("ql-picker-options"),b.setAttribute("aria-hidden","true"),b.tabIndex="-1",b.id="ql-picker-options-"+c,c+=1,this.label.setAttribute("aria-controls",b.id),this.options=b,[].slice.call(this.select.options).forEach(function(S){var E=g.buildItem(S);b.appendChild(E),S.selected===!0&&g.selectItem(E)}),this.container.appendChild(b)}},{key:"buildPicker",value:function(){var g=this;[].slice.call(this.select.attributes).forEach(function(b){g.container.setAttribute(b.name,b.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var g=this;this.close(),setTimeout(function(){return g.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=this.container.querySelector(".ql-selected");if(g!==S&&(S!=null&&S.classList.remove("ql-selected"),g!=null&&(g.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(g.parentNode.children,g),g.hasAttribute("data-value")?this.label.setAttribute("data-value",g.getAttribute("data-value")):this.label.removeAttribute("data-value"),g.hasAttribute("data-label")?this.label.setAttribute("data-label",g.getAttribute("data-label")):this.label.removeAttribute("data-label"),b))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var E=document.createEvent("Event");E.initEvent("change",!0,!0),this.select.dispatchEvent(E)}this.close()}}},{key:"update",value:function(){var g=void 0;if(this.select.selectedIndex>-1){var b=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];g=this.select.options[this.select.selectedIndex],this.selectItem(b)}else this.selectItem(null);var S=g!=null&&g!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",S)}}]),w}();n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),o=V(a),s=i(5),l=V(s),u=i(4),h=V(u),f=i(16),d=V(f),c=i(25),y=V(c),v=i(24),w=V(v),m=i(35),g=V(m),b=i(6),S=V(b),E=i(22),I=V(E),L=i(7),O=V(L),M=i(55),T=V(M),k=i(42),A=V(k),R=i(23),C=V(R);function V(Z){return Z&&Z.__esModule?Z:{default:Z}}l.default.register({"blots/block":h.default,"blots/block/embed":u.BlockEmbed,"blots/break":d.default,"blots/container":y.default,"blots/cursor":w.default,"blots/embed":g.default,"blots/inline":S.default,"blots/scroll":I.default,"blots/text":O.default,"modules/clipboard":T.default,"modules/history":A.default,"modules/keyboard":C.default}),o.default.register(h.default,d.default,w.default,S.default,I.default,O.default),n.default=l.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(1),o=function(){function s(l){this.domNode=l,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(s.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),s.create=function(l){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?u=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?u=document.createElement(l):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},s.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},s.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return a.create(l)},s.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},s.prototype.deleteAt=function(l,u){var h=this.isolate(l,u);h.remove()},s.prototype.formatAt=function(l,u,h,f){var d=this.isolate(l,u);if(a.query(h,a.Scope.BLOT)!=null&&f)d.wrap(h,f);else if(a.query(h,a.Scope.ATTRIBUTE)!=null){var c=a.create(this.statics.scope);d.wrap(c),c.format(h,f)}},s.prototype.insertAt=function(l,u,h){var f=h==null?a.create("text",u):a.create(u,h),d=this.split(l);this.parent.insertBefore(f,d)},s.prototype.insertInto=function(l,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var h=null;l.children.insertBefore(this,u),u!=null&&(h=u.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=h)&&l.domNode.insertBefore(this.domNode,h),this.parent=l,this.attach()},s.prototype.isolate=function(l,u){var h=this.split(l);return h.split(u),h},s.prototype.length=function(){return 1},s.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},s.prototype.optimize=function(l){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},s.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},s.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},s.prototype.replaceWith=function(l,u){var h=typeof l=="string"?a.create(l,u):l;return h.replace(this),h},s.prototype.split=function(l,u){return l===0?this:this.next},s.prototype.update=function(l,u){},s.prototype.wrap=function(l,u){var h=typeof l=="string"?a.create(l,u):l;return this.parent!=null&&this.parent.insertBefore(h,this.next),h.appendChild(this),h},s.blotName="abstract",s}();n.default=o},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(12),o=i(32),s=i(33),l=i(1),u=function(){function h(f){this.attributes={},this.domNode=f,this.build()}return h.prototype.attribute=function(f,d){d?f.add(this.domNode,d)&&(f.value(this.domNode)!=null?this.attributes[f.attrName]=f:delete this.attributes[f.attrName]):(f.remove(this.domNode),delete this.attributes[f.attrName])},h.prototype.build=function(){var f=this;this.attributes={};var d=a.default.keys(this.domNode),c=o.default.keys(this.domNode),y=s.default.keys(this.domNode);d.concat(c).concat(y).forEach(function(v){var w=l.query(v,l.Scope.ATTRIBUTE);w instanceof a.default&&(f.attributes[w.attrName]=w)})},h.prototype.copy=function(f){var d=this;Object.keys(this.attributes).forEach(function(c){var y=d.attributes[c].value(d.domNode);f.format(c,y)})},h.prototype.move=function(f){var d=this;this.copy(f),Object.keys(this.attributes).forEach(function(c){d.attributes[c].remove(d.domNode)}),this.attributes={}},h.prototype.values=function(){var f=this;return Object.keys(this.attributes).reduce(function(d,c){return d[c]=f.attributes[c].value(f.domNode),d},{})},h}();n.default=u},function(r,n,i){var a=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var d in f)f.hasOwnProperty(d)&&(h[d]=f[d])};return function(h,f){u(h,f);function d(){this.constructor=h}h.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12);function s(u,h){var f=u.getAttribute("class")||"";return f.split(/\s+/).filter(function(d){return d.indexOf(h+"-")===0})}var l=function(u){a(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.keys=function(f){return(f.getAttribute("class")||"").split(/\s+/).map(function(d){return d.split("-").slice(0,-1).join("-")})},h.prototype.add=function(f,d){return this.canAdd(f,d)?(this.remove(f),f.classList.add(this.keyName+"-"+d),!0):!1},h.prototype.remove=function(f){var d=s(f,this.keyName);d.forEach(function(c){f.classList.remove(c)}),f.classList.length===0&&f.removeAttribute("class")},h.prototype.value=function(f){var d=s(f,this.keyName)[0]||"",c=d.slice(this.keyName.length+1);return this.canAdd(f,c)?c:""},h}(o.default);n.default=l},function(r,n,i){var a=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var d in f)f.hasOwnProperty(d)&&(h[d]=f[d])};return function(h,f){u(h,f);function d(){this.constructor=h}h.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12);function s(u){var h=u.split("-"),f=h.slice(1).map(function(d){return d[0].toUpperCase()+d.slice(1)}).join("");return h[0]+f}var l=function(u){a(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.keys=function(f){return(f.getAttribute("style")||"").split(";").map(function(d){var c=d.split(":");return c[0].trim()})},h.prototype.add=function(f,d){return this.canAdd(f,d)?(f.style[s(this.keyName)]=d,!0):!1},h.prototype.remove=function(f){f.style[s(this.keyName)]="",f.getAttribute("style")||f.removeAttribute("style")},h.prototype.value=function(f){var d=f.style[s(this.keyName)];return this.canAdd(f,d)?d:""},h}(o.default);n.default=l},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function l(u,h){for(var f=0;f<h.length;f++){var d=h[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}return function(u,h,f){return h&&l(u.prototype,h),f&&l(u,f),u}}();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var s=function(){function l(u,h){o(this,l),this.quill=u,this.options=h,this.modules={}}return a(l,[{key:"init",value:function(){var h=this;Object.keys(this.options.modules).forEach(function(f){h.modules[f]==null&&h.addModule(f)})}},{key:"addModule",value:function(h){var f=this.quill.constructor.import("modules/"+h);return this.modules[h]=new f(this.quill,this.options.modules[h]||{}),this.modules[h]}}]),l}();s.DEFAULTS={modules:{}},s.themes={default:s},n.default=s},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function m(g,b){for(var S=0;S<b.length;S++){var E=b[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,b,S){return b&&m(g.prototype,b),S&&m(g,S),g}}(),o=function m(g,b,S){g===null&&(g=Function.prototype);var E=Object.getOwnPropertyDescriptor(g,b);if(E===void 0){var I=Object.getPrototypeOf(g);return I===null?void 0:m(I,b,S)}else{if("value"in E)return E.value;var L=E.get;return L===void 0?void 0:L.call(S)}},s=i(0),l=f(s),u=i(7),h=f(u);function f(m){return m&&m.__esModule?m:{default:m}}function d(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function c(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function y(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var v="\uFEFF",w=function(m){y(g,m);function g(b){d(this,g);var S=c(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,b));return S.contentNode=document.createElement("span"),S.contentNode.setAttribute("contenteditable",!1),[].slice.call(S.domNode.childNodes).forEach(function(E){S.contentNode.appendChild(E)}),S.leftGuard=document.createTextNode(v),S.rightGuard=document.createTextNode(v),S.domNode.appendChild(S.leftGuard),S.domNode.appendChild(S.contentNode),S.domNode.appendChild(S.rightGuard),S}return a(g,[{key:"index",value:function(S,E){return S===this.leftGuard?0:S===this.rightGuard?1:o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"index",this).call(this,S,E)}},{key:"restore",value:function(S){var E=void 0,I=void 0,L=S.data.split(v).join("");if(S===this.leftGuard)if(this.prev instanceof h.default){var O=this.prev.length();this.prev.insertAt(O,L),E={startNode:this.prev.domNode,startOffset:O+L.length}}else I=document.createTextNode(L),this.parent.insertBefore(l.default.create(I),this),E={startNode:I,startOffset:L.length};else S===this.rightGuard&&(this.next instanceof h.default?(this.next.insertAt(0,L),E={startNode:this.next.domNode,startOffset:L.length}):(I=document.createTextNode(L),this.parent.insertBefore(l.default.create(I),this.next),E={startNode:I,startOffset:L.length}));return S.data=v,E}},{key:"update",value:function(S,E){var I=this;S.forEach(function(L){if(L.type==="characterData"&&(L.target===I.leftGuard||L.target===I.rightGuard)){var O=I.restore(L.target);O&&(E.range=O)}})}}]),g}(l.default.Embed);n.default=w},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var a=i(0),o=s(a);function s(d){return d&&d.__esModule?d:{default:d}}var l={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new o.default.Attributor.Attribute("align","align",l),h=new o.default.Attributor.Class("align","ql-align",l),f=new o.default.Attributor.Style("align","text-align",l);n.AlignAttribute=u,n.AlignClass=h,n.AlignStyle=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var a=i(0),o=l(a),s=i(26);function l(f){return f&&f.__esModule?f:{default:f}}var u=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),h=new s.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});n.BackgroundClass=u,n.BackgroundStyle=h},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var a=i(0),o=s(a);function s(d){return d&&d.__esModule?d:{default:d}}var l={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},u=new o.default.Attributor.Attribute("direction","dir",l),h=new o.default.Attributor.Class("direction","ql-direction",l),f=new o.default.Attributor.Style("direction","direction",l);n.DirectionAttribute=u,n.DirectionClass=h,n.DirectionStyle=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var a=function(){function m(g,b){for(var S=0;S<b.length;S++){var E=b[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,b,S){return b&&m(g.prototype,b),S&&m(g,S),g}}(),o=function m(g,b,S){g===null&&(g=Function.prototype);var E=Object.getOwnPropertyDescriptor(g,b);if(E===void 0){var I=Object.getPrototypeOf(g);return I===null?void 0:m(I,b,S)}else{if("value"in E)return E.value;var L=E.get;return L===void 0?void 0:L.call(S)}},s=i(0),l=u(s);function u(m){return m&&m.__esModule?m:{default:m}}function h(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function f(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function d(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var c={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new l.default.Attributor.Class("font","ql-font",c),v=function(m){d(g,m);function g(){return h(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,[{key:"value",value:function(S){return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,S).replace(/["']/g,"")}}]),g}(l.default.Attributor.Style),w=new v("font","font-family",c);n.FontStyle=w,n.FontClass=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var a=i(0),o=s(a);function s(h){return h&&h.__esModule?h:{default:h}}var l=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=l,n.SizeStyle=u},function(r,n,i){r.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var a=function(){function b(S,E){for(var I=0;I<E.length;I++){var L=E[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(S,L.key,L)}}return function(S,E,I){return E&&b(S.prototype,E),I&&b(S,I),S}}(),o=i(0),s=d(o),l=i(5),u=d(l),h=i(9),f=d(h);function d(b){return b&&b.__esModule?b:{default:b}}function c(b,S){if(!(b instanceof S))throw new TypeError("Cannot call a class as a function")}function y(b,S){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:b}function v(b,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);b.prototype=Object.create(S&&S.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(b,S):b.__proto__=S)}var w=function(b){v(S,b);function S(E,I){c(this,S);var L=y(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,E,I));return L.lastRecorded=0,L.ignoreChange=!1,L.clear(),L.quill.on(u.default.events.EDITOR_CHANGE,function(O,M,T,k){O!==u.default.events.TEXT_CHANGE||L.ignoreChange||(!L.options.userOnly||k===u.default.sources.USER?L.record(M,T):L.transform(M))}),L.quill.keyboard.addBinding({key:"Z",shortKey:!0},L.undo.bind(L)),L.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},L.redo.bind(L)),/Win/i.test(navigator.platform)&&L.quill.keyboard.addBinding({key:"Y",shortKey:!0},L.redo.bind(L)),L}return a(S,[{key:"change",value:function(I,L){if(this.stack[I].length!==0){var O=this.stack[I].pop();this.stack[L].push(O),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(O[I],u.default.sources.USER),this.ignoreChange=!1;var M=g(O[I]);this.quill.setSelection(M)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(I,L){if(I.ops.length!==0){this.stack.redo=[];var O=this.quill.getContents().diff(L),M=Date.now();if(this.lastRecorded+this.options.delay>M&&this.stack.undo.length>0){var T=this.stack.undo.pop();O=O.compose(T.undo),I=T.redo.compose(I)}else this.lastRecorded=M;this.stack.undo.push({redo:I,undo:O}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(I){this.stack.undo.forEach(function(L){L.undo=I.transform(L.undo,!0),L.redo=I.transform(L.redo,!0)}),this.stack.redo.forEach(function(L){L.undo=I.transform(L.undo,!0),L.redo=I.transform(L.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),S}(f.default);w.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function m(b){var S=b.ops[b.ops.length-1];return S==null?!1:S.insert!=null?typeof S.insert=="string"&&S.insert.endsWith(`
`):S.attributes!=null?Object.keys(S.attributes).some(function(E){return s.default.query(E,s.default.Scope.BLOCK)!=null}):!1}function g(b){var S=b.reduce(function(I,L){return I+=L.delete||0,I},0),E=b.length()-S;return m(b)&&(E-=1),E}n.default=w,n.getLastChangeIndex=g},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var a=function(){function P(F,U){for(var H=0;H<U.length;H++){var B=U[H];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(F,B.key,B)}}return function(F,U,H){return U&&P(F.prototype,U),H&&P(F,H),F}}(),o=function P(F,U,H){F===null&&(F=Function.prototype);var B=Object.getOwnPropertyDescriptor(F,U);if(B===void 0){var J=Object.getPrototypeOf(F);return J===null?void 0:P(J,U,H)}else{if("value"in B)return B.value;var re=B.get;return re===void 0?void 0:re.call(H)}},s=i(3),l=M(s),u=i(2),h=M(u),f=i(8),d=M(f),c=i(23),y=M(c),v=i(34),w=M(v),m=i(59),g=M(m),b=i(60),S=M(b),E=i(28),I=M(E),L=i(61),O=M(L);function M(P){return P&&P.__esModule?P:{default:P}}function T(P,F){if(!(P instanceof F))throw new TypeError("Cannot call a class as a function")}function k(P,F){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:P}function A(P,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);P.prototype=Object.create(F&&F.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(P,F):P.__proto__=F)}var R=[!1,"center","right","justify"],C=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],V=[!1,"serif","monospace"],Z=["1","2","3",!1],te=["small",!1,"large","huge"],Q=function(P){A(F,P);function F(U,H){T(this,F);var B=k(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,U,H)),J=function re(ne){if(!document.body.contains(U.root))return document.body.removeEventListener("click",re);B.tooltip!=null&&!B.tooltip.root.contains(ne.target)&&document.activeElement!==B.tooltip.textbox&&!B.quill.hasFocus()&&B.tooltip.hide(),B.pickers!=null&&B.pickers.forEach(function(ge){ge.container.contains(ne.target)||ge.close()})};return U.emitter.listenDOM("click",document.body,J),B}return a(F,[{key:"addModule",value:function(H){var B=o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"addModule",this).call(this,H);return H==="toolbar"&&this.extendToolbar(B),B}},{key:"buildButtons",value:function(H,B){H.forEach(function(J){var re=J.getAttribute("class")||"";re.split(/\s+/).forEach(function(ne){if(ne.startsWith("ql-")&&(ne=ne.slice(3),B[ne]!=null))if(ne==="direction")J.innerHTML=B[ne][""]+B[ne].rtl;else if(typeof B[ne]=="string")J.innerHTML=B[ne];else{var ge=J.value||"";ge!=null&&B[ne][ge]&&(J.innerHTML=B[ne][ge])}})})}},{key:"buildPickers",value:function(H,B){var J=this;this.pickers=H.map(function(ne){if(ne.classList.contains("ql-align"))return ne.querySelector("option")==null&&q(ne,R),new S.default(ne,B.align);if(ne.classList.contains("ql-background")||ne.classList.contains("ql-color")){var ge=ne.classList.contains("ql-background")?"background":"color";return ne.querySelector("option")==null&&q(ne,C,ge==="background"?"#ffffff":"#000000"),new g.default(ne,B[ge])}else return ne.querySelector("option")==null&&(ne.classList.contains("ql-font")?q(ne,V):ne.classList.contains("ql-header")?q(ne,Z):ne.classList.contains("ql-size")&&q(ne,te)),new I.default(ne)});var re=function(){J.pickers.forEach(function(ge){ge.update()})};this.quill.on(d.default.events.EDITOR_CHANGE,re)}}]),F}(w.default);Q.DEFAULTS=(0,l.default)(!0,{},w.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var F=this,U=this.container.querySelector("input.ql-image[type=file]");U==null&&(U=document.createElement("input"),U.setAttribute("type","file"),U.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),U.classList.add("ql-image"),U.addEventListener("change",function(){if(U.files!=null&&U.files[0]!=null){var H=new FileReader;H.onload=function(B){var J=F.quill.getSelection(!0);F.quill.updateContents(new h.default().retain(J.index).delete(J.length).insert({image:B.target.result}),d.default.sources.USER),F.quill.setSelection(J.index+1,d.default.sources.SILENT),U.value=""},H.readAsDataURL(U.files[0])}}),this.container.appendChild(U)),U.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var K=function(P){A(F,P);function F(U,H){T(this,F);var B=k(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,U,H));return B.textbox=B.root.querySelector('input[type="text"]'),B.listen(),B}return a(F,[{key:"listen",value:function(){var H=this;this.textbox.addEventListener("keydown",function(B){y.default.match(B,"enter")?(H.save(),B.preventDefault()):y.default.match(B,"escape")&&(H.cancel(),B.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),B!=null?this.textbox.value=B:H!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+H)||""),this.root.setAttribute("data-mode",H)}},{key:"restoreFocus",value:function(){var H=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=H}},{key:"save",value:function(){var H=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var B=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",H,d.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",H,d.default.sources.USER)),this.quill.root.scrollTop=B;break}case"video":H=W(H);case"formula":{if(!H)break;var J=this.quill.getSelection(!0);if(J!=null){var re=J.index+J.length;this.quill.insertEmbed(re,this.root.getAttribute("data-mode"),H,d.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(re+1," ",d.default.sources.USER),this.quill.setSelection(re+2,d.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),F}(O.default);function W(P){var F=P.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||P.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return F?(F[1]||"https")+"://www.youtube.com/embed/"+F[2]+"?showinfo=0":(F=P.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(F[1]||"https")+"://player.vimeo.com/video/"+F[2]+"/":P}function q(P,F){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;F.forEach(function(H){var B=document.createElement("option");H===U?B.setAttribute("selected","selected"):B.setAttribute("value",H),P.appendChild(B)})}n.BaseTooltip=K,n.default=Q},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];this.insertBefore(s[0],null),s.length>1&&this.append.apply(this,s.slice(1))},o.prototype.contains=function(s){for(var l,u=this.iterator();l=u();)if(l===s)return!0;return!1},o.prototype.insertBefore=function(s,l){s&&(s.next=l,l!=null?(s.prev=l.prev,l.prev!=null&&(l.prev.next=s),l.prev=s,l===this.head&&(this.head=s)):this.tail!=null?(this.tail.next=s,s.prev=this.tail,this.tail=s):(s.prev=null,this.head=this.tail=s),this.length+=1)},o.prototype.offset=function(s){for(var l=0,u=this.head;u!=null;){if(u===s)return l;l+=u.length(),u=u.next}return-1},o.prototype.remove=function(s){this.contains(s)&&(s.prev!=null&&(s.prev.next=s.next),s.next!=null&&(s.next.prev=s.prev),s===this.head&&(this.head=s.next),s===this.tail&&(this.tail=s.prev),this.length-=1)},o.prototype.iterator=function(s){return s===void 0&&(s=this.head),function(){var l=s;return s!=null&&(s=s.next),l}},o.prototype.find=function(s,l){l===void 0&&(l=!1);for(var u,h=this.iterator();u=h();){var f=u.length();if(s<f||l&&s===f&&(u.next==null||u.next.length()!==0))return[u,s];s-=f}return[null,0]},o.prototype.forEach=function(s){for(var l,u=this.iterator();l=u();)s(l)},o.prototype.forEachAt=function(s,l,u){if(!(l<=0))for(var h=this.find(s),f=h[0],d=h[1],c,y=s-d,v=this.iterator(f);(c=v())&&y<s+l;){var w=c.length();s>y?u(c,s-y,Math.min(l,y+w-s)):u(c,0,Math.min(w,s+l-y)),y+=w}},o.prototype.map=function(s){return this.reduce(function(l,u){return l.push(s(u)),l},[])},o.prototype.reduce=function(s,l){for(var u,h=this.iterator();u=h();)l=s(l,u);return l},o}();n.default=a},function(r,n,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var y in c)c.hasOwnProperty(y)&&(d[y]=c[y])};return function(d,c){f(d,c);function y(){this.constructor=d}d.prototype=c===null?Object.create(c):(y.prototype=c.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(17),s=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,h=function(f){a(d,f);function d(c){var y=f.call(this,c)||this;return y.scroll=y,y.observer=new MutationObserver(function(v){y.update(v)}),y.observer.observe(y.domNode,l),y.attach(),y}return d.prototype.detach=function(){f.prototype.detach.call(this),this.observer.disconnect()},d.prototype.deleteAt=function(c,y){this.update(),c===0&&y===this.length()?this.children.forEach(function(v){v.remove()}):f.prototype.deleteAt.call(this,c,y)},d.prototype.formatAt=function(c,y,v,w){this.update(),f.prototype.formatAt.call(this,c,y,v,w)},d.prototype.insertAt=function(c,y,v){this.update(),f.prototype.insertAt.call(this,c,y,v)},d.prototype.optimize=function(c,y){var v=this;c===void 0&&(c=[]),y===void 0&&(y={}),f.prototype.optimize.call(this,y);for(var w=[].slice.call(this.observer.takeRecords());w.length>0;)c.push(w.pop());for(var m=function(E,I){I===void 0&&(I=!0),!(E==null||E===v)&&E.domNode.parentNode!=null&&(E.domNode[s.DATA_KEY].mutations==null&&(E.domNode[s.DATA_KEY].mutations=[]),I&&m(E.parent))},g=function(E){E.domNode[s.DATA_KEY]==null||E.domNode[s.DATA_KEY].mutations==null||(E instanceof o.default&&E.children.forEach(g),E.optimize(y))},b=c,S=0;b.length>0;S+=1){if(S>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(b.forEach(function(E){var I=s.find(E.target,!0);I!=null&&(I.domNode===E.target&&(E.type==="childList"?(m(s.find(E.previousSibling,!1)),[].forEach.call(E.addedNodes,function(L){var O=s.find(L,!1);m(O,!1),O instanceof o.default&&O.children.forEach(function(M){m(M,!1)})})):E.type==="attributes"&&m(I.prev)),m(I))}),this.children.forEach(g),b=[].slice.call(this.observer.takeRecords()),w=b.slice();w.length>0;)c.push(w.pop())}},d.prototype.update=function(c,y){var v=this;y===void 0&&(y={}),c=c||this.observer.takeRecords(),c.map(function(w){var m=s.find(w.target,!0);return m==null?null:m.domNode[s.DATA_KEY].mutations==null?(m.domNode[s.DATA_KEY].mutations=[w],m):(m.domNode[s.DATA_KEY].mutations.push(w),null)}).forEach(function(w){w==null||w===v||w.domNode[s.DATA_KEY]==null||w.update(w.domNode[s.DATA_KEY].mutations||[],y)}),this.domNode[s.DATA_KEY].mutations!=null&&f.prototype.update.call(this,this.domNode[s.DATA_KEY].mutations,y),this.optimize(c,y)},d.blotName="scroll",d.defaultChild="block",d.scope=s.Scope.BLOCK_BLOT,d.tagName="DIV",d}(o.default);n.default=h},function(r,n,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var c in d)d.hasOwnProperty(c)&&(f[c]=d[c])};return function(f,d){h(f,d);function c(){this.constructor=f}f.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(18),s=i(1);function l(h,f){if(Object.keys(h).length!==Object.keys(f).length)return!1;for(var d in h)if(h[d]!==f[d])return!1;return!0}var u=function(h){a(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.formats=function(d){if(d.tagName!==f.tagName)return h.formats.call(this,d)},f.prototype.format=function(d,c){var y=this;d===this.statics.blotName&&!c?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(f.blotName,!0)),y.attributes.copy(v)}),this.unwrap()):h.prototype.format.call(this,d,c)},f.prototype.formatAt=function(d,c,y,v){if(this.formats()[y]!=null||s.query(y,s.Scope.ATTRIBUTE)){var w=this.isolate(d,c);w.format(y,v)}else h.prototype.formatAt.call(this,d,c,y,v)},f.prototype.optimize=function(d){h.prototype.optimize.call(this,d);var c=this.formats();if(Object.keys(c).length===0)return this.unwrap();var y=this.next;y instanceof f&&y.prev===this&&l(c,y.formats())&&(y.moveChildren(this),y.remove())},f.blotName="inline",f.scope=s.Scope.INLINE_BLOT,f.tagName="SPAN",f}(o.default);n.default=u},function(r,n,i){var a=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var d in f)f.hasOwnProperty(d)&&(h[d]=f[d])};return function(h,f){u(h,f);function d(){this.constructor=h}h.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(18),s=i(1),l=function(u){a(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.formats=function(f){var d=s.query(h.blotName).tagName;if(f.tagName!==d)return u.formats.call(this,f)},h.prototype.format=function(f,d){s.query(f,s.Scope.BLOCK)!=null&&(f===this.statics.blotName&&!d?this.replaceWith(h.blotName):u.prototype.format.call(this,f,d))},h.prototype.formatAt=function(f,d,c,y){s.query(c,s.Scope.BLOCK)!=null?this.format(c,y):u.prototype.formatAt.call(this,f,d,c,y)},h.prototype.insertAt=function(f,d,c){if(c==null||s.query(d,s.Scope.INLINE)!=null)u.prototype.insertAt.call(this,f,d,c);else{var y=this.split(f),v=s.create(d,c);y.parent.insertBefore(v,y)}},h.prototype.update=function(f,d){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,f,d)},h.blotName="block",h.scope=s.Scope.BLOCK_BLOT,h.tagName="P",h}(o.default);n.default=l},function(r,n,i){var a=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])};return function(u,h){l(u,h);function f(){this.constructor=u}u.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),s=function(l){a(u,l);function u(){return l!==null&&l.apply(this,arguments)||this}return u.formats=function(h){},u.prototype.format=function(h,f){l.prototype.formatAt.call(this,0,this.length(),h,f)},u.prototype.formatAt=function(h,f,d,c){h===0&&f===this.length()?this.format(d,c):l.prototype.formatAt.call(this,h,f,d,c)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u}(o.default);n.default=s},function(r,n,i){var a=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var d in f)f.hasOwnProperty(d)&&(h[d]=f[d])};return function(h,f){u(h,f);function d(){this.constructor=h}h.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),s=i(1),l=function(u){a(h,u);function h(f){var d=u.call(this,f)||this;return d.text=d.statics.value(d.domNode),d}return h.create=function(f){return document.createTextNode(f)},h.value=function(f){var d=f.data;return d.normalize&&(d=d.normalize()),d},h.prototype.deleteAt=function(f,d){this.domNode.data=this.text=this.text.slice(0,f)+this.text.slice(f+d)},h.prototype.index=function(f,d){return this.domNode===f?d:-1},h.prototype.insertAt=function(f,d,c){c==null?(this.text=this.text.slice(0,f)+d+this.text.slice(f),this.domNode.data=this.text):u.prototype.insertAt.call(this,f,d,c)},h.prototype.length=function(){return this.text.length},h.prototype.optimize=function(f){u.prototype.optimize.call(this,f),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof h&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},h.prototype.position=function(f,d){return[this.domNode,f]},h.prototype.split=function(f,d){if(d===void 0&&(d=!1),!d){if(f===0)return this;if(f===this.length())return this.next}var c=s.create(this.domNode.splitText(f));return this.parent.insertBefore(c,this.next),this.text=this.statics.value(this.domNode),c},h.prototype.update=function(f,d){var c=this;f.some(function(y){return y.type==="characterData"&&y.target===c.domNode})&&(this.text=this.statics.value(this.domNode))},h.prototype.value=function(){return this.text},h.blotName="text",h.scope=s.Scope.INLINE_BLOT,h}(o.default);n.default=l},function(r,n,i){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(s,l){return arguments.length>1&&!this.contains(s)==!l?l:o.call(this,s)}}String.prototype.startsWith||(String.prototype.startsWith=function(s,l){return l=l||0,this.substr(l,s.length)===s}),String.prototype.endsWith||(String.prototype.endsWith=function(s,l){var u=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>u.length)&&(l=u.length),l-=s.length;var h=u.indexOf(s,l);return h!==-1&&h===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),h=u.length>>>0,f=arguments[1],d,c=0;c<h;c++)if(d=u[c],l.call(f,d,c,u))return d}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(r,n){var i=-1,a=1,o=0;function s(S,E,I){if(S==E)return S?[[o,S]]:[];(I<0||S.length<I)&&(I=null);var L=f(S,E),O=S.substring(0,L);S=S.substring(L),E=E.substring(L),L=d(S,E);var M=S.substring(S.length-L);S=S.substring(0,S.length-L),E=E.substring(0,E.length-L);var T=l(S,E);return O&&T.unshift([o,O]),M&&T.push([o,M]),y(T),I!=null&&(T=m(T,I)),T=g(T),T}function l(S,E){var I;if(!S)return[[a,E]];if(!E)return[[i,S]];var L=S.length>E.length?S:E,O=S.length>E.length?E:S,M=L.indexOf(O);if(M!=-1)return I=[[a,L.substring(0,M)],[o,O],[a,L.substring(M+O.length)]],S.length>E.length&&(I[0][0]=I[2][0]=i),I;if(O.length==1)return[[i,S],[a,E]];var T=c(S,E);if(T){var k=T[0],A=T[1],R=T[2],C=T[3],V=T[4],Z=s(k,R),te=s(A,C);return Z.concat([[o,V]],te)}return u(S,E)}function u(S,E){for(var I=S.length,L=E.length,O=Math.ceil((I+L)/2),M=O,T=2*O,k=new Array(T),A=new Array(T),R=0;R<T;R++)k[R]=-1,A[R]=-1;k[M+1]=0,A[M+1]=0;for(var C=I-L,V=C%2!=0,Z=0,te=0,Q=0,K=0,W=0;W<O;W++){for(var q=-W+Z;q<=W-te;q+=2){var P=M+q,F;q==-W||q!=W&&k[P-1]<k[P+1]?F=k[P+1]:F=k[P-1]+1;for(var U=F-q;F<I&&U<L&&S.charAt(F)==E.charAt(U);)F++,U++;if(k[P]=F,F>I)te+=2;else if(U>L)Z+=2;else if(V){var H=M+C-q;if(H>=0&&H<T&&A[H]!=-1){var B=I-A[H];if(F>=B)return h(S,E,F,U)}}}for(var J=-W+Q;J<=W-K;J+=2){var H=M+J,B;J==-W||J!=W&&A[H-1]<A[H+1]?B=A[H+1]:B=A[H-1]+1;for(var re=B-J;B<I&&re<L&&S.charAt(I-B-1)==E.charAt(L-re-1);)B++,re++;if(A[H]=B,B>I)K+=2;else if(re>L)Q+=2;else if(!V){var P=M+C-J;if(P>=0&&P<T&&k[P]!=-1){var F=k[P],U=M+F-P;if(B=I-B,F>=B)return h(S,E,F,U)}}}}return[[i,S],[a,E]]}function h(S,E,I,L){var O=S.substring(0,I),M=E.substring(0,L),T=S.substring(I),k=E.substring(L),A=s(O,M),R=s(T,k);return A.concat(R)}function f(S,E){if(!S||!E||S.charAt(0)!=E.charAt(0))return 0;for(var I=0,L=Math.min(S.length,E.length),O=L,M=0;I<O;)S.substring(M,O)==E.substring(M,O)?(I=O,M=I):L=O,O=Math.floor((L-I)/2+I);return O}function d(S,E){if(!S||!E||S.charAt(S.length-1)!=E.charAt(E.length-1))return 0;for(var I=0,L=Math.min(S.length,E.length),O=L,M=0;I<O;)S.substring(S.length-O,S.length-M)==E.substring(E.length-O,E.length-M)?(I=O,M=I):L=O,O=Math.floor((L-I)/2+I);return O}function c(S,E){var I=S.length>E.length?S:E,L=S.length>E.length?E:S;if(I.length<4||L.length*2<I.length)return null;function O(te,Q,K){for(var W=te.substring(K,K+Math.floor(te.length/4)),q=-1,P="",F,U,H,B;(q=Q.indexOf(W,q+1))!=-1;){var J=f(te.substring(K),Q.substring(q)),re=d(te.substring(0,K),Q.substring(0,q));P.length<re+J&&(P=Q.substring(q-re,q)+Q.substring(q,q+J),F=te.substring(0,K-re),U=te.substring(K+J),H=Q.substring(0,q-re),B=Q.substring(q+J))}return P.length*2>=te.length?[F,U,H,B,P]:null}var M=O(I,L,Math.ceil(I.length/4)),T=O(I,L,Math.ceil(I.length/2)),k;if(!M&&!T)return null;T?M?k=M[4].length>T[4].length?M:T:k=T:k=M;var A,R,C,V;S.length>E.length?(A=k[0],R=k[1],C=k[2],V=k[3]):(C=k[0],V=k[1],A=k[2],R=k[3]);var Z=k[4];return[A,R,C,V,Z]}function y(S){S.push([o,""]);for(var E=0,I=0,L=0,O="",M="",T;E<S.length;)switch(S[E][0]){case a:L++,M+=S[E][1],E++;break;case i:I++,O+=S[E][1],E++;break;case o:I+L>1?(I!==0&&L!==0&&(T=f(M,O),T!==0&&(E-I-L>0&&S[E-I-L-1][0]==o?S[E-I-L-1][1]+=M.substring(0,T):(S.splice(0,0,[o,M.substring(0,T)]),E++),M=M.substring(T),O=O.substring(T)),T=d(M,O),T!==0&&(S[E][1]=M.substring(M.length-T)+S[E][1],M=M.substring(0,M.length-T),O=O.substring(0,O.length-T))),I===0?S.splice(E-L,I+L,[a,M]):L===0?S.splice(E-I,I+L,[i,O]):S.splice(E-I-L,I+L,[i,O],[a,M]),E=E-I-L+(I?1:0)+(L?1:0)+1):E!==0&&S[E-1][0]==o?(S[E-1][1]+=S[E][1],S.splice(E,1)):E++,L=0,I=0,O="",M="";break}S[S.length-1][1]===""&&S.pop();var k=!1;for(E=1;E<S.length-1;)S[E-1][0]==o&&S[E+1][0]==o&&(S[E][1].substring(S[E][1].length-S[E-1][1].length)==S[E-1][1]?(S[E][1]=S[E-1][1]+S[E][1].substring(0,S[E][1].length-S[E-1][1].length),S[E+1][1]=S[E-1][1]+S[E+1][1],S.splice(E-1,1),k=!0):S[E][1].substring(0,S[E+1][1].length)==S[E+1][1]&&(S[E-1][1]+=S[E+1][1],S[E][1]=S[E][1].substring(S[E+1][1].length)+S[E+1][1],S.splice(E+1,1),k=!0)),E++;k&&y(S)}var v=s;v.INSERT=a,v.DELETE=i,v.EQUAL=o,r.exports=v;function w(S,E){if(E===0)return[o,S];for(var I=0,L=0;L<S.length;L++){var O=S[L];if(O[0]===i||O[0]===o){var M=I+O[1].length;if(E===M)return[L+1,S];if(E<M){S=S.slice();var T=E-I,k=[O[0],O[1].slice(0,T)],A=[O[0],O[1].slice(T)];return S.splice(L,1,k,A),[L+1,S]}else I=M}}throw new Error("cursor_pos is out of bounds!")}function m(S,E){var I=w(S,E),L=I[1],O=I[0],M=L[O],T=L[O+1];if(M==null)return S;if(M[0]!==o)return S;if(T!=null&&M[1]+T[1]===T[1]+M[1])return L.splice(O,2,T,M),b(L,O,2);if(T!=null&&T[1].indexOf(M[1])===0){L.splice(O,2,[T[0],M[1]],[0,M[1]]);var k=T[1].slice(M[1].length);return k.length>0&&L.splice(O+2,0,[T[0],k]),b(L,O,3)}else return S}function g(S){for(var E=!1,I=function(T){return T.charCodeAt(0)>=56320&&T.charCodeAt(0)<=57343},L=function(T){return T.charCodeAt(T.length-1)>=55296&&T.charCodeAt(T.length-1)<=56319},O=2;O<S.length;O+=1)S[O-2][0]===o&&L(S[O-2][1])&&S[O-1][0]===i&&I(S[O-1][1])&&S[O][0]===a&&I(S[O][1])&&(E=!0,S[O-1][1]=S[O-2][1].slice(-1)+S[O-1][1],S[O][1]=S[O-2][1].slice(-1)+S[O][1],S[O-2][1]=S[O-2][1].slice(0,-1));if(!E)return S;for(var M=[],O=0;O<S.length;O+=1)S[O][1].length>0&&M.push(S[O]);return M}function b(S,E,I){for(var L=E+I-1;L>=0&&L>=E-1;L--)if(L+1<S.length){var O=S[L],M=S[L+1];O[0]===M[1]&&S.splice(L,2,[O[0],O[1]+M[1]])}return S}},function(r,n){n=r.exports=typeof Object.keys=="function"?Object.keys:i,n.shim=i;function i(a){var o=[];for(var s in a)o.push(s);return o}},function(r,n){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=r.exports=i?a:o,n.supported=a;function a(s){return Object.prototype.toString.call(s)=="[object Arguments]"}n.unsupported=o;function o(s){return s&&typeof s=="object"&&typeof s.length=="number"&&Object.prototype.hasOwnProperty.call(s,"callee")&&!Object.prototype.propertyIsEnumerable.call(s,"callee")||!1}},function(r,n){var i=Object.prototype.hasOwnProperty,a="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(a=!1));function s(u,h,f){this.fn=u,this.context=h,this.once=f||!1}function l(){this._events=new o,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],f,d;if(this._eventsCount===0)return h;for(d in f=this._events)i.call(f,d)&&h.push(a?d.slice(1):d);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},l.prototype.listeners=function(h,f){var d=a?a+h:h,c=this._events[d];if(f)return!!c;if(!c)return[];if(c.fn)return[c.fn];for(var y=0,v=c.length,w=new Array(v);y<v;y++)w[y]=c[y].fn;return w},l.prototype.emit=function(h,f,d,c,y,v){var w=a?a+h:h;if(!this._events[w])return!1;var m=this._events[w],g=arguments.length,b,S;if(m.fn){switch(m.once&&this.removeListener(h,m.fn,void 0,!0),g){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,f),!0;case 3:return m.fn.call(m.context,f,d),!0;case 4:return m.fn.call(m.context,f,d,c),!0;case 5:return m.fn.call(m.context,f,d,c,y),!0;case 6:return m.fn.call(m.context,f,d,c,y,v),!0}for(S=1,b=new Array(g-1);S<g;S++)b[S-1]=arguments[S];m.fn.apply(m.context,b)}else{var E=m.length,I;for(S=0;S<E;S++)switch(m[S].once&&this.removeListener(h,m[S].fn,void 0,!0),g){case 1:m[S].fn.call(m[S].context);break;case 2:m[S].fn.call(m[S].context,f);break;case 3:m[S].fn.call(m[S].context,f,d);break;case 4:m[S].fn.call(m[S].context,f,d,c);break;default:if(!b)for(I=1,b=new Array(g-1);I<g;I++)b[I-1]=arguments[I];m[S].fn.apply(m[S].context,b)}}return!0},l.prototype.on=function(h,f,d){var c=new s(f,d||this),y=a?a+h:h;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],c]:this._events[y].push(c):(this._events[y]=c,this._eventsCount++),this},l.prototype.once=function(h,f,d){var c=new s(f,d||this,!0),y=a?a+h:h;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],c]:this._events[y].push(c):(this._events[y]=c,this._eventsCount++),this},l.prototype.removeListener=function(h,f,d,c){var y=a?a+h:h;if(!this._events[y])return this;if(!f)return--this._eventsCount===0?this._events=new o:delete this._events[y],this;var v=this._events[y];if(v.fn)v.fn===f&&(!c||v.once)&&(!d||v.context===d)&&(--this._eventsCount===0?this._events=new o:delete this._events[y]);else{for(var w=0,m=[],g=v.length;w<g;w++)(v[w].fn!==f||c&&!v[w].once||d&&v[w].context!==d)&&m.push(v[w]);m.length?this._events[y]=m.length===1?m[0]:m:--this._eventsCount===0?this._events=new o:delete this._events[y]}return this},l.prototype.removeAllListeners=function(h){var f;return h?(f=a?a+h:h,this._events[f]&&(--this._eventsCount===0?this._events=new o:delete this._events[f])):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=a,l.EventEmitter=l,typeof r<"u"&&(r.exports=l)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},o=function(){function oe(se,ce){var ve=[],de=!0,Le=!1,Me=void 0;try{for(var qe=se[Symbol.iterator](),Ke;!(de=(Ke=qe.next()).done)&&(ve.push(Ke.value),!(ce&&ve.length===ce));de=!0);}catch(Ze){Le=!0,Me=Ze}finally{try{!de&&qe.return&&qe.return()}finally{if(Le)throw Me}}return ve}return function(se,ce){if(Array.isArray(se))return se;if(Symbol.iterator in Object(se))return oe(se,ce);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function oe(se,ce){for(var ve=0;ve<ce.length;ve++){var de=ce[ve];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(se,de.key,de)}}return function(se,ce,ve){return ce&&oe(se.prototype,ce),ve&&oe(se,ve),se}}(),l=i(3),u=A(l),h=i(2),f=A(h),d=i(0),c=A(d),y=i(5),v=A(y),w=i(10),m=A(w),g=i(9),b=A(g),S=i(36),E=i(37),I=i(13),L=A(I),O=i(26),M=i(38),T=i(39),k=i(40);function A(oe){return oe&&oe.__esModule?oe:{default:oe}}function R(oe,se,ce){return se in oe?Object.defineProperty(oe,se,{value:ce,enumerable:!0,configurable:!0,writable:!0}):oe[se]=ce,oe}function C(oe,se){if(!(oe instanceof se))throw new TypeError("Cannot call a class as a function")}function V(oe,se){if(!oe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se&&(typeof se=="object"||typeof se=="function")?se:oe}function Z(oe,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);oe.prototype=Object.create(se&&se.prototype,{constructor:{value:oe,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(oe,se):oe.__proto__=se)}var te=(0,m.default)("quill:clipboard"),Q="__ql-matcher",K=[[Node.TEXT_NODE,He],[Node.TEXT_NODE,De],["br",be],[Node.ELEMENT_NODE,De],[Node.ELEMENT_NODE,ge],[Node.ELEMENT_NODE,_e],[Node.ELEMENT_NODE,ne],[Node.ELEMENT_NODE,ue],["li",Ae],["b",re.bind(re,"bold")],["i",re.bind(re,"italic")],["style",Ee]],W=[S.AlignAttribute,M.DirectionAttribute].reduce(function(oe,se){return oe[se.keyName]=se,oe},{}),q=[S.AlignStyle,E.BackgroundStyle,O.ColorStyle,M.DirectionStyle,T.FontStyle,k.SizeStyle].reduce(function(oe,se){return oe[se.keyName]=se,oe},{}),P=function(oe){Z(se,oe);function se(ce,ve){C(this,se);var de=V(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,ce,ve));return de.quill.root.addEventListener("paste",de.onPaste.bind(de)),de.container=de.quill.addContainer("ql-clipboard"),de.container.setAttribute("contenteditable",!0),de.container.setAttribute("tabindex",-1),de.matchers=[],K.concat(de.options.matchers).forEach(function(Le){var Me=o(Le,2),qe=Me[0],Ke=Me[1];!ve.matchVisual&&Ke===_e||de.addMatcher(qe,Ke)}),de}return s(se,[{key:"addMatcher",value:function(ve,de){this.matchers.push([ve,de])}},{key:"convert",value:function(ve){if(typeof ve=="string")return this.container.innerHTML=ve.replace(/\>\r?\n +\</g,"><"),this.convert();var de=this.quill.getFormat(this.quill.selection.savedRange.index);if(de[L.default.blotName]){var Le=this.container.innerText;return this.container.innerHTML="",new f.default().insert(Le,R({},L.default.blotName,de[L.default.blotName]))}var Me=this.prepareMatching(),qe=o(Me,2),Ke=qe[0],Ze=qe[1],Ve=J(this.container,Ke,Ze);return H(Ve,`
`)&&Ve.ops[Ve.ops.length-1].attributes==null&&(Ve=Ve.compose(new f.default().retain(Ve.length()-1).delete(1))),te.log("convert",this.container.innerHTML,Ve),this.container.innerHTML="",Ve}},{key:"dangerouslyPasteHTML",value:function(ve,de){var Le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof ve=="string")this.quill.setContents(this.convert(ve),de),this.quill.setSelection(0,v.default.sources.SILENT);else{var Me=this.convert(de);this.quill.updateContents(new f.default().retain(ve).concat(Me),Le),this.quill.setSelection(ve+Me.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(ve){var de=this;if(!(ve.defaultPrevented||!this.quill.isEnabled())){var Le=this.quill.getSelection(),Me=new f.default().retain(Le.index),qe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){Me=Me.concat(de.convert()).delete(Le.length),de.quill.updateContents(Me,v.default.sources.USER),de.quill.setSelection(Me.length()-Le.length,v.default.sources.SILENT),de.quill.scrollingContainer.scrollTop=qe,de.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ve=this,de=[],Le=[];return this.matchers.forEach(function(Me){var qe=o(Me,2),Ke=qe[0],Ze=qe[1];switch(Ke){case Node.TEXT_NODE:Le.push(Ze);break;case Node.ELEMENT_NODE:de.push(Ze);break;default:[].forEach.call(ve.container.querySelectorAll(Ke),function(Ve){Ve[Q]=Ve[Q]||[],Ve[Q].push(Ze)});break}}),[de,Le]}}]),se}(b.default);P.DEFAULTS={matchers:[],matchVisual:!0};function F(oe,se,ce){return(typeof se>"u"?"undefined":a(se))==="object"?Object.keys(se).reduce(function(ve,de){return F(ve,de,se[de])},oe):oe.reduce(function(ve,de){return de.attributes&&de.attributes[se]?ve.push(de):ve.insert(de.insert,(0,u.default)({},R({},se,ce),de.attributes))},new f.default)}function U(oe){if(oe.nodeType!==Node.ELEMENT_NODE)return{};var se="__ql-computed-style";return oe[se]||(oe[se]=window.getComputedStyle(oe))}function H(oe,se){for(var ce="",ve=oe.ops.length-1;ve>=0&&ce.length<se.length;--ve){var de=oe.ops[ve];if(typeof de.insert!="string")break;ce=de.insert+ce}return ce.slice(-1*se.length)===se}function B(oe){if(oe.childNodes.length===0)return!1;var se=U(oe);return["block","list-item"].indexOf(se.display)>-1}function J(oe,se,ce){return oe.nodeType===oe.TEXT_NODE?ce.reduce(function(ve,de){return de(oe,ve)},new f.default):oe.nodeType===oe.ELEMENT_NODE?[].reduce.call(oe.childNodes||[],function(ve,de){var Le=J(de,se,ce);return de.nodeType===oe.ELEMENT_NODE&&(Le=se.reduce(function(Me,qe){return qe(de,Me)},Le),Le=(de[Q]||[]).reduce(function(Me,qe){return qe(de,Me)},Le)),ve.concat(Le)},new f.default):new f.default}function re(oe,se,ce){return F(ce,oe,!0)}function ne(oe,se){var ce=c.default.Attributor.Attribute.keys(oe),ve=c.default.Attributor.Class.keys(oe),de=c.default.Attributor.Style.keys(oe),Le={};return ce.concat(ve).concat(de).forEach(function(Me){var qe=c.default.query(Me,c.default.Scope.ATTRIBUTE);qe!=null&&(Le[qe.attrName]=qe.value(oe),Le[qe.attrName])||(qe=W[Me],qe!=null&&(qe.attrName===Me||qe.keyName===Me)&&(Le[qe.attrName]=qe.value(oe)||void 0),qe=q[Me],qe!=null&&(qe.attrName===Me||qe.keyName===Me)&&(qe=q[Me],Le[qe.attrName]=qe.value(oe)||void 0))}),Object.keys(Le).length>0&&(se=F(se,Le)),se}function ge(oe,se){var ce=c.default.query(oe);if(ce==null)return se;if(ce.prototype instanceof c.default.Embed){var ve={},de=ce.value(oe);de!=null&&(ve[ce.blotName]=de,se=new f.default().insert(ve,ce.formats(oe)))}else typeof ce.formats=="function"&&(se=F(se,ce.blotName,ce.formats(oe)));return se}function be(oe,se){return H(se,`
`)||se.insert(`
`),se}function Ee(){return new f.default}function Ae(oe,se){var ce=c.default.query(oe);if(ce==null||ce.blotName!=="list-item"||!H(se,`
`))return se;for(var ve=-1,de=oe.parentNode;!de.classList.contains("ql-clipboard");)(c.default.query(de)||{}).blotName==="list"&&(ve+=1),de=de.parentNode;return ve<=0?se:se.compose(new f.default().retain(se.length()-1).retain(1,{indent:ve}))}function De(oe,se){return H(se,`
`)||(B(oe)||se.length()>0&&oe.nextSibling&&B(oe.nextSibling))&&se.insert(`
`),se}function _e(oe,se){if(B(oe)&&oe.nextElementSibling!=null&&!H(se,`

`)){var ce=oe.offsetHeight+parseFloat(U(oe).marginTop)+parseFloat(U(oe).marginBottom);oe.nextElementSibling.offsetTop>oe.offsetTop+ce*1.5&&se.insert(`
`)}return se}function ue(oe,se){var ce={},ve=oe.style||{};return ve.fontStyle&&U(oe).fontStyle==="italic"&&(ce.italic=!0),ve.fontWeight&&(U(oe).fontWeight.startsWith("bold")||parseInt(U(oe).fontWeight)>=700)&&(ce.bold=!0),Object.keys(ce).length>0&&(se=F(se,ce)),parseFloat(ve.textIndent||0)>0&&(se=new f.default().insert("	").concat(se)),se}function He(oe,se){var ce=oe.data;if(oe.parentNode.tagName==="O:P")return se.insert(ce.trim());if(ce.trim().length===0&&oe.parentNode.classList.contains("ql-clipboard"))return se;if(!U(oe.parentNode).whiteSpace.startsWith("pre")){var ve=function(Le,Me){return Me=Me.replace(/[^\u00a0]/g,""),Me.length<1&&Le?" ":Me};ce=ce.replace(/\r\n/g," ").replace(/\n/g," "),ce=ce.replace(/\s\s+/g,ve.bind(ve,!0)),(oe.previousSibling==null&&B(oe.parentNode)||oe.previousSibling!=null&&B(oe.previousSibling))&&(ce=ce.replace(/^\s+/,ve.bind(ve,!1))),(oe.nextSibling==null&&B(oe.parentNode)||oe.nextSibling!=null&&B(oe.nextSibling))&&(ce=ce.replace(/\s+$/,ve.bind(ve,!1)))}return se.insert(ce)}n.default=P,n.matchAttributor=ne,n.matchBlot=ge,n.matchNewline=De,n.matchSpacing=_e,n.matchText=He},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,w){for(var m=0;m<w.length;m++){var g=w[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,w,m){return w&&y(v.prototype,w),m&&y(v,m),v}}(),o=function y(v,w,m){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,w);if(g===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:y(b,w,m)}else{if("value"in g)return g.value;var S=g.get;return S===void 0?void 0:S.call(m)}},s=i(6),l=u(s);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function f(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function d(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var c=function(y){d(v,y);function v(){return h(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"optimize",value:function(m){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,m),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(l.default);c.blotName="bold",c.tagName=["STRONG","B"],n.default=c},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var a=function(){function k(A,R){var C=[],V=!0,Z=!1,te=void 0;try{for(var Q=A[Symbol.iterator](),K;!(V=(K=Q.next()).done)&&(C.push(K.value),!(R&&C.length===R));V=!0);}catch(W){Z=!0,te=W}finally{try{!V&&Q.return&&Q.return()}finally{if(Z)throw te}}return C}return function(A,R){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return k(A,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function k(A,R){for(var C=0;C<R.length;C++){var V=R[C];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(A,V.key,V)}}return function(A,R,C){return R&&k(A.prototype,R),C&&k(A,C),A}}(),s=i(2),l=m(s),u=i(0),h=m(u),f=i(5),d=m(f),c=i(10),y=m(c),v=i(9),w=m(v);function m(k){return k&&k.__esModule?k:{default:k}}function g(k,A,R){return A in k?Object.defineProperty(k,A,{value:R,enumerable:!0,configurable:!0,writable:!0}):k[A]=R,k}function b(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}function S(k,A){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:k}function E(k,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);k.prototype=Object.create(A&&A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(k,A):k.__proto__=A)}var I=(0,y.default)("quill:toolbar"),L=function(k){E(A,k);function A(R,C){b(this,A);var V=S(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,R,C));if(Array.isArray(V.options.container)){var Z=document.createElement("div");M(Z,V.options.container),R.container.parentNode.insertBefore(Z,R.container),V.container=Z}else typeof V.options.container=="string"?V.container=document.querySelector(V.options.container):V.container=V.options.container;if(!(V.container instanceof HTMLElement)){var te;return te=I.error("Container required for toolbar",V.options),S(V,te)}return V.container.classList.add("ql-toolbar"),V.controls=[],V.handlers={},Object.keys(V.options.handlers).forEach(function(Q){V.addHandler(Q,V.options.handlers[Q])}),[].forEach.call(V.container.querySelectorAll("button, select"),function(Q){V.attach(Q)}),V.quill.on(d.default.events.EDITOR_CHANGE,function(Q,K){Q===d.default.events.SELECTION_CHANGE&&V.update(K)}),V.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){var Q=V.quill.selection.getRange(),K=a(Q,1),W=K[0];V.update(W)}),V}return o(A,[{key:"addHandler",value:function(C,V){this.handlers[C]=V}},{key:"attach",value:function(C){var V=this,Z=[].find.call(C.classList,function(Q){return Q.indexOf("ql-")===0});if(Z){if(Z=Z.slice(3),C.tagName==="BUTTON"&&C.setAttribute("type","button"),this.handlers[Z]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Z]==null){I.warn("ignoring attaching to disabled format",Z,C);return}if(h.default.query(Z)==null){I.warn("ignoring attaching to nonexistent format",Z,C);return}}var te=C.tagName==="SELECT"?"change":"click";C.addEventListener(te,function(Q){var K=void 0;if(C.tagName==="SELECT"){if(C.selectedIndex<0)return;var W=C.options[C.selectedIndex];W.hasAttribute("selected")?K=!1:K=W.value||!1}else C.classList.contains("ql-active")?K=!1:K=C.value||!C.hasAttribute("value"),Q.preventDefault();V.quill.focus();var q=V.quill.selection.getRange(),P=a(q,1),F=P[0];if(V.handlers[Z]!=null)V.handlers[Z].call(V,K);else if(h.default.query(Z).prototype instanceof h.default.Embed){if(K=prompt("Enter "+Z),!K)return;V.quill.updateContents(new l.default().retain(F.index).delete(F.length).insert(g({},Z,K)),d.default.sources.USER)}else V.quill.format(Z,K,d.default.sources.USER);V.update(F)}),this.controls.push([Z,C])}}},{key:"update",value:function(C){var V=C==null?{}:this.quill.getFormat(C);this.controls.forEach(function(Z){var te=a(Z,2),Q=te[0],K=te[1];if(K.tagName==="SELECT"){var W=void 0;if(C==null)W=null;else if(V[Q]==null)W=K.querySelector("option[selected]");else if(!Array.isArray(V[Q])){var q=V[Q];typeof q=="string"&&(q=q.replace(/\"/g,'\\"')),W=K.querySelector('option[value="'+q+'"]')}W==null?(K.value="",K.selectedIndex=-1):W.selected=!0}else if(C==null)K.classList.remove("ql-active");else if(K.hasAttribute("value")){var P=V[Q]===K.getAttribute("value")||V[Q]!=null&&V[Q].toString()===K.getAttribute("value")||V[Q]==null&&!K.getAttribute("value");K.classList.toggle("ql-active",P)}else K.classList.toggle("ql-active",V[Q]!=null)})}}]),A}(w.default);L.DEFAULTS={};function O(k,A,R){var C=document.createElement("button");C.setAttribute("type","button"),C.classList.add("ql-"+A),R!=null&&(C.value=R),k.appendChild(C)}function M(k,A){Array.isArray(A[0])||(A=[A]),A.forEach(function(R){var C=document.createElement("span");C.classList.add("ql-formats"),R.forEach(function(V){if(typeof V=="string")O(C,V);else{var Z=Object.keys(V)[0],te=V[Z];Array.isArray(te)?T(C,Z,te):O(C,Z,te)}}),k.appendChild(C)})}function T(k,A,R){var C=document.createElement("select");C.classList.add("ql-"+A),R.forEach(function(V){var Z=document.createElement("option");V!==!1?Z.setAttribute("value",V):Z.setAttribute("selected","selected"),C.appendChild(Z)}),k.appendChild(C)}L.DEFAULTS={container:null,handlers:{clean:function(){var A=this,R=this.quill.getSelection();if(R!=null)if(R.length==0){var C=this.quill.getFormat();Object.keys(C).forEach(function(V){h.default.query(V,h.default.Scope.INLINE)!=null&&A.quill.format(V,!1)})}else this.quill.removeFormat(R,d.default.sources.USER)},direction:function(A){var R=this.quill.getFormat().align;A==="rtl"&&R==null?this.quill.format("align","right",d.default.sources.USER):!A&&R==="right"&&this.quill.format("align",!1,d.default.sources.USER),this.quill.format("direction",A,d.default.sources.USER)},indent:function(A){var R=this.quill.getSelection(),C=this.quill.getFormat(R),V=parseInt(C.indent||0);if(A==="+1"||A==="-1"){var Z=A==="+1"?1:-1;C.direction==="rtl"&&(Z*=-1),this.quill.format("indent",V+Z,d.default.sources.USER)}},link:function(A){A===!0&&(A=prompt("Enter link URL:")),this.quill.format("link",A,d.default.sources.USER)},list:function(A){var R=this.quill.getSelection(),C=this.quill.getFormat(R);A==="check"?C.list==="checked"||C.list==="unchecked"?this.quill.format("list",!1,d.default.sources.USER):this.quill.format("list","unchecked",d.default.sources.USER):this.quill.format("list",A,d.default.sources.USER)}}},n.default=L,n.addControls=M},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,w){for(var m=0;m<w.length;m++){var g=w[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,w,m){return w&&y(v.prototype,w),m&&y(v,m),v}}(),o=function y(v,w,m){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,w);if(g===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:y(b,w,m)}else{if("value"in g)return g.value;var S=g.get;return S===void 0?void 0:S.call(m)}},s=i(28),l=u(s);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function f(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function d(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var c=function(y){d(v,y);function v(w,m){h(this,v);var g=f(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,w));return g.label.innerHTML=m,g.container.classList.add("ql-color-picker"),[].slice.call(g.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(b){b.classList.add("ql-primary")}),g}return a(v,[{key:"buildItem",value:function(m){var g=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,m);return g.style.backgroundColor=m.getAttribute("value")||"",g}},{key:"selectItem",value:function(m,g){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,m,g);var b=this.label.querySelector(".ql-color-label"),S=m&&m.getAttribute("data-value")||"";b&&(b.tagName==="line"?b.style.stroke=S:b.style.fill=S)}}]),v}(l.default);n.default=c},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,w){for(var m=0;m<w.length;m++){var g=w[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,w,m){return w&&y(v.prototype,w),m&&y(v,m),v}}(),o=function y(v,w,m){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,w);if(g===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:y(b,w,m)}else{if("value"in g)return g.value;var S=g.get;return S===void 0?void 0:S.call(m)}},s=i(28),l=u(s);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function f(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function d(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var c=function(y){d(v,y);function v(w,m){h(this,v);var g=f(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,w));return g.container.classList.add("ql-icon-picker"),[].forEach.call(g.container.querySelectorAll(".ql-picker-item"),function(b){b.innerHTML=m[b.getAttribute("data-value")||""]}),g.defaultItem=g.container.querySelector(".ql-selected"),g.selectItem(g.defaultItem),g}return a(v,[{key:"selectItem",value:function(m,g){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,m,g),m=m||this.defaultItem,this.label.innerHTML=m.innerHTML}}]),v}(l.default);n.default=c},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function l(u,h){for(var f=0;f<h.length;f++){var d=h[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}return function(u,h,f){return h&&l(u.prototype,h),f&&l(u,f),u}}();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var s=function(){function l(u,h){var f=this;o(this,l),this.quill=u,this.boundsContainer=h||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){f.root.style.marginTop=-1*f.quill.root.scrollTop+"px"}),this.hide()}return a(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(h){var f=h.left+h.width/2-this.root.offsetWidth/2,d=h.bottom+this.quill.root.scrollTop;this.root.style.left=f+"px",this.root.style.top=d+"px",this.root.classList.remove("ql-flip");var c=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),v=0;if(y.right>c.right&&(v=c.right-y.right,this.root.style.left=f+v+"px"),y.left<c.left&&(v=c.left-y.left,this.root.style.left=f+v+"px"),y.bottom>c.bottom){var w=y.bottom-y.top,m=h.bottom-h.top+w;this.root.style.top=d-m+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();n.default=s},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(k,A){var R=[],C=!0,V=!1,Z=void 0;try{for(var te=k[Symbol.iterator](),Q;!(C=(Q=te.next()).done)&&(R.push(Q.value),!(A&&R.length===A));C=!0);}catch(K){V=!0,Z=K}finally{try{!C&&te.return&&te.return()}finally{if(V)throw Z}}return R}return function(k,A){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return T(k,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function T(k,A,R){k===null&&(k=Function.prototype);var C=Object.getOwnPropertyDescriptor(k,A);if(C===void 0){var V=Object.getPrototypeOf(k);return V===null?void 0:T(V,A,R)}else{if("value"in C)return C.value;var Z=C.get;return Z===void 0?void 0:Z.call(R)}},s=function(){function T(k,A){for(var R=0;R<A.length;R++){var C=A[R];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(k,C.key,C)}}return function(k,A,R){return A&&T(k.prototype,A),R&&T(k,R),k}}(),l=i(3),u=b(l),h=i(8),f=b(h),d=i(43),c=b(d),y=i(27),v=b(y),w=i(15),m=i(41),g=b(m);function b(T){return T&&T.__esModule?T:{default:T}}function S(T,k){if(!(T instanceof k))throw new TypeError("Cannot call a class as a function")}function E(T,k){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:T}function I(T,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);T.prototype=Object.create(k&&k.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(T,k):T.__proto__=k)}var L=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],O=function(T){I(k,T);function k(A,R){S(this,k),R.modules.toolbar!=null&&R.modules.toolbar.container==null&&(R.modules.toolbar.container=L);var C=E(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,A,R));return C.quill.container.classList.add("ql-snow"),C}return s(k,[{key:"extendToolbar",value:function(R){R.container.classList.add("ql-snow"),this.buildButtons([].slice.call(R.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(R.container.querySelectorAll("select")),g.default),this.tooltip=new M(this.quill,this.options.bounds),R.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(C,V){R.handlers.link.call(R,!V.format.link)})}}]),k}(c.default);O.DEFAULTS=(0,u.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(k){if(k){var A=this.quill.getSelection();if(A==null||A.length==0)return;var R=this.quill.getText(A);/^\S+@\S+\.\S+$/.test(R)&&R.indexOf("mailto:")!==0&&(R="mailto:"+R);var C=this.quill.theme.tooltip;C.edit("link",R)}else this.quill.format("link",!1)}}}}});var M=function(T){I(k,T);function k(A,R){S(this,k);var C=E(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,A,R));return C.preview=C.root.querySelector("a.ql-preview"),C}return s(k,[{key:"listen",value:function(){var R=this;o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(C){R.root.classList.contains("ql-editing")?R.save():R.edit("link",R.preview.textContent),C.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(C){if(R.linkRange!=null){var V=R.linkRange;R.restoreFocus(),R.quill.formatText(V,"link",!1,f.default.sources.USER),delete R.linkRange}C.preventDefault(),R.hide()}),this.quill.on(f.default.events.SELECTION_CHANGE,function(C,V,Z){if(C!=null){if(C.length===0&&Z===f.default.sources.USER){var te=R.quill.scroll.descendant(v.default,C.index),Q=a(te,2),K=Q[0],W=Q[1];if(K!=null){R.linkRange=new w.Range(C.index-W,K.length());var q=v.default.formats(K.domNode);R.preview.textContent=q,R.preview.setAttribute("href",q),R.show(),R.position(R.quill.getBounds(R.linkRange));return}}else delete R.linkRange;R.hide()}})}},{key:"show",value:function(){o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),k}(d.BaseTooltip);M.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=O},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(29),o=de(a),s=i(36),l=i(38),u=i(64),h=i(65),f=de(h),d=i(66),c=de(d),y=i(67),v=de(y),w=i(37),m=i(26),g=i(39),b=i(40),S=i(56),E=de(S),I=i(68),L=de(I),O=i(27),M=de(O),T=i(69),k=de(T),A=i(70),R=de(A),C=i(71),V=de(C),Z=i(72),te=de(Z),Q=i(73),K=de(Q),W=i(13),q=de(W),P=i(74),F=de(P),U=i(75),H=de(U),B=i(57),J=de(B),re=i(41),ne=de(re),ge=i(28),be=de(ge),Ee=i(59),Ae=de(Ee),De=i(60),_e=de(De),ue=i(61),He=de(ue),oe=i(108),se=de(oe),ce=i(62),ve=de(ce);function de(Le){return Le&&Le.__esModule?Le:{default:Le}}o.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":s.AlignClass,"attributors/class/background":w.BackgroundClass,"attributors/class/color":m.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":g.FontClass,"attributors/class/size":b.SizeClass,"attributors/style/align":s.AlignStyle,"attributors/style/background":w.BackgroundStyle,"attributors/style/color":m.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":g.FontStyle,"attributors/style/size":b.SizeStyle},!0),o.default.register({"formats/align":s.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":u.IndentClass,"formats/background":w.BackgroundStyle,"formats/color":m.ColorStyle,"formats/font":g.FontClass,"formats/size":b.SizeClass,"formats/blockquote":f.default,"formats/code-block":q.default,"formats/header":c.default,"formats/list":v.default,"formats/bold":E.default,"formats/code":W.Code,"formats/italic":L.default,"formats/link":M.default,"formats/script":k.default,"formats/strike":R.default,"formats/underline":V.default,"formats/image":te.default,"formats/video":K.default,"formats/list/item":y.ListItem,"modules/formula":F.default,"modules/syntax":H.default,"modules/toolbar":J.default,"themes/bubble":se.default,"themes/snow":ve.default,"ui/icons":ne.default,"ui/picker":be.default,"ui/icon-picker":_e.default,"ui/color-picker":Ae.default,"ui/tooltip":He.default},!0),n.default=o.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var a=function(){function v(w,m){for(var g=0;g<m.length;g++){var b=m[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(w,b.key,b)}}return function(w,m,g){return m&&v(w.prototype,m),g&&v(w,g),w}}(),o=function v(w,m,g){w===null&&(w=Function.prototype);var b=Object.getOwnPropertyDescriptor(w,m);if(b===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:v(S,m,g)}else{if("value"in b)return b.value;var E=b.get;return E===void 0?void 0:E.call(g)}},s=i(0),l=u(s);function u(v){return v&&v.__esModule?v:{default:v}}function h(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function f(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function d(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var c=function(v){d(w,v);function w(){return h(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"add",value:function(g,b){if(b==="+1"||b==="-1"){var S=this.value(g)||0;b=b==="+1"?S+1:S-1}return b===0?(this.remove(g),!0):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"add",this).call(this,g,b)}},{key:"canAdd",value:function(g,b){return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,g,b)||o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,g,parseInt(b))}},{key:"value",value:function(g){return parseInt(o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,g))||void 0}}]),w}(l.default.Attributor.Class),y=new c("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(4),o=s(a);function s(d){return d&&d.__esModule?d:{default:d}}function l(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function u(d,c){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:d}function h(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var f=function(d){h(c,d);function c(){return l(this,c),u(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return c}(o.default);f.blotName="blockquote",f.tagName="blockquote",n.default=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function c(y,v){for(var w=0;w<v.length;w++){var m=v[w];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}return function(y,v,w){return v&&c(y.prototype,v),w&&c(y,w),y}}(),o=i(4),s=l(o);function l(c){return c&&c.__esModule?c:{default:c}}function u(c,y){if(!(c instanceof y))throw new TypeError("Cannot call a class as a function")}function h(c,y){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:c}function f(c,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);c.prototype=Object.create(y&&y.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(c,y):c.__proto__=y)}var d=function(c){f(y,c);function y(){return u(this,y),h(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,null,[{key:"formats",value:function(w){return this.tagName.indexOf(w.tagName)+1}}]),y}(s.default);d.blotName="header",d.tagName=["H1","H2","H3","H4","H5","H6"],n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var a=function(){function S(E,I){for(var L=0;L<I.length;L++){var O=I[L];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(E,O.key,O)}}return function(E,I,L){return I&&S(E.prototype,I),L&&S(E,L),E}}(),o=function S(E,I,L){E===null&&(E=Function.prototype);var O=Object.getOwnPropertyDescriptor(E,I);if(O===void 0){var M=Object.getPrototypeOf(E);return M===null?void 0:S(M,I,L)}else{if("value"in O)return O.value;var T=O.get;return T===void 0?void 0:T.call(L)}},s=i(0),l=c(s),u=i(4),h=c(u),f=i(25),d=c(f);function c(S){return S&&S.__esModule?S:{default:S}}function y(S,E,I){return E in S?Object.defineProperty(S,E,{value:I,enumerable:!0,configurable:!0,writable:!0}):S[E]=I,S}function v(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}function w(S,E){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:S}function m(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(S,E):S.__proto__=E)}var g=function(S){m(E,S);function E(){return v(this,E),w(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"format",value:function(L,O){L===b.blotName&&!O?this.replaceWith(l.default.create(this.statics.scope)):o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,L,O)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(L,O){return this.parent.isolate(this.offset(this.parent),this.length()),L===this.parent.statics.blotName?(this.parent.replaceWith(L,O),this):(this.parent.unwrap(),o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replaceWith",this).call(this,L,O))}}],[{key:"formats",value:function(L){return L.tagName===this.tagName?void 0:o(E.__proto__||Object.getPrototypeOf(E),"formats",this).call(this,L)}}]),E}(h.default);g.blotName="list-item",g.tagName="LI";var b=function(S){m(E,S),a(E,null,[{key:"create",value:function(L){var O=L==="ordered"?"OL":"UL",M=o(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,O);return(L==="checked"||L==="unchecked")&&M.setAttribute("data-checked",L==="checked"),M}},{key:"formats",value:function(L){if(L.tagName==="OL")return"ordered";if(L.tagName==="UL")return L.hasAttribute("data-checked")?L.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function E(I){v(this,E);var L=w(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,I)),O=function(T){if(T.target.parentNode===I){var k=L.statics.formats(I),A=l.default.find(T.target);k==="checked"?A.format("list","unchecked"):k==="unchecked"&&A.format("list","checked")}};return I.addEventListener("touchstart",O),I.addEventListener("mousedown",O),L}return a(E,[{key:"format",value:function(L,O){this.children.length>0&&this.children.tail.format(L,O)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(L,O){if(L instanceof g)o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,L,O);else{var M=O==null?this.length():O.offset(this),T=this.split(M);T.parent.insertBefore(L,T)}}},{key:"optimize",value:function(L){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,L);var O=this.next;O!=null&&O.prev===this&&O.statics.blotName===this.statics.blotName&&O.domNode.tagName===this.domNode.tagName&&O.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(O.moveChildren(this),O.remove())}},{key:"replace",value:function(L){if(L.statics.blotName!==this.statics.blotName){var O=l.default.create(this.statics.defaultChild);L.moveChildren(O),this.appendChild(O)}o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replace",this).call(this,L)}}]),E}(d.default);b.blotName="list",b.scope=l.default.Scope.BLOCK_BLOT,b.tagName=["OL","UL"],b.defaultChild="list-item",b.allowedChildren=[g],n.ListItem=g,n.default=b},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(56),o=s(a);function s(d){return d&&d.__esModule?d:{default:d}}function l(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function u(d,c){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:d}function h(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var f=function(d){h(c,d);function c(){return l(this,c),u(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return c}(o.default);f.blotName="italic",f.tagName=["EM","I"],n.default=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,w){for(var m=0;m<w.length;m++){var g=w[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,w,m){return w&&y(v.prototype,w),m&&y(v,m),v}}(),o=function y(v,w,m){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,w);if(g===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:y(b,w,m)}else{if("value"in g)return g.value;var S=g.get;return S===void 0?void 0:S.call(m)}},s=i(6),l=u(s);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function f(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function d(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var c=function(y){d(v,y);function v(){return h(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,null,[{key:"create",value:function(m){return m==="super"?document.createElement("sup"):m==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,m)}},{key:"formats",value:function(m){if(m.tagName==="SUB")return"sub";if(m.tagName==="SUP")return"super"}}]),v}(l.default);c.blotName="script",c.tagName=["SUB","SUP"],n.default=c},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(6),o=s(a);function s(d){return d&&d.__esModule?d:{default:d}}function l(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function u(d,c){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:d}function h(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var f=function(d){h(c,d);function c(){return l(this,c),u(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return c}(o.default);f.blotName="strike",f.tagName="S",n.default=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(6),o=s(a);function s(d){return d&&d.__esModule?d:{default:d}}function l(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function u(d,c){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:d}function h(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var f=function(d){h(c,d);function c(){return l(this,c),u(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return c}(o.default);f.blotName="underline",f.tagName="U",n.default=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(m,g){for(var b=0;b<g.length;b++){var S=g[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(m,S.key,S)}}return function(m,g,b){return g&&w(m.prototype,g),b&&w(m,b),m}}(),o=function w(m,g,b){m===null&&(m=Function.prototype);var S=Object.getOwnPropertyDescriptor(m,g);if(S===void 0){var E=Object.getPrototypeOf(m);return E===null?void 0:w(E,g,b)}else{if("value"in S)return S.value;var I=S.get;return I===void 0?void 0:I.call(b)}},s=i(0),l=h(s),u=i(27);function h(w){return w&&w.__esModule?w:{default:w}}function f(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function d(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w}function c(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)}var y=["alt","height","width"],v=function(w){c(m,w);function m(){return f(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return a(m,[{key:"format",value:function(b,S){y.indexOf(b)>-1?S?this.domNode.setAttribute(b,S):this.domNode.removeAttribute(b):o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,b,S)}}],[{key:"create",value:function(b){var S=o(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,b);return typeof b=="string"&&S.setAttribute("src",this.sanitize(b)),S}},{key:"formats",value:function(b){return y.reduce(function(S,E){return b.hasAttribute(E)&&(S[E]=b.getAttribute(E)),S},{})}},{key:"match",value:function(b){return/\.(jpe?g|gif|png)$/.test(b)||/^data:image\/.+;base64/.test(b)}},{key:"sanitize",value:function(b){return(0,u.sanitize)(b,["http","https","data"])?b:"//:0"}},{key:"value",value:function(b){return b.getAttribute("src")}}]),m}(l.default.Embed);v.blotName="image",v.tagName="IMG",n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(m,g){for(var b=0;b<g.length;b++){var S=g[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(m,S.key,S)}}return function(m,g,b){return g&&w(m.prototype,g),b&&w(m,b),m}}(),o=function w(m,g,b){m===null&&(m=Function.prototype);var S=Object.getOwnPropertyDescriptor(m,g);if(S===void 0){var E=Object.getPrototypeOf(m);return E===null?void 0:w(E,g,b)}else{if("value"in S)return S.value;var I=S.get;return I===void 0?void 0:I.call(b)}},s=i(4),l=i(27),u=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function f(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function d(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w}function c(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)}var y=["height","width"],v=function(w){c(m,w);function m(){return f(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return a(m,[{key:"format",value:function(b,S){y.indexOf(b)>-1?S?this.domNode.setAttribute(b,S):this.domNode.removeAttribute(b):o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,b,S)}}],[{key:"create",value:function(b){var S=o(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,b);return S.setAttribute("frameborder","0"),S.setAttribute("allowfullscreen",!0),S.setAttribute("src",this.sanitize(b)),S}},{key:"formats",value:function(b){return y.reduce(function(S,E){return b.hasAttribute(E)&&(S[E]=b.getAttribute(E)),S},{})}},{key:"sanitize",value:function(b){return u.default.sanitize(b)}},{key:"value",value:function(b){return b.getAttribute("src")}}]),m}(s.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var a=function(){function b(S,E){for(var I=0;I<E.length;I++){var L=E[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(S,L.key,L)}}return function(S,E,I){return E&&b(S.prototype,E),I&&b(S,I),S}}(),o=function b(S,E,I){S===null&&(S=Function.prototype);var L=Object.getOwnPropertyDescriptor(S,E);if(L===void 0){var O=Object.getPrototypeOf(S);return O===null?void 0:b(O,E,I)}else{if("value"in L)return L.value;var M=L.get;return M===void 0?void 0:M.call(I)}},s=i(35),l=c(s),u=i(5),h=c(u),f=i(9),d=c(f);function c(b){return b&&b.__esModule?b:{default:b}}function y(b,S){if(!(b instanceof S))throw new TypeError("Cannot call a class as a function")}function v(b,S){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:b}function w(b,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);b.prototype=Object.create(S&&S.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(b,S):b.__proto__=S)}var m=function(b){w(S,b);function S(){return y(this,S),v(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return a(S,null,[{key:"create",value:function(I){var L=o(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,I);return typeof I=="string"&&(window.katex.render(I,L,{throwOnError:!1,errorColor:"#f00"}),L.setAttribute("data-value",I)),L}},{key:"value",value:function(I){return I.getAttribute("data-value")}}]),S}(l.default);m.blotName="formula",m.className="ql-formula",m.tagName="SPAN";var g=function(b){w(S,b),a(S,null,[{key:"register",value:function(){h.default.register(m,!0)}}]);function S(){y(this,S);var E=v(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return E}return S}(d.default);n.FormulaBlot=m,n.default=g},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var a=function(){function I(L,O){for(var M=0;M<O.length;M++){var T=O[M];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(L,T.key,T)}}return function(L,O,M){return O&&I(L.prototype,O),M&&I(L,M),L}}(),o=function I(L,O,M){L===null&&(L=Function.prototype);var T=Object.getOwnPropertyDescriptor(L,O);if(T===void 0){var k=Object.getPrototypeOf(L);return k===null?void 0:I(k,O,M)}else{if("value"in T)return T.value;var A=T.get;return A===void 0?void 0:A.call(M)}},s=i(0),l=v(s),u=i(5),h=v(u),f=i(9),d=v(f),c=i(13),y=v(c);function v(I){return I&&I.__esModule?I:{default:I}}function w(I,L){if(!(I instanceof L))throw new TypeError("Cannot call a class as a function")}function m(I,L){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L&&(typeof L=="object"||typeof L=="function")?L:I}function g(I,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);I.prototype=Object.create(L&&L.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(I,L):I.__proto__=L)}var b=function(I){g(L,I);function L(){return w(this,L),m(this,(L.__proto__||Object.getPrototypeOf(L)).apply(this,arguments))}return a(L,[{key:"replaceWith",value:function(M){this.domNode.textContent=this.domNode.textContent,this.attach(),o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"replaceWith",this).call(this,M)}},{key:"highlight",value:function(M){var T=this.domNode.textContent;this.cachedText!==T&&((T.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=M(T),this.domNode.normalize(),this.attach()),this.cachedText=T)}}]),L}(y.default);b.className="ql-syntax";var S=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),E=function(I){g(L,I),a(L,null,[{key:"register",value:function(){h.default.register(S,!0),h.default.register(b,!0)}}]);function L(O,M){w(this,L);var T=m(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,O,M));if(typeof T.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var k=null;return T.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(k),k=setTimeout(function(){T.highlight(),k=null},T.options.interval)}),T.highlight(),T}return a(L,[{key:"highlight",value:function(){var M=this;if(!this.quill.selection.composing){this.quill.update(h.default.sources.USER);var T=this.quill.getSelection();this.quill.scroll.descendants(b).forEach(function(k){k.highlight(M.options.highlight)}),this.quill.update(h.default.sources.SILENT),T!=null&&this.quill.setSelection(T,h.default.sources.SILENT)}}}]),L}(d.default);E.DEFAULTS={highlight:function(){return window.hljs==null?null:function(I){var L=window.hljs.highlightAuto(I);return L.value}}(),interval:1e3},n.CodeBlock=b,n.CodeToken=S,n.default=E},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var a=function L(O,M,T){O===null&&(O=Function.prototype);var k=Object.getOwnPropertyDescriptor(O,M);if(k===void 0){var A=Object.getPrototypeOf(O);return A===null?void 0:L(A,M,T)}else{if("value"in k)return k.value;var R=k.get;return R===void 0?void 0:R.call(T)}},o=function(){function L(O,M){for(var T=0;T<M.length;T++){var k=M[T];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(O,k.key,k)}}return function(O,M,T){return M&&L(O.prototype,M),T&&L(O,T),O}}(),s=i(3),l=w(s),u=i(8),h=w(u),f=i(43),d=w(f),c=i(15),y=i(41),v=w(y);function w(L){return L&&L.__esModule?L:{default:L}}function m(L,O){if(!(L instanceof O))throw new TypeError("Cannot call a class as a function")}function g(L,O){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:L}function b(L,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);L.prototype=Object.create(O&&O.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(L,O):L.__proto__=O)}var S=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],E=function(L){b(O,L);function O(M,T){m(this,O),T.modules.toolbar!=null&&T.modules.toolbar.container==null&&(T.modules.toolbar.container=S);var k=g(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,M,T));return k.quill.container.classList.add("ql-bubble"),k}return o(O,[{key:"extendToolbar",value:function(T){this.tooltip=new I(this.quill,this.options.bounds),this.tooltip.root.appendChild(T.container),this.buildButtons([].slice.call(T.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(T.container.querySelectorAll("select")),v.default)}}]),O}(d.default);E.DEFAULTS=(0,l.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(O){O?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var I=function(L){b(O,L);function O(M,T){m(this,O);var k=g(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,M,T));return k.quill.on(h.default.events.EDITOR_CHANGE,function(A,R,C,V){if(A===h.default.events.SELECTION_CHANGE)if(R!=null&&R.length>0&&V===h.default.sources.USER){k.show(),k.root.style.left="0px",k.root.style.width="",k.root.style.width=k.root.offsetWidth+"px";var Z=k.quill.getLines(R.index,R.length);if(Z.length===1)k.position(k.quill.getBounds(R));else{var te=Z[Z.length-1],Q=k.quill.getIndex(te),K=Math.min(te.length()-1,R.index+R.length-Q),W=k.quill.getBounds(new c.Range(Q,K));k.position(W)}}else document.activeElement!==k.textbox&&k.quill.hasFocus()&&k.hide()}),k}return o(O,[{key:"listen",value:function(){var T=this;a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){T.root.classList.remove("ql-editing")}),this.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!T.root.classList.contains("ql-hidden")){var k=T.quill.getSelection();k!=null&&T.position(T.quill.getBounds(k))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(T){var k=a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"position",this).call(this,T),A=this.root.querySelector(".ql-tooltip-arrow");if(A.style.marginLeft="",k===0)return k;A.style.marginLeft=-1*k-A.offsetWidth/2+"px"}}]),O}(f.BaseTooltip);I.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=I,n.default=E},function(r,n,i){r.exports=i(63)}]).default})})(h4);var l9=h4.exports,u9=Yn&&Yn.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yh=Yn&&Yn.__assign||function(){return yh=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},yh.apply(this,arguments)},c9=Yn&&Yn.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n},Zh=Yn&&Yn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Yi=Zh(ie),f9=Zh(y1),Hu=Zh(s9),k5=Zh(l9),d9=function(t){u9(e,t);function e(r){var n=t.call(this,r)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(a,o,s,l){var u,h,f,d;a==="text-change"?(h=(u=n).onEditorChangeText)===null||h===void 0||h.call(u,n.editor.root.innerHTML,o,l,n.unprivilegedEditor):a==="selection-change"&&((d=(f=n).onEditorChangeSelection)===null||d===void 0||d.call(f,o,l,n.unprivilegedEditor))};var i=n.isControlled()?r.value:r.defaultValue;return n.value=i??"",n}return e.prototype.validateProps=function(r){var n;if(Yi.default.Children.count(r.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Yi.default.Children.count(r.children)){var i=Yi.default.Children.only(r.children);if(((n=i)===null||n===void 0?void 0:n.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&r.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(r,n){var i=this,a;if(this.validateProps(r),!this.editor||this.state.generation!==n.generation)return!0;if("value"in r){var o=this.getEditorContents(),s=(a=r.value,a??"");this.isEqualValue(s,o)||this.setEditorContents(this.editor,s)}return r.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,r.readOnly),c9(this.cleanProps,this.dirtyProps).some(function(l){return!Hu.default(r[l],i.props[l])})},e.prototype.shouldComponentRegenerate=function(r){var n=this;return this.dirtyProps.some(function(i){return!Hu.default(r[i],n.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(r,n){var i=this;if(this.editor&&this.shouldComponentRegenerate(r)){var a=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:a,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){var s=this.regenerationSnapshot,a=s.delta,l=s.selection;delete this.regenerationSnapshot,this.instantiateEditor();var u=this.editor;u.setContents(a),N5(function(){return i.setEditorSelection(u,l)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(r,n){var i=new k5.default(r,n);return n.tabIndex!=null&&this.setEditorTabIndex(i,n.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(r){this.unprivilegedEditor=this.makeUnprivilegedEditor(r),r.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(r){r.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(r){return r&&r.ops},e.prototype.isEqualValue=function(r,n){return this.isDelta(r)&&this.isDelta(n)?Hu.default(r.ops,n.ops):Hu.default(r,n)},e.prototype.setEditorContents=function(r,n){var i=this;this.value=n;var a=this.getEditorSelection();typeof n=="string"?r.setContents(r.clipboard.convert(n)):r.setContents(n),N5(function(){return i.setEditorSelection(r,a)})},e.prototype.setEditorSelection=function(r,n){if(this.selection=n,n){var i=r.getLength();n.index=Math.max(0,Math.min(n.index,i-1)),n.length=Math.max(0,Math.min(n.length,i-1-n.index)),r.setSelection(n)}},e.prototype.setEditorTabIndex=function(r,n){var i,a;!((a=(i=r)===null||i===void 0?void 0:i.scroll)===null||a===void 0)&&a.domNode&&(r.scroll.domNode.tabIndex=n)},e.prototype.setEditorReadOnly=function(r,n){n?r.disable():r.enable()},e.prototype.makeUnprivilegedEditor=function(r){var n=r;return{getHTML:function(){return n.root.innerHTML},getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var r=f9.default.findDOMNode(this.editingArea);if(!r)throw new Error("Cannot find element for editing area");if(r.nodeType===3)throw new Error("Editing area cannot be a text node");return r},e.prototype.renderEditingArea=function(){var r=this,n=this.props,i=n.children,a=n.preserveWhitespace,o=this.state.generation,s={key:o,ref:function(l){r.editingArea=l}};return Yi.default.Children.count(i)?Yi.default.cloneElement(Yi.default.Children.only(i),s):a?Yi.default.createElement("pre",yh({},s)):Yi.default.createElement("div",yh({},s))},e.prototype.render=function(){var r;return Yi.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(r=this.props.className,r??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(r,n,i,a){var o,s;if(this.editor){var l=this.isDelta(this.value)?a.getContents():a.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=l,(s=(o=this.props).onChange)===null||s===void 0||s.call(o,r,n,i,a))}},e.prototype.onEditorChangeSelection=function(r,n,i){var a,o,s,l,u,h;if(this.editor){var f=this.getEditorSelection(),d=!f&&r,c=f&&!r;Hu.default(r,f)||(this.selection=r,(o=(a=this.props).onChangeSelection)===null||o===void 0||o.call(a,r,n,i),d?(l=(s=this.props).onFocus)===null||l===void 0||l.call(s,r,n,i):c&&((h=(u=this.props).onBlur)===null||h===void 0||h.call(u,f,n,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=k5.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(Yi.default.Component);function N5(t){Promise.resolve().then(t)}var h9=d9;const p4=wh(h9),ya=p4.Quill;if(ya){const t=ya.import("formats/image");class e extends t{static create(l){var h;const u=super.create(typeof l=="string"?l:l.src);return typeof l=="object"&&(l.alt&&u.setAttribute("alt",l.alt),l.className&&u.setAttribute("class",l.className),(h=l.dataset)!=null&&h.secureMetadata&&u.setAttribute("data-secure-metadata",l.dataset.secureMetadata)),u}static value(l){return{src:l.getAttribute("src"),alt:l.getAttribute("alt"),className:l.getAttribute("class"),dataset:{secureMetadata:l.getAttribute("data-secure-metadata")}}}}e.blotName="image",e.tagName="IMG",ya.register(e,!0);const r=ya.import("parchment"),n=new r.Attributor.Style("width","width"),i=new r.Attributor.Style("float","float"),a=new r.Attributor.Style("margin","margin");ya.register(n,!0),ya.register(i,!0),ya.register(a,!0);const o=ya.import("attributors/style/align");ya.register(o,!0)}const p9={serif:"font-serif",sans:"font-sans",mono:"font-mono"},m9=ie.forwardRef(({entry:t,onSave:e,onWordCountChange:r,onCharacterCountChange:n,editorFont:i},a)=>{const[o,s]=ie.useState(""),[l,u]=ie.useState(""),[h,f]=ie.useState(new Date),[d,c]=ie.useState(!1),y=ie.useRef(null),v=ie.useRef("INITIAL_MOUNT"),{addToast:w}=Uh(),{key:m,decryptBinary:g}=ps(),b=ie.useCallback(async(L,O)=>{if(!m||!L.includes("secure-diary-image"))return;const T=O.root.querySelectorAll("img.secure-diary-image");for(let k=0;k<T.length;k++){const A=T[k],R=A.getAttribute("src"),C=A.getAttribute("data-secure-metadata")||A.getAttribute("alt");if(!(R!=null&&R.startsWith("blob:")||!C))try{const V=JSON.parse(C);if(V&&V.path&&V.iv){A.style.opacity="0.5";const{data:Z,error:te}=await Mt.storage.from("diary-images").createSignedUrl(V.path,60);if(te)throw te;const Q=await fetch(Z.signedUrl);if(!Q.ok)throw new Error(`Failed to fetch image blob: ${Q.status}`);const K=await Q.arrayBuffer(),W=await g(m,K,V.iv),q=new Blob([W],{type:"image/webp"}),P=URL.createObjectURL(q);A.src=P,A.style.opacity="1"}}catch(V){console.error("Failed to decrypt image in editor",V)}}},[m,g]);ie.useEffect(()=>{const L=(t==null?void 0:t.id)||"draft";if(v.current!==L)if(v.current=L,t){s(t.title),u(t.content),f(new Date(t.created_at));const O=t.content.includes("secure-diary-image");c(O),setTimeout(async()=>{y.current&&O&&(await b(t.content,y.current.getEditor()),c(!1))},100)}else s("Today's diary entry..."),u(""),f(new Date),c(!1)},[t,b]),ie.useEffect(()=>{const L=l.replace(/<[^>]*>?/gm,""),O=L.trim().split(/\s+/).filter(Boolean),M=O.length===1&&O[0]===""?0:O.length;r(M),n(L.length)},[l,r,n]);const S=ie.useCallback(()=>{const L=!l||l.replace(/<(.|\n)*?>/g,"").trim().length===0;if(o.trim()===""||L){w("Please provide a title and some content for your entry.","error");return}e({...t||{},title:o,content:l,created_at:h.toISOString(),tags:t==null?void 0:t.tags,mood:t==null?void 0:t.mood})},[o,l,h,t,e,w]);ie.useImperativeHandle(a,()=>({save:S,getEditor:()=>{var L;return(L=y.current)==null?void 0:L.getEditor()}}),[S]);const E=ie.useMemo(()=>({toolbar:!1}),[]),I=p9[i];return x.jsxs("div",{className:`h-full flex flex-col paper-canvas rounded-lg overflow-hidden ${I}`,children:[x.jsx("div",{className:"p-4 sm:p-6 md:px-8 border-b border-slate-200/50 dark:border-slate-700/50 flex-shrink-0",children:x.jsx("input",{type:"text",value:o,onChange:L=>s(L.target.value),className:"w-full text-3xl font-bold bg-transparent focus:outline-none focus:ring-0 border-none p-0 text-slate-800 dark:text-slate-100 placeholder:text-slate-400",placeholder:"Today's diary entry..."})}),x.jsxs("div",{className:"flex-grow overflow-y-auto relative",children:[d&&x.jsxs("div",{className:"absolute inset-0 z-10 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm p-8 space-y-6 animate-fade-in",children:[x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4 animate-pulse"}),x.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full animate-pulse"}),x.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-5/6 animate-pulse"})]}),x.jsx("div",{className:"h-64 bg-slate-200 dark:bg-slate-700 rounded-lg w-full animate-pulse flex items-center justify-center",children:x.jsx("svg",{className:"w-12 h-12 text-slate-300 dark:text-slate-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full animate-pulse"}),x.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-4/5 animate-pulse"})]})]}),x.jsx(p4,{ref:y,theme:"snow",value:l,onChange:u,className:`prose-editor transition-opacity duration-500 ${d?"opacity-0":"opacity-100"}`,placeholder:"Start writing here...",modules:E})]})]})}),g9=({onRecordingComplete:t,existingBlob:e,onDelete:r})=>{const[n,i]=ie.useState(!1),[a,o]=ie.useState(0),s=ie.useRef(null),l=ie.useRef([]),u=ie.useRef(null);ie.useEffect(()=>()=>{u.current&&clearInterval(u.current)},[]);const h=async()=>{try{const c=await navigator.mediaDevices.getUserMedia({audio:!0});let y="audio/webm";MediaRecorder.isTypeSupported("audio/mp4")?y="audio/mp4":MediaRecorder.isTypeSupported("audio/webm;codecs=opus")&&(y="audio/webm;codecs=opus"),s.current=new MediaRecorder(c,{mimeType:y}),l.current=[],s.current.ondataavailable=v=>{v.data.size>0&&l.current.push(v.data)},s.current.onstop=()=>{var m;const v=((m=s.current)==null?void 0:m.mimeType)||y,w=new Blob(l.current,{type:v});t(w),l.current=[],c.getTracks().forEach(g=>g.stop())},s.current.start(),i(!0),o(0),u.current=window.setInterval(()=>{o(v=>v+1)},1e3)}catch(c){console.error("Error accessing microphone:",c),alert("Could not access microphone. Please check permissions.")}},f=()=>{s.current&&n&&(s.current.stop(),i(!1),u.current&&clearInterval(u.current))},d=c=>{const y=Math.floor(c/60),v=c%60;return`${y.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`};return e?x.jsxs("div",{className:"w-full p-3 rounded-md bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800 flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-100 dark:bg-indigo-800 flex items-center justify-center text-indigo-600 dark:text-indigo-300",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})})}),x.jsx("span",{className:"text-sm font-medium text-indigo-800 dark:text-indigo-300",children:"Audio Note Added"})]}),x.jsx("button",{onClick:r,className:"p-1.5 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full transition-colors",title:"Delete Audio",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}):x.jsx("div",{className:"w-full",children:n?x.jsxs("div",{className:"w-full flex items-center justify-between p-2 rounded-md bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("div",{className:"relative flex h-3 w-3",children:[x.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),x.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}),x.jsx("span",{className:"text-sm font-mono font-medium text-red-600 dark:text-red-300",children:d(a)})]}),x.jsx("button",{onClick:f,className:"p-1.5 rounded-full bg-red-100 text-red-600 hover:bg-red-200 dark:bg-red-800 dark:text-red-200 dark:hover:bg-red-700 transition-colors",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})})})]}):x.jsxs("button",{onClick:h,className:"w-full flex items-center justify-center gap-3 p-2 rounded-md text-sm text-slate-700 dark:text-slate-300 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 transition-colors",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})}),x.jsx("span",{children:"Record Audio"})]})})},v9=["","","","","","","",""],y9=({entry:t,onUpdateEntry:e,editorFont:r,onFontChange:n,onImageUpload:i,isUploadingImage:a,selectedImageFormat:o,onImageFormatChange:s,availableJournals:l})=>{const u=typeof t=="object"?t.mood:void 0,h=typeof t=="object"?t.tags||[]:[],f=typeof t=="object"&&t.journal?t.journal:"Personal",d=typeof t=="object"?t.tempAudioBlob:void 0,[c,y]=ie.useState(h.join(", ")),v=ie.useRef(null);ie.useEffect(()=>{const L=c.split(",").map(T=>T.trim()).filter(Boolean),O=h;JSON.stringify(L)!==JSON.stringify(O)&&y(O.join(", "))},[h]);const w=()=>{var L;(L=v.current)==null||L.click()},m=L=>{var M;const O=(M=L.target.files)==null?void 0:M[0];O&&i(O),v.current&&(v.current.value="")},g=L=>{y(L);const O=L.split(",").map(M=>M.trim()).filter(Boolean);e({tags:O})},b=L=>{e({mood:L===u?void 0:L})},S=L=>{e({journal:L})},E=L=>{e({tempAudioBlob:L})},I=()=>{e({tempAudioBlob:void 0})};return x.jsxs("aside",{className:"w-64 h-full bg-white/80 dark:bg-slate-900/50 border-l border-[#EAE1D6] dark:border-slate-800 p-4 space-y-6 flex-shrink-0 overflow-y-auto",children:[x.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Tools"}),x.jsx("div",{className:"space-y-4",children:x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Journal"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"text",list:"journal-options",value:f,onChange:L=>S(L.target.value),className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded-md bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"Select or type..."}),x.jsxs("datalist",{id:"journal-options",children:[l.map(L=>x.jsx("option",{value:L},L)),!l.includes("Personal")&&x.jsx("option",{value:"Personal"}),!l.includes("Work")&&x.jsx("option",{value:"Work"}),!l.includes("Ideas")&&x.jsx("option",{value:"Ideas"})]})]}),x.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Type a new name to create a book."})]})}),x.jsxs("div",{className:"space-y-4 pt-2 border-t border-slate-200 dark:border-slate-700",children:[x.jsx(g9,{onRecordingComplete:E,existingBlob:d,onDelete:I}),x.jsx("input",{type:"file",ref:v,onChange:m,className:"hidden",accept:"image/*"}),x.jsx("button",{onClick:w,disabled:a,className:"w-full flex items-center justify-center gap-3 p-2 rounded-md text-sm text-slate-700 dark:text-slate-300 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:a?x.jsxs(x.Fragment,{children:[x.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),x.jsx("span",{children:"Uploading..."})]}):x.jsxs(x.Fragment,{children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),x.jsx("span",{children:"Insert Image"})]})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Font Style"}),x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsx("button",{onClick:()=>n("serif"),className:`w-full text-left p-2 rounded-md text-sm font-serif transition-colors ${r==="serif"?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Serif (Lora)"}),x.jsx("button",{onClick:()=>n("sans"),className:`w-full text-left p-2 rounded-md text-sm font-sans transition-colors ${r==="sans"?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Sans-Serif"}),x.jsx("button",{onClick:()=>n("mono"),className:`w-full text-left p-2 rounded-md text-sm font-mono transition-colors ${r==="mono"?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Monospace"})]})]})]}),o&&x.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6 space-y-4",children:[x.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Image Tools"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Size"}),x.jsx("div",{className:"grid grid-cols-4 gap-1",children:["25%","50%","75%","100%"].map(L=>x.jsx("button",{onClick:()=>s({width:L}),className:`p-2 text-xs rounded-md ${o.width===L?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:L},L))})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Alignment"}),x.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[x.jsx("button",{onClick:()=>s({align:!1,float:"left",margin:"0.5em 1em 0.5em 0"}),className:`p-2 rounded-md flex justify-center ${o.float==="left"?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M2 5a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zM2 9a1 1 0 011-1h5a1 1 0 110 2H3a1 1 0 01-1-1zm7 4a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z",clipRule:"evenodd"})})}),x.jsx("button",{onClick:()=>s({align:"center",float:!1,margin:!1}),className:`p-2 rounded-md flex justify-center ${o.align==="center"?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M2 5a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zM2 9a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zm1 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),x.jsx("button",{onClick:()=>s({align:!1,float:"right",margin:"0.5em 0 0.5em 1em"}),className:`p-2 rounded-md flex justify-center ${o.float==="right"?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M2 5a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zm0 4a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zm7 4a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z",clipRule:"evenodd"})})})]})]})]}),x.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6 space-y-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Mood"}),x.jsx("div",{className:"grid grid-cols-4 gap-2",children:v9.map(L=>x.jsx("button",{type:"button",onClick:()=>b(L),className:`text-2xl p-2 rounded-md transition-all ${u===L?"bg-indigo-100 dark:bg-indigo-500/50 scale-110":"hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:L},L))})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Tags"}),x.jsx("textarea",{value:c,onChange:L=>g(L.target.value),placeholder:"travel, work...",className:"w-full h-20 p-2 text-sm rounded-md bg-slate-100 dark:bg-slate-800 border-transparent focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]})]})},w9=({wordCount:t,characterCount:e,saveStatus:r})=>{const n={encrypting:{text:"Encrypting...",classes:"text-yellow-600 dark:text-yellow-400"},synced:{text:"Synced",classes:"text-green-600 dark:text-green-400"},error:{text:"Save Error",classes:"text-red-600 dark:text-red-400"}};return x.jsx("footer",{className:"bg-white/80 dark:bg-slate-900/50 backdrop-blur-sm border-t border-[#EAE1D6] dark:border-slate-800 h-10 flex-shrink-0",children:x.jsxs("div",{className:"h-full flex items-center justify-between px-6 text-sm text-slate-500 dark:text-slate-400",children:[x.jsx("div",{children:x.jsxs("span",{children:[t," words / ",e," characters"]})}),x.jsx("div",{className:`font-semibold ${n[r].classes}`,children:n[r].text})]})})},b9=(t,e=1200,r=.8)=>new Promise((n,i)=>{const a=new Image,o=URL.createObjectURL(t);a.src=o,a.onload=()=>{URL.revokeObjectURL(o);let s=a.width,l=a.height;s>e&&(l=Math.round(l*e/s),s=e);const u=document.createElement("canvas");u.width=s,u.height=l;const h=u.getContext("2d");if(!h){i(new Error("Could not get canvas context"));return}h.drawImage(a,0,0,s,l),u.toBlob(f=>{f?n({blob:f,extension:"webp"}):i(new Error("Image compression failed"))},"image/webp",r)},a.onerror=s=>{URL.revokeObjectURL(o),i(s)}}),x9="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",E5=()=>{const{id:t}=Kb(),{entries:e,saveEntry:r,loadEntryContent:n,key:i,encryptBinary:a,session:o,uniqueJournals:s}=zl(),[l,u]=ie.useState(null),[h,f]=ie.useState(0),[d,c]=ie.useState(0),[y,v]=ie.useState("serif"),[w,m]=ie.useState(!1),[g,b]=ie.useState(null),S=ie.useRef(null);ie.useEffect(()=>{if(!t)u("new");else{const L=e.find(O=>O.id===t);L&&(u(L),!L.isDecrypted&&!L.isLoading&&n(t))}},[t,e,n]),ie.useEffect(()=>{if(!S.current||!l)return;const L=S.current.getEditor();if(!L)return;const O=M=>{if(M&&M.length===0){const[T]=L.getLeaf(M.index);if(T&&T.statics.blotName==="image"){const k=L.getFormat(M.index,1),A=L.getFormat(M.index-1,1);b({width:k.width,align:A.align,float:k.float})}else b(null)}else M||b(null)};return L.on("selection-change",O),()=>{L.off("selection-change",O)}},[l]);const E=async L=>{var M;const O=(M=S.current)==null?void 0:M.getEditor();if(!(!O||!i)){m(!0);try{const{blob:T}=await b9(L),k=await T.arrayBuffer(),{iv:A,data:R}=await a(i,k),C=`${o.user.id}/${Date.now()}.bin`,V=new Blob([R],{type:"application/octet-stream"}),{error:Z}=await Mt.storage.from("diary-images").upload(C,V,{contentType:"application/octet-stream",upsert:!1});if(Z)throw Z;const te=O.getSelection(!0)||{index:O.getLength(),length:0},Q=JSON.stringify({path:C,iv:A});O.insertEmbed(te.index,"image",{src:x9,alt:"Secure Image",className:"secure-diary-image",dataset:{secureMetadata:Q}},"user"),O.setSelection(te.index+1,0,"user"),setTimeout(()=>{var K,W;try{const q=(W=(K=S.current)==null?void 0:K.getEditor())==null?void 0:W.root;if(!q)return;const P=q.querySelectorAll("img.secure-diary-image");let F=null;for(let U=0;U<P.length;U++){const H=P[U];if(H.getAttribute("data-secure-metadata")===Q){F=H;break}}if(F){const U=URL.createObjectURL(T);F.src=U,F.style.opacity="1"}}catch(q){console.error("Preview error:",q)}},50)}catch(T){console.error("Error uploading image:",T)}finally{m(!1)}}},I=L=>{var M;const O=(M=S.current)==null?void 0:M.getEditor();O&&(Object.keys(L).forEach(T=>{O.format(T,L[T],"user")}),setTimeout(()=>{const T=O.getSelection();T&&O.emitter.emit("selection-change",T,T,"user")},0))};return l?x.jsxs("div",{className:"h-full flex flex-row relative",children:[x.jsxs("div",{className:"flex-1 h-full overflow-hidden flex flex-col",children:[x.jsx(m9,{ref:S,entry:l==="new"?void 0:l,onSave:r,onWordCountChange:f,onCharacterCountChange:c,editorFont:y},t||"new"),x.jsx(w9,{wordCount:h,characterCount:d,saveStatus:"synced"})]}),x.jsx("div",{className:"w-64 border-l border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 hidden lg:block",children:x.jsx(y9,{entry:l,onUpdateEntry:L=>{u(l==="new"?O=>({id:"",owner_id:"",title:"",content:"",created_at:new Date().toISOString(),...typeof O=="object"?O:{},...L}):O=>({...O,...L}))},editorFont:y,onFontChange:v,onImageUpload:E,isUploadingImage:w,selectedImageFormat:g,onImageFormatChange:I,availableJournals:s})})]}):x.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading editor..."})},_9=({children:t,session:e})=>{const r=qi();return e?x.jsx(x.Fragment,{children:t}):x.jsx(Rm,{to:"/login",state:{from:r},replace:!0})},S9=()=>{const[t,e]=ie.useState(null),[r,n]=ie.useState(!0),[i,a]=ie.useState(()=>localStorage.getItem("theme")||"light");ie.useEffect(()=>{Mt.auth.getSession().then(({data:{session:l}})=>{e(l),n(!1)});const{data:{subscription:s}}=Mt.auth.onAuthStateChange((l,u)=>{e(u)});return()=>s.unsubscribe()},[]),ie.useEffect(()=>{const s=window.document.documentElement;i==="dark"?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("theme",i)},[i]),ie.useEffect(()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/diary/sw.js",{scope:"/diary/"}).then(s=>{console.log("ServiceWorker registration successful with scope: ",s.scope)}).catch(s=>{console.log("ServiceWorker registration failed: ",s)})})},[]);const o=()=>{a(s=>s==="light"?"dark":"light")};return r?x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:x.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Loading..."})}):x.jsx(PA,{children:x.jsx(HA,{children:x.jsx(HN,{children:x.jsxs(xN,{children:[x.jsx(On,{path:"/",element:t?x.jsx(Rm,{to:"/app"}):x.jsx(RA,{})}),x.jsx(On,{path:"/login",element:t?x.jsx(Rm,{to:"/app"}):x.jsx(CA,{})}),x.jsx(On,{path:"/privacy",element:x.jsx(IA,{})}),x.jsx(On,{path:"/terms",element:x.jsx(DA,{})}),x.jsxs(On,{path:"/app",element:x.jsx(_9,{session:t,children:x.jsx(SO,{session:t,theme:i,onToggleTheme:o})}),children:[x.jsx(On,{index:!0,element:x.jsx(OO,{})}),x.jsx(On,{path:"calendar",element:x.jsx(PO,{})}),x.jsx(On,{path:"search",element:x.jsx(RO,{})}),x.jsx(On,{path:"profile",element:x.jsx(uL,{})}),x.jsx(On,{path:"entry/:id",element:x.jsx(RL,{})}),x.jsx(On,{path:"new",element:x.jsx(E5,{})}),x.jsx(On,{path:"edit/:id",element:x.jsx(E5,{})})]}),x.jsx(On,{path:"*",element:x.jsx(MA,{})})]})})})})},m4=document.getElementById("root");if(!m4)throw new Error("Could not find root element to mount to");const k9=q0.createRoot(m4);k9.render(x.jsx(M5.StrictMode,{children:x.jsx(S9,{})}));export{Tt as _,Yn as c,wh as g};
