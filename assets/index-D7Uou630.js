import Dm from"compromise";import{BlobWriter as K_,ZipWriter as Y_,TextReader as Mm}from"@zip.js/zip.js";function J_(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function X_(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var By={exports:{}},Qd={},Fy={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mc=Symbol.for("react.element"),Q_=Symbol.for("react.portal"),Z_=Symbol.for("react.fragment"),e4=Symbol.for("react.strict_mode"),t4=Symbol.for("react.profiler"),r4=Symbol.for("react.provider"),n4=Symbol.for("react.context"),i4=Symbol.for("react.forward_ref"),a4=Symbol.for("react.suspense"),o4=Symbol.for("react.memo"),s4=Symbol.for("react.lazy"),Bm=Symbol.iterator;function l4(t){return t===null||typeof t!="object"?null:(t=Bm&&t[Bm]||t["@@iterator"],typeof t=="function"?t:null)}var qy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uy=Object.assign,zy={};function Sl(t,e,r){this.props=t,this.context=e,this.refs=zy,this.updater=r||qy}Sl.prototype.isReactComponent={};Sl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $y(){}$y.prototype=Sl.prototype;function Y1(t,e,r){this.props=t,this.context=e,this.refs=zy,this.updater=r||qy}var J1=Y1.prototype=new $y;J1.constructor=Y1;Uy(J1,Sl.prototype);J1.isPureReactComponent=!0;var Fm=Array.isArray,Hy=Object.prototype.hasOwnProperty,X1={current:null},Wy={key:!0,ref:!0,__self:!0,__source:!0};function Vy(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Hy.call(e,n)&&!Wy.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:mc,type:t,key:a,ref:o,props:i,_owner:X1.current}}function u4(t,e){return{$$typeof:mc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Q1(t){return typeof t=="object"&&t!==null&&t.$$typeof===mc}function c4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var qm=/\/+/g;function hp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?c4(""+t.key):e.toString(36)}function Gf(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case mc:case Q_:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+hp(o,0):n,Fm(i)?(r="",t!=null&&(r=t.replace(qm,"$&/")+"/"),Gf(i,e,r,"",function(c){return c})):i!=null&&(Q1(i)&&(i=u4(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(qm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Fm(t))for(var s=0;s<t.length;s++){a=t[s];var l=n+hp(a,s);o+=Gf(a,e,r,l,i)}else if(l=l4(t),typeof l=="function")for(t=l.call(t),s=0;!(a=t.next()).done;)a=a.value,l=n+hp(a,s++),o+=Gf(a,e,r,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ff(t,e,r){if(t==null)return t;var n=[],i=0;return Gf(t,n,"","",function(a){return e.call(r,a,i++)}),n}function f4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var An={current:null},Kf={transition:null},d4={ReactCurrentDispatcher:An,ReactCurrentBatchConfig:Kf,ReactCurrentOwner:X1};function Gy(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:ff,forEach:function(t,e,r){ff(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ff(t,function(){e++}),e},toArray:function(t){return ff(t,function(e){return e})||[]},only:function(t){if(!Q1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};kt.Component=Sl;kt.Fragment=Z_;kt.Profiler=t4;kt.PureComponent=Y1;kt.StrictMode=e4;kt.Suspense=a4;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d4;kt.act=Gy;kt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Uy({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=X1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)Hy.call(e,l)&&!Wy.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];n.children=s}return{$$typeof:mc,type:t.type,key:i,ref:a,props:n,_owner:o}};kt.createContext=function(t){return t={$$typeof:n4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:r4,_context:t},t.Consumer=t};kt.createElement=Vy;kt.createFactory=function(t){var e=Vy.bind(null,t);return e.type=t,e};kt.createRef=function(){return{current:null}};kt.forwardRef=function(t){return{$$typeof:i4,render:t}};kt.isValidElement=Q1;kt.lazy=function(t){return{$$typeof:s4,_payload:{_status:-1,_result:t},_init:f4}};kt.memo=function(t,e){return{$$typeof:o4,type:t,compare:e===void 0?null:e}};kt.startTransition=function(t){var e=Kf.transition;Kf.transition={};try{t()}finally{Kf.transition=e}};kt.unstable_act=Gy;kt.useCallback=function(t,e){return An.current.useCallback(t,e)};kt.useContext=function(t){return An.current.useContext(t)};kt.useDebugValue=function(){};kt.useDeferredValue=function(t){return An.current.useDeferredValue(t)};kt.useEffect=function(t,e){return An.current.useEffect(t,e)};kt.useId=function(){return An.current.useId()};kt.useImperativeHandle=function(t,e,r){return An.current.useImperativeHandle(t,e,r)};kt.useInsertionEffect=function(t,e){return An.current.useInsertionEffect(t,e)};kt.useLayoutEffect=function(t,e){return An.current.useLayoutEffect(t,e)};kt.useMemo=function(t,e){return An.current.useMemo(t,e)};kt.useReducer=function(t,e,r){return An.current.useReducer(t,e,r)};kt.useRef=function(t){return An.current.useRef(t)};kt.useState=function(t){return An.current.useState(t)};kt.useSyncExternalStore=function(t,e,r){return An.current.useSyncExternalStore(t,e,r)};kt.useTransition=function(){return An.current.useTransition()};kt.version="18.3.1";Fy.exports=kt;var we=Fy.exports;const Ky=Xd(we);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h4=we,p4=Symbol.for("react.element"),g4=Symbol.for("react.fragment"),m4=Object.prototype.hasOwnProperty,v4=h4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y4={key:!0,ref:!0,__self:!0,__source:!0};function Yy(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)m4.call(e,n)&&!y4.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:p4,type:t,key:a,ref:o,props:i,_owner:v4.current}}Qd.Fragment=g4;Qd.jsx=Yy;Qd.jsxs=Yy;By.exports=Qd;var S=By.exports,g0={},Jy={exports:{}},ri={},Xy={exports:{}},Qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,Y){var W=Q.length;Q.push(Y);e:for(;0<W;){var q=W-1>>>1,L=Q[q];if(0<i(L,Y))Q[q]=Y,Q[W]=L,W=q;else break e}}function r(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var Y=Q[0],W=Q.pop();if(W!==Y){Q[0]=W;e:for(var q=0,L=Q.length,M=L>>>1;q<M;){var U=2*(q+1)-1,H=Q[U],F=U+1,J=Q[F];if(0>i(H,W))F<L&&0>i(J,H)?(Q[q]=J,Q[F]=W,q=F):(Q[q]=H,Q[U]=W,q=U);else if(F<L&&0>i(J,W))Q[q]=J,Q[F]=W,q=F;else break e}}return Y}function i(Q,Y){var W=Q.sortIndex-Y.sortIndex;return W!==0?W:Q.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],c=[],p=1,d=null,f=3,u=!1,y=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(Q){for(var Y=r(c);Y!==null;){if(Y.callback===null)n(c);else if(Y.startTime<=Q)n(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=r(c)}}function x(Q){if(v=!1,_(Q),!y)if(r(l)!==null)y=!0,ee(A);else{var Y=r(c);Y!==null&&te(x,Y.startTime-Q)}}function A(Q,Y){y=!1,v&&(v=!1,g(j),j=-1),u=!0;var W=f;try{for(_(Y),d=r(l);d!==null&&(!(d.expirationTime>Y)||Q&&!k());){var q=d.callback;if(typeof q=="function"){d.callback=null,f=d.priorityLevel;var L=q(d.expirationTime<=Y);Y=t.unstable_now(),typeof L=="function"?d.callback=L:d===r(l)&&n(l),_(Y)}else n(l);d=r(l)}if(d!==null)var M=!0;else{var U=r(c);U!==null&&te(x,U.startTime-Y),M=!1}return M}finally{d=null,f=W,u=!1}}var D=!1,T=null,j=-1,B=5,P=-1;function k(){return!(t.unstable_now()-P<B)}function E(){if(T!==null){var Q=t.unstable_now();P=Q;var Y=!0;try{Y=T(!0,Q)}finally{Y?C():(D=!1,T=null)}}else D=!1}var C;if(typeof m=="function")C=function(){m(E)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,V=I.port2;I.port1.onmessage=E,C=function(){V.postMessage(null)}}else C=function(){b(E,0)};function ee(Q){T=Q,D||(D=!0,C())}function te(Q,Y){j=b(function(){Q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){y||u||(y=!0,ee(A))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(Q){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var W=f;f=Y;try{return Q()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,Y){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var W=f;f=Q;try{return Y()}finally{f=W}},t.unstable_scheduleCallback=function(Q,Y,W){var q=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?q+W:q):W=q,Q){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=W+L,Q={id:p++,callback:Y,priorityLevel:Q,startTime:W,expirationTime:L,sortIndex:-1},W>q?(Q.sortIndex=W,e(c,Q),r(l)===null&&Q===r(c)&&(v?(g(j),j=-1):v=!0,te(x,W-q))):(Q.sortIndex=L,e(l,Q),y||u||(y=!0,ee(A))),Q},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(Q){var Y=f;return function(){var W=f;f=Y;try{return Q.apply(this,arguments)}finally{f=W}}}})(Qy);Xy.exports=Qy;var w4=Xy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b4=we,ti=w4;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zy=new Set,Gu={};function rs(t,e){pl(t,e),pl(t+"Capture",e)}function pl(t,e){for(Gu[t]=e,t=0;t<e.length;t++)Zy.add(e[t])}var ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m0=Object.prototype.hasOwnProperty,x4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Um={},zm={};function _4(t){return m0.call(zm,t)?!0:m0.call(Um,t)?!1:x4.test(t)?zm[t]=!0:(Um[t]=!0,!1)}function S4(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function k4(t,e,r,n){if(e===null||typeof e>"u"||S4(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function En(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tn[t]=new En(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tn[e]=new En(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tn[t]=new En(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tn[t]=new En(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tn[t]=new En(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tn[t]=new En(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tn[t]=new En(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tn[t]=new En(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tn[t]=new En(t,5,!1,t.toLowerCase(),null,!1,!1)});var Z1=/[\-:]([a-z])/g;function eg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Z1,eg);tn[e]=new En(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Z1,eg);tn[e]=new En(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Z1,eg);tn[e]=new En(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tn[t]=new En(t,1,!1,t.toLowerCase(),null,!1,!1)});tn.xlinkHref=new En("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tn[t]=new En(t,1,!1,t.toLowerCase(),null,!0,!0)});function tg(t,e,r,n){var i=tn.hasOwnProperty(e)?tn[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(k4(e,r,i,n)&&(r=null),n||i===null?_4(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Na=b4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,df=Symbol.for("react.element"),Hs=Symbol.for("react.portal"),Ws=Symbol.for("react.fragment"),rg=Symbol.for("react.strict_mode"),v0=Symbol.for("react.profiler"),e5=Symbol.for("react.provider"),t5=Symbol.for("react.context"),ng=Symbol.for("react.forward_ref"),y0=Symbol.for("react.suspense"),w0=Symbol.for("react.suspense_list"),ig=Symbol.for("react.memo"),Va=Symbol.for("react.lazy"),r5=Symbol.for("react.offscreen"),$m=Symbol.iterator;function cu(t){return t===null||typeof t!="object"?null:(t=$m&&t[$m]||t["@@iterator"],typeof t=="function"?t:null)}var gr=Object.assign,pp;function Tu(t){if(pp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);pp=e&&e[1]||""}return`
`+pp+t}var gp=!1;function mp(t,e){if(!t||gp)return"";gp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{gp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Tu(t):""}function N4(t){switch(t.tag){case 5:return Tu(t.type);case 16:return Tu("Lazy");case 13:return Tu("Suspense");case 19:return Tu("SuspenseList");case 0:case 2:case 15:return t=mp(t.type,!1),t;case 11:return t=mp(t.type.render,!1),t;case 1:return t=mp(t.type,!0),t;default:return""}}function b0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ws:return"Fragment";case Hs:return"Portal";case v0:return"Profiler";case rg:return"StrictMode";case y0:return"Suspense";case w0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case t5:return(t.displayName||"Context")+".Consumer";case e5:return(t._context.displayName||"Context")+".Provider";case ng:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ig:return e=t.displayName||null,e!==null?e:b0(t.type)||"Memo";case Va:e=t._payload,t=t._init;try{return b0(t(e))}catch{}}return null}function A4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b0(e);case 8:return e===rg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function n5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function E4(t){var e=n5(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hf(t){t._valueTracker||(t._valueTracker=E4(t))}function i5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=n5(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function pd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function x0(t,e){var r=e.checked;return gr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Hm(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=lo(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function a5(t,e){e=e.checked,e!=null&&tg(t,"checked",e,!1)}function _0(t,e){a5(t,e);var r=lo(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?S0(t,e.type,r):e.hasOwnProperty("defaultValue")&&S0(t,e.type,lo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wm(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function S0(t,e,r){(e!=="number"||pd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Lu=Array.isArray;function nl(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+lo(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function k0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return gr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vm(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Fe(92));if(Lu(r)){if(1<r.length)throw Error(Fe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:lo(r)}}function o5(t,e){var r=lo(e.value),n=lo(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Gm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function s5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function N0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?s5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pf,l5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pf=pf||document.createElement("div"),pf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ku(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Iu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O4=["Webkit","ms","Moz","O"];Object.keys(Iu).forEach(function(t){O4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Iu[e]=Iu[t]})});function u5(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Iu.hasOwnProperty(t)&&Iu[t]?(""+e).trim():e+"px"}function c5(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=u5(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var j4=gr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function A0(t,e){if(e){if(j4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function E0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var O0=null;function ag(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var j0=null,il=null,al=null;function Km(t){if(t=wc(t)){if(typeof j0!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=nh(e),j0(t.stateNode,t.type,e))}}function f5(t){il?al?al.push(t):al=[t]:il=t}function d5(){if(il){var t=il,e=al;if(al=il=null,Km(t),e)for(t=0;t<e.length;t++)Km(e[t])}}function h5(t,e){return t(e)}function p5(){}var vp=!1;function g5(t,e,r){if(vp)return t(e,r);vp=!0;try{return h5(t,e,r)}finally{vp=!1,(il!==null||al!==null)&&(p5(),d5())}}function Yu(t,e){var r=t.stateNode;if(r===null)return null;var n=nh(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Fe(231,e,typeof r));return r}var T0=!1;if(ba)try{var fu={};Object.defineProperty(fu,"passive",{get:function(){T0=!0}}),window.addEventListener("test",fu,fu),window.removeEventListener("test",fu,fu)}catch{T0=!1}function T4(t,e,r,n,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(p){this.onError(p)}}var Du=!1,gd=null,md=!1,L0=null,L4={onError:function(t){Du=!0,gd=t}};function P4(t,e,r,n,i,a,o,s,l){Du=!1,gd=null,T4.apply(L4,arguments)}function C4(t,e,r,n,i,a,o,s,l){if(P4.apply(this,arguments),Du){if(Du){var c=gd;Du=!1,gd=null}else throw Error(Fe(198));md||(md=!0,L0=c)}}function ns(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function m5(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ym(t){if(ns(t)!==t)throw Error(Fe(188))}function R4(t){var e=t.alternate;if(!e){if(e=ns(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Ym(i),t;if(a===n)return Ym(i),e;a=a.sibling}throw Error(Fe(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o)throw Error(Fe(189))}}if(r.alternate!==n)throw Error(Fe(190))}if(r.tag!==3)throw Error(Fe(188));return r.stateNode.current===r?t:e}function v5(t){return t=R4(t),t!==null?y5(t):null}function y5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=y5(t);if(e!==null)return e;t=t.sibling}return null}var w5=ti.unstable_scheduleCallback,Jm=ti.unstable_cancelCallback,I4=ti.unstable_shouldYield,D4=ti.unstable_requestPaint,Ar=ti.unstable_now,M4=ti.unstable_getCurrentPriorityLevel,og=ti.unstable_ImmediatePriority,b5=ti.unstable_UserBlockingPriority,vd=ti.unstable_NormalPriority,B4=ti.unstable_LowPriority,x5=ti.unstable_IdlePriority,Zd=null,Xi=null;function F4(t){if(Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(Zd,t,void 0,(t.current.flags&128)===128)}catch{}}var Ii=Math.clz32?Math.clz32:z4,q4=Math.log,U4=Math.LN2;function z4(t){return t>>>=0,t===0?32:31-(q4(t)/U4|0)|0}var gf=64,mf=4194304;function Pu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yd(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var s=o&~i;s!==0?n=Pu(s):(a&=o,a!==0&&(n=Pu(a)))}else o=r&~i,o!==0?n=Pu(o):a!==0&&(n=Pu(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ii(e),i=1<<r,n|=t[r],e&=~i;return n}function $4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H4(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Ii(a),s=1<<o,l=i[o];l===-1?(!(s&r)||s&n)&&(i[o]=$4(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}function P0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _5(){var t=gf;return gf<<=1,!(gf&4194240)&&(gf=64),t}function yp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function vc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ii(e),t[e]=r}function W4(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Ii(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function sg(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ii(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Ut=0;function S5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var k5,lg,N5,A5,E5,C0=!1,vf=[],eo=null,to=null,ro=null,Ju=new Map,Xu=new Map,Ka=[],V4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xm(t,e){switch(t){case"focusin":case"focusout":eo=null;break;case"dragenter":case"dragleave":to=null;break;case"mouseover":case"mouseout":ro=null;break;case"pointerover":case"pointerout":Ju.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xu.delete(e.pointerId)}}function du(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=wc(e),e!==null&&lg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function G4(t,e,r,n,i){switch(e){case"focusin":return eo=du(eo,t,e,r,n,i),!0;case"dragenter":return to=du(to,t,e,r,n,i),!0;case"mouseover":return ro=du(ro,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return Ju.set(a,du(Ju.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Xu.set(a,du(Xu.get(a)||null,t,e,r,n,i)),!0}return!1}function O5(t){var e=Uo(t.target);if(e!==null){var r=ns(e);if(r!==null){if(e=r.tag,e===13){if(e=m5(r),e!==null){t.blockedOn=e,E5(t.priority,function(){N5(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=R0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);O0=n,r.target.dispatchEvent(n),O0=null}else return e=wc(r),e!==null&&lg(e),t.blockedOn=r,!1;e.shift()}return!0}function Qm(t,e,r){Yf(t)&&r.delete(e)}function K4(){C0=!1,eo!==null&&Yf(eo)&&(eo=null),to!==null&&Yf(to)&&(to=null),ro!==null&&Yf(ro)&&(ro=null),Ju.forEach(Qm),Xu.forEach(Qm)}function hu(t,e){t.blockedOn===e&&(t.blockedOn=null,C0||(C0=!0,ti.unstable_scheduleCallback(ti.unstable_NormalPriority,K4)))}function Qu(t){function e(i){return hu(i,t)}if(0<vf.length){hu(vf[0],t);for(var r=1;r<vf.length;r++){var n=vf[r];n.blockedOn===t&&(n.blockedOn=null)}}for(eo!==null&&hu(eo,t),to!==null&&hu(to,t),ro!==null&&hu(ro,t),Ju.forEach(e),Xu.forEach(e),r=0;r<Ka.length;r++)n=Ka[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ka.length&&(r=Ka[0],r.blockedOn===null);)O5(r),r.blockedOn===null&&Ka.shift()}var ol=Na.ReactCurrentBatchConfig,wd=!0;function Y4(t,e,r,n){var i=Ut,a=ol.transition;ol.transition=null;try{Ut=1,ug(t,e,r,n)}finally{Ut=i,ol.transition=a}}function J4(t,e,r,n){var i=Ut,a=ol.transition;ol.transition=null;try{Ut=4,ug(t,e,r,n)}finally{Ut=i,ol.transition=a}}function ug(t,e,r,n){if(wd){var i=R0(t,e,r,n);if(i===null)Op(t,e,n,bd,r),Xm(t,n);else if(G4(i,t,e,r,n))n.stopPropagation();else if(Xm(t,n),e&4&&-1<V4.indexOf(t)){for(;i!==null;){var a=wc(i);if(a!==null&&k5(a),a=R0(t,e,r,n),a===null&&Op(t,e,n,bd,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else Op(t,e,n,null,r)}}var bd=null;function R0(t,e,r,n){if(bd=null,t=ag(n),t=Uo(t),t!==null)if(e=ns(t),e===null)t=null;else if(r=e.tag,r===13){if(t=m5(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bd=t,null}function j5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(M4()){case og:return 1;case b5:return 4;case vd:case B4:return 16;case x5:return 536870912;default:return 16}default:return 16}}var Xa=null,cg=null,Jf=null;function T5(){if(Jf)return Jf;var t,e=cg,r=e.length,n,i="value"in Xa?Xa.value:Xa.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return Jf=i.slice(t,1<n?1-n:void 0)}function Xf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yf(){return!0}function Zm(){return!1}function ni(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?yf:Zm,this.isPropagationStopped=Zm,this}return gr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yf)},persist:function(){},isPersistent:yf}),e}var kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fg=ni(kl),yc=gr({},kl,{view:0,detail:0}),X4=ni(yc),wp,bp,pu,eh=gr({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pu&&(pu&&t.type==="mousemove"?(wp=t.screenX-pu.screenX,bp=t.screenY-pu.screenY):bp=wp=0,pu=t),wp)},movementY:function(t){return"movementY"in t?t.movementY:bp}}),ev=ni(eh),Q4=gr({},eh,{dataTransfer:0}),Z4=ni(Q4),e3=gr({},yc,{relatedTarget:0}),xp=ni(e3),t3=gr({},kl,{animationName:0,elapsedTime:0,pseudoElement:0}),r3=ni(t3),n3=gr({},kl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),i3=ni(n3),a3=gr({},kl,{data:0}),tv=ni(a3),o3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=l3[t])?!!e[t]:!1}function dg(){return u3}var c3=gr({},yc,{key:function(t){if(t.key){var e=o3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?s3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dg,charCode:function(t){return t.type==="keypress"?Xf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),f3=ni(c3),d3=gr({},eh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rv=ni(d3),h3=gr({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dg}),p3=ni(h3),g3=gr({},kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),m3=ni(g3),v3=gr({},eh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),y3=ni(v3),w3=[9,13,27,32],hg=ba&&"CompositionEvent"in window,Mu=null;ba&&"documentMode"in document&&(Mu=document.documentMode);var b3=ba&&"TextEvent"in window&&!Mu,L5=ba&&(!hg||Mu&&8<Mu&&11>=Mu),nv=" ",iv=!1;function P5(t,e){switch(t){case"keyup":return w3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C5(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vs=!1;function x3(t,e){switch(t){case"compositionend":return C5(e);case"keypress":return e.which!==32?null:(iv=!0,nv);case"textInput":return t=e.data,t===nv&&iv?null:t;default:return null}}function _3(t,e){if(Vs)return t==="compositionend"||!hg&&P5(t,e)?(t=T5(),Jf=cg=Xa=null,Vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return L5&&e.locale!=="ko"?null:e.data;default:return null}}var S3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function av(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!S3[t.type]:e==="textarea"}function R5(t,e,r,n){f5(n),e=xd(e,"onChange"),0<e.length&&(r=new fg("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Bu=null,Zu=null;function k3(t){W5(t,0)}function th(t){var e=Ys(t);if(i5(e))return t}function N3(t,e){if(t==="change")return e}var I5=!1;if(ba){var _p;if(ba){var Sp="oninput"in document;if(!Sp){var ov=document.createElement("div");ov.setAttribute("oninput","return;"),Sp=typeof ov.oninput=="function"}_p=Sp}else _p=!1;I5=_p&&(!document.documentMode||9<document.documentMode)}function sv(){Bu&&(Bu.detachEvent("onpropertychange",D5),Zu=Bu=null)}function D5(t){if(t.propertyName==="value"&&th(Zu)){var e=[];R5(e,Zu,t,ag(t)),g5(k3,e)}}function A3(t,e,r){t==="focusin"?(sv(),Bu=e,Zu=r,Bu.attachEvent("onpropertychange",D5)):t==="focusout"&&sv()}function E3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return th(Zu)}function O3(t,e){if(t==="click")return th(e)}function j3(t,e){if(t==="input"||t==="change")return th(e)}function T3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mi=typeof Object.is=="function"?Object.is:T3;function ec(t,e){if(Mi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!m0.call(e,i)||!Mi(t[i],e[i]))return!1}return!0}function lv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function uv(t,e){var r=lv(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lv(r)}}function M5(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?M5(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function B5(){for(var t=window,e=pd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=pd(t.document)}return e}function pg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function L3(t){var e=B5(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&M5(r.ownerDocument.documentElement,r)){if(n!==null&&pg(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=uv(r,a);var o=uv(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var P3=ba&&"documentMode"in document&&11>=document.documentMode,Gs=null,I0=null,Fu=null,D0=!1;function cv(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;D0||Gs==null||Gs!==pd(n)||(n=Gs,"selectionStart"in n&&pg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Fu&&ec(Fu,n)||(Fu=n,n=xd(I0,"onSelect"),0<n.length&&(e=new fg("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Gs)))}function wf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ks={animationend:wf("Animation","AnimationEnd"),animationiteration:wf("Animation","AnimationIteration"),animationstart:wf("Animation","AnimationStart"),transitionend:wf("Transition","TransitionEnd")},kp={},F5={};ba&&(F5=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function rh(t){if(kp[t])return kp[t];if(!Ks[t])return t;var e=Ks[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in F5)return kp[t]=e[r];return t}var q5=rh("animationend"),U5=rh("animationiteration"),z5=rh("animationstart"),$5=rh("transitionend"),H5=new Map,fv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ho(t,e){H5.set(t,e),rs(e,[t])}for(var Np=0;Np<fv.length;Np++){var Ap=fv[Np],C3=Ap.toLowerCase(),R3=Ap[0].toUpperCase()+Ap.slice(1);ho(C3,"on"+R3)}ho(q5,"onAnimationEnd");ho(U5,"onAnimationIteration");ho(z5,"onAnimationStart");ho("dblclick","onDoubleClick");ho("focusin","onFocus");ho("focusout","onBlur");ho($5,"onTransitionEnd");pl("onMouseEnter",["mouseout","mouseover"]);pl("onMouseLeave",["mouseout","mouseover"]);pl("onPointerEnter",["pointerout","pointerover"]);pl("onPointerLeave",["pointerout","pointerover"]);rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rs("onBeforeInput",["compositionend","keypress","textInput","paste"]);rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cu));function dv(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,C4(n,e,void 0,t),t.currentTarget=null}function W5(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;dv(i,s,c),a=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;dv(i,s,c),a=l}}}if(md)throw t=L0,md=!1,L0=null,t}function ar(t,e){var r=e[U0];r===void 0&&(r=e[U0]=new Set);var n=t+"__bubble";r.has(n)||(V5(e,t,2,!1),r.add(n))}function Ep(t,e,r){var n=0;e&&(n|=4),V5(r,t,n,e)}var bf="_reactListening"+Math.random().toString(36).slice(2);function tc(t){if(!t[bf]){t[bf]=!0,Zy.forEach(function(r){r!=="selectionchange"&&(I3.has(r)||Ep(r,!1,t),Ep(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bf]||(e[bf]=!0,Ep("selectionchange",!1,e))}}function V5(t,e,r,n){switch(j5(e)){case 1:var i=Y4;break;case 4:i=J4;break;default:i=ug}r=i.bind(null,e,r,t),i=void 0,!T0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Op(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=Uo(s),o===null)return;if(l=o.tag,l===5||l===6){n=a=o;continue e}s=s.parentNode}}n=n.return}g5(function(){var c=a,p=ag(r),d=[];e:{var f=H5.get(t);if(f!==void 0){var u=fg,y=t;switch(t){case"keypress":if(Xf(r)===0)break e;case"keydown":case"keyup":u=f3;break;case"focusin":y="focus",u=xp;break;case"focusout":y="blur",u=xp;break;case"beforeblur":case"afterblur":u=xp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=ev;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=Z4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=p3;break;case q5:case U5:case z5:u=r3;break;case $5:u=m3;break;case"scroll":u=X4;break;case"wheel":u=y3;break;case"copy":case"cut":case"paste":u=i3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=rv}var v=(e&4)!==0,b=!v&&t==="scroll",g=v?f!==null?f+"Capture":null:f;v=[];for(var m=c,_;m!==null;){_=m;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,g!==null&&(x=Yu(m,g),x!=null&&v.push(rc(m,x,_)))),b)break;m=m.return}0<v.length&&(f=new u(f,y,null,r,p),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",u=t==="mouseout"||t==="pointerout",f&&r!==O0&&(y=r.relatedTarget||r.fromElement)&&(Uo(y)||y[xa]))break e;if((u||f)&&(f=p.window===p?p:(f=p.ownerDocument)?f.defaultView||f.parentWindow:window,u?(y=r.relatedTarget||r.toElement,u=c,y=y?Uo(y):null,y!==null&&(b=ns(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(u=null,y=c),u!==y)){if(v=ev,x="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(v=rv,x="onPointerLeave",g="onPointerEnter",m="pointer"),b=u==null?f:Ys(u),_=y==null?f:Ys(y),f=new v(x,m+"leave",u,r,p),f.target=b,f.relatedTarget=_,x=null,Uo(p)===c&&(v=new v(g,m+"enter",y,r,p),v.target=_,v.relatedTarget=b,x=v),b=x,u&&y)t:{for(v=u,g=y,m=0,_=v;_;_=Ts(_))m++;for(_=0,x=g;x;x=Ts(x))_++;for(;0<m-_;)v=Ts(v),m--;for(;0<_-m;)g=Ts(g),_--;for(;m--;){if(v===g||g!==null&&v===g.alternate)break t;v=Ts(v),g=Ts(g)}v=null}else v=null;u!==null&&hv(d,f,u,v,!1),y!==null&&b!==null&&hv(d,b,y,v,!0)}}e:{if(f=c?Ys(c):window,u=f.nodeName&&f.nodeName.toLowerCase(),u==="select"||u==="input"&&f.type==="file")var A=N3;else if(av(f))if(I5)A=j3;else{A=E3;var D=A3}else(u=f.nodeName)&&u.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(A=O3);if(A&&(A=A(t,c))){R5(d,A,r,p);break e}D&&D(t,f,c),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&S0(f,"number",f.value)}switch(D=c?Ys(c):window,t){case"focusin":(av(D)||D.contentEditable==="true")&&(Gs=D,I0=c,Fu=null);break;case"focusout":Fu=I0=Gs=null;break;case"mousedown":D0=!0;break;case"contextmenu":case"mouseup":case"dragend":D0=!1,cv(d,r,p);break;case"selectionchange":if(P3)break;case"keydown":case"keyup":cv(d,r,p)}var T;if(hg)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Vs?P5(t,r)&&(j="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(j="onCompositionStart");j&&(L5&&r.locale!=="ko"&&(Vs||j!=="onCompositionStart"?j==="onCompositionEnd"&&Vs&&(T=T5()):(Xa=p,cg="value"in Xa?Xa.value:Xa.textContent,Vs=!0)),D=xd(c,j),0<D.length&&(j=new tv(j,t,null,r,p),d.push({event:j,listeners:D}),T?j.data=T:(T=C5(r),T!==null&&(j.data=T)))),(T=b3?x3(t,r):_3(t,r))&&(c=xd(c,"onBeforeInput"),0<c.length&&(p=new tv("onBeforeInput","beforeinput",null,r,p),d.push({event:p,listeners:c}),p.data=T))}W5(d,e)})}function rc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function xd(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Yu(t,r),a!=null&&n.unshift(rc(t,a,i)),a=Yu(t,e),a!=null&&n.push(rc(t,a,i))),t=t.return}return n}function Ts(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hv(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&c!==null&&(s=c,i?(l=Yu(r,a),l!=null&&o.unshift(rc(r,l,s))):i||(l=Yu(r,a),l!=null&&o.push(rc(r,l,s)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var D3=/\r\n?/g,M3=/\u0000|\uFFFD/g;function pv(t){return(typeof t=="string"?t:""+t).replace(D3,`
`).replace(M3,"")}function xf(t,e,r){if(e=pv(e),pv(t)!==e&&r)throw Error(Fe(425))}function _d(){}var M0=null,B0=null;function F0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var q0=typeof setTimeout=="function"?setTimeout:void 0,B3=typeof clearTimeout=="function"?clearTimeout:void 0,gv=typeof Promise=="function"?Promise:void 0,F3=typeof queueMicrotask=="function"?queueMicrotask:typeof gv<"u"?function(t){return gv.resolve(null).then(t).catch(q3)}:q0;function q3(t){setTimeout(function(){throw t})}function jp(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Qu(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Qu(e)}function no(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Nl=Math.random().toString(36).slice(2),Yi="__reactFiber$"+Nl,nc="__reactProps$"+Nl,xa="__reactContainer$"+Nl,U0="__reactEvents$"+Nl,U3="__reactListeners$"+Nl,z3="__reactHandles$"+Nl;function Uo(t){var e=t[Yi];if(e)return e;for(var r=t.parentNode;r;){if(e=r[xa]||r[Yi]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=mv(t);t!==null;){if(r=t[Yi])return r;t=mv(t)}return e}t=r,r=t.parentNode}return null}function wc(t){return t=t[Yi]||t[xa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function nh(t){return t[nc]||null}var z0=[],Js=-1;function po(t){return{current:t}}function lr(t){0>Js||(t.current=z0[Js],z0[Js]=null,Js--)}function nr(t,e){Js++,z0[Js]=t.current,t.current=e}var uo={},gn=po(uo),Bn=po(!1),Ko=uo;function gl(t,e){var r=t.type.contextTypes;if(!r)return uo;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Fn(t){return t=t.childContextTypes,t!=null}function Sd(){lr(Bn),lr(gn)}function vv(t,e,r){if(gn.current!==uo)throw Error(Fe(168));nr(gn,e),nr(Bn,r)}function G5(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Fe(108,A4(t)||"Unknown",i));return gr({},r,n)}function kd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||uo,Ko=gn.current,nr(gn,t),nr(Bn,Bn.current),!0}function yv(t,e,r){var n=t.stateNode;if(!n)throw Error(Fe(169));r?(t=G5(t,e,Ko),n.__reactInternalMemoizedMergedChildContext=t,lr(Bn),lr(gn),nr(gn,t)):lr(Bn),nr(Bn,r)}var ma=null,ih=!1,Tp=!1;function K5(t){ma===null?ma=[t]:ma.push(t)}function $3(t){ih=!0,K5(t)}function go(){if(!Tp&&ma!==null){Tp=!0;var t=0,e=Ut;try{var r=ma;for(Ut=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ma=null,ih=!1}catch(i){throw ma!==null&&(ma=ma.slice(t+1)),w5(og,go),i}finally{Ut=e,Tp=!1}}return null}var Xs=[],Qs=0,Nd=null,Ad=0,fi=[],di=0,Yo=null,va=1,ya="";function To(t,e){Xs[Qs++]=Ad,Xs[Qs++]=Nd,Nd=t,Ad=e}function Y5(t,e,r){fi[di++]=va,fi[di++]=ya,fi[di++]=Yo,Yo=t;var n=va;t=ya;var i=32-Ii(n)-1;n&=~(1<<i),r+=1;var a=32-Ii(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,va=1<<32-Ii(e)+i|r<<i|n,ya=a+t}else va=1<<a|r<<i|n,ya=t}function gg(t){t.return!==null&&(To(t,1),Y5(t,1,0))}function mg(t){for(;t===Nd;)Nd=Xs[--Qs],Xs[Qs]=null,Ad=Xs[--Qs],Xs[Qs]=null;for(;t===Yo;)Yo=fi[--di],fi[di]=null,ya=fi[--di],fi[di]=null,va=fi[--di],fi[di]=null}var ei=null,Qn=null,cr=!1,Ri=null;function J5(t,e){var r=hi(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function wv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ei=t,Qn=no(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ei=t,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Yo!==null?{id:va,overflow:ya}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=hi(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ei=t,Qn=null,!0):!1;default:return!1}}function $0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function H0(t){if(cr){var e=Qn;if(e){var r=e;if(!wv(t,e)){if($0(t))throw Error(Fe(418));e=no(r.nextSibling);var n=ei;e&&wv(t,e)?J5(n,r):(t.flags=t.flags&-4097|2,cr=!1,ei=t)}}else{if($0(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,cr=!1,ei=t}}}function bv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ei=t}function _f(t){if(t!==ei)return!1;if(!cr)return bv(t),cr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!F0(t.type,t.memoizedProps)),e&&(e=Qn)){if($0(t))throw X5(),Error(Fe(418));for(;e;)J5(t,e),e=no(e.nextSibling)}if(bv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Qn=no(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=ei?no(t.stateNode.nextSibling):null;return!0}function X5(){for(var t=Qn;t;)t=no(t.nextSibling)}function ml(){Qn=ei=null,cr=!1}function vg(t){Ri===null?Ri=[t]:Ri.push(t)}var H3=Na.ReactCurrentBatchConfig;function gu(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Fe(309));var n=r.stateNode}if(!n)throw Error(Fe(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Fe(284));if(!r._owner)throw Error(Fe(290,t))}return t}function Sf(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xv(t){var e=t._init;return e(t._payload)}function Q5(t){function e(g,m){if(t){var _=g.deletions;_===null?(g.deletions=[m],g.flags|=16):_.push(m)}}function r(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function n(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function i(g,m){return g=so(g,m),g.index=0,g.sibling=null,g}function a(g,m,_){return g.index=_,t?(_=g.alternate,_!==null?(_=_.index,_<m?(g.flags|=2,m):_):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function s(g,m,_,x){return m===null||m.tag!==6?(m=Mp(_,g.mode,x),m.return=g,m):(m=i(m,_),m.return=g,m)}function l(g,m,_,x){var A=_.type;return A===Ws?p(g,m,_.props.children,x,_.key):m!==null&&(m.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Va&&xv(A)===m.type)?(x=i(m,_.props),x.ref=gu(g,m,_),x.return=g,x):(x=id(_.type,_.key,_.props,null,g.mode,x),x.ref=gu(g,m,_),x.return=g,x)}function c(g,m,_,x){return m===null||m.tag!==4||m.stateNode.containerInfo!==_.containerInfo||m.stateNode.implementation!==_.implementation?(m=Bp(_,g.mode,x),m.return=g,m):(m=i(m,_.children||[]),m.return=g,m)}function p(g,m,_,x,A){return m===null||m.tag!==7?(m=Vo(_,g.mode,x,A),m.return=g,m):(m=i(m,_),m.return=g,m)}function d(g,m,_){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Mp(""+m,g.mode,_),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case df:return _=id(m.type,m.key,m.props,null,g.mode,_),_.ref=gu(g,null,m),_.return=g,_;case Hs:return m=Bp(m,g.mode,_),m.return=g,m;case Va:var x=m._init;return d(g,x(m._payload),_)}if(Lu(m)||cu(m))return m=Vo(m,g.mode,_,null),m.return=g,m;Sf(g,m)}return null}function f(g,m,_,x){var A=m!==null?m.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return A!==null?null:s(g,m,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case df:return _.key===A?l(g,m,_,x):null;case Hs:return _.key===A?c(g,m,_,x):null;case Va:return A=_._init,f(g,m,A(_._payload),x)}if(Lu(_)||cu(_))return A!==null?null:p(g,m,_,x,null);Sf(g,_)}return null}function u(g,m,_,x,A){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(_)||null,s(m,g,""+x,A);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case df:return g=g.get(x.key===null?_:x.key)||null,l(m,g,x,A);case Hs:return g=g.get(x.key===null?_:x.key)||null,c(m,g,x,A);case Va:var D=x._init;return u(g,m,_,D(x._payload),A)}if(Lu(x)||cu(x))return g=g.get(_)||null,p(m,g,x,A,null);Sf(m,x)}return null}function y(g,m,_,x){for(var A=null,D=null,T=m,j=m=0,B=null;T!==null&&j<_.length;j++){T.index>j?(B=T,T=null):B=T.sibling;var P=f(g,T,_[j],x);if(P===null){T===null&&(T=B);break}t&&T&&P.alternate===null&&e(g,T),m=a(P,m,j),D===null?A=P:D.sibling=P,D=P,T=B}if(j===_.length)return r(g,T),cr&&To(g,j),A;if(T===null){for(;j<_.length;j++)T=d(g,_[j],x),T!==null&&(m=a(T,m,j),D===null?A=T:D.sibling=T,D=T);return cr&&To(g,j),A}for(T=n(g,T);j<_.length;j++)B=u(T,g,j,_[j],x),B!==null&&(t&&B.alternate!==null&&T.delete(B.key===null?j:B.key),m=a(B,m,j),D===null?A=B:D.sibling=B,D=B);return t&&T.forEach(function(k){return e(g,k)}),cr&&To(g,j),A}function v(g,m,_,x){var A=cu(_);if(typeof A!="function")throw Error(Fe(150));if(_=A.call(_),_==null)throw Error(Fe(151));for(var D=A=null,T=m,j=m=0,B=null,P=_.next();T!==null&&!P.done;j++,P=_.next()){T.index>j?(B=T,T=null):B=T.sibling;var k=f(g,T,P.value,x);if(k===null){T===null&&(T=B);break}t&&T&&k.alternate===null&&e(g,T),m=a(k,m,j),D===null?A=k:D.sibling=k,D=k,T=B}if(P.done)return r(g,T),cr&&To(g,j),A;if(T===null){for(;!P.done;j++,P=_.next())P=d(g,P.value,x),P!==null&&(m=a(P,m,j),D===null?A=P:D.sibling=P,D=P);return cr&&To(g,j),A}for(T=n(g,T);!P.done;j++,P=_.next())P=u(T,g,j,P.value,x),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?j:P.key),m=a(P,m,j),D===null?A=P:D.sibling=P,D=P);return t&&T.forEach(function(E){return e(g,E)}),cr&&To(g,j),A}function b(g,m,_,x){if(typeof _=="object"&&_!==null&&_.type===Ws&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case df:e:{for(var A=_.key,D=m;D!==null;){if(D.key===A){if(A=_.type,A===Ws){if(D.tag===7){r(g,D.sibling),m=i(D,_.props.children),m.return=g,g=m;break e}}else if(D.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Va&&xv(A)===D.type){r(g,D.sibling),m=i(D,_.props),m.ref=gu(g,D,_),m.return=g,g=m;break e}r(g,D);break}else e(g,D);D=D.sibling}_.type===Ws?(m=Vo(_.props.children,g.mode,x,_.key),m.return=g,g=m):(x=id(_.type,_.key,_.props,null,g.mode,x),x.ref=gu(g,m,_),x.return=g,g=x)}return o(g);case Hs:e:{for(D=_.key;m!==null;){if(m.key===D)if(m.tag===4&&m.stateNode.containerInfo===_.containerInfo&&m.stateNode.implementation===_.implementation){r(g,m.sibling),m=i(m,_.children||[]),m.return=g,g=m;break e}else{r(g,m);break}else e(g,m);m=m.sibling}m=Bp(_,g.mode,x),m.return=g,g=m}return o(g);case Va:return D=_._init,b(g,m,D(_._payload),x)}if(Lu(_))return y(g,m,_,x);if(cu(_))return v(g,m,_,x);Sf(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,m!==null&&m.tag===6?(r(g,m.sibling),m=i(m,_),m.return=g,g=m):(r(g,m),m=Mp(_,g.mode,x),m.return=g,g=m),o(g)):r(g,m)}return b}var vl=Q5(!0),Z5=Q5(!1),Ed=po(null),Od=null,Zs=null,yg=null;function wg(){yg=Zs=Od=null}function bg(t){var e=Ed.current;lr(Ed),t._currentValue=e}function W0(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function sl(t,e){Od=t,yg=Zs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mn=!0),t.firstContext=null)}function gi(t){var e=t._currentValue;if(yg!==t)if(t={context:t,memoizedValue:e,next:null},Zs===null){if(Od===null)throw Error(Fe(308));Zs=t,Od.dependencies={lanes:0,firstContext:t}}else Zs=Zs.next=t;return e}var zo=null;function xg(t){zo===null?zo=[t]:zo.push(t)}function ew(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,xg(e)):(r.next=i.next,i.next=r),e.interleaved=r,_a(t,n)}function _a(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ga=!1;function _g(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function io(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Pt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,_a(t,r)}return i=n.interleaved,i===null?(e.next=e,xg(n)):(e.next=i.next,i.next=e),n.interleaved=e,_a(t,r)}function Qf(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,sg(t,r)}}function _v(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function jd(t,e,r,n){var i=t.updateQueue;Ga=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,o===null?a=c:o.next=c,o=l;var p=t.alternate;p!==null&&(p=p.updateQueue,s=p.lastBaseUpdate,s!==o&&(s===null?p.firstBaseUpdate=c:s.next=c,p.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;o=0,p=c=l=null,s=a;do{var f=s.lane,u=s.eventTime;if((n&f)===f){p!==null&&(p=p.next={eventTime:u,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=t,v=s;switch(f=e,u=r,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(u,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(u,d,f):y,f==null)break e;d=gr({},d,f);break e;case 2:Ga=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else u={eventTime:u,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},p===null?(c=p=u,l=d):p=p.next=u,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(p===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Xo|=o,t.lanes=o,t.memoizedState=d}}function Sv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Fe(191,i));i.call(n)}}}var bc={},Qi=po(bc),ic=po(bc),ac=po(bc);function $o(t){if(t===bc)throw Error(Fe(174));return t}function Sg(t,e){switch(nr(ac,e),nr(ic,t),nr(Qi,bc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:N0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=N0(e,t)}lr(Qi),nr(Qi,e)}function yl(){lr(Qi),lr(ic),lr(ac)}function rw(t){$o(ac.current);var e=$o(Qi.current),r=N0(e,t.type);e!==r&&(nr(ic,t),nr(Qi,r))}function kg(t){ic.current===t&&(lr(Qi),lr(ic))}var hr=po(0);function Td(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lp=[];function Ng(){for(var t=0;t<Lp.length;t++)Lp[t]._workInProgressVersionPrimary=null;Lp.length=0}var Zf=Na.ReactCurrentDispatcher,Pp=Na.ReactCurrentBatchConfig,Jo=0,pr=null,qr=null,Gr=null,Ld=!1,qu=!1,oc=0,W3=0;function sn(){throw Error(Fe(321))}function Ag(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Mi(t[r],e[r]))return!1;return!0}function Eg(t,e,r,n,i,a){if(Jo=a,pr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zf.current=t===null||t.memoizedState===null?Y3:J3,t=r(n,i),qu){a=0;do{if(qu=!1,oc=0,25<=a)throw Error(Fe(301));a+=1,Gr=qr=null,e.updateQueue=null,Zf.current=X3,t=r(n,i)}while(qu)}if(Zf.current=Pd,e=qr!==null&&qr.next!==null,Jo=0,Gr=qr=pr=null,Ld=!1,e)throw Error(Fe(300));return t}function Og(){var t=oc!==0;return oc=0,t}function Ki(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?pr.memoizedState=Gr=t:Gr=Gr.next=t,Gr}function mi(){if(qr===null){var t=pr.alternate;t=t!==null?t.memoizedState:null}else t=qr.next;var e=Gr===null?pr.memoizedState:Gr.next;if(e!==null)Gr=e,qr=t;else{if(t===null)throw Error(Fe(310));qr=t,t={memoizedState:qr.memoizedState,baseState:qr.baseState,baseQueue:qr.baseQueue,queue:qr.queue,next:null},Gr===null?pr.memoizedState=Gr=t:Gr=Gr.next=t}return Gr}function sc(t,e){return typeof e=="function"?e(t):e}function Cp(t){var e=mi(),r=e.queue;if(r===null)throw Error(Fe(311));r.lastRenderedReducer=t;var n=qr,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var s=o=null,l=null,c=a;do{var p=c.lane;if((Jo&p)===p)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var d={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=d,o=n):l=l.next=d,pr.lanes|=p,Xo|=p}c=c.next}while(c!==null&&c!==a);l===null?o=n:l.next=s,Mi(n,e.memoizedState)||(Mn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,pr.lanes|=a,Xo|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Rp(t){var e=mi(),r=e.queue;if(r===null)throw Error(Fe(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Mi(a,e.memoizedState)||(Mn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function nw(){}function iw(t,e){var r=pr,n=mi(),i=e(),a=!Mi(n.memoizedState,i);if(a&&(n.memoizedState=i,Mn=!0),n=n.queue,jg(sw.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Gr!==null&&Gr.memoizedState.tag&1){if(r.flags|=2048,lc(9,ow.bind(null,r,n,i,e),void 0,null),Yr===null)throw Error(Fe(349));Jo&30||aw(r,e,i)}return i}function aw(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=pr.updateQueue,e===null?(e={lastEffect:null,stores:null},pr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function ow(t,e,r,n){e.value=r,e.getSnapshot=n,lw(e)&&uw(t)}function sw(t,e,r){return r(function(){lw(e)&&uw(t)})}function lw(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Mi(t,r)}catch{return!0}}function uw(t){var e=_a(t,1);e!==null&&Di(e,t,1,-1)}function kv(t){var e=Ki();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sc,lastRenderedState:t},e.queue=t,t=t.dispatch=K3.bind(null,pr,t),[e.memoizedState,t]}function lc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=pr.updateQueue,e===null?(e={lastEffect:null,stores:null},pr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function cw(){return mi().memoizedState}function ed(t,e,r,n){var i=Ki();pr.flags|=t,i.memoizedState=lc(1|e,r,void 0,n===void 0?null:n)}function ah(t,e,r,n){var i=mi();n=n===void 0?null:n;var a=void 0;if(qr!==null){var o=qr.memoizedState;if(a=o.destroy,n!==null&&Ag(n,o.deps)){i.memoizedState=lc(e,r,a,n);return}}pr.flags|=t,i.memoizedState=lc(1|e,r,a,n)}function Nv(t,e){return ed(8390656,8,t,e)}function jg(t,e){return ah(2048,8,t,e)}function fw(t,e){return ah(4,2,t,e)}function dw(t,e){return ah(4,4,t,e)}function hw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pw(t,e,r){return r=r!=null?r.concat([t]):null,ah(4,4,hw.bind(null,e,t),r)}function Tg(){}function gw(t,e){var r=mi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ag(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function mw(t,e){var r=mi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ag(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function vw(t,e,r){return Jo&21?(Mi(r,e)||(r=_5(),pr.lanes|=r,Xo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mn=!0),t.memoizedState=r)}function V3(t,e){var r=Ut;Ut=r!==0&&4>r?r:4,t(!0);var n=Pp.transition;Pp.transition={};try{t(!1),e()}finally{Ut=r,Pp.transition=n}}function yw(){return mi().memoizedState}function G3(t,e,r){var n=oo(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ww(t))bw(e,r);else if(r=ew(t,e,r,n),r!==null){var i=Sn();Di(r,t,n,i),xw(r,e,n)}}function K3(t,e,r){var n=oo(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ww(t))bw(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,r);if(i.hasEagerState=!0,i.eagerState=s,Mi(s,o)){var l=e.interleaved;l===null?(i.next=i,xg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=ew(t,e,i,n),r!==null&&(i=Sn(),Di(r,t,n,i),xw(r,e,n))}}function ww(t){var e=t.alternate;return t===pr||e!==null&&e===pr}function bw(t,e){qu=Ld=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function xw(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,sg(t,r)}}var Pd={readContext:gi,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},Y3={readContext:gi,useCallback:function(t,e){return Ki().memoizedState=[t,e===void 0?null:e],t},useContext:gi,useEffect:Nv,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ed(4194308,4,hw.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ed(4194308,4,t,e)},useInsertionEffect:function(t,e){return ed(4,2,t,e)},useMemo:function(t,e){var r=Ki();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ki();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=G3.bind(null,pr,t),[n.memoizedState,t]},useRef:function(t){var e=Ki();return t={current:t},e.memoizedState=t},useState:kv,useDebugValue:Tg,useDeferredValue:function(t){return Ki().memoizedState=t},useTransition:function(){var t=kv(!1),e=t[0];return t=V3.bind(null,t[1]),Ki().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=pr,i=Ki();if(cr){if(r===void 0)throw Error(Fe(407));r=r()}else{if(r=e(),Yr===null)throw Error(Fe(349));Jo&30||aw(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,Nv(sw.bind(null,n,a,t),[t]),n.flags|=2048,lc(9,ow.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Ki(),e=Yr.identifierPrefix;if(cr){var r=ya,n=va;r=(n&~(1<<32-Ii(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=oc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=W3++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},J3={readContext:gi,useCallback:gw,useContext:gi,useEffect:jg,useImperativeHandle:pw,useInsertionEffect:fw,useLayoutEffect:dw,useMemo:mw,useReducer:Cp,useRef:cw,useState:function(){return Cp(sc)},useDebugValue:Tg,useDeferredValue:function(t){var e=mi();return vw(e,qr.memoizedState,t)},useTransition:function(){var t=Cp(sc)[0],e=mi().memoizedState;return[t,e]},useMutableSource:nw,useSyncExternalStore:iw,useId:yw,unstable_isNewReconciler:!1},X3={readContext:gi,useCallback:gw,useContext:gi,useEffect:jg,useImperativeHandle:pw,useInsertionEffect:fw,useLayoutEffect:dw,useMemo:mw,useReducer:Rp,useRef:cw,useState:function(){return Rp(sc)},useDebugValue:Tg,useDeferredValue:function(t){var e=mi();return qr===null?e.memoizedState=t:vw(e,qr.memoizedState,t)},useTransition:function(){var t=Rp(sc)[0],e=mi().memoizedState;return[t,e]},useMutableSource:nw,useSyncExternalStore:iw,useId:yw,unstable_isNewReconciler:!1};function ji(t,e){if(t&&t.defaultProps){e=gr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function V0(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:gr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var oh={isMounted:function(t){return(t=t._reactInternals)?ns(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Sn(),i=oo(t),a=wa(n,i);a.payload=e,r!=null&&(a.callback=r),e=io(t,a,i),e!==null&&(Di(e,t,i,n),Qf(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Sn(),i=oo(t),a=wa(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=io(t,a,i),e!==null&&(Di(e,t,i,n),Qf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Sn(),n=oo(t),i=wa(r,n);i.tag=2,e!=null&&(i.callback=e),e=io(t,i,n),e!==null&&(Di(e,t,n,r),Qf(e,t,n))}};function Av(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!ec(r,n)||!ec(i,a):!0}function _w(t,e,r){var n=!1,i=uo,a=e.contextType;return typeof a=="object"&&a!==null?a=gi(a):(i=Fn(e)?Ko:gn.current,n=e.contextTypes,a=(n=n!=null)?gl(t,i):uo),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oh,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Ev(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&oh.enqueueReplaceState(e,e.state,null)}function G0(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},_g(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=gi(a):(a=Fn(e)?Ko:gn.current,i.context=gl(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(V0(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&oh.enqueueReplaceState(i,i.state,null),jd(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function wl(t,e){try{var r="",n=e;do r+=N4(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Ip(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function K0(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Q3=typeof WeakMap=="function"?WeakMap:Map;function Sw(t,e,r){r=wa(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Rd||(Rd=!0,i1=n),K0(t,e)},r}function kw(t,e,r){r=wa(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){K0(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){K0(t,e),typeof n!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Ov(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Q3;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=dS.bind(null,t,e,r),e.then(t,t))}function jv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tv(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=wa(-1,1),e.tag=2,io(r,e,1))),r.lanes|=1),t)}var Z3=Na.ReactCurrentOwner,Mn=!1;function xn(t,e,r,n){e.child=t===null?Z5(e,null,r,n):vl(e,t.child,r,n)}function Lv(t,e,r,n,i){r=r.render;var a=e.ref;return sl(e,i),n=Eg(t,e,r,n,a,i),r=Og(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sa(t,e,i)):(cr&&r&&gg(e),e.flags|=1,xn(t,e,n,i),e.child)}function Pv(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!Bg(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,Nw(t,e,a,n,i)):(t=id(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:ec,r(o,n)&&t.ref===e.ref)return Sa(t,e,i)}return e.flags|=1,t=so(a,n),t.ref=e.ref,t.return=e,e.child=t}function Nw(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(ec(a,n)&&t.ref===e.ref)if(Mn=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(Mn=!0);else return e.lanes=t.lanes,Sa(t,e,i)}return Y0(t,e,r,n,i)}function Aw(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr(tl,Kn),Kn|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nr(tl,Kn),Kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,nr(tl,Kn),Kn|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,nr(tl,Kn),Kn|=n;return xn(t,e,i,r),e.child}function Ew(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Y0(t,e,r,n,i){var a=Fn(r)?Ko:gn.current;return a=gl(e,a),sl(e,i),r=Eg(t,e,r,n,a,i),n=Og(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sa(t,e,i)):(cr&&n&&gg(e),e.flags|=1,xn(t,e,r,i),e.child)}function Cv(t,e,r,n,i){if(Fn(r)){var a=!0;kd(e)}else a=!1;if(sl(e,i),e.stateNode===null)td(t,e),_w(e,r,n),G0(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=gi(c):(c=Fn(r)?Ko:gn.current,c=gl(e,c));var p=r.getDerivedStateFromProps,d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==c)&&Ev(e,o,n,c),Ga=!1;var f=e.memoizedState;o.state=f,jd(e,n,o,i),l=e.memoizedState,s!==n||f!==l||Bn.current||Ga?(typeof p=="function"&&(V0(e,r,p,n),l=e.memoizedState),(s=Ga||Av(e,r,s,n,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,tw(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:ji(e.type,s),o.props=c,d=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=gi(l):(l=Fn(r)?Ko:gn.current,l=gl(e,l));var u=r.getDerivedStateFromProps;(p=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||f!==l)&&Ev(e,o,n,l),Ga=!1,f=e.memoizedState,o.state=f,jd(e,n,o,i);var y=e.memoizedState;s!==d||f!==y||Bn.current||Ga?(typeof u=="function"&&(V0(e,r,u,n),y=e.memoizedState),(c=Ga||Av(e,r,c,n,f,y,l)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),o.props=n,o.state=y,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return J0(t,e,r,n,a,i)}function J0(t,e,r,n,i,a){Ew(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&yv(e,r,!1),Sa(t,e,a);n=e.stateNode,Z3.current=e;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=vl(e,t.child,null,a),e.child=vl(e,null,s,a)):xn(t,e,s,a),e.memoizedState=n.state,i&&yv(e,r,!0),e.child}function Ow(t){var e=t.stateNode;e.pendingContext?vv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vv(t,e.context,!1),Sg(t,e.containerInfo)}function Rv(t,e,r,n,i){return ml(),vg(i),e.flags|=256,xn(t,e,r,n),e.child}var X0={dehydrated:null,treeContext:null,retryLane:0};function Q0(t){return{baseLanes:t,cachePool:null,transitions:null}}function jw(t,e,r){var n=e.pendingProps,i=hr.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),nr(hr,i&1),t===null)return H0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=uh(o,n,0,null),t=Vo(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Q0(r),e.memoizedState=X0,t):Lg(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return eS(t,e,o,n,s,i,r);if(a){a=n.fallback,o=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=so(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=so(s,a):(a=Vo(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?Q0(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=X0,n}return a=t.child,t=a.sibling,n=so(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Lg(t,e){return e=uh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kf(t,e,r,n){return n!==null&&vg(n),vl(e,t.child,null,r),t=Lg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eS(t,e,r,n,i,a,o){if(r)return e.flags&256?(e.flags&=-257,n=Ip(Error(Fe(422))),kf(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=uh({mode:"visible",children:n.children},i,0,null),a=Vo(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&vl(e,t.child,null,o),e.child.memoizedState=Q0(o),e.memoizedState=X0,a);if(!(e.mode&1))return kf(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,a=Error(Fe(419)),n=Ip(a,n,void 0),kf(t,e,o,n)}if(s=(o&t.childLanes)!==0,Mn||s){if(n=Yr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,_a(t,i),Di(n,t,i,-1))}return Mg(),n=Ip(Error(Fe(421))),kf(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=hS.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Qn=no(i.nextSibling),ei=e,cr=!0,Ri=null,t!==null&&(fi[di++]=va,fi[di++]=ya,fi[di++]=Yo,va=t.id,ya=t.overflow,Yo=e),e=Lg(e,n.children),e.flags|=4096,e)}function Iv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),W0(t.return,e,r)}function Dp(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Tw(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(xn(t,e,n.children,r),n=hr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iv(t,r,e);else if(t.tag===19)Iv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(nr(hr,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Td(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Dp(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Td(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Dp(e,!0,r,null,a);break;case"together":Dp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function td(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Sa(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Xo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,r=so(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=so(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function tS(t,e,r){switch(e.tag){case 3:Ow(e),ml();break;case 5:rw(e);break;case 1:Fn(e.type)&&kd(e);break;case 4:Sg(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;nr(Ed,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(nr(hr,hr.current&1),e.flags|=128,null):r&e.child.childLanes?jw(t,e,r):(nr(hr,hr.current&1),t=Sa(t,e,r),t!==null?t.sibling:null);nr(hr,hr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Tw(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),nr(hr,hr.current),n)break;return null;case 22:case 23:return e.lanes=0,Aw(t,e,r)}return Sa(t,e,r)}var Lw,Z0,Pw,Cw;Lw=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Z0=function(){};Pw=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,$o(Qi.current);var a=null;switch(r){case"input":i=x0(t,i),n=x0(t,n),a=[];break;case"select":i=gr({},i,{value:void 0}),n=gr({},n,{value:void 0}),a=[];break;case"textarea":i=k0(t,i),n=k0(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=_d)}A0(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Gu.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var l=n[c];if(s=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(a||(a=[]),a.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Gu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ar("scroll",t),a||s===l||(a=[])):(a=a||[]).push(c,l))}r&&(a=a||[]).push("style",r);var c=a;(e.updateQueue=c)&&(e.flags|=4)}};Cw=function(t,e,r,n){r!==n&&(e.flags|=4)};function mu(t,e){if(!cr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function rS(t,e,r){var n=e.pendingProps;switch(mg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return Fn(e.type)&&Sd(),ln(e),null;case 3:return n=e.stateNode,yl(),lr(Bn),lr(gn),Ng(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(_f(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ri!==null&&(s1(Ri),Ri=null))),Z0(t,e),ln(e),null;case 5:kg(e);var i=$o(ac.current);if(r=e.type,t!==null&&e.stateNode!=null)Pw(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Fe(166));return ln(e),null}if(t=$o(Qi.current),_f(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Yi]=e,n[nc]=a,t=(e.mode&1)!==0,r){case"dialog":ar("cancel",n),ar("close",n);break;case"iframe":case"object":case"embed":ar("load",n);break;case"video":case"audio":for(i=0;i<Cu.length;i++)ar(Cu[i],n);break;case"source":ar("error",n);break;case"img":case"image":case"link":ar("error",n),ar("load",n);break;case"details":ar("toggle",n);break;case"input":Hm(n,a),ar("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},ar("invalid",n);break;case"textarea":Vm(n,a),ar("invalid",n)}A0(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?n.textContent!==s&&(a.suppressHydrationWarning!==!0&&xf(n.textContent,s,t),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&xf(n.textContent,s,t),i=["children",""+s]):Gu.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&ar("scroll",n)}switch(r){case"input":hf(n),Wm(n,a,!0);break;case"textarea":hf(n),Gm(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=_d)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=s5(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Yi]=e,t[nc]=n,Lw(t,e,!1,!1),e.stateNode=t;e:{switch(o=E0(r,n),r){case"dialog":ar("cancel",t),ar("close",t),i=n;break;case"iframe":case"object":case"embed":ar("load",t),i=n;break;case"video":case"audio":for(i=0;i<Cu.length;i++)ar(Cu[i],t);i=n;break;case"source":ar("error",t),i=n;break;case"img":case"image":case"link":ar("error",t),ar("load",t),i=n;break;case"details":ar("toggle",t),i=n;break;case"input":Hm(t,n),i=x0(t,n),ar("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=gr({},n,{value:void 0}),ar("invalid",t);break;case"textarea":Vm(t,n),i=k0(t,n),ar("invalid",t);break;default:i=n}A0(r,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?c5(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&l5(t,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Ku(t,l):typeof l=="number"&&Ku(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Gu.hasOwnProperty(a)?l!=null&&a==="onScroll"&&ar("scroll",t):l!=null&&tg(t,a,l,o))}switch(r){case"input":hf(t),Wm(t,n,!1);break;case"textarea":hf(t),Gm(t);break;case"option":n.value!=null&&t.setAttribute("value",""+lo(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?nl(t,!!n.multiple,a,!1):n.defaultValue!=null&&nl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=_d)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)Cw(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Fe(166));if(r=$o(ac.current),$o(Qi.current),_f(e)){if(n=e.stateNode,r=e.memoizedProps,n[Yi]=e,(a=n.nodeValue!==r)&&(t=ei,t!==null))switch(t.tag){case 3:xf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xf(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Yi]=e,e.stateNode=n}return ln(e),null;case 13:if(lr(hr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(cr&&Qn!==null&&e.mode&1&&!(e.flags&128))X5(),ml(),e.flags|=98560,a=!1;else if(a=_f(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(Fe(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Fe(317));a[Yi]=e}else ml(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),a=!1}else Ri!==null&&(s1(Ri),Ri=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||hr.current&1?Ur===0&&(Ur=3):Mg())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return yl(),Z0(t,e),t===null&&tc(e.stateNode.containerInfo),ln(e),null;case 10:return bg(e.type._context),ln(e),null;case 17:return Fn(e.type)&&Sd(),ln(e),null;case 19:if(lr(hr),a=e.memoizedState,a===null)return ln(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)mu(a,!1);else{if(Ur!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Td(t),o!==null){for(e.flags|=128,mu(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return nr(hr,hr.current&1|2),e.child}t=t.sibling}a.tail!==null&&Ar()>bl&&(e.flags|=128,n=!0,mu(a,!1),e.lanes=4194304)}else{if(!n)if(t=Td(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),mu(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!cr)return ln(e),null}else 2*Ar()-a.renderingStartTime>bl&&r!==1073741824&&(e.flags|=128,n=!0,mu(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ar(),e.sibling=null,r=hr.current,nr(hr,n?r&1|2:r&1),e):(ln(e),null);case 22:case 23:return Dg(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Kn&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function nS(t,e){switch(mg(e),e.tag){case 1:return Fn(e.type)&&Sd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yl(),lr(Bn),lr(gn),Ng(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kg(e),null;case 13:if(lr(hr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));ml()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lr(hr),null;case 4:return yl(),null;case 10:return bg(e.type._context),null;case 22:case 23:return Dg(),null;case 24:return null;default:return null}}var Nf=!1,hn=!1,iS=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function el(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){wr(t,e,n)}else r.current=null}function e1(t,e,r){try{r()}catch(n){wr(t,e,n)}}var Dv=!1;function aS(t,e){if(M0=wd,t=B5(),pg(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,c=0,p=0,d=t,f=null;t:for(;;){for(var u;d!==r||i!==0&&d.nodeType!==3||(s=o+i),d!==a||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(u=d.firstChild)!==null;)f=d,d=u;for(;;){if(d===t)break t;if(f===r&&++c===i&&(s=o),f===a&&++p===n&&(l=o),(u=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=u}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(B0={focusedElem:t,selectionRange:r},wd=!1,Xe=e;Xe!==null;)if(e=Xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Xe=t;else for(;Xe!==null;){e=Xe;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,b=y.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:ji(e.type,v),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(x){wr(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Xe=t;break}Xe=e.return}return y=Dv,Dv=!1,y}function Uu(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&e1(e,r,a)}i=i.next}while(i!==n)}}function sh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function t1(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Rw(t){var e=t.alternate;e!==null&&(t.alternate=null,Rw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yi],delete e[nc],delete e[U0],delete e[U3],delete e[z3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Iw(t){return t.tag===5||t.tag===3||t.tag===4}function Mv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Iw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function r1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=_d));else if(n!==4&&(t=t.child,t!==null))for(r1(t,e,r),t=t.sibling;t!==null;)r1(t,e,r),t=t.sibling}function n1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(n1(t,e,r),t=t.sibling;t!==null;)n1(t,e,r),t=t.sibling}var Zr=null,Pi=!1;function Ua(t,e,r){for(r=r.child;r!==null;)Dw(t,e,r),r=r.sibling}function Dw(t,e,r){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(Zd,r)}catch{}switch(r.tag){case 5:hn||el(r,e);case 6:var n=Zr,i=Pi;Zr=null,Ua(t,e,r),Zr=n,Pi=i,Zr!==null&&(Pi?(t=Zr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Zr.removeChild(r.stateNode));break;case 18:Zr!==null&&(Pi?(t=Zr,r=r.stateNode,t.nodeType===8?jp(t.parentNode,r):t.nodeType===1&&jp(t,r),Qu(t)):jp(Zr,r.stateNode));break;case 4:n=Zr,i=Pi,Zr=r.stateNode.containerInfo,Pi=!0,Ua(t,e,r),Zr=n,Pi=i;break;case 0:case 11:case 14:case 15:if(!hn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&e1(r,e,o),i=i.next}while(i!==n)}Ua(t,e,r);break;case 1:if(!hn&&(el(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){wr(r,e,s)}Ua(t,e,r);break;case 21:Ua(t,e,r);break;case 22:r.mode&1?(hn=(n=hn)||r.memoizedState!==null,Ua(t,e,r),hn=n):Ua(t,e,r);break;default:Ua(t,e,r)}}function Bv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new iS),e.forEach(function(n){var i=pS.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ki(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:Zr=s.stateNode,Pi=!1;break e;case 3:Zr=s.stateNode.containerInfo,Pi=!0;break e;case 4:Zr=s.stateNode.containerInfo,Pi=!0;break e}s=s.return}if(Zr===null)throw Error(Fe(160));Dw(a,o,i),Zr=null,Pi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){wr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Mw(e,t),e=e.sibling}function Mw(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ki(e,t),Wi(t),n&4){try{Uu(3,t,t.return),sh(3,t)}catch(v){wr(t,t.return,v)}try{Uu(5,t,t.return)}catch(v){wr(t,t.return,v)}}break;case 1:ki(e,t),Wi(t),n&512&&r!==null&&el(r,r.return);break;case 5:if(ki(e,t),Wi(t),n&512&&r!==null&&el(r,r.return),t.flags&32){var i=t.stateNode;try{Ku(i,"")}catch(v){wr(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&a5(i,a),E0(s,o);var c=E0(s,a);for(o=0;o<l.length;o+=2){var p=l[o],d=l[o+1];p==="style"?c5(i,d):p==="dangerouslySetInnerHTML"?l5(i,d):p==="children"?Ku(i,d):tg(i,p,d,c)}switch(s){case"input":_0(i,a);break;case"textarea":o5(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var u=a.value;u!=null?nl(i,!!a.multiple,u,!1):f!==!!a.multiple&&(a.defaultValue!=null?nl(i,!!a.multiple,a.defaultValue,!0):nl(i,!!a.multiple,a.multiple?[]:"",!1))}i[nc]=a}catch(v){wr(t,t.return,v)}}break;case 6:if(ki(e,t),Wi(t),n&4){if(t.stateNode===null)throw Error(Fe(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){wr(t,t.return,v)}}break;case 3:if(ki(e,t),Wi(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Qu(e.containerInfo)}catch(v){wr(t,t.return,v)}break;case 4:ki(e,t),Wi(t);break;case 13:ki(e,t),Wi(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Rg=Ar())),n&4&&Bv(t);break;case 22:if(p=r!==null&&r.memoizedState!==null,t.mode&1?(hn=(c=hn)||p,ki(e,t),hn=c):ki(e,t),Wi(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!p&&t.mode&1)for(Xe=t,p=t.child;p!==null;){for(d=Xe=p;Xe!==null;){switch(f=Xe,u=f.child,f.tag){case 0:case 11:case 14:case 15:Uu(4,f,f.return);break;case 1:el(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){wr(n,r,v)}}break;case 5:el(f,f.return);break;case 22:if(f.memoizedState!==null){qv(d);continue}}u!==null?(u.return=f,Xe=u):qv(d)}p=p.sibling}e:for(p=null,d=t;;){if(d.tag===5){if(p===null){p=d;try{i=d.stateNode,c?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=u5("display",o))}catch(v){wr(t,t.return,v)}}}else if(d.tag===6){if(p===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){wr(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ki(e,t),Wi(t),n&4&&Bv(t);break;case 21:break;default:ki(e,t),Wi(t)}}function Wi(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Iw(r)){var n=r;break e}r=r.return}throw Error(Fe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ku(i,""),n.flags&=-33);var a=Mv(t);n1(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,s=Mv(t);r1(t,s,o);break;default:throw Error(Fe(161))}}catch(l){wr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oS(t,e,r){Xe=t,Bw(t)}function Bw(t,e,r){for(var n=(t.mode&1)!==0;Xe!==null;){var i=Xe,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Nf;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||hn;s=Nf;var c=hn;if(Nf=o,(hn=l)&&!c)for(Xe=i;Xe!==null;)o=Xe,l=o.child,o.tag===22&&o.memoizedState!==null?Uv(i):l!==null?(l.return=o,Xe=l):Uv(i);for(;a!==null;)Xe=a,Bw(a),a=a.sibling;Xe=i,Nf=s,hn=c}Fv(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Xe=a):Fv(t)}}function Fv(t){for(;Xe!==null;){var e=Xe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||sh(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!hn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:ji(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Sv(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Sv(e,o,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var p=c.memoizedState;if(p!==null){var d=p.dehydrated;d!==null&&Qu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}hn||e.flags&512&&t1(e)}catch(f){wr(e,e.return,f)}}if(e===t){Xe=null;break}if(r=e.sibling,r!==null){r.return=e.return,Xe=r;break}Xe=e.return}}function qv(t){for(;Xe!==null;){var e=Xe;if(e===t){Xe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Xe=r;break}Xe=e.return}}function Uv(t){for(;Xe!==null;){var e=Xe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{sh(4,e)}catch(l){wr(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){wr(e,i,l)}}var a=e.return;try{t1(e)}catch(l){wr(e,a,l)}break;case 5:var o=e.return;try{t1(e)}catch(l){wr(e,o,l)}}}catch(l){wr(e,e.return,l)}if(e===t){Xe=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Xe=s;break}Xe=e.return}}var sS=Math.ceil,Cd=Na.ReactCurrentDispatcher,Pg=Na.ReactCurrentOwner,pi=Na.ReactCurrentBatchConfig,Pt=0,Yr=null,Dr=null,en=0,Kn=0,tl=po(0),Ur=0,uc=null,Xo=0,lh=0,Cg=0,zu=null,Dn=null,Rg=0,bl=1/0,pa=null,Rd=!1,i1=null,ao=null,Af=!1,Qa=null,Id=0,$u=0,a1=null,rd=-1,nd=0;function Sn(){return Pt&6?Ar():rd!==-1?rd:rd=Ar()}function oo(t){return t.mode&1?Pt&2&&en!==0?en&-en:H3.transition!==null?(nd===0&&(nd=_5()),nd):(t=Ut,t!==0||(t=window.event,t=t===void 0?16:j5(t.type)),t):1}function Di(t,e,r,n){if(50<$u)throw $u=0,a1=null,Error(Fe(185));vc(t,r,n),(!(Pt&2)||t!==Yr)&&(t===Yr&&(!(Pt&2)&&(lh|=r),Ur===4&&Ya(t,en)),qn(t,n),r===1&&Pt===0&&!(e.mode&1)&&(bl=Ar()+500,ih&&go()))}function qn(t,e){var r=t.callbackNode;H4(t,e);var n=yd(t,t===Yr?en:0);if(n===0)r!==null&&Jm(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Jm(r),e===1)t.tag===0?$3(zv.bind(null,t)):K5(zv.bind(null,t)),F3(function(){!(Pt&6)&&go()}),r=null;else{switch(S5(n)){case 1:r=og;break;case 4:r=b5;break;case 16:r=vd;break;case 536870912:r=x5;break;default:r=vd}r=Vw(r,Fw.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Fw(t,e){if(rd=-1,nd=0,Pt&6)throw Error(Fe(327));var r=t.callbackNode;if(ll()&&t.callbackNode!==r)return null;var n=yd(t,t===Yr?en:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Dd(t,n);else{e=n;var i=Pt;Pt|=2;var a=Uw();(Yr!==t||en!==e)&&(pa=null,bl=Ar()+500,Wo(t,e));do try{cS();break}catch(s){qw(t,s)}while(!0);wg(),Cd.current=a,Pt=i,Dr!==null?e=0:(Yr=null,en=0,e=Ur)}if(e!==0){if(e===2&&(i=P0(t),i!==0&&(n=i,e=o1(t,i))),e===1)throw r=uc,Wo(t,0),Ya(t,n),qn(t,Ar()),r;if(e===6)Ya(t,n);else{if(i=t.current.alternate,!(n&30)&&!lS(i)&&(e=Dd(t,n),e===2&&(a=P0(t),a!==0&&(n=a,e=o1(t,a))),e===1))throw r=uc,Wo(t,0),Ya(t,n),qn(t,Ar()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Fe(345));case 2:Lo(t,Dn,pa);break;case 3:if(Ya(t,n),(n&130023424)===n&&(e=Rg+500-Ar(),10<e)){if(yd(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Sn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=q0(Lo.bind(null,t,Dn,pa),e);break}Lo(t,Dn,pa);break;case 4:if(Ya(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Ii(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=Ar()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*sS(n/1960))-n,10<n){t.timeoutHandle=q0(Lo.bind(null,t,Dn,pa),n);break}Lo(t,Dn,pa);break;case 5:Lo(t,Dn,pa);break;default:throw Error(Fe(329))}}}return qn(t,Ar()),t.callbackNode===r?Fw.bind(null,t):null}function o1(t,e){var r=zu;return t.current.memoizedState.isDehydrated&&(Wo(t,e).flags|=256),t=Dd(t,e),t!==2&&(e=Dn,Dn=r,e!==null&&s1(e)),t}function s1(t){Dn===null?Dn=t:Dn.push.apply(Dn,t)}function lS(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Mi(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ya(t,e){for(e&=~Cg,e&=~lh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ii(e),n=1<<r;t[r]=-1,e&=~n}}function zv(t){if(Pt&6)throw Error(Fe(327));ll();var e=yd(t,0);if(!(e&1))return qn(t,Ar()),null;var r=Dd(t,e);if(t.tag!==0&&r===2){var n=P0(t);n!==0&&(e=n,r=o1(t,n))}if(r===1)throw r=uc,Wo(t,0),Ya(t,e),qn(t,Ar()),r;if(r===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Lo(t,Dn,pa),qn(t,Ar()),null}function Ig(t,e){var r=Pt;Pt|=1;try{return t(e)}finally{Pt=r,Pt===0&&(bl=Ar()+500,ih&&go())}}function Qo(t){Qa!==null&&Qa.tag===0&&!(Pt&6)&&ll();var e=Pt;Pt|=1;var r=pi.transition,n=Ut;try{if(pi.transition=null,Ut=1,t)return t()}finally{Ut=n,pi.transition=r,Pt=e,!(Pt&6)&&go()}}function Dg(){Kn=tl.current,lr(tl)}function Wo(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,B3(r)),Dr!==null)for(r=Dr.return;r!==null;){var n=r;switch(mg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Sd();break;case 3:yl(),lr(Bn),lr(gn),Ng();break;case 5:kg(n);break;case 4:yl();break;case 13:lr(hr);break;case 19:lr(hr);break;case 10:bg(n.type._context);break;case 22:case 23:Dg()}r=r.return}if(Yr=t,Dr=t=so(t.current,null),en=Kn=e,Ur=0,uc=null,Cg=lh=Xo=0,Dn=zu=null,zo!==null){for(e=0;e<zo.length;e++)if(r=zo[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}zo=null}return t}function qw(t,e){do{var r=Dr;try{if(wg(),Zf.current=Pd,Ld){for(var n=pr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ld=!1}if(Jo=0,Gr=qr=pr=null,qu=!1,oc=0,Pg.current=null,r===null||r.return===null){Ur=1,uc=e,Dr=null;break}e:{var a=t,o=r.return,s=r,l=e;if(e=en,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,p=s,d=p.tag;if(!(p.mode&1)&&(d===0||d===11||d===15)){var f=p.alternate;f?(p.updateQueue=f.updateQueue,p.memoizedState=f.memoizedState,p.lanes=f.lanes):(p.updateQueue=null,p.memoizedState=null)}var u=jv(o);if(u!==null){u.flags&=-257,Tv(u,o,s,a,e),u.mode&1&&Ov(a,c,e),e=u,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){Ov(a,c,e),Mg();break e}l=Error(Fe(426))}}else if(cr&&s.mode&1){var b=jv(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Tv(b,o,s,a,e),vg(wl(l,s));break e}}a=l=wl(l,s),Ur!==4&&(Ur=2),zu===null?zu=[a]:zu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=Sw(a,l,e);_v(a,g);break e;case 1:s=l;var m=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ao===null||!ao.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e;var x=kw(a,s,e);_v(a,x);break e}}a=a.return}while(a!==null)}$w(r)}catch(A){e=A,Dr===r&&r!==null&&(Dr=r=r.return);continue}break}while(!0)}function Uw(){var t=Cd.current;return Cd.current=Pd,t===null?Pd:t}function Mg(){(Ur===0||Ur===3||Ur===2)&&(Ur=4),Yr===null||!(Xo&268435455)&&!(lh&268435455)||Ya(Yr,en)}function Dd(t,e){var r=Pt;Pt|=2;var n=Uw();(Yr!==t||en!==e)&&(pa=null,Wo(t,e));do try{uS();break}catch(i){qw(t,i)}while(!0);if(wg(),Pt=r,Cd.current=n,Dr!==null)throw Error(Fe(261));return Yr=null,en=0,Ur}function uS(){for(;Dr!==null;)zw(Dr)}function cS(){for(;Dr!==null&&!I4();)zw(Dr)}function zw(t){var e=Ww(t.alternate,t,Kn);t.memoizedProps=t.pendingProps,e===null?$w(t):Dr=e,Pg.current=null}function $w(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=nS(r,e),r!==null){r.flags&=32767,Dr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ur=6,Dr=null;return}}else if(r=rS(r,e,Kn),r!==null){Dr=r;return}if(e=e.sibling,e!==null){Dr=e;return}Dr=e=t}while(e!==null);Ur===0&&(Ur=5)}function Lo(t,e,r){var n=Ut,i=pi.transition;try{pi.transition=null,Ut=1,fS(t,e,r,n)}finally{pi.transition=i,Ut=n}return null}function fS(t,e,r,n){do ll();while(Qa!==null);if(Pt&6)throw Error(Fe(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(W4(t,a),t===Yr&&(Dr=Yr=null,en=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Af||(Af=!0,Vw(vd,function(){return ll(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=pi.transition,pi.transition=null;var o=Ut;Ut=1;var s=Pt;Pt|=4,Pg.current=null,aS(t,r),Mw(r,t),L3(B0),wd=!!M0,B0=M0=null,t.current=r,oS(r),D4(),Pt=s,Ut=o,pi.transition=a}else t.current=r;if(Af&&(Af=!1,Qa=t,Id=i),a=t.pendingLanes,a===0&&(ao=null),F4(r.stateNode),qn(t,Ar()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Rd)throw Rd=!1,t=i1,i1=null,t;return Id&1&&t.tag!==0&&ll(),a=t.pendingLanes,a&1?t===a1?$u++:($u=0,a1=t):$u=0,go(),null}function ll(){if(Qa!==null){var t=S5(Id),e=pi.transition,r=Ut;try{if(pi.transition=null,Ut=16>t?16:t,Qa===null)var n=!1;else{if(t=Qa,Qa=null,Id=0,Pt&6)throw Error(Fe(331));var i=Pt;for(Pt|=4,Xe=t.current;Xe!==null;){var a=Xe,o=a.child;if(Xe.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(Xe=c;Xe!==null;){var p=Xe;switch(p.tag){case 0:case 11:case 15:Uu(8,p,a)}var d=p.child;if(d!==null)d.return=p,Xe=d;else for(;Xe!==null;){p=Xe;var f=p.sibling,u=p.return;if(Rw(p),p===c){Xe=null;break}if(f!==null){f.return=u,Xe=f;break}Xe=u}}}var y=a.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}Xe=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Xe=o;else e:for(;Xe!==null;){if(a=Xe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Uu(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,Xe=g;break e}Xe=a.return}}var m=t.current;for(Xe=m;Xe!==null;){o=Xe;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Xe=_;else e:for(o=m;Xe!==null;){if(s=Xe,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:sh(9,s)}}catch(A){wr(s,s.return,A)}if(s===o){Xe=null;break e}var x=s.sibling;if(x!==null){x.return=s.return,Xe=x;break e}Xe=s.return}}if(Pt=i,go(),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(Zd,t)}catch{}n=!0}return n}finally{Ut=r,pi.transition=e}}return!1}function $v(t,e,r){e=wl(r,e),e=Sw(t,e,1),t=io(t,e,1),e=Sn(),t!==null&&(vc(t,1,e),qn(t,e))}function wr(t,e,r){if(t.tag===3)$v(t,t,r);else for(;e!==null;){if(e.tag===3){$v(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ao===null||!ao.has(n))){t=wl(r,t),t=kw(e,t,1),e=io(e,t,1),t=Sn(),e!==null&&(vc(e,1,t),qn(e,t));break}}e=e.return}}function dS(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Sn(),t.pingedLanes|=t.suspendedLanes&r,Yr===t&&(en&r)===r&&(Ur===4||Ur===3&&(en&130023424)===en&&500>Ar()-Rg?Wo(t,0):Cg|=r),qn(t,e)}function Hw(t,e){e===0&&(t.mode&1?(e=mf,mf<<=1,!(mf&130023424)&&(mf=4194304)):e=1);var r=Sn();t=_a(t,e),t!==null&&(vc(t,e,r),qn(t,r))}function hS(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Hw(t,r)}function pS(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Fe(314))}n!==null&&n.delete(e),Hw(t,r)}var Ww;Ww=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bn.current)Mn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Mn=!1,tS(t,e,r);Mn=!!(t.flags&131072)}else Mn=!1,cr&&e.flags&1048576&&Y5(e,Ad,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;td(t,e),t=e.pendingProps;var i=gl(e,gn.current);sl(e,r),i=Eg(null,e,n,t,i,r);var a=Og();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fn(n)?(a=!0,kd(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_g(e),i.updater=oh,e.stateNode=i,i._reactInternals=e,G0(e,n,t,r),e=J0(null,e,n,!0,a,r)):(e.tag=0,cr&&a&&gg(e),xn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(td(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=mS(n),t=ji(n,t),i){case 0:e=Y0(null,e,n,t,r);break e;case 1:e=Cv(null,e,n,t,r);break e;case 11:e=Lv(null,e,n,t,r);break e;case 14:e=Pv(null,e,n,ji(n.type,t),r);break e}throw Error(Fe(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ji(n,i),Y0(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ji(n,i),Cv(t,e,n,i,r);case 3:e:{if(Ow(e),t===null)throw Error(Fe(387));n=e.pendingProps,a=e.memoizedState,i=a.element,tw(t,e),jd(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=wl(Error(Fe(423)),e),e=Rv(t,e,n,r,i);break e}else if(n!==i){i=wl(Error(Fe(424)),e),e=Rv(t,e,n,r,i);break e}else for(Qn=no(e.stateNode.containerInfo.firstChild),ei=e,cr=!0,Ri=null,r=Z5(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ml(),n===i){e=Sa(t,e,r);break e}xn(t,e,n,r)}e=e.child}return e;case 5:return rw(e),t===null&&H0(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,F0(n,i)?o=null:a!==null&&F0(n,a)&&(e.flags|=32),Ew(t,e),xn(t,e,o,r),e.child;case 6:return t===null&&H0(e),null;case 13:return jw(t,e,r);case 4:return Sg(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=vl(e,null,n,r):xn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ji(n,i),Lv(t,e,n,i,r);case 7:return xn(t,e,e.pendingProps,r),e.child;case 8:return xn(t,e,e.pendingProps.children,r),e.child;case 12:return xn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,nr(Ed,n._currentValue),n._currentValue=o,a!==null)if(Mi(a.value,o)){if(a.children===i.children&&!Bn.current){e=Sa(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=wa(-1,r&-r),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var p=c.pending;p===null?l.next=l:(l.next=p.next,p.next=l),c.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),W0(a.return,r,e),s.lanes|=r;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Fe(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),W0(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}xn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,sl(e,r),i=gi(i),n=n(i),e.flags|=1,xn(t,e,n,r),e.child;case 14:return n=e.type,i=ji(n,e.pendingProps),i=ji(n.type,i),Pv(t,e,n,i,r);case 15:return Nw(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ji(n,i),td(t,e),e.tag=1,Fn(n)?(t=!0,kd(e)):t=!1,sl(e,r),_w(e,n,i),G0(e,n,i,r),J0(null,e,n,!0,t,r);case 19:return Tw(t,e,r);case 22:return Aw(t,e,r)}throw Error(Fe(156,e.tag))};function Vw(t,e){return w5(t,e)}function gS(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hi(t,e,r,n){return new gS(t,e,r,n)}function Bg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mS(t){if(typeof t=="function")return Bg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ng)return 11;if(t===ig)return 14}return 2}function so(t,e){var r=t.alternate;return r===null?(r=hi(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function id(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")Bg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ws:return Vo(r.children,i,a,e);case rg:o=8,i|=8;break;case v0:return t=hi(12,r,e,i|2),t.elementType=v0,t.lanes=a,t;case y0:return t=hi(13,r,e,i),t.elementType=y0,t.lanes=a,t;case w0:return t=hi(19,r,e,i),t.elementType=w0,t.lanes=a,t;case r5:return uh(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case e5:o=10;break e;case t5:o=9;break e;case ng:o=11;break e;case ig:o=14;break e;case Va:o=16,n=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=hi(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Vo(t,e,r,n){return t=hi(7,t,n,e),t.lanes=r,t}function uh(t,e,r,n){return t=hi(22,t,n,e),t.elementType=r5,t.lanes=r,t.stateNode={isHidden:!1},t}function Mp(t,e,r){return t=hi(6,t,null,e),t.lanes=r,t}function Bp(t,e,r){return e=hi(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vS(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yp(0),this.expirationTimes=yp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yp(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fg(t,e,r,n,i,a,o,s,l){return t=new vS(t,e,r,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=hi(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},_g(a),t}function yS(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hs,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Gw(t){if(!t)return uo;t=t._reactInternals;e:{if(ns(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var r=t.type;if(Fn(r))return G5(t,r,e)}return e}function Kw(t,e,r,n,i,a,o,s,l){return t=Fg(r,n,!0,t,i,a,o,s,l),t.context=Gw(null),r=t.current,n=Sn(),i=oo(r),a=wa(n,i),a.callback=e??null,io(r,a,i),t.current.lanes=i,vc(t,i,n),qn(t,n),t}function ch(t,e,r,n){var i=e.current,a=Sn(),o=oo(i);return r=Gw(r),e.context===null?e.context=r:e.pendingContext=r,e=wa(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=io(i,e,o),t!==null&&(Di(t,i,o,a),Qf(t,i,o)),o}function Md(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function qg(t,e){Hv(t,e),(t=t.alternate)&&Hv(t,e)}function wS(){return null}var Yw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ug(t){this._internalRoot=t}fh.prototype.render=Ug.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));ch(t,e,null,null)};fh.prototype.unmount=Ug.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qo(function(){ch(null,t,null,null)}),e[xa]=null}};function fh(t){this._internalRoot=t}fh.prototype.unstable_scheduleHydration=function(t){if(t){var e=A5();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ka.length&&e!==0&&e<Ka[r].priority;r++);Ka.splice(r,0,t),r===0&&O5(t)}};function zg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wv(){}function bS(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var c=Md(o);a.call(c)}}var o=Kw(e,n,t,0,null,!1,!1,"",Wv);return t._reactRootContainer=o,t[xa]=o.current,tc(t.nodeType===8?t.parentNode:t),Qo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var c=Md(l);s.call(c)}}var l=Fg(t,0,!1,null,null,!1,!1,"",Wv);return t._reactRootContainer=l,t[xa]=l.current,tc(t.nodeType===8?t.parentNode:t),Qo(function(){ch(e,l,r,n)}),l}function hh(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=Md(o);s.call(l)}}ch(e,o,t,i)}else o=bS(r,e,t,i,n);return Md(o)}k5=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Pu(e.pendingLanes);r!==0&&(sg(e,r|1),qn(e,Ar()),!(Pt&6)&&(bl=Ar()+500,go()))}break;case 13:Qo(function(){var n=_a(t,1);if(n!==null){var i=Sn();Di(n,t,1,i)}}),qg(t,1)}};lg=function(t){if(t.tag===13){var e=_a(t,134217728);if(e!==null){var r=Sn();Di(e,t,134217728,r)}qg(t,134217728)}};N5=function(t){if(t.tag===13){var e=oo(t),r=_a(t,e);if(r!==null){var n=Sn();Di(r,t,e,n)}qg(t,e)}};A5=function(){return Ut};E5=function(t,e){var r=Ut;try{return Ut=t,e()}finally{Ut=r}};j0=function(t,e,r){switch(e){case"input":if(_0(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=nh(n);if(!i)throw Error(Fe(90));i5(n),_0(n,i)}}}break;case"textarea":o5(t,r);break;case"select":e=r.value,e!=null&&nl(t,!!r.multiple,e,!1)}};h5=Ig;p5=Qo;var xS={usingClientEntryPoint:!1,Events:[wc,Ys,nh,f5,d5,Ig]},vu={findFiberByHostInstance:Uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_S={bundleType:vu.bundleType,version:vu.version,rendererPackageName:vu.rendererPackageName,rendererConfig:vu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Na.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=v5(t),t===null?null:t.stateNode},findFiberByHostInstance:vu.findFiberByHostInstance||wS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ef.isDisabled&&Ef.supportsFiber)try{Zd=Ef.inject(_S),Xi=Ef}catch{}}ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xS;ri.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zg(e))throw Error(Fe(200));return yS(t,e,null,r)};ri.createRoot=function(t,e){if(!zg(t))throw Error(Fe(299));var r=!1,n="",i=Yw;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Fg(t,1,!1,null,null,r,!1,n,i),t[xa]=e.current,tc(t.nodeType===8?t.parentNode:t),new Ug(e)};ri.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=v5(e),t=t===null?null:t.stateNode,t};ri.flushSync=function(t){return Qo(t)};ri.hydrate=function(t,e,r){if(!dh(e))throw Error(Fe(200));return hh(null,t,e,!0,r)};ri.hydrateRoot=function(t,e,r){if(!zg(t))throw Error(Fe(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=Yw;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Kw(e,null,t,1,r??null,i,!1,a,o),t[xa]=e.current,tc(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new fh(e)};ri.render=function(t,e,r){if(!dh(e))throw Error(Fe(200));return hh(null,t,e,!1,r)};ri.unmountComponentAtNode=function(t){if(!dh(t))throw Error(Fe(40));return t._reactRootContainer?(Qo(function(){hh(null,null,t,!1,function(){t._reactRootContainer=null,t[xa]=null})}),!0):!1};ri.unstable_batchedUpdates=Ig;ri.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!dh(r))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return hh(t,e,r,!1,n)};ri.version="18.3.1-next-f1338f8080-20240426";function Jw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jw)}catch(t){console.error(t)}}Jw(),Jy.exports=ri;var $g=Jy.exports;const Hg=Xd($g);var Vv=$g;g0.createRoot=Vv.createRoot,g0.hydrateRoot=Vv.hydrateRoot;var l1=function(t,e){return l1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},l1(t,e)};function Wg(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");l1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Rr=function(){return Rr=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Rr.apply(this,arguments)};function Al(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Xw(t,e,r,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function Qw(t,e){return function(r,n){e(r,n,t)}}function Zw(t,e,r,n,i,a){function o(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var s=n.kind,l=s==="getter"?"get":s==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,p=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),d,f=!1,u=r.length-1;u>=0;u--){var y={};for(var v in n)y[v]=v==="access"?{}:n[v];for(var v in n.access)y.access[v]=n.access[v];y.addInitializer=function(g){if(f)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(g||null))};var b=(0,r[u])(s==="accessor"?{get:p.get,set:p.set}:p[l],y);if(s==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(d=o(b.get))&&(p.get=d),(d=o(b.set))&&(p.set=d),(d=o(b.init))&&i.unshift(d)}else(d=o(b))&&(s==="field"?i.unshift(d):p[l]=d)}c&&Object.defineProperty(c,n.name,p),f=!0}function eb(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function tb(t){return typeof t=="symbol"?t:"".concat(t)}function rb(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function nb(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ze(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(p){try{c(n.next(p))}catch(d){o(d)}}function l(p){try{c(n.throw(p))}catch(d){o(d)}}function c(p){p.done?a(p.value):i(p.value).then(s,l)}c((n=n.apply(t,e||[])).next())})}function ib(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(p){return l([c,p])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(p){c=[6,p],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var ph=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function ab(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ph(e,t,r)}function Bd(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vg(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function ob(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Vg(arguments[e]));return t}function sb(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function lb(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function xl(t){return this instanceof xl?(this.v=t,this):new xl(t)}function ub(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(u){return function(y){return Promise.resolve(y).then(u,d)}}function s(u,y){n[u]&&(i[u]=function(v){return new Promise(function(b,g){a.push([u,v,b,g])>1||l(u,v)})},y&&(i[u]=y(i[u])))}function l(u,y){try{c(n[u](y))}catch(v){f(a[0][3],v)}}function c(u){u.value instanceof xl?Promise.resolve(u.value.v).then(p,d):f(a[0][2],u)}function p(u){l("next",u)}function d(u){l("throw",u)}function f(u,y){u(y),a.shift(),a.length&&l(a[0][0],a[0][1])}}function cb(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=t[i]?function(o){return(r=!r)?{value:xl(t[i](o)),done:!1}:a?a(o):o}:a}}function fb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Bd=="function"?Bd(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(o){return new Promise(function(s,l){o=t[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(c){a({value:c,done:s})},o)}}function db(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var SS=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},u1=function(t){return u1=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},u1(t)};function hb(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=u1(t),n=0;n<r.length;n++)r[n]!=="default"&&ph(e,t,r[n]);return SS(e,t),e}function pb(t){return t&&t.__esModule?t:{default:t}}function gb(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function mb(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function vb(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function yb(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var kS=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function wb(t){function e(a){t.error=t.hasError?new kS(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function bb(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,a,o){return n?e?".jsx":".js":i&&(!a||!o)?r:i+a+"."+o.toLowerCase()+"js"}):t}const NS={__extends:Wg,__assign:Rr,__rest:Al,__decorate:Xw,__param:Qw,__esDecorate:Zw,__runInitializers:eb,__propKey:tb,__setFunctionName:rb,__metadata:nb,__awaiter:Ze,__generator:ib,__createBinding:ph,__exportStar:ab,__values:Bd,__read:Vg,__spread:ob,__spreadArrays:sb,__spreadArray:lb,__await:xl,__asyncGenerator:ub,__asyncDelegator:cb,__asyncValues:fb,__makeTemplateObject:db,__importStar:hb,__importDefault:pb,__classPrivateFieldGet:gb,__classPrivateFieldSet:mb,__classPrivateFieldIn:vb,__addDisposableResource:yb,__disposeResources:wb,__rewriteRelativeImportExtension:bb},AS=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:yb,get __assign(){return Rr},__asyncDelegator:cb,__asyncGenerator:ub,__asyncValues:fb,__await:xl,__awaiter:Ze,__classPrivateFieldGet:gb,__classPrivateFieldIn:vb,__classPrivateFieldSet:mb,__createBinding:ph,__decorate:Xw,__disposeResources:wb,__esDecorate:Zw,__exportStar:ab,__extends:Wg,__generator:ib,__importDefault:pb,__importStar:hb,__makeTemplateObject:db,__metadata:nb,__param:Qw,__propKey:tb,__read:Vg,__rest:Al,__rewriteRelativeImportExtension:bb,__runInitializers:eb,__setFunctionName:rb,__spread:ob,__spreadArray:lb,__spreadArrays:sb,__values:Bd,default:NS},Symbol.toStringTag,{value:"Module"})),ES=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Gg extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class OS extends Gg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Gv extends Gg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Kv extends Gg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var c1;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(c1||(c1={}));class jS{constructor(e,{headers:r={},customFetch:n,region:i=c1.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=ES(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ze(this,arguments,void 0,function*(r,n={}){var i;let a,o;try{const{headers:s,method:l,body:c,signal:p,timeout:d}=n;let f={},{region:u}=n;u||(u=this.region);const y=new URL(`${this.url}/${r}`);u&&u!=="any"&&(f["x-region"]=u,y.searchParams.set("forceFunctionRegion",u));let v;c&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(f["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(f["Content-Type"]="application/json",v=JSON.stringify(c)):v=c;let b=p;d&&(o=new AbortController,a=setTimeout(()=>o.abort(),d),p?(b=o.signal,p.addEventListener("abort",()=>o.abort())):b=o.signal);const g=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),s),body:v,signal:b}).catch(A=>{throw new OS(A)}),m=g.headers.get("x-relay-error");if(m&&m==="true")throw new Gv(g);if(!g.ok)throw new Kv(g);let _=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),x;return _==="application/json"?x=yield g.json():_==="application/octet-stream"||_==="application/pdf"?x=yield g.blob():_==="text/event-stream"?x=g:_==="multipart/form-data"?x=yield g.formData():x=yield g.text(),{data:x,error:null,response:g}}catch(s){return{data:null,error:s,response:s instanceof Kv||s instanceof Gv?s.context:void 0}}finally{a&&clearTimeout(a)}})}}var _n={};const El=X_(AS);var Of={},jf={},Tf={},Lf={},Pf={},Cf={},Yv;function xb(){if(Yv)return Cf;Yv=1,Object.defineProperty(Cf,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Cf.default=t,Cf}var Jv;function _b(){if(Jv)return Pf;Jv=1,Object.defineProperty(Pf,"__esModule",{value:!0});const e=El.__importDefault(xb());class r{constructor(i){var a,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let s=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,p,d,f;let u=null,y=null,v=null,b=l.status,g=l.statusText;if(l.ok){if(this.method!=="HEAD"){const A=await l.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?y=A:y=JSON.parse(A))}const _=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),x=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");_&&x&&x.length>1&&(v=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(u={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,v=null,b=406,g="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const _=await l.text();try{u=JSON.parse(_),Array.isArray(u)&&l.status===404&&(y=[],u=null,b=200,g="OK")}catch{l.status===404&&_===""?(b=204,g="No Content"):u={message:_}}if(u&&this.isMaybeSingle&&(!((f=u==null?void 0:u.details)===null||f===void 0)&&f.includes("0 rows"))&&(u=null,b=200,g="OK"),u&&this.shouldThrowOnError)throw new e.default(u)}return{error:u,data:y,count:v,status:b,statusText:g}});return this.shouldThrowOnError||(s=s.catch(l=>{var c,p,d,f,u,y;let v="";const b=l==null?void 0:l.cause;if(b){const g=(c=b==null?void 0:b.message)!==null&&c!==void 0?c:"",m=(p=b==null?void 0:b.code)!==null&&p!==void 0?p:"";v=`${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"FetchError"}: ${l==null?void 0:l.message}`,v+=`

Caused by: ${(f=b==null?void 0:b.name)!==null&&f!==void 0?f:"Error"}: ${g}`,m&&(v+=` (${m})`),b!=null&&b.stack&&(v+=`
${b.stack}`)}else v=(u=l==null?void 0:l.stack)!==null&&u!==void 0?u:"";return{error:{message:`${(y=l==null?void 0:l.name)!==null&&y!==void 0?y:"FetchError"}: ${l==null?void 0:l.message}`,details:v,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(i,a)}returns(){return this}overrideTypes(){return this}}return Pf.default=r,Pf}var Xv;function Sb(){if(Xv)return Lf;Xv=1,Object.defineProperty(Lf,"__esModule",{value:!0});const e=El.__importDefault(_b());class r extends e.default{select(i){let a=!1;const o=(i??"*").split("").map(s=>/\s/.test(s)&&!a?"":(s==='"'&&(a=!a),s)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:s,referencedTable:l=s}={}){const c=l?`${l}.order`:"order",p=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${p?`${p},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const s=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:s=o}={}){const l=typeof s>"u"?"offset":`${s}.offset`,c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:s=!1,wal:l=!1,format:c="text"}={}){var p;const d=[i?"analyze":null,a?"verbose":null,o?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Lf.default=r,Lf}var Qv;function Kg(){if(Qv)return Tf;Qv=1,Object.defineProperty(Tf,"__esModule",{value:!0});const e=El.__importDefault(Sb()),r=new RegExp("[,()]");class n extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}regexMatch(a,o){return this.url.searchParams.append(a,`match.${o}`),this}regexIMatch(a,o){return this.url.searchParams.append(a,`imatch.${o}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}isDistinct(a,o){return this.url.searchParams.append(a,`isdistinct.${o}`),this}in(a,o){const s=Array.from(new Set(o)).map(l=>typeof l=="string"&&r.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`in.(${s})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:s,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const p=s===void 0?"":`(${s})`;return this.url.searchParams.append(a,`${c}fts${p}.${o}`),this}match(a){return Object.entries(a).forEach(([o,s])=>{this.url.searchParams.append(o,`eq.${s}`)}),this}not(a,o,s){return this.url.searchParams.append(a,`not.${o}.${s}`),this}or(a,{foreignTable:o,referencedTable:s=o}={}){const l=s?`${s}.or`:"or";return this.url.searchParams.append(l,`(${a})`),this}filter(a,o,s){return this.url.searchParams.append(a,`${o}.${s}`),this}}return Tf.default=n,Tf}var Zv;function kb(){if(Zv)return jf;Zv=1,Object.defineProperty(jf,"__esModule",{value:!0});const e=El.__importDefault(Kg());class r{constructor(i,{headers:a={},schema:o,fetch:s}){this.url=i,this.headers=new Headers(a),this.schema=o,this.fetch=s}select(i,a){const{head:o=!1,count:s}=a??{},l=o?"HEAD":"GET";let c=!1;const p=(i??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",p),s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:o=!0}={}){var s;const l="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((p,d)=>p.concat(Object.keys(d)),[]);if(c.length>0){const p=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:s,defaultToNull:l=!0}={}){var c;const p="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((f,u)=>f.concat(Object.keys(u)),[]);if(d.length>0){const f=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:a}={}){var o;const s="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var a;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return jf.default=r,jf}var e2;function TS(){if(e2)return Of;e2=1,Object.defineProperty(Of,"__esModule",{value:!0});const t=El,e=t.__importDefault(kb()),r=t.__importDefault(Kg());class n{constructor(a,{headers:o={},schema:s,fetch:l}={}){this.url=a,this.headers=new Headers(o),this.schemaName=s,this.fetch=l}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:s=!1,get:l=!1,count:c}={}){var p;let d;const f=new URL(`${this.url}/rpc/${a}`);let u;s||l?(d=s?"HEAD":"GET",Object.entries(o).filter(([v,b])=>b!==void 0).map(([v,b])=>[v,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([v,b])=>{f.searchParams.append(v,b)})):(d="POST",u=o);const y=new Headers(this.headers);return c&&y.set("Prefer",`count=${c}`),new r.default({method:d,url:f,headers:y,schema:this.schemaName,body:u,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return Of.default=n,Of}Object.defineProperty(_n,"__esModule",{value:!0});var Nb=_n.PostgrestError=Ib=_n.PostgrestBuilder=Cb=_n.PostgrestTransformBuilder=Lb=_n.PostgrestFilterBuilder=jb=_n.PostgrestQueryBuilder=Eb=_n.PostgrestClient=void 0;const Ol=El,Ab=Ol.__importDefault(TS());var Eb=_n.PostgrestClient=Ab.default;const Ob=Ol.__importDefault(kb());var jb=_n.PostgrestQueryBuilder=Ob.default;const Tb=Ol.__importDefault(Kg());var Lb=_n.PostgrestFilterBuilder=Tb.default;const Pb=Ol.__importDefault(Sb());var Cb=_n.PostgrestTransformBuilder=Pb.default;const Rb=Ol.__importDefault(_b());var Ib=_n.PostgrestBuilder=Rb.default;const Db=Ol.__importDefault(xb());Nb=_n.PostgrestError=Db.default;var Mb=_n.default={PostgrestClient:Ab.default,PostgrestQueryBuilder:Ob.default,PostgrestFilterBuilder:Tb.default,PostgrestTransformBuilder:Pb.default,PostgrestBuilder:Rb.default,PostgrestError:Db.default};const LS=J_({__proto__:null,get PostgrestBuilder(){return Ib},get PostgrestClient(){return Eb},get PostgrestError(){return Nb},get PostgrestFilterBuilder(){return Lb},get PostgrestQueryBuilder(){return jb},get PostgrestTransformBuilder(){return Cb},default:Mb},[_n]),{PostgrestClient:PS,PostgrestQueryBuilder:qC,PostgrestFilterBuilder:UC,PostgrestTransformBuilder:zC,PostgrestBuilder:$C,PostgrestError:HC}=Mb||LS;class CS{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const RS="2.86.0",IS=`realtime-js/${RS}`,Bb="1.0.0",DS="2.0.0",t2=Bb,f1=1e4,MS=1e3,BS=100;var Do;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Do||(Do={}));var Fr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Fr||(Fr={}));var Ci;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ci||(Ci={}));var d1;(function(t){t.websocket="websocket"})(d1||(d1={}));var Mo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Mo||(Mo={}));class FS{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var i,a;const o=e.topic,s=(i=e.ref)!==null&&i!==void 0?i:"",l=(a=e.join_ref)!==null&&a!==void 0?a:"",c=e.payload.event,p=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(p).length===0?"":JSON.stringify(p);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+s.length+o.length+c.length+d.length,u=new ArrayBuffer(this.HEADER_LENGTH+f);let y=new DataView(u),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,l.length),y.setUint8(v++,s.length),y.setUint8(v++,o.length),y.setUint8(v++,c.length),y.setUint8(v++,d.length),y.setUint8(v++,r),Array.from(l,g=>y.setUint8(v++,g.charCodeAt(0))),Array.from(s,g=>y.setUint8(v++,g.charCodeAt(0))),Array.from(o,g=>y.setUint8(v++,g.charCodeAt(0))),Array.from(c,g=>y.setUint8(v++,g.charCodeAt(0))),Array.from(d,g=>y.setUint8(v++,g.charCodeAt(0)));var b=new Uint8Array(u.byteLength+n.byteLength);return b.set(new Uint8Array(u),0),b.set(new Uint8Array(n),u.byteLength),b.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,a,o,s,l]=n;return r({join_ref:i,ref:a,topic:o,event:s,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,i)}}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),a=r.getUint8(2),o=r.getUint8(3),s=r.getUint8(4);let l=this.HEADER_LENGTH+4;const c=n.decode(e.slice(l,l+i));l=l+i;const p=n.decode(e.slice(l,l+a));l=l+a;const d=n.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),u=s===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,y={type:this.BROADCAST_EVENT,event:p,payload:u};return o>0&&(y.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class Fb{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(rr||(rr={}));const r2=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((a,o)=>(a[o]=qS(o,t,e,i),a),{}):{}},qS=(t,e,r,n)=>{const i=e.find(s=>s.name===t),a=i==null?void 0:i.type,o=r[t];return a&&!n.includes(a)?qb(a,o):h1(o)},qb=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return HS(e,r)}switch(t){case rr.bool:return US(e);case rr.float4:case rr.float8:case rr.int2:case rr.int4:case rr.int8:case rr.numeric:case rr.oid:return zS(e);case rr.json:case rr.jsonb:return $S(e);case rr.timestamp:return WS(e);case rr.abstime:case rr.date:case rr.daterange:case rr.int4range:case rr.int8range:case rr.money:case rr.reltime:case rr.text:case rr.time:case rr.timestamptz:case rr.timetz:case rr.tsrange:case rr.tstzrange:return h1(e);default:return h1(e)}},h1=t=>t,US=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},zS=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},$S=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},HS=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(s=>qb(e,s))}return t},WS=t=>typeof t=="string"?t.replace(" ","T"):t,Ub=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Fp{constructor(e,r,n={},i=f1){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var n2;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(n2||(n2={}));class Hu{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hu.syncState(this.state,i,a,o),this.pendingDiffs.forEach(l=>{this.state=Hu.syncDiff(this.state,l,a,o)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Hu.syncDiff(this.state,i,a,o),s())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const a=this.cloneDeep(e),o=this.transformState(r),s={},l={};return this.map(a,(c,p)=>{o[c]||(l[c]=p)}),this.map(o,(c,p)=>{const d=a[c];if(d){const f=p.map(b=>b.presence_ref),u=d.map(b=>b.presence_ref),y=p.filter(b=>u.indexOf(b.presence_ref)<0),v=d.filter(b=>f.indexOf(b.presence_ref)<0);y.length>0&&(s[c]=y),v.length>0&&(l[c]=v)}else s[c]=p}),this.syncDiff(a,{joins:s,leaves:l},n,i)}static syncDiff(e,r,n,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(s,l)=>{var c;const p=(c=e[s])!==null&&c!==void 0?c:[];if(e[s]=this.cloneDeep(l),p.length>0){const d=e[s].map(u=>u.presence_ref),f=p.filter(u=>d.indexOf(u.presence_ref)<0);e[s].unshift(...f)}n(s,p,l)}),this.map(o,(s,l)=>{let c=e[s];if(!c)return;const p=l.map(d=>d.presence_ref);c=c.filter(d=>p.indexOf(d.presence_ref)<0),e[s]=c,i(s,c,l),c.length===0&&delete e[s]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var i2;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(i2||(i2={}));var Wu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Wu||(Wu={}));var ga;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ga||(ga={}));class Yg{constructor(e,r={config:{}},n){var i,a;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Fr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Fp(this,Ci.join,this.params,this.timeout),this.rejoinTimer=new Fb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Fr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Fr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ci.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new Hu(this),this.broadcastEndpointURL=Ub(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Fr.closed){const{config:{broadcast:o,presence:s,private:l}}=this.params,c=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[Wu.PRESENCE]&&this.bindings[Wu.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},s),{enabled:p}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(u=>e==null?void 0:e(ga.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(ga.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var y;if(this.socket.setAuth(),u===void 0){e==null||e(ga.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,g=[];for(let m=0;m<b;m++){const _=v[m],{filter:{event:x,schema:A,table:D,filter:T}}=_,j=u&&u[m];if(j&&j.event===x&&j.schema===A&&j.table===D&&j.filter===T)g.push(Object.assign(Object.assign({},_),{id:j.id}));else{this.unsubscribe(),this.state=Fr.errored,e==null||e(ga.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(ga.SUBSCRIBED);return}}).receive("error",u=>{this.state=Fr.errored,e==null||e(ga.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ga.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Fr.joined&&e===Wu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let l=s.statusText;try{const c=await s.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,s,l;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(s=(o=this.params)===null||o===void 0?void 0:o.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Fr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ci.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Fp(this,Ci.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Fr.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Fp(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>BS){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,a;const o=e.toLocaleLowerCase(),{close:s,error:l,leave:c,join:p}=Ci;if(n&&[s,l,c,p].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(u=>{var y,v,b;return((y=u.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(v=u.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(u=>u.callback(f,n)):(a=this.bindings[o])===null||a===void 0||a.filter(u=>{var y,v,b,g,m,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in u){const x=u.id,A=(y=u.filter)===null||y===void 0?void 0:y.event;return x&&((v=r.ids)===null||v===void 0?void 0:v.includes(x))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const x=(m=(g=u==null?void 0:u.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return x==="*"||x===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return u.type.toLocaleLowerCase()===o}).map(u=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:v,table:b,commit_timestamp:g,type:m,errors:_}=y;f=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:g,eventType:m,new:{},old:{},errors:_}),this._getPayloadRecords(y))}u.callback(f,n)})}_isClosed(){return this.state===Fr.closed}_isJoined(){return this.state===Fr.joined}_isJoining(){return this.state===Fr.joining}_isLeaving(){return this.state===Fr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Yg.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ci.close,{},e)}_onError(e){this._on(Ci.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=r2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=r2(e.columns,e.old_record)),r}}const qp=()=>{},Rf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},VS=[1e3,2e3,5e3,1e4],GS=1e4,KS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class YS{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=f1,this.transport=null,this.heartbeatIntervalMs=Rf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qp,this.ref=0,this.reconnectTimer=null,this.vsn=t2,this.logger=qp,this.conn=null,this.sendBuffer=[],this.serializer=new FS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${d1.websocket}`,this.httpEndpoint=Ub(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=CS.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Do.connecting:return Mo.Connecting;case Do.open:return Mo.Open;case Do.closing:return Mo.Closing;default:return Mo.Closed}}isConnected(){return this.connectionState()===Mo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Yg(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:i,ref:a}=e,o=()=>{this.encode(e,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(MS,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Rf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:o}=r,s=o?`(${o})`:"",l=a.status||"";this.log("receive",`${l} ${n} ${i} ${s}`.trim(),a),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(i,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Do.open||this.conn.readyState===Do.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ci.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([KS],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:IS};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Ci.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Fb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,a,o,s,l,c,p,d,f,u;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:f1,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Rf.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(s=e==null?void 0:e.heartbeatCallback)!==null&&s!==void 0?s:qp,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:t2,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:y=>VS[y-1]||GS,this.vsn){case Bb:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:(y,v)=>v(JSON.stringify(y)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(y,v)=>v(JSON.parse(y));break;case DS:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class gh extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function dr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class JS extends gh{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class p1 extends gh{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Jg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),XS=()=>Response,g1=t=>{if(Array.isArray(t))return t.map(r=>g1(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=g1(n)}),e},QS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ZS=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Up=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},ek=(t,e,r)=>Ze(void 0,void 0,void 0,function*(){const n=yield XS();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const a=t.status||500,o=(i==null?void 0:i.statusCode)||a+"";e(new JS(Up(i),a,o))}).catch(i=>{e(new p1(Up(i),i))}):e(new p1(Up(t),t))}),tk=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(QS(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function xc(t,e,r,n,i,a){return Ze(this,void 0,void 0,function*(){return new Promise((o,s)=>{t(r,tk(e,n,i,a)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>ek(l,s,n))})})}function cc(t,e,r,n){return Ze(this,void 0,void 0,function*(){return xc(t,"GET",e,r,n)})}function Ti(t,e,r,n,i){return Ze(this,void 0,void 0,function*(){return xc(t,"POST",e,n,i,r)})}function m1(t,e,r,n,i){return Ze(this,void 0,void 0,function*(){return xc(t,"PUT",e,n,i,r)})}function rk(t,e,r,n){return Ze(this,void 0,void 0,function*(){return xc(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Xg(t,e,r,n,i){return Ze(this,void 0,void 0,function*(){return xc(t,"DELETE",e,n,i,r)})}class nk{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(dr(e))return{data:null,error:e};throw e}})}}var zb;class ik{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[zb]="BlobDownloadBuilder",this.promise=null}asStream(){return new nk(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(dr(e))return{data:null,error:e};throw e}})}}zb=Symbol.toStringTag;const ak={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},a2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ok{constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Jg(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return Ze(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},a2),i);let s=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),l&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(l))):(a=n,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),i!=null&&i.headers&&(s=Object.assign(Object.assign({},s),i.headers));const c=this._removeEmptyFolders(r),p=this._getFinalPath(c),d=yield(e=="PUT"?m1:Ti)(this.fetch,`${this.url}/object/${p}`,a,Object.assign({headers:s},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dr(a))return{data:null,error:a};throw a}})}upload(e,r,n){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return Ze(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:a2.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,p["cache-control"]=`max-age=${c.cacheControl}`,p["content-type"]=c.contentType);const d=yield m1(this.fetch,s.toString(),l,{headers:p});return{data:{path:a,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(dr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return Ze(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield Ti(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),s=o.searchParams.get("token");if(!s)throw new gh("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:s},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}update(e,r,n){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dr(i))return{data:null,error:i};throw i}})}copy(e,r,n){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield Ti(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return Ze(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Ti(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return Ze(this,void 0,void 0,function*(){try{const i=yield Ti(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dr(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"",s=this._getFinalPath(e),l=()=>cc(this.fetch,`${this.url}/${i}/${s}${o}`,{headers:this.headers,noResolveJson:!0});return new ik(l,this.shouldThrowOnError)}info(e){return Ze(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield cc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:g1(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}exists(e){return Ze(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield rk(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n)&&n instanceof p1){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const s=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${c}`)}}}remove(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Xg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}list(e,r,n){return Ze(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},ak),r),{prefix:e||""});return{data:yield Ti(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dr(i))return{data:null,error:i};throw i}})}listV2(e,r){return Ze(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Ti(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const $b="2.86.0",Hb={"X-Client-Info":`storage-js/${$b}`};class sk{constructor(e,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hb),r),this.fetch=Jg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Ze(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield cc(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}getBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield cc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}createBucket(e){return Ze(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Ti(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dr(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return Ze(this,void 0,void 0,function*(){try{return{data:yield m1(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Xg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var fc=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function lk(t,e,r){const n=new URL(e,t);if(r)for(const[i,a]of Object.entries(r))a!==void 0&&n.searchParams.set(i,a);return n.toString()}async function uk(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function ck(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:a,headers:o}){const s=lk(t.baseUrl,n,i),l=await uk(t.auth),c=await e(s,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...l,...o},body:a?JSON.stringify(a):void 0}),p=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),f=d&&p?JSON.parse(p):p;if(!c.ok){const u=d?f:void 0,y=u==null?void 0:u.error;throw new fc((y==null?void 0:y.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:u})}return{status:c.status,headers:c.headers,data:f}}}}function If(t){return t.join("")}var fk=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:If(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${If(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${If(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${If(t.namespace)}`}),!0}catch(e){if(e instanceof fc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof fc&&r.status===409)return;throw r}}};function Ls(t){return t.join("")}var dk=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ls(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ls(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ls(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ls(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ls(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ls(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof fc&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof fc&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},hk=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=ck({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new fk(this.client,e),this.tableOps=new dk(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class pk{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hb),r),this.fetch=Jg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}listBuckets(e){return Ze(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield cc(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Xg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}from(e){if(!ZS(e))throw new gh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new hk({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>Ze(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Qg={"X-Client-Info":`storage-js/${$b}`,"Content-Type":"application/json"};class Wb extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Yn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class zp extends Wb{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gk extends Wb{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var o2;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(o2||(o2={}));const Zg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),mk=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},s2=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),vk=(t,e,r)=>Ze(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const i=t.status||500,a=t;if(typeof a.json=="function")a.json().then(o=>{const s=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new zp(s2(o),i,s))}).catch(()=>{const o=i+"",s=a.statusText||`HTTP ${i} error`;e(new zp(s,i,o))});else{const o=i+"",s=a.statusText||`HTTP ${i} error`;e(new zp(s,i,o))}}else e(new gk(s2(t),t))}),yk=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(mk(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function wk(t,e,r,n,i,a){return Ze(this,void 0,void 0,function*(){return new Promise((o,s)=>{t(r,yk(e,n,i,a)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>vk(l,s,n))})})}function Jn(t,e,r,n,i){return Ze(this,void 0,void 0,function*(){return wk(t,"POST",e,n,i,r)})}class bk{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qg),r),this.fetch=Zg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Ze(this,void 0,void 0,function*(){try{return{data:(yield Jn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}getIndex(e,r){return Ze(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yn(n))return{data:null,error:n};throw n}})}listIndexes(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return Ze(this,void 0,void 0,function*(){try{return{data:(yield Jn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yn(n))return{data:null,error:n};throw n}})}}class xk{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qg),r),this.fetch=Zg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Ze(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Jn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}getVectors(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}listVectors(e){return Ze(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Jn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}queryVectors(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}deleteVectors(e){return Ze(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Jn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}}class _k{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qg),r),this.fetch=Zg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:(yield Jn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}getBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}listBuckets(){return Ze(this,arguments,void 0,function*(e={}){try{return{data:yield Jn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:(yield Jn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}}class Sk extends _k{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new kk(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ze(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ze(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ze(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ze(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class kk extends bk{constructor(e,r,n,i){super(e,r,i),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ze(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ze(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ze(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ze(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Nk(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Nk extends xk{constructor(e,r,n,i,a){super(e,r,a),this.vectorBucketName=n,this.indexName=i}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ze(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ze(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ze(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ze(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ze(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Ak extends sk{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new ok(this.url,this.headers,e,this.fetch)}get vectors(){return new Sk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new pk(this.url+"/iceberg",this.headers,this.fetch)}}const Ek="2.86.0";let Ru="";typeof Deno<"u"?Ru="deno":typeof document<"u"?Ru="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ru="react-native":Ru="node";const Ok={"X-Client-Info":`supabase-js-${Ru}/${Ek}`},jk={headers:Ok},Tk={schema:"public"},Lk={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Pk={},Ck=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Rk=()=>Headers,Ik=(t,e,r)=>{const n=Ck(r),i=Rk();return async(a,o)=>{var s;const l=(s=await e())!==null&&s!==void 0?s:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(a,Object.assign(Object.assign({},o),{headers:c}))}};function Dk(t){return t.endsWith("/")?t:t+"/"}function Mk(t,e){var r,n;const{db:i,auth:a,realtime:o,global:s}=t,{db:l,auth:c,realtime:p,global:d}=e,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},p),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=s==null?void 0:s.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function Bk(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Dk(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Vb="2.86.0",qs=30*1e3,v1=3,$p=v1*qs,Fk="http://localhost:9999",qk="supabase.auth.token",Uk={"X-Client-Info":`gotrue-js/${Vb}`},y1="X-Supabase-Api-Version",Gb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$k=10*60*1e3;class dc extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function it(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Hk extends dc{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Wk(t){return it(t)&&t.name==="AuthApiError"}class Bo extends dc{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class mo extends dc{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class Gn extends mo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Vk(t){return it(t)&&t.name==="AuthSessionMissingError"}class Ps extends mo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Df extends mo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Mf extends mo{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Gk(t){return it(t)&&t.name==="AuthImplicitGrantRedirectError"}class l2 extends mo{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class w1 extends mo{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Hp(t){return it(t)&&t.name==="AuthRetryableFetchError"}class u2 extends mo{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class b1 extends mo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Fd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),c2=` 	
\r=`.split(""),Kk=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<c2.length;e+=1)t[c2[e].charCodeAt(0)]=-2;for(let e=0;e<Fd.length;e+=1)t[Fd[e].charCodeAt(0)]=e;return t})();function f2(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Fd[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Fd[n]),e.queuedBits-=6}}function Kb(t,e,r){const n=Kk[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function d2(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{Xk(o,n,r)};for(let o=0;o<t.length;o+=1)Kb(t.charCodeAt(o),i,a);return e.join("")}function Yk(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Jk(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}Yk(n,e)}}function Xk(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ul(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Kb(t.charCodeAt(i),r,n);return new Uint8Array(e)}function Qk(t){const e=[];return Jk(t,r=>e.push(r)),new Uint8Array(e)}function Ho(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>f2(i,r,n)),f2(null,r,n),e.join("")}function Zk(t){return Math.round(Date.now()/1e3)+t}function e6(){return Symbol("auth-callback")}const Qr=()=>typeof window<"u"&&typeof document<"u",Oo={tested:!1,writable:!1},Yb=()=>{if(!Qr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Oo.tested)return Oo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Oo.tested=!0,Oo.writable=!0}catch{Oo.tested=!0,Oo.writable=!1}return Oo.writable};function t6(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const Jb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),r6=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Us=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},jo=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},za=async(t,e)=>{await t.removeItem(e)};class mh{constructor(){this.promise=new mh.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}mh.promiseConstructor=Promise;function Wp(t){const e=t.split(".");if(e.length!==3)throw new b1("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!zk.test(e[n]))throw new b1("JWT not in base64url format");return{header:JSON.parse(d2(e[0])),payload:JSON.parse(d2(e[1])),signature:ul(e[2]),raw:{header:e[0],payload:e[1]}}}async function n6(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function i6(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function a6(t){return("0"+t.toString(16)).substr(-2)}function o6(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,a6).join("")}async function s6(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function l6(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await s6(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cs(t,e,r=!1){const n=o6();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Us(t,`${e}-code-verifier`,i);const a=await l6(n);return[a,n===a?"plain":"s256"]}const u6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function c6(t){const e=t.headers.get(y1);if(!e||!e.match(u6))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function f6(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function d6(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const h6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Rs(t){if(!h6.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vp(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function p6(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function h2(t){return JSON.parse(JSON.stringify(t))}const Po=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),g6=[502,503,504];async function p2(t){var e;if(!r6(t))throw new w1(Po(t),0);if(g6.includes(t.status))throw new w1(Po(t),t.status);let r;try{r=await t.json()}catch(a){throw new Bo(Po(a),a)}let n;const i=c6(t);if(i&&i.getTime()>=Gb["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new u2(Po(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Gn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new u2(Po(r),t.status,r.weak_password.reasons);throw new Hk(Po(r),t.status||500,n)}const m6=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ct(t,e,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[y1]||(a[y1]=Gb["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await v6(t,e,r+s,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function v6(t,e,r,n,i,a){const o=m6(e,n,i,a);let s;try{s=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new w1(Po(l),0)}if(s.ok||await p2(s),n!=null&&n.noResolveJson)return s;try{return await s.json()}catch(l){await p2(l)}}function Ei(t){var e;let r=null;b6(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Zk(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function g2(t){const e=Ei(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ja(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function y6(t){return{data:t,error:null}}function w6(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=t,o=Al(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},l=Object.assign({},o);return{data:{properties:s,user:l},error:null}}function m2(t){return t}function b6(t){return t.access_token&&t.refresh_token&&t.expires_in}const Gp=["global","local","others"];class x6{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Jb(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Gp[0]){if(Gp.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gp.join(", ")}`);try{return await ct(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ct(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ja})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Al(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await ct(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:w6,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(it(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ct(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ja})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,a,o,s,l;try{const c={nextPage:null,lastPage:0,total:0},p=await ct(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:m2});if(p.error)throw p.error;const d=await p.json(),f=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,u=(l=(s=p.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return u.length>0&&(u.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(it(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Rs(e);try{return await ct(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ja})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Rs(e);try{return await ct(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Ja})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Rs(e);try{return await ct(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ja})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Rs(e.userId);try{const{data:r,error:n}=await ct(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(it(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Rs(e.userId),Rs(e.id);try{return{data:await ct(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,a,o,s,l;try{const c={nextPage:null,lastPage:0,total:0},p=await ct(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:m2});if(p.error)throw p.error;const d=await p.json(),f=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,u=(l=(s=p.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return u.length>0&&(u.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(it(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await ct(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(it(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await ct(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(it(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await ct(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(it(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ct(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await ct(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(it(r))return{data:null,error:r};throw r}}}function v2(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Is={debug:!!(globalThis&&Yb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Xb extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class _6 extends Xb{}async function S6(t,e,r){Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Is.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new _6(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Is.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function k6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Qb(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function N6(t){return parseInt(t,16)}function A6(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function E6(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:s,requestId:l,resources:c,scheme:p,uri:d,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const u=Qb(t.address),y=p?`${p}://${n}`:n,v=t.statement?`${t.statement}
`:"",b=`${y} wants you to sign in with your Ethereum account:
${u}

${v}`;let g=`URI: ${d}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),s&&(g+=`
Not Before: ${s.toISOString()}`),l&&(g+=`
Request ID: ${l}`),c){let m=`
Resources:`;for(const _ of c){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);m+=`
- ${_}`}g+=m}return`${b}
${g}`}class Ir extends Error{constructor({message:e,code:r,cause:n,name:i}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class qd extends Ir{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function O6({error:t,options:e}){var r,n,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ir({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ir({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ir({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ir({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ir({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ir({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new Ir({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ir({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Zb(o)){if(a.rp.id!==o)return new Ir({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ir({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Ir({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ir({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ir({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function j6({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ir({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ir({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Zb(n)){if(r.rpId!==n)return new Ir({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ir({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ir({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ir({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class T6{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const L6=new T6;function P6(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=Al(t,["challenge","user","excludeCredentials"]),a=ul(e).buffer,o=Object.assign(Object.assign({},r),{id:ul(r.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:a,user:o});if(n&&n.length>0){s.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];s.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:ul(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return s}function C6(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Al(t,["challenge","allowCredentials"]),i=ul(e).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const s=r[o];a.allowCredentials[o]=Object.assign(Object.assign({},s),{id:ul(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return a}function R6(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ho(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ho(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function I6(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ho(new Uint8Array(i.authenticatorData)),clientDataJSON:Ho(new Uint8Array(i.clientDataJSON)),signature:Ho(new Uint8Array(i.signature)),userHandle:i.userHandle?Ho(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Zb(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function y2(){var t,e;return!!(Qr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function D6(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new qd("Browser returned unexpected credential type",e)}:{data:null,error:new qd("Empty credential response",e)}}catch(e){return{data:null,error:O6({error:e,options:t})}}}async function M6(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new qd("Browser returned unexpected credential type",e)}:{data:null,error:new qd("Empty credential response",e)}}catch(e){return{data:null,error:j6({error:e,options:t})}}}const B6={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},F6={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ud(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))n[a]=o;else if(r(o))n[a]=o;else if(e(o)){const s=n[a];e(s)?n[a]=Ud(s,o):n[a]=Ud(o)}else n[a]=o}return n}function q6(t,e){return Ud(B6,t,e||{})}function U6(t,e){return Ud(F6,t,e||{})}class z6{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},a){try{const{data:o,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:s};const l=i??L6.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=q6(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:p,error:d}=await D6({publicKey:c,signal:l});return p?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:p}},error:null}:{data:null,error:d}}case"request":{const c=U6(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:p,error:d}=await M6(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return p?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:p}},error:null}:{data:null,error:d}}}}catch(o){return it(o)?{data:null,error:o}:{data:null,error:new Bo("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new dc("rpId is required for WebAuthn authentication")};try{if(!y2())return{data:null,error:new Bo("Browser does not support WebAuthn",null)};const{data:o,error:s}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!o)return{data:null,error:s};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return it(o)?{data:null,error:o}:{data:null,error:new Bo("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new dc("rpId is required for WebAuthn registration")};try{if(!y2())return{data:null,error:new Bo("Browser does not support WebAuthn",null)};const{data:o,error:s}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(p=>{var d;return(d=p.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:s};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return it(o)?{data:null,error:o}:{data:null,error:new Bo("Unexpected error in register",o)}}}}k6();const $6={url:Fk,storageKey:qk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Uk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function w2(t,e,r){return await r()}const Ds={};class hc{get jwks(){var e,r;return(r=(e=Ds[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Ds[this.storageKey]=Object.assign(Object.assign({},Ds[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Ds[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ds[this.storageKey]=Object.assign(Object.assign({},Ds[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},$6),e);if(this.storageKey=a.storageKey,this.instanceID=(r=hc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,hc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Qr()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new x6({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Jb(a.fetch),this.lock=a.lock||w2,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Qr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=S6:this.lock=w2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new z6(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Yb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=v2(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=v2(this.memoryStorage)),Qr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Vb}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Qr()&&(r=t6(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Qr()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Gk(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return it(r)?this._returnResult({error:r}):this._returnResult({error:new Bo("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const a=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ei}),{data:o,error:s}=a;if(s||!o)return this._returnResult({data:{user:null,session:null},error:s});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(a){if(it(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var r,n,i;try{let a;if("email"in e){const{email:p,password:d,options:f}=e;let u=null,y=null;this.flowType==="pkce"&&([u,y]=await Cs(this.storage,this.storageKey)),a=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:p,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:u,code_challenge_method:y},xform:Ei})}else if("phone"in e){const{phone:p,password:d,options:f}=e;a=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ei})}else throw new Df("You must provide either an email or phone number and a password");const{data:o,error:s}=a;if(s||!o)return this._returnResult({data:{user:null,session:null},error:s});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(a){if(it(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:s}=e;r=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:g2})}else if("phone"in e){const{phone:a,password:o,options:s}=e;r=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:g2})}else throw new Df("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new Ps;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(it(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,a,o,s,l,c,p,d,f;let u,y;if("message"in e)u=e.message,y=e.signature;else{const{chain:v,wallet:b,statement:g,options:m}=e;let _;if(Qr())if(typeof b=="object")_=b;else{const B=window;if("ethereum"in B&&typeof B.ethereum=="object"&&"request"in B.ethereum&&typeof B.ethereum.request=="function")_=B.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const x=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),A=await _.request({method:"eth_requestAccounts"}).then(B=>B).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const D=Qb(A[0]);let T=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!T){const B=await _.request({method:"eth_chainId"});T=N6(B)}const j={domain:x.host,address:D,statement:g,uri:x.href,version:"1",chainId:T,nonce:(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(p=m==null?void 0:m.signInWithEthereum)===null||p===void 0?void 0:p.resources};u=E6(j),y=await _.request({method:"personal_sign",params:[A6(u),D]})}try{const{data:v,error:b}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:u,signature:y},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ei});if(b)throw b;if(!v||!v.session||!v.user){const g=new Ps;return this._returnResult({data:{user:null,session:null},error:g})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(it(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var r,n,i,a,o,s,l,c,p,d,f,u;let y,v;if("message"in e)y=e.message,v=e.signature;else{const{chain:b,wallet:g,statement:m,options:_}=e;let x;if(Qr())if(typeof g=="object")x=g;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))x=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=g}const A=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in x&&x.signIn){const D=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),m?{statement:m}:null));let T;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")T=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)T=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)y=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),v=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${A.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(i=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((s=_==null?void 0:_.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((d=(p=_==null?void 0:_.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||d===void 0)&&d.length?["Resources",..._.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const D=await x.signMessage(new TextEncoder().encode(y),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=D}}try{const{data:b,error:g}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Ho(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(u=e.options)===null||u===void 0?void 0:u.captchaToken}}:null),xform:Ei});if(g)throw g;if(!b||!b.session||!b.user){const m=new Ps;return this._returnResult({data:{user:null,session:null},error:m})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:g})}catch(b){if(it(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const r=await jo(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:o}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ei});if(await za(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const s=new Ps;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(it(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:a,nonce:o}=e,s=await ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ei}),{data:l,error:c}=s;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const p=new Ps;return this._returnResult({data:{user:null,session:null},error:p})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(r){if(it(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,a,o;try{if("email"in e){const{email:s,options:l}=e;let c=null,p=null;this.flowType==="pkce"&&([c,p]=await Cs(this.storage,this.storageKey));const{error:d}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:p},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:s,options:l}=e,{data:c,error:p}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:p})}throw new Df("You must provide either an email or phone number.")}catch(s){if(it(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var r,n;try{let i,a;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:s}=await ct(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Ei});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(it(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,a,o;try{let s=null,l=null;this.flowType==="pkce"&&([s,l]=await Cs(this.storage,this.storageKey));const c=await ct(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:y6});return!((a=c.data)===null||a===void 0)&&a.url&&Qr()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(s){if(it(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Gn;const{error:i}=await ct(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(it(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:o}=await ct(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:o,error:s}=await ct(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:s})}throw new Df("You must provide either an email or phone number and a type")}catch(r){if(it(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await jo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<$p:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await jo(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Vp()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=p6(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ja}):await this._useSession(async r=>{var n,i,a;const{data:o,error:s}=r;if(s)throw s;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gn}:await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Ja})})}catch(r){if(it(r))return Vk(r)&&(await this._removeSession(),await za(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new Gn;const o=i.session;let s=null,l=null;this.flowType==="pkce"&&e.email!=null&&([s,l]=await Cs(this.storage,this.storageKey));const{data:c,error:p}=await ct(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:o.access_token,xform:Ja});if(p)throw p;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(it(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Gn;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:o}=Wp(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{data:s,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s)return{data:{user:null,session:null},error:null};a=s}else{const{data:s,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(it(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:s}=r;if(s)throw s;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Gn;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(it(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Qr())throw new Mf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Mf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new l2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mf("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new l2("No code detected.");const{data:m,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:s,expires_at:l,token_type:c}=e;if(!a||!s||!o||!c)throw new Mf("No session defined in URL");const p=Math.round(Date.now()/1e3),d=parseInt(s);let f=p+d;l&&(f=parseInt(l));const u=f-p;u*1e3<=qs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${u}s, should have been closer to ${d}s`);const y=f-d;p-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,p):p-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,p);const{data:v,error:b}=await this._getUser(a);if(b)throw b;const g={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(n){if(it(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await jo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({error:a});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:s}=await this.admin.signOut(o,e);if(s&&!(Wk(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await za(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=e6(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Cs(this.storage,this.storageKey,!0));try{return await ct(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(it(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var o,s,l,c,p;const{data:d,error:f}=a;if(f)throw f;const u=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ct(this.fetch,"GET",u,{headers:this.headers,jwt:(p=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Qr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(it(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:o,provider:s,token:l,access_token:c,nonce:p}=e,d=await ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:s,id_token:l,access_token:c,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ei}),{data:f,error:u}=d;return u?this._returnResult({data:{user:null,session:null},error:u}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Ps}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:u}))}catch(i){if(it(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)throw o;return await ct(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await i6(async i=>(i>0&&await n6(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await ct(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ei})),(i,a)=>{const o=200*Math.pow(2,i);return a&&Hp(a)&&Date.now()+o-n<qs})}catch(n){if(this._debug(r,"error",n),it(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Qr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await jo(this.storage,this.storageKey);if(i&&this.userStorage){let o=await jo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Us(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Vp()}else if(i&&!i.user&&!i.user){const o=await jo(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await za(this.storage,this.storageKey+"-user"),await Us(this.storage,this.storageKey,i)):i.user=Vp()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<$p;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${$p}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Hp(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:s}=await this._getUser(i.access_token);!s&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Gn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new mh;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new Gn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const s={data:a.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(a){if(this._debug(i,"error",a),it(a)){const o={data:null,error:a};return Hp(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,r)}catch(l){a.push(l)}});if(await Promise.all(o),a.length>0){for(let s=0;s<a.length;s+=1)console.error(a[s]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Us(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=h2(i);await Us(this.storage,this.storageKey,a)}else{const i=h2(r);await Us(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await za(this.storage,this.storageKey),await za(this.storage,this.storageKey+"-code-verifier"),await za(this.storage,this.storageKey+"-user"),this.userStorage&&await za(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),qs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/qs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${qs}ms, refresh threshold is ${v1} ticks`),i<=v1&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Xb)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Cs(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(s.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?this._returnResult({data:null,error:a}):await ct(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await ct(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?R6(e.webauthn.credential_response):I6(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:l}=await ct(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:l}))})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=await ct(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:s}=o;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:P6(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:C6(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Wp(n.access_token);let o=null;a.aal&&(o=a.aal);let s=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(s="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:s,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await ct(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Gn})})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new Gn});const o=await ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return o.data&&o.data.redirect_url&&Qr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new Gn});const o=await ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return o.data&&o.data.redirect_url&&Qr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await ct(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Gn})})}catch(e){if(it(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await ct(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Gn})})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(s=>s.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(s=>s.kid===e),n&&this.jwks_cached_at+$k>i)return n;const{data:a,error:o}=await ct(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(s=>s.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:u,error:y}=await this.getSession();if(y||!u.session)return this._returnResult({data:null,error:y});n=u.session.access_token}const{header:i,payload:a,signature:o,raw:{header:s,payload:l}}=Wp(n);r!=null&&r.allowExpired||f6(a.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:u}=await this.getUser(n);if(u)throw u;return{data:{claims:a,header:i,signature:o},error:null}}const p=d6(i.alg),d=await crypto.subtle.importKey("jwk",c,p,!0,["verify"]);if(!await crypto.subtle.verify(p,d,o,Qk(`${s}.${l}`)))throw new b1("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}}hc.nextInstanceID={};const H6=hc;class W6 extends H6{constructor(e){super(e)}}class V6{constructor(e,r,n){var i,a,o;this.supabaseUrl=e,this.supabaseKey=r;const s=Bk(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,c={db:Tk,realtime:Pk,auth:Object.assign(Object.assign({},Lk),{storageKey:l}),global:jk},p=Mk(n??{},c);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=p.global.headers)!==null&&a!==void 0?a:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=Ik(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new PS(new URL("rest/v1",s).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new Ak(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new jS(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:o,flowType:s,lock:l,debug:c,throwOnError:p},d,f){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new W6({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),d),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:s,lock:l,debug:c,throwOnError:p,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new YS(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const G6=(t,e,r)=>new V6(t,e,r);function K6(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}K6()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Y6="https://ccgiozknvlknbrkzfcdx.supabase.co",J6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNjZ2lvemtudmxrbmJya3pmY2R4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4NTY3NTMsImV4cCI6MjA3ODQzMjc1M30.lmmuGnynbY_n_4UlsrGw5ofRd6p9QLKCcrfHf7itEg8",Vt=G6(Y6,J6),X6={success:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),error:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),info:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},Q6={success:"bg-green-50 border-green-200 dark:bg-green-900/50 dark:border-green-700 text-green-800 dark:text-green-200",error:"bg-red-50 border-red-200 dark:bg-red-900/50 dark:border-red-700 text-red-800 dark:text-red-200",info:"bg-blue-50 border-blue-200 dark:bg-blue-900/50 dark:border-blue-700 text-blue-800 dark:text-blue-200"},Z6=({toast:t,onDismiss:e})=>{const[r,n]=we.useState(!1);we.useEffect(()=>{const o=setTimeout(()=>{n(!0),setTimeout(()=>e(t.id),300)},5e3);return()=>clearTimeout(o)},[t.id,e]);const i=()=>{n(!0),setTimeout(()=>e(t.id),300)},a=r?"animate-toast-out":"animate-toast-in";return S.jsxs("div",{role:"alert",className:`w-full p-4 rounded-lg shadow-lg border flex items-start gap-4 ${Q6[t.type]} ${a}`,children:[S.jsx("div",{className:"flex-shrink-0",children:X6[t.type]}),S.jsx("div",{className:"flex-1 text-sm font-medium",children:t.message}),S.jsx("button",{onClick:i,className:"p-1 rounded-md -m-1 hover:bg-black/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-current","aria-label":"Dismiss",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})},eN=({toasts:t,onDismiss:e})=>S.jsx("div",{className:"fixed top-5 right-5 z-50 space-y-3 w-full max-w-sm","aria-live":"assertive",children:t.map(r=>S.jsx(Z6,{toast:r,onDismiss:e},r.id))}),ex=we.createContext(void 0),tN=({children:t})=>{const[e,r]=we.useState([]),[n,i]=we.useState(null);we.useEffect(()=>{const s=document.getElementById("portal-root");s&&i(s)},[]);const a=we.useCallback((s,l="info")=>{const c=Date.now().toString()+Math.random().toString();r(p=>[...p,{id:c,message:s,type:l}])},[]),o=we.useCallback(s=>{r(l=>l.filter(c=>c.id!==s))},[]);return S.jsxs(ex.Provider,{value:{addToast:a},children:[t,n&&Hg.createPortal(S.jsx(eN,{toasts:e,onDismiss:o}),n)]})},vh=()=>{const t=we.useContext(ex);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},rN=({focusState:t,emailProgress:e,typingCounter:r,isPasswordVisible:n=!1})=>{const i=()=>t==="email"?`rotate(${Math.max(-8,Math.min(8,e*16-8))}deg)`:"rotate(0deg)",a=()=>t==="password"?"translate(0px, 5px)":t==="email"?`translate(${r%2===0?-1.5:1.5}px, 5px)`:"translate(0px, 0px)",o=()=>t==="password"?n?"translateY(15px)":"translateY(0px)":"translateY(100px)";return S.jsxs("svg",{width:"140",height:"140",viewBox:"0 0 100 100",className:"mx-auto -mb-6",style:{zIndex:10,position:"relative",overflow:"hidden"},"aria-hidden":"true",children:[S.jsxs("defs",{children:[S.jsxs("linearGradient",{id:"furGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[S.jsx("stop",{offset:"0%",stopColor:"#D97706"})," ",S.jsx("stop",{offset:"100%",stopColor:"#92400E"})," "]}),S.jsxs("linearGradient",{id:"skinGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[S.jsx("stop",{offset:"0%",stopColor:"#FEF3C7"})," ",S.jsx("stop",{offset:"100%",stopColor:"#FDE68A"})," "]}),S.jsxs("radialGradient",{id:"eyeShine",cx:"30%",cy:"30%",r:"50%",children:[S.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0.9"}),S.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]}),S.jsxs("filter",{id:"softShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[S.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"3"}),S.jsx("feOffset",{dx:"0",dy:"4",result:"offsetblur"}),S.jsx("feComponentTransfer",{children:S.jsx("feFuncA",{type:"linear",slope:"0.2"})}),S.jsxs("feMerge",{children:[S.jsx("feMergeNode",{}),S.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),S.jsxs("g",{id:"head-group",style:{transition:"transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",transform:i(),transformOrigin:"50px 55px"},filter:"url(#softShadow)",children:[S.jsx("circle",{cx:"18",cy:"50",r:"12",fill:"url(#furGradient)"}),S.jsx("circle",{cx:"82",cy:"50",r:"12",fill:"url(#furGradient)"}),S.jsx("ellipse",{cx:"50",cy:"55",rx:"38",ry:"34",fill:"url(#furGradient)"}),S.jsx("path",{d:"M50 35 C 35 35, 25 45, 25 60 C 25 75, 35 85, 50 85 C 65 85, 75 75, 75 60 C 75 45, 65 35, 50 35 Z",fill:"url(#skinGradient)"}),S.jsx("circle",{cx:"18",cy:"50",r:"7",fill:"#FDE68A",opacity:"0.8"}),S.jsx("circle",{cx:"82",cy:"50",r:"7",fill:"#FDE68A",opacity:"0.8"}),S.jsx("path",{d:"M46 22 Q 50 15, 54 22",stroke:"url(#furGradient)",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),S.jsxs("g",{id:"eyes",transform:"translate(0, 2)",children:[S.jsx("circle",{cx:"36",cy:"52",r:"9",fill:"white"}),S.jsx("circle",{cx:"64",cy:"52",r:"9",fill:"white"}),S.jsxs("g",{style:{transition:"transform 0.1s ease-out",transform:a()},children:[S.jsx("circle",{cx:"36",cy:"52",r:"4",fill:"#1E293B"}),S.jsx("circle",{cx:"64",cy:"52",r:"4",fill:"#1E293B"}),S.jsx("circle",{cx:"38",cy:"50",r:"2",fill:"white",opacity:"0.6"}),S.jsx("circle",{cx:"66",cy:"50",r:"2",fill:"white",opacity:"0.6"})]})]}),S.jsx("ellipse",{cx:"50",cy:"68",rx:"5",ry:"3",fill:"#1E293B",opacity:"0.8"}),S.jsx("path",{d:"M42 76 Q 50 82, 58 76",stroke:"#4B5563",strokeWidth:"2",fill:"transparent",strokeLinecap:"round",style:{transition:"d 0.3s"}})]}),S.jsxs("g",{id:"hands-group",style:{transition:"transform 0.5s cubic-bezier(0.25, 1, 0.5, 1)",transform:o()},filter:"url(#softShadow)",children:[S.jsx("path",{d:"M10 100 L 15 60 Q 15 45, 30 45 Q 45 45, 45 60 L 45 100 Z",fill:"url(#furGradient)",stroke:"#78350F",strokeWidth:"1"}),S.jsx("path",{d:"M30 45 L 30 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),S.jsx("path",{d:"M37 47 L 37 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),S.jsx("path",{d:"M23 47 L 23 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),S.jsx("path",{d:"M90 100 L 85 60 Q 85 45, 70 45 Q 55 45, 55 60 L 55 100 Z",fill:"url(#furGradient)",stroke:"#78350F",strokeWidth:"1"}),S.jsx("path",{d:"M70 45 L 70 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),S.jsx("path",{d:"M63 47 L 63 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"}),S.jsx("path",{d:"M77 47 L 77 55",stroke:"#78350F",strokeWidth:"2",opacity:"0.3"})]})]})},nN=({onBackToHome:t})=>{const[e,r]=we.useState(!1),[n,i]=we.useState(""),[a,o]=we.useState(""),[s,l]=we.useState(!1),[c,p]=we.useState(null),{addToast:d}=vh(),[f,u]=we.useState("idle"),[y,v]=we.useState(0),[b,g]=we.useState(!1),m=()=>u("email"),_=()=>u("password"),x=()=>u("idle"),A=()=>{v(I=>I+1)},D=we.useMemo(()=>{if(!a)return 0;let I=0;return a.length>=6&&I++,a.length>=10&&I++,/[A-Z]/.test(a)&&I++,(/[0-9]/.test(a)||/[^A-Za-z0-9]/.test(a))&&I++,I},[a]),T=()=>{switch(D){case 0:return"Too Short";case 1:return"Weak";case 2:return"Fair";case 3:return"Good";case 4:return"Strong";default:return""}},j=()=>{switch(D){case 0:case 1:return"bg-red-500";case 2:return"bg-yellow-500";case 3:return"bg-blue-500";case 4:return"bg-green-500";default:return"bg-slate-200"}},B=async()=>{const{error:I}=await Vt.auth.signUp({email:n,password:a});if(I)throw I;d("Check your email for the confirmation link!","success")},P=async()=>{const{error:I}=await Vt.auth.signInWithPassword({email:n,password:a});if(I)throw I},k=async()=>{r(!0),p(null);try{const{error:I}=await Vt.auth.signInWithOAuth({provider:"google"});if(I)throw I}catch(I){p(I.error_description||I.message),r(!1)}},E=async I=>{I.preventDefault(),r(!0),p(null);try{s?await B():await P()}catch(V){p(V.error_description||V.message)}finally{r(!1)}},C=Math.min(n.length/30,1);return S.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[#FBF8F3] dark:bg-slate-900 animate-fade-in relative p-4",children:[t&&S.jsxs("button",{onClick:t,className:"absolute top-6 left-6 flex items-center gap-2 text-slate-500 hover:text-indigo-600 transition-colors font-medium",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Home"]}),S.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-700",children:[S.jsx(rN,{focusState:f,emailProgress:C,typingCounter:y,isPasswordVisible:b}),S.jsxs("div",{className:"text-center",children:[S.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Diary"}),S.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:s?"Create a secure, encrypted account.":"Sign in to access your journal."})]}),c&&S.jsx("p",{className:"text-center text-red-500 bg-red-50 dark:bg-red-900/20 dark:text-red-300 p-3 rounded-md",children:c}),S.jsxs("form",{className:"space-y-6",onSubmit:E,children:[S.jsx("input",{type:"email",placeholder:"Your email",value:n,required:!0,onChange:I=>{i(I.target.value),A()},onFocus:m,onBlur:x,onKeyDown:A,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 transition-all",autoComplete:"username"}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:b?"text":"password",placeholder:"Your password (min 6 characters)",value:a,required:!0,minLength:6,onChange:I=>{o(I.target.value),A()},onFocus:_,onBlur:x,onKeyDown:A,className:"w-full px-4 py-3 pr-12 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 transition-all",autoComplete:s?"new-password":"current-password"}),S.jsx("button",{type:"button",onClick:()=>g(!b),className:"absolute inset-y-0 right-0 flex items-center px-4 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors",tabIndex:-1,"aria-label":b?"Hide password":"Show password",children:b?S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),S.jsx("path",{fillRule:"evenodd",d:"M.458 10C3.732 4.943 9.522 3 10 3s6.268 1.943 9.542 7c-3.274 5.057-9.042 7-9.542 7S3.732 15.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.27 8.138 15.522 6 10 6c-1.55 0-2.998.48-4.257 1.254l-1.74-1.741zM10 12a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"}),S.jsx("path",{d:"M2.042 10c.832 2.345 3.16 4 5.918 4 1.55 0 2.998-.48 4.257-1.254l-1.473-1.473A3.999 3.999 0 0110 14c-2.209 0-4-1.791-4-4a3.999 3.999 0 011.21-2.828L5.293 5.293A10.014 10.014 0 00.458 10c1.274 1.862 4.022 4 9.542 4 1.105 0 2.158-.149 3.168-.43L10.373 12.16A4.003 4.003 0 0110 12z"})]})})]}),s&&a.length>0&&S.jsxs("div",{className:"space-y-2 animate-fade-in",children:[S.jsxs("div",{className:"flex gap-1 h-1.5 w-full",children:[S.jsx("div",{className:`h-full rounded-full flex-1 transition-all duration-300 ${D>=1?j():"bg-slate-100 dark:bg-slate-700"}`}),S.jsx("div",{className:`h-full rounded-full flex-1 transition-all duration-300 ${D>=2?j():"bg-slate-100 dark:bg-slate-700"}`}),S.jsx("div",{className:`h-full rounded-full flex-1 transition-all duration-300 ${D>=3?j():"bg-slate-100 dark:bg-slate-700"}`}),S.jsx("div",{className:`h-full rounded-full flex-1 transition-all duration-300 ${D>=4?j():"bg-slate-100 dark:bg-slate-700"}`})]}),S.jsxs("div",{className:"flex justify-between text-xs",children:[S.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Strength"}),S.jsx("span",{className:`font-medium ${D<2?"text-red-500":D<4?"text-blue-500":"text-green-500"}`,children:T()})]})]}),S.jsx("button",{type:"submit",disabled:e,className:"w-full px-4 py-3 font-bold text-white bg-indigo-500 rounded-xl hover:bg-indigo-600 disabled:bg-indigo-300 transition-all transform active:scale-95 shadow-lg shadow-indigo-500/30",children:e?"Loading...":s?"Sign Up":"Sign In"})]}),S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-slate-200 dark:border-slate-600"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-2 bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400",children:"Or continue with"})})]}),S.jsxs("button",{type:"button",onClick:k,disabled:e,className:"w-full flex items-center justify-center gap-3 px-4 py-3 border border-slate-200 rounded-xl hover:bg-slate-50 disabled:bg-slate-50 dark:border-slate-600 dark:hover:bg-slate-700 dark:disabled:bg-slate-700 transition-colors",children:[S.jsxs("svg",{className:"w-5 h-5","aria-hidden":"true",viewBox:"0 0 24 24",children:[S.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),S.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.8 0-5.2-1.89-6.06-4.44H2.36v2.84C4.01 20.44 7.7 23 12 23z",fill:"#34A853"}),S.jsx("path",{d:"M5.94 14.06c-.18-.54-.28-1.11-.28-1.69s.1-1.15.28-1.69V7.84H2.36C1.5 9.49 1 11.18 1 12.87s.5 3.38 1.36 4.96l3.58-2.77z",fill:"#FBBC05"}),S.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 1.33 14.97 0 12 0 7.7 0 4.01 2.56 2.36 6.21l3.58 2.84C6.8 4.73 9.2 2.84 12 5.38z",fill:"#EA4335"})]}),S.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Sign in with Google"})]}),S.jsxs("p",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:[s?"Already have an account? ":"Don't have an account? ",S.jsx("button",{onClick:()=>{l(!s),p(null)},className:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300",children:s?"Sign In":"Sign Up"})]})]})]})},tx="DAILY_DIARY_KEY_CHECK_v1",Zo=t=>btoa(String.fromCharCode(...new Uint8Array(t))),es=t=>Uint8Array.from(atob(t),e=>e.charCodeAt(0)).buffer,rx=new TextEncoder,iN=new TextDecoder,aN=()=>{const t=window.crypto.getRandomValues(new Uint8Array(16));return Zo(t.buffer)},nx=async(t,e)=>{const r=rx.encode(t);let n=1e5,i=e;if(e.startsWith("v1:")){const s=e.split(":");if(s.length===3){const l=parseInt(s[1],10);isNaN(l)||(n=l,i=s[2])}}const a=es(i),o=await window.crypto.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey"]);return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:a,iterations:n,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])},em=async(t,e)=>{const r=window.crypto.getRandomValues(new Uint8Array(12)),n=rx.encode(e),i=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,n);return{iv:Zo(r.buffer),data:Zo(i)}},tm=async(t,e,r)=>{const n=es(r),i=es(e),a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},t,i);return iN.decode(a)},oN=async(t,e)=>{const r=window.crypto.getRandomValues(new Uint8Array(12)),n=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,e);return{iv:Zo(r.buffer),data:n}},sN=async(t,e,r)=>{const n=es(r);return await window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},t,e)};async function lN(t,e){const{data:r,error:n}=await Vt.from("profiles").select("*").eq("id",e).single();if(n||!r)return console.error("Profile not found for user:",e),null;const i=r;try{const a=await nx(t,i.salt);return await tm(a,i.key_check_value,i.key_check_iv)===tx?a:null}catch(a){return console.error("Key derivation or verification failed:",a),null}}const rm=async t=>{const e=await window.crypto.subtle.exportKey("raw",t);return Zo(e)},uN=async t=>{const e=es(t);return window.crypto.subtle.importKey("raw",e,{name:"AES-GCM"},!0,["encrypt","decrypt"])},ix=we.createContext(void 0),cN=({children:t})=>{const[e,r]=we.useState(null),n=we.useCallback(()=>{r(null)},[]),i={key:e,setKey:r,deriveAndVerifyKey:lN,encrypt:em,decrypt:tm,encryptBinary:oN,decryptBinary:sN,lock:n};return S.jsx(ix.Provider,{value:i,children:t})},is=()=>{const t=we.useContext(ix);if(t===void 0)throw new Error("useCrypto must be used within a CryptoProvider");return t},fN="227b57dcb9e272db9e362fee3a14b924";async function dN(t,e){const r=`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${e}&appid=${fN}&units=metric`;try{const n=await fetch(r);if(!n.ok)throw new Error(`Weather API request failed with status ${n.status}`);const i=await n.json();return{temp:i.main.temp,description:i.weather[0].description,icon:i.weather[0].icon,location:i.name}}catch(n){return console.error("Could not fetch weather data:",n),null}}const hN=t=>{try{const r=new DOMParser().parseFromString(t,"text/html").body.textContent||"";if(console.log("SmartTags: Analyzing text length:",r.length),r.length<3)return[];const n=[],i=/#(\w+)/g;let a;for(;(a=i.exec(r))!==null;)a[1].length>1&&n.push(a[1]);if(Dm){const l=Dm(r),c=l.topics().out("array"),p=l.places().out("array"),d=l.people().out("array"),f=l.organizations().out("array"),u=l.match("#ProperNoun").out("array");n.push(...c,...p,...d,...f,...u)}else console.warn("SmartTags: 'compromise' library not loaded. Only hashtags will work.");const o=n.map(l=>l.trim()).map(l=>l.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9]+$/g,"")).filter(l=>l.length>2).map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()),s=Array.from(new Set(o));return console.log("SmartTags: Suggestions found:",s),s}catch(e){return console.error("SmartTags: Error generating tags",e),[]}},pN=(t,e=1200,r=.8)=>new Promise((n,i)=>{const a=new Image,o=URL.createObjectURL(t);a.src=o,a.onload=()=>{URL.revokeObjectURL(o);let s=a.width,l=a.height;s>e&&(l=Math.round(l*e/s),s=e);const c=document.createElement("canvas");c.width=s,c.height=l;const p=c.getContext("2d");if(!p){i(new Error("Could not get canvas context"));return}p.drawImage(a,0,0,s,l),c.toBlob(d=>{d?n({blob:d,extension:"webp"}):i(new Error("Image compression failed"))},"image/webp",r)},a.onerror=s=>{URL.revokeObjectURL(o),i(s)}}),gN=({isVisible:t,onClose:e,activeView:r,onChangeView:n,onNewEntry:i,journals:a,activeJournal:o,onSelectJournal:s})=>{const l=[{view:"timeline",label:"Timeline",icon:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})},{view:"calendar",label:"Calendar",icon:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{view:"search",label:"Search",icon:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}],c=p=>{s(p),window.innerWidth<768&&e()};return S.jsxs("aside",{className:`bg-[#F4EFE9] dark:bg-slate-900 border-r border-[#EAE1D6] dark:border-slate-800 flex flex-col transition-transform duration-300 ease-in-out w-64 fixed md:absolute md:top-0 md:left-0 z-30 h-full ${t?"translate-x-0":"-translate-x-full"}`,children:[S.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#EAE1D6] dark:border-slate-800",children:[S.jsx("h1",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Diary"}),S.jsx("button",{onClick:e,className:"p-2 rounded-md hover:bg-slate-200/50 dark:hover:bg-slate-700/50",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[S.jsxs("button",{onClick:i,className:"w-full flex items-center gap-3 p-3 rounded-lg text-white font-semibold transition-colors bg-indigo-500 hover:bg-indigo-600 shadow-sm mb-6",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),S.jsx("span",{children:"New Entry"})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"px-3 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2",children:"Views"}),l.map(p=>S.jsxs("button",{onClick:()=>{n(p.view),window.innerWidth<768&&e()},className:`w-full flex items-center gap-3 p-2.5 rounded-lg text-left text-sm font-medium transition-colors ${r===p.view?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-200/50 dark:hover:bg-slate-800"}`,children:[p.icon,S.jsx("span",{children:p.label})]},p.view))]}),S.jsxs("div",{className:"pt-6",children:[S.jsxs("h3",{className:"px-3 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 flex items-center justify-between",children:[S.jsx("span",{children:"Journals"}),S.jsx("span",{className:"bg-slate-200 dark:bg-slate-700 text-[10px] px-1.5 py-0.5 rounded-full text-slate-600 dark:text-slate-300",children:a.length})]}),S.jsxs("div",{className:"space-y-1",children:[S.jsxs("button",{onClick:()=>c(null),className:`w-full flex items-center gap-3 p-2.5 rounded-lg text-left text-sm font-medium transition-colors ${o===null&&r==="timeline"?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-200/50 dark:hover:bg-slate-800"}`,children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 opacity-70",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"})}),S.jsx("span",{children:"All Entries"})]}),a.map(p=>S.jsxs("button",{onClick:()=>c(p),className:`w-full flex items-center gap-3 p-2.5 rounded-lg text-left text-sm font-medium transition-colors ${o===p?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-200/50 dark:hover:bg-slate-800"}`,children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 opacity-70",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"})}),S.jsx("span",{className:"truncate",children:p})]},p))]})]})]})]})};function Gt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ka(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function mN(t,e){const r=Gt(t);return isNaN(e)?ka(t,NaN):(r.setDate(r.getDate()+e),r)}const ax=6048e5,vN=864e5,Bf=43200,b2=1440;let yN={};function _c(){return yN}function ts(t,e){var s,l,c,p;const r=_c(),n=(e==null?void 0:e.weekStartsOn)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((p=(c=r.locale)==null?void 0:c.options)==null?void 0:p.weekStartsOn)??0,i=Gt(t),a=i.getDay(),o=(a<n?7:0)+a-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function zd(t){return ts(t,{weekStartsOn:1})}function ox(t){const e=Gt(t),r=e.getFullYear(),n=ka(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=zd(n),a=ka(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=zd(a);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function $d(t){const e=Gt(t);return e.setHours(0,0,0,0),e}function Hd(t){const e=Gt(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function wN(t,e){const r=$d(t),n=$d(e),i=+r-Hd(r),a=+n-Hd(n);return Math.round((i-a)/vN)}function bN(t){const e=ox(t),r=ka(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),zd(r)}function ad(t,e){const r=Gt(t),n=Gt(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function yh(t){return ka(t,Date.now())}function sx(t,e){const r=$d(t),n=$d(e);return+r==+n}function xN(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function _N(t){if(!xN(t)&&typeof t!="number")return!1;const e=Gt(t);return!isNaN(Number(e))}function SN(t,e){const r=Gt(t),n=Gt(e),i=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return i*12+a}function kN(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function NN(t,e){return+Gt(t)-+Gt(e)}function AN(t){const e=Gt(t);return e.setHours(23,59,59,999),e}function EN(t){const e=Gt(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function ON(t){const e=Gt(t);return+AN(e)==+EN(e)}function jN(t,e){const r=Gt(t),n=Gt(e),i=ad(r,n),a=Math.abs(SN(r,n));let o;if(a<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*a);let s=ad(r,n)===-i;ON(Gt(t))&&a===1&&ad(t,n)===1&&(s=!1),o=i*(a-Number(s))}return o===0?0:o}function TN(t,e,r){const n=NN(t,e)/1e3;return kN(r==null?void 0:r.roundingMethod)(n)}function LN(t){const e=Gt(t),r=ka(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const PN={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},CN=(t,e,r)=>{let n;const i=PN[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Kp(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const RN={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},IN={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},DN={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},MN={date:Kp({formats:RN,defaultWidth:"full"}),time:Kp({formats:IN,defaultWidth:"full"}),dateTime:Kp({formats:DN,defaultWidth:"full"})},BN={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},FN=(t,e,r,n)=>BN[t];function yu(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,s=r!=null&&r.width?String(r.width):o;i=t.formattingValues[s]||t.formattingValues[o]}else{const o=t.defaultWidth,s=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[s]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const qN={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},UN={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zN={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$N={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},HN={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},WN={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},VN=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},GN={ordinalNumber:VN,era:yu({values:qN,defaultWidth:"wide"}),quarter:yu({values:UN,defaultWidth:"wide",argumentCallback:t=>t-1}),month:yu({values:zN,defaultWidth:"wide"}),day:yu({values:$N,defaultWidth:"wide"}),dayPeriod:yu({values:HN,defaultWidth:"wide",formattingValues:WN,defaultFormattingWidth:"wide"})};function wu(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],s=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(s)?YN(s,d=>d.test(o)):KN(s,d=>d.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const p=e.slice(o.length);return{value:c,rest:p}}}function KN(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function YN(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function JN(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const s=e.slice(i.length);return{value:o,rest:s}}}const XN=/^(\d+)(th|st|nd|rd)?/i,QN=/\d+/i,ZN={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},eA={any:[/^b/i,/^(a|c)/i]},tA={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rA={any:[/1/i,/2/i,/3/i,/4/i]},nA={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},iA={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},aA={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},oA={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sA={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},lA={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uA={ordinalNumber:JN({matchPattern:XN,parsePattern:QN,valueCallback:t=>parseInt(t,10)}),era:wu({matchPatterns:ZN,defaultMatchWidth:"wide",parsePatterns:eA,defaultParseWidth:"any"}),quarter:wu({matchPatterns:tA,defaultMatchWidth:"wide",parsePatterns:rA,defaultParseWidth:"any",valueCallback:t=>t+1}),month:wu({matchPatterns:nA,defaultMatchWidth:"wide",parsePatterns:iA,defaultParseWidth:"any"}),day:wu({matchPatterns:aA,defaultMatchWidth:"wide",parsePatterns:oA,defaultParseWidth:"any"}),dayPeriod:wu({matchPatterns:sA,defaultMatchWidth:"any",parsePatterns:lA,defaultParseWidth:"any"})},lx={code:"en-US",formatDistance:CN,formatLong:MN,formatRelative:FN,localize:GN,match:uA,options:{weekStartsOn:0,firstWeekContainsDate:1}};function cA(t){const e=Gt(t);return wN(e,LN(e))+1}function fA(t){const e=Gt(t),r=+zd(e)-+bN(e);return Math.round(r/ax)+1}function ux(t,e){var p,d,f,u;const r=Gt(t),n=r.getFullYear(),i=_c(),a=(e==null?void 0:e.firstWeekContainsDate)??((d=(p=e==null?void 0:e.locale)==null?void 0:p.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((u=(f=i.locale)==null?void 0:f.options)==null?void 0:u.firstWeekContainsDate)??1,o=ka(t,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const s=ts(o,e),l=ka(t,0);l.setFullYear(n,0,a),l.setHours(0,0,0,0);const c=ts(l,e);return r.getTime()>=s.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function dA(t,e){var s,l,c,p;const r=_c(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(c=r.locale)==null?void 0:c.options)==null?void 0:p.firstWeekContainsDate)??1,i=ux(t,e),a=ka(t,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),ts(a,e)}function hA(t,e){const r=Gt(t),n=+ts(r,e)-+dA(r,e);return Math.round(n/ax)+1}function Ft(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const $a={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Ft(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Ft(r+1,2)},d(t,e){return Ft(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Ft(t.getHours()%12||12,e.length)},H(t,e){return Ft(t.getHours(),e.length)},m(t,e){return Ft(t.getMinutes(),e.length)},s(t,e){return Ft(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return Ft(i,e.length)}},Ms={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},x2={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return $a.y(t,e)},Y:function(t,e,r,n){const i=ux(t,n),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return Ft(o,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):Ft(a,e.length)},R:function(t,e){const r=ox(t);return Ft(r,e.length)},u:function(t,e){const r=t.getFullYear();return Ft(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Ft(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Ft(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return $a.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Ft(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=hA(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):Ft(i,e.length)},I:function(t,e,r){const n=fA(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Ft(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):$a.d(t,e)},D:function(t,e,r){const n=cA(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ft(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Ft(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Ft(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Ft(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=Ms.noon:n===0?i=Ms.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=Ms.evening:n>=12?i=Ms.afternoon:n>=4?i=Ms.morning:i=Ms.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return $a.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):$a.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ft(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ft(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):$a.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):$a.s(t,e)},S:function(t,e){return $a.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return S2(n);case"XXXX":case"XX":return Co(n);case"XXXXX":case"XXX":default:return Co(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return S2(n);case"xxxx":case"xx":return Co(n);case"xxxxx":case"xxx":default:return Co(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_2(n,":");case"OOOO":default:return"GMT"+Co(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_2(n,":");case"zzzz":default:return"GMT"+Co(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Ft(n,e.length)},T:function(t,e,r){const n=t.getTime();return Ft(n,e.length)}};function _2(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),a=n%60;return a===0?r+String(i):r+String(i)+e+Ft(a,2)}function S2(t,e){return t%60===0?(t>0?"-":"+")+Ft(Math.abs(t)/60,2):Co(t,e)}function Co(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Ft(Math.trunc(n/60),2),a=Ft(n%60,2);return r+i+e+a}const k2=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},cx=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},pA=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return k2(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",k2(n,e)).replace("{{time}}",cx(i,e))},gA={p:cx,P:pA},mA=/^D+$/,vA=/^Y+$/,yA=["D","DD","YY","YYYY"];function wA(t){return mA.test(t)}function bA(t){return vA.test(t)}function xA(t,e,r){const n=_A(t,e,r);if(console.warn(n),yA.includes(t))throw new RangeError(n)}function _A(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const SA=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kA=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,NA=/^'([^]*?)'?$/,AA=/''/g,EA=/[a-zA-Z]/;function pc(t,e,r){var p,d,f,u;const n=_c(),i=n.locale??lx,a=n.firstWeekContainsDate??((d=(p=n.locale)==null?void 0:p.options)==null?void 0:d.firstWeekContainsDate)??1,o=n.weekStartsOn??((u=(f=n.locale)==null?void 0:f.options)==null?void 0:u.weekStartsOn)??0,s=Gt(t);if(!_N(s))throw new RangeError("Invalid time value");let l=e.match(kA).map(y=>{const v=y[0];if(v==="p"||v==="P"){const b=gA[v];return b(y,i.formatLong)}return y}).join("").match(SA).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const v=y[0];if(v==="'")return{isToken:!1,value:OA(y)};if(x2[v])return{isToken:!0,value:y};if(v.match(EA))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(l=i.localize.preprocessor(s,l));const c={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return l.map(y=>{if(!y.isToken)return y.value;const v=y.value;(bA(v)||wA(v))&&xA(v,e,String(t));const b=x2[v[0]];return b(s,v,i.localize,c)}).join("")}function OA(t){const e=t.match(NA);return e?e[1].replace(AA,"'"):t}function jA(t,e,r){const n=_c(),i=(r==null?void 0:r.locale)??n.locale??lx,a=2520,o=ad(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const s=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,c;o>0?(l=Gt(e),c=Gt(t)):(l=Gt(t),c=Gt(e));const p=TN(c,l),d=(Hd(c)-Hd(l))/1e3,f=Math.round((p-d)/60);let u;if(f<2)return r!=null&&r.includeSeconds?p<5?i.formatDistance("lessThanXSeconds",5,s):p<10?i.formatDistance("lessThanXSeconds",10,s):p<20?i.formatDistance("lessThanXSeconds",20,s):p<40?i.formatDistance("halfAMinute",0,s):p<60?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",1,s):f===0?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",f,s);if(f<45)return i.formatDistance("xMinutes",f,s);if(f<90)return i.formatDistance("aboutXHours",1,s);if(f<b2){const y=Math.round(f/60);return i.formatDistance("aboutXHours",y,s)}else{if(f<a)return i.formatDistance("xDays",1,s);if(f<Bf){const y=Math.round(f/b2);return i.formatDistance("xDays",y,s)}else if(f<Bf*2)return u=Math.round(f/Bf),i.formatDistance("aboutXMonths",u,s)}if(u=jN(c,l),u<12){const y=Math.round(f/Bf);return i.formatDistance("xMonths",y,s)}else{const y=u%12,v=Math.trunc(u/12);return y<3?i.formatDistance("aboutXYears",v,s):y<9?i.formatDistance("overXYears",v,s):i.formatDistance("almostXYears",v+1,s)}}function fx(t,e){return jA(t,yh(t),e)}function TA(t,e,r){const n=ts(t,r),i=ts(e,r);return+n==+i}function LA(t,e){return TA(t,yh(t),e)}function PA(t){return sx(t,yh(t))}function CA(t,e){return mN(t,-1)}function RA(t){return sx(t,CA(yh(t)))}const IA=({status:t})=>{const e={encrypting:{text:"Encrypting...",icon:S.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})},synced:{text:"Synced",icon:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})},error:{text:"Error",icon:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}},{text:r,icon:n}=e[t];return S.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400",children:[n,S.jsx("span",{className:"hidden sm:inline",children:r})]})},DA=({isEditing:t,onSave:e,onCancel:r,currentDate:n,weather:i,theme:a,onToggleTheme:o,saveStatus:s,profile:l,onShowProfile:c,isToolsPanelVisible:p,onToggleToolsPanel:d,isLeftSidebarVisible:f})=>{const[u,y]=we.useState(new Date),[v,b]=we.useState(null),{lock:g}=is();return we.useEffect(()=>{const m=setInterval(()=>{y(new Date)},6e4);return()=>clearInterval(m)},[]),we.useEffect(()=>{let m=!0;return(async()=>{if(!(l!=null&&l.avatar_url)){m&&b(null);return}if(l.avatar_url.startsWith("http"))m&&b(l.avatar_url);else try{const{data:x,error:A}=await Vt.storage.from("avatars").createSignedUrl(l.avatar_url,3600);if(A)throw A;m&&(x!=null&&x.signedUrl)&&b(x.signedUrl)}catch(x){console.error("Error resolving avatar URL in TopBar:",x),m&&b(null)}})(),()=>{m=!1}},[l==null?void 0:l.avatar_url]),S.jsx("header",{className:"bg-white/80 dark:bg-slate-900/50 backdrop-blur-sm border-b border-[#EAE1D6] dark:border-slate-800 min-h-[4rem] flex-shrink-0 relative z-20 transition-all duration-200",children:S.jsxs("div",{className:"min-h-[4rem] flex flex-wrap items-center justify-between px-4 sm:px-6 py-2 gap-y-2",children:[S.jsxs("div",{className:`flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-slate-600 dark:text-slate-300 transition-all duration-300 ${f?"":"pl-12 md:pl-16"} ${t?"hidden md:flex":"flex"}`,children:[S.jsx("span",{className:"font-semibold",children:pc(u,"p")}),S.jsx("span",{className:"font-semibold",children:pc(n,"MMMM d, yyyy")}),i&&S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full"}),S.jsxs("span",{children:[i.location,", ",Math.round(i.temp),"C"]})]})]}),S.jsx("div",{className:`flex items-center gap-3 ${t&&!f?"pl-12 md:pl-0":""}`,children:t?S.jsxs(S.Fragment,{children:[S.jsx(IA,{status:s}),S.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm font-semibold rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),S.jsx("button",{onClick:e,className:"px-4 py-1.5 text-sm font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 transition-colors shadow-sm",children:"Save"})]}):S.jsx("div",{className:"hidden md:block h-9"})}),S.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 ml-auto md:ml-0",children:[t&&S.jsx("button",{onClick:d,title:"Toggle Tools Panel",className:`p-2 rounded-full transition-colors ${p?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-600":"hover:bg-slate-200/50 dark:hover:bg-slate-700/50 text-slate-500"}`,children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),S.jsx("button",{onClick:g,title:"Lock Diary",className:"p-2 rounded-full hover:bg-slate-200/50 dark:hover:bg-slate-700/50 text-slate-500 dark:text-slate-400",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),S.jsx("button",{onClick:o,title:"Toggle Theme",className:"p-2 rounded-full hover:bg-slate-200/50 dark:hover:bg-slate-700/50 text-slate-500 dark:text-slate-400",children:a==="dark"?S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 14.464A1 1 0 106.465 13.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zm-1.414-2.12a1 1 0 011.414 0l.707.707a1 1 0 11-1.414 1.414l-.707-.707a1 1 0 010-1.414zM4 11a1 1 0 100-2H3a1 1 0 100 2h1z",clipRule:"evenodd"})})}),S.jsx("button",{onClick:c,title:"Profile & Settings",className:"w-9 h-9 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden flex items-center justify-center hover:ring-2 ring-indigo-500 ring-offset-2 ring-offset-white dark:ring-offset-slate-900 transition-all",children:v?S.jsx("img",{src:v,alt:"User avatar",className:"w-full h-full object-cover"}):S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})})]})]})})},MA=({wordCount:t,characterCount:e,saveStatus:r})=>{const n={encrypting:{text:"Encrypting...",classes:"text-yellow-600 dark:text-yellow-400"},synced:{text:"Synced",classes:"text-green-600 dark:text-green-400"},error:{text:"Save Error",classes:"text-red-600 dark:text-red-400"}};return S.jsx("footer",{className:"bg-white/80 dark:bg-slate-900/50 backdrop-blur-sm border-t border-[#EAE1D6] dark:border-slate-800 h-10 flex-shrink-0",children:S.jsxs("div",{className:"h-full flex items-center justify-between px-6 text-sm text-slate-500 dark:text-slate-400",children:[S.jsx("div",{children:S.jsxs("span",{children:[t," words / ",e," characters"]})}),S.jsx("div",{className:`font-semibold ${n[r].classes}`,children:n[r].text})]})})},BA=({onRecordingComplete:t,existingBlob:e,onDelete:r})=>{const[n,i]=we.useState(!1),[a,o]=we.useState(0),s=we.useRef(null),l=we.useRef([]),c=we.useRef(null);we.useEffect(()=>()=>{c.current&&clearInterval(c.current)},[]);const p=async()=>{try{const u=await navigator.mediaDevices.getUserMedia({audio:!0});let y="audio/webm";MediaRecorder.isTypeSupported("audio/mp4")?y="audio/mp4":MediaRecorder.isTypeSupported("audio/webm;codecs=opus")&&(y="audio/webm;codecs=opus"),s.current=new MediaRecorder(u,{mimeType:y}),l.current=[],s.current.ondataavailable=v=>{v.data.size>0&&l.current.push(v.data)},s.current.onstop=()=>{var g;const v=((g=s.current)==null?void 0:g.mimeType)||y,b=new Blob(l.current,{type:v});t(b),l.current=[],u.getTracks().forEach(m=>m.stop())},s.current.start(),i(!0),o(0),c.current=window.setInterval(()=>{o(v=>v+1)},1e3)}catch(u){console.error("Error accessing microphone:",u),alert("Could not access microphone. Please check permissions.")}},d=()=>{s.current&&n&&(s.current.stop(),i(!1),c.current&&clearInterval(c.current))},f=u=>{const y=Math.floor(u/60),v=u%60;return`${y.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`};return e?S.jsxs("div",{className:"w-full p-3 rounded-md bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800 flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-100 dark:bg-indigo-800 flex items-center justify-center text-indigo-600 dark:text-indigo-300",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})})}),S.jsx("span",{className:"text-sm font-medium text-indigo-800 dark:text-indigo-300",children:"Audio Note Added"})]}),S.jsx("button",{onClick:r,className:"p-1.5 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full transition-colors",title:"Delete Audio",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}):S.jsx("div",{className:"w-full",children:n?S.jsxs("div",{className:"w-full flex items-center justify-between p-2 rounded-md bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsxs("div",{className:"relative flex h-3 w-3",children:[S.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),S.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}),S.jsx("span",{className:"text-sm font-mono font-medium text-red-600 dark:text-red-300",children:f(a)})]}),S.jsx("button",{onClick:d,className:"p-1.5 rounded-full bg-red-100 text-red-600 hover:bg-red-200 dark:bg-red-800 dark:text-red-200 dark:hover:bg-red-700 transition-colors",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})})})]}):S.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center gap-3 p-2 rounded-md text-sm text-slate-700 dark:text-slate-300 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 transition-colors",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})}),S.jsx("span",{children:"Record Audio"})]})})},FA=["","","","","","","",""],qA=({entry:t,onUpdateEntry:e,editorFont:r,onFontChange:n,onImageUpload:i,isUploadingImage:a,selectedImageFormat:o,onImageFormatChange:s,availableJournals:l})=>{const c=typeof t=="object"?t.mood:void 0,p=typeof t=="object"?t.tags||[]:[],d=typeof t=="object"&&t.journal?t.journal:"Personal",f=typeof t=="object"?t.tempAudioBlob:void 0,[u,y]=we.useState(p.join(", ")),v=we.useRef(null);we.useEffect(()=>{const T=u.split(",").map(P=>P.trim()).filter(Boolean),j=p;JSON.stringify(T)!==JSON.stringify(j)&&y(j.join(", "))},[p]);const b=()=>{var T;(T=v.current)==null||T.click()},g=T=>{var B;const j=(B=T.target.files)==null?void 0:B[0];j&&i(j),v.current&&(v.current.value="")},m=T=>{y(T);const j=T.split(",").map(B=>B.trim()).filter(Boolean);e({tags:j})},_=T=>{e({mood:T===c?void 0:T})},x=T=>{e({journal:T})},A=T=>{e({tempAudioBlob:T})},D=()=>{e({tempAudioBlob:void 0})};return S.jsxs("aside",{className:"w-64 h-full bg-white/80 dark:bg-slate-900/50 border-l border-[#EAE1D6] dark:border-slate-800 p-4 space-y-6 flex-shrink-0 overflow-y-auto",children:[S.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Tools"}),S.jsx("div",{className:"space-y-4",children:S.jsxs("div",{children:[S.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Journal"}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:"text",list:"journal-options",value:d,onChange:T=>x(T.target.value),className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded-md bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"Select or type..."}),S.jsxs("datalist",{id:"journal-options",children:[l.map(T=>S.jsx("option",{value:T},T)),!l.includes("Personal")&&S.jsx("option",{value:"Personal"}),!l.includes("Work")&&S.jsx("option",{value:"Work"}),!l.includes("Ideas")&&S.jsx("option",{value:"Ideas"})]})]}),S.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Type a new name to create a book."})]})}),S.jsxs("div",{className:"space-y-4 pt-2 border-t border-slate-200 dark:border-slate-700",children:[S.jsx(BA,{onRecordingComplete:A,existingBlob:f,onDelete:D}),S.jsx("input",{type:"file",ref:v,onChange:g,className:"hidden",accept:"image/*"}),S.jsx("button",{onClick:b,disabled:a,className:"w-full flex items-center justify-center gap-3 p-2 rounded-md text-sm text-slate-700 dark:text-slate-300 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:a?S.jsxs(S.Fragment,{children:[S.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),S.jsx("span",{children:"Uploading..."})]}):S.jsxs(S.Fragment,{children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),S.jsx("span",{children:"Insert Image"})]})}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Font Style"}),S.jsxs("div",{className:"flex flex-col gap-1",children:[S.jsx("button",{onClick:()=>n("serif"),className:`w-full text-left p-2 rounded-md text-sm font-serif transition-colors ${r==="serif"?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Serif (Lora)"}),S.jsx("button",{onClick:()=>n("sans"),className:`w-full text-left p-2 rounded-md text-sm font-sans transition-colors ${r==="sans"?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Sans-Serif"}),S.jsx("button",{onClick:()=>n("mono"),className:`w-full text-left p-2 rounded-md text-sm font-mono transition-colors ${r==="mono"?"bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Monospace"})]})]})]}),o&&S.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6 space-y-4",children:[S.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Image Tools"}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Size"}),S.jsx("div",{className:"grid grid-cols-4 gap-1",children:["25%","50%","75%","100%"].map(T=>S.jsx("button",{onClick:()=>s({width:T}),className:`p-2 text-xs rounded-md ${o.width===T?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:T},T))})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Alignment"}),S.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[S.jsx("button",{onClick:()=>s({align:!1,float:"left",margin:"0.5em 1em 0.5em 0"}),className:`p-2 rounded-md flex justify-center ${o.float==="left"?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M2 5a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zM2 9a1 1 0 011-1h5a1 1 0 110 2H3a1 1 0 01-1-1zm7 4a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z",clipRule:"evenodd"})})}),S.jsx("button",{onClick:()=>s({align:"center",float:!1,margin:!1}),className:`p-2 rounded-md flex justify-center ${o.align==="center"?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M2 5a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zM2 9a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zm1 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),S.jsx("button",{onClick:()=>s({align:!1,float:"right",margin:"0.5em 0 0.5em 1em"}),className:`p-2 rounded-md flex justify-center ${o.float==="right"?"bg-indigo-500 text-white":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M2 5a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zm0 4a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zm7 4a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z",clipRule:"evenodd"})})})]})]})]}),S.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6 space-y-4",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Mood"}),S.jsx("div",{className:"grid grid-cols-4 gap-2",children:FA.map(T=>S.jsx("button",{type:"button",onClick:()=>_(T),className:`text-2xl p-2 rounded-md transition-all ${c===T?"bg-indigo-100 dark:bg-indigo-500/50 scale-110":"hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:T},T))})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Tags"}),S.jsx("textarea",{value:u,onChange:T=>m(T.target.value),placeholder:"travel, work...",className:"w-full h-20 p-2 text-sm rounded-md bg-slate-100 dark:bg-slate-800 border-transparent focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]})]})},UA=({entries:t,onSelectEntry:e})=>t.length===0?null:S.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-slate-800/50 dark:to-slate-800/50 p-6 rounded-lg border border-indigo-200 dark:border-slate-700 shadow-sm",children:[S.jsxs("h3",{className:"text-lg font-bold text-indigo-800 dark:text-indigo-300 mb-4 flex items-center gap-2",children:[S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l-3-3m0 0l3-3m-3 3h9"})]}),"On This Day..."]}),S.jsx("div",{className:"space-y-3",children:t.map(r=>{const n=new Date(r.created_at).getFullYear(),i=new Date().getFullYear()-n;return S.jsxs("div",{onClick:()=>e(r.id),className:"bg-white/60 dark:bg-slate-700/50 p-3 rounded-md cursor-pointer hover:bg-white dark:hover:bg-slate-700 transition-colors flex justify-between items-center",children:[S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:r.title}),S.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i," year",i>1?"s":""," ago"]})]}),S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]},r.id)})})]}),dx=t=>{try{const e=new Date(t);return PA(e)?fx(e,{addSuffix:!0}):RA(e)?"Yesterday":LA(e,{weekStartsOn:0})?pc(e,"EEEE"):pc(e,"MMMM d, yyyy")}catch(e){return console.error("Error formatting date:",t,e),"Invalid date"}},zA=t=>{try{const e=new Date(t);return pc(e,"EEEE, MMMM d, yyyy 'at' p")}catch(e){return console.error("Error formatting full date:",t,e),"Invalid date"}},$A=t=>{try{const e=new Date(t);return fx(e,{addSuffix:!0})}catch(e){return console.error("Error formatting relative time:",t,e),"Invalid time"}},HA=({entry:t,onSelect:e,onLoadContent:r})=>{const n=we.useRef(null);we.useEffect(()=>{if(t.isDecrypted||t.isLoading)return;const a=new IntersectionObserver(o=>{o[0].isIntersecting&&(r(t.id),a.disconnect())},{rootMargin:"100px"});return n.current&&a.observe(n.current),()=>a.disconnect()},[t.id,t.isDecrypted,t.isLoading,r]);const i=a=>new DOMParser().parseFromString(a,"text/html").body.textContent||"";return S.jsxs("div",{ref:n,onClick:e,className:"bg-white/50 dark:bg-slate-800/50 p-6 rounded-lg shadow-sm hover:shadow-lg transition-shadow duration-300 cursor-pointer border border-slate-200 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-600",children:[S.jsxs("div",{className:"flex justify-between items-start gap-4",children:[S.jsxs("div",{className:"flex flex-col gap-1",children:[S.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v11.494m0-11.494M12 6.253a4.093 4.093 0 00-3.32 6.19l-2.06 2.06a1 1 0 001.42 1.42l2.06-2.06A4.094 4.094 0 0012 17.747m0 0a4.093 4.093 0 003.32-6.19l2.06-2.06a1 1 0 00-1.42-1.42l-2.06 2.06A4.094 4.094 0 0012 6.253z"})}),S.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:t.journal||"Personal"})]}),t.isDecrypted?S.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:t.title||"Untitled"}):S.jsx("div",{className:"h-7 bg-slate-200 dark:bg-slate-700 rounded w-48 animate-pulse"})]}),S.jsxs("div",{className:"text-right flex-shrink-0",children:[S.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 whitespace-nowrap",title:new Date(t.created_at).toLocaleString(),children:dx(t.created_at)}),t.mood&&S.jsx("span",{className:"text-lg block mt-1","aria-label":`Mood: ${t.mood}`,children:t.mood})]})]}),t.tags&&t.tags.length>0&&S.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.tags.map(a=>S.jsx("span",{className:"text-xs font-medium bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded-full dark:bg-indigo-900/50 dark:text-indigo-300",children:a},a))}),S.jsx("div",{className:"mt-3",children:t.isDecrypted?S.jsx("p",{className:"text-slate-600 dark:text-slate-300 line-clamp-2",children:i(t.content)}):S.jsxs("div",{className:"space-y-2 animate-pulse mt-2",children:[S.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full"}),S.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-5/6"})]})})]})},WA=({entries:t,onSelectEntry:e,onLoadContent:r,onThisDayEntries:n,profile:i,filteredDate:a,onClearFilter:o})=>t.length===0?a?S.jsxs("div",{className:"text-center py-20 flex flex-col items-center",children:[S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-20 w-20 text-slate-300 dark:text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 4h-4m-4-4h-4"})]}),S.jsxs("h2",{className:"mt-6 text-2xl font-bold text-slate-700 dark:text-slate-200",children:["No entries found for ",a.toLocaleDateString("default",{month:"long",day:"numeric",year:"numeric"}),"."]}),S.jsx("button",{onClick:o,className:"mt-4 text-indigo-600 dark:text-indigo-400 hover:underline font-semibold",children:"Show All Entries"})]}):S.jsxs("div",{className:"text-center py-20 flex flex-col items-center",children:[S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-20 w-20 text-slate-300 dark:text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v11.494m-9-5.747h18"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]}),S.jsxs("h2",{className:"mt-6 text-3xl font-bold text-slate-700 dark:text-slate-200",children:["Welcome to Diary, ",(i==null?void 0:i.full_name)||"friend","!"]}),S.jsx("p",{className:"mt-2 text-slate-500 dark:text-slate-400",children:"This is your private, encrypted space to reflect and record."}),S.jsx("p",{className:"mt-4 text-slate-500 dark:text-slate-400",children:'Click "New Entry" to write your first post.'})]}):S.jsxs("div",{className:"space-y-6",children:[a?S.jsxs("div",{className:"bg-indigo-50 dark:bg-slate-800/50 p-4 rounded-lg border border-indigo-200 dark:border-slate-700 flex justify-between items-center",children:[S.jsxs("h3",{className:"text-lg font-bold text-indigo-800 dark:text-indigo-300",children:["Showing entries for ",a.toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric"})]}),S.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-sm font-semibold text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"Show All"]})]}):S.jsx(UA,{entries:n,onSelectEntry:e}),!a&&S.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Welcome back, ",(i==null?void 0:i.full_name)||"friend","!"]}),S.jsx("div",{className:"space-y-4",children:t.map(s=>S.jsx(HA,{entry:s,onSelect:()=>e(s.id),onLoadContent:r},s.id))})]});/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:hx,setPrototypeOf:N2,isFrozen:VA,getPrototypeOf:GA,getOwnPropertyDescriptor:KA}=Object;let{freeze:kn,seal:vi,create:x1}=Object,{apply:_1,construct:S1}=typeof Reflect<"u"&&Reflect;kn||(kn=function(e){return e});vi||(vi=function(e){return e});_1||(_1=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return e.apply(r,i)});S1||(S1=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return new e(...n)});const Ff=Nn(Array.prototype.forEach),YA=Nn(Array.prototype.lastIndexOf),A2=Nn(Array.prototype.pop),bu=Nn(Array.prototype.push),JA=Nn(Array.prototype.splice),od=Nn(String.prototype.toLowerCase),Yp=Nn(String.prototype.toString),Jp=Nn(String.prototype.match),xu=Nn(String.prototype.replace),XA=Nn(String.prototype.indexOf),QA=Nn(String.prototype.trim),Oi=Nn(Object.prototype.hasOwnProperty),bn=Nn(RegExp.prototype.test),_u=ZA(TypeError);function Nn(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return _1(t,e,n)}}function ZA(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return S1(t,r)}}function St(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:od;N2&&N2(t,null);let n=e.length;for(;n--;){let i=e[n];if(typeof i=="string"){const a=r(i);a!==i&&(VA(e)||(e[n]=a),i=a)}t[i]=!0}return t}function eE(t){for(let e=0;e<t.length;e++)Oi(t,e)||(t[e]=null);return t}function ha(t){const e=x1(null);for(const[r,n]of hx(t))Oi(t,r)&&(Array.isArray(n)?e[r]=eE(n):n&&typeof n=="object"&&n.constructor===Object?e[r]=ha(n):e[r]=n);return e}function Su(t,e){for(;t!==null;){const n=KA(t,e);if(n){if(n.get)return Nn(n.get);if(typeof n.value=="function")return Nn(n.value)}t=GA(t)}function r(){return null}return r}const E2=kn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Xp=kn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Qp=kn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),tE=kn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Zp=kn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),rE=kn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),O2=kn(["#text"]),j2=kn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),e0=kn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),T2=kn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),qf=kn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),nE=vi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),iE=vi(/<%[\w\W]*|[\w\W]*%>/gm),aE=vi(/\$\{[\w\W]*/gm),oE=vi(/^data-[\-\w.\u00B7-\uFFFF]+$/),sE=vi(/^aria-[\-\w]+$/),px=vi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),lE=vi(/^(?:\w+script|data):/i),uE=vi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),gx=vi(/^html$/i),cE=vi(/^[a-z][.\w]*(-[.\w]+)+$/i);var L2=Object.freeze({__proto__:null,ARIA_ATTR:sE,ATTR_WHITESPACE:uE,CUSTOM_ELEMENT:cE,DATA_ATTR:oE,DOCTYPE_NAME:gx,ERB_EXPR:iE,IS_ALLOWED_URI:px,IS_SCRIPT_OR_DATA:lE,MUSTACHE_EXPR:nE,TMPLIT_EXPR:aE});const ku={element:1,text:3,progressingInstruction:7,comment:8,document:9},fE=function(){return typeof window>"u"?null:window},dE=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(n=r.getAttribute(i));const a="dompurify"+(n?"#"+n:"");try{return e.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},P2=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function mx(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fE();const e=He=>mx(He);if(e.version="3.3.0",e.removed=[],!t||!t.document||t.document.nodeType!==ku.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const n=r,i=n.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:s,Element:l,NodeFilter:c,NamedNodeMap:p=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:u}=t,y=l.prototype,v=Su(y,"cloneNode"),b=Su(y,"remove"),g=Su(y,"nextSibling"),m=Su(y,"childNodes"),_=Su(y,"parentNode");if(typeof o=="function"){const He=r.createElement("template");He.content&&He.content.ownerDocument&&(r=He.content.ownerDocument)}let x,A="";const{implementation:D,createNodeIterator:T,createDocumentFragment:j,getElementsByTagName:B}=r,{importNode:P}=n;let k=P2();e.isSupported=typeof hx=="function"&&typeof _=="function"&&D&&D.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:E,ERB_EXPR:C,TMPLIT_EXPR:I,DATA_ATTR:V,ARIA_ATTR:ee,IS_SCRIPT_OR_DATA:te,ATTR_WHITESPACE:Q,CUSTOM_ELEMENT:Y}=L2;let{IS_ALLOWED_URI:W}=L2,q=null;const L=St({},[...E2,...Xp,...Qp,...Zp,...O2]);let M=null;const U=St({},[...j2,...e0,...T2,...qf]);let H=Object.seal(x1(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),F=null,J=null;const re=Object.seal(x1(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ne=!0,de=!0,xe=!1,je=!0,Ee=!1,Me=!0,Se=!1,ae=!1,Ve=!1,pe=!1,se=!1,he=!1,ye=!0,ge=!1;const Ie="user-content-";let qe=!0,Ue=!1,rt={},lt=null;const at=St({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ot=null;const tt=St({},["audio","video","img","source","image","track"]);let ze=null;const br=St({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),bt="http://www.w3.org/1998/Math/MathML",zr="http://www.w3.org/2000/svg",xt="http://www.w3.org/1999/xhtml";let jt=xt,rn=!1,Nt=null;const yi=St({},[bt,zr,xt],Yp);let Dt=St({},["mi","mo","mn","ms","mtext"]),$r=St({},["annotation-xml"]);const zn=St({},["title","style","font","a","script"]);let It=null;const dt=["application/xhtml+xml","text/html"],Et="text/html";let zt=null,Xt=null;const On=r.createElement("form"),nn=function(le){return le instanceof RegExp||le instanceof Function},be=function(){let le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Xt&&Xt===le)){if((!le||typeof le!="object")&&(le={}),le=ha(le),It=dt.indexOf(le.PARSER_MEDIA_TYPE)===-1?Et:le.PARSER_MEDIA_TYPE,zt=It==="application/xhtml+xml"?Yp:od,q=Oi(le,"ALLOWED_TAGS")?St({},le.ALLOWED_TAGS,zt):L,M=Oi(le,"ALLOWED_ATTR")?St({},le.ALLOWED_ATTR,zt):U,Nt=Oi(le,"ALLOWED_NAMESPACES")?St({},le.ALLOWED_NAMESPACES,Yp):yi,ze=Oi(le,"ADD_URI_SAFE_ATTR")?St(ha(br),le.ADD_URI_SAFE_ATTR,zt):br,ot=Oi(le,"ADD_DATA_URI_TAGS")?St(ha(tt),le.ADD_DATA_URI_TAGS,zt):tt,lt=Oi(le,"FORBID_CONTENTS")?St({},le.FORBID_CONTENTS,zt):at,F=Oi(le,"FORBID_TAGS")?St({},le.FORBID_TAGS,zt):ha({}),J=Oi(le,"FORBID_ATTR")?St({},le.FORBID_ATTR,zt):ha({}),rt=Oi(le,"USE_PROFILES")?le.USE_PROFILES:!1,ne=le.ALLOW_ARIA_ATTR!==!1,de=le.ALLOW_DATA_ATTR!==!1,xe=le.ALLOW_UNKNOWN_PROTOCOLS||!1,je=le.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ee=le.SAFE_FOR_TEMPLATES||!1,Me=le.SAFE_FOR_XML!==!1,Se=le.WHOLE_DOCUMENT||!1,pe=le.RETURN_DOM||!1,se=le.RETURN_DOM_FRAGMENT||!1,he=le.RETURN_TRUSTED_TYPE||!1,Ve=le.FORCE_BODY||!1,ye=le.SANITIZE_DOM!==!1,ge=le.SANITIZE_NAMED_PROPS||!1,qe=le.KEEP_CONTENT!==!1,Ue=le.IN_PLACE||!1,W=le.ALLOWED_URI_REGEXP||px,jt=le.NAMESPACE||xt,Dt=le.MATHML_TEXT_INTEGRATION_POINTS||Dt,$r=le.HTML_INTEGRATION_POINTS||$r,H=le.CUSTOM_ELEMENT_HANDLING||{},le.CUSTOM_ELEMENT_HANDLING&&nn(le.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=le.CUSTOM_ELEMENT_HANDLING.tagNameCheck),le.CUSTOM_ELEMENT_HANDLING&&nn(le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),le.CUSTOM_ELEMENT_HANDLING&&typeof le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(H.allowCustomizedBuiltInElements=le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ee&&(de=!1),se&&(pe=!0),rt&&(q=St({},O2),M=[],rt.html===!0&&(St(q,E2),St(M,j2)),rt.svg===!0&&(St(q,Xp),St(M,e0),St(M,qf)),rt.svgFilters===!0&&(St(q,Qp),St(M,e0),St(M,qf)),rt.mathMl===!0&&(St(q,Zp),St(M,T2),St(M,qf))),le.ADD_TAGS&&(typeof le.ADD_TAGS=="function"?re.tagCheck=le.ADD_TAGS:(q===L&&(q=ha(q)),St(q,le.ADD_TAGS,zt))),le.ADD_ATTR&&(typeof le.ADD_ATTR=="function"?re.attributeCheck=le.ADD_ATTR:(M===U&&(M=ha(M)),St(M,le.ADD_ATTR,zt))),le.ADD_URI_SAFE_ATTR&&St(ze,le.ADD_URI_SAFE_ATTR,zt),le.FORBID_CONTENTS&&(lt===at&&(lt=ha(lt)),St(lt,le.FORBID_CONTENTS,zt)),qe&&(q["#text"]=!0),Se&&St(q,["html","head","body"]),q.table&&(St(q,["tbody"]),delete F.tbody),le.TRUSTED_TYPES_POLICY){if(typeof le.TRUSTED_TYPES_POLICY.createHTML!="function")throw _u('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof le.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw _u('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=le.TRUSTED_TYPES_POLICY,A=x.createHTML("")}else x===void 0&&(x=dE(u,i)),x!==null&&typeof A=="string"&&(A=x.createHTML(""));kn&&kn(le),Xt=le}},Be=St({},[...Xp,...Qp,...tE]),Qe=St({},[...Zp,...rE]),Je=function(le){let Re=_(le);(!Re||!Re.tagName)&&(Re={namespaceURI:jt,tagName:"template"});const Ge=od(le.tagName),Ct=od(Re.tagName);return Nt[le.namespaceURI]?le.namespaceURI===zr?Re.namespaceURI===xt?Ge==="svg":Re.namespaceURI===bt?Ge==="svg"&&(Ct==="annotation-xml"||Dt[Ct]):!!Be[Ge]:le.namespaceURI===bt?Re.namespaceURI===xt?Ge==="math":Re.namespaceURI===zr?Ge==="math"&&$r[Ct]:!!Qe[Ge]:le.namespaceURI===xt?Re.namespaceURI===zr&&!$r[Ct]||Re.namespaceURI===bt&&!Dt[Ct]?!1:!Qe[Ge]&&(zn[Ge]||!Be[Ge]):!!(It==="application/xhtml+xml"&&Nt[le.namespaceURI]):!1},nt=function(le){bu(e.removed,{element:le});try{_(le).removeChild(le)}catch{b(le)}},pt=function(le,Re){try{bu(e.removed,{attribute:Re.getAttributeNode(le),from:Re})}catch{bu(e.removed,{attribute:null,from:Re})}if(Re.removeAttribute(le),le==="is")if(pe||se)try{nt(Re)}catch{}else try{Re.setAttribute(le,"")}catch{}},ir=function(le){let Re=null,Ge=null;if(Ve)le="<remove></remove>"+le;else{const ur=Jp(le,/^[\r\n\t ]+/);Ge=ur&&ur[0]}It==="application/xhtml+xml"&&jt===xt&&(le='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+le+"</body></html>");const Ct=x?x.createHTML(le):le;if(jt===xt)try{Re=new f().parseFromString(Ct,It)}catch{}if(!Re||!Re.documentElement){Re=D.createDocument(jt,"template",null);try{Re.documentElement.innerHTML=rn?A:Ct}catch{}}const Tr=Re.body||Re.documentElement;return le&&Ge&&Tr.insertBefore(r.createTextNode(Ge),Tr.childNodes[0]||null),jt===xt?B.call(Re,Se?"html":"body")[0]:Se?Re.documentElement:Tr},Mr=function(le){return T.call(le.ownerDocument||le,le,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Kt=function(le){return le instanceof d&&(typeof le.nodeName!="string"||typeof le.textContent!="string"||typeof le.removeChild!="function"||!(le.attributes instanceof p)||typeof le.removeAttribute!="function"||typeof le.setAttribute!="function"||typeof le.namespaceURI!="string"||typeof le.insertBefore!="function"||typeof le.hasChildNodes!="function")},_t=function(le){return typeof s=="function"&&le instanceof s};function Tt(He,le,Re){Ff(He,Ge=>{Ge.call(e,le,Re,Xt)})}const $t=function(le){let Re=null;if(Tt(k.beforeSanitizeElements,le,null),Kt(le))return nt(le),!0;const Ge=zt(le.nodeName);if(Tt(k.uponSanitizeElement,le,{tagName:Ge,allowedTags:q}),Me&&le.hasChildNodes()&&!_t(le.firstElementChild)&&bn(/<[/\w!]/g,le.innerHTML)&&bn(/<[/\w!]/g,le.textContent)||le.nodeType===ku.progressingInstruction||Me&&le.nodeType===ku.comment&&bn(/<[/\w]/g,le.data))return nt(le),!0;if(!(re.tagCheck instanceof Function&&re.tagCheck(Ge))&&(!q[Ge]||F[Ge])){if(!F[Ge]&&Ht(Ge)&&(H.tagNameCheck instanceof RegExp&&bn(H.tagNameCheck,Ge)||H.tagNameCheck instanceof Function&&H.tagNameCheck(Ge)))return!1;if(qe&&!lt[Ge]){const Ct=_(le)||le.parentNode,Tr=m(le)||le.childNodes;if(Tr&&Ct){const ur=Tr.length;for(let xr=ur-1;xr>=0;--xr){const jn=v(Tr[xr],!0);jn.__removalCount=(le.__removalCount||0)+1,Ct.insertBefore(jn,g(le))}}}return nt(le),!0}return le instanceof l&&!Je(le)||(Ge==="noscript"||Ge==="noembed"||Ge==="noframes")&&bn(/<\/no(script|embed|frames)/i,le.innerHTML)?(nt(le),!0):(Ee&&le.nodeType===ku.text&&(Re=le.textContent,Ff([E,C,I],Ct=>{Re=xu(Re,Ct," ")}),le.textContent!==Re&&(bu(e.removed,{element:le.cloneNode()}),le.textContent=Re)),Tt(k.afterSanitizeElements,le,null),!1)},Qt=function(le,Re,Ge){if(ye&&(Re==="id"||Re==="name")&&(Ge in r||Ge in On))return!1;if(!(de&&!J[Re]&&bn(V,Re))){if(!(ne&&bn(ee,Re))){if(!(re.attributeCheck instanceof Function&&re.attributeCheck(Re,le))){if(!M[Re]||J[Re]){if(!(Ht(le)&&(H.tagNameCheck instanceof RegExp&&bn(H.tagNameCheck,le)||H.tagNameCheck instanceof Function&&H.tagNameCheck(le))&&(H.attributeNameCheck instanceof RegExp&&bn(H.attributeNameCheck,Re)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(Re,le))||Re==="is"&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&bn(H.tagNameCheck,Ge)||H.tagNameCheck instanceof Function&&H.tagNameCheck(Ge))))return!1}else if(!ze[Re]){if(!bn(W,xu(Ge,Q,""))){if(!((Re==="src"||Re==="xlink:href"||Re==="href")&&le!=="script"&&XA(Ge,"data:")===0&&ot[le])){if(!(xe&&!bn(te,xu(Ge,Q,"")))){if(Ge)return!1}}}}}}}return!0},Ht=function(le){return le!=="annotation-xml"&&Jp(le,Y)},Zt=function(le){Tt(k.beforeSanitizeAttributes,le,null);const{attributes:Re}=le;if(!Re||Kt(le))return;const Ge={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:M,forceKeepAttr:void 0};let Ct=Re.length;for(;Ct--;){const Tr=Re[Ct],{name:ur,namespaceURI:xr,value:jn}=Tr,qi=zt(ur),ta=jn;let _r=ur==="value"?ta:QA(ta);if(Ge.attrName=qi,Ge.attrValue=_r,Ge.keepAttr=!0,Ge.forceKeepAttr=void 0,Tt(k.uponSanitizeAttribute,le,Ge),_r=Ge.attrValue,ge&&(qi==="id"||qi==="name")&&(pt(ur,le),_r=Ie+_r),Me&&bn(/((--!?|])>)|<\/(style|title|textarea)/i,_r)){pt(ur,le);continue}if(qi==="attributename"&&Jp(_r,"href")){pt(ur,le);continue}if(Ge.forceKeepAttr)continue;if(!Ge.keepAttr){pt(ur,le);continue}if(!je&&bn(/\/>/i,_r)){pt(ur,le);continue}Ee&&Ff([E,C,I],os=>{_r=xu(_r,os," ")});const vo=zt(le.nodeName);if(!Qt(vo,qi,_r)){pt(ur,le);continue}if(x&&typeof u=="object"&&typeof u.getAttributeType=="function"&&!xr)switch(u.getAttributeType(vo,qi)){case"TrustedHTML":{_r=x.createHTML(_r);break}case"TrustedScriptURL":{_r=x.createScriptURL(_r);break}}if(_r!==ta)try{xr?le.setAttributeNS(xr,ur,_r):le.setAttribute(ur,_r),Kt(le)?nt(le):A2(e.removed)}catch{pt(ur,le)}}Tt(k.afterSanitizeAttributes,le,null)},mn=function He(le){let Re=null;const Ge=Mr(le);for(Tt(k.beforeSanitizeShadowDOM,le,null);Re=Ge.nextNode();)Tt(k.uponSanitizeShadowNode,Re,null),$t(Re),Zt(Re),Re.content instanceof a&&He(Re.content);Tt(k.afterSanitizeShadowDOM,le,null)};return e.sanitize=function(He){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=null,Ge=null,Ct=null,Tr=null;if(rn=!He,rn&&(He="<!-->"),typeof He!="string"&&!_t(He))if(typeof He.toString=="function"){if(He=He.toString(),typeof He!="string")throw _u("dirty is not a string, aborting")}else throw _u("toString is not a function");if(!e.isSupported)return He;if(ae||be(le),e.removed=[],typeof He=="string"&&(Ue=!1),Ue){if(He.nodeName){const jn=zt(He.nodeName);if(!q[jn]||F[jn])throw _u("root node is forbidden and cannot be sanitized in-place")}}else if(He instanceof s)Re=ir("<!---->"),Ge=Re.ownerDocument.importNode(He,!0),Ge.nodeType===ku.element&&Ge.nodeName==="BODY"||Ge.nodeName==="HTML"?Re=Ge:Re.appendChild(Ge);else{if(!pe&&!Ee&&!Se&&He.indexOf("<")===-1)return x&&he?x.createHTML(He):He;if(Re=ir(He),!Re)return pe?null:he?A:""}Re&&Ve&&nt(Re.firstChild);const ur=Mr(Ue?He:Re);for(;Ct=ur.nextNode();)$t(Ct),Zt(Ct),Ct.content instanceof a&&mn(Ct.content);if(Ue)return He;if(pe){if(se)for(Tr=j.call(Re.ownerDocument);Re.firstChild;)Tr.appendChild(Re.firstChild);else Tr=Re;return(M.shadowroot||M.shadowrootmode)&&(Tr=P.call(n,Tr,!0)),Tr}let xr=Se?Re.outerHTML:Re.innerHTML;return Se&&q["!doctype"]&&Re.ownerDocument&&Re.ownerDocument.doctype&&Re.ownerDocument.doctype.name&&bn(gx,Re.ownerDocument.doctype.name)&&(xr="<!DOCTYPE "+Re.ownerDocument.doctype.name+`>
`+xr),Ee&&Ff([E,C,I],jn=>{xr=xu(xr,jn," ")}),x&&he?x.createHTML(xr):xr},e.setConfig=function(){let He=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};be(He),ae=!0},e.clearConfig=function(){Xt=null,ae=!1},e.isValidAttribute=function(He,le,Re){Xt||be({});const Ge=zt(He),Ct=zt(le);return Qt(Ge,Ct,Re)},e.addHook=function(He,le){typeof le=="function"&&bu(k[He],le)},e.removeHook=function(He,le){if(le!==void 0){const Re=YA(k[He],le);return Re===-1?void 0:JA(k[He],Re,1)[0]}return A2(k[He])},e.removeHooks=function(He){k[He]=[]},e.removeAllHooks=function(){k=P2()},e}var t0=mx();const hE=({path:t,iv:e,mimeType:r="audio/webm"})=>{const{key:n,decryptBinary:i}=is(),[a,o]=we.useState(null),[s,l]=we.useState("idle"),c=we.useRef(null),p=async()=>{if(n){l("loading");try{const{data:d,error:f}=await Vt.storage.from("diary-audio").download(t);if(f)throw f;l("decrypting");const u=await d.arrayBuffer(),y=await i(n,u,e),v=new Blob([y],{type:r}),b=URL.createObjectURL(v);o(b),l("ready")}catch(d){console.error("Error loading secure audio:",d),l("error")}}};return we.useEffect(()=>()=>{a&&URL.revokeObjectURL(a)},[a]),s==="idle"?S.jsxs("button",{onClick:p,className:"flex items-center gap-3 bg-indigo-50 dark:bg-slate-700 px-4 py-3 rounded-lg border border-indigo-100 dark:border-slate-600 hover:bg-indigo-100 dark:hover:bg-slate-600 transition-colors w-full sm:w-auto",children:[S.jsx("div",{className:"p-2 bg-indigo-500 rounded-full text-white",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),S.jsxs("div",{className:"text-left",children:[S.jsx("span",{className:"block text-sm font-semibold text-indigo-900 dark:text-indigo-100",children:"Load Audio Memory"}),S.jsx("span",{className:"block text-xs text-indigo-600 dark:text-slate-400",children:"Encrypted"})]})]}):s==="loading"||s==="decrypting"?S.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 dark:bg-slate-800 px-4 py-3 rounded-lg border border-slate-200 dark:border-slate-700 w-full sm:w-auto animate-pulse",children:[S.jsxs("svg",{className:"animate-spin h-5 w-5 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:s==="loading"?"Downloading...":"Decrypting..."})]}):s==="error"?S.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),S.jsx("span",{children:"Failed to load audio."})]}):S.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 w-full",children:S.jsx("audio",{ref:c,controls:!0,className:"w-full h-8 focus:outline-none",src:a})})},pE=({entry:t,onEdit:e,onDelete:r,onBack:n})=>{const i=zA(t.created_at),a=$A(t.created_at),o=we.useRef(null),{key:s,decryptBinary:l}=is();if(we.useEffect(()=>{const d=async()=>{if(!o.current||!s)return;const f=o.current.querySelectorAll("img.secure-diary-image");for(let u=0;u<f.length;u++){const y=f[u],v=y.getAttribute("data-secure-metadata")||y.getAttribute("alt");if(v&&!y.src.startsWith("blob:"))try{const b=JSON.parse(v);if(b.path&&b.iv){y.style.opacity="0.5",y.style.transition="opacity 0.3s";const{data:g,error:m}=await Vt.storage.from("diary-images").createSignedUrl(b.path,60);if(m)throw console.error("RLS Error: Could not sign URL. Check your Supabase policies.",m),m;const _=await fetch(g.signedUrl);if(!_.ok)throw new Error(`Failed to fetch image blob: ${_.status}`);const x=await _.arrayBuffer(),A=await l(s,x,b.iv),D=new Blob([A],{type:"image/webp"}),T=URL.createObjectURL(D);y.src=T,y.style.opacity="1"}}catch(b){console.error("Failed to decrypt image:",b),y.style.border="2px solid red",y.title="Decryption failed"}}};return t.isDecrypted&&d(),()=>{o.current&&o.current.querySelectorAll("img.secure-diary-image").forEach(u=>{const y=u.src;y.startsWith("blob:")&&URL.revokeObjectURL(y)})}},[t.isDecrypted,t.content,s,l]),!t.isDecrypted)return S.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 sm:p-8 rounded-lg shadow-md border border-slate-200 dark:border-slate-700 animate-fade-in flex items-center justify-center min-h-[300px]",children:S.jsxs("div",{className:"flex flex-col items-center gap-4",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Decrypting entry..."})]})});const c=["width","float","margin","margin-left","margin-right","margin-top","margin-bottom","text-align","opacity","transition"];t0.addHook("afterSanitizeAttributes",d=>{if(d instanceof Element&&d.hasAttribute("style")){const u=(d.getAttribute("style")||"").split(";").filter(y=>{if(!y.includes(":"))return!1;const v=y.split(":")[0].trim();return v&&c.includes(v)}).join(";");u?d.setAttribute("style",u):d.removeAttribute("style")}});const p=t0.sanitize(t.content,{ADD_TAGS:["img"],ADD_ATTR:["style","class","alt","data-secure-metadata"]});return t0.removeHook("afterSanitizeAttributes"),S.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 sm:p-8 rounded-lg shadow-md border border-slate-200 dark:border-slate-700 animate-fade-in",children:[S.jsxs("button",{onClick:n,className:"mb-6 flex items-center text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors group",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 transform group-hover:-translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Timeline"]}),S.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-700 pb-4 mb-4",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[S.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:t.title}),S.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i," (",a,")"]})]}),S.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[t.mood&&S.jsx("span",{className:"text-3xl","aria-label":`Mood: ${t.mood}`,children:t.mood}),t.tags&&t.tags.length>0&&S.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(d=>S.jsx("span",{className:"text-sm font-medium bg-indigo-100 text-indigo-800 px-2.5 py-1 rounded-full dark:bg-indigo-900/50 dark:text-indigo-300",children:d},d))})]})]}),t.audio&&S.jsx("div",{className:"my-6",children:S.jsx(hE,{path:t.audio.path,iv:t.audio.iv,mimeType:t.audio.type})}),S.jsx("div",{ref:o,className:"prose prose-slate dark:prose-invert max-w-none my-6",dangerouslySetInnerHTML:{__html:p}}),S.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-6 flex justify-end gap-3",children:[S.jsxs("button",{onClick:e,className:"flex items-center gap-2 bg-slate-100 text-slate-700 font-semibold px-4 py-2 rounded-lg hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 transition-colors",children:[S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),S.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),"Edit"]}),S.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-red-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Delete"]})]})]})};function gE(){this.__data__=[],this.size=0}var mE=gE;function vE(t,e){return t===e||t!==t&&e!==e}var vx=vE,yE=vx;function wE(t,e){for(var r=t.length;r--;)if(yE(t[r][0],e))return r;return-1}var wh=wE,bE=wh,xE=Array.prototype,_E=xE.splice;function SE(t){var e=this.__data__,r=bE(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():_E.call(e,r,1),--this.size,!0}var kE=SE,NE=wh;function AE(t){var e=this.__data__,r=NE(e,t);return r<0?void 0:e[r][1]}var EE=AE,OE=wh;function jE(t){return OE(this.__data__,t)>-1}var TE=jE,LE=wh;function PE(t,e){var r=this.__data__,n=LE(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var CE=PE,RE=mE,IE=kE,DE=EE,ME=TE,BE=CE;function jl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}jl.prototype.clear=RE;jl.prototype.delete=IE;jl.prototype.get=DE;jl.prototype.has=ME;jl.prototype.set=BE;var bh=jl,FE=bh;function qE(){this.__data__=new FE,this.size=0}var UE=qE;function zE(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var $E=zE;function HE(t){return this.__data__.get(t)}var WE=HE;function VE(t){return this.__data__.has(t)}var GE=VE,KE=typeof Xn=="object"&&Xn&&Xn.Object===Object&&Xn,yx=KE,YE=yx,JE=typeof self=="object"&&self&&self.Object===Object&&self,XE=YE||JE||Function("return this")(),Aa=XE,QE=Aa,ZE=QE.Symbol,nm=ZE,C2=nm,wx=Object.prototype,e8=wx.hasOwnProperty,t8=wx.toString,Nu=C2?C2.toStringTag:void 0;function r8(t){var e=e8.call(t,Nu),r=t[Nu];try{t[Nu]=void 0;var n=!0}catch{}var i=t8.call(t);return n&&(e?t[Nu]=r:delete t[Nu]),i}var n8=r8,i8=Object.prototype,a8=i8.toString;function o8(t){return a8.call(t)}var s8=o8,R2=nm,l8=n8,u8=s8,c8="[object Null]",f8="[object Undefined]",I2=R2?R2.toStringTag:void 0;function d8(t){return t==null?t===void 0?f8:c8:I2&&I2 in Object(t)?l8(t):u8(t)}var xh=d8;function h8(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var bx=h8,p8=xh,g8=bx,m8="[object AsyncFunction]",v8="[object Function]",y8="[object GeneratorFunction]",w8="[object Proxy]";function b8(t){if(!g8(t))return!1;var e=p8(t);return e==v8||e==y8||e==m8||e==w8}var xx=b8,x8=Aa,_8=x8["__core-js_shared__"],S8=_8,r0=S8,D2=function(){var t=/[^.]+$/.exec(r0&&r0.keys&&r0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function k8(t){return!!D2&&D2 in t}var N8=k8,A8=Function.prototype,E8=A8.toString;function O8(t){if(t!=null){try{return E8.call(t)}catch{}try{return t+""}catch{}}return""}var _x=O8,j8=xx,T8=N8,L8=bx,P8=_x,C8=/[\\^$.*+?()[\]{}|]/g,R8=/^\[object .+?Constructor\]$/,I8=Function.prototype,D8=Object.prototype,M8=I8.toString,B8=D8.hasOwnProperty,F8=RegExp("^"+M8.call(B8).replace(C8,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function q8(t){if(!L8(t)||T8(t))return!1;var e=j8(t)?F8:R8;return e.test(P8(t))}var U8=q8;function z8(t,e){return t==null?void 0:t[e]}var $8=z8,H8=U8,W8=$8;function V8(t,e){var r=W8(t,e);return H8(r)?r:void 0}var Tl=V8,G8=Tl,K8=Aa,Y8=G8(K8,"Map"),im=Y8,J8=Tl,X8=J8(Object,"create"),_h=X8,M2=_h;function Q8(){this.__data__=M2?M2(null):{},this.size=0}var Z8=Q8;function eO(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var tO=eO,rO=_h,nO="__lodash_hash_undefined__",iO=Object.prototype,aO=iO.hasOwnProperty;function oO(t){var e=this.__data__;if(rO){var r=e[t];return r===nO?void 0:r}return aO.call(e,t)?e[t]:void 0}var sO=oO,lO=_h,uO=Object.prototype,cO=uO.hasOwnProperty;function fO(t){var e=this.__data__;return lO?e[t]!==void 0:cO.call(e,t)}var dO=fO,hO=_h,pO="__lodash_hash_undefined__";function gO(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=hO&&e===void 0?pO:e,this}var mO=gO,vO=Z8,yO=tO,wO=sO,bO=dO,xO=mO;function Ll(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ll.prototype.clear=vO;Ll.prototype.delete=yO;Ll.prototype.get=wO;Ll.prototype.has=bO;Ll.prototype.set=xO;var _O=Ll,B2=_O,SO=bh,kO=im;function NO(){this.size=0,this.__data__={hash:new B2,map:new(kO||SO),string:new B2}}var AO=NO;function EO(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var OO=EO,jO=OO;function TO(t,e){var r=t.__data__;return jO(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Sh=TO,LO=Sh;function PO(t){var e=LO(this,t).delete(t);return this.size-=e?1:0,e}var CO=PO,RO=Sh;function IO(t){return RO(this,t).get(t)}var DO=IO,MO=Sh;function BO(t){return MO(this,t).has(t)}var FO=BO,qO=Sh;function UO(t,e){var r=qO(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var zO=UO,$O=AO,HO=CO,WO=DO,VO=FO,GO=zO;function Pl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Pl.prototype.clear=$O;Pl.prototype.delete=HO;Pl.prototype.get=WO;Pl.prototype.has=VO;Pl.prototype.set=GO;var Sx=Pl,KO=bh,YO=im,JO=Sx,XO=200;function QO(t,e){var r=this.__data__;if(r instanceof KO){var n=r.__data__;if(!YO||n.length<XO-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new JO(n)}return r.set(t,e),this.size=r.size,this}var ZO=QO,ej=bh,tj=UE,rj=$E,nj=WE,ij=GE,aj=ZO;function Cl(t){var e=this.__data__=new ej(t);this.size=e.size}Cl.prototype.clear=tj;Cl.prototype.delete=rj;Cl.prototype.get=nj;Cl.prototype.has=ij;Cl.prototype.set=aj;var oj=Cl,sj="__lodash_hash_undefined__";function lj(t){return this.__data__.set(t,sj),this}var uj=lj;function cj(t){return this.__data__.has(t)}var fj=cj,dj=Sx,hj=uj,pj=fj;function Wd(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new dj;++e<r;)this.add(t[e])}Wd.prototype.add=Wd.prototype.push=hj;Wd.prototype.has=pj;var gj=Wd;function mj(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var vj=mj;function yj(t,e){return t.has(e)}var wj=yj,bj=gj,xj=vj,_j=wj,Sj=1,kj=2;function Nj(t,e,r,n,i,a){var o=r&Sj,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var c=a.get(t),p=a.get(e);if(c&&p)return c==e&&p==t;var d=-1,f=!0,u=r&kj?new bj:void 0;for(a.set(t,e),a.set(e,t);++d<s;){var y=t[d],v=e[d];if(n)var b=o?n(v,y,d,e,t,a):n(y,v,d,t,e,a);if(b!==void 0){if(b)continue;f=!1;break}if(u){if(!xj(e,function(g,m){if(!_j(u,m)&&(y===g||i(y,g,r,n,a)))return u.push(m)})){f=!1;break}}else if(!(y===v||i(y,v,r,n,a))){f=!1;break}}return a.delete(t),a.delete(e),f}var kx=Nj,Aj=Aa,Ej=Aj.Uint8Array,Oj=Ej;function jj(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var Tj=jj;function Lj(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Pj=Lj,F2=nm,q2=Oj,Cj=vx,Rj=kx,Ij=Tj,Dj=Pj,Mj=1,Bj=2,Fj="[object Boolean]",qj="[object Date]",Uj="[object Error]",zj="[object Map]",$j="[object Number]",Hj="[object RegExp]",Wj="[object Set]",Vj="[object String]",Gj="[object Symbol]",Kj="[object ArrayBuffer]",Yj="[object DataView]",U2=F2?F2.prototype:void 0,n0=U2?U2.valueOf:void 0;function Jj(t,e,r,n,i,a,o){switch(r){case Yj:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Kj:return!(t.byteLength!=e.byteLength||!a(new q2(t),new q2(e)));case Fj:case qj:case $j:return Cj(+t,+e);case Uj:return t.name==e.name&&t.message==e.message;case Hj:case Vj:return t==e+"";case zj:var s=Ij;case Wj:var l=n&Mj;if(s||(s=Dj),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;n|=Bj,o.set(t,e);var p=Rj(s(t),s(e),n,i,a,o);return o.delete(t),p;case Gj:if(n0)return n0.call(t)==n0.call(e)}return!1}var Xj=Jj;function Qj(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Zj=Qj,e7=Array.isArray,am=e7,t7=Zj,r7=am;function n7(t,e,r){var n=e(t);return r7(t)?n:t7(n,r(t))}var i7=n7;function a7(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}var o7=a7;function s7(){return[]}var l7=s7,u7=o7,c7=l7,f7=Object.prototype,d7=f7.propertyIsEnumerable,z2=Object.getOwnPropertySymbols,h7=z2?function(t){return t==null?[]:(t=Object(t),u7(z2(t),function(e){return d7.call(t,e)}))}:c7,p7=h7;function g7(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var m7=g7;function v7(t){return t!=null&&typeof t=="object"}var kh=v7,y7=xh,w7=kh,b7="[object Arguments]";function x7(t){return w7(t)&&y7(t)==b7}var _7=x7,$2=_7,S7=kh,Nx=Object.prototype,k7=Nx.hasOwnProperty,N7=Nx.propertyIsEnumerable,A7=$2(function(){return arguments}())?$2:function(t){return S7(t)&&k7.call(t,"callee")&&!N7.call(t,"callee")},E7=A7,Vd={exports:{}};function O7(){return!1}var j7=O7;Vd.exports;(function(t,e){var r=Aa,n=j7,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?r.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||n;t.exports=c})(Vd,Vd.exports);var Ax=Vd.exports,T7=9007199254740991,L7=/^(?:0|[1-9]\d*)$/;function P7(t,e){var r=typeof t;return e=e??T7,!!e&&(r=="number"||r!="symbol"&&L7.test(t))&&t>-1&&t%1==0&&t<e}var C7=P7,R7=9007199254740991;function I7(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=R7}var Ex=I7,D7=xh,M7=Ex,B7=kh,F7="[object Arguments]",q7="[object Array]",U7="[object Boolean]",z7="[object Date]",$7="[object Error]",H7="[object Function]",W7="[object Map]",V7="[object Number]",G7="[object Object]",K7="[object RegExp]",Y7="[object Set]",J7="[object String]",X7="[object WeakMap]",Q7="[object ArrayBuffer]",Z7="[object DataView]",eT="[object Float32Array]",tT="[object Float64Array]",rT="[object Int8Array]",nT="[object Int16Array]",iT="[object Int32Array]",aT="[object Uint8Array]",oT="[object Uint8ClampedArray]",sT="[object Uint16Array]",lT="[object Uint32Array]",or={};or[eT]=or[tT]=or[rT]=or[nT]=or[iT]=or[aT]=or[oT]=or[sT]=or[lT]=!0;or[F7]=or[q7]=or[Q7]=or[U7]=or[Z7]=or[z7]=or[$7]=or[H7]=or[W7]=or[V7]=or[G7]=or[K7]=or[Y7]=or[J7]=or[X7]=!1;function uT(t){return B7(t)&&M7(t.length)&&!!or[D7(t)]}var cT=uT;function fT(t){return function(e){return t(e)}}var dT=fT,Gd={exports:{}};Gd.exports;(function(t,e){var r=yx,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,o=a&&r.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s})(Gd,Gd.exports);var hT=Gd.exports,pT=cT,gT=dT,H2=hT,W2=H2&&H2.isTypedArray,mT=W2?gT(W2):pT,Ox=mT,vT=m7,yT=E7,wT=am,bT=Ax,xT=C7,_T=Ox,ST=Object.prototype,kT=ST.hasOwnProperty;function NT(t,e){var r=wT(t),n=!r&&yT(t),i=!r&&!n&&bT(t),a=!r&&!n&&!i&&_T(t),o=r||n||i||a,s=o?vT(t.length,String):[],l=s.length;for(var c in t)(e||kT.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||xT(c,l)))&&s.push(c);return s}var AT=NT,ET=Object.prototype;function OT(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||ET;return t===r}var jT=OT;function TT(t,e){return function(r){return t(e(r))}}var LT=TT,PT=LT,CT=PT(Object.keys,Object),RT=CT,IT=jT,DT=RT,MT=Object.prototype,BT=MT.hasOwnProperty;function FT(t){if(!IT(t))return DT(t);var e=[];for(var r in Object(t))BT.call(t,r)&&r!="constructor"&&e.push(r);return e}var qT=FT,UT=xx,zT=Ex;function $T(t){return t!=null&&zT(t.length)&&!UT(t)}var HT=$T,WT=AT,VT=qT,GT=HT;function KT(t){return GT(t)?WT(t):VT(t)}var YT=KT,JT=i7,XT=p7,QT=YT;function ZT(t){return JT(t,QT,XT)}var eL=ZT,V2=eL,tL=1,rL=Object.prototype,nL=rL.hasOwnProperty;function iL(t,e,r,n,i,a){var o=r&tL,s=V2(t),l=s.length,c=V2(e),p=c.length;if(l!=p&&!o)return!1;for(var d=l;d--;){var f=s[d];if(!(o?f in e:nL.call(e,f)))return!1}var u=a.get(t),y=a.get(e);if(u&&y)return u==e&&y==t;var v=!0;a.set(t,e),a.set(e,t);for(var b=o;++d<l;){f=s[d];var g=t[f],m=e[f];if(n)var _=o?n(m,g,f,e,t,a):n(g,m,f,t,e,a);if(!(_===void 0?g===m||i(g,m,r,n,a):_)){v=!1;break}b||(b=f=="constructor")}if(v&&!b){var x=t.constructor,A=e.constructor;x!=A&&"constructor"in t&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof A=="function"&&A instanceof A)&&(v=!1)}return a.delete(t),a.delete(e),v}var aL=iL,oL=Tl,sL=Aa,lL=oL(sL,"DataView"),uL=lL,cL=Tl,fL=Aa,dL=cL(fL,"Promise"),hL=dL,pL=Tl,gL=Aa,mL=pL(gL,"Set"),vL=mL,yL=Tl,wL=Aa,bL=yL(wL,"WeakMap"),xL=bL,k1=uL,N1=im,A1=hL,E1=vL,O1=xL,jx=xh,Rl=_x,G2="[object Map]",_L="[object Object]",K2="[object Promise]",Y2="[object Set]",J2="[object WeakMap]",X2="[object DataView]",SL=Rl(k1),kL=Rl(N1),NL=Rl(A1),AL=Rl(E1),EL=Rl(O1),Ro=jx;(k1&&Ro(new k1(new ArrayBuffer(1)))!=X2||N1&&Ro(new N1)!=G2||A1&&Ro(A1.resolve())!=K2||E1&&Ro(new E1)!=Y2||O1&&Ro(new O1)!=J2)&&(Ro=function(t){var e=jx(t),r=e==_L?t.constructor:void 0,n=r?Rl(r):"";if(n)switch(n){case SL:return X2;case kL:return G2;case NL:return K2;case AL:return Y2;case EL:return J2}return e});var OL=Ro,i0=oj,jL=kx,TL=Xj,LL=aL,Q2=OL,Z2=am,ey=Ax,PL=Ox,CL=1,ty="[object Arguments]",ry="[object Array]",Uf="[object Object]",RL=Object.prototype,ny=RL.hasOwnProperty;function IL(t,e,r,n,i,a){var o=Z2(t),s=Z2(e),l=o?ry:Q2(t),c=s?ry:Q2(e);l=l==ty?Uf:l,c=c==ty?Uf:c;var p=l==Uf,d=c==Uf,f=l==c;if(f&&ey(t)){if(!ey(e))return!1;o=!0,p=!1}if(f&&!p)return a||(a=new i0),o||PL(t)?jL(t,e,r,n,i,a):TL(t,e,l,r,n,i,a);if(!(r&CL)){var u=p&&ny.call(t,"__wrapped__"),y=d&&ny.call(e,"__wrapped__");if(u||y){var v=u?t.value():t,b=y?e.value():e;return a||(a=new i0),i(v,b,r,n,a)}}return f?(a||(a=new i0),LL(t,e,r,n,i,a)):!1}var DL=IL,ML=DL,iy=kh;function Tx(t,e,r,n,i){return t===e?!0:t==null||e==null||!iy(t)&&!iy(e)?t!==t&&e!==e:ML(t,e,r,n,Tx,i)}var BL=Tx,FL=BL;function qL(t,e){return FL(t,e)}var UL=qL,Lx={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(n,i){t.exports=i()})(typeof self<"u"?self:Xn,function(){return function(r){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return r[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=r,i.c=n,i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:s})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=109)}([function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(17),o=i(18),s=i(19),l=i(45),c=i(46),p=i(47),d=i(48),f=i(49),u=i(12),y=i(32),v=i(33),b=i(31),g=i(1),m={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:a.default,Format:o.default,Leaf:s.default,Embed:d.default,Scroll:l.default,Block:p.default,Inline:c.default,Text:f.default,Attributor:{Attribute:u.default,Class:y.default,Style:v.default,Store:b.default}};n.default=m},function(r,n,i){var a=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var _ in m)m.hasOwnProperty(_)&&(g[_]=m[_])};return function(g,m){b(g,m);function _(){this.constructor=g}g.prototype=m===null?Object.create(m):(_.prototype=m.prototype,new _)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(b){a(g,b);function g(m){var _=this;return m="[Parchment] "+m,_=b.call(this,m)||this,_.message=m,_.name=_.constructor.name,_}return g}(Error);n.ParchmentError=o;var s={},l={},c={},p={};n.DATA_KEY="__blot";var d;(function(b){b[b.TYPE=3]="TYPE",b[b.LEVEL=12]="LEVEL",b[b.ATTRIBUTE=13]="ATTRIBUTE",b[b.BLOT=14]="BLOT",b[b.INLINE=7]="INLINE",b[b.BLOCK=11]="BLOCK",b[b.BLOCK_BLOT=10]="BLOCK_BLOT",b[b.INLINE_BLOT=6]="INLINE_BLOT",b[b.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",b[b.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",b[b.ANY=15]="ANY"})(d=n.Scope||(n.Scope={}));function f(b,g){var m=y(b);if(m==null)throw new o("Unable to create "+b+" blot");var _=m,x=b instanceof Node||b.nodeType===Node.TEXT_NODE?b:_.create(g);return new _(x,g)}n.create=f;function u(b,g){return g===void 0&&(g=!1),b==null?null:b[n.DATA_KEY]!=null?b[n.DATA_KEY].blot:g?u(b.parentNode,g):null}n.find=u;function y(b,g){g===void 0&&(g=d.ANY);var m;if(typeof b=="string")m=p[b]||s[b];else if(b instanceof Text||b.nodeType===Node.TEXT_NODE)m=p.text;else if(typeof b=="number")b&d.LEVEL&d.BLOCK?m=p.block:b&d.LEVEL&d.INLINE&&(m=p.inline);else if(b instanceof HTMLElement){var _=(b.getAttribute("class")||"").split(/\s+/);for(var x in _)if(m=l[_[x]],m)break;m=m||c[b.tagName]}return m==null?null:g&d.LEVEL&m.scope&&g&d.TYPE&m.scope?m:null}n.query=y;function v(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];if(b.length>1)return b.map(function(x){return v(x)});var m=b[0];if(typeof m.blotName!="string"&&typeof m.attrName!="string")throw new o("Invalid definition");if(m.blotName==="abstract")throw new o("Cannot register abstract class");if(p[m.blotName||m.attrName]=m,typeof m.keyName=="string")s[m.keyName]=m;else if(m.className!=null&&(l[m.className]=m),m.tagName!=null){Array.isArray(m.tagName)?m.tagName=m.tagName.map(function(x){return x.toUpperCase()}):m.tagName=m.tagName.toUpperCase();var _=Array.isArray(m.tagName)?m.tagName:[m.tagName];_.forEach(function(x){(c[x]==null||m.className==null)&&(c[x]=m)})}return m}n.register=v},function(r,n,i){var a=i(51),o=i(11),s=i(3),l=i(20),c="\0",p=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};p.prototype.insert=function(d,f){var u={};return d.length===0?this:(u.insert=d,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(u.attributes=f),this.push(u))},p.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},p.prototype.retain=function(d,f){if(d<=0)return this;var u={retain:d};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(u.attributes=f),this.push(u)},p.prototype.push=function(d){var f=this.ops.length,u=this.ops[f-1];if(d=s(!0,{},d),typeof u=="object"){if(typeof d.delete=="number"&&typeof u.delete=="number")return this.ops[f-1]={delete:u.delete+d.delete},this;if(typeof u.delete=="number"&&d.insert!=null&&(f-=1,u=this.ops[f-1],typeof u!="object"))return this.ops.unshift(d),this;if(o(d.attributes,u.attributes)){if(typeof d.insert=="string"&&typeof u.insert=="string")return this.ops[f-1]={insert:u.insert+d.insert},typeof d.attributes=="object"&&(this.ops[f-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof u.retain=="number")return this.ops[f-1]={retain:u.retain+d.retain},typeof d.attributes=="object"&&(this.ops[f-1].attributes=d.attributes),this}}return f===this.ops.length?this.ops.push(d):this.ops.splice(f,0,d),this},p.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},p.prototype.filter=function(d){return this.ops.filter(d)},p.prototype.forEach=function(d){this.ops.forEach(d)},p.prototype.map=function(d){return this.ops.map(d)},p.prototype.partition=function(d){var f=[],u=[];return this.forEach(function(y){var v=d(y)?f:u;v.push(y)}),[f,u]},p.prototype.reduce=function(d,f){return this.ops.reduce(d,f)},p.prototype.changeLength=function(){return this.reduce(function(d,f){return f.insert?d+l.length(f):f.delete?d-f.delete:d},0)},p.prototype.length=function(){return this.reduce(function(d,f){return d+l.length(f)},0)},p.prototype.slice=function(d,f){d=d||0,typeof f!="number"&&(f=1/0);for(var u=[],y=l.iterator(this.ops),v=0;v<f&&y.hasNext();){var b;v<d?b=y.next(d-v):(b=y.next(f-v),u.push(b)),v+=l.length(b)}return new p(u)},p.prototype.compose=function(d){var f=l.iterator(this.ops),u=l.iterator(d.ops),y=[],v=u.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var b=v.retain;f.peekType()==="insert"&&f.peekLength()<=b;)b-=f.peekLength(),y.push(f.next());v.retain-b>0&&u.next(v.retain-b)}for(var g=new p(y);f.hasNext()||u.hasNext();)if(u.peekType()==="insert")g.push(u.next());else if(f.peekType()==="delete")g.push(f.next());else{var m=Math.min(f.peekLength(),u.peekLength()),_=f.next(m),x=u.next(m);if(typeof x.retain=="number"){var A={};typeof _.retain=="number"?A.retain=m:A.insert=_.insert;var D=l.attributes.compose(_.attributes,x.attributes,typeof _.retain=="number");if(D&&(A.attributes=D),g.push(A),!u.hasNext()&&o(g.ops[g.ops.length-1],A)){var T=new p(f.rest());return g.concat(T).chop()}}else typeof x.delete=="number"&&typeof _.retain=="number"&&g.push(x)}return g.chop()},p.prototype.concat=function(d){var f=new p(this.ops.slice());return d.ops.length>0&&(f.push(d.ops[0]),f.ops=f.ops.concat(d.ops.slice(1))),f},p.prototype.diff=function(d,f){if(this.ops===d.ops)return new p;var u=[this,d].map(function(m){return m.map(function(_){if(_.insert!=null)return typeof _.insert=="string"?_.insert:c;var x=m===d?"on":"with";throw new Error("diff() called "+x+" non-document")}).join("")}),y=new p,v=a(u[0],u[1],f),b=l.iterator(this.ops),g=l.iterator(d.ops);return v.forEach(function(m){for(var _=m[1].length;_>0;){var x=0;switch(m[0]){case a.INSERT:x=Math.min(g.peekLength(),_),y.push(g.next(x));break;case a.DELETE:x=Math.min(_,b.peekLength()),b.next(x),y.delete(x);break;case a.EQUAL:x=Math.min(b.peekLength(),g.peekLength(),_);var A=b.next(x),D=g.next(x);o(A.insert,D.insert)?y.retain(x,l.attributes.diff(A.attributes,D.attributes)):y.push(D).delete(x);break}_-=x}}),y.chop()},p.prototype.eachLine=function(d,f){f=f||`
`;for(var u=l.iterator(this.ops),y=new p,v=0;u.hasNext();){if(u.peekType()!=="insert")return;var b=u.peek(),g=l.length(b)-u.peekLength(),m=typeof b.insert=="string"?b.insert.indexOf(f,g)-g:-1;if(m<0)y.push(u.next());else if(m>0)y.push(u.next(m));else{if(d(y,u.next(1).attributes||{},v)===!1)return;v+=1,y=new p}}y.length()>0&&d(y,{},v)},p.prototype.transform=function(d,f){if(f=!!f,typeof d=="number")return this.transformPosition(d,f);for(var u=l.iterator(this.ops),y=l.iterator(d.ops),v=new p;u.hasNext()||y.hasNext();)if(u.peekType()==="insert"&&(f||y.peekType()!=="insert"))v.retain(l.length(u.next()));else if(y.peekType()==="insert")v.push(y.next());else{var b=Math.min(u.peekLength(),y.peekLength()),g=u.next(b),m=y.next(b);if(g.delete)continue;m.delete?v.push(m):v.retain(b,l.attributes.transform(g.attributes,m.attributes,f))}return v.chop()},p.prototype.transformPosition=function(d,f){f=!!f;for(var u=l.iterator(this.ops),y=0;u.hasNext()&&y<=d;){var v=u.peekLength(),b=u.peekType();if(u.next(),b==="delete"){d-=Math.min(v,d-y);continue}else b==="insert"&&(y<d||!f)&&(d+=v);y+=v}return d},r.exports=p},function(r,n){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=function(u){return typeof Array.isArray=="function"?Array.isArray(u):a.call(u)==="[object Array]"},c=function(u){if(!u||a.call(u)!=="[object Object]")return!1;var y=i.call(u,"constructor"),v=u.constructor&&u.constructor.prototype&&i.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!y&&!v)return!1;var b;for(b in u);return typeof b>"u"||i.call(u,b)},p=function(u,y){o&&y.name==="__proto__"?o(u,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):u[y.name]=y.newValue},d=function(u,y){if(y==="__proto__")if(i.call(u,y)){if(s)return s(u,y).value}else return;return u[y]};r.exports=function f(){var u,y,v,b,g,m,_=arguments[0],x=1,A=arguments.length,D=!1;for(typeof _=="boolean"&&(D=_,_=arguments[1]||{},x=2),(_==null||typeof _!="object"&&typeof _!="function")&&(_={});x<A;++x)if(u=arguments[x],u!=null)for(y in u)v=d(_,y),b=d(u,y),_!==b&&(D&&b&&(c(b)||(g=l(b)))?(g?(g=!1,m=v&&l(v)?v:[]):m=v&&c(v)?v:{},p(_,{name:y,newValue:f(D,m,b)})):typeof b<"u"&&p(_,{name:y,newValue:b}));return _}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var a=function(){function k(E,C){for(var I=0;I<C.length;I++){var V=C[I];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(E,V.key,V)}}return function(E,C,I){return C&&k(E.prototype,C),I&&k(E,I),E}}(),o=function k(E,C,I){E===null&&(E=Function.prototype);var V=Object.getOwnPropertyDescriptor(E,C);if(V===void 0){var ee=Object.getPrototypeOf(E);return ee===null?void 0:k(ee,C,I)}else{if("value"in V)return V.value;var te=V.get;return te===void 0?void 0:te.call(I)}},s=i(3),l=_(s),c=i(2),p=_(c),d=i(0),f=_(d),u=i(16),y=_(u),v=i(6),b=_(v),g=i(7),m=_(g);function _(k){return k&&k.__esModule?k:{default:k}}function x(k,E){if(!(k instanceof E))throw new TypeError("Cannot call a class as a function")}function A(k,E){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:k}function D(k,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);k.prototype=Object.create(E&&E.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(k,E):k.__proto__=E)}var T=1,j=function(k){D(E,k);function E(){return x(this,E),A(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"attach",value:function(){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new p.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(I,V){var ee=f.default.query(I,f.default.Scope.BLOCK_ATTRIBUTE);ee!=null&&this.attributes.attribute(ee,V)}},{key:"formatAt",value:function(I,V,ee,te){this.format(ee,te)}},{key:"insertAt",value:function(I,V,ee){if(typeof V=="string"&&V.endsWith(`
`)){var te=f.default.create(B.blotName);this.parent.insertBefore(te,I===0?this:this.next),te.insertAt(0,V.slice(0,-1))}else o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,I,V,ee)}}]),E}(f.default.Embed);j.scope=f.default.Scope.BLOCK_BLOT;var B=function(k){D(E,k);function E(C){x(this,E);var I=A(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,C));return I.cache={},I}return a(E,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(I,V){return V.length()===0?I:I.insert(V.value(),P(V))},new p.default).insert(`
`,P(this))),this.cache.delta}},{key:"deleteAt",value:function(I,V){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,I,V),this.cache={}}},{key:"formatAt",value:function(I,V,ee,te){V<=0||(f.default.query(ee,f.default.Scope.BLOCK)?I+V===this.length()&&this.format(ee,te):o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,I,Math.min(V,this.length()-I-1),ee,te),this.cache={})}},{key:"insertAt",value:function(I,V,ee){if(ee!=null)return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,I,V,ee);if(V.length!==0){var te=V.split(`
`),Q=te.shift();Q.length>0&&(I<this.length()-1||this.children.tail==null?o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,Math.min(I,this.length()-1),Q):this.children.tail.insertAt(this.children.tail.length(),Q),this.cache={});var Y=this;te.reduce(function(W,q){return Y=Y.split(W,!0),Y.insertAt(0,q),q.length},I+Q.length)}}},{key:"insertBefore",value:function(I,V){var ee=this.children.head;o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,I,V),ee instanceof y.default&&ee.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"length",this).call(this)+T),this.cache.length}},{key:"moveChildren",value:function(I,V){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"moveChildren",this).call(this,I,V),this.cache={}}},{key:"optimize",value:function(I){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,I),this.cache={}}},{key:"path",value:function(I){return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,I,!0)}},{key:"removeChild",value:function(I){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"removeChild",this).call(this,I),this.cache={}}},{key:"split",value:function(I){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(V&&(I===0||I>=this.length()-T)){var ee=this.clone();return I===0?(this.parent.insertBefore(ee,this),this):(this.parent.insertBefore(ee,this.next),ee)}else{var te=o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"split",this).call(this,I,V);return this.cache={},te}}}]),E}(f.default.Block);B.blotName="block",B.tagName="P",B.defaultChild="break",B.allowedChildren=[b.default,f.default.Embed,m.default];function P(k){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k==null||(typeof k.formats=="function"&&(E=(0,l.default)(E,k.formats())),k.parent==null||k.parent.blotName=="scroll"||k.parent.statics.scope!==k.statics.scope)?E:P(k.parent,E)}n.bubbleFormats=P,n.BlockEmbed=j,n.default=B},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},o=function(){function Y(W,q){var L=[],M=!0,U=!1,H=void 0;try{for(var F=W[Symbol.iterator](),J;!(M=(J=F.next()).done)&&(L.push(J.value),!(q&&L.length===q));M=!0);}catch(re){U=!0,H=re}finally{try{!M&&F.return&&F.return()}finally{if(U)throw H}}return L}return function(W,q){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return Y(W,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function Y(W,q){for(var L=0;L<q.length;L++){var M=q[L];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(W,M.key,M)}}return function(W,q,L){return q&&Y(W.prototype,q),L&&Y(W,L),W}}();i(50);var l=i(2),c=P(l),p=i(14),d=P(p),f=i(8),u=P(f),y=i(9),v=P(y),b=i(0),g=P(b),m=i(15),_=P(m),x=i(3),A=P(x),D=i(10),T=P(D),j=i(34),B=P(j);function P(Y){return Y&&Y.__esModule?Y:{default:Y}}function k(Y,W,q){return W in Y?Object.defineProperty(Y,W,{value:q,enumerable:!0,configurable:!0,writable:!0}):Y[W]=q,Y}function E(Y,W){if(!(Y instanceof W))throw new TypeError("Cannot call a class as a function")}var C=(0,T.default)("quill"),I=function(){s(Y,null,[{key:"debug",value:function(q){q===!0&&(q="log"),T.default.level(q)}},{key:"find",value:function(q){return q.__quill||g.default.find(q)}},{key:"import",value:function(q){return this.imports[q]==null&&C.error("Cannot import "+q+". Are you sure it was registered?"),this.imports[q]}},{key:"register",value:function(q,L){var M=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof q!="string"){var H=q.attrName||q.blotName;typeof H=="string"?this.register("formats/"+H,q,L):Object.keys(q).forEach(function(F){M.register(F,q[F],L)})}else this.imports[q]!=null&&!U&&C.warn("Overwriting "+q+" with",L),this.imports[q]=L,(q.startsWith("blots/")||q.startsWith("formats/"))&&L.blotName!=="abstract"?g.default.register(L):q.startsWith("modules")&&typeof L.register=="function"&&L.register()}}]);function Y(W){var q=this,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(E(this,Y),this.options=V(W,L),this.container=this.options.container,this.container==null)return C.error("Invalid Quill container",W);this.options.debug&&Y.debug(this.options.debug);var M=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new u.default,this.scroll=g.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new _.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(u.default.events.EDITOR_CHANGE,function(H){H===u.default.events.TEXT_CHANGE&&q.root.classList.toggle("ql-blank",q.editor.isBlank())}),this.emitter.on(u.default.events.SCROLL_UPDATE,function(H,F){var J=q.selection.lastRange,re=J&&J.length===0?J.index:void 0;ee.call(q,function(){return q.editor.update(null,F,re)},H)});var U=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+M+"<p><br></p></div>");this.setContents(U),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return s(Y,[{key:"addContainer",value:function(q){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof q=="string"){var M=q;q=document.createElement("div"),q.classList.add(M)}return this.container.insertBefore(q,L),q}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(q,L,M){var U=this,H=te(q,L,M),F=o(H,4);return q=F[0],L=F[1],M=F[3],ee.call(this,function(){return U.editor.deleteText(q,L)},M,q,-1*L)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(q),this.container.classList.toggle("ql-disabled",!q)}},{key:"focus",value:function(){var q=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=q,this.scrollIntoView()}},{key:"format",value:function(q,L){var M=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u.default.sources.API;return ee.call(this,function(){var H=M.getSelection(!0),F=new c.default;if(H==null)return F;if(g.default.query(q,g.default.Scope.BLOCK))F=M.editor.formatLine(H.index,H.length,k({},q,L));else{if(H.length===0)return M.selection.format(q,L),F;F=M.editor.formatText(H.index,H.length,k({},q,L))}return M.setSelection(H,u.default.sources.SILENT),F},U)}},{key:"formatLine",value:function(q,L,M,U,H){var F=this,J=void 0,re=te(q,L,M,U,H),ne=o(re,4);return q=ne[0],L=ne[1],J=ne[2],H=ne[3],ee.call(this,function(){return F.editor.formatLine(q,L,J)},H,q,0)}},{key:"formatText",value:function(q,L,M,U,H){var F=this,J=void 0,re=te(q,L,M,U,H),ne=o(re,4);return q=ne[0],L=ne[1],J=ne[2],H=ne[3],ee.call(this,function(){return F.editor.formatText(q,L,J)},H,q,0)}},{key:"getBounds",value:function(q){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M=void 0;typeof q=="number"?M=this.selection.getBounds(q,L):M=this.selection.getBounds(q.index,q.length);var U=this.container.getBoundingClientRect();return{bottom:M.bottom-U.top,height:M.height,left:M.left-U.left,right:M.right-U.left,top:M.top-U.top,width:M.width}}},{key:"getContents",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-q,M=te(q,L),U=o(M,2);return q=U[0],L=U[1],this.editor.getContents(q,L)}},{key:"getFormat",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof q=="number"?this.editor.getFormat(q,L):this.editor.getFormat(q.index,q.length)}},{key:"getIndex",value:function(q){return q.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(q){return this.scroll.leaf(q)}},{key:"getLine",value:function(q){return this.scroll.line(q)}},{key:"getLines",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof q!="number"?this.scroll.lines(q.index,q.length):this.scroll.lines(q,L)}},{key:"getModule",value:function(q){return this.theme.modules[q]}},{key:"getSelection",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return q&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-q,M=te(q,L),U=o(M,2);return q=U[0],L=U[1],this.editor.getText(q,L)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(q,L,M){var U=this,H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Y.sources.API;return ee.call(this,function(){return U.editor.insertEmbed(q,L,M)},H,q)}},{key:"insertText",value:function(q,L,M,U,H){var F=this,J=void 0,re=te(q,0,M,U,H),ne=o(re,4);return q=ne[0],J=ne[2],H=ne[3],ee.call(this,function(){return F.editor.insertText(q,L,J)},H,q,L.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(q,L,M){this.clipboard.dangerouslyPasteHTML(q,L,M)}},{key:"removeFormat",value:function(q,L,M){var U=this,H=te(q,L,M),F=o(H,4);return q=F[0],L=F[1],M=F[3],ee.call(this,function(){return U.editor.removeFormat(q,L)},M,q)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(q){var L=this,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.default.sources.API;return ee.call(this,function(){q=new c.default(q);var U=L.getLength(),H=L.editor.deleteText(0,U),F=L.editor.applyDelta(q),J=F.ops[F.ops.length-1];J!=null&&typeof J.insert=="string"&&J.insert[J.insert.length-1]===`
`&&(L.editor.deleteText(L.getLength()-1,1),F.delete(1));var re=H.compose(F);return re},M)}},{key:"setSelection",value:function(q,L,M){if(q==null)this.selection.setRange(null,L||Y.sources.API);else{var U=te(q,L,M),H=o(U,4);q=H[0],L=H[1],M=H[3],this.selection.setRange(new m.Range(q,L),M),M!==u.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(q){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.default.sources.API,M=new c.default().insert(q);return this.setContents(M,L)}},{key:"update",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u.default.sources.USER,L=this.scroll.update(q);return this.selection.update(q),L}},{key:"updateContents",value:function(q){var L=this,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.default.sources.API;return ee.call(this,function(){return q=new c.default(q),L.editor.applyDelta(q,M)},M,!0)}}]),Y}();I.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},I.events=u.default.events,I.sources=u.default.sources,I.version="1.3.7",I.imports={delta:c.default,parchment:g.default,"core/module":v.default,"core/theme":B.default};function V(Y,W){if(W=(0,A.default)(!0,{container:Y,modules:{clipboard:!0,keyboard:!0,history:!0}},W),!W.theme||W.theme===I.DEFAULTS.theme)W.theme=B.default;else if(W.theme=I.import("themes/"+W.theme),W.theme==null)throw new Error("Invalid theme "+W.theme+". Did you register it?");var q=(0,A.default)(!0,{},W.theme.DEFAULTS);[q,W].forEach(function(U){U.modules=U.modules||{},Object.keys(U.modules).forEach(function(H){U.modules[H]===!0&&(U.modules[H]={})})});var L=Object.keys(q.modules).concat(Object.keys(W.modules)),M=L.reduce(function(U,H){var F=I.import("modules/"+H);return F==null?C.error("Cannot load "+H+" module. Are you sure you registered it?"):U[H]=F.DEFAULTS||{},U},{});return W.modules!=null&&W.modules.toolbar&&W.modules.toolbar.constructor!==Object&&(W.modules.toolbar={container:W.modules.toolbar}),W=(0,A.default)(!0,{},I.DEFAULTS,{modules:M},q,W),["bounds","container","scrollingContainer"].forEach(function(U){typeof W[U]=="string"&&(W[U]=document.querySelector(W[U]))}),W.modules=Object.keys(W.modules).reduce(function(U,H){return W.modules[H]&&(U[H]=W.modules[H]),U},{}),W}function ee(Y,W,q,L){if(this.options.strict&&!this.isEnabled()&&W===u.default.sources.USER)return new c.default;var M=q==null?null:this.getSelection(),U=this.editor.delta,H=Y();if(M!=null&&(q===!0&&(q=M.index),L==null?M=Q(M,H,W):L!==0&&(M=Q(M,q,L,W)),this.setSelection(M,u.default.sources.SILENT)),H.length()>0){var F,J=[u.default.events.TEXT_CHANGE,H,U,W];if((F=this.emitter).emit.apply(F,[u.default.events.EDITOR_CHANGE].concat(J)),W!==u.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,J)}}return H}function te(Y,W,q,L,M){var U={};return typeof Y.index=="number"&&typeof Y.length=="number"?typeof W!="number"?(M=L,L=q,q=W,W=Y.length,Y=Y.index):(W=Y.length,Y=Y.index):typeof W!="number"&&(M=L,L=q,q=W,W=0),(typeof q>"u"?"undefined":a(q))==="object"?(U=q,M=L):typeof q=="string"&&(L!=null?U[q]=L:M=q),M=M||u.default.sources.API,[Y,W,U,M]}function Q(Y,W,q,L){if(Y==null)return null;var M=void 0,U=void 0;if(W instanceof c.default){var H=[Y.index,Y.index+Y.length].map(function(ne){return W.transformPosition(ne,L!==u.default.sources.USER)}),F=o(H,2);M=F[0],U=F[1]}else{var J=[Y.index,Y.index+Y.length].map(function(ne){return ne<W||ne===W&&L===u.default.sources.USER?ne:q>=0?ne+q:Math.max(W,ne+q)}),re=o(J,2);M=re[0],U=re[1]}return new m.Range(M,U-M)}n.expandConfig=V,n.overload=te,n.default=I},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function b(g,m){for(var _=0;_<m.length;_++){var x=m[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,_){return m&&b(g.prototype,m),_&&b(g,_),g}}(),o=function b(g,m,_){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,m);if(x===void 0){var A=Object.getPrototypeOf(g);return A===null?void 0:b(A,m,_)}else{if("value"in x)return x.value;var D=x.get;return D===void 0?void 0:D.call(_)}},s=i(7),l=d(s),c=i(0),p=d(c);function d(b){return b&&b.__esModule?b:{default:b}}function f(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function u(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function y(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var v=function(b){y(g,b);function g(){return f(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,[{key:"formatAt",value:function(_,x,A,D){if(g.compare(this.statics.blotName,A)<0&&p.default.query(A,p.default.Scope.BLOT)){var T=this.isolate(_,x);D&&T.wrap(A,D)}else o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"formatAt",this).call(this,_,x,A,D)}},{key:"optimize",value:function(_){if(o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,_),this.parent instanceof g&&g.compare(this.statics.blotName,this.parent.statics.blotName)>0){var x=this.parent.isolate(this.offset(),this.length());this.moveChildren(x),x.wrap(this)}}}],[{key:"compare",value:function(_,x){var A=g.order.indexOf(_),D=g.order.indexOf(x);return A>=0||D>=0?A-D:_===x?0:_<x?-1:1}}]),g}(p.default.Inline);v.allowedChildren=[v,p.default.Embed,l.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function c(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:f}function p(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}var d=function(f){p(u,f);function u(){return l(this,u),c(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(o.default.Text);n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function m(_,x){for(var A=0;A<x.length;A++){var D=x[A];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(_,D.key,D)}}return function(_,x,A){return x&&m(_.prototype,x),A&&m(_,A),_}}(),o=function m(_,x,A){_===null&&(_=Function.prototype);var D=Object.getOwnPropertyDescriptor(_,x);if(D===void 0){var T=Object.getPrototypeOf(_);return T===null?void 0:m(T,x,A)}else{if("value"in D)return D.value;var j=D.get;return j===void 0?void 0:j.call(A)}},s=i(54),l=d(s),c=i(10),p=d(c);function d(m){return m&&m.__esModule?m:{default:m}}function f(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function u(m,_){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:m}function y(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);m.prototype=Object.create(_&&_.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(m,_):m.__proto__=_)}var v=(0,p.default)("quill:events"),b=["selectionchange","mousedown","mouseup","click"];b.forEach(function(m){document.addEventListener(m,function(){for(var _=arguments.length,x=Array(_),A=0;A<_;A++)x[A]=arguments[A];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(D){if(D.__quill&&D.__quill.emitter){var T;(T=D.__quill.emitter).handleDOM.apply(T,x)}})})});var g=function(m){y(_,m);function _(){f(this,_);var x=u(this,(_.__proto__||Object.getPrototypeOf(_)).call(this));return x.listeners={},x.on("error",v.error),x}return a(_,[{key:"emit",value:function(){v.log.apply(v,arguments),o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(A){for(var D=arguments.length,T=Array(D>1?D-1:0),j=1;j<D;j++)T[j-1]=arguments[j];(this.listeners[A.type]||[]).forEach(function(B){var P=B.node,k=B.handler;(A.target===P||P.contains(A.target))&&k.apply(void 0,[A].concat(T))})}},{key:"listenDOM",value:function(A,D,T){this.listeners[A]||(this.listeners[A]=[]),this.listeners[A].push({node:D,handler:T})}}]),_}(l.default);g.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},g.sources={API:"api",SILENT:"silent",USER:"user"},n.default=g},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});function a(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function s(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,s),this.quill=l,this.options=c};o.DEFAULTS={},n.default=o},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=["error","warn","log","info"],o="warn";function s(c){if(a.indexOf(c)<=a.indexOf(o)){for(var p,d=arguments.length,f=Array(d>1?d-1:0),u=1;u<d;u++)f[u-1]=arguments[u];(p=console)[c].apply(p,f)}}function l(c){return a.reduce(function(p,d){return p[d]=s.bind(console,d,c),p},{})}s.level=l.level=function(c){o=c},n.default=l},function(r,n,i){var a=Array.prototype.slice,o=i(52),s=i(53),l=r.exports=function(f,u,y){return y||(y={}),f===u?!0:f instanceof Date&&u instanceof Date?f.getTime()===u.getTime():!f||!u||typeof f!="object"&&typeof u!="object"?y.strict?f===u:f==u:d(f,u,y)};function c(f){return f==null}function p(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function d(f,u,y){var v,b;if(c(f)||c(u)||f.prototype!==u.prototype)return!1;if(s(f))return s(u)?(f=a.call(f),u=a.call(u),l(f,u,y)):!1;if(p(f)){if(!p(u)||f.length!==u.length)return!1;for(v=0;v<f.length;v++)if(f[v]!==u[v])return!1;return!0}try{var g=o(f),m=o(u)}catch{return!1}if(g.length!=m.length)return!1;for(g.sort(),m.sort(),v=g.length-1;v>=0;v--)if(g[v]!=m[v])return!1;for(v=g.length-1;v>=0;v--)if(b=g[v],!l(f[b],u[b],y))return!1;return typeof f==typeof u}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(1),o=function(){function s(l,c,p){p===void 0&&(p={}),this.attrName=l,this.keyName=c;var d=a.Scope.TYPE&a.Scope.ATTRIBUTE;p.scope!=null?this.scope=p.scope&a.Scope.LEVEL|d:this.scope=a.Scope.ATTRIBUTE,p.whitelist!=null&&(this.whitelist=p.whitelist)}return s.keys=function(l){return[].map.call(l.attributes,function(c){return c.name})},s.prototype.add=function(l,c){return this.canAdd(l,c)?(l.setAttribute(this.keyName,c),!0):!1},s.prototype.canAdd=function(l,c){var p=a.query(l,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return p==null?!1:this.whitelist==null?!0:typeof c=="string"?this.whitelist.indexOf(c.replace(/["']/g,""))>-1:this.whitelist.indexOf(c)>-1},s.prototype.remove=function(l){l.removeAttribute(this.keyName)},s.prototype.value=function(l){var c=l.getAttribute(this.keyName);return this.canAdd(l,c)&&c?c:""},s}();n.default=o},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var a=function(){function j(B,P){var k=[],E=!0,C=!1,I=void 0;try{for(var V=B[Symbol.iterator](),ee;!(E=(ee=V.next()).done)&&(k.push(ee.value),!(P&&k.length===P));E=!0);}catch(te){C=!0,I=te}finally{try{!E&&V.return&&V.return()}finally{if(C)throw I}}return k}return function(B,P){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return j(B,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function j(B,P){for(var k=0;k<P.length;k++){var E=P[k];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(B,E.key,E)}}return function(B,P,k){return P&&j(B.prototype,P),k&&j(B,k),B}}(),s=function j(B,P,k){B===null&&(B=Function.prototype);var E=Object.getOwnPropertyDescriptor(B,P);if(E===void 0){var C=Object.getPrototypeOf(B);return C===null?void 0:j(C,P,k)}else{if("value"in E)return E.value;var I=E.get;return I===void 0?void 0:I.call(k)}},l=i(2),c=m(l),p=i(0),d=m(p),f=i(4),u=m(f),y=i(6),v=m(y),b=i(7),g=m(b);function m(j){return j&&j.__esModule?j:{default:j}}function _(j,B){if(!(j instanceof B))throw new TypeError("Cannot call a class as a function")}function x(j,B){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:j}function A(j,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);j.prototype=Object.create(B&&B.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(j,B):j.__proto__=B)}var D=function(j){A(B,j);function B(){return _(this,B),x(this,(B.__proto__||Object.getPrototypeOf(B)).apply(this,arguments))}return B}(v.default);D.blotName="code",D.tagName="CODE";var T=function(j){A(B,j);function B(){return _(this,B),x(this,(B.__proto__||Object.getPrototypeOf(B)).apply(this,arguments))}return o(B,[{key:"delta",value:function(){var k=this,E=this.domNode.textContent;return E.endsWith(`
`)&&(E=E.slice(0,-1)),E.split(`
`).reduce(function(C,I){return C.insert(I).insert(`
`,k.formats())},new c.default)}},{key:"format",value:function(k,E){if(!(k===this.statics.blotName&&E)){var C=this.descendant(g.default,this.length()-1),I=a(C,1),V=I[0];V!=null&&V.deleteAt(V.length()-1,1),s(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"format",this).call(this,k,E)}}},{key:"formatAt",value:function(k,E,C,I){if(E!==0&&!(d.default.query(C,d.default.Scope.BLOCK)==null||C===this.statics.blotName&&I===this.statics.formats(this.domNode))){var V=this.newlineIndex(k);if(!(V<0||V>=k+E)){var ee=this.newlineIndex(k,!0)+1,te=V-ee+1,Q=this.isolate(ee,te),Y=Q.next;Q.format(C,I),Y instanceof B&&Y.formatAt(0,k-ee+E-te,C,I)}}}},{key:"insertAt",value:function(k,E,C){if(C==null){var I=this.descendant(g.default,k),V=a(I,2),ee=V[0],te=V[1];ee.insertAt(te,E)}}},{key:"length",value:function(){var k=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?k:k+1}},{key:"newlineIndex",value:function(k){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E)return this.domNode.textContent.slice(0,k).lastIndexOf(`
`);var C=this.domNode.textContent.slice(k).indexOf(`
`);return C>-1?k+C:-1}},{key:"optimize",value:function(k){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),s(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"optimize",this).call(this,k);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===E.statics.formats(E.domNode)&&(E.optimize(k),E.moveChildren(this),E.remove())}},{key:"replace",value:function(k){s(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"replace",this).call(this,k),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(E){var C=d.default.find(E);C==null?E.parentNode.removeChild(E):C instanceof d.default.Embed?C.remove():C.unwrap()})}}],[{key:"create",value:function(k){var E=s(B.__proto__||Object.getPrototypeOf(B),"create",this).call(this,k);return E.setAttribute("spellcheck",!1),E}},{key:"formats",value:function(){return!0}}]),B}(u.default);T.blotName="code-block",T.tagName="PRE",T.TAB="  ",n.Code=D,n.default=T},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},o=function(){function Y(W,q){var L=[],M=!0,U=!1,H=void 0;try{for(var F=W[Symbol.iterator](),J;!(M=(J=F.next()).done)&&(L.push(J.value),!(q&&L.length===q));M=!0);}catch(re){U=!0,H=re}finally{try{!M&&F.return&&F.return()}finally{if(U)throw H}}return L}return function(W,q){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return Y(W,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function Y(W,q){for(var L=0;L<q.length;L++){var M=q[L];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(W,M.key,M)}}return function(W,q,L){return q&&Y(W.prototype,q),L&&Y(W,L),W}}(),l=i(2),c=E(l),p=i(20),d=E(p),f=i(0),u=E(f),y=i(13),v=E(y),b=i(24),g=E(b),m=i(4),_=E(m),x=i(16),A=E(x),D=i(21),T=E(D),j=i(11),B=E(j),P=i(3),k=E(P);function E(Y){return Y&&Y.__esModule?Y:{default:Y}}function C(Y,W,q){return W in Y?Object.defineProperty(Y,W,{value:q,enumerable:!0,configurable:!0,writable:!0}):Y[W]=q,Y}function I(Y,W){if(!(Y instanceof W))throw new TypeError("Cannot call a class as a function")}var V=/^[ -~]*$/,ee=function(){function Y(W){I(this,Y),this.scroll=W,this.delta=this.getDelta()}return s(Y,[{key:"applyDelta",value:function(q){var L=this,M=!1;this.scroll.update();var U=this.scroll.length();return this.scroll.batchStart(),q=Q(q),q.reduce(function(H,F){var J=F.retain||F.delete||F.insert.length||1,re=F.attributes||{};if(F.insert!=null){if(typeof F.insert=="string"){var ne=F.insert;ne.endsWith(`
`)&&M&&(M=!1,ne=ne.slice(0,-1)),H>=U&&!ne.endsWith(`
`)&&(M=!0),L.scroll.insertAt(H,ne);var de=L.scroll.line(H),xe=o(de,2),je=xe[0],Ee=xe[1],Me=(0,k.default)({},(0,m.bubbleFormats)(je));if(je instanceof _.default){var Se=je.descendant(u.default.Leaf,Ee),ae=o(Se,1),Ve=ae[0];Me=(0,k.default)(Me,(0,m.bubbleFormats)(Ve))}re=d.default.attributes.diff(Me,re)||{}}else if(a(F.insert)==="object"){var pe=Object.keys(F.insert)[0];if(pe==null)return H;L.scroll.insertAt(H,pe,F.insert[pe])}U+=J}return Object.keys(re).forEach(function(se){L.scroll.formatAt(H,J,se,re[se])}),H+J},0),q.reduce(function(H,F){return typeof F.delete=="number"?(L.scroll.deleteAt(H,F.delete),H):H+(F.retain||F.insert.length||1)},0),this.scroll.batchEnd(),this.update(q)}},{key:"deleteText",value:function(q,L){return this.scroll.deleteAt(q,L),this.update(new c.default().retain(q).delete(L))}},{key:"formatLine",value:function(q,L){var M=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(U).forEach(function(H){if(!(M.scroll.whitelist!=null&&!M.scroll.whitelist[H])){var F=M.scroll.lines(q,Math.max(L,1)),J=L;F.forEach(function(re){var ne=re.length();if(!(re instanceof v.default))re.format(H,U[H]);else{var de=q-re.offset(M.scroll),xe=re.newlineIndex(de+J)-de+1;re.formatAt(de,xe,H,U[H])}J-=ne})}}),this.scroll.optimize(),this.update(new c.default().retain(q).retain(L,(0,T.default)(U)))}},{key:"formatText",value:function(q,L){var M=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(U).forEach(function(H){M.scroll.formatAt(q,L,H,U[H])}),this.update(new c.default().retain(q).retain(L,(0,T.default)(U)))}},{key:"getContents",value:function(q,L){return this.delta.slice(q,q+L)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(q,L){return q.concat(L.delta())},new c.default)}},{key:"getFormat",value:function(q){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M=[],U=[];L===0?this.scroll.path(q).forEach(function(F){var J=o(F,1),re=J[0];re instanceof _.default?M.push(re):re instanceof u.default.Leaf&&U.push(re)}):(M=this.scroll.lines(q,L),U=this.scroll.descendants(u.default.Leaf,q,L));var H=[M,U].map(function(F){if(F.length===0)return{};for(var J=(0,m.bubbleFormats)(F.shift());Object.keys(J).length>0;){var re=F.shift();if(re==null)return J;J=te((0,m.bubbleFormats)(re),J)}return J});return k.default.apply(k.default,H)}},{key:"getText",value:function(q,L){return this.getContents(q,L).filter(function(M){return typeof M.insert=="string"}).map(function(M){return M.insert}).join("")}},{key:"insertEmbed",value:function(q,L,M){return this.scroll.insertAt(q,L,M),this.update(new c.default().retain(q).insert(C({},L,M)))}},{key:"insertText",value:function(q,L){var M=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return L=L.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(q,L),Object.keys(U).forEach(function(H){M.scroll.formatAt(q,L.length,H,U[H])}),this.update(new c.default().retain(q).insert(L,(0,T.default)(U)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var q=this.scroll.children.head;return q.statics.blotName!==_.default.blotName||q.children.length>1?!1:q.children.head instanceof A.default}},{key:"removeFormat",value:function(q,L){var M=this.getText(q,L),U=this.scroll.line(q+L),H=o(U,2),F=H[0],J=H[1],re=0,ne=new c.default;F!=null&&(F instanceof v.default?re=F.newlineIndex(J)-J+1:re=F.length()-J,ne=F.delta().slice(J,J+re-1).insert(`
`));var de=this.getContents(q,L+re),xe=de.diff(new c.default().insert(M).concat(ne)),je=new c.default().retain(q).concat(xe);return this.applyDelta(je)}},{key:"update",value:function(q){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,U=this.delta;if(L.length===1&&L[0].type==="characterData"&&L[0].target.data.match(V)&&u.default.find(L[0].target)){var H=u.default.find(L[0].target),F=(0,m.bubbleFormats)(H),J=H.offset(this.scroll),re=L[0].oldValue.replace(g.default.CONTENTS,""),ne=new c.default().insert(re),de=new c.default().insert(H.value()),xe=new c.default().retain(J).concat(ne.diff(de,M));q=xe.reduce(function(je,Ee){return Ee.insert?je.insert(Ee.insert,F):je.push(Ee)},new c.default),this.delta=U.compose(q)}else this.delta=this.getDelta(),(!q||!(0,B.default)(U.compose(q),this.delta))&&(q=U.diff(this.delta,M));return q}}]),Y}();function te(Y,W){return Object.keys(W).reduce(function(q,L){return Y[L]==null||(W[L]===Y[L]?q[L]=W[L]:Array.isArray(W[L])?W[L].indexOf(Y[L])<0&&(q[L]=W[L].concat([Y[L]])):q[L]=[W[L],Y[L]]),q},{})}function Q(Y){return Y.reduce(function(W,q){if(q.insert===1){var L=(0,T.default)(q.attributes);return delete L.image,W.insert({image:q.attributes.image},L)}if(q.attributes!=null&&(q.attributes.list===!0||q.attributes.bullet===!0)&&(q=(0,T.default)(q),q.attributes.list?q.attributes.list="ordered":(q.attributes.list="bullet",delete q.attributes.bullet)),typeof q.insert=="string"){var M=q.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return W.insert(M,q.attributes)}return W.push(q)},new c.default)}n.default=ee},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var a=function(){function j(B,P){var k=[],E=!0,C=!1,I=void 0;try{for(var V=B[Symbol.iterator](),ee;!(E=(ee=V.next()).done)&&(k.push(ee.value),!(P&&k.length===P));E=!0);}catch(te){C=!0,I=te}finally{try{!E&&V.return&&V.return()}finally{if(C)throw I}}return k}return function(B,P){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return j(B,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function j(B,P){for(var k=0;k<P.length;k++){var E=P[k];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(B,E.key,E)}}return function(B,P,k){return P&&j(B.prototype,P),k&&j(B,k),B}}(),s=i(0),l=g(s),c=i(21),p=g(c),d=i(11),f=g(d),u=i(8),y=g(u),v=i(10),b=g(v);function g(j){return j&&j.__esModule?j:{default:j}}function m(j){if(Array.isArray(j)){for(var B=0,P=Array(j.length);B<j.length;B++)P[B]=j[B];return P}else return Array.from(j)}function _(j,B){if(!(j instanceof B))throw new TypeError("Cannot call a class as a function")}var x=(0,b.default)("quill:selection"),A=function j(B){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;_(this,j),this.index=B,this.length=P},D=function(){function j(B,P){var k=this;_(this,j),this.emitter=P,this.scroll=B,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new A(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){k.mouseDown||setTimeout(k.update.bind(k,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(E,C){E===y.default.events.TEXT_CHANGE&&C.length()>0&&k.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(k.hasFocus()){var E=k.getNativeRange();E!=null&&E.start.node!==k.cursor.textNode&&k.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{k.setNativeRange(E.start.node,E.start.offset,E.end.node,E.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(E,C){if(C.range){var I=C.range,V=I.startNode,ee=I.startOffset,te=I.endNode,Q=I.endOffset;k.setNativeRange(V,ee,te,Q)}}),this.update(y.default.sources.SILENT)}return o(j,[{key:"handleComposition",value:function(){var P=this;this.root.addEventListener("compositionstart",function(){P.composing=!0}),this.root.addEventListener("compositionend",function(){if(P.composing=!1,P.cursor.parent){var k=P.cursor.restore();if(!k)return;setTimeout(function(){P.setNativeRange(k.startNode,k.startOffset,k.endNode,k.endOffset)},1)}})}},{key:"handleDragging",value:function(){var P=this;this.emitter.listenDOM("mousedown",document.body,function(){P.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){P.mouseDown=!1,P.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(P,k){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[P])){this.scroll.update();var E=this.getNativeRange();if(!(E==null||!E.native.collapsed||l.default.query(P,l.default.Scope.BLOCK))){if(E.start.node!==this.cursor.textNode){var C=l.default.find(E.start.node,!1);if(C==null)return;if(C instanceof l.default.Leaf){var I=C.split(E.start.offset);C.parent.insertBefore(this.cursor,I)}else C.insertBefore(this.cursor,E.start.node);this.cursor.attach()}this.cursor.format(P,k),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(P){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,E=this.scroll.length();P=Math.min(P,E-1),k=Math.min(P+k,E-1)-P;var C=void 0,I=this.scroll.leaf(P),V=a(I,2),ee=V[0],te=V[1];if(ee==null)return null;var Q=ee.position(te,!0),Y=a(Q,2);C=Y[0],te=Y[1];var W=document.createRange();if(k>0){W.setStart(C,te);var q=this.scroll.leaf(P+k),L=a(q,2);if(ee=L[0],te=L[1],ee==null)return null;var M=ee.position(te,!0),U=a(M,2);return C=U[0],te=U[1],W.setEnd(C,te),W.getBoundingClientRect()}else{var H="left",F=void 0;return C instanceof Text?(te<C.data.length?(W.setStart(C,te),W.setEnd(C,te+1)):(W.setStart(C,te-1),W.setEnd(C,te),H="right"),F=W.getBoundingClientRect()):(F=ee.domNode.getBoundingClientRect(),te>0&&(H="right")),{bottom:F.top+F.height,height:F.height,left:F[H],right:F[H],top:F.top,width:0}}}},{key:"getNativeRange",value:function(){var P=document.getSelection();if(P==null||P.rangeCount<=0)return null;var k=P.getRangeAt(0);if(k==null)return null;var E=this.normalizeNative(k);return x.info("getNativeRange",E),E}},{key:"getRange",value:function(){var P=this.getNativeRange();if(P==null)return[null,null];var k=this.normalizedToRange(P);return[k,P]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(P){var k=this,E=[[P.start.node,P.start.offset]];P.native.collapsed||E.push([P.end.node,P.end.offset]);var C=E.map(function(ee){var te=a(ee,2),Q=te[0],Y=te[1],W=l.default.find(Q,!0),q=W.offset(k.scroll);return Y===0?q:W instanceof l.default.Container?q+W.length():q+W.index(Q,Y)}),I=Math.min(Math.max.apply(Math,m(C)),this.scroll.length()-1),V=Math.min.apply(Math,[I].concat(m(C)));return new A(V,I-V)}},{key:"normalizeNative",value:function(P){if(!T(this.root,P.startContainer)||!P.collapsed&&!T(this.root,P.endContainer))return null;var k={start:{node:P.startContainer,offset:P.startOffset},end:{node:P.endContainer,offset:P.endOffset},native:P};return[k.start,k.end].forEach(function(E){for(var C=E.node,I=E.offset;!(C instanceof Text)&&C.childNodes.length>0;)if(C.childNodes.length>I)C=C.childNodes[I],I=0;else if(C.childNodes.length===I)C=C.lastChild,I=C instanceof Text?C.data.length:C.childNodes.length+1;else break;E.node=C,E.offset=I}),k}},{key:"rangeToNative",value:function(P){var k=this,E=P.collapsed?[P.index]:[P.index,P.index+P.length],C=[],I=this.scroll.length();return E.forEach(function(V,ee){V=Math.min(I-1,V);var te=void 0,Q=k.scroll.leaf(V),Y=a(Q,2),W=Y[0],q=Y[1],L=W.position(q,ee!==0),M=a(L,2);te=M[0],q=M[1],C.push(te,q)}),C.length<2&&(C=C.concat(C)),C}},{key:"scrollIntoView",value:function(P){var k=this.lastRange;if(k!=null){var E=this.getBounds(k.index,k.length);if(E!=null){var C=this.scroll.length()-1,I=this.scroll.line(Math.min(k.index,C)),V=a(I,1),ee=V[0],te=ee;if(k.length>0){var Q=this.scroll.line(Math.min(k.index+k.length,C)),Y=a(Q,1);te=Y[0]}if(!(ee==null||te==null)){var W=P.getBoundingClientRect();E.top<W.top?P.scrollTop-=W.top-E.top:E.bottom>W.bottom&&(P.scrollTop+=E.bottom-W.bottom)}}}}},{key:"setNativeRange",value:function(P,k){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P,C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k,I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(x.info("setNativeRange",P,k,E,C),!(P!=null&&(this.root.parentNode==null||P.parentNode==null||E.parentNode==null))){var V=document.getSelection();if(V!=null)if(P!=null){this.hasFocus()||this.root.focus();var ee=(this.getNativeRange()||{}).native;if(ee==null||I||P!==ee.startContainer||k!==ee.startOffset||E!==ee.endContainer||C!==ee.endOffset){P.tagName=="BR"&&(k=[].indexOf.call(P.parentNode.childNodes,P),P=P.parentNode),E.tagName=="BR"&&(C=[].indexOf.call(E.parentNode.childNodes,E),E=E.parentNode);var te=document.createRange();te.setStart(P,k),te.setEnd(E,C),V.removeAllRanges(),V.addRange(te)}}else V.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(P){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof k=="string"&&(E=k,k=!1),x.info("setRange",P),P!=null){var C=this.rangeToNative(P);this.setNativeRange.apply(this,m(C).concat([k]))}else this.setNativeRange(null);this.update(E)}},{key:"update",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,k=this.lastRange,E=this.getRange(),C=a(E,2),I=C[0],V=C[1];if(this.lastRange=I,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(k,this.lastRange)){var ee;!this.composing&&V!=null&&V.native.collapsed&&V.start.node!==this.cursor.textNode&&this.cursor.restore();var te=[y.default.events.SELECTION_CHANGE,(0,p.default)(this.lastRange),(0,p.default)(k),P];if((ee=this.emitter).emit.apply(ee,[y.default.events.EDITOR_CHANGE].concat(te)),P!==y.default.sources.SILENT){var Q;(Q=this.emitter).emit.apply(Q,te)}}}}]),j}();function T(j,B){try{B.parentNode}catch{return!1}return B instanceof Text&&(B=B.parentNode),j.contains(B)}n.Range=A,n.default=D},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,b){for(var g=0;g<b.length;g++){var m=b[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,b,g){return b&&y(v.prototype,b),g&&y(v,g),v}}(),o=function y(v,b,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,b);if(m===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,b,g)}else{if("value"in m)return m.value;var x=m.get;return x===void 0?void 0:x.call(g)}},s=i(0),l=c(s);function c(y){return y&&y.__esModule?y:{default:y}}function p(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var u=function(y){f(v,y);function v(){return p(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"insertInto",value:function(g,m){g.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,g,m):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(l.default.Embed);u.blotName="break",u.tagName="BR",n.default=u},function(r,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var y in u)u.hasOwnProperty(y)&&(f[y]=u[y])};return function(f,u){d(f,u);function y(){this.constructor=f}f.prototype=u===null?Object.create(u):(y.prototype=u.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(44),s=i(30),l=i(1),c=function(d){a(f,d);function f(u){var y=d.call(this,u)||this;return y.build(),y}return f.prototype.appendChild=function(u){this.insertBefore(u)},f.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(u){u.attach()})},f.prototype.build=function(){var u=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var v=p(y);u.insertBefore(v,u.children.head||void 0)}catch(b){if(b instanceof l.ParchmentError)return;throw b}})},f.prototype.deleteAt=function(u,y){if(u===0&&y===this.length())return this.remove();this.children.forEachAt(u,y,function(v,b,g){v.deleteAt(b,g)})},f.prototype.descendant=function(u,y){var v=this.children.find(y),b=v[0],g=v[1];return u.blotName==null&&u(b)||u.blotName!=null&&b instanceof u?[b,g]:b instanceof f?b.descendant(u,g):[null,-1]},f.prototype.descendants=function(u,y,v){y===void 0&&(y=0),v===void 0&&(v=Number.MAX_VALUE);var b=[],g=v;return this.children.forEachAt(y,v,function(m,_,x){(u.blotName==null&&u(m)||u.blotName!=null&&m instanceof u)&&b.push(m),m instanceof f&&(b=b.concat(m.descendants(u,_,g))),g-=x}),b},f.prototype.detach=function(){this.children.forEach(function(u){u.detach()}),d.prototype.detach.call(this)},f.prototype.formatAt=function(u,y,v,b){this.children.forEachAt(u,y,function(g,m,_){g.formatAt(m,_,v,b)})},f.prototype.insertAt=function(u,y,v){var b=this.children.find(u),g=b[0],m=b[1];if(g)g.insertAt(m,y,v);else{var _=v==null?l.create("text",y):l.create(y,v);this.appendChild(_)}},f.prototype.insertBefore=function(u,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return u instanceof v}))throw new l.ParchmentError("Cannot insert "+u.statics.blotName+" into "+this.statics.blotName);u.insertInto(this,y)},f.prototype.length=function(){return this.children.reduce(function(u,y){return u+y.length()},0)},f.prototype.moveChildren=function(u,y){this.children.forEach(function(v){u.insertBefore(v,y)})},f.prototype.optimize=function(u){if(d.prototype.optimize.call(this,u),this.children.length===0)if(this.statics.defaultChild!=null){var y=l.create(this.statics.defaultChild);this.appendChild(y),y.optimize(u)}else this.remove()},f.prototype.path=function(u,y){y===void 0&&(y=!1);var v=this.children.find(u,y),b=v[0],g=v[1],m=[[this,u]];return b instanceof f?m.concat(b.path(g,y)):(b!=null&&m.push([b,g]),m)},f.prototype.removeChild=function(u){this.children.remove(u)},f.prototype.replace=function(u){u instanceof f&&u.moveChildren(this),d.prototype.replace.call(this,u)},f.prototype.split=function(u,y){if(y===void 0&&(y=!1),!y){if(u===0)return this;if(u===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(u,this.length(),function(b,g,m){b=b.split(g,y),v.appendChild(b)}),v},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(u,y){var v=this,b=[],g=[];u.forEach(function(m){m.target===v.domNode&&m.type==="childList"&&(b.push.apply(b,m.addedNodes),g.push.apply(g,m.removedNodes))}),g.forEach(function(m){if(!(m.parentNode!=null&&m.tagName!=="IFRAME"&&document.body.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var _=l.find(m);_!=null&&(_.domNode.parentNode==null||_.domNode.parentNode===v.domNode)&&_.detach()}}),b.filter(function(m){return m.parentNode==v.domNode}).sort(function(m,_){return m===_?0:m.compareDocumentPosition(_)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(m){var _=null;m.nextSibling!=null&&(_=l.find(m.nextSibling));var x=p(m);(x.next!=_||x.next==null)&&(x.parent!=null&&x.parent.removeChild(v),v.insertBefore(x,_||void 0))})},f}(s.default);function p(d){var f=l.find(d);if(f==null)try{f=l.create(d)}catch{f=l.create(l.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(y){f.domNode.appendChild(y)}),d.parentNode&&d.parentNode.replaceChild(f.domNode,d),f.attach()}return f}n.default=c},function(r,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var y in u)u.hasOwnProperty(y)&&(f[y]=u[y])};return function(f,u){d(f,u);function y(){this.constructor=f}f.prototype=u===null?Object.create(u):(y.prototype=u.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12),s=i(31),l=i(17),c=i(1),p=function(d){a(f,d);function f(u){var y=d.call(this,u)||this;return y.attributes=new s.default(y.domNode),y}return f.formats=function(u){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return u.tagName.toLowerCase()},f.prototype.format=function(u,y){var v=c.query(u);v instanceof o.default?this.attributes.attribute(v,y):y&&v!=null&&(u!==this.statics.blotName||this.formats()[u]!==y)&&this.replaceWith(u,y)},f.prototype.formats=function(){var u=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(u[this.statics.blotName]=y),u},f.prototype.replaceWith=function(u,y){var v=d.prototype.replaceWith.call(this,u,y);return this.attributes.copy(v),v},f.prototype.update=function(u,y){var v=this;d.prototype.update.call(this,u,y),u.some(function(b){return b.target===v.domNode&&b.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(u,y){var v=d.prototype.wrap.call(this,u,y);return v instanceof f&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},f}(l.default);n.default=p},function(r,n,i){var a=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var f in d)d.hasOwnProperty(f)&&(p[f]=d[f])};return function(p,d){c(p,d);function f(){this.constructor=p}p.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(30),s=i(1),l=function(c){a(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return p.value=function(d){return!0},p.prototype.index=function(d,f){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},p.prototype.position=function(d,f){var u=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(u+=1),[this.parent.domNode,u]},p.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},p.scope=s.Scope.INLINE_BLOT,p}(o.default);n.default=l},function(r,n,i){var a=i(11),o=i(3),s={attributes:{compose:function(c,p,d){typeof c!="object"&&(c={}),typeof p!="object"&&(p={});var f=o(!0,{},p);d||(f=Object.keys(f).reduce(function(y,v){return f[v]!=null&&(y[v]=f[v]),y},{}));for(var u in c)c[u]!==void 0&&p[u]===void 0&&(f[u]=c[u]);return Object.keys(f).length>0?f:void 0},diff:function(c,p){typeof c!="object"&&(c={}),typeof p!="object"&&(p={});var d=Object.keys(c).concat(Object.keys(p)).reduce(function(f,u){return a(c[u],p[u])||(f[u]=p[u]===void 0?null:p[u]),f},{});return Object.keys(d).length>0?d:void 0},transform:function(c,p,d){if(typeof c!="object")return p;if(typeof p=="object"){if(!d)return p;var f=Object.keys(p).reduce(function(u,y){return c[y]===void 0&&(u[y]=p[y]),u},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(c){return new l(c)},length:function(c){return typeof c.delete=="number"?c.delete:typeof c.retain=="number"?c.retain:typeof c.insert=="string"?c.insert.length:1}};function l(c){this.ops=c,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(c){c||(c=1/0);var p=this.ops[this.index];if(p){var d=this.offset,f=s.length(p);if(c>=f-d?(c=f-d,this.index+=1,this.offset=0):this.offset+=c,typeof p.delete=="number")return{delete:c};var u={};return p.attributes&&(u.attributes=p.attributes),typeof p.retain=="number"?u.retain=c:typeof p.insert=="string"?u.insert=p.insert.substr(d,c):u.insert=p.insert,u}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var c=this.offset,p=this.index,d=this.next(),f=this.ops.slice(this.index);return this.offset=c,this.index=p,[d].concat(f)}else return[]},r.exports=s},function(r,n){var i=function(){function a(v,b){return b!=null&&v instanceof b}var o;try{o=Map}catch{o=function(){}}var s;try{s=Set}catch{s=function(){}}var l;try{l=Promise}catch{l=function(){}}function c(v,b,g,m,_){typeof b=="object"&&(g=b.depth,m=b.prototype,_=b.includeNonEnumerable,b=b.circular);var x=[],A=[],D=typeof Buffer<"u";typeof b>"u"&&(b=!0),typeof g>"u"&&(g=1/0);function T(j,B){if(j===null)return null;if(B===0)return j;var P,k;if(typeof j!="object")return j;if(a(j,o))P=new o;else if(a(j,s))P=new s;else if(a(j,l))P=new l(function(W,q){j.then(function(L){W(T(L,B-1))},function(L){q(T(L,B-1))})});else if(c.__isArray(j))P=[];else if(c.__isRegExp(j))P=new RegExp(j.source,y(j)),j.lastIndex&&(P.lastIndex=j.lastIndex);else if(c.__isDate(j))P=new Date(j.getTime());else{if(D&&Buffer.isBuffer(j))return Buffer.allocUnsafe?P=Buffer.allocUnsafe(j.length):P=new Buffer(j.length),j.copy(P),P;a(j,Error)?P=Object.create(j):typeof m>"u"?(k=Object.getPrototypeOf(j),P=Object.create(k)):(P=Object.create(m),k=m)}if(b){var E=x.indexOf(j);if(E!=-1)return A[E];x.push(j),A.push(P)}a(j,o)&&j.forEach(function(W,q){var L=T(q,B-1),M=T(W,B-1);P.set(L,M)}),a(j,s)&&j.forEach(function(W){var q=T(W,B-1);P.add(q)});for(var C in j){var I;k&&(I=Object.getOwnPropertyDescriptor(k,C)),!(I&&I.set==null)&&(P[C]=T(j[C],B-1))}if(Object.getOwnPropertySymbols)for(var V=Object.getOwnPropertySymbols(j),C=0;C<V.length;C++){var ee=V[C],te=Object.getOwnPropertyDescriptor(j,ee);te&&!te.enumerable&&!_||(P[ee]=T(j[ee],B-1),te.enumerable||Object.defineProperty(P,ee,{enumerable:!1}))}if(_)for(var Q=Object.getOwnPropertyNames(j),C=0;C<Q.length;C++){var Y=Q[C],te=Object.getOwnPropertyDescriptor(j,Y);te&&te.enumerable||(P[Y]=T(j[Y],B-1),Object.defineProperty(P,Y,{enumerable:!1}))}return P}return T(v,g)}c.clonePrototype=function(b){if(b===null)return null;var g=function(){};return g.prototype=b,new g};function p(v){return Object.prototype.toString.call(v)}c.__objToStr=p;function d(v){return typeof v=="object"&&p(v)==="[object Date]"}c.__isDate=d;function f(v){return typeof v=="object"&&p(v)==="[object Array]"}c.__isArray=f;function u(v){return typeof v=="object"&&p(v)==="[object RegExp]"}c.__isRegExp=u;function y(v){var b="";return v.global&&(b+="g"),v.ignoreCase&&(b+="i"),v.multiline&&(b+="m"),b}return c.__getRegExpFlags=y,c}();typeof r=="object"&&r.exports&&(r.exports=i)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function P(k,E){var C=[],I=!0,V=!1,ee=void 0;try{for(var te=k[Symbol.iterator](),Q;!(I=(Q=te.next()).done)&&(C.push(Q.value),!(E&&C.length===E));I=!0);}catch(Y){V=!0,ee=Y}finally{try{!I&&te.return&&te.return()}finally{if(V)throw ee}}return C}return function(k,E){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return P(k,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function P(k,E){for(var C=0;C<E.length;C++){var I=E[C];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(k,I.key,I)}}return function(k,E,C){return E&&P(k.prototype,E),C&&P(k,C),k}}(),s=function P(k,E,C){k===null&&(k=Function.prototype);var I=Object.getOwnPropertyDescriptor(k,E);if(I===void 0){var V=Object.getPrototypeOf(k);return V===null?void 0:P(V,E,C)}else{if("value"in I)return I.value;var ee=I.get;return ee===void 0?void 0:ee.call(C)}},l=i(0),c=x(l),p=i(8),d=x(p),f=i(4),u=x(f),y=i(16),v=x(y),b=i(13),g=x(b),m=i(25),_=x(m);function x(P){return P&&P.__esModule?P:{default:P}}function A(P,k){if(!(P instanceof k))throw new TypeError("Cannot call a class as a function")}function D(P,k){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:P}function T(P,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);P.prototype=Object.create(k&&k.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(P,k):P.__proto__=k)}function j(P){return P instanceof u.default||P instanceof f.BlockEmbed}var B=function(P){T(k,P);function k(E,C){A(this,k);var I=D(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,E));return I.emitter=C.emitter,Array.isArray(C.whitelist)&&(I.whitelist=C.whitelist.reduce(function(V,ee){return V[ee]=!0,V},{})),I.domNode.addEventListener("DOMNodeInserted",function(){}),I.optimize(),I.enable(),I}return o(k,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(C,I){var V=this.line(C),ee=a(V,2),te=ee[0],Q=ee[1],Y=this.line(C+I),W=a(Y,1),q=W[0];if(s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"deleteAt",this).call(this,C,I),q!=null&&te!==q&&Q>0){if(te instanceof f.BlockEmbed||q instanceof f.BlockEmbed){this.optimize();return}if(te instanceof g.default){var L=te.newlineIndex(te.length(),!0);if(L>-1&&(te=te.split(L+1),te===q)){this.optimize();return}}else if(q instanceof g.default){var M=q.newlineIndex(0);M>-1&&q.split(M+1)}var U=q.children.head instanceof v.default?null:q.children.head;te.moveChildren(q,U),te.remove()}this.optimize()}},{key:"enable",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",C)}},{key:"formatAt",value:function(C,I,V,ee){this.whitelist!=null&&!this.whitelist[V]||(s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,C,I,V,ee),this.optimize())}},{key:"insertAt",value:function(C,I,V){if(!(V!=null&&this.whitelist!=null&&!this.whitelist[I])){if(C>=this.length())if(V==null||c.default.query(I,c.default.Scope.BLOCK)==null){var ee=c.default.create(this.statics.defaultChild);this.appendChild(ee),V==null&&I.endsWith(`
`)&&(I=I.slice(0,-1)),ee.insertAt(0,I,V)}else{var te=c.default.create(I,V);this.appendChild(te)}else s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,C,I,V);this.optimize()}}},{key:"insertBefore",value:function(C,I){if(C.statics.scope===c.default.Scope.INLINE_BLOT){var V=c.default.create(this.statics.defaultChild);V.appendChild(C),C=V}s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,C,I)}},{key:"leaf",value:function(C){return this.path(C).pop()||[null,-1]}},{key:"line",value:function(C){return C===this.length()?this.line(C-1):this.descendant(j,C)}},{key:"lines",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,V=function ee(te,Q,Y){var W=[],q=Y;return te.children.forEachAt(Q,Y,function(L,M,U){j(L)?W.push(L):L instanceof c.default.Container&&(W=W.concat(ee(L,M,q))),q-=U}),W};return V(this,C,I)}},{key:"optimize",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,C,I),C.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,C,I))}},{key:"path",value:function(C){return s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"path",this).call(this,C).slice(1)}},{key:"update",value:function(C){if(this.batch!==!0){var I=d.default.sources.USER;typeof C=="string"&&(I=C),Array.isArray(C)||(C=this.observer.takeRecords()),C.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,I,C),s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"update",this).call(this,C.concat([])),C.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,I,C)}}}]),k}(c.default.Scroll);B.blotName="scroll",B.className="ql-editor",B.tagName="DIV",B.defaultChild="block",B.allowedChildren=[u.default,f.BlockEmbed,_.default],n.default=B},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},o=function(){function F(J,re){var ne=[],de=!0,xe=!1,je=void 0;try{for(var Ee=J[Symbol.iterator](),Me;!(de=(Me=Ee.next()).done)&&(ne.push(Me.value),!(re&&ne.length===re));de=!0);}catch(Se){xe=!0,je=Se}finally{try{!de&&Ee.return&&Ee.return()}finally{if(xe)throw je}}return ne}return function(J,re){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return F(J,re);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function F(J,re){for(var ne=0;ne<re.length;ne++){var de=re[ne];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(J,de.key,de)}}return function(J,re,ne){return re&&F(J.prototype,re),ne&&F(J,ne),J}}(),l=i(21),c=P(l),p=i(11),d=P(p),f=i(3),u=P(f),y=i(2),v=P(y),b=i(20),g=P(b),m=i(0),_=P(m),x=i(5),A=P(x),D=i(10),T=P(D),j=i(9),B=P(j);function P(F){return F&&F.__esModule?F:{default:F}}function k(F,J,re){return J in F?Object.defineProperty(F,J,{value:re,enumerable:!0,configurable:!0,writable:!0}):F[J]=re,F}function E(F,J){if(!(F instanceof J))throw new TypeError("Cannot call a class as a function")}function C(F,J){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J&&(typeof J=="object"||typeof J=="function")?J:F}function I(F,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof J);F.prototype=Object.create(J&&J.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(F,J):F.__proto__=J)}var V=(0,T.default)("quill:keyboard"),ee=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",te=function(F){I(J,F),s(J,null,[{key:"match",value:function(ne,de){return de=H(de),["altKey","ctrlKey","metaKey","shiftKey"].some(function(xe){return!!de[xe]!==ne[xe]&&de[xe]!==null})?!1:de.key===(ne.which||ne.keyCode)}}]);function J(re,ne){E(this,J);var de=C(this,(J.__proto__||Object.getPrototypeOf(J)).call(this,re,ne));return de.bindings={},Object.keys(de.options.bindings).forEach(function(xe){xe==="list autofill"&&re.scroll.whitelist!=null&&!re.scroll.whitelist.list||de.options.bindings[xe]&&de.addBinding(de.options.bindings[xe])}),de.addBinding({key:J.keys.ENTER,shiftKey:null},L),de.addBinding({key:J.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(de.addBinding({key:J.keys.BACKSPACE},{collapsed:!0},Y),de.addBinding({key:J.keys.DELETE},{collapsed:!0},W)):(de.addBinding({key:J.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Y),de.addBinding({key:J.keys.DELETE},{collapsed:!0,suffix:/^.?$/},W)),de.addBinding({key:J.keys.BACKSPACE},{collapsed:!1},q),de.addBinding({key:J.keys.DELETE},{collapsed:!1},q),de.addBinding({key:J.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Y),de.listen(),de}return s(J,[{key:"addBinding",value:function(ne){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},je=H(ne);if(je==null||je.key==null)return V.warn("Attempted to add invalid keyboard binding",je);typeof de=="function"&&(de={handler:de}),typeof xe=="function"&&(xe={handler:xe}),je=(0,u.default)(je,de,xe),this.bindings[je.key]=this.bindings[je.key]||[],this.bindings[je.key].push(je)}},{key:"listen",value:function(){var ne=this;this.quill.root.addEventListener("keydown",function(de){if(!de.defaultPrevented){var xe=de.which||de.keyCode,je=(ne.bindings[xe]||[]).filter(function(tt){return J.match(de,tt)});if(je.length!==0){var Ee=ne.quill.getSelection();if(!(Ee==null||!ne.quill.hasFocus())){var Me=ne.quill.getLine(Ee.index),Se=o(Me,2),ae=Se[0],Ve=Se[1],pe=ne.quill.getLeaf(Ee.index),se=o(pe,2),he=se[0],ye=se[1],ge=Ee.length===0?[he,ye]:ne.quill.getLeaf(Ee.index+Ee.length),Ie=o(ge,2),qe=Ie[0],Ue=Ie[1],rt=he instanceof _.default.Text?he.value().slice(0,ye):"",lt=qe instanceof _.default.Text?qe.value().slice(Ue):"",at={collapsed:Ee.length===0,empty:Ee.length===0&&ae.length()<=1,format:ne.quill.getFormat(Ee),offset:Ve,prefix:rt,suffix:lt},ot=je.some(function(tt){if(tt.collapsed!=null&&tt.collapsed!==at.collapsed||tt.empty!=null&&tt.empty!==at.empty||tt.offset!=null&&tt.offset!==at.offset)return!1;if(Array.isArray(tt.format)){if(tt.format.every(function(ze){return at.format[ze]==null}))return!1}else if(a(tt.format)==="object"&&!Object.keys(tt.format).every(function(ze){return tt.format[ze]===!0?at.format[ze]!=null:tt.format[ze]===!1?at.format[ze]==null:(0,d.default)(tt.format[ze],at.format[ze])}))return!1;return tt.prefix!=null&&!tt.prefix.test(at.prefix)||tt.suffix!=null&&!tt.suffix.test(at.suffix)?!1:tt.handler.call(ne,Ee,at)!==!0});ot&&de.preventDefault()}}}})}}]),J}(B.default);te.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},te.DEFAULTS={bindings:{bold:U("bold"),italic:U("italic"),underline:U("underline"),indent:{key:te.keys.TAB,format:["blockquote","indent","list"],handler:function(J,re){if(re.collapsed&&re.offset!==0)return!0;this.quill.format("indent","+1",A.default.sources.USER)}},outdent:{key:te.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(J,re){if(re.collapsed&&re.offset!==0)return!0;this.quill.format("indent","-1",A.default.sources.USER)}},"outdent backspace":{key:te.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(J,re){re.format.indent!=null?this.quill.format("indent","-1",A.default.sources.USER):re.format.list!=null&&this.quill.format("list",!1,A.default.sources.USER)}},"indent code-block":M(!0),"outdent code-block":M(!1),"remove tab":{key:te.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(J){this.quill.deleteText(J.index-1,1,A.default.sources.USER)}},tab:{key:te.keys.TAB,handler:function(J){this.quill.history.cutoff();var re=new v.default().retain(J.index).delete(J.length).insert("	");this.quill.updateContents(re,A.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(J.index+1,A.default.sources.SILENT)}},"list empty enter":{key:te.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(J,re){this.quill.format("list",!1,A.default.sources.USER),re.format.indent&&this.quill.format("indent",!1,A.default.sources.USER)}},"checklist enter":{key:te.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(J){var re=this.quill.getLine(J.index),ne=o(re,2),de=ne[0],xe=ne[1],je=(0,u.default)({},de.formats(),{list:"checked"}),Ee=new v.default().retain(J.index).insert(`
`,je).retain(de.length()-xe-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ee,A.default.sources.USER),this.quill.setSelection(J.index+1,A.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:te.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(J,re){var ne=this.quill.getLine(J.index),de=o(ne,2),xe=de[0],je=de[1],Ee=new v.default().retain(J.index).insert(`
`,re.format).retain(xe.length()-je-1).retain(1,{header:null});this.quill.updateContents(Ee,A.default.sources.USER),this.quill.setSelection(J.index+1,A.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(J,re){var ne=re.prefix.length,de=this.quill.getLine(J.index),xe=o(de,2),je=xe[0],Ee=xe[1];if(Ee>ne)return!0;var Me=void 0;switch(re.prefix.trim()){case"[]":case"[ ]":Me="unchecked";break;case"[x]":Me="checked";break;case"-":case"*":Me="bullet";break;default:Me="ordered"}this.quill.insertText(J.index," ",A.default.sources.USER),this.quill.history.cutoff();var Se=new v.default().retain(J.index-Ee).delete(ne+1).retain(je.length()-2-Ee).retain(1,{list:Me});this.quill.updateContents(Se,A.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(J.index-ne,A.default.sources.SILENT)}},"code exit":{key:te.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(J){var re=this.quill.getLine(J.index),ne=o(re,2),de=ne[0],xe=ne[1],je=new v.default().retain(J.index+de.length()-xe-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(je,A.default.sources.USER)}},"embed left":Q(te.keys.LEFT,!1),"embed left shift":Q(te.keys.LEFT,!0),"embed right":Q(te.keys.RIGHT,!1),"embed right shift":Q(te.keys.RIGHT,!0)}};function Q(F,J){var re,ne=F===te.keys.LEFT?"prefix":"suffix";return re={key:F,shiftKey:J,altKey:null},k(re,ne,/^$/),k(re,"handler",function(xe){var je=xe.index;F===te.keys.RIGHT&&(je+=xe.length+1);var Ee=this.quill.getLeaf(je),Me=o(Ee,1),Se=Me[0];return Se instanceof _.default.Embed?(F===te.keys.LEFT?J?this.quill.setSelection(xe.index-1,xe.length+1,A.default.sources.USER):this.quill.setSelection(xe.index-1,A.default.sources.USER):J?this.quill.setSelection(xe.index,xe.length+1,A.default.sources.USER):this.quill.setSelection(xe.index+xe.length+1,A.default.sources.USER),!1):!0}),re}function Y(F,J){if(!(F.index===0||this.quill.getLength()<=1)){var re=this.quill.getLine(F.index),ne=o(re,1),de=ne[0],xe={};if(J.offset===0){var je=this.quill.getLine(F.index-1),Ee=o(je,1),Me=Ee[0];if(Me!=null&&Me.length()>1){var Se=de.formats(),ae=this.quill.getFormat(F.index-1,1);xe=g.default.attributes.diff(Se,ae)||{}}}var Ve=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(J.prefix)?2:1;this.quill.deleteText(F.index-Ve,Ve,A.default.sources.USER),Object.keys(xe).length>0&&this.quill.formatLine(F.index-Ve,Ve,xe,A.default.sources.USER),this.quill.focus()}}function W(F,J){var re=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(J.suffix)?2:1;if(!(F.index>=this.quill.getLength()-re)){var ne={},de=0,xe=this.quill.getLine(F.index),je=o(xe,1),Ee=je[0];if(J.offset>=Ee.length()-1){var Me=this.quill.getLine(F.index+1),Se=o(Me,1),ae=Se[0];if(ae){var Ve=Ee.formats(),pe=this.quill.getFormat(F.index,1);ne=g.default.attributes.diff(Ve,pe)||{},de=ae.length()}}this.quill.deleteText(F.index,re,A.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(F.index+de-1,re,ne,A.default.sources.USER)}}function q(F){var J=this.quill.getLines(F),re={};if(J.length>1){var ne=J[0].formats(),de=J[J.length-1].formats();re=g.default.attributes.diff(de,ne)||{}}this.quill.deleteText(F,A.default.sources.USER),Object.keys(re).length>0&&this.quill.formatLine(F.index,1,re,A.default.sources.USER),this.quill.setSelection(F.index,A.default.sources.SILENT),this.quill.focus()}function L(F,J){var re=this;F.length>0&&this.quill.scroll.deleteAt(F.index,F.length);var ne=Object.keys(J.format).reduce(function(de,xe){return _.default.query(xe,_.default.Scope.BLOCK)&&!Array.isArray(J.format[xe])&&(de[xe]=J.format[xe]),de},{});this.quill.insertText(F.index,`
`,ne,A.default.sources.USER),this.quill.setSelection(F.index+1,A.default.sources.SILENT),this.quill.focus(),Object.keys(J.format).forEach(function(de){ne[de]==null&&(Array.isArray(J.format[de])||de!=="link"&&re.quill.format(de,J.format[de],A.default.sources.USER))})}function M(F){return{key:te.keys.TAB,shiftKey:!F,format:{"code-block":!0},handler:function(re){var ne=_.default.query("code-block"),de=re.index,xe=re.length,je=this.quill.scroll.descendant(ne,de),Ee=o(je,2),Me=Ee[0],Se=Ee[1];if(Me!=null){var ae=this.quill.getIndex(Me),Ve=Me.newlineIndex(Se,!0)+1,pe=Me.newlineIndex(ae+Se+xe),se=Me.domNode.textContent.slice(Ve,pe).split(`
`);Se=0,se.forEach(function(he,ye){F?(Me.insertAt(Ve+Se,ne.TAB),Se+=ne.TAB.length,ye===0?de+=ne.TAB.length:xe+=ne.TAB.length):he.startsWith(ne.TAB)&&(Me.deleteAt(Ve+Se,ne.TAB.length),Se-=ne.TAB.length,ye===0?de-=ne.TAB.length:xe-=ne.TAB.length),Se+=he.length+1}),this.quill.update(A.default.sources.USER),this.quill.setSelection(de,xe,A.default.sources.SILENT)}}}}function U(F){return{key:F[0].toUpperCase(),shortKey:!0,handler:function(re,ne){this.quill.format(F,!ne.format[F],A.default.sources.USER)}}}function H(F){if(typeof F=="string"||typeof F=="number")return H({key:F});if((typeof F>"u"?"undefined":a(F))==="object"&&(F=(0,c.default)(F,!1)),typeof F.key=="string")if(te.keys[F.key.toUpperCase()]!=null)F.key=te.keys[F.key.toUpperCase()];else if(F.key.length===1)F.key=F.key.toUpperCase().charCodeAt(0);else return null;return F.shortKey&&(F[ee]=F.shortKey,delete F.shortKey),F}n.default=te,n.SHORTKEY=ee},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function g(m,_){var x=[],A=!0,D=!1,T=void 0;try{for(var j=m[Symbol.iterator](),B;!(A=(B=j.next()).done)&&(x.push(B.value),!(_&&x.length===_));A=!0);}catch(P){D=!0,T=P}finally{try{!A&&j.return&&j.return()}finally{if(D)throw T}}return x}return function(m,_){if(Array.isArray(m))return m;if(Symbol.iterator in Object(m))return g(m,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function g(m,_,x){m===null&&(m=Function.prototype);var A=Object.getOwnPropertyDescriptor(m,_);if(A===void 0){var D=Object.getPrototypeOf(m);return D===null?void 0:g(D,_,x)}else{if("value"in A)return A.value;var T=A.get;return T===void 0?void 0:T.call(x)}},s=function(){function g(m,_){for(var x=0;x<_.length;x++){var A=_[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,_,x){return _&&g(m.prototype,_),x&&g(m,x),m}}(),l=i(0),c=f(l),p=i(7),d=f(p);function f(g){return g&&g.__esModule?g:{default:g}}function u(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function y(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function v(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var b=function(g){v(m,g),s(m,null,[{key:"value",value:function(){}}]);function m(_,x){u(this,m);var A=y(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,_));return A.selection=x,A.textNode=document.createTextNode(m.CONTENTS),A.domNode.appendChild(A.textNode),A._length=0,A}return s(m,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(x,A){if(this._length!==0)return o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,x,A);for(var D=this,T=0;D!=null&&D.statics.scope!==c.default.Scope.BLOCK_BLOT;)T+=D.offset(D.parent),D=D.parent;D!=null&&(this._length=m.CONTENTS.length,D.optimize(),D.formatAt(T,m.CONTENTS.length,x,A),this._length=0)}},{key:"index",value:function(x,A){return x===this.textNode?0:o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"index",this).call(this,x,A)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var x=this.textNode,A=this.selection.getNativeRange(),D=void 0,T=void 0,j=void 0;if(A!=null&&A.start.node===x&&A.end.node===x){var B=[x,A.start.offset,A.end.offset];D=B[0],T=B[1],j=B[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==m.CONTENTS){var P=this.textNode.data.split(m.CONTENTS).join("");this.next instanceof d.default?(D=this.next.domNode,this.next.insertAt(0,P),this.textNode.data=m.CONTENTS):(this.textNode.data=P,this.parent.insertBefore(c.default.create(this.textNode),this),this.textNode=document.createTextNode(m.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),T!=null){var k=[T,j].map(function(C){return Math.max(0,Math.min(D.data.length,C-1))}),E=a(k,2);return T=E[0],j=E[1],{startNode:D,startOffset:T,endNode:D,endOffset:j}}}}},{key:"update",value:function(x,A){var D=this;if(x.some(function(j){return j.type==="characterData"&&j.target===D.textNode})){var T=this.restore();T&&(A.range=T)}}},{key:"value",value:function(){return""}}]),m}(c.default.Embed);b.blotName="cursor",b.className="ql-cursor",b.tagName="span",b.CONTENTS="\uFEFF",n.default=b},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),o=c(a),s=i(4),l=c(s);function c(y){return y&&y.__esModule?y:{default:y}}function p(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var u=function(y){f(v,y);function v(){return p(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(o.default.Container);u.allowedChildren=[l.default,s.BlockEmbed,u],n.default=u},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var a=function(){function b(g,m){for(var _=0;_<m.length;_++){var x=m[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,_){return m&&b(g.prototype,m),_&&b(g,_),g}}(),o=function b(g,m,_){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,m);if(x===void 0){var A=Object.getPrototypeOf(g);return A===null?void 0:b(A,m,_)}else{if("value"in x)return x.value;var D=x.get;return D===void 0?void 0:D.call(_)}},s=i(0),l=c(s);function c(b){return b&&b.__esModule?b:{default:b}}function p(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function d(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function f(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var u=function(b){f(g,b);function g(){return p(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,[{key:"value",value:function(_){var x=o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,_);return x.startsWith("rgb(")?(x=x.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+x.split(",").map(function(A){return("00"+parseInt(A).toString(16)).slice(-2)}).join("")):x}}]),g}(l.default.Attributor.Style),y=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),v=new u("color","color",{scope:l.default.Scope.INLINE});n.ColorAttributor=u,n.ColorClass=y,n.ColorStyle=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var a=function(){function v(b,g){for(var m=0;m<g.length;m++){var _=g[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,g,m){return g&&v(b.prototype,g),m&&v(b,m),b}}(),o=function v(b,g,m){b===null&&(b=Function.prototype);var _=Object.getOwnPropertyDescriptor(b,g);if(_===void 0){var x=Object.getPrototypeOf(b);return x===null?void 0:v(x,g,m)}else{if("value"in _)return _.value;var A=_.get;return A===void 0?void 0:A.call(m)}},s=i(6),l=c(s);function c(v){return v&&v.__esModule?v:{default:v}}function p(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function d(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function f(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var u=function(v){f(b,v);function b(){return p(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,[{key:"format",value:function(m,_){if(m!==this.statics.blotName||!_)return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,m,_);_=this.constructor.sanitize(_),this.domNode.setAttribute("href",_)}}],[{key:"create",value:function(m){var _=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,m);return m=this.sanitize(m),_.setAttribute("href",m),_.setAttribute("rel","noopener noreferrer"),_.setAttribute("target","_blank"),_}},{key:"formats",value:function(m){return m.getAttribute("href")}},{key:"sanitize",value:function(m){return y(m,this.PROTOCOL_WHITELIST)?m:this.SANITIZED_URL}}]),b}(l.default);u.blotName="link",u.tagName="A",u.SANITIZED_URL="about:blank",u.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(v,b){var g=document.createElement("a");g.href=v;var m=g.href.slice(0,g.href.indexOf(":"));return b.indexOf(m)>-1}n.default=u,n.sanitize=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},o=function(){function b(g,m){for(var _=0;_<m.length;_++){var x=m[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,_){return m&&b(g.prototype,m),_&&b(g,_),g}}(),s=i(23),l=d(s),c=i(107),p=d(c);function d(b){return b&&b.__esModule?b:{default:b}}function f(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}var u=0;function y(b,g){b.setAttribute(g,b.getAttribute(g)!=="true")}var v=function(){function b(g){var m=this;f(this,b),this.select=g,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){m.togglePicker()}),this.label.addEventListener("keydown",function(_){switch(_.keyCode){case l.default.keys.ENTER:m.togglePicker();break;case l.default.keys.ESCAPE:m.escape(),_.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(b,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(m){var _=this,x=document.createElement("span");return x.tabIndex="0",x.setAttribute("role","button"),x.classList.add("ql-picker-item"),m.hasAttribute("value")&&x.setAttribute("data-value",m.getAttribute("value")),m.textContent&&x.setAttribute("data-label",m.textContent),x.addEventListener("click",function(){_.selectItem(x,!0)}),x.addEventListener("keydown",function(A){switch(A.keyCode){case l.default.keys.ENTER:_.selectItem(x,!0),A.preventDefault();break;case l.default.keys.ESCAPE:_.escape(),A.preventDefault();break}}),x}},{key:"buildLabel",value:function(){var m=document.createElement("span");return m.classList.add("ql-picker-label"),m.innerHTML=p.default,m.tabIndex="0",m.setAttribute("role","button"),m.setAttribute("aria-expanded","false"),this.container.appendChild(m),m}},{key:"buildOptions",value:function(){var m=this,_=document.createElement("span");_.classList.add("ql-picker-options"),_.setAttribute("aria-hidden","true"),_.tabIndex="-1",_.id="ql-picker-options-"+u,u+=1,this.label.setAttribute("aria-controls",_.id),this.options=_,[].slice.call(this.select.options).forEach(function(x){var A=m.buildItem(x);_.appendChild(A),x.selected===!0&&m.selectItem(A)}),this.container.appendChild(_)}},{key:"buildPicker",value:function(){var m=this;[].slice.call(this.select.attributes).forEach(function(_){m.container.setAttribute(_.name,_.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var m=this;this.close(),setTimeout(function(){return m.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(m){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=this.container.querySelector(".ql-selected");if(m!==x&&(x!=null&&x.classList.remove("ql-selected"),m!=null&&(m.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(m.parentNode.children,m),m.hasAttribute("data-value")?this.label.setAttribute("data-value",m.getAttribute("data-value")):this.label.removeAttribute("data-value"),m.hasAttribute("data-label")?this.label.setAttribute("data-label",m.getAttribute("data-label")):this.label.removeAttribute("data-label"),_))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var A=document.createEvent("Event");A.initEvent("change",!0,!0),this.select.dispatchEvent(A)}this.close()}}},{key:"update",value:function(){var m=void 0;if(this.select.selectedIndex>-1){var _=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];m=this.select.options[this.select.selectedIndex],this.selectItem(_)}else this.selectItem(null);var x=m!=null&&m!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",x)}}]),b}();n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),o=V(a),s=i(5),l=V(s),c=i(4),p=V(c),d=i(16),f=V(d),u=i(25),y=V(u),v=i(24),b=V(v),g=i(35),m=V(g),_=i(6),x=V(_),A=i(22),D=V(A),T=i(7),j=V(T),B=i(55),P=V(B),k=i(42),E=V(k),C=i(23),I=V(C);function V(ee){return ee&&ee.__esModule?ee:{default:ee}}l.default.register({"blots/block":p.default,"blots/block/embed":c.BlockEmbed,"blots/break":f.default,"blots/container":y.default,"blots/cursor":b.default,"blots/embed":m.default,"blots/inline":x.default,"blots/scroll":D.default,"blots/text":j.default,"modules/clipboard":P.default,"modules/history":E.default,"modules/keyboard":I.default}),o.default.register(p.default,f.default,b.default,x.default,D.default,j.default),n.default=l.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(1),o=function(){function s(l){this.domNode=l,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(s.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),s.create=function(l){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var c;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?c=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?c=document.createElement(l):c=document.createElement(this.tagName[0])):c=document.createElement(this.tagName),this.className&&c.classList.add(this.className),c},s.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},s.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return a.create(l)},s.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},s.prototype.deleteAt=function(l,c){var p=this.isolate(l,c);p.remove()},s.prototype.formatAt=function(l,c,p,d){var f=this.isolate(l,c);if(a.query(p,a.Scope.BLOT)!=null&&d)f.wrap(p,d);else if(a.query(p,a.Scope.ATTRIBUTE)!=null){var u=a.create(this.statics.scope);f.wrap(u),u.format(p,d)}},s.prototype.insertAt=function(l,c,p){var d=p==null?a.create("text",c):a.create(c,p),f=this.split(l);this.parent.insertBefore(d,f)},s.prototype.insertInto=function(l,c){c===void 0&&(c=null),this.parent!=null&&this.parent.children.remove(this);var p=null;l.children.insertBefore(this,c),c!=null&&(p=c.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=p)&&l.domNode.insertBefore(this.domNode,p),this.parent=l,this.attach()},s.prototype.isolate=function(l,c){var p=this.split(l);return p.split(c),p},s.prototype.length=function(){return 1},s.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},s.prototype.optimize=function(l){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},s.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},s.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},s.prototype.replaceWith=function(l,c){var p=typeof l=="string"?a.create(l,c):l;return p.replace(this),p},s.prototype.split=function(l,c){return l===0?this:this.next},s.prototype.update=function(l,c){},s.prototype.wrap=function(l,c){var p=typeof l=="string"?a.create(l,c):l;return this.parent!=null&&this.parent.insertBefore(p,this.next),p.appendChild(this),p},s.blotName="abstract",s}();n.default=o},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(12),o=i(32),s=i(33),l=i(1),c=function(){function p(d){this.attributes={},this.domNode=d,this.build()}return p.prototype.attribute=function(d,f){f?d.add(this.domNode,f)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},p.prototype.build=function(){var d=this;this.attributes={};var f=a.default.keys(this.domNode),u=o.default.keys(this.domNode),y=s.default.keys(this.domNode);f.concat(u).concat(y).forEach(function(v){var b=l.query(v,l.Scope.ATTRIBUTE);b instanceof a.default&&(d.attributes[b.attrName]=b)})},p.prototype.copy=function(d){var f=this;Object.keys(this.attributes).forEach(function(u){var y=f.attributes[u].value(f.domNode);d.format(u,y)})},p.prototype.move=function(d){var f=this;this.copy(d),Object.keys(this.attributes).forEach(function(u){f.attributes[u].remove(f.domNode)}),this.attributes={}},p.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(f,u){return f[u]=d.attributes[u].value(d.domNode),f},{})},p}();n.default=c},function(r,n,i){var a=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var f in d)d.hasOwnProperty(f)&&(p[f]=d[f])};return function(p,d){c(p,d);function f(){this.constructor=p}p.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12);function s(c,p){var d=c.getAttribute("class")||"";return d.split(/\s+/).filter(function(f){return f.indexOf(p+"-")===0})}var l=function(c){a(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return p.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},p.prototype.add=function(d,f){return this.canAdd(d,f)?(this.remove(d),d.classList.add(this.keyName+"-"+f),!0):!1},p.prototype.remove=function(d){var f=s(d,this.keyName);f.forEach(function(u){d.classList.remove(u)}),d.classList.length===0&&d.removeAttribute("class")},p.prototype.value=function(d){var f=s(d,this.keyName)[0]||"",u=f.slice(this.keyName.length+1);return this.canAdd(d,u)?u:""},p}(o.default);n.default=l},function(r,n,i){var a=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var f in d)d.hasOwnProperty(f)&&(p[f]=d[f])};return function(p,d){c(p,d);function f(){this.constructor=p}p.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12);function s(c){var p=c.split("-"),d=p.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return p[0]+d}var l=function(c){a(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return p.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(f){var u=f.split(":");return u[0].trim()})},p.prototype.add=function(d,f){return this.canAdd(d,f)?(d.style[s(this.keyName)]=f,!0):!1},p.prototype.remove=function(d){d.style[s(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},p.prototype.value=function(d){var f=d.style[s(this.keyName)];return this.canAdd(d,f)?f:""},p}(o.default);n.default=l},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function l(c,p){for(var d=0;d<p.length;d++){var f=p[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,p,d){return p&&l(c.prototype,p),d&&l(c,d),c}}();function o(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var s=function(){function l(c,p){o(this,l),this.quill=c,this.options=p,this.modules={}}return a(l,[{key:"init",value:function(){var p=this;Object.keys(this.options.modules).forEach(function(d){p.modules[d]==null&&p.addModule(d)})}},{key:"addModule",value:function(p){var d=this.quill.constructor.import("modules/"+p);return this.modules[p]=new d(this.quill,this.options.modules[p]||{}),this.modules[p]}}]),l}();s.DEFAULTS={modules:{}},s.themes={default:s},n.default=s},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function g(m,_){for(var x=0;x<_.length;x++){var A=_[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,_,x){return _&&g(m.prototype,_),x&&g(m,x),m}}(),o=function g(m,_,x){m===null&&(m=Function.prototype);var A=Object.getOwnPropertyDescriptor(m,_);if(A===void 0){var D=Object.getPrototypeOf(m);return D===null?void 0:g(D,_,x)}else{if("value"in A)return A.value;var T=A.get;return T===void 0?void 0:T.call(x)}},s=i(0),l=d(s),c=i(7),p=d(c);function d(g){return g&&g.__esModule?g:{default:g}}function f(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function u(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function y(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var v="\uFEFF",b=function(g){y(m,g);function m(_){f(this,m);var x=u(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,_));return x.contentNode=document.createElement("span"),x.contentNode.setAttribute("contenteditable",!1),[].slice.call(x.domNode.childNodes).forEach(function(A){x.contentNode.appendChild(A)}),x.leftGuard=document.createTextNode(v),x.rightGuard=document.createTextNode(v),x.domNode.appendChild(x.leftGuard),x.domNode.appendChild(x.contentNode),x.domNode.appendChild(x.rightGuard),x}return a(m,[{key:"index",value:function(x,A){return x===this.leftGuard?0:x===this.rightGuard?1:o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"index",this).call(this,x,A)}},{key:"restore",value:function(x){var A=void 0,D=void 0,T=x.data.split(v).join("");if(x===this.leftGuard)if(this.prev instanceof p.default){var j=this.prev.length();this.prev.insertAt(j,T),A={startNode:this.prev.domNode,startOffset:j+T.length}}else D=document.createTextNode(T),this.parent.insertBefore(l.default.create(D),this),A={startNode:D,startOffset:T.length};else x===this.rightGuard&&(this.next instanceof p.default?(this.next.insertAt(0,T),A={startNode:this.next.domNode,startOffset:T.length}):(D=document.createTextNode(T),this.parent.insertBefore(l.default.create(D),this.next),A={startNode:D,startOffset:T.length}));return x.data=v,A}},{key:"update",value:function(x,A){var D=this;x.forEach(function(T){if(T.type==="characterData"&&(T.target===D.leftGuard||T.target===D.rightGuard)){var j=D.restore(T.target);j&&(A.range=j)}})}}]),m}(l.default.Embed);n.default=b},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var a=i(0),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}var l={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},c=new o.default.Attributor.Attribute("align","align",l),p=new o.default.Attributor.Class("align","ql-align",l),d=new o.default.Attributor.Style("align","text-align",l);n.AlignAttribute=c,n.AlignClass=p,n.AlignStyle=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var a=i(0),o=l(a),s=i(26);function l(d){return d&&d.__esModule?d:{default:d}}var c=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),p=new s.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});n.BackgroundClass=c,n.BackgroundStyle=p},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var a=i(0),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}var l={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},c=new o.default.Attributor.Attribute("direction","dir",l),p=new o.default.Attributor.Class("direction","ql-direction",l),d=new o.default.Attributor.Style("direction","direction",l);n.DirectionAttribute=c,n.DirectionClass=p,n.DirectionStyle=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var a=function(){function g(m,_){for(var x=0;x<_.length;x++){var A=_[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,_,x){return _&&g(m.prototype,_),x&&g(m,x),m}}(),o=function g(m,_,x){m===null&&(m=Function.prototype);var A=Object.getOwnPropertyDescriptor(m,_);if(A===void 0){var D=Object.getPrototypeOf(m);return D===null?void 0:g(D,_,x)}else{if("value"in A)return A.value;var T=A.get;return T===void 0?void 0:T.call(x)}},s=i(0),l=c(s);function c(g){return g&&g.__esModule?g:{default:g}}function p(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function d(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function f(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var u={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new l.default.Attributor.Class("font","ql-font",u),v=function(g){f(m,g);function m(){return p(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return a(m,[{key:"value",value:function(x){return o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,x).replace(/["']/g,"")}}]),m}(l.default.Attributor.Style),b=new v("font","font-family",u);n.FontStyle=b,n.FontClass=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var a=i(0),o=s(a);function s(p){return p&&p.__esModule?p:{default:p}}var l=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),c=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=l,n.SizeStyle=c},function(r,n,i){r.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var a=function(){function _(x,A){for(var D=0;D<A.length;D++){var T=A[D];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(x,T.key,T)}}return function(x,A,D){return A&&_(x.prototype,A),D&&_(x,D),x}}(),o=i(0),s=f(o),l=i(5),c=f(l),p=i(9),d=f(p);function f(_){return _&&_.__esModule?_:{default:_}}function u(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}function y(_,x){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:_}function v(_,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);_.prototype=Object.create(x&&x.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(_,x):_.__proto__=x)}var b=function(_){v(x,_);function x(A,D){u(this,x);var T=y(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,A,D));return T.lastRecorded=0,T.ignoreChange=!1,T.clear(),T.quill.on(c.default.events.EDITOR_CHANGE,function(j,B,P,k){j!==c.default.events.TEXT_CHANGE||T.ignoreChange||(!T.options.userOnly||k===c.default.sources.USER?T.record(B,P):T.transform(B))}),T.quill.keyboard.addBinding({key:"Z",shortKey:!0},T.undo.bind(T)),T.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},T.redo.bind(T)),/Win/i.test(navigator.platform)&&T.quill.keyboard.addBinding({key:"Y",shortKey:!0},T.redo.bind(T)),T}return a(x,[{key:"change",value:function(D,T){if(this.stack[D].length!==0){var j=this.stack[D].pop();this.stack[T].push(j),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(j[D],c.default.sources.USER),this.ignoreChange=!1;var B=m(j[D]);this.quill.setSelection(B)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(D,T){if(D.ops.length!==0){this.stack.redo=[];var j=this.quill.getContents().diff(T),B=Date.now();if(this.lastRecorded+this.options.delay>B&&this.stack.undo.length>0){var P=this.stack.undo.pop();j=j.compose(P.undo),D=P.redo.compose(D)}else this.lastRecorded=B;this.stack.undo.push({redo:D,undo:j}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(D){this.stack.undo.forEach(function(T){T.undo=D.transform(T.undo,!0),T.redo=D.transform(T.redo,!0)}),this.stack.redo.forEach(function(T){T.undo=D.transform(T.undo,!0),T.redo=D.transform(T.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),x}(d.default);b.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function g(_){var x=_.ops[_.ops.length-1];return x==null?!1:x.insert!=null?typeof x.insert=="string"&&x.insert.endsWith(`
`):x.attributes!=null?Object.keys(x.attributes).some(function(A){return s.default.query(A,s.default.Scope.BLOCK)!=null}):!1}function m(_){var x=_.reduce(function(D,T){return D+=T.delete||0,D},0),A=_.length()-x;return g(_)&&(A-=1),A}n.default=b,n.getLastChangeIndex=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var a=function(){function L(M,U){for(var H=0;H<U.length;H++){var F=U[H];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(M,F.key,F)}}return function(M,U,H){return U&&L(M.prototype,U),H&&L(M,H),M}}(),o=function L(M,U,H){M===null&&(M=Function.prototype);var F=Object.getOwnPropertyDescriptor(M,U);if(F===void 0){var J=Object.getPrototypeOf(M);return J===null?void 0:L(J,U,H)}else{if("value"in F)return F.value;var re=F.get;return re===void 0?void 0:re.call(H)}},s=i(3),l=B(s),c=i(2),p=B(c),d=i(8),f=B(d),u=i(23),y=B(u),v=i(34),b=B(v),g=i(59),m=B(g),_=i(60),x=B(_),A=i(28),D=B(A),T=i(61),j=B(T);function B(L){return L&&L.__esModule?L:{default:L}}function P(L,M){if(!(L instanceof M))throw new TypeError("Cannot call a class as a function")}function k(L,M){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:L}function E(L,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);L.prototype=Object.create(M&&M.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(L,M):L.__proto__=M)}var C=[!1,"center","right","justify"],I=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],V=[!1,"serif","monospace"],ee=["1","2","3",!1],te=["small",!1,"large","huge"],Q=function(L){E(M,L);function M(U,H){P(this,M);var F=k(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,U,H)),J=function re(ne){if(!document.body.contains(U.root))return document.body.removeEventListener("click",re);F.tooltip!=null&&!F.tooltip.root.contains(ne.target)&&document.activeElement!==F.tooltip.textbox&&!F.quill.hasFocus()&&F.tooltip.hide(),F.pickers!=null&&F.pickers.forEach(function(de){de.container.contains(ne.target)||de.close()})};return U.emitter.listenDOM("click",document.body,J),F}return a(M,[{key:"addModule",value:function(H){var F=o(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"addModule",this).call(this,H);return H==="toolbar"&&this.extendToolbar(F),F}},{key:"buildButtons",value:function(H,F){H.forEach(function(J){var re=J.getAttribute("class")||"";re.split(/\s+/).forEach(function(ne){if(ne.startsWith("ql-")&&(ne=ne.slice(3),F[ne]!=null))if(ne==="direction")J.innerHTML=F[ne][""]+F[ne].rtl;else if(typeof F[ne]=="string")J.innerHTML=F[ne];else{var de=J.value||"";de!=null&&F[ne][de]&&(J.innerHTML=F[ne][de])}})})}},{key:"buildPickers",value:function(H,F){var J=this;this.pickers=H.map(function(ne){if(ne.classList.contains("ql-align"))return ne.querySelector("option")==null&&q(ne,C),new x.default(ne,F.align);if(ne.classList.contains("ql-background")||ne.classList.contains("ql-color")){var de=ne.classList.contains("ql-background")?"background":"color";return ne.querySelector("option")==null&&q(ne,I,de==="background"?"#ffffff":"#000000"),new m.default(ne,F[de])}else return ne.querySelector("option")==null&&(ne.classList.contains("ql-font")?q(ne,V):ne.classList.contains("ql-header")?q(ne,ee):ne.classList.contains("ql-size")&&q(ne,te)),new D.default(ne)});var re=function(){J.pickers.forEach(function(de){de.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,re)}}]),M}(b.default);Q.DEFAULTS=(0,l.default)(!0,{},b.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var M=this,U=this.container.querySelector("input.ql-image[type=file]");U==null&&(U=document.createElement("input"),U.setAttribute("type","file"),U.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),U.classList.add("ql-image"),U.addEventListener("change",function(){if(U.files!=null&&U.files[0]!=null){var H=new FileReader;H.onload=function(F){var J=M.quill.getSelection(!0);M.quill.updateContents(new p.default().retain(J.index).delete(J.length).insert({image:F.target.result}),f.default.sources.USER),M.quill.setSelection(J.index+1,f.default.sources.SILENT),U.value=""},H.readAsDataURL(U.files[0])}}),this.container.appendChild(U)),U.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Y=function(L){E(M,L);function M(U,H){P(this,M);var F=k(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,U,H));return F.textbox=F.root.querySelector('input[type="text"]'),F.listen(),F}return a(M,[{key:"listen",value:function(){var H=this;this.textbox.addEventListener("keydown",function(F){y.default.match(F,"enter")?(H.save(),F.preventDefault()):y.default.match(F,"escape")&&(H.cancel(),F.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),F!=null?this.textbox.value=F:H!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+H)||""),this.root.setAttribute("data-mode",H)}},{key:"restoreFocus",value:function(){var H=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=H}},{key:"save",value:function(){var H=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var F=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",H,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",H,f.default.sources.USER)),this.quill.root.scrollTop=F;break}case"video":H=W(H);case"formula":{if(!H)break;var J=this.quill.getSelection(!0);if(J!=null){var re=J.index+J.length;this.quill.insertEmbed(re,this.root.getAttribute("data-mode"),H,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(re+1," ",f.default.sources.USER),this.quill.setSelection(re+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),M}(j.default);function W(L){var M=L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return M?(M[1]||"https")+"://www.youtube.com/embed/"+M[2]+"?showinfo=0":(M=L.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(M[1]||"https")+"://player.vimeo.com/video/"+M[2]+"/":L}function q(L,M){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;M.forEach(function(H){var F=document.createElement("option");H===U?F.setAttribute("selected","selected"):F.setAttribute("value",H),L.appendChild(F)})}n.BaseTooltip=Y,n.default=Q},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];this.insertBefore(s[0],null),s.length>1&&this.append.apply(this,s.slice(1))},o.prototype.contains=function(s){for(var l,c=this.iterator();l=c();)if(l===s)return!0;return!1},o.prototype.insertBefore=function(s,l){s&&(s.next=l,l!=null?(s.prev=l.prev,l.prev!=null&&(l.prev.next=s),l.prev=s,l===this.head&&(this.head=s)):this.tail!=null?(this.tail.next=s,s.prev=this.tail,this.tail=s):(s.prev=null,this.head=this.tail=s),this.length+=1)},o.prototype.offset=function(s){for(var l=0,c=this.head;c!=null;){if(c===s)return l;l+=c.length(),c=c.next}return-1},o.prototype.remove=function(s){this.contains(s)&&(s.prev!=null&&(s.prev.next=s.next),s.next!=null&&(s.next.prev=s.prev),s===this.head&&(this.head=s.next),s===this.tail&&(this.tail=s.prev),this.length-=1)},o.prototype.iterator=function(s){return s===void 0&&(s=this.head),function(){var l=s;return s!=null&&(s=s.next),l}},o.prototype.find=function(s,l){l===void 0&&(l=!1);for(var c,p=this.iterator();c=p();){var d=c.length();if(s<d||l&&s===d&&(c.next==null||c.next.length()!==0))return[c,s];s-=d}return[null,0]},o.prototype.forEach=function(s){for(var l,c=this.iterator();l=c();)s(l)},o.prototype.forEachAt=function(s,l,c){if(!(l<=0))for(var p=this.find(s),d=p[0],f=p[1],u,y=s-f,v=this.iterator(d);(u=v())&&y<s+l;){var b=u.length();s>y?c(u,s-y,Math.min(l,y+b-s)):c(u,0,Math.min(b,s+l-y)),y+=b}},o.prototype.map=function(s){return this.reduce(function(l,c){return l.push(s(c)),l},[])},o.prototype.reduce=function(s,l){for(var c,p=this.iterator();c=p();)l=s(l,c);return l},o}();n.default=a},function(r,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var y in u)u.hasOwnProperty(y)&&(f[y]=u[y])};return function(f,u){d(f,u);function y(){this.constructor=f}f.prototype=u===null?Object.create(u):(y.prototype=u.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(17),s=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},c=100,p=function(d){a(f,d);function f(u){var y=d.call(this,u)||this;return y.scroll=y,y.observer=new MutationObserver(function(v){y.update(v)}),y.observer.observe(y.domNode,l),y.attach(),y}return f.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(u,y){this.update(),u===0&&y===this.length()?this.children.forEach(function(v){v.remove()}):d.prototype.deleteAt.call(this,u,y)},f.prototype.formatAt=function(u,y,v,b){this.update(),d.prototype.formatAt.call(this,u,y,v,b)},f.prototype.insertAt=function(u,y,v){this.update(),d.prototype.insertAt.call(this,u,y,v)},f.prototype.optimize=function(u,y){var v=this;u===void 0&&(u=[]),y===void 0&&(y={}),d.prototype.optimize.call(this,y);for(var b=[].slice.call(this.observer.takeRecords());b.length>0;)u.push(b.pop());for(var g=function(A,D){D===void 0&&(D=!0),!(A==null||A===v)&&A.domNode.parentNode!=null&&(A.domNode[s.DATA_KEY].mutations==null&&(A.domNode[s.DATA_KEY].mutations=[]),D&&g(A.parent))},m=function(A){A.domNode[s.DATA_KEY]==null||A.domNode[s.DATA_KEY].mutations==null||(A instanceof o.default&&A.children.forEach(m),A.optimize(y))},_=u,x=0;_.length>0;x+=1){if(x>=c)throw new Error("[Parchment] Maximum optimize iterations reached");for(_.forEach(function(A){var D=s.find(A.target,!0);D!=null&&(D.domNode===A.target&&(A.type==="childList"?(g(s.find(A.previousSibling,!1)),[].forEach.call(A.addedNodes,function(T){var j=s.find(T,!1);g(j,!1),j instanceof o.default&&j.children.forEach(function(B){g(B,!1)})})):A.type==="attributes"&&g(D.prev)),g(D))}),this.children.forEach(m),_=[].slice.call(this.observer.takeRecords()),b=_.slice();b.length>0;)u.push(b.pop())}},f.prototype.update=function(u,y){var v=this;y===void 0&&(y={}),u=u||this.observer.takeRecords(),u.map(function(b){var g=s.find(b.target,!0);return g==null?null:g.domNode[s.DATA_KEY].mutations==null?(g.domNode[s.DATA_KEY].mutations=[b],g):(g.domNode[s.DATA_KEY].mutations.push(b),null)}).forEach(function(b){b==null||b===v||b.domNode[s.DATA_KEY]==null||b.update(b.domNode[s.DATA_KEY].mutations||[],y)}),this.domNode[s.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[s.DATA_KEY].mutations,y),this.optimize(u,y)},f.blotName="scroll",f.defaultChild="block",f.scope=s.Scope.BLOCK_BLOT,f.tagName="DIV",f}(o.default);n.default=p},function(r,n,i){var a=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var u in f)f.hasOwnProperty(u)&&(d[u]=f[u])};return function(d,f){p(d,f);function u(){this.constructor=d}d.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(18),s=i(1);function l(p,d){if(Object.keys(p).length!==Object.keys(d).length)return!1;for(var f in p)if(p[f]!==d[f])return!1;return!0}var c=function(p){a(d,p);function d(){return p!==null&&p.apply(this,arguments)||this}return d.formats=function(f){if(f.tagName!==d.tagName)return p.formats.call(this,f)},d.prototype.format=function(f,u){var y=this;f===this.statics.blotName&&!u?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(d.blotName,!0)),y.attributes.copy(v)}),this.unwrap()):p.prototype.format.call(this,f,u)},d.prototype.formatAt=function(f,u,y,v){if(this.formats()[y]!=null||s.query(y,s.Scope.ATTRIBUTE)){var b=this.isolate(f,u);b.format(y,v)}else p.prototype.formatAt.call(this,f,u,y,v)},d.prototype.optimize=function(f){p.prototype.optimize.call(this,f);var u=this.formats();if(Object.keys(u).length===0)return this.unwrap();var y=this.next;y instanceof d&&y.prev===this&&l(u,y.formats())&&(y.moveChildren(this),y.remove())},d.blotName="inline",d.scope=s.Scope.INLINE_BLOT,d.tagName="SPAN",d}(o.default);n.default=c},function(r,n,i){var a=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var f in d)d.hasOwnProperty(f)&&(p[f]=d[f])};return function(p,d){c(p,d);function f(){this.constructor=p}p.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(18),s=i(1),l=function(c){a(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return p.formats=function(d){var f=s.query(p.blotName).tagName;if(d.tagName!==f)return c.formats.call(this,d)},p.prototype.format=function(d,f){s.query(d,s.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!f?this.replaceWith(p.blotName):c.prototype.format.call(this,d,f))},p.prototype.formatAt=function(d,f,u,y){s.query(u,s.Scope.BLOCK)!=null?this.format(u,y):c.prototype.formatAt.call(this,d,f,u,y)},p.prototype.insertAt=function(d,f,u){if(u==null||s.query(f,s.Scope.INLINE)!=null)c.prototype.insertAt.call(this,d,f,u);else{var y=this.split(d),v=s.create(f,u);y.parent.insertBefore(v,y)}},p.prototype.update=function(d,f){navigator.userAgent.match(/Trident/)?this.build():c.prototype.update.call(this,d,f)},p.blotName="block",p.scope=s.Scope.BLOCK_BLOT,p.tagName="P",p}(o.default);n.default=l},function(r,n,i){var a=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,p){c.__proto__=p}||function(c,p){for(var d in p)p.hasOwnProperty(d)&&(c[d]=p[d])};return function(c,p){l(c,p);function d(){this.constructor=c}c.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),s=function(l){a(c,l);function c(){return l!==null&&l.apply(this,arguments)||this}return c.formats=function(p){},c.prototype.format=function(p,d){l.prototype.formatAt.call(this,0,this.length(),p,d)},c.prototype.formatAt=function(p,d,f,u){p===0&&d===this.length()?this.format(f,u):l.prototype.formatAt.call(this,p,d,f,u)},c.prototype.formats=function(){return this.statics.formats(this.domNode)},c}(o.default);n.default=s},function(r,n,i){var a=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var f in d)d.hasOwnProperty(f)&&(p[f]=d[f])};return function(p,d){c(p,d);function f(){this.constructor=p}p.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),s=i(1),l=function(c){a(p,c);function p(d){var f=c.call(this,d)||this;return f.text=f.statics.value(f.domNode),f}return p.create=function(d){return document.createTextNode(d)},p.value=function(d){var f=d.data;return f.normalize&&(f=f.normalize()),f},p.prototype.deleteAt=function(d,f){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+f)},p.prototype.index=function(d,f){return this.domNode===d?f:-1},p.prototype.insertAt=function(d,f,u){u==null?(this.text=this.text.slice(0,d)+f+this.text.slice(d),this.domNode.data=this.text):c.prototype.insertAt.call(this,d,f,u)},p.prototype.length=function(){return this.text.length},p.prototype.optimize=function(d){c.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof p&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},p.prototype.position=function(d,f){return[this.domNode,d]},p.prototype.split=function(d,f){if(f===void 0&&(f=!1),!f){if(d===0)return this;if(d===this.length())return this.next}var u=s.create(this.domNode.splitText(d));return this.parent.insertBefore(u,this.next),this.text=this.statics.value(this.domNode),u},p.prototype.update=function(d,f){var u=this;d.some(function(y){return y.type==="characterData"&&y.target===u.domNode})&&(this.text=this.statics.value(this.domNode))},p.prototype.value=function(){return this.text},p.blotName="text",p.scope=s.Scope.INLINE_BLOT,p}(o.default);n.default=l},function(r,n,i){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(s,l){return arguments.length>1&&!this.contains(s)==!l?l:o.call(this,s)}}String.prototype.startsWith||(String.prototype.startsWith=function(s,l){return l=l||0,this.substr(l,s.length)===s}),String.prototype.endsWith||(String.prototype.endsWith=function(s,l){var c=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>c.length)&&(l=c.length),l-=s.length;var p=c.indexOf(s,l);return p!==-1&&p===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var c=Object(this),p=c.length>>>0,d=arguments[1],f,u=0;u<p;u++)if(f=c[u],l.call(d,f,u,c))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(r,n){var i=-1,a=1,o=0;function s(x,A,D){if(x==A)return x?[[o,x]]:[];(D<0||x.length<D)&&(D=null);var T=d(x,A),j=x.substring(0,T);x=x.substring(T),A=A.substring(T),T=f(x,A);var B=x.substring(x.length-T);x=x.substring(0,x.length-T),A=A.substring(0,A.length-T);var P=l(x,A);return j&&P.unshift([o,j]),B&&P.push([o,B]),y(P),D!=null&&(P=g(P,D)),P=m(P),P}function l(x,A){var D;if(!x)return[[a,A]];if(!A)return[[i,x]];var T=x.length>A.length?x:A,j=x.length>A.length?A:x,B=T.indexOf(j);if(B!=-1)return D=[[a,T.substring(0,B)],[o,j],[a,T.substring(B+j.length)]],x.length>A.length&&(D[0][0]=D[2][0]=i),D;if(j.length==1)return[[i,x],[a,A]];var P=u(x,A);if(P){var k=P[0],E=P[1],C=P[2],I=P[3],V=P[4],ee=s(k,C),te=s(E,I);return ee.concat([[o,V]],te)}return c(x,A)}function c(x,A){for(var D=x.length,T=A.length,j=Math.ceil((D+T)/2),B=j,P=2*j,k=new Array(P),E=new Array(P),C=0;C<P;C++)k[C]=-1,E[C]=-1;k[B+1]=0,E[B+1]=0;for(var I=D-T,V=I%2!=0,ee=0,te=0,Q=0,Y=0,W=0;W<j;W++){for(var q=-W+ee;q<=W-te;q+=2){var L=B+q,M;q==-W||q!=W&&k[L-1]<k[L+1]?M=k[L+1]:M=k[L-1]+1;for(var U=M-q;M<D&&U<T&&x.charAt(M)==A.charAt(U);)M++,U++;if(k[L]=M,M>D)te+=2;else if(U>T)ee+=2;else if(V){var H=B+I-q;if(H>=0&&H<P&&E[H]!=-1){var F=D-E[H];if(M>=F)return p(x,A,M,U)}}}for(var J=-W+Q;J<=W-Y;J+=2){var H=B+J,F;J==-W||J!=W&&E[H-1]<E[H+1]?F=E[H+1]:F=E[H-1]+1;for(var re=F-J;F<D&&re<T&&x.charAt(D-F-1)==A.charAt(T-re-1);)F++,re++;if(E[H]=F,F>D)Y+=2;else if(re>T)Q+=2;else if(!V){var L=B+I-J;if(L>=0&&L<P&&k[L]!=-1){var M=k[L],U=B+M-L;if(F=D-F,M>=F)return p(x,A,M,U)}}}}return[[i,x],[a,A]]}function p(x,A,D,T){var j=x.substring(0,D),B=A.substring(0,T),P=x.substring(D),k=A.substring(T),E=s(j,B),C=s(P,k);return E.concat(C)}function d(x,A){if(!x||!A||x.charAt(0)!=A.charAt(0))return 0;for(var D=0,T=Math.min(x.length,A.length),j=T,B=0;D<j;)x.substring(B,j)==A.substring(B,j)?(D=j,B=D):T=j,j=Math.floor((T-D)/2+D);return j}function f(x,A){if(!x||!A||x.charAt(x.length-1)!=A.charAt(A.length-1))return 0;for(var D=0,T=Math.min(x.length,A.length),j=T,B=0;D<j;)x.substring(x.length-j,x.length-B)==A.substring(A.length-j,A.length-B)?(D=j,B=D):T=j,j=Math.floor((T-D)/2+D);return j}function u(x,A){var D=x.length>A.length?x:A,T=x.length>A.length?A:x;if(D.length<4||T.length*2<D.length)return null;function j(te,Q,Y){for(var W=te.substring(Y,Y+Math.floor(te.length/4)),q=-1,L="",M,U,H,F;(q=Q.indexOf(W,q+1))!=-1;){var J=d(te.substring(Y),Q.substring(q)),re=f(te.substring(0,Y),Q.substring(0,q));L.length<re+J&&(L=Q.substring(q-re,q)+Q.substring(q,q+J),M=te.substring(0,Y-re),U=te.substring(Y+J),H=Q.substring(0,q-re),F=Q.substring(q+J))}return L.length*2>=te.length?[M,U,H,F,L]:null}var B=j(D,T,Math.ceil(D.length/4)),P=j(D,T,Math.ceil(D.length/2)),k;if(!B&&!P)return null;P?B?k=B[4].length>P[4].length?B:P:k=P:k=B;var E,C,I,V;x.length>A.length?(E=k[0],C=k[1],I=k[2],V=k[3]):(I=k[0],V=k[1],E=k[2],C=k[3]);var ee=k[4];return[E,C,I,V,ee]}function y(x){x.push([o,""]);for(var A=0,D=0,T=0,j="",B="",P;A<x.length;)switch(x[A][0]){case a:T++,B+=x[A][1],A++;break;case i:D++,j+=x[A][1],A++;break;case o:D+T>1?(D!==0&&T!==0&&(P=d(B,j),P!==0&&(A-D-T>0&&x[A-D-T-1][0]==o?x[A-D-T-1][1]+=B.substring(0,P):(x.splice(0,0,[o,B.substring(0,P)]),A++),B=B.substring(P),j=j.substring(P)),P=f(B,j),P!==0&&(x[A][1]=B.substring(B.length-P)+x[A][1],B=B.substring(0,B.length-P),j=j.substring(0,j.length-P))),D===0?x.splice(A-T,D+T,[a,B]):T===0?x.splice(A-D,D+T,[i,j]):x.splice(A-D-T,D+T,[i,j],[a,B]),A=A-D-T+(D?1:0)+(T?1:0)+1):A!==0&&x[A-1][0]==o?(x[A-1][1]+=x[A][1],x.splice(A,1)):A++,T=0,D=0,j="",B="";break}x[x.length-1][1]===""&&x.pop();var k=!1;for(A=1;A<x.length-1;)x[A-1][0]==o&&x[A+1][0]==o&&(x[A][1].substring(x[A][1].length-x[A-1][1].length)==x[A-1][1]?(x[A][1]=x[A-1][1]+x[A][1].substring(0,x[A][1].length-x[A-1][1].length),x[A+1][1]=x[A-1][1]+x[A+1][1],x.splice(A-1,1),k=!0):x[A][1].substring(0,x[A+1][1].length)==x[A+1][1]&&(x[A-1][1]+=x[A+1][1],x[A][1]=x[A][1].substring(x[A+1][1].length)+x[A+1][1],x.splice(A+1,1),k=!0)),A++;k&&y(x)}var v=s;v.INSERT=a,v.DELETE=i,v.EQUAL=o,r.exports=v;function b(x,A){if(A===0)return[o,x];for(var D=0,T=0;T<x.length;T++){var j=x[T];if(j[0]===i||j[0]===o){var B=D+j[1].length;if(A===B)return[T+1,x];if(A<B){x=x.slice();var P=A-D,k=[j[0],j[1].slice(0,P)],E=[j[0],j[1].slice(P)];return x.splice(T,1,k,E),[T+1,x]}else D=B}}throw new Error("cursor_pos is out of bounds!")}function g(x,A){var D=b(x,A),T=D[1],j=D[0],B=T[j],P=T[j+1];if(B==null)return x;if(B[0]!==o)return x;if(P!=null&&B[1]+P[1]===P[1]+B[1])return T.splice(j,2,P,B),_(T,j,2);if(P!=null&&P[1].indexOf(B[1])===0){T.splice(j,2,[P[0],B[1]],[0,B[1]]);var k=P[1].slice(B[1].length);return k.length>0&&T.splice(j+2,0,[P[0],k]),_(T,j,3)}else return x}function m(x){for(var A=!1,D=function(P){return P.charCodeAt(0)>=56320&&P.charCodeAt(0)<=57343},T=function(P){return P.charCodeAt(P.length-1)>=55296&&P.charCodeAt(P.length-1)<=56319},j=2;j<x.length;j+=1)x[j-2][0]===o&&T(x[j-2][1])&&x[j-1][0]===i&&D(x[j-1][1])&&x[j][0]===a&&D(x[j][1])&&(A=!0,x[j-1][1]=x[j-2][1].slice(-1)+x[j-1][1],x[j][1]=x[j-2][1].slice(-1)+x[j][1],x[j-2][1]=x[j-2][1].slice(0,-1));if(!A)return x;for(var B=[],j=0;j<x.length;j+=1)x[j][1].length>0&&B.push(x[j]);return B}function _(x,A,D){for(var T=A+D-1;T>=0&&T>=A-1;T--)if(T+1<x.length){var j=x[T],B=x[T+1];j[0]===B[1]&&x.splice(T,2,[j[0],j[1]+B[1]])}return x}},function(r,n){n=r.exports=typeof Object.keys=="function"?Object.keys:i,n.shim=i;function i(a){var o=[];for(var s in a)o.push(s);return o}},function(r,n){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=r.exports=i?a:o,n.supported=a;function a(s){return Object.prototype.toString.call(s)=="[object Arguments]"}n.unsupported=o;function o(s){return s&&typeof s=="object"&&typeof s.length=="number"&&Object.prototype.hasOwnProperty.call(s,"callee")&&!Object.prototype.propertyIsEnumerable.call(s,"callee")||!1}},function(r,n){var i=Object.prototype.hasOwnProperty,a="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(a=!1));function s(c,p,d){this.fn=c,this.context=p,this.once=d||!1}function l(){this._events=new o,this._eventsCount=0}l.prototype.eventNames=function(){var p=[],d,f;if(this._eventsCount===0)return p;for(f in d=this._events)i.call(d,f)&&p.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(d)):p},l.prototype.listeners=function(p,d){var f=a?a+p:p,u=this._events[f];if(d)return!!u;if(!u)return[];if(u.fn)return[u.fn];for(var y=0,v=u.length,b=new Array(v);y<v;y++)b[y]=u[y].fn;return b},l.prototype.emit=function(p,d,f,u,y,v){var b=a?a+p:p;if(!this._events[b])return!1;var g=this._events[b],m=arguments.length,_,x;if(g.fn){switch(g.once&&this.removeListener(p,g.fn,void 0,!0),m){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,u),!0;case 5:return g.fn.call(g.context,d,f,u,y),!0;case 6:return g.fn.call(g.context,d,f,u,y,v),!0}for(x=1,_=new Array(m-1);x<m;x++)_[x-1]=arguments[x];g.fn.apply(g.context,_)}else{var A=g.length,D;for(x=0;x<A;x++)switch(g[x].once&&this.removeListener(p,g[x].fn,void 0,!0),m){case 1:g[x].fn.call(g[x].context);break;case 2:g[x].fn.call(g[x].context,d);break;case 3:g[x].fn.call(g[x].context,d,f);break;case 4:g[x].fn.call(g[x].context,d,f,u);break;default:if(!_)for(D=1,_=new Array(m-1);D<m;D++)_[D-1]=arguments[D];g[x].fn.apply(g[x].context,_)}}return!0},l.prototype.on=function(p,d,f){var u=new s(d,f||this),y=a?a+p:p;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],u]:this._events[y].push(u):(this._events[y]=u,this._eventsCount++),this},l.prototype.once=function(p,d,f){var u=new s(d,f||this,!0),y=a?a+p:p;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],u]:this._events[y].push(u):(this._events[y]=u,this._eventsCount++),this},l.prototype.removeListener=function(p,d,f,u){var y=a?a+p:p;if(!this._events[y])return this;if(!d)return--this._eventsCount===0?this._events=new o:delete this._events[y],this;var v=this._events[y];if(v.fn)v.fn===d&&(!u||v.once)&&(!f||v.context===f)&&(--this._eventsCount===0?this._events=new o:delete this._events[y]);else{for(var b=0,g=[],m=v.length;b<m;b++)(v[b].fn!==d||u&&!v[b].once||f&&v[b].context!==f)&&g.push(v[b]);g.length?this._events[y]=g.length===1?g[0]:g:--this._eventsCount===0?this._events=new o:delete this._events[y]}return this},l.prototype.removeAllListeners=function(p){var d;return p?(d=a?a+p:p,this._events[d]&&(--this._eventsCount===0?this._events=new o:delete this._events[d])):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=a,l.EventEmitter=l,typeof r<"u"&&(r.exports=l)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},o=function(){function pe(se,he){var ye=[],ge=!0,Ie=!1,qe=void 0;try{for(var Ue=se[Symbol.iterator](),rt;!(ge=(rt=Ue.next()).done)&&(ye.push(rt.value),!(he&&ye.length===he));ge=!0);}catch(lt){Ie=!0,qe=lt}finally{try{!ge&&Ue.return&&Ue.return()}finally{if(Ie)throw qe}}return ye}return function(se,he){if(Array.isArray(se))return se;if(Symbol.iterator in Object(se))return pe(se,he);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function pe(se,he){for(var ye=0;ye<he.length;ye++){var ge=he[ye];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(se,ge.key,ge)}}return function(se,he,ye){return he&&pe(se.prototype,he),ye&&pe(se,ye),se}}(),l=i(3),c=E(l),p=i(2),d=E(p),f=i(0),u=E(f),y=i(5),v=E(y),b=i(10),g=E(b),m=i(9),_=E(m),x=i(36),A=i(37),D=i(13),T=E(D),j=i(26),B=i(38),P=i(39),k=i(40);function E(pe){return pe&&pe.__esModule?pe:{default:pe}}function C(pe,se,he){return se in pe?Object.defineProperty(pe,se,{value:he,enumerable:!0,configurable:!0,writable:!0}):pe[se]=he,pe}function I(pe,se){if(!(pe instanceof se))throw new TypeError("Cannot call a class as a function")}function V(pe,se){if(!pe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se&&(typeof se=="object"||typeof se=="function")?se:pe}function ee(pe,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);pe.prototype=Object.create(se&&se.prototype,{constructor:{value:pe,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(pe,se):pe.__proto__=se)}var te=(0,g.default)("quill:clipboard"),Q="__ql-matcher",Y=[[Node.TEXT_NODE,Ve],[Node.TEXT_NODE,Me],["br",xe],[Node.ELEMENT_NODE,Me],[Node.ELEMENT_NODE,de],[Node.ELEMENT_NODE,Se],[Node.ELEMENT_NODE,ne],[Node.ELEMENT_NODE,ae],["li",Ee],["b",re.bind(re,"bold")],["i",re.bind(re,"italic")],["style",je]],W=[x.AlignAttribute,B.DirectionAttribute].reduce(function(pe,se){return pe[se.keyName]=se,pe},{}),q=[x.AlignStyle,A.BackgroundStyle,j.ColorStyle,B.DirectionStyle,P.FontStyle,k.SizeStyle].reduce(function(pe,se){return pe[se.keyName]=se,pe},{}),L=function(pe){ee(se,pe);function se(he,ye){I(this,se);var ge=V(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,he,ye));return ge.quill.root.addEventListener("paste",ge.onPaste.bind(ge)),ge.container=ge.quill.addContainer("ql-clipboard"),ge.container.setAttribute("contenteditable",!0),ge.container.setAttribute("tabindex",-1),ge.matchers=[],Y.concat(ge.options.matchers).forEach(function(Ie){var qe=o(Ie,2),Ue=qe[0],rt=qe[1];!ye.matchVisual&&rt===Se||ge.addMatcher(Ue,rt)}),ge}return s(se,[{key:"addMatcher",value:function(ye,ge){this.matchers.push([ye,ge])}},{key:"convert",value:function(ye){if(typeof ye=="string")return this.container.innerHTML=ye.replace(/\>\r?\n +\</g,"><"),this.convert();var ge=this.quill.getFormat(this.quill.selection.savedRange.index);if(ge[T.default.blotName]){var Ie=this.container.innerText;return this.container.innerHTML="",new d.default().insert(Ie,C({},T.default.blotName,ge[T.default.blotName]))}var qe=this.prepareMatching(),Ue=o(qe,2),rt=Ue[0],lt=Ue[1],at=J(this.container,rt,lt);return H(at,`
`)&&at.ops[at.ops.length-1].attributes==null&&(at=at.compose(new d.default().retain(at.length()-1).delete(1))),te.log("convert",this.container.innerHTML,at),this.container.innerHTML="",at}},{key:"dangerouslyPasteHTML",value:function(ye,ge){var Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof ye=="string")this.quill.setContents(this.convert(ye),ge),this.quill.setSelection(0,v.default.sources.SILENT);else{var qe=this.convert(ge);this.quill.updateContents(new d.default().retain(ye).concat(qe),Ie),this.quill.setSelection(ye+qe.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(ye){var ge=this;if(!(ye.defaultPrevented||!this.quill.isEnabled())){var Ie=this.quill.getSelection(),qe=new d.default().retain(Ie.index),Ue=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){qe=qe.concat(ge.convert()).delete(Ie.length),ge.quill.updateContents(qe,v.default.sources.USER),ge.quill.setSelection(qe.length()-Ie.length,v.default.sources.SILENT),ge.quill.scrollingContainer.scrollTop=Ue,ge.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ye=this,ge=[],Ie=[];return this.matchers.forEach(function(qe){var Ue=o(qe,2),rt=Ue[0],lt=Ue[1];switch(rt){case Node.TEXT_NODE:Ie.push(lt);break;case Node.ELEMENT_NODE:ge.push(lt);break;default:[].forEach.call(ye.container.querySelectorAll(rt),function(at){at[Q]=at[Q]||[],at[Q].push(lt)});break}}),[ge,Ie]}}]),se}(_.default);L.DEFAULTS={matchers:[],matchVisual:!0};function M(pe,se,he){return(typeof se>"u"?"undefined":a(se))==="object"?Object.keys(se).reduce(function(ye,ge){return M(ye,ge,se[ge])},pe):pe.reduce(function(ye,ge){return ge.attributes&&ge.attributes[se]?ye.push(ge):ye.insert(ge.insert,(0,c.default)({},C({},se,he),ge.attributes))},new d.default)}function U(pe){if(pe.nodeType!==Node.ELEMENT_NODE)return{};var se="__ql-computed-style";return pe[se]||(pe[se]=window.getComputedStyle(pe))}function H(pe,se){for(var he="",ye=pe.ops.length-1;ye>=0&&he.length<se.length;--ye){var ge=pe.ops[ye];if(typeof ge.insert!="string")break;he=ge.insert+he}return he.slice(-1*se.length)===se}function F(pe){if(pe.childNodes.length===0)return!1;var se=U(pe);return["block","list-item"].indexOf(se.display)>-1}function J(pe,se,he){return pe.nodeType===pe.TEXT_NODE?he.reduce(function(ye,ge){return ge(pe,ye)},new d.default):pe.nodeType===pe.ELEMENT_NODE?[].reduce.call(pe.childNodes||[],function(ye,ge){var Ie=J(ge,se,he);return ge.nodeType===pe.ELEMENT_NODE&&(Ie=se.reduce(function(qe,Ue){return Ue(ge,qe)},Ie),Ie=(ge[Q]||[]).reduce(function(qe,Ue){return Ue(ge,qe)},Ie)),ye.concat(Ie)},new d.default):new d.default}function re(pe,se,he){return M(he,pe,!0)}function ne(pe,se){var he=u.default.Attributor.Attribute.keys(pe),ye=u.default.Attributor.Class.keys(pe),ge=u.default.Attributor.Style.keys(pe),Ie={};return he.concat(ye).concat(ge).forEach(function(qe){var Ue=u.default.query(qe,u.default.Scope.ATTRIBUTE);Ue!=null&&(Ie[Ue.attrName]=Ue.value(pe),Ie[Ue.attrName])||(Ue=W[qe],Ue!=null&&(Ue.attrName===qe||Ue.keyName===qe)&&(Ie[Ue.attrName]=Ue.value(pe)||void 0),Ue=q[qe],Ue!=null&&(Ue.attrName===qe||Ue.keyName===qe)&&(Ue=q[qe],Ie[Ue.attrName]=Ue.value(pe)||void 0))}),Object.keys(Ie).length>0&&(se=M(se,Ie)),se}function de(pe,se){var he=u.default.query(pe);if(he==null)return se;if(he.prototype instanceof u.default.Embed){var ye={},ge=he.value(pe);ge!=null&&(ye[he.blotName]=ge,se=new d.default().insert(ye,he.formats(pe)))}else typeof he.formats=="function"&&(se=M(se,he.blotName,he.formats(pe)));return se}function xe(pe,se){return H(se,`
`)||se.insert(`
`),se}function je(){return new d.default}function Ee(pe,se){var he=u.default.query(pe);if(he==null||he.blotName!=="list-item"||!H(se,`
`))return se;for(var ye=-1,ge=pe.parentNode;!ge.classList.contains("ql-clipboard");)(u.default.query(ge)||{}).blotName==="list"&&(ye+=1),ge=ge.parentNode;return ye<=0?se:se.compose(new d.default().retain(se.length()-1).retain(1,{indent:ye}))}function Me(pe,se){return H(se,`
`)||(F(pe)||se.length()>0&&pe.nextSibling&&F(pe.nextSibling))&&se.insert(`
`),se}function Se(pe,se){if(F(pe)&&pe.nextElementSibling!=null&&!H(se,`

`)){var he=pe.offsetHeight+parseFloat(U(pe).marginTop)+parseFloat(U(pe).marginBottom);pe.nextElementSibling.offsetTop>pe.offsetTop+he*1.5&&se.insert(`
`)}return se}function ae(pe,se){var he={},ye=pe.style||{};return ye.fontStyle&&U(pe).fontStyle==="italic"&&(he.italic=!0),ye.fontWeight&&(U(pe).fontWeight.startsWith("bold")||parseInt(U(pe).fontWeight)>=700)&&(he.bold=!0),Object.keys(he).length>0&&(se=M(se,he)),parseFloat(ye.textIndent||0)>0&&(se=new d.default().insert("	").concat(se)),se}function Ve(pe,se){var he=pe.data;if(pe.parentNode.tagName==="O:P")return se.insert(he.trim());if(he.trim().length===0&&pe.parentNode.classList.contains("ql-clipboard"))return se;if(!U(pe.parentNode).whiteSpace.startsWith("pre")){var ye=function(Ie,qe){return qe=qe.replace(/[^\u00a0]/g,""),qe.length<1&&Ie?" ":qe};he=he.replace(/\r\n/g," ").replace(/\n/g," "),he=he.replace(/\s\s+/g,ye.bind(ye,!0)),(pe.previousSibling==null&&F(pe.parentNode)||pe.previousSibling!=null&&F(pe.previousSibling))&&(he=he.replace(/^\s+/,ye.bind(ye,!1))),(pe.nextSibling==null&&F(pe.parentNode)||pe.nextSibling!=null&&F(pe.nextSibling))&&(he=he.replace(/\s+$/,ye.bind(ye,!1)))}return se.insert(he)}n.default=L,n.matchAttributor=ne,n.matchBlot=de,n.matchNewline=Me,n.matchSpacing=Se,n.matchText=Ve},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,b){for(var g=0;g<b.length;g++){var m=b[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,b,g){return b&&y(v.prototype,b),g&&y(v,g),v}}(),o=function y(v,b,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,b);if(m===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,b,g)}else{if("value"in m)return m.value;var x=m.get;return x===void 0?void 0:x.call(g)}},s=i(6),l=c(s);function c(y){return y&&y.__esModule?y:{default:y}}function p(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var u=function(y){f(v,y);function v(){return p(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"optimize",value:function(g){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,g),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(l.default);u.blotName="bold",u.tagName=["STRONG","B"],n.default=u},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var a=function(){function k(E,C){var I=[],V=!0,ee=!1,te=void 0;try{for(var Q=E[Symbol.iterator](),Y;!(V=(Y=Q.next()).done)&&(I.push(Y.value),!(C&&I.length===C));V=!0);}catch(W){ee=!0,te=W}finally{try{!V&&Q.return&&Q.return()}finally{if(ee)throw te}}return I}return function(E,C){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return k(E,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function k(E,C){for(var I=0;I<C.length;I++){var V=C[I];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(E,V.key,V)}}return function(E,C,I){return C&&k(E.prototype,C),I&&k(E,I),E}}(),s=i(2),l=g(s),c=i(0),p=g(c),d=i(5),f=g(d),u=i(10),y=g(u),v=i(9),b=g(v);function g(k){return k&&k.__esModule?k:{default:k}}function m(k,E,C){return E in k?Object.defineProperty(k,E,{value:C,enumerable:!0,configurable:!0,writable:!0}):k[E]=C,k}function _(k,E){if(!(k instanceof E))throw new TypeError("Cannot call a class as a function")}function x(k,E){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:k}function A(k,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);k.prototype=Object.create(E&&E.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(k,E):k.__proto__=E)}var D=(0,y.default)("quill:toolbar"),T=function(k){A(E,k);function E(C,I){_(this,E);var V=x(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,C,I));if(Array.isArray(V.options.container)){var ee=document.createElement("div");B(ee,V.options.container),C.container.parentNode.insertBefore(ee,C.container),V.container=ee}else typeof V.options.container=="string"?V.container=document.querySelector(V.options.container):V.container=V.options.container;if(!(V.container instanceof HTMLElement)){var te;return te=D.error("Container required for toolbar",V.options),x(V,te)}return V.container.classList.add("ql-toolbar"),V.controls=[],V.handlers={},Object.keys(V.options.handlers).forEach(function(Q){V.addHandler(Q,V.options.handlers[Q])}),[].forEach.call(V.container.querySelectorAll("button, select"),function(Q){V.attach(Q)}),V.quill.on(f.default.events.EDITOR_CHANGE,function(Q,Y){Q===f.default.events.SELECTION_CHANGE&&V.update(Y)}),V.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var Q=V.quill.selection.getRange(),Y=a(Q,1),W=Y[0];V.update(W)}),V}return o(E,[{key:"addHandler",value:function(I,V){this.handlers[I]=V}},{key:"attach",value:function(I){var V=this,ee=[].find.call(I.classList,function(Q){return Q.indexOf("ql-")===0});if(ee){if(ee=ee.slice(3),I.tagName==="BUTTON"&&I.setAttribute("type","button"),this.handlers[ee]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[ee]==null){D.warn("ignoring attaching to disabled format",ee,I);return}if(p.default.query(ee)==null){D.warn("ignoring attaching to nonexistent format",ee,I);return}}var te=I.tagName==="SELECT"?"change":"click";I.addEventListener(te,function(Q){var Y=void 0;if(I.tagName==="SELECT"){if(I.selectedIndex<0)return;var W=I.options[I.selectedIndex];W.hasAttribute("selected")?Y=!1:Y=W.value||!1}else I.classList.contains("ql-active")?Y=!1:Y=I.value||!I.hasAttribute("value"),Q.preventDefault();V.quill.focus();var q=V.quill.selection.getRange(),L=a(q,1),M=L[0];if(V.handlers[ee]!=null)V.handlers[ee].call(V,Y);else if(p.default.query(ee).prototype instanceof p.default.Embed){if(Y=prompt("Enter "+ee),!Y)return;V.quill.updateContents(new l.default().retain(M.index).delete(M.length).insert(m({},ee,Y)),f.default.sources.USER)}else V.quill.format(ee,Y,f.default.sources.USER);V.update(M)}),this.controls.push([ee,I])}}},{key:"update",value:function(I){var V=I==null?{}:this.quill.getFormat(I);this.controls.forEach(function(ee){var te=a(ee,2),Q=te[0],Y=te[1];if(Y.tagName==="SELECT"){var W=void 0;if(I==null)W=null;else if(V[Q]==null)W=Y.querySelector("option[selected]");else if(!Array.isArray(V[Q])){var q=V[Q];typeof q=="string"&&(q=q.replace(/\"/g,'\\"')),W=Y.querySelector('option[value="'+q+'"]')}W==null?(Y.value="",Y.selectedIndex=-1):W.selected=!0}else if(I==null)Y.classList.remove("ql-active");else if(Y.hasAttribute("value")){var L=V[Q]===Y.getAttribute("value")||V[Q]!=null&&V[Q].toString()===Y.getAttribute("value")||V[Q]==null&&!Y.getAttribute("value");Y.classList.toggle("ql-active",L)}else Y.classList.toggle("ql-active",V[Q]!=null)})}}]),E}(b.default);T.DEFAULTS={};function j(k,E,C){var I=document.createElement("button");I.setAttribute("type","button"),I.classList.add("ql-"+E),C!=null&&(I.value=C),k.appendChild(I)}function B(k,E){Array.isArray(E[0])||(E=[E]),E.forEach(function(C){var I=document.createElement("span");I.classList.add("ql-formats"),C.forEach(function(V){if(typeof V=="string")j(I,V);else{var ee=Object.keys(V)[0],te=V[ee];Array.isArray(te)?P(I,ee,te):j(I,ee,te)}}),k.appendChild(I)})}function P(k,E,C){var I=document.createElement("select");I.classList.add("ql-"+E),C.forEach(function(V){var ee=document.createElement("option");V!==!1?ee.setAttribute("value",V):ee.setAttribute("selected","selected"),I.appendChild(ee)}),k.appendChild(I)}T.DEFAULTS={container:null,handlers:{clean:function(){var E=this,C=this.quill.getSelection();if(C!=null)if(C.length==0){var I=this.quill.getFormat();Object.keys(I).forEach(function(V){p.default.query(V,p.default.Scope.INLINE)!=null&&E.quill.format(V,!1)})}else this.quill.removeFormat(C,f.default.sources.USER)},direction:function(E){var C=this.quill.getFormat().align;E==="rtl"&&C==null?this.quill.format("align","right",f.default.sources.USER):!E&&C==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",E,f.default.sources.USER)},indent:function(E){var C=this.quill.getSelection(),I=this.quill.getFormat(C),V=parseInt(I.indent||0);if(E==="+1"||E==="-1"){var ee=E==="+1"?1:-1;I.direction==="rtl"&&(ee*=-1),this.quill.format("indent",V+ee,f.default.sources.USER)}},link:function(E){E===!0&&(E=prompt("Enter link URL:")),this.quill.format("link",E,f.default.sources.USER)},list:function(E){var C=this.quill.getSelection(),I=this.quill.getFormat(C);E==="check"?I.list==="checked"||I.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",E,f.default.sources.USER)}}},n.default=T,n.addControls=B},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,b){for(var g=0;g<b.length;g++){var m=b[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,b,g){return b&&y(v.prototype,b),g&&y(v,g),v}}(),o=function y(v,b,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,b);if(m===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,b,g)}else{if("value"in m)return m.value;var x=m.get;return x===void 0?void 0:x.call(g)}},s=i(28),l=c(s);function c(y){return y&&y.__esModule?y:{default:y}}function p(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var u=function(y){f(v,y);function v(b,g){p(this,v);var m=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b));return m.label.innerHTML=g,m.container.classList.add("ql-color-picker"),[].slice.call(m.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(_){_.classList.add("ql-primary")}),m}return a(v,[{key:"buildItem",value:function(g){var m=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,g);return m.style.backgroundColor=g.getAttribute("value")||"",m}},{key:"selectItem",value:function(g,m){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,g,m);var _=this.label.querySelector(".ql-color-label"),x=g&&g.getAttribute("data-value")||"";_&&(_.tagName==="line"?_.style.stroke=x:_.style.fill=x)}}]),v}(l.default);n.default=u},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,b){for(var g=0;g<b.length;g++){var m=b[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,b,g){return b&&y(v.prototype,b),g&&y(v,g),v}}(),o=function y(v,b,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,b);if(m===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,b,g)}else{if("value"in m)return m.value;var x=m.get;return x===void 0?void 0:x.call(g)}},s=i(28),l=c(s);function c(y){return y&&y.__esModule?y:{default:y}}function p(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var u=function(y){f(v,y);function v(b,g){p(this,v);var m=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b));return m.container.classList.add("ql-icon-picker"),[].forEach.call(m.container.querySelectorAll(".ql-picker-item"),function(_){_.innerHTML=g[_.getAttribute("data-value")||""]}),m.defaultItem=m.container.querySelector(".ql-selected"),m.selectItem(m.defaultItem),m}return a(v,[{key:"selectItem",value:function(g,m){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,g,m),g=g||this.defaultItem,this.label.innerHTML=g.innerHTML}}]),v}(l.default);n.default=u},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function l(c,p){for(var d=0;d<p.length;d++){var f=p[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,p,d){return p&&l(c.prototype,p),d&&l(c,d),c}}();function o(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var s=function(){function l(c,p){var d=this;o(this,l),this.quill=c,this.boundsContainer=p||document.body,this.root=c.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return a(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(p){var d=p.left+p.width/2-this.root.offsetWidth/2,f=p.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var u=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),v=0;if(y.right>u.right&&(v=u.right-y.right,this.root.style.left=d+v+"px"),y.left<u.left&&(v=u.left-y.left,this.root.style.left=d+v+"px"),y.bottom>u.bottom){var b=y.bottom-y.top,g=p.bottom-p.top+b;this.root.style.top=f-g+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();n.default=s},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function P(k,E){var C=[],I=!0,V=!1,ee=void 0;try{for(var te=k[Symbol.iterator](),Q;!(I=(Q=te.next()).done)&&(C.push(Q.value),!(E&&C.length===E));I=!0);}catch(Y){V=!0,ee=Y}finally{try{!I&&te.return&&te.return()}finally{if(V)throw ee}}return C}return function(k,E){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return P(k,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function P(k,E,C){k===null&&(k=Function.prototype);var I=Object.getOwnPropertyDescriptor(k,E);if(I===void 0){var V=Object.getPrototypeOf(k);return V===null?void 0:P(V,E,C)}else{if("value"in I)return I.value;var ee=I.get;return ee===void 0?void 0:ee.call(C)}},s=function(){function P(k,E){for(var C=0;C<E.length;C++){var I=E[C];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(k,I.key,I)}}return function(k,E,C){return E&&P(k.prototype,E),C&&P(k,C),k}}(),l=i(3),c=_(l),p=i(8),d=_(p),f=i(43),u=_(f),y=i(27),v=_(y),b=i(15),g=i(41),m=_(g);function _(P){return P&&P.__esModule?P:{default:P}}function x(P,k){if(!(P instanceof k))throw new TypeError("Cannot call a class as a function")}function A(P,k){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:P}function D(P,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);P.prototype=Object.create(k&&k.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(P,k):P.__proto__=k)}var T=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],j=function(P){D(k,P);function k(E,C){x(this,k),C.modules.toolbar!=null&&C.modules.toolbar.container==null&&(C.modules.toolbar.container=T);var I=A(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,E,C));return I.quill.container.classList.add("ql-snow"),I}return s(k,[{key:"extendToolbar",value:function(C){C.container.classList.add("ql-snow"),this.buildButtons([].slice.call(C.container.querySelectorAll("button")),m.default),this.buildPickers([].slice.call(C.container.querySelectorAll("select")),m.default),this.tooltip=new B(this.quill,this.options.bounds),C.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(I,V){C.handlers.link.call(C,!V.format.link)})}}]),k}(u.default);j.DEFAULTS=(0,c.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(k){if(k){var E=this.quill.getSelection();if(E==null||E.length==0)return;var C=this.quill.getText(E);/^\S+@\S+\.\S+$/.test(C)&&C.indexOf("mailto:")!==0&&(C="mailto:"+C);var I=this.quill.theme.tooltip;I.edit("link",C)}else this.quill.format("link",!1)}}}}});var B=function(P){D(k,P);function k(E,C){x(this,k);var I=A(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,E,C));return I.preview=I.root.querySelector("a.ql-preview"),I}return s(k,[{key:"listen",value:function(){var C=this;o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(I){C.root.classList.contains("ql-editing")?C.save():C.edit("link",C.preview.textContent),I.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(I){if(C.linkRange!=null){var V=C.linkRange;C.restoreFocus(),C.quill.formatText(V,"link",!1,d.default.sources.USER),delete C.linkRange}I.preventDefault(),C.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(I,V,ee){if(I!=null){if(I.length===0&&ee===d.default.sources.USER){var te=C.quill.scroll.descendant(v.default,I.index),Q=a(te,2),Y=Q[0],W=Q[1];if(Y!=null){C.linkRange=new b.Range(I.index-W,Y.length());var q=v.default.formats(Y.domNode);C.preview.textContent=q,C.preview.setAttribute("href",q),C.show(),C.position(C.quill.getBounds(C.linkRange));return}}else delete C.linkRange;C.hide()}})}},{key:"show",value:function(){o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),k}(f.BaseTooltip);B.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=j},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(29),o=ge(a),s=i(36),l=i(38),c=i(64),p=i(65),d=ge(p),f=i(66),u=ge(f),y=i(67),v=ge(y),b=i(37),g=i(26),m=i(39),_=i(40),x=i(56),A=ge(x),D=i(68),T=ge(D),j=i(27),B=ge(j),P=i(69),k=ge(P),E=i(70),C=ge(E),I=i(71),V=ge(I),ee=i(72),te=ge(ee),Q=i(73),Y=ge(Q),W=i(13),q=ge(W),L=i(74),M=ge(L),U=i(75),H=ge(U),F=i(57),J=ge(F),re=i(41),ne=ge(re),de=i(28),xe=ge(de),je=i(59),Ee=ge(je),Me=i(60),Se=ge(Me),ae=i(61),Ve=ge(ae),pe=i(108),se=ge(pe),he=i(62),ye=ge(he);function ge(Ie){return Ie&&Ie.__esModule?Ie:{default:Ie}}o.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":s.AlignClass,"attributors/class/background":b.BackgroundClass,"attributors/class/color":g.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":m.FontClass,"attributors/class/size":_.SizeClass,"attributors/style/align":s.AlignStyle,"attributors/style/background":b.BackgroundStyle,"attributors/style/color":g.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":m.FontStyle,"attributors/style/size":_.SizeStyle},!0),o.default.register({"formats/align":s.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":c.IndentClass,"formats/background":b.BackgroundStyle,"formats/color":g.ColorStyle,"formats/font":m.FontClass,"formats/size":_.SizeClass,"formats/blockquote":d.default,"formats/code-block":q.default,"formats/header":u.default,"formats/list":v.default,"formats/bold":A.default,"formats/code":W.Code,"formats/italic":T.default,"formats/link":B.default,"formats/script":k.default,"formats/strike":C.default,"formats/underline":V.default,"formats/image":te.default,"formats/video":Y.default,"formats/list/item":y.ListItem,"modules/formula":M.default,"modules/syntax":H.default,"modules/toolbar":J.default,"themes/bubble":se.default,"themes/snow":ye.default,"ui/icons":ne.default,"ui/picker":xe.default,"ui/icon-picker":Se.default,"ui/color-picker":Ee.default,"ui/tooltip":Ve.default},!0),n.default=o.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var a=function(){function v(b,g){for(var m=0;m<g.length;m++){var _=g[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,g,m){return g&&v(b.prototype,g),m&&v(b,m),b}}(),o=function v(b,g,m){b===null&&(b=Function.prototype);var _=Object.getOwnPropertyDescriptor(b,g);if(_===void 0){var x=Object.getPrototypeOf(b);return x===null?void 0:v(x,g,m)}else{if("value"in _)return _.value;var A=_.get;return A===void 0?void 0:A.call(m)}},s=i(0),l=c(s);function c(v){return v&&v.__esModule?v:{default:v}}function p(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function d(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function f(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var u=function(v){f(b,v);function b(){return p(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,[{key:"add",value:function(m,_){if(_==="+1"||_==="-1"){var x=this.value(m)||0;_=_==="+1"?x+1:x-1}return _===0?(this.remove(m),!0):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"add",this).call(this,m,_)}},{key:"canAdd",value:function(m,_){return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"canAdd",this).call(this,m,_)||o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"canAdd",this).call(this,m,parseInt(_))}},{key:"value",value:function(m){return parseInt(o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,m))||void 0}}]),b}(l.default.Attributor.Class),y=new u("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(4),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function c(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:f}function p(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}var d=function(f){p(u,f);function u(){return l(this,u),c(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(o.default);d.blotName="blockquote",d.tagName="blockquote",n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function u(y,v){for(var b=0;b<v.length;b++){var g=v[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}return function(y,v,b){return v&&u(y.prototype,v),b&&u(y,b),y}}(),o=i(4),s=l(o);function l(u){return u&&u.__esModule?u:{default:u}}function c(u,y){if(!(u instanceof y))throw new TypeError("Cannot call a class as a function")}function p(u,y){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:u}function d(u,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);u.prototype=Object.create(y&&y.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(u,y):u.__proto__=y)}var f=function(u){d(y,u);function y(){return c(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,null,[{key:"formats",value:function(b){return this.tagName.indexOf(b.tagName)+1}}]),y}(s.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],n.default=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var a=function(){function x(A,D){for(var T=0;T<D.length;T++){var j=D[T];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(A,j.key,j)}}return function(A,D,T){return D&&x(A.prototype,D),T&&x(A,T),A}}(),o=function x(A,D,T){A===null&&(A=Function.prototype);var j=Object.getOwnPropertyDescriptor(A,D);if(j===void 0){var B=Object.getPrototypeOf(A);return B===null?void 0:x(B,D,T)}else{if("value"in j)return j.value;var P=j.get;return P===void 0?void 0:P.call(T)}},s=i(0),l=u(s),c=i(4),p=u(c),d=i(25),f=u(d);function u(x){return x&&x.__esModule?x:{default:x}}function y(x,A,D){return A in x?Object.defineProperty(x,A,{value:D,enumerable:!0,configurable:!0,writable:!0}):x[A]=D,x}function v(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}function b(x,A){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:x}function g(x,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);x.prototype=Object.create(A&&A.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(x,A):x.__proto__=A)}var m=function(x){g(A,x);function A(){return v(this,A),b(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return a(A,[{key:"format",value:function(T,j){T===_.blotName&&!j?this.replaceWith(l.default.create(this.statics.scope)):o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,T,j)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(T,j){return this.parent.isolate(this.offset(this.parent),this.length()),T===this.parent.statics.blotName?(this.parent.replaceWith(T,j),this):(this.parent.unwrap(),o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,T,j))}}],[{key:"formats",value:function(T){return T.tagName===this.tagName?void 0:o(A.__proto__||Object.getPrototypeOf(A),"formats",this).call(this,T)}}]),A}(p.default);m.blotName="list-item",m.tagName="LI";var _=function(x){g(A,x),a(A,null,[{key:"create",value:function(T){var j=T==="ordered"?"OL":"UL",B=o(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,j);return(T==="checked"||T==="unchecked")&&B.setAttribute("data-checked",T==="checked"),B}},{key:"formats",value:function(T){if(T.tagName==="OL")return"ordered";if(T.tagName==="UL")return T.hasAttribute("data-checked")?T.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function A(D){v(this,A);var T=b(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,D)),j=function(P){if(P.target.parentNode===D){var k=T.statics.formats(D),E=l.default.find(P.target);k==="checked"?E.format("list","unchecked"):k==="unchecked"&&E.format("list","checked")}};return D.addEventListener("touchstart",j),D.addEventListener("mousedown",j),T}return a(A,[{key:"format",value:function(T,j){this.children.length>0&&this.children.tail.format(T,j)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(T,j){if(T instanceof m)o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,T,j);else{var B=j==null?this.length():j.offset(this),P=this.split(B);P.parent.insertBefore(T,P)}}},{key:"optimize",value:function(T){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,T);var j=this.next;j!=null&&j.prev===this&&j.statics.blotName===this.statics.blotName&&j.domNode.tagName===this.domNode.tagName&&j.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(j.moveChildren(this),j.remove())}},{key:"replace",value:function(T){if(T.statics.blotName!==this.statics.blotName){var j=l.default.create(this.statics.defaultChild);T.moveChildren(j),this.appendChild(j)}o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replace",this).call(this,T)}}]),A}(f.default);_.blotName="list",_.scope=l.default.Scope.BLOCK_BLOT,_.tagName=["OL","UL"],_.defaultChild="list-item",_.allowedChildren=[m],n.ListItem=m,n.default=_},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(56),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function c(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:f}function p(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}var d=function(f){p(u,f);function u(){return l(this,u),c(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(o.default);d.blotName="italic",d.tagName=["EM","I"],n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(v,b){for(var g=0;g<b.length;g++){var m=b[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,b,g){return b&&y(v.prototype,b),g&&y(v,g),v}}(),o=function y(v,b,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,b);if(m===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,b,g)}else{if("value"in m)return m.value;var x=m.get;return x===void 0?void 0:x.call(g)}},s=i(6),l=c(s);function c(y){return y&&y.__esModule?y:{default:y}}function p(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var u=function(y){f(v,y);function v(){return p(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,null,[{key:"create",value:function(g){return g==="super"?document.createElement("sup"):g==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,g)}},{key:"formats",value:function(g){if(g.tagName==="SUB")return"sub";if(g.tagName==="SUP")return"super"}}]),v}(l.default);u.blotName="script",u.tagName=["SUB","SUP"],n.default=u},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(6),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function c(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:f}function p(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}var d=function(f){p(u,f);function u(){return l(this,u),c(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(o.default);d.blotName="strike",d.tagName="S",n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(6),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function c(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:f}function p(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}var d=function(f){p(u,f);function u(){return l(this,u),c(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(o.default);d.blotName="underline",d.tagName="U",n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function b(g,m){for(var _=0;_<m.length;_++){var x=m[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,_){return m&&b(g.prototype,m),_&&b(g,_),g}}(),o=function b(g,m,_){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,m);if(x===void 0){var A=Object.getPrototypeOf(g);return A===null?void 0:b(A,m,_)}else{if("value"in x)return x.value;var D=x.get;return D===void 0?void 0:D.call(_)}},s=i(0),l=p(s),c=i(27);function p(b){return b&&b.__esModule?b:{default:b}}function d(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function f(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function u(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var y=["alt","height","width"],v=function(b){u(g,b);function g(){return d(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,[{key:"format",value:function(_,x){y.indexOf(_)>-1?x?this.domNode.setAttribute(_,x):this.domNode.removeAttribute(_):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,_,x)}}],[{key:"create",value:function(_){var x=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,_);return typeof _=="string"&&x.setAttribute("src",this.sanitize(_)),x}},{key:"formats",value:function(_){return y.reduce(function(x,A){return _.hasAttribute(A)&&(x[A]=_.getAttribute(A)),x},{})}},{key:"match",value:function(_){return/\.(jpe?g|gif|png)$/.test(_)||/^data:image\/.+;base64/.test(_)}},{key:"sanitize",value:function(_){return(0,c.sanitize)(_,["http","https","data"])?_:"//:0"}},{key:"value",value:function(_){return _.getAttribute("src")}}]),g}(l.default.Embed);v.blotName="image",v.tagName="IMG",n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function b(g,m){for(var _=0;_<m.length;_++){var x=m[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,_){return m&&b(g.prototype,m),_&&b(g,_),g}}(),o=function b(g,m,_){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,m);if(x===void 0){var A=Object.getPrototypeOf(g);return A===null?void 0:b(A,m,_)}else{if("value"in x)return x.value;var D=x.get;return D===void 0?void 0:D.call(_)}},s=i(4),l=i(27),c=p(l);function p(b){return b&&b.__esModule?b:{default:b}}function d(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function f(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function u(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var y=["height","width"],v=function(b){u(g,b);function g(){return d(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,[{key:"format",value:function(_,x){y.indexOf(_)>-1?x?this.domNode.setAttribute(_,x):this.domNode.removeAttribute(_):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,_,x)}}],[{key:"create",value:function(_){var x=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,_);return x.setAttribute("frameborder","0"),x.setAttribute("allowfullscreen",!0),x.setAttribute("src",this.sanitize(_)),x}},{key:"formats",value:function(_){return y.reduce(function(x,A){return _.hasAttribute(A)&&(x[A]=_.getAttribute(A)),x},{})}},{key:"sanitize",value:function(_){return c.default.sanitize(_)}},{key:"value",value:function(_){return _.getAttribute("src")}}]),g}(s.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var a=function(){function _(x,A){for(var D=0;D<A.length;D++){var T=A[D];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(x,T.key,T)}}return function(x,A,D){return A&&_(x.prototype,A),D&&_(x,D),x}}(),o=function _(x,A,D){x===null&&(x=Function.prototype);var T=Object.getOwnPropertyDescriptor(x,A);if(T===void 0){var j=Object.getPrototypeOf(x);return j===null?void 0:_(j,A,D)}else{if("value"in T)return T.value;var B=T.get;return B===void 0?void 0:B.call(D)}},s=i(35),l=u(s),c=i(5),p=u(c),d=i(9),f=u(d);function u(_){return _&&_.__esModule?_:{default:_}}function y(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}function v(_,x){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:_}function b(_,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);_.prototype=Object.create(x&&x.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(_,x):_.__proto__=x)}var g=function(_){b(x,_);function x(){return y(this,x),v(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return a(x,null,[{key:"create",value:function(D){var T=o(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,D);return typeof D=="string"&&(window.katex.render(D,T,{throwOnError:!1,errorColor:"#f00"}),T.setAttribute("data-value",D)),T}},{key:"value",value:function(D){return D.getAttribute("data-value")}}]),x}(l.default);g.blotName="formula",g.className="ql-formula",g.tagName="SPAN";var m=function(_){b(x,_),a(x,null,[{key:"register",value:function(){p.default.register(g,!0)}}]);function x(){y(this,x);var A=v(this,(x.__proto__||Object.getPrototypeOf(x)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return A}return x}(f.default);n.FormulaBlot=g,n.default=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var a=function(){function D(T,j){for(var B=0;B<j.length;B++){var P=j[B];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(T,P.key,P)}}return function(T,j,B){return j&&D(T.prototype,j),B&&D(T,B),T}}(),o=function D(T,j,B){T===null&&(T=Function.prototype);var P=Object.getOwnPropertyDescriptor(T,j);if(P===void 0){var k=Object.getPrototypeOf(T);return k===null?void 0:D(k,j,B)}else{if("value"in P)return P.value;var E=P.get;return E===void 0?void 0:E.call(B)}},s=i(0),l=v(s),c=i(5),p=v(c),d=i(9),f=v(d),u=i(13),y=v(u);function v(D){return D&&D.__esModule?D:{default:D}}function b(D,T){if(!(D instanceof T))throw new TypeError("Cannot call a class as a function")}function g(D,T){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:D}function m(D,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);D.prototype=Object.create(T&&T.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(D,T):D.__proto__=T)}var _=function(D){m(T,D);function T(){return b(this,T),g(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return a(T,[{key:"replaceWith",value:function(B){this.domNode.textContent=this.domNode.textContent,this.attach(),o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replaceWith",this).call(this,B)}},{key:"highlight",value:function(B){var P=this.domNode.textContent;this.cachedText!==P&&((P.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=B(P),this.domNode.normalize(),this.attach()),this.cachedText=P)}}]),T}(y.default);_.className="ql-syntax";var x=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),A=function(D){m(T,D),a(T,null,[{key:"register",value:function(){p.default.register(x,!0),p.default.register(_,!0)}}]);function T(j,B){b(this,T);var P=g(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,j,B));if(typeof P.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var k=null;return P.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(k),k=setTimeout(function(){P.highlight(),k=null},P.options.interval)}),P.highlight(),P}return a(T,[{key:"highlight",value:function(){var B=this;if(!this.quill.selection.composing){this.quill.update(p.default.sources.USER);var P=this.quill.getSelection();this.quill.scroll.descendants(_).forEach(function(k){k.highlight(B.options.highlight)}),this.quill.update(p.default.sources.SILENT),P!=null&&this.quill.setSelection(P,p.default.sources.SILENT)}}}]),T}(f.default);A.DEFAULTS={highlight:function(){return window.hljs==null?null:function(D){var T=window.hljs.highlightAuto(D);return T.value}}(),interval:1e3},n.CodeBlock=_,n.CodeToken=x,n.default=A},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var a=function T(j,B,P){j===null&&(j=Function.prototype);var k=Object.getOwnPropertyDescriptor(j,B);if(k===void 0){var E=Object.getPrototypeOf(j);return E===null?void 0:T(E,B,P)}else{if("value"in k)return k.value;var C=k.get;return C===void 0?void 0:C.call(P)}},o=function(){function T(j,B){for(var P=0;P<B.length;P++){var k=B[P];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(j,k.key,k)}}return function(j,B,P){return B&&T(j.prototype,B),P&&T(j,P),j}}(),s=i(3),l=b(s),c=i(8),p=b(c),d=i(43),f=b(d),u=i(15),y=i(41),v=b(y);function b(T){return T&&T.__esModule?T:{default:T}}function g(T,j){if(!(T instanceof j))throw new TypeError("Cannot call a class as a function")}function m(T,j){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:T}function _(T,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);T.prototype=Object.create(j&&j.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(T,j):T.__proto__=j)}var x=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],A=function(T){_(j,T);function j(B,P){g(this,j),P.modules.toolbar!=null&&P.modules.toolbar.container==null&&(P.modules.toolbar.container=x);var k=m(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,B,P));return k.quill.container.classList.add("ql-bubble"),k}return o(j,[{key:"extendToolbar",value:function(P){this.tooltip=new D(this.quill,this.options.bounds),this.tooltip.root.appendChild(P.container),this.buildButtons([].slice.call(P.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(P.container.querySelectorAll("select")),v.default)}}]),j}(f.default);A.DEFAULTS=(0,l.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(j){j?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var D=function(T){_(j,T);function j(B,P){g(this,j);var k=m(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,B,P));return k.quill.on(p.default.events.EDITOR_CHANGE,function(E,C,I,V){if(E===p.default.events.SELECTION_CHANGE)if(C!=null&&C.length>0&&V===p.default.sources.USER){k.show(),k.root.style.left="0px",k.root.style.width="",k.root.style.width=k.root.offsetWidth+"px";var ee=k.quill.getLines(C.index,C.length);if(ee.length===1)k.position(k.quill.getBounds(C));else{var te=ee[ee.length-1],Q=k.quill.getIndex(te),Y=Math.min(te.length()-1,C.index+C.length-Q),W=k.quill.getBounds(new u.Range(Q,Y));k.position(W)}}else document.activeElement!==k.textbox&&k.quill.hasFocus()&&k.hide()}),k}return o(j,[{key:"listen",value:function(){var P=this;a(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){P.root.classList.remove("ql-editing")}),this.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!P.root.classList.contains("ql-hidden")){var k=P.quill.getSelection();k!=null&&P.position(P.quill.getBounds(k))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(P){var k=a(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"position",this).call(this,P),E=this.root.querySelector(".ql-tooltip-arrow");if(E.style.marginLeft="",k===0)return k;E.style.marginLeft=-1*k-E.offsetWidth/2+"px"}}]),j}(d.BaseTooltip);D.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=D,n.default=A},function(r,n,i){r.exports=i(63)}]).default})})(Lx);var zL=Lx.exports,$L=Xn&&Xn.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kd=Xn&&Xn.__assign||function(){return Kd=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Kd.apply(this,arguments)},HL=Xn&&Xn.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n},Nh=Xn&&Xn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Vi=Nh(we),WL=Nh($g),Au=Nh(UL),ay=Nh(zL),VL=function(t){$L(e,t);function e(r){var n=t.call(this,r)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(a,o,s,l){var c,p,d,f;a==="text-change"?(p=(c=n).onEditorChangeText)===null||p===void 0||p.call(c,n.editor.root.innerHTML,o,l,n.unprivilegedEditor):a==="selection-change"&&((f=(d=n).onEditorChangeSelection)===null||f===void 0||f.call(d,o,l,n.unprivilegedEditor))};var i=n.isControlled()?r.value:r.defaultValue;return n.value=i??"",n}return e.prototype.validateProps=function(r){var n;if(Vi.default.Children.count(r.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Vi.default.Children.count(r.children)){var i=Vi.default.Children.only(r.children);if(((n=i)===null||n===void 0?void 0:n.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&r.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(r,n){var i=this,a;if(this.validateProps(r),!this.editor||this.state.generation!==n.generation)return!0;if("value"in r){var o=this.getEditorContents(),s=(a=r.value,a??"");this.isEqualValue(s,o)||this.setEditorContents(this.editor,s)}return r.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,r.readOnly),HL(this.cleanProps,this.dirtyProps).some(function(l){return!Au.default(r[l],i.props[l])})},e.prototype.shouldComponentRegenerate=function(r){var n=this;return this.dirtyProps.some(function(i){return!Au.default(r[i],n.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(r,n){var i=this;if(this.editor&&this.shouldComponentRegenerate(r)){var a=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:a,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){var s=this.regenerationSnapshot,a=s.delta,l=s.selection;delete this.regenerationSnapshot,this.instantiateEditor();var c=this.editor;c.setContents(a),oy(function(){return i.setEditorSelection(c,l)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(r,n){var i=new ay.default(r,n);return n.tabIndex!=null&&this.setEditorTabIndex(i,n.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(r){this.unprivilegedEditor=this.makeUnprivilegedEditor(r),r.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(r){r.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(r){return r&&r.ops},e.prototype.isEqualValue=function(r,n){return this.isDelta(r)&&this.isDelta(n)?Au.default(r.ops,n.ops):Au.default(r,n)},e.prototype.setEditorContents=function(r,n){var i=this;this.value=n;var a=this.getEditorSelection();typeof n=="string"?r.setContents(r.clipboard.convert(n)):r.setContents(n),oy(function(){return i.setEditorSelection(r,a)})},e.prototype.setEditorSelection=function(r,n){if(this.selection=n,n){var i=r.getLength();n.index=Math.max(0,Math.min(n.index,i-1)),n.length=Math.max(0,Math.min(n.length,i-1-n.index)),r.setSelection(n)}},e.prototype.setEditorTabIndex=function(r,n){var i,a;!((a=(i=r)===null||i===void 0?void 0:i.scroll)===null||a===void 0)&&a.domNode&&(r.scroll.domNode.tabIndex=n)},e.prototype.setEditorReadOnly=function(r,n){n?r.disable():r.enable()},e.prototype.makeUnprivilegedEditor=function(r){var n=r;return{getHTML:function(){return n.root.innerHTML},getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var r=WL.default.findDOMNode(this.editingArea);if(!r)throw new Error("Cannot find element for editing area");if(r.nodeType===3)throw new Error("Editing area cannot be a text node");return r},e.prototype.renderEditingArea=function(){var r=this,n=this.props,i=n.children,a=n.preserveWhitespace,o=this.state.generation,s={key:o,ref:function(l){r.editingArea=l}};return Vi.default.Children.count(i)?Vi.default.cloneElement(Vi.default.Children.only(i),s):a?Vi.default.createElement("pre",Kd({},s)):Vi.default.createElement("div",Kd({},s))},e.prototype.render=function(){var r;return Vi.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(r=this.props.className,r??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(r,n,i,a){var o,s;if(this.editor){var l=this.isDelta(this.value)?a.getContents():a.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=l,(s=(o=this.props).onChange)===null||s===void 0||s.call(o,r,n,i,a))}},e.prototype.onEditorChangeSelection=function(r,n,i){var a,o,s,l,c,p;if(this.editor){var d=this.getEditorSelection(),f=!d&&r,u=d&&!r;Au.default(r,d)||(this.selection=r,(o=(a=this.props).onChangeSelection)===null||o===void 0||o.call(a,r,n,i),f?(l=(s=this.props).onFocus)===null||l===void 0||l.call(s,r,n,i):u&&((p=(c=this.props).onBlur)===null||p===void 0||p.call(c,d,n,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=ay.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(Vi.default.Component);function oy(t){Promise.resolve().then(t)}var GL=VL;const Px=Xd(GL),fa=Px.Quill;if(fa){const t=fa.import("formats/image");class e extends t{static create(l){var p;const c=super.create(typeof l=="string"?l:l.src);return typeof l=="object"&&(l.alt&&c.setAttribute("alt",l.alt),l.className&&c.setAttribute("class",l.className),(p=l.dataset)!=null&&p.secureMetadata&&c.setAttribute("data-secure-metadata",l.dataset.secureMetadata)),c}static value(l){return{src:l.getAttribute("src"),alt:l.getAttribute("alt"),className:l.getAttribute("class"),dataset:{secureMetadata:l.getAttribute("data-secure-metadata")}}}}e.blotName="image",e.tagName="IMG",fa.register(e,!0);const r=fa.import("parchment"),n=new r.Attributor.Style("width","width"),i=new r.Attributor.Style("float","float"),a=new r.Attributor.Style("margin","margin");fa.register(n,!0),fa.register(i,!0),fa.register(a,!0);const o=fa.import("attributors/style/align");fa.register(o,!0)}const KL={serif:"font-serif",sans:"font-sans",mono:"font-mono"},YL=we.forwardRef(({entry:t,onSave:e,onWordCountChange:r,onCharacterCountChange:n,editorFont:i},a)=>{const[o,s]=we.useState(""),[l,c]=we.useState(""),[p,d]=we.useState(new Date),[f,u]=we.useState(!1),y=we.useRef(null),v=we.useRef("INITIAL_MOUNT"),{addToast:b}=vh(),{key:g,decryptBinary:m}=is(),_=we.useCallback(async(T,j)=>{if(!g||!T.includes("secure-diary-image"))return;const P=j.root.querySelectorAll("img.secure-diary-image");for(let k=0;k<P.length;k++){const E=P[k],C=E.getAttribute("src"),I=E.getAttribute("data-secure-metadata")||E.getAttribute("alt");if(!(C!=null&&C.startsWith("blob:")||!I))try{const V=JSON.parse(I);if(V&&V.path&&V.iv){E.style.opacity="0.5";const{data:ee,error:te}=await Vt.storage.from("diary-images").createSignedUrl(V.path,60);if(te)throw te;const Q=await fetch(ee.signedUrl);if(!Q.ok)throw new Error(`Failed to fetch image blob: ${Q.status}`);const Y=await Q.arrayBuffer(),W=await m(g,Y,V.iv),q=new Blob([W],{type:"image/webp"}),L=URL.createObjectURL(q);E.src=L,E.style.opacity="1"}}catch(V){console.error("Failed to decrypt image in editor",V)}}},[g,m]);we.useEffect(()=>{const T=(t==null?void 0:t.id)||"draft";if(v.current!==T)if(v.current=T,t){s(t.title),c(t.content),d(new Date(t.created_at));const j=t.content.includes("secure-diary-image");u(j),setTimeout(async()=>{y.current&&j&&(await _(t.content,y.current.getEditor()),u(!1))},100)}else s("Today's diary entry..."),c(""),d(new Date),u(!1)},[t,_]),we.useEffect(()=>{const T=l.replace(/<[^>]*>?/gm,""),j=T.trim().split(/\s+/).filter(Boolean),B=j.length===1&&j[0]===""?0:j.length;r(B),n(T.length)},[l,r,n]);const x=we.useCallback(()=>{const T=!l||l.replace(/<(.|\n)*?>/g,"").trim().length===0;if(o.trim()===""||T){b("Please provide a title and some content for your entry.","error");return}e({...t||{},title:o,content:l,created_at:p.toISOString(),tags:t==null?void 0:t.tags,mood:t==null?void 0:t.mood})},[o,l,p,t,e,b]);we.useImperativeHandle(a,()=>({save:x,getEditor:()=>{var T;return(T=y.current)==null?void 0:T.getEditor()}}),[x]);const A=we.useMemo(()=>({toolbar:!1}),[]),D=KL[i];return S.jsxs("div",{className:`h-full flex flex-col paper-canvas rounded-lg overflow-hidden ${D}`,children:[S.jsx("div",{className:"p-4 sm:p-6 md:px-8 border-b border-slate-200/50 dark:border-slate-700/50 flex-shrink-0",children:S.jsx("input",{type:"text",value:o,onChange:T=>s(T.target.value),className:"w-full text-3xl font-bold bg-transparent focus:outline-none focus:ring-0 border-none p-0 text-slate-800 dark:text-slate-100 placeholder:text-slate-400",placeholder:"Today's diary entry..."})}),S.jsxs("div",{className:"flex-grow overflow-y-auto relative",children:[f&&S.jsxs("div",{className:"absolute inset-0 z-10 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm p-8 space-y-6 animate-fade-in",children:[S.jsxs("div",{className:"space-y-3",children:[S.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4 animate-pulse"}),S.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full animate-pulse"}),S.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-5/6 animate-pulse"})]}),S.jsx("div",{className:"h-64 bg-slate-200 dark:bg-slate-700 rounded-lg w-full animate-pulse flex items-center justify-center",children:S.jsx("svg",{className:"w-12 h-12 text-slate-300 dark:text-slate-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),S.jsxs("div",{className:"space-y-3",children:[S.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full animate-pulse"}),S.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-4/5 animate-pulse"})]})]}),S.jsx(Px,{ref:y,theme:"snow",value:l,onChange:c,className:`prose-editor transition-opacity duration-500 ${f?"opacity-0":"opacity-100"}`,placeholder:"Start writing here...",modules:A})]})]})}),sy=t=>new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().split("T")[0],JL=({entries:t,onSelectDate:e,onBack:r})=>{const[n,i]=we.useState(new Date),a=we.useMemo(()=>{const p=new Set;return t.forEach(d=>{p.add(sy(new Date(d.created_at)))}),p},[t]),o=p=>{i(d=>{const f=new Date(d);return f.setMonth(f.getMonth()+p),f})},s=()=>S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsx("button",{onClick:()=>o(-1),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:"<"}),S.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200",children:n.toLocaleString("default",{month:"long",year:"numeric"})}),S.jsx("button",{onClick:()=>o(1),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:">"})]}),l=()=>{const p=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return S.jsx("div",{className:"grid grid-cols-7 gap-1 text-center font-semibold text-slate-500 dark:text-slate-400 text-sm",children:p.map(d=>S.jsx("div",{children:d},d))})},c=()=>{const p=new Date(n.getFullYear(),n.getMonth(),1),d=new Date(n.getFullYear(),n.getMonth()+1,0),f=new Date(p);f.setDate(f.getDate()-p.getDay());const u=new Date(d);u.setDate(u.getDate()+(6-d.getDay()));const y=[];let v=[],b=f;for(;b<=u;){for(let g=0;g<7;g++){const m=new Date(b),_=sy(m),x=a.has(_);v.push(S.jsxs("div",{className:`p-1 h-20 flex flex-col items-center justify-center rounded-lg transition-colors ${m.getMonth()!==n.getMonth()?"text-slate-300 dark:text-slate-600":"text-slate-700 dark:text-slate-300"} ${x?"cursor-pointer bg-indigo-100 hover:bg-indigo-200 dark:bg-indigo-500/20 dark:hover:bg-indigo-500/30":""}`,onClick:x?()=>e(m):void 0,children:[S.jsx("span",{className:`text-sm ${new Date().toDateString()===m.toDateString()?"bg-indigo-500 text-white rounded-full h-6 w-6 flex items-center justify-center":""}`,children:m.getDate()}),x&&S.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 dark:bg-indigo-400 rounded-full mt-1"})]},b.toString())),b.setDate(b.getDate()+1)}y.push(S.jsx("div",{className:"grid grid-cols-7 gap-1",children:v},b.toString())),v=[]}return S.jsx("div",{className:"space-y-1",children:y})};return S.jsxs("div",{className:"animate-fade-in",children:[S.jsxs("button",{onClick:r,className:"mb-6 flex items-center text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors group",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 transform group-hover:-translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Timeline"]}),S.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 sm:p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[s(),l(),S.jsx("div",{className:"mt-2",children:c()})]})]})},XL=["","","","","","","",""],QL=({entries:t,onSelectEntry:e,onBack:r})=>{const[n,i]=we.useState(""),[a,o]=we.useState(null),[s,l]=we.useState([]),[c,p]=we.useState(""),[d,f]=we.useState(""),[u,y]=we.useState(!1),[v,b]=we.useState(!1),[g,m]=we.useState(!1),_=we.useRef(null),x=we.useRef(null),A=we.useRef(null);we.useEffect(()=>{const k=E=>{_.current&&!_.current.contains(E.target)&&y(!1),x.current&&!x.current.contains(E.target)&&b(!1),A.current&&!A.current.contains(E.target)&&m(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const D=we.useMemo(()=>{const k=new Set;return t.forEach(E=>{var C;(C=E.tags)==null||C.forEach(I=>k.add(I))}),Array.from(k).sort()},[t]),T=k=>new DOMParser().parseFromString(k,"text/html").body.textContent||"",j=we.useMemo(()=>n.trim()!==""||a||s.length>0||c||d?t.filter(E=>{const C=n.toLowerCase(),I=n.trim()===""||(E.title||"").toLowerCase().includes(C)||T(E.content||"").toLowerCase().includes(C),V=!a||E.mood===a,ee=s.length===0||s.every(Q=>{var Y;return(Y=E.tags)==null?void 0:Y.includes(Q)});let te=!0;if(c||d){const Q=new Date(E.created_at);if(Q.setHours(0,0,0,0),c){const Y=new Date(c+"T00:00:00");Q<Y&&(te=!1)}if(d){const Y=new Date(d+"T00:00:00");Q>Y&&(te=!1)}}return I&&V&&ee&&te}):[],[t,n,a,s,c,d]),B=k=>{l(E=>E.includes(k)?E.filter(C=>C!==k):[...E,k])},P=n.trim()!==""||a||s.length>0||c||d;return S.jsxs("div",{className:"space-y-6 animate-fade-in",children:[S.jsxs("button",{onClick:r,className:"flex items-center text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors group",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 transform group-hover:-translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Timeline"]}),S.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[S.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Search Past Entries"}),S.jsxs("div",{className:"relative",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400 absolute left-4 top-1/2 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),S.jsx("input",{type:"search",placeholder:"Search by keywords, title, or date...",value:n,onChange:k=>i(k.target.value),className:"w-full pl-11 pr-4 py-3 border border-slate-300 dark:border-slate-600 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base dark:bg-slate-700 dark:text-slate-200 dark:placeholder-slate-400","aria-label":"Search diary entries"})]}),S.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[S.jsxs("div",{className:"relative",ref:_,children:[S.jsxs("button",{onClick:()=>y(k=>!k),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-slate-100 dark:bg-slate-700 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),S.jsx("span",{children:"Date Range"})]}),u&&S.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-slate-800 p-4 rounded-lg shadow-xl border dark:border-slate-700 z-10 w-64 space-y-3",children:[S.jsxs("div",{children:[S.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"From"}),S.jsx("input",{type:"date",value:c,onChange:k=>p(k.target.value),className:"w-full mt-1 border border-slate-300 rounded-md p-1.5 text-sm dark:bg-slate-700 dark:border-slate-600 dark:[color-scheme:dark]"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"To"}),S.jsx("input",{type:"date",value:d,onChange:k=>f(k.target.value),className:"w-full mt-1 border border-slate-300 rounded-md p-1.5 text-sm dark:bg-slate-700 dark:border-slate-600 dark:[color-scheme:dark]"})]})]})]}),S.jsxs("div",{className:"relative",ref:x,children:[S.jsxs("button",{onClick:()=>b(k=>!k),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-slate-100 dark:bg-slate-700 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600",children:[a?S.jsx("span",{className:"text-lg",children:a}):S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-.464 5.535a.5.5 S0 01.708 0 5 5 0 01-6.488 0 .5.5 0 01.708-.707A4 4 0 0013 12.5a.5.5 0 01.535.464z",clipRule:"evenodd"})}),S.jsx("span",{children:"Mood"})]}),v&&S.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-slate-800 p-2 rounded-lg shadow-xl border dark:border-slate-700 z-10 grid grid-cols-4 gap-2 w-64",children:XL.map(k=>S.jsx("button",{type:"button",onClick:()=>{o(k===a?null:k),b(!1)},className:`text-3xl p-2 rounded-md transition-all ${a===k?"bg-indigo-100 dark:bg-indigo-500/50 scale-110":"hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:k},k))})]}),S.jsxs("div",{className:"relative",ref:A,children:[S.jsxs("button",{onClick:()=>m(k=>!k),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium bg-slate-100 dark:bg-slate-700 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{d:"M5.5 16a3.5 3.5 0 01-3.5-3.5V5.5A3.5 3.5 0 015.5 2h5.086a2 2 0 011.414.586l4.414 4.414a2 2 0 01.586 1.414V12.5A3.5 3.5 0 0113.5 16h-8z"})}),S.jsx("span",{children:"Tags"})]}),g&&S.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-slate-800 p-3 rounded-lg shadow-xl border dark:border-slate-700 z-10 w-64 max-h-60 overflow-y-auto",children:D.length>0?S.jsx("div",{className:"flex flex-col gap-2",children:D.map(k=>S.jsxs("label",{className:"flex items-center gap-2 p-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer",children:[S.jsx("input",{type:"checkbox",checked:s.includes(k),onChange:()=>B(k),className:"h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-slate-300 dark:border-slate-600 dark:bg-slate-900 dark:checked:bg-indigo-500"}),S.jsx("span",{className:"text-sm",children:k})]},k))}):S.jsx("p",{className:"text-sm text-slate-500",children:"No tags found."})})]})]})]}),S.jsxs("div",{children:[S.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Search Results"}),n.length>0&&S.jsx("p",{className:"text-xs text-slate-500 mb-4 bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded border border-yellow-200 dark:border-yellow-800",children:"Note: Text search only searches entries that have been viewed (decrypted) in this session. Tags and Moods search all entries."}),P?j.length>0?S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(k=>S.jsxs("div",{onClick:()=>e(k.id),className:"bg-white dark:bg-slate-800 p-5 rounded-lg shadow-sm hover:shadow-lg transition-shadow duration-300 cursor-pointer border border-slate-200 dark:border-slate-700 flex flex-col",children:[S.jsxs("div",{className:"flex justify-between items-start gap-3",children:[k.isDecrypted?S.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100 line-clamp-1",children:k.title}):S.jsx("div",{className:"h-6 bg-slate-200 dark:bg-slate-700 rounded w-3/4 animate-pulse"}),k.mood&&S.jsx("span",{className:"text-2xl","aria-label":`Mood: ${k.mood}`,children:k.mood})]}),S.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1 mb-3",title:new Date(k.created_at).toLocaleString(),children:dx(k.created_at)}),S.jsx("div",{className:"flex-grow",children:k.isDecrypted?S.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 line-clamp-3",children:T(k.content)}):S.jsxs("div",{className:"space-y-2 animate-pulse",children:[S.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-full"}),S.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-5/6"})]})})]},k.id))}):S.jsxs("div",{className:"text-center py-16",children:[S.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-300",children:"No Entries Found"}),S.jsx("p",{className:"mt-2 text-slate-500 dark:text-slate-400",children:"Try adjusting your search or filter criteria."})]}):S.jsx("div",{className:"text-center py-16",children:S.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Use the search bar or filters above to find your entries."})})]})]})},ZL="modulepreload",eP=function(t){return"/diary/"+t},ly={},j1=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=eP(l),l in ly)return;ly[l]=!0;const c=l.endsWith(".css"),p=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":ZL,c||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),c)return new Promise((f,u)=>{d.addEventListener("load",f),d.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};function qt(t){"@babel/helpers - typeof";return qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(t)}var pn=Uint8Array,Zn=Uint16Array,om=Int32Array,Ah=new pn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Eh=new pn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),T1=new pn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Cx=function(t,e){for(var r=new Zn(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new om(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return{b:r,r:i}},Rx=Cx(Ah,2),Ix=Rx.b,L1=Rx.r;Ix[28]=258,L1[258]=28;var Dx=Cx(Eh,0),tP=Dx.b,uy=Dx.r,P1=new Zn(32768);for(var sr=0;sr<32768;++sr){var Ha=(sr&43690)>>1|(sr&21845)<<1;Ha=(Ha&52428)>>2|(Ha&13107)<<2,Ha=(Ha&61680)>>4|(Ha&3855)<<4,P1[sr]=((Ha&65280)>>8|(Ha&255)<<8)>>1}var Zi=function(t,e,r){for(var n=t.length,i=0,a=new Zn(e);i<n;++i)t[i]&&++a[t[i]-1];var o=new Zn(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(r){s=new Zn(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var c=i<<4|t[i],p=e-t[i],d=o[t[i]-1]++<<p,f=d|(1<<p)-1;d<=f;++d)s[P1[d]>>l]=c}else for(s=new Zn(n),i=0;i<n;++i)t[i]&&(s[i]=P1[o[t[i]-1]++]>>15-t[i]);return s},co=new pn(288);for(var sr=0;sr<144;++sr)co[sr]=8;for(var sr=144;sr<256;++sr)co[sr]=9;for(var sr=256;sr<280;++sr)co[sr]=7;for(var sr=280;sr<288;++sr)co[sr]=8;var gc=new pn(32);for(var sr=0;sr<32;++sr)gc[sr]=5;var rP=Zi(co,9,0),nP=Zi(co,9,1),iP=Zi(gc,5,0),aP=Zi(gc,5,1),a0=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Ni=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},o0=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},sm=function(t){return(t+7)/8|0},Mx=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new pn(t.subarray(e,r))},oP=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Li=function(t,e,r){var n=new Error(e||oP[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Li),!r)throw n;return n},sP=function(t,e,r,n){var i=t.length,a=0;if(!i||e.f&&!e.l)return r||new pn(0);var o=!r,s=o||e.i!=2,l=e.i;o&&(r=new pn(i*3));var c=function(xe){var je=r.length;if(xe>je){var Ee=new pn(Math.max(je*2,xe));Ee.set(r),r=Ee}},p=e.f||0,d=e.p||0,f=e.b||0,u=e.l,y=e.d,v=e.m,b=e.n,g=i*8;do{if(!u){p=Ni(t,d,1);var m=Ni(t,d+1,3);if(d+=3,m)if(m==1)u=nP,y=aP,v=9,b=5;else if(m==2){var D=Ni(t,d,31)+257,T=Ni(t,d+10,15)+4,j=D+Ni(t,d+5,31)+1;d+=14;for(var B=new pn(j),P=new pn(19),k=0;k<T;++k)P[T1[k]]=Ni(t,d+k*3,7);d+=T*3;for(var E=a0(P),C=(1<<E)-1,I=Zi(P,E,1),k=0;k<j;){var V=I[Ni(t,d,C)];d+=V&15;var _=V>>4;if(_<16)B[k++]=_;else{var ee=0,te=0;for(_==16?(te=3+Ni(t,d,3),d+=2,ee=B[k-1]):_==17?(te=3+Ni(t,d,7),d+=3):_==18&&(te=11+Ni(t,d,127),d+=7);te--;)B[k++]=ee}}var Q=B.subarray(0,D),Y=B.subarray(D);v=a0(Q),b=a0(Y),u=Zi(Q,v,1),y=Zi(Y,b,1)}else Li(1);else{var _=sm(d)+4,x=t[_-4]|t[_-3]<<8,A=_+x;if(A>i){l&&Li(0);break}s&&c(f+x),r.set(t.subarray(_,A),f),e.b=f+=x,e.p=d=A*8,e.f=p;continue}if(d>g){l&&Li(0);break}}s&&c(f+131072);for(var W=(1<<v)-1,q=(1<<b)-1,L=d;;L=d){var ee=u[o0(t,d)&W],M=ee>>4;if(d+=ee&15,d>g){l&&Li(0);break}if(ee||Li(2),M<256)r[f++]=M;else if(M==256){L=d,u=null;break}else{var U=M-254;if(M>264){var k=M-257,H=Ah[k];U=Ni(t,d,(1<<H)-1)+Ix[k],d+=H}var F=y[o0(t,d)&q],J=F>>4;F||Li(3),d+=F&15;var Y=tP[J];if(J>3){var H=Eh[J];Y+=o0(t,d)&(1<<H)-1,d+=H}if(d>g){l&&Li(0);break}s&&c(f+131072);var re=f+U;if(f<Y){var ne=a-Y,de=Math.min(Y,re);for(ne+f<0&&Li(3);f<de;++f)r[f]=n[ne+f]}for(;f<re;++f)r[f]=r[f-Y]}}e.l=u,e.p=L,e.b=f,e.f=p,u&&(p=1,e.m=v,e.d=y,e.n=b)}while(!p);return f!=r.length&&o?Mx(r,0,f):r.subarray(0,f)},da=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Eu=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},s0=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,a=r.slice();if(!i)return{t:Fx,l:0};if(i==1){var o=new pn(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(A,D){return A.f-D.f}),r.push({s:-1,f:25001});var s=r[0],l=r[1],c=0,p=1,d=2;for(r[0]={s:-1,f:s.f+l.f,l:s,r:l};p!=i-1;)s=r[r[c].f<r[d].f?c++:d++],l=r[c!=p&&r[c].f<r[d].f?c++:d++],r[p++]={s:-1,f:s.f+l.f,l:s,r:l};for(var f=a[0].s,n=1;n<i;++n)a[n].s>f&&(f=a[n].s);var u=new Zn(f+1),y=C1(r[p-1],u,0);if(y>e){var n=0,v=0,b=y-e,g=1<<b;for(a.sort(function(D,T){return u[T.s]-u[D.s]||D.f-T.f});n<i;++n){var m=a[n].s;if(u[m]>e)v+=g-(1<<y-u[m]),u[m]=e;else break}for(v>>=b;v>0;){var _=a[n].s;u[_]<e?v-=1<<e-u[_]++-1:++n}for(;n>=0&&v;--n){var x=a[n].s;u[x]==e&&(--u[x],++v)}y=e}return{t:new pn(u),l:y}},C1=function(t,e,r){return t.s==-1?Math.max(C1(t.l,e,r+1),C1(t.r,e,r+1)):e[t.s]=r},cy=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Zn(++e),n=0,i=t[0],a=1,o=function(l){r[n++]=l},s=1;s<=e;++s)if(t[s]==i&&s!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=t[s]}return{c:r.subarray(0,n),n:e}},Ou=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},Bx=function(t,e,r){var n=r.length,i=sm(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var a=0;a<n;++a)t[i+a+4]=r[a];return(i+4+n)*8},fy=function(t,e,r,n,i,a,o,s,l,c,p){da(e,p++,r),++i[256];for(var d=s0(i,15),f=d.t,u=d.l,y=s0(a,15),v=y.t,b=y.l,g=cy(f),m=g.c,_=g.n,x=cy(v),A=x.c,D=x.n,T=new Zn(19),j=0;j<m.length;++j)++T[m[j]&31];for(var j=0;j<A.length;++j)++T[A[j]&31];for(var B=s0(T,7),P=B.t,k=B.l,E=19;E>4&&!P[T1[E-1]];--E);var C=c+5<<3,I=Ou(i,co)+Ou(a,gc)+o,V=Ou(i,f)+Ou(a,v)+o+14+3*E+Ou(T,P)+2*T[16]+3*T[17]+7*T[18];if(l>=0&&C<=I&&C<=V)return Bx(e,p,t.subarray(l,l+c));var ee,te,Q,Y;if(da(e,p,1+(V<I)),p+=2,V<I){ee=Zi(f,u,0),te=f,Q=Zi(v,b,0),Y=v;var W=Zi(P,k,0);da(e,p,_-257),da(e,p+5,D-1),da(e,p+10,E-4),p+=14;for(var j=0;j<E;++j)da(e,p+3*j,P[T1[j]]);p+=3*E;for(var q=[m,A],L=0;L<2;++L)for(var M=q[L],j=0;j<M.length;++j){var U=M[j]&31;da(e,p,W[U]),p+=P[U],U>15&&(da(e,p,M[j]>>5&127),p+=M[j]>>12)}}else ee=rP,te=co,Q=iP,Y=gc;for(var j=0;j<s;++j){var H=n[j];if(H>255){var U=H>>18&31;Eu(e,p,ee[U+257]),p+=te[U+257],U>7&&(da(e,p,H>>23&31),p+=Ah[U]);var F=H&31;Eu(e,p,Q[F]),p+=Y[F],F>3&&(Eu(e,p,H>>5&8191),p+=Eh[F])}else Eu(e,p,ee[H]),p+=te[H]}return Eu(e,p,ee[256]),p+te[256]},lP=new om([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Fx=new pn(0),uP=function(t,e,r,n,i,a){var o=a.z||t.length,s=new pn(n+o+5*(1+Math.ceil(o/7e3))+i),l=s.subarray(n,s.length-i),c=a.l,p=(a.r||0)&7;if(e){p&&(l[0]=a.r>>3);for(var d=lP[e-1],f=d>>13,u=d&8191,y=(1<<r)-1,v=a.p||new Zn(32768),b=a.h||new Zn(y+1),g=Math.ceil(r/3),m=2*g,_=function(Me){return(t[Me]^t[Me+1]<<g^t[Me+2]<<m)&y},x=new om(25e3),A=new Zn(288),D=new Zn(32),T=0,j=0,B=a.i||0,P=0,k=a.w||0,E=0;B+2<o;++B){var C=_(B),I=B&32767,V=b[C];if(v[I]=V,b[C]=I,k<=B){var ee=o-B;if((T>7e3||P>24576)&&(ee>423||!c)){p=fy(t,l,0,x,A,D,j,P,E,B-E,p),P=T=j=0,E=B;for(var te=0;te<286;++te)A[te]=0;for(var te=0;te<30;++te)D[te]=0}var Q=2,Y=0,W=u,q=I-V&32767;if(ee>2&&C==_(B-q))for(var L=Math.min(f,ee)-1,M=Math.min(32767,B),U=Math.min(258,ee);q<=M&&--W&&I!=V;){if(t[B+Q]==t[B+Q-q]){for(var H=0;H<U&&t[B+H]==t[B+H-q];++H);if(H>Q){if(Q=H,Y=q,H>L)break;for(var F=Math.min(q,H-2),J=0,te=0;te<F;++te){var re=B-q+te&32767,ne=v[re],de=re-ne&32767;de>J&&(J=de,V=re)}}}I=V,V=v[I],q+=I-V&32767}if(Y){x[P++]=268435456|L1[Q]<<18|uy[Y];var xe=L1[Q]&31,je=uy[Y]&31;j+=Ah[xe]+Eh[je],++A[257+xe],++D[je],k=B+Q,++T}else x[P++]=t[B],++A[t[B]]}}for(B=Math.max(B,k);B<o;++B)x[P++]=t[B],++A[t[B]];p=fy(t,l,c,x,A,D,j,P,E,B-E,p),c||(a.r=p&7|l[p/8|0]<<3,p-=7,a.h=b,a.p=v,a.i=B,a.w=k)}else{for(var B=a.w||0;B<o+c;B+=65535){var Ee=B+65535;Ee>=o&&(l[p/8|0]=c,Ee=o),p=Bx(l,p+1,t.subarray(B,Ee))}a.i=o}return Mx(s,0,n+sm(p)+i)},qx=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,a=r.length|0,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=n+=r[o];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},cP=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new pn(a.length+t.length);o.set(a),o.set(t,a.length),t=o,i.w=a.length}return uP(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},Ux=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},fP=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=qx();i.p(e.dictionary),Ux(t,2,i.d())}},dP=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Li(6,"invalid zlib data"),(t[1]>>5&1)==1&&Li(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function R1(t,e){e||(e={});var r=qx();r.p(t);var n=cP(t,e,e.dictionary?6:2,4);return fP(n,e),Ux(n,n.length-4,r.d()),n}function hP(t,e){return sP(t.subarray(dP(t),-4),{i:2},e,e)}var pP=typeof TextDecoder<"u"&&new TextDecoder,gP=0;try{pP.decode(Fx,{stream:!0}),gP=1}catch{}var ht=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function l0(){ht.console&&typeof ht.console.log=="function"&&ht.console.log.apply(ht.console,arguments)}var Jt={log:l0,warn:function(t){ht.console&&(typeof ht.console.warn=="function"?ht.console.warn.apply(ht.console,arguments):l0.call(null,arguments))},error:function(t){ht.console&&(typeof ht.console.error=="function"?ht.console.error.apply(ht.console,arguments):l0(t))}};function u0(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Io(n.response,e,r)},n.onerror=function(){Jt.error("could not download file")},n.send()}function dy(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function zf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Vu,I1,Io=ht.saveAs||((typeof window>"u"?"undefined":qt(window))!=="object"||window!==ht?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=ht.URL||ht.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?dy(i.href)?u0(t,e,r):zf(i,i.target="_blank"):zf(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){zf(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(dy(t))u0(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){zf(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:qt(a)!=="object"&&(Jt.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return u0(t,e,r);var i=t.type==="application/octet-stream",a=/constructor/i.test(ht.HTMLElement)||ht.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":qt(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var p=s.result;p=o?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=p:location=p,n=null},s.readAsDataURL(t)}else{var l=ht.URL||ht.webkitURL,c=l.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function zx(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,a=r[n].process,o=i.exec(t);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+s+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function c0(t,e){var r=t[0],n=t[1],i=t[2],a=t[3];r=un(r,n,i,a,e[0],7,-680876936),a=un(a,r,n,i,e[1],12,-389564586),i=un(i,a,r,n,e[2],17,606105819),n=un(n,i,a,r,e[3],22,-1044525330),r=un(r,n,i,a,e[4],7,-176418897),a=un(a,r,n,i,e[5],12,1200080426),i=un(i,a,r,n,e[6],17,-1473231341),n=un(n,i,a,r,e[7],22,-45705983),r=un(r,n,i,a,e[8],7,1770035416),a=un(a,r,n,i,e[9],12,-1958414417),i=un(i,a,r,n,e[10],17,-42063),n=un(n,i,a,r,e[11],22,-1990404162),r=un(r,n,i,a,e[12],7,1804603682),a=un(a,r,n,i,e[13],12,-40341101),i=un(i,a,r,n,e[14],17,-1502002290),r=cn(r,n=un(n,i,a,r,e[15],22,1236535329),i,a,e[1],5,-165796510),a=cn(a,r,n,i,e[6],9,-1069501632),i=cn(i,a,r,n,e[11],14,643717713),n=cn(n,i,a,r,e[0],20,-373897302),r=cn(r,n,i,a,e[5],5,-701558691),a=cn(a,r,n,i,e[10],9,38016083),i=cn(i,a,r,n,e[15],14,-660478335),n=cn(n,i,a,r,e[4],20,-405537848),r=cn(r,n,i,a,e[9],5,568446438),a=cn(a,r,n,i,e[14],9,-1019803690),i=cn(i,a,r,n,e[3],14,-187363961),n=cn(n,i,a,r,e[8],20,1163531501),r=cn(r,n,i,a,e[13],5,-1444681467),a=cn(a,r,n,i,e[2],9,-51403784),i=cn(i,a,r,n,e[7],14,1735328473),r=fn(r,n=cn(n,i,a,r,e[12],20,-1926607734),i,a,e[5],4,-378558),a=fn(a,r,n,i,e[8],11,-2022574463),i=fn(i,a,r,n,e[11],16,1839030562),n=fn(n,i,a,r,e[14],23,-35309556),r=fn(r,n,i,a,e[1],4,-1530992060),a=fn(a,r,n,i,e[4],11,1272893353),i=fn(i,a,r,n,e[7],16,-155497632),n=fn(n,i,a,r,e[10],23,-1094730640),r=fn(r,n,i,a,e[13],4,681279174),a=fn(a,r,n,i,e[0],11,-358537222),i=fn(i,a,r,n,e[3],16,-722521979),n=fn(n,i,a,r,e[6],23,76029189),r=fn(r,n,i,a,e[9],4,-640364487),a=fn(a,r,n,i,e[12],11,-421815835),i=fn(i,a,r,n,e[15],16,530742520),r=dn(r,n=fn(n,i,a,r,e[2],23,-995338651),i,a,e[0],6,-198630844),a=dn(a,r,n,i,e[7],10,1126891415),i=dn(i,a,r,n,e[14],15,-1416354905),n=dn(n,i,a,r,e[5],21,-57434055),r=dn(r,n,i,a,e[12],6,1700485571),a=dn(a,r,n,i,e[3],10,-1894986606),i=dn(i,a,r,n,e[10],15,-1051523),n=dn(n,i,a,r,e[1],21,-2054922799),r=dn(r,n,i,a,e[8],6,1873313359),a=dn(a,r,n,i,e[15],10,-30611744),i=dn(i,a,r,n,e[6],15,-1560198380),n=dn(n,i,a,r,e[13],21,1309151649),r=dn(r,n,i,a,e[4],6,-145523070),a=dn(a,r,n,i,e[11],10,-1120210379),i=dn(i,a,r,n,e[2],15,718787259),n=dn(n,i,a,r,e[9],21,-343485551),t[0]=Za(r,t[0]),t[1]=Za(n,t[1]),t[2]=Za(i,t[2]),t[3]=Za(a,t[3])}function Oh(t,e,r,n,i,a){return e=Za(Za(e,t),Za(n,a)),Za(e<<i|e>>>32-i,r)}function un(t,e,r,n,i,a,o){return Oh(e&r|~e&n,t,e,i,a,o)}function cn(t,e,r,n,i,a,o){return Oh(e&n|r&~n,t,e,i,a,o)}function fn(t,e,r,n,i,a,o){return Oh(e^r^n,t,e,i,a,o)}function dn(t,e,r,n,i,a,o){return Oh(r^(e|~n),t,e,i,a,o)}function $x(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)c0(n,mP(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(c0(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,c0(n,i),n}function mP(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Vu=ht.atob.bind(ht),I1=ht.btoa.bind(ht);var hy="0123456789abcdef".split("");function vP(t){for(var e="",r=0;r<4;r++)e+=hy[t>>8*r+4&15]+hy[t>>8*r&15];return e}function yP(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function D1(t){return $x(t).map(yP).join("")}var wP=function(t){for(var e=0;e<t.length;e++)t[e]=vP(t[e]);return t.join("")}($x("hello"))!="5d41402abc4b2a76b9719d911017c592";function Za(t,e){if(wP){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function M1(t,e){var r,n,i,a;if(t!==r){for(var o=(i=t,a=1+(256/t.length>>0),new Array(a+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var c=0;for(l=0;l<256;l++){var p=s[l];c=(c+p+o.charCodeAt(l))%256,s[l]=s[c],s[c]=p}r=t,n=s}else s=n;var d=e.length,f=0,u=0,y="";for(l=0;l<d;l++)u=(u+(p=s[f=(f+1)%256]))%256,s[f]=s[u],s[u]=p,o=s[(s[f]+s[u])%256],y+=String.fromCharCode(e.charCodeAt(l)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var py={print:4,modify:8,copy:16,"annot-forms":32};function zs(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(s){if(py.perm!==void 0)throw new Error("Invalid permission: "+s);i+=py[s]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=D1(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=M1(this.encryptionKey,this.padding)}function $s(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[n]}return e}function gy(t){if(qt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var a=Math.random().toString(35);return e[r][a]=[n,!!i],a},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[r]){var o=e[r][a];try{o[0].apply(t,n)}catch(s){ht.console&&Jt.error("jsPDF PubSub Error",s.message,s)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Yd(t){if(!(this instanceof Yd))return new Yd(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Hx(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Fo(t,e,r,n,i){if(!(this instanceof Fo))return new Fo(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,Hx.call(this,n,i)}function rl(t,e,r,n,i){if(!(this instanceof rl))return new rl(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Hx.call(this,n,i)}function ft(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],o=[],s=1,l=16,c="S",p=null;qt(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,a=t.compress||t.compressPdf||a,(p=t.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),s=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(a===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,f={},u={internal:{},__private__:{}};u.__private__.PubSub=gy;var y="1.3",v=u.__private__.getPdfVersion=function(){return y};u.__private__.setPdfVersion=function(N){y=N};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};u.__private__.getPageFormats=function(){return b};var g=u.__private__.getPageFormat=function(N){return b[N]};i=i||"a4";var m={COMPAT:"compat",ADVANCED:"advanced"},_=m.COMPAT;function x(){this.saveGraphicsState(),ae(new be(ze,0,0,-ze,0,ja()*ze).toString()+" cm"),this.setFontSize(this.getFontSize()/ze),c="n",_=m.ADVANCED}function A(){this.restoreGraphicsState(),c="S",_=m.COMPAT}var D=u.__private__.combineFontStyleAndFontWeight=function(N,$){if(N=="bold"&&$=="normal"||N=="bold"&&$==400||N=="normal"&&$=="italic"||N=="bold"&&$=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $&&(N=$==400||$==="normal"?N==="italic"?"italic":"normal":$!=700&&$!=="bold"||N!=="normal"?($==700?"bold":$)+""+N:"bold"),N};u.advancedAPI=function(N){var $=_===m.COMPAT;return $&&x.call(this),typeof N!="function"||(N(this),$&&A.call(this)),this},u.compatAPI=function(N){var $=_===m.ADVANCED;return $&&A.call(this),typeof N!="function"||(N(this),$&&x.call(this)),this},u.isAdvancedAPI=function(){return _===m.ADVANCED};var T,j=function(N){if(_!==m.ADVANCED)throw new Error(N+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=u.roundToPrecision=u.__private__.roundToPrecision=function(N,$){var oe=e||$;if(isNaN(N)||isNaN(oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return N.toFixed(oe).replace(/0+$/,"")};T=u.hpf=u.__private__.hpf=typeof l=="number"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return B(N,l)}:l==="smart"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return B(N,N>-1&&N<1?16:5)}:function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return B(N,16)};var P=u.f2=u.__private__.f2=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f2");return B(N,2)},k=u.__private__.f3=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f3");return B(N,3)},E=u.scale=u.__private__.scale=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.scale");return _===m.COMPAT?N*ze:_===m.ADVANCED?N:void 0},C=function(N){return _===m.COMPAT?ja()-N:_===m.ADVANCED?N:void 0},I=function(N){return E(C(N))};u.__private__.setPrecision=u.setPrecision=function(N){typeof parseInt(N,10)=="number"&&(e=parseInt(N,10))};var V,ee="00000000000000000000000000000000",te=u.__private__.getFileId=function(){return ee},Q=u.__private__.setFileId=function(N){return ee=N!==void 0&&/^[a-fA-F0-9]{32}$/.test(N)?N.toUpperCase():ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(an=new zs(p.userPermissions,p.userPassword,p.ownerPassword,ee)),ee};u.setFileId=function(N){return Q(N),this},u.getFileId=function(){return te()};var Y=u.__private__.convertDateToPDFDate=function(N){var $=N.getTimezoneOffset(),oe=$<0?"+":"-",ue=Math.floor(Math.abs($/60)),_e=Math.abs($%60),Oe=[oe,U(ue),"'",U(_e),"'"].join("");return["D:",N.getFullYear(),U(N.getMonth()+1),U(N.getDate()),U(N.getHours()),U(N.getMinutes()),U(N.getSeconds()),Oe].join("")},W=u.__private__.convertPDFDateToDate=function(N){var $=parseInt(N.substr(2,4),10),oe=parseInt(N.substr(6,2),10)-1,ue=parseInt(N.substr(8,2),10),_e=parseInt(N.substr(10,2),10),Oe=parseInt(N.substr(12,2),10),De=parseInt(N.substr(14,2),10);return new Date($,oe,ue,_e,Oe,De,0)},q=u.__private__.setCreationDate=function(N){var $;if(N===void 0&&(N=new Date),N instanceof Date)$=Y(N);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(N))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$=N}return V=$},L=u.__private__.getCreationDate=function(N){var $=V;return N==="jsDate"&&($=W(V)),$};u.setCreationDate=function(N){return q(N),this},u.getCreationDate=function(N){return L(N)};var M,U=u.__private__.padd2=function(N){return("0"+parseInt(N)).slice(-2)},H=u.__private__.padd2Hex=function(N){return("00"+(N=N.toString())).substr(N.length)},F=0,J=[],re=[],ne=0,de=[],xe=[],je=!1,Ee=re,Me=function(){F=0,ne=0,re=[],J=[],de=[],Kt=pt(),_t=pt()};u.__private__.setCustomOutputDestination=function(N){je=!0,Ee=N};var Se=function(N){je||(Ee=N)};u.__private__.resetCustomOutputDestination=function(){je=!1,Ee=re};var ae=u.__private__.out=function(N){return N=N.toString(),ne+=N.length+1,Ee.push(N),Ee},Ve=u.__private__.write=function(N){return ae(arguments.length===1?N.toString():Array.prototype.join.call(arguments," "))},pe=u.__private__.getArrayBuffer=function(N){for(var $=N.length,oe=new ArrayBuffer($),ue=new Uint8Array(oe);$--;)ue[$]=N.charCodeAt($);return oe},se=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];u.__private__.getStandardFonts=function(){return se};var he=t.fontSize||16;u.__private__.setFontSize=u.setFontSize=function(N){return he=_===m.ADVANCED?N/ze:N,this};var ye,ge=u.__private__.getFontSize=u.getFontSize=function(){return _===m.COMPAT?he:he*ze},Ie=t.R2L||!1;u.__private__.setR2L=u.setR2L=function(N){return Ie=N,this},u.__private__.getR2L=u.getR2L=function(){return Ie};var qe,Ue=u.__private__.setZoomMode=function(N){var $=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(N))ye=N;else if(isNaN(N)){if($.indexOf(N)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+N+'" is not recognized.');ye=N}else ye=parseInt(N,10)};u.__private__.getZoomMode=function(){return ye};var rt,lt=u.__private__.setPageMode=function(N){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(N)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+N+'" is not recognized.');qe=N};u.__private__.getPageMode=function(){return qe};var at=u.__private__.setLayoutMode=function(N){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(N)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+N+'" is not recognized.');rt=N};u.__private__.getLayoutMode=function(){return rt},u.__private__.setDisplayMode=u.setDisplayMode=function(N,$,oe){return Ue(N),at($),lt(oe),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};u.__private__.getDocumentProperty=function(N){if(Object.keys(ot).indexOf(N)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[N]},u.__private__.getDocumentProperties=function(){return ot},u.__private__.setDocumentProperties=u.setProperties=u.setDocumentProperties=function(N){for(var $ in ot)ot.hasOwnProperty($)&&N[$]&&(ot[$]=N[$]);return this},u.__private__.setDocumentProperty=function(N,$){if(Object.keys(ot).indexOf(N)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[N]=$};var tt,ze,br,bt,zr,xt={},jt={},rn=[],Nt={},yi={},Dt={},$r={},zn=null,It=0,dt=[],Et=new gy(u),zt=t.hotfixes||[],Xt={},On={},nn=[],be=function N($,oe,ue,_e,Oe,De){if(!(this instanceof N))return new N($,oe,ue,_e,Oe,De);isNaN($)&&($=1),isNaN(oe)&&(oe=0),isNaN(ue)&&(ue=0),isNaN(_e)&&(_e=1),isNaN(Oe)&&(Oe=0),isNaN(De)&&(De=0),this._matrix=[$,oe,ue,_e,Oe,De]};Object.defineProperty(be.prototype,"sx",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(be.prototype,"shy",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(be.prototype,"shx",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(be.prototype,"sy",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(be.prototype,"tx",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(be.prototype,"ty",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(be.prototype,"a",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(be.prototype,"b",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(be.prototype,"c",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(be.prototype,"d",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(be.prototype,"e",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(be.prototype,"f",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(be.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(be.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(be.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(be.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),be.prototype.join=function(N){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(N)},be.prototype.multiply=function(N){var $=N.sx*this.sx+N.shy*this.shx,oe=N.sx*this.shy+N.shy*this.sy,ue=N.shx*this.sx+N.sy*this.shx,_e=N.shx*this.shy+N.sy*this.sy,Oe=N.tx*this.sx+N.ty*this.shx+this.tx,De=N.tx*this.shy+N.ty*this.sy+this.ty;return new be($,oe,ue,_e,Oe,De)},be.prototype.decompose=function(){var N=this.sx,$=this.shy,oe=this.shx,ue=this.sy,_e=this.tx,Oe=this.ty,De=Math.sqrt(N*N+$*$),Ke=(N/=De)*oe+($/=De)*ue;oe-=N*Ke,ue-=$*Ke;var st=Math.sqrt(oe*oe+ue*ue);return Ke/=st,N*(ue/=st)<$*(oe/=st)&&(N=-N,$=-$,Ke=-Ke,De=-De),{scale:new be(De,0,0,st,0,0),translate:new be(1,0,0,1,_e,Oe),rotate:new be(N,$,-$,N,0,0),skew:new be(1,0,Ke,1,0,0)}},be.prototype.toString=function(N){return this.join(" ")},be.prototype.inversed=function(){var N=this.sx,$=this.shy,oe=this.shx,ue=this.sy,_e=this.tx,Oe=this.ty,De=1/(N*ue-$*oe),Ke=ue*De,st=-$*De,yt=-oe*De,mt=N*De;return new be(Ke,st,yt,mt,-Ke*_e-yt*Oe,-st*_e-mt*Oe)},be.prototype.applyToPoint=function(N){var $=N.x*this.sx+N.y*this.shx+this.tx,oe=N.x*this.shy+N.y*this.sy+this.ty;return new ps($,oe)},be.prototype.applyToRectangle=function(N){var $=this.applyToPoint(N),oe=this.applyToPoint(new ps(N.x+N.w,N.y+N.h));return new Hl($.x,$.y,oe.x-$.x,oe.y-$.y)},be.prototype.clone=function(){var N=this.sx,$=this.shy,oe=this.shx,ue=this.sy,_e=this.tx,Oe=this.ty;return new be(N,$,oe,ue,_e,Oe)},u.Matrix=be;var Be=u.matrixMult=function(N,$){return $.multiply(N)},Qe=new be(1,0,0,1,0,0);u.unitMatrix=u.identityMatrix=Qe;var Je=function(N,$){if(!yi[N]){var oe=($ instanceof Fo?"Sh":"P")+(Object.keys(Nt).length+1).toString(10);$.id=oe,yi[N]=oe,Nt[oe]=$,Et.publish("addPattern",$)}};u.ShadingPattern=Fo,u.TilingPattern=rl,u.addShadingPattern=function(N,$){return j("addShadingPattern()"),Je(N,$),this},u.beginTilingPattern=function(N){j("beginTilingPattern()"),Bc(N.boundingBox[0],N.boundingBox[1],N.boundingBox[2]-N.boundingBox[0],N.boundingBox[3]-N.boundingBox[1],N.matrix)},u.endTilingPattern=function(N,$){j("endTilingPattern()"),$.stream=xe[M].join(`
`),Je(N,$),Et.publish("endTilingPattern",$),nn.pop().restore()};var nt=u.__private__.newObject=function(){var N=pt();return ir(N,!0),N},pt=u.__private__.newObjectDeferred=function(){return F++,J[F]=function(){return ne},F},ir=function(N,$){return $=typeof $=="boolean"&&$,J[N]=ne,$&&ae(N+" 0 obj"),N},Mr=u.__private__.newAdditionalObject=function(){var N={objId:pt(),content:""};return de.push(N),N},Kt=pt(),_t=pt(),Tt=u.__private__.decodeColorString=function(N){var $=N.split(" ");if($.length!==2||$[1]!=="g"&&$[1]!=="G")$.length===5&&($[4]==="k"||$[4]==="K")&&($=[(1-$[0])*(1-$[3]),(1-$[1])*(1-$[3]),(1-$[2])*(1-$[3]),"r"]);else{var oe=parseFloat($[0]);$=[oe,oe,oe,"r"]}for(var ue="#",_e=0;_e<3;_e++)ue+=("0"+Math.floor(255*parseFloat($[_e])).toString(16)).slice(-2);return ue},$t=u.__private__.encodeColorString=function(N){var $;typeof N=="string"&&(N={ch1:N});var oe=N.ch1,ue=N.ch2,_e=N.ch3,Oe=N.ch4,De=N.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof oe=="string"&&oe.charAt(0)!=="#"){var Ke=new zx(oe);if(Ke.ok)oe=Ke.toHex();else if(!/^\d*\.?\d*$/.test(oe))throw new Error('Invalid color "'+oe+'" passed to jsPDF.encodeColorString.')}if(typeof oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(oe)&&(oe="#"+oe[1]+oe[1]+oe[2]+oe[2]+oe[3]+oe[3]),typeof oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(oe)){var st=parseInt(oe.substr(1),16);oe=st>>16&255,ue=st>>8&255,_e=255&st}if(ue===void 0||Oe===void 0&&oe===ue&&ue===_e)if(typeof oe=="string")$=oe+" "+De[0];else switch(N.precision){case 2:$=P(oe/255)+" "+De[0];break;case 3:default:$=k(oe/255)+" "+De[0]}else if(Oe===void 0||qt(Oe)==="object"){if(Oe&&!isNaN(Oe.a)&&Oe.a===0)return $=["1.","1.","1.",De[1]].join(" ");if(typeof oe=="string")$=[oe,ue,_e,De[1]].join(" ");else switch(N.precision){case 2:$=[P(oe/255),P(ue/255),P(_e/255),De[1]].join(" ");break;default:case 3:$=[k(oe/255),k(ue/255),k(_e/255),De[1]].join(" ")}}else if(typeof oe=="string")$=[oe,ue,_e,Oe,De[2]].join(" ");else switch(N.precision){case 2:$=[P(oe),P(ue),P(_e),P(Oe),De[2]].join(" ");break;case 3:default:$=[k(oe),k(ue),k(_e),k(Oe),De[2]].join(" ")}return $},Qt=u.__private__.getFilters=function(){return o},Ht=u.__private__.putStream=function(N){var $=(N=N||{}).data||"",oe=N.filters||Qt(),ue=N.alreadyAppliedFilters||[],_e=N.addLength1||!1,Oe=$.length,De=N.objectId,Ke=function(on){return on};if(p!==null&&De===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Ke=an.encryptor(De,0));var st={};oe===!0&&(oe=["FlateEncode"]);var yt=N.additionalKeyValues||[],mt=(st=ft.API.processDataByFilters!==void 0?ft.API.processDataByFilters($,oe):{data:$,reverseChain:[]}).reverseChain+(Array.isArray(ue)?ue.join(" "):ue.toString());if(st.data.length!==0&&(yt.push({key:"Length",value:st.data.length}),_e===!0&&yt.push({key:"Length1",value:Oe})),mt.length!=0)if(mt.split("/").length-1==1)yt.push({key:"Filter",value:mt});else{yt.push({key:"Filter",value:"["+mt+"]"});for(var Ot=0;Ot<yt.length;Ot+=1)if(yt[Ot].key==="DecodeParms"){for(var fr=[],mr=0;mr<st.reverseChain.split("/").length-1;mr+=1)fr.push("null");fr.push(yt[Ot].value),yt[Ot].value="["+fr.join(" ")+"]"}}ae("<<");for(var Lr=0;Lr<yt.length;Lr++)ae("/"+yt[Lr].key+" "+yt[Lr].value);ae(">>"),st.data.length!==0&&(ae("stream"),ae(Ke(st.data)),ae("endstream"))},Zt=u.__private__.putPage=function(N){var $=N.number,oe=N.data,ue=N.objId,_e=N.contentsObjId;ir(ue,!0),ae("<</Type /Page"),ae("/Parent "+N.rootDictionaryObjId+" 0 R"),ae("/Resources "+N.resourceDictionaryObjId+" 0 R"),ae("/MediaBox ["+parseFloat(T(N.mediaBox.bottomLeftX))+" "+parseFloat(T(N.mediaBox.bottomLeftY))+" "+T(N.mediaBox.topRightX)+" "+T(N.mediaBox.topRightY)+"]"),N.cropBox!==null&&ae("/CropBox ["+T(N.cropBox.bottomLeftX)+" "+T(N.cropBox.bottomLeftY)+" "+T(N.cropBox.topRightX)+" "+T(N.cropBox.topRightY)+"]"),N.bleedBox!==null&&ae("/BleedBox ["+T(N.bleedBox.bottomLeftX)+" "+T(N.bleedBox.bottomLeftY)+" "+T(N.bleedBox.topRightX)+" "+T(N.bleedBox.topRightY)+"]"),N.trimBox!==null&&ae("/TrimBox ["+T(N.trimBox.bottomLeftX)+" "+T(N.trimBox.bottomLeftY)+" "+T(N.trimBox.topRightX)+" "+T(N.trimBox.topRightY)+"]"),N.artBox!==null&&ae("/ArtBox ["+T(N.artBox.bottomLeftX)+" "+T(N.artBox.bottomLeftY)+" "+T(N.artBox.topRightX)+" "+T(N.artBox.topRightY)+"]"),typeof N.userUnit=="number"&&N.userUnit!==1&&ae("/UserUnit "+N.userUnit),Et.publish("putPage",{objId:ue,pageContext:dt[$],pageNumber:$,page:oe}),ae("/Contents "+_e+" 0 R"),ae(">>"),ae("endobj");var Oe=oe.join(`
`);return _===m.ADVANCED&&(Oe+=`
Q`),ir(_e,!0),Ht({data:Oe,filters:Qt(),objectId:_e}),ae("endobj"),ue},mn=u.__private__.putPages=function(){var N,$,oe=[];for(N=1;N<=It;N++)dt[N].objId=pt(),dt[N].contentsObjId=pt();for(N=1;N<=It;N++)oe.push(Zt({number:N,data:xe[N],objId:dt[N].objId,contentsObjId:dt[N].contentsObjId,mediaBox:dt[N].mediaBox,cropBox:dt[N].cropBox,bleedBox:dt[N].bleedBox,trimBox:dt[N].trimBox,artBox:dt[N].artBox,userUnit:dt[N].userUnit,rootDictionaryObjId:Kt,resourceDictionaryObjId:_t}));ir(Kt,!0),ae("<</Type /Pages");var ue="/Kids [";for($=0;$<It;$++)ue+=oe[$]+" 0 R ";ae(ue+"]"),ae("/Count "+It),ae(">>"),ae("endobj"),Et.publish("postPutPages")},He=function(N){Et.publish("putFont",{font:N,out:ae,newObject:nt,putStream:Ht}),N.isAlreadyPutted!==!0&&(N.objectNumber=nt(),ae("<<"),ae("/Type /Font"),ae("/BaseFont /"+$s(N.postScriptName)),ae("/Subtype /Type1"),typeof N.encoding=="string"&&ae("/Encoding /"+N.encoding),ae("/FirstChar 32"),ae("/LastChar 255"),ae(">>"),ae("endobj"))},le=function(){for(var N in xt)xt.hasOwnProperty(N)&&(d===!1||d===!0&&f.hasOwnProperty(N))&&He(xt[N])},Re=function(N){N.objectNumber=nt();var $=[];$.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Form"}),$.push({key:"BBox",value:"["+[T(N.x),T(N.y),T(N.x+N.width),T(N.y+N.height)].join(" ")+"]"}),$.push({key:"Matrix",value:"["+N.matrix.toString()+"]"});var oe=N.pages[1].join(`
`);Ht({data:oe,additionalKeyValues:$,objectId:N.objectNumber}),ae("endobj")},Ge=function(){for(var N in Xt)Xt.hasOwnProperty(N)&&Re(Xt[N])},Ct=function(N,$){var oe,ue=[],_e=1/($-1);for(oe=0;oe<1;oe+=_e)ue.push(oe);if(ue.push(1),N[0].offset!=0){var Oe={offset:0,color:N[0].color};N.unshift(Oe)}if(N[N.length-1].offset!=1){var De={offset:1,color:N[N.length-1].color};N.push(De)}for(var Ke="",st=0,yt=0;yt<ue.length;yt++){for(oe=ue[yt];oe>N[st+1].offset;)st++;var mt=N[st].offset,Ot=(oe-mt)/(N[st+1].offset-mt),fr=N[st].color,mr=N[st+1].color;Ke+=H(Math.round((1-Ot)*fr[0]+Ot*mr[0]).toString(16))+H(Math.round((1-Ot)*fr[1]+Ot*mr[1]).toString(16))+H(Math.round((1-Ot)*fr[2]+Ot*mr[2]).toString(16))}return Ke.trim()},Tr=function(N,$){$||($=21);var oe=nt(),ue=Ct(N.colors,$),_e=[];_e.push({key:"FunctionType",value:"0"}),_e.push({key:"Domain",value:"[0.0 1.0]"}),_e.push({key:"Size",value:"["+$+"]"}),_e.push({key:"BitsPerSample",value:"8"}),_e.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_e.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ht({data:ue,additionalKeyValues:_e,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:oe}),ae("endobj"),N.objectNumber=nt(),ae("<< /ShadingType "+N.type),ae("/ColorSpace /DeviceRGB");var Oe="/Coords ["+T(parseFloat(N.coords[0]))+" "+T(parseFloat(N.coords[1]))+" ";N.type===2?Oe+=T(parseFloat(N.coords[2]))+" "+T(parseFloat(N.coords[3])):Oe+=T(parseFloat(N.coords[2]))+" "+T(parseFloat(N.coords[3]))+" "+T(parseFloat(N.coords[4]))+" "+T(parseFloat(N.coords[5])),ae(Oe+="]"),N.matrix&&ae("/Matrix ["+N.matrix.toString()+"]"),ae("/Function "+oe+" 0 R"),ae("/Extend [true true]"),ae(">>"),ae("endobj")},ur=function(N,$){var oe=pt(),ue=nt();$.push({resourcesOid:oe,objectOid:ue}),N.objectNumber=ue;var _e=[];_e.push({key:"Type",value:"/Pattern"}),_e.push({key:"PatternType",value:"1"}),_e.push({key:"PaintType",value:"1"}),_e.push({key:"TilingType",value:"1"}),_e.push({key:"BBox",value:"["+N.boundingBox.map(T).join(" ")+"]"}),_e.push({key:"XStep",value:T(N.xStep)}),_e.push({key:"YStep",value:T(N.yStep)}),_e.push({key:"Resources",value:oe+" 0 R"}),N.matrix&&_e.push({key:"Matrix",value:"["+N.matrix.toString()+"]"}),Ht({data:N.stream,additionalKeyValues:_e,objectId:N.objectNumber}),ae("endobj")},xr=function(N){var $;for($ in Nt)Nt.hasOwnProperty($)&&(Nt[$]instanceof Fo?Tr(Nt[$]):Nt[$]instanceof rl&&ur(Nt[$],N))},jn=function(N){for(var $ in N.objectNumber=nt(),ae("<<"),N)switch($){case"opacity":ae("/ca "+P(N[$]));break;case"stroke-opacity":ae("/CA "+P(N[$]))}ae(">>"),ae("endobj")},qi=function(){var N;for(N in Dt)Dt.hasOwnProperty(N)&&jn(Dt[N])},ta=function(){for(var N in ae("/XObject <<"),Xt)Xt.hasOwnProperty(N)&&Xt[N].objectNumber>=0&&ae("/"+N+" "+Xt[N].objectNumber+" 0 R");Et.publish("putXobjectDict"),ae(">>")},_r=function(){an.oid=nt(),ae("<<"),ae("/Filter /Standard"),ae("/V "+an.v),ae("/R "+an.r),ae("/U <"+an.toHexString(an.U)+">"),ae("/O <"+an.toHexString(an.O)+">"),ae("/P "+an.P),ae(">>"),ae("endobj")},vo=function(){for(var N in ae("/Font <<"),xt)xt.hasOwnProperty(N)&&(d===!1||d===!0&&f.hasOwnProperty(N))&&ae("/"+N+" "+xt[N].objectNumber+" 0 R");ae(">>")},os=function(){if(Object.keys(Nt).length>0){for(var N in ae("/Shading <<"),Nt)Nt.hasOwnProperty(N)&&Nt[N]instanceof Fo&&Nt[N].objectNumber>=0&&ae("/"+N+" "+Nt[N].objectNumber+" 0 R");Et.publish("putShadingPatternDict"),ae(">>")}},ss=function(N){if(Object.keys(Nt).length>0){for(var $ in ae("/Pattern <<"),Nt)Nt.hasOwnProperty($)&&Nt[$]instanceof u.TilingPattern&&Nt[$].objectNumber>=0&&Nt[$].objectNumber<N&&ae("/"+$+" "+Nt[$].objectNumber+" 0 R");Et.publish("putTilingPatternDict"),ae(">>")}},Th=function(){if(Object.keys(Dt).length>0){var N;for(N in ae("/ExtGState <<"),Dt)Dt.hasOwnProperty(N)&&Dt[N].objectNumber>=0&&ae("/"+N+" "+Dt[N].objectNumber+" 0 R");Et.publish("putGStateDict"),ae(">>")}},Sr=function(N){ir(N.resourcesOid,!0),ae("<<"),ae("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),vo(),os(),ss(N.objectOid),Th(),ta(),ae(">>"),ae("endobj")},Sc=function(){var N=[];le(),qi(),Ge(),xr(N),Et.publish("putResources"),N.forEach(Sr),Sr({resourcesOid:_t,objectOid:Number.MAX_SAFE_INTEGER}),Et.publish("postPutResources")},kc=function(){Et.publish("putAdditionalObjects");for(var N=0;N<de.length;N++){var $=de[N];ir($.objId,!0),ae($.content),ae("endobj")}Et.publish("postPutAdditionalObjects")},Nc=function(N){jt[N.fontName]=jt[N.fontName]||{},jt[N.fontName][N.fontStyle]=N.id},Il=function(N,$,oe,ue,_e){var Oe={id:"F"+(Object.keys(xt).length+1).toString(10),postScriptName:N,fontName:$,fontStyle:oe,encoding:ue,isStandardFont:_e||!1,metadata:{}};return Et.publish("addFont",{font:Oe,instance:this}),xt[Oe.id]=Oe,Nc(Oe),Oe.id},Lh=function(N){for(var $=0,oe=se.length;$<oe;$++){var ue=Il.call(this,N[$][0],N[$][1],N[$][2],se[$][3],!0);d===!1&&(f[ue]=!0);var _e=N[$][0].split("-");Nc({id:ue,fontName:_e[0],fontStyle:_e[1]||""})}Et.publish("addFonts",{fonts:xt,dictionary:jt})},wi=function(N){return N.foo=function(){try{return N.apply(this,arguments)}catch(ue){var $=ue.stack||"";~$.indexOf(" at ")&&($=$.split(" at ")[1]);var oe="Error in function "+$.split(`
`)[0].split("<")[0]+": "+ue.message;if(!ht.console)throw new Error(oe);ht.console.error(oe,ue),ht.alert&&alert(oe)}},N.foo.bar=N,N.foo},ls=function(N,$){var oe,ue,_e,Oe,De,Ke,st,yt,mt;if(_e=($=$||{}).sourceEncoding||"Unicode",De=$.outputEncoding,($.autoencode||De)&&xt[tt].metadata&&xt[tt].metadata[_e]&&xt[tt].metadata[_e].encoding&&(Oe=xt[tt].metadata[_e].encoding,!De&&xt[tt].encoding&&(De=xt[tt].encoding),!De&&Oe.codePages&&(De=Oe.codePages[0]),typeof De=="string"&&(De=Oe[De]),De)){for(st=!1,Ke=[],oe=0,ue=N.length;oe<ue;oe++)(yt=De[N.charCodeAt(oe)])?Ke.push(String.fromCharCode(yt)):Ke.push(N[oe]),Ke[oe].charCodeAt(0)>>8&&(st=!0);N=Ke.join("")}for(oe=N.length;st===void 0&&oe!==0;)N.charCodeAt(oe-1)>>8&&(st=!0),oe--;if(!st)return N;for(Ke=$.noBOM?[]:[254,255],oe=0,ue=N.length;oe<ue;oe++){if((mt=(yt=N.charCodeAt(oe))>>8)>>8)throw new Error("Character at position "+oe+" of string '"+N+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ke.push(mt),Ke.push(yt-(mt<<8))}return String.fromCharCode.apply(void 0,Ke)},Tn=u.__private__.pdfEscape=u.pdfEscape=function(N,$){return ls(N,$).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dl=u.__private__.beginPage=function(N){xe[++It]=[],dt[It]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(N[0]),topRightY:Number(N[1])}},Ec(It),Se(xe[M])},Ac=function(N,$){var oe,ue,_e;switch(r=$||r,typeof N=="string"&&(oe=g(N.toLowerCase()),Array.isArray(oe)&&(ue=oe[0],_e=oe[1])),Array.isArray(N)&&(ue=N[0]*ze,_e=N[1]*ze),isNaN(ue)&&(ue=i[0],_e=i[1]),(ue>14400||_e>14400)&&(Jt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ue=Math.min(14400,ue),_e=Math.min(14400,_e)),i=[ue,_e],r.substr(0,1)){case"l":_e>ue&&(i=[_e,ue]);break;case"p":ue>_e&&(i=[_e,ue])}Dl(i),Cc(ql),ae(bi),zl!==0&&ae(zl+" J"),$l!==0&&ae($l+" j"),Et.publish("addPage",{pageNumber:It})},Ph=function(N){N>0&&N<=It&&(xe.splice(N,1),dt.splice(N,1),It--,M>It&&(M=It),this.setPage(M))},Ec=function(N){N>0&&N<=It&&(M=N)},Ch=u.__private__.getNumberOfPages=u.getNumberOfPages=function(){return xe.length-1},Oc=function(N,$,oe){var ue,_e=void 0;return oe=oe||{},N=N!==void 0?N:xt[tt].fontName,$=$!==void 0?$:xt[tt].fontStyle,ue=N.toLowerCase(),jt[ue]!==void 0&&jt[ue][$]!==void 0?_e=jt[ue][$]:jt[N]!==void 0&&jt[N][$]!==void 0?_e=jt[N][$]:oe.disableWarning===!1&&Jt.warn("Unable to look up font label for font '"+N+"', '"+$+"'. Refer to getFontList() for available fonts."),_e||oe.noFallback||(_e=jt.times[$])==null&&(_e=jt.times.normal),_e},Rh=u.__private__.putInfo=function(){var N=nt(),$=function(ue){return ue};for(var oe in p!==null&&($=an.encryptor(N,0)),ae("<<"),ae("/Producer ("+Tn($("jsPDF "+ft.version))+")"),ot)ot.hasOwnProperty(oe)&&ot[oe]&&ae("/"+oe.substr(0,1).toUpperCase()+oe.substr(1)+" ("+Tn($(ot[oe]))+")");ae("/CreationDate ("+Tn($(V))+")"),ae(">>"),ae("endobj")},Ml=u.__private__.putCatalog=function(N){var $=(N=N||{}).rootDictionaryObjId||Kt;switch(nt(),ae("<<"),ae("/Type /Catalog"),ae("/Pages "+$+" 0 R"),ye||(ye="fullwidth"),ye){case"fullwidth":ae("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ae("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ae("/OpenAction [3 0 R /Fit]");break;case"original":ae("/OpenAction [3 0 R /XYZ null null 1]");break;default:var oe=""+ye;oe.substr(oe.length-1)==="%"&&(ye=parseInt(ye)/100),typeof ye=="number"&&ae("/OpenAction [3 0 R /XYZ null null "+P(ye)+"]")}switch(rt||(rt="continuous"),rt){case"continuous":ae("/PageLayout /OneColumn");break;case"single":ae("/PageLayout /SinglePage");break;case"two":case"twoleft":ae("/PageLayout /TwoColumnLeft");break;case"tworight":ae("/PageLayout /TwoColumnRight")}qe&&ae("/PageMode /"+qe),Et.publish("putCatalog"),ae(">>"),ae("endobj")},Ih=u.__private__.putTrailer=function(){ae("trailer"),ae("<<"),ae("/Size "+(F+1)),ae("/Root "+F+" 0 R"),ae("/Info "+(F-1)+" 0 R"),p!==null&&ae("/Encrypt "+an.oid+" 0 R"),ae("/ID [ <"+ee+"> <"+ee+"> ]"),ae(">>")},Dh=u.__private__.putHeader=function(){ae("%PDF-"+y),ae("%")},Mh=u.__private__.putXRef=function(){var N="0000000000";ae("xref"),ae("0 "+(F+1)),ae("0000000000 65535 f ");for(var $=1;$<=F;$++)typeof J[$]=="function"?ae((N+J[$]()).slice(-10)+" 00000 n "):J[$]!==void 0?ae((N+J[$]).slice(-10)+" 00000 n "):ae("0000000000 00000 n ")},ra=u.__private__.buildDocument=function(){Me(),Se(re),Et.publish("buildDocument"),Dh(),mn(),kc(),Sc(),p!==null&&_r(),Rh(),Ml();var N=ne;return Mh(),Ih(),ae("startxref"),ae(""+N),ae("%%EOF"),Se(xe[M]),re.join(`
`)},us=u.__private__.getBlob=function(N){return new Blob([pe(N)],{type:"application/pdf"})},cs=u.output=u.__private__.output=wi(function(N,$){switch(typeof($=$||{})=="string"?$={filename:$}:$.filename=$.filename||"generated.pdf",N){case void 0:return ra();case"save":u.save($.filename);break;case"arraybuffer":return pe(ra());case"blob":return us(ra());case"bloburi":case"bloburl":if(ht.URL!==void 0&&typeof ht.URL.createObjectURL=="function")return ht.URL&&ht.URL.createObjectURL(us(ra()))||void 0;Jt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var oe="",ue=ra();try{oe=I1(ue)}catch{oe=I1(unescape(encodeURIComponent(ue)))}return"data:application/pdf;filename="+$.filename+";base64,"+oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ht)==="[object Window]"){var _e="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Oe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$.pdfObjectUrl&&(_e=$.pdfObjectUrl,Oe="");var De='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+_e+'"'+Oe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($)+");<\/script></body></html>",Ke=ht.open();return Ke!==null&&Ke.document.write(De),Ke}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ht)==="[object Window]"){var st='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$.filename+'" width="500px" height="400px" /></body></html>',yt=ht.open();if(yt!==null){yt.document.write(st);var mt=this;yt.document.documentElement.querySelector("#pdfViewer").onload=function(){yt.document.title=$.filename,yt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(mt.output("bloburl"))}}return yt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ht)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$)+'"></iframe></body></html>',fr=ht.open();if(fr!==null&&(fr.document.write(Ot),fr.document.title=$.filename),fr||typeof safari>"u")return fr;break;case"datauri":case"dataurl":return ht.document.location.href=this.output("datauristring",$);default:return null}}),jc=function(N){return Array.isArray(zt)===!0&&zt.indexOf(N)>-1};switch(n){case"pt":ze=1;break;case"mm":ze=72/25.4;break;case"cm":ze=72/2.54;break;case"in":ze=72;break;case"px":ze=jc("px_scaling")==1?.75:96/72;break;case"pc":case"em":ze=12;break;case"ex":ze=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ze=n}var an=null;q(),Q();var Bh=function(N){return p!==null?an.encryptor(N,0):function($){return $}},Tc=u.__private__.getPageInfo=u.getPageInfo=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:dt[N].objId,pageNumber:N,pageContext:dt[N]}},gt=u.__private__.getPageInfoByObjId=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $ in dt)if(dt[$].objId===N)break;return Tc($)},Fh=u.__private__.getCurrentPageInfo=u.getCurrentPageInfo=function(){return{objId:dt[M].objId,pageNumber:M,pageContext:dt[M]}};u.addPage=function(){return Ac.apply(this,arguments),this},u.setPage=function(){return Ec.apply(this,arguments),Se.call(this,xe[M]),this},u.insertPage=function(N){return this.addPage(),this.movePage(M,N),this},u.movePage=function(N,$){var oe,ue;if(N>$){oe=xe[N],ue=dt[N];for(var _e=N;_e>$;_e--)xe[_e]=xe[_e-1],dt[_e]=dt[_e-1];xe[$]=oe,dt[$]=ue,this.setPage($)}else if(N<$){oe=xe[N],ue=dt[N];for(var Oe=N;Oe<$;Oe++)xe[Oe]=xe[Oe+1],dt[Oe]=dt[Oe+1];xe[$]=oe,dt[$]=ue,this.setPage($)}return this},u.deletePage=function(){return Ph.apply(this,arguments),this},u.__private__.text=u.text=function(N,$,oe,ue,_e){var Oe,De,Ke,st,yt,mt,Ot,fr,mr,Lr=(ue=ue||{}).scope||this;if(typeof N=="number"&&typeof $=="number"&&(typeof oe=="string"||Array.isArray(oe))){var on=oe;oe=$,$=N,N=on}if(arguments[3]instanceof be?(j("The transform parameter of text() with a Matrix value"),mr=_e):(Ke=arguments[4],st=arguments[5],qt(Ot=arguments[3])==="object"&&Ot!==null||(typeof Ke=="string"&&(st=Ke,Ke=null),typeof Ot=="string"&&(st=Ot,Ot=null),typeof Ot=="number"&&(Ke=Ot,Ot=null),ue={flags:Ot,angle:Ke,align:st})),isNaN($)||isNaN(oe)||N==null)throw new Error("Invalid arguments passed to jsPDF.text");if(N.length===0)return Lr;var Hr="",xi=!1,$n=typeof ue.lineHeightFactor=="number"?ue.lineHeightFactor:wo,$i=Lr.internal.scaleFactor;function Fc(er){return er=er.split("	").join(Array(ue.TabLen||9).join(" ")),Tn(er,Ot)}function Kl(er){for(var tr,Nr=er.concat(),Br=[],sa=Nr.length;sa--;)typeof(tr=Nr.shift())=="string"?Br.push(tr):Array.isArray(er)&&(tr.length===1||tr[1]===void 0&&tr[2]===void 0)?Br.push(tr[0]):Br.push([tr[0],tr[1],tr[2]]);return Br}function Yl(er,tr){var Nr;if(typeof er=="string")Nr=tr(er)[0];else if(Array.isArray(er)){for(var Br,sa,nu=er.concat(),Ns=[],Hc=nu.length;Hc--;)typeof(Br=nu.shift())=="string"?Ns.push(tr(Br)[0]):Array.isArray(Br)&&typeof Br[0]=="string"&&(sa=tr(Br[0],Br[1],Br[2]),Ns.push([sa[0],sa[1],sa[2]]));Nr=Ns}return Nr}var ms=!1,Jl=!0;if(typeof N=="string")ms=!0;else if(Array.isArray(N)){var Xl=N.concat();De=[];for(var vs,Jr=Xl.length;Jr--;)(typeof(vs=Xl.shift())!="string"||Array.isArray(vs)&&typeof vs[0]!="string")&&(Jl=!1);ms=Jl}if(ms===!1)throw new Error('Type of text must be string or Array. "'+N+'" is not recognized.');typeof N=="string"&&(N=N.match(/[\r?\n]/)?N.split(/\r\n|\r|\n/g):[N]);var ys=he/Lr.internal.scaleFactor,ws=ys*($n-1);switch(ue.baseline){case"bottom":oe-=ws;break;case"top":oe+=ys-ws;break;case"hanging":oe+=ys-2*ws;break;case"middle":oe+=ys/2-ws}if((mt=ue.maxWidth||0)>0&&(typeof N=="string"?N=Lr.splitTextToSize(N,mt):Object.prototype.toString.call(N)==="[object Array]"&&(N=N.reduce(function(er,tr){return er.concat(Lr.splitTextToSize(tr,mt))},[]))),Oe={text:N,x:$,y:oe,options:ue,mutex:{pdfEscape:Tn,activeFontKey:tt,fonts:xt,activeFontSize:he}},Et.publish("preProcessText",Oe),N=Oe.text,Ke=(ue=Oe.options).angle,!(mr instanceof be)&&Ke&&typeof Ke=="number"){Ke*=Math.PI/180,ue.rotationDirection===0&&(Ke=-Ke),_===m.ADVANCED&&(Ke=-Ke);var bs=Math.cos(Ke),Ql=Math.sin(Ke);mr=new be(bs,Ql,-Ql,bs,0,0)}else Ke&&Ke instanceof be&&(mr=Ke);_!==m.ADVANCED||mr||(mr=Qe),(yt=ue.charSpace||hs)!==void 0&&(Hr+=T(E(yt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(fr=ue.horizontalScale)!==void 0&&(Hr+=T(100*fr)+` Tz
`),ue.lang;var Ln=-1,Yh=ue.renderingMode!==void 0?ue.renderingMode:ue.stroke,Zl=Lr.internal.getCurrentPageInfo().pageContext;switch(Yh){case 0:case!1:case"fill":Ln=0;break;case 1:case!0:case"stroke":Ln=1;break;case 2:case"fillThenStroke":Ln=2;break;case 3:case"invisible":Ln=3;break;case 4:case"fillAndAddForClipping":Ln=4;break;case 5:case"strokeAndAddPathForClipping":Ln=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ln=6;break;case 7:case"addToPathForClipping":Ln=7}var qc=Zl.usedRenderingMode!==void 0?Zl.usedRenderingMode:-1;Ln!==-1?Hr+=Ln+` Tr
`:qc!==-1&&(Hr+=`0 Tr
`),Ln!==-1&&(Zl.usedRenderingMode=Ln),st=ue.align||"left";var ii,xs=he*$n,Uc=Lr.internal.pageSize.getWidth(),zc=xt[tt];yt=ue.charSpace||hs,mt=ue.maxWidth||0,Ot=Object.assign({autoencode:!0,noBOM:!0},ue.flags);var Ta=[],_o=function(er){return Lr.getStringUnitWidth(er,{font:zc,charSpace:yt,fontSize:he,doKerning:!1})*he/$i};if(Object.prototype.toString.call(N)==="[object Array]"){var Pn;De=Kl(N),st!=="left"&&(ii=De.map(_o));var vn,La=0;if(st==="right"){$-=ii[0],N=[],Jr=De.length;for(var ia=0;ia<Jr;ia++)ia===0?(vn=zi($),Pn=na(oe)):(vn=E(La-ii[ia]),Pn=-xs),N.push([De[ia],vn,Pn]),La=ii[ia]}else if(st==="center"){$-=ii[0]/2,N=[],Jr=De.length;for(var aa=0;aa<Jr;aa++)aa===0?(vn=zi($),Pn=na(oe)):(vn=E((La-ii[aa])/2),Pn=-xs),N.push([De[aa],vn,Pn]),La=ii[aa]}else if(st==="left"){N=[],Jr=De.length;for(var _s=0;_s<Jr;_s++)N.push(De[_s])}else if(st==="justify"&&zc.encoding==="Identity-H"){N=[],Jr=De.length,mt=mt!==0?mt:Uc;for(var oa=0,kr=0;kr<Jr;kr++)if(Pn=kr===0?na(oe):-xs,vn=kr===0?zi($):oa,kr<Jr-1){var eu=E((mt-ii[kr])/(De[kr].split(" ").length-1)),yn=De[kr].split(" ");N.push([yn[0]+" ",vn,Pn]),oa=0;for(var ai=1;ai<yn.length;ai++){var Ss=(_o(yn[ai-1]+" "+yn[ai])-_o(yn[ai]))*$i+eu;ai==yn.length-1?N.push([yn[ai],Ss,0]):N.push([yn[ai]+" ",Ss,0]),oa-=Ss}}else N.push([De[kr],vn,Pn]);N.push(["",oa,0])}else{if(st!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(N=[],Jr=De.length,mt=mt!==0?mt:Uc,kr=0;kr<Jr;kr++)Pn=kr===0?na(oe):-xs,vn=kr===0?zi($):0,kr<Jr-1?Ta.push(T(E((mt-ii[kr])/(De[kr].split(" ").length-1)))):Ta.push(0),N.push([De[kr],vn,Pn])}}var $c=typeof ue.R2L=="boolean"?ue.R2L:Ie;$c===!0&&(N=Yl(N,function(er,tr,Nr){return[er.split("").reverse().join(""),tr,Nr]})),Oe={text:N,x:$,y:oe,options:ue,mutex:{pdfEscape:Tn,activeFontKey:tt,fonts:xt,activeFontSize:he}},Et.publish("postProcessText",Oe),N=Oe.text,xi=Oe.mutex.isHex||!1;var tu=xt[tt].encoding;tu!=="WinAnsiEncoding"&&tu!=="StandardEncoding"||(N=Yl(N,function(er,tr,Nr){return[Fc(er),tr,Nr]})),De=Kl(N),N=[];for(var So,ko,Pa,No=0,ks=1,Ao=Array.isArray(De[0])?ks:No,Ca="",ru=function(er,tr,Nr){var Br="";return Nr instanceof be?(Nr=typeof ue.angle=="number"?Be(Nr,new be(1,0,0,1,er,tr)):Be(new be(1,0,0,1,er,tr),Nr),_===m.ADVANCED&&(Nr=Be(new be(1,0,0,-1,0,0),Nr)),Br=Nr.join(" ")+` Tm
`):Br=T(er)+" "+T(tr)+` Td
`,Br},oi=0;oi<De.length;oi++){switch(Ca="",Ao){case ks:Pa=(xi?"<":"(")+De[oi][0]+(xi?">":")"),So=parseFloat(De[oi][1]),ko=parseFloat(De[oi][2]);break;case No:Pa=(xi?"<":"(")+De[oi]+(xi?">":")"),So=zi($),ko=na(oe)}Ta!==void 0&&Ta[oi]!==void 0&&(Ca=Ta[oi]+` Tw
`),oi===0?N.push(Ca+ru(So,ko,mr)+Pa):Ao===No?N.push(Ca+Pa):Ao===ks&&N.push(Ca+ru(So,ko,mr)+Pa)}N=Ao===No?N.join(` Tj
T* `):N.join(` Tj
`),N+=` Tj
`;var si=`BT
/`;return si+=tt+" "+he+` Tf
`,si+=T(he*$n)+` TL
`,si+=bo+`
`,si+=Hr,si+=N,ae(si+="ET"),f[tt]=!0,Lr};var qh=u.__private__.clip=u.clip=function(N){return ae(N==="evenodd"?"W*":"W"),this};u.clipEvenOdd=function(){return qh("evenodd")},u.__private__.discardPath=u.discardPath=function(){return ae("n"),this};var Ui=u.__private__.isValidStyle=function(N){var $=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(N)!==-1&&($=!0),$};u.__private__.setDefaultPathOperation=u.setDefaultPathOperation=function(N){return Ui(N)&&(c=N),this};var Lc=u.__private__.getStyle=u.getStyle=function(N){var $=c;switch(N){case"D":case"S":$="S";break;case"F":$="f";break;case"FD":case"DF":$="B";break;case"f":case"f*":case"B":case"B*":$=N}return $},Pc=u.close=function(){return ae("h"),this};u.stroke=function(){return ae("S"),this},u.fill=function(N){return fs("f",N),this},u.fillEvenOdd=function(N){return fs("f*",N),this},u.fillStroke=function(N){return fs("B",N),this},u.fillStrokeEvenOdd=function(N){return fs("B*",N),this};var fs=function(N,$){qt($)==="object"?zh($,N):ae(N)},Bl=function(N){N===null||_===m.ADVANCED&&N===void 0||(N=Lc(N),ae(N))};function Uh(N,$,oe,ue,_e){var Oe=new rl($||this.boundingBox,oe||this.xStep,ue||this.yStep,this.gState,_e||this.matrix);Oe.stream=this.stream;var De=N+"$$"+this.cloneIndex+++"$$";return Je(De,Oe),Oe}var zh=function(N,$){var oe=yi[N.key],ue=Nt[oe];if(ue instanceof Fo)ae("q"),ae($h($)),ue.gState&&u.setGState(ue.gState),ae(N.matrix.toString()+" cm"),ae("/"+oe+" sh"),ae("Q");else if(ue instanceof rl){var _e=new be(1,0,0,-1,0,ja());N.matrix&&(_e=_e.multiply(N.matrix||Qe),oe=Uh.call(ue,N.key,N.boundingBox,N.xStep,N.yStep,_e).id),ae("q"),ae("/Pattern cs"),ae("/"+oe+" scn"),ue.gState&&u.setGState(ue.gState),ae($),ae("Q")}},$h=function(N){switch(N){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Fl=u.moveTo=function(N,$){return ae(T(E(N))+" "+T(I($))+" m"),this},yo=u.lineTo=function(N,$){return ae(T(E(N))+" "+T(I($))+" l"),this},Ea=u.curveTo=function(N,$,oe,ue,_e,Oe){return ae([T(E(N)),T(I($)),T(E(oe)),T(I(ue)),T(E(_e)),T(I(Oe)),"c"].join(" ")),this};u.__private__.line=u.line=function(N,$,oe,ue,_e){if(isNaN(N)||isNaN($)||isNaN(oe)||isNaN(ue)||!Ui(_e))throw new Error("Invalid arguments passed to jsPDF.line");return _===m.COMPAT?this.lines([[oe-N,ue-$]],N,$,[1,1],_e||"S"):this.lines([[oe-N,ue-$]],N,$,[1,1]).stroke()},u.__private__.lines=u.lines=function(N,$,oe,ue,_e,Oe){var De,Ke,st,yt,mt,Ot,fr,mr,Lr,on,Hr,xi;if(typeof N=="number"&&(xi=oe,oe=$,$=N,N=xi),ue=ue||[1,1],Oe=Oe||!1,isNaN($)||isNaN(oe)||!Array.isArray(N)||!Array.isArray(ue)||!Ui(_e)||typeof Oe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fl($,oe),De=ue[0],Ke=ue[1],yt=N.length,on=$,Hr=oe,st=0;st<yt;st++)(mt=N[st]).length===2?(on=mt[0]*De+on,Hr=mt[1]*Ke+Hr,yo(on,Hr)):(Ot=mt[0]*De+on,fr=mt[1]*Ke+Hr,mr=mt[2]*De+on,Lr=mt[3]*Ke+Hr,on=mt[4]*De+on,Hr=mt[5]*Ke+Hr,Ea(Ot,fr,mr,Lr,on,Hr));return Oe&&Pc(),Bl(_e),this},u.path=function(N){for(var $=0;$<N.length;$++){var oe=N[$],ue=oe.c;switch(oe.op){case"m":Fl(ue[0],ue[1]);break;case"l":yo(ue[0],ue[1]);break;case"c":Ea.apply(this,ue);break;case"h":Pc()}}return this},u.__private__.rect=u.rect=function(N,$,oe,ue,_e){if(isNaN(N)||isNaN($)||isNaN(oe)||isNaN(ue)||!Ui(_e))throw new Error("Invalid arguments passed to jsPDF.rect");return _===m.COMPAT&&(ue=-ue),ae([T(E(N)),T(I($)),T(E(oe)),T(E(ue)),"re"].join(" ")),Bl(_e),this},u.__private__.triangle=u.triangle=function(N,$,oe,ue,_e,Oe,De){if(isNaN(N)||isNaN($)||isNaN(oe)||isNaN(ue)||isNaN(_e)||isNaN(Oe)||!Ui(De))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[oe-N,ue-$],[_e-oe,Oe-ue],[N-_e,$-Oe]],N,$,[1,1],De,!0),this},u.__private__.roundedRect=u.roundedRect=function(N,$,oe,ue,_e,Oe,De){if(isNaN(N)||isNaN($)||isNaN(oe)||isNaN(ue)||isNaN(_e)||isNaN(Oe)||!Ui(De))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ke=4/3*(Math.SQRT2-1);return _e=Math.min(_e,.5*oe),Oe=Math.min(Oe,.5*ue),this.lines([[oe-2*_e,0],[_e*Ke,0,_e,Oe-Oe*Ke,_e,Oe],[0,ue-2*Oe],[0,Oe*Ke,-_e*Ke,Oe,-_e,Oe],[2*_e-oe,0],[-_e*Ke,0,-_e,-Oe*Ke,-_e,-Oe],[0,2*Oe-ue],[0,-Oe*Ke,_e*Ke,-Oe,_e,-Oe]],N+_e,$,[1,1],De,!0),this},u.__private__.ellipse=u.ellipse=function(N,$,oe,ue,_e){if(isNaN(N)||isNaN($)||isNaN(oe)||isNaN(ue)||!Ui(_e))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Oe=4/3*(Math.SQRT2-1)*oe,De=4/3*(Math.SQRT2-1)*ue;return Fl(N+oe,$),Ea(N+oe,$-De,N+Oe,$-ue,N,$-ue),Ea(N-Oe,$-ue,N-oe,$-De,N-oe,$),Ea(N-oe,$+De,N-Oe,$+ue,N,$+ue),Ea(N+Oe,$+ue,N+oe,$+De,N+oe,$),Bl(_e),this},u.__private__.circle=u.circle=function(N,$,oe,ue){if(isNaN(N)||isNaN($)||isNaN(oe)||!Ui(ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(N,$,oe,oe,ue)},u.setFont=function(N,$,oe){return oe&&($=D($,oe)),tt=Oc(N,$,{disableWarning:!1}),this};var Hh=u.__private__.getFont=u.getFont=function(){return xt[Oc.apply(u,arguments)]};u.__private__.getFontList=u.getFontList=function(){var N,$,oe={};for(N in jt)if(jt.hasOwnProperty(N))for($ in oe[N]=[],jt[N])jt[N].hasOwnProperty($)&&oe[N].push($);return oe},u.addFont=function(N,$,oe,ue,_e){var Oe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Oe.indexOf(arguments[3])!==-1?_e=arguments[3]:arguments[3]&&Oe.indexOf(arguments[3])==-1&&(oe=D(oe,ue)),_e=_e||"Identity-H",Il.call(this,N,$,oe,_e)};var wo,ql=t.lineWidth||.200025,ds=u.__private__.getLineWidth=u.getLineWidth=function(){return ql},Cc=u.__private__.setLineWidth=u.setLineWidth=function(N){return ql=N,ae(T(E(N))+" w"),this};u.__private__.setLineDash=ft.API.setLineDash=ft.API.setLineDashPattern=function(N,$){if(N=N||[],$=$||0,isNaN($)||!Array.isArray(N))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return N=N.map(function(oe){return T(E(oe))}).join(" "),$=T(E($)),ae("["+N+"] "+$+" d"),this};var Rc=u.__private__.getLineHeight=u.getLineHeight=function(){return he*wo};u.__private__.getLineHeight=u.getLineHeight=function(){return he*wo};var Ic=u.__private__.setLineHeightFactor=u.setLineHeightFactor=function(N){return typeof(N=N||1.15)=="number"&&(wo=N),this},Dc=u.__private__.getLineHeightFactor=u.getLineHeightFactor=function(){return wo};Ic(t.lineHeight);var zi=u.__private__.getHorizontalCoordinate=function(N){return E(N)},na=u.__private__.getVerticalCoordinate=function(N){return _===m.ADVANCED?N:dt[M].mediaBox.topRightY-dt[M].mediaBox.bottomLeftY-E(N)},Wh=u.__private__.getHorizontalCoordinateString=u.getHorizontalCoordinateString=function(N){return T(zi(N))},Oa=u.__private__.getVerticalCoordinateString=u.getVerticalCoordinateString=function(N){return T(na(N))},bi=t.strokeColor||"0 G";u.__private__.getStrokeColor=u.getDrawColor=function(){return Tt(bi)},u.__private__.setStrokeColor=u.setDrawColor=function(N,$,oe,ue){return bi=$t({ch1:N,ch2:$,ch3:oe,ch4:ue,pdfColorType:"draw",precision:2}),ae(bi),this};var Ul=t.fillColor||"0 g";u.__private__.getFillColor=u.getFillColor=function(){return Tt(Ul)},u.__private__.setFillColor=u.setFillColor=function(N,$,oe,ue){return Ul=$t({ch1:N,ch2:$,ch3:oe,ch4:ue,pdfColorType:"fill",precision:2}),ae(Ul),this};var bo=t.textColor||"0 g",Vh=u.__private__.getTextColor=u.getTextColor=function(){return Tt(bo)};u.__private__.setTextColor=u.setTextColor=function(N,$,oe,ue){return bo=$t({ch1:N,ch2:$,ch3:oe,ch4:ue,pdfColorType:"text",precision:3}),this};var hs=t.charSpace,Gh=u.__private__.getCharSpace=u.getCharSpace=function(){return parseFloat(hs||0)};u.__private__.setCharSpace=u.setCharSpace=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return hs=N,this};var zl=0;u.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},u.__private__.setLineCap=u.setLineCap=function(N){var $=u.CapJoinStyles[N];if($===void 0)throw new Error("Line cap style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zl=$,ae($+" J"),this};var $l=0;u.__private__.setLineJoin=u.setLineJoin=function(N){var $=u.CapJoinStyles[N];if($===void 0)throw new Error("Line join style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $l=$,ae($+" j"),this},u.__private__.setLineMiterLimit=u.__private__.setMiterLimit=u.setLineMiterLimit=u.setMiterLimit=function(N){if(N=N||0,isNaN(N))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ae(T(E(N))+" M"),this},u.GState=Yd,u.setGState=function(N){(N=typeof N=="string"?Dt[$r[N]]:Mc(null,N)).equals(zn)||(ae("/"+N.id+" gs"),zn=N)};var Mc=function(N,$){if(!N||!$r[N]){var oe=!1;for(var ue in Dt)if(Dt.hasOwnProperty(ue)&&Dt[ue].equals($)){oe=!0;break}if(oe)$=Dt[ue];else{var _e="GS"+(Object.keys(Dt).length+1).toString(10);Dt[_e]=$,$.id=_e}return N&&($r[N]=$.id),Et.publish("addGState",$),$}};u.addGState=function(N,$){return Mc(N,$),this},u.saveGraphicsState=function(){return ae("q"),rn.push({key:tt,size:he,color:bo}),this},u.restoreGraphicsState=function(){ae("Q");var N=rn.pop();return tt=N.key,he=N.size,bo=N.color,zn=null,this},u.setCurrentTransformationMatrix=function(N){return ae(N.toString()+" cm"),this},u.comment=function(N){return ae("#"+N),this};var ps=function(N,$){var oe=N||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return oe},set:function(Oe){isNaN(Oe)||(oe=parseFloat(Oe))}});var ue=$||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ue},set:function(Oe){isNaN(Oe)||(ue=parseFloat(Oe))}});var _e="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return _e},set:function(Oe){_e=Oe.toString()}}),this},Hl=function(N,$,oe,ue){ps.call(this,N,$),this.type="rect";var _e=oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return _e},set:function(De){isNaN(De)||(_e=parseFloat(De))}});var Oe=ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Oe},set:function(De){isNaN(De)||(Oe=parseFloat(De))}}),this},Wl=function(){this.page=It,this.currentPage=M,this.pages=xe.slice(0),this.pagesContext=dt.slice(0),this.x=br,this.y=bt,this.matrix=zr,this.width=xo(M),this.height=ja(M),this.outputDestination=Ee,this.id="",this.objectNumber=-1};Wl.prototype.restore=function(){It=this.page,M=this.currentPage,dt=this.pagesContext,xe=this.pages,br=this.x,bt=this.y,zr=this.matrix,Vl(M,this.width),Gl(M,this.height),Ee=this.outputDestination};var Bc=function(N,$,oe,ue,_e){nn.push(new Wl),It=M=0,xe=[],br=N,bt=$,zr=_e,Dl([oe,ue])},Kh=function(N){if(On[N])nn.pop().restore();else{var $=new Wl,oe="Xo"+(Object.keys(Xt).length+1).toString(10);$.id=oe,On[N]=oe,Xt[oe]=$,Et.publish("addFormObject",$),nn.pop().restore()}};for(var gs in u.beginFormObject=function(N,$,oe,ue,_e){return Bc(N,$,oe,ue,_e),this},u.endFormObject=function(N){return Kh(N),this},u.doFormObject=function(N,$){var oe=Xt[On[N]];return ae("q"),ae($.toString()+" cm"),ae("/"+oe.id+" Do"),ae("Q"),this},u.getFormObject=function(N){var $=Xt[On[N]];return{x:$.x,y:$.y,width:$.width,height:$.height,matrix:$.matrix}},u.save=function(N,$){return N=N||"generated.pdf",($=$||{}).returnPromise=$.returnPromise||!1,$.returnPromise===!1?(Io(us(ra()),N),typeof Io.unload=="function"&&ht.setTimeout&&setTimeout(Io.unload,911),this):new Promise(function(oe,ue){try{var _e=Io(us(ra()),N);typeof Io.unload=="function"&&ht.setTimeout&&setTimeout(Io.unload,911),oe(_e)}catch(Oe){ue(Oe.message)}})},ft.API)ft.API.hasOwnProperty(gs)&&(gs==="events"&&ft.API.events.length?function(N,$){var oe,ue,_e;for(_e=$.length-1;_e!==-1;_e--)oe=$[_e][0],ue=$[_e][1],N.subscribe.apply(N,[oe].concat(typeof ue=="function"?[ue]:ue))}(Et,ft.API.events):u[gs]=ft.API[gs]);var xo=u.getPageWidth=function(N){return(dt[N=N||M].mediaBox.topRightX-dt[N].mediaBox.bottomLeftX)/ze},Vl=u.setPageWidth=function(N,$){dt[N].mediaBox.topRightX=$*ze+dt[N].mediaBox.bottomLeftX},ja=u.getPageHeight=function(N){return(dt[N=N||M].mediaBox.topRightY-dt[N].mediaBox.bottomLeftY)/ze},Gl=u.setPageHeight=function(N,$){dt[N].mediaBox.topRightY=$*ze+dt[N].mediaBox.bottomLeftY};return u.internal={pdfEscape:Tn,getStyle:Lc,getFont:Hh,getFontSize:ge,getCharSpace:Gh,getTextColor:Vh,getLineHeight:Rc,getLineHeightFactor:Dc,getLineWidth:ds,write:Ve,getHorizontalCoordinate:zi,getVerticalCoordinate:na,getCoordinateString:Wh,getVerticalCoordinateString:Oa,collections:{},newObject:nt,newAdditionalObject:Mr,newObjectDeferred:pt,newObjectDeferredBegin:ir,getFilters:Qt,putStream:Ht,events:Et,scaleFactor:ze,pageSize:{getWidth:function(){return xo(M)},setWidth:function(N){Vl(M,N)},getHeight:function(){return ja(M)},setHeight:function(N){Gl(M,N)}},encryptionOptions:p,encryption:an,getEncryptor:Bh,output:cs,getNumberOfPages:Ch,pages:xe,out:ae,f2:P,f3:k,getPageInfo:Tc,getPageInfoByObjId:gt,getCurrentPageInfo:Fh,getPDFVersion:v,Point:ps,Rectangle:Hl,Matrix:be,hasHotfix:jc},Object.defineProperty(u.internal.pageSize,"width",{get:function(){return xo(M)},set:function(N){Vl(M,N)},enumerable:!0,configurable:!0}),Object.defineProperty(u.internal.pageSize,"height",{get:function(){return ja(M)},set:function(N){Gl(M,N)},enumerable:!0,configurable:!0}),Lh.call(u,se),tt="F1",Ac(i,r),Et.publish("initialized"),u}zs.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},zs.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},zs.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},zs.prototype.processOwnerPassword=function(t,e){return M1(D1(e).substr(0,5),t)},zs.prototype.encryptor=function(t,e){var r=D1(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return M1(r,n)}},Yd.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||qt(t)!==qt(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},ft.API={events:[]},ft.version="2.5.2";var yr=ft.API,lm=1,as=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bs=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vt=function(t){return t.toFixed(2)},Wa=function(t){return t.toFixed(5)};yr.__acroform__={};var Un=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},my=function(t){return t*lm},Gi=function(t){var e=new Vx,r=et.internal.getHeight(t)||0,n=et.internal.getWidth(t)||0;return e.BBox=[0,0,Number(vt(n)),Number(vt(r))],e},bP=yr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},xP=yr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},_P=yr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Er=yr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return _P(t,e-1)},Or=yr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return bP(t,e-1)},jr=yr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return xP(t,e-1)},SP=yr.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],a=t[1],o=t[2],s=t[3],l={};return l.lowerLeft_X=r(i)||0,l.lowerLeft_Y=n(a+s)||0,l.upperRight_X=r(i+o)||0,l.upperRight_Y=n(a)||0,[Number(vt(l.lowerLeft_X)),Number(vt(l.lowerLeft_Y)),Number(vt(l.upperRight_X)),Number(vt(l.upperRight_Y))]},kP=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=B1(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+vt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Gi(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},B1=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(k){return k.split(`
`)}):i.map(function(k){return[k]});var a=r,o=et.internal.getHeight(t)||0;o=o<0?-o:o;var s=et.internal.getWidth(t)||0;s=s<0?-s:s;var l=function(k,E,C){if(k+1<i.length){var I=E+" "+i[k+1][0];return $f(I,t,C).width<=s-4}return!1};a++;e:for(;a>0;){e="",a--;var c,p,d=$f("3",t,a).height,f=t.multiline?o-a:(o-d)/2,u=f+=2,y=0,v=0,b=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+$f(e,t,a=12).width+", FieldWidth:"+s+`
`;break}for(var g="",m=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var x=!1;if(i[_].length!==1&&b!==i[_].length-1){if((d+2)*(m+2)+2>o)continue e;g+=i[_][b],x=!0,v=_,_--}else{g=(g+=i[_][b]+" ").substr(g.length-1)==" "?g.substr(0,g.length-1):g;var A=parseInt(_),D=l(A,g,a),T=_>=i.length-1;if(D&&!T){g+=" ",b=0;continue}if(D||T){if(T)v=A;else if(t.multiline&&(d+2)*(m+2)+2>o)continue e}else{if(!t.multiline||(d+2)*(m+2)+2>o)continue e;v=A}}for(var j="",B=y;B<=v;B++){var P=i[B];if(t.multiline){if(B===v){j+=P[b]+" ",b=(b+1)%P.length;continue}if(B===y){j+=P[P.length-1]+" ";continue}}j+=P[0]+" "}switch(j=j.substr(j.length-1)==" "?j.substr(0,j.length-1):j,p=$f(j,t,a).width,t.textAlign){case"right":c=s-p-2;break;case"center":c=(s-p)/2;break;case"left":default:c=2}e+=vt(c)+" "+vt(u)+` Td
`,e+="("+as(j)+`) Tj
`,e+=-vt(c)+` 0 Td
`,u=-(a+2),p=0,y=x?v:v+1,m++,g=""}break}return n.text=e,n.fontSize=a,n},$f=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},NP={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},AP=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},EP=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,i=t[r];e.internal.newObjectDeferredBegin(i.objId,!0),qt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[n]}},OP=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Bi.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(NP)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");lm=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Gx,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&AP(a,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var a=!n;for(var o in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var s=n[o],l=[],c=s.Rect;if(s.Rect&&(s.Rect=SP(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=et.createDefaultAppearanceStream(s),qt(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=c,s.hasAppearanceStream&&!s.appearanceStreamContent){var p=kP(s);l.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(s.appearanceStreamContent){var d="";for(var f in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(f)){var u=s.appearanceStreamContent[f];if(d+="/"+f+" ",d+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var o in u)if(u.hasOwnProperty(o)){var y=u[o];typeof y=="function"&&(y=y.call(i,s)),d+="/"+o+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=u)=="function"&&(y=y.call(i,s)),d+="/"+o+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:s.objId}),i.internal.out("endobj")}a&&EP(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},Wx=yr.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var i="[",a=0;a<t.length;a++)switch(a!==0&&(i+=" "),qt(t[a])){case"boolean":case"number":case"object":i+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+as(n(t[a].toString()))+")"):i+=t[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},f0=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+as(n(t))+")"},Ji=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ji.prototype.toString=function(){return this.objId+" 0 R"},Ji.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ji.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:Wx(i,this.objId,this.scope)}):i instanceof Ji?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var Vx=function(){Ji.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Un(Vx,Ji);var Gx=function(){Ji.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+as(r(t))+")"}},set:function(r){t=r}})};Un(Gx,Ji);var Bi=function t(){Ji.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute F supplied.');e=g}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Er(e,3)},set:function(g){g?this.F=Or(e,3):this.F=jr(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute Ff supplied.');r=g}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(g){n=g!==void 0?g:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(g){n[0]=g}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(g){n[1]=g}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(g){n[2]=g}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(g){n[3]=g}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(g){switch(g){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=g;break;default:throw new Error('Invalid value "'+g+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Jd)return;a="FieldObject"+t.FieldNum++}var g=function(m){return m};return this.scope&&(g=this.scope.internal.getEncryptor(this.objId)),"("+as(g(a))+")"},set:function(g){a=g.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(g){a=g}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(g){o=g}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(g){s=g}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(g){l=g}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/lm:c},set:function(g){c=g}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(g){p=g}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Jd||this instanceof Go))return f0(d,this.objId,this.scope)},set:function(g){g=g.toString(),d=g}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Kr?f:f0(f,this.objId,this.scope)},set:function(g){g=g.toString(),f=this instanceof Kr?g:g.substr(0,1)==="("?Bs(g.substr(1,g.length-2)):Bs(g)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Kr?Bs(f.substr(1,f.length-1)):f},set:function(g){g=g.toString(),f=this instanceof Kr?"/"+g:g}});var u=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(u)return u},set:function(g){this.V=g}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(u)return this instanceof Kr?u:f0(u,this.objId,this.scope)},set:function(g){g=g.toString(),u=this instanceof Kr?g:g.substr(0,1)==="("?Bs(g.substr(1,g.length-2)):Bs(g)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Kr?Bs(u.substr(1,u.length-1)):u},set:function(g){g=g.toString(),u=this instanceof Kr?"/"+g:g}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(g){g=!!g,v=g}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(g){y=g}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,1)},set:function(g){g?this.Ff=Or(this.Ff,1):this.Ff=jr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,2)},set:function(g){g?this.Ff=Or(this.Ff,2):this.Ff=jr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,3)},set:function(g){g?this.Ff=Or(this.Ff,3):this.Ff=jr(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(g){if([0,1,2].indexOf(g)===-1)throw new Error('Invalid value "'+g+'" for attribute Q supplied.');b=g}}),Object.defineProperty(this,"textAlign",{get:function(){var g;switch(b){case 0:default:g="left";break;case 1:g="center";break;case 2:g="right"}return g},configurable:!0,enumerable:!0,set:function(g){switch(g){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};Un(Bi,Ji);var cl=function(){Bi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Wx(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(a,o,s){s||(s=1);for(var l,c=[];l=o.exec(a);)c.push(l[s]);return c}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,18)},set:function(r){r?this.Ff=Or(this.Ff,18):this.Ff=jr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Or(this.Ff,19):this.Ff=jr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,20)},set:function(r){r?(this.Ff=Or(this.Ff,20),e.sort()):this.Ff=jr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,22)},set:function(r){r?this.Ff=Or(this.Ff,22):this.Ff=jr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,23)},set:function(r){r?this.Ff=Or(this.Ff,23):this.Ff=jr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,27)},set:function(r){r?this.Ff=Or(this.Ff,27):this.Ff=jr(this.Ff,27)}}),this.hasAppearanceStream=!1};Un(cl,Bi);var fl=function(){cl.call(this),this.fontName="helvetica",this.combo=!1};Un(fl,cl);var dl=function(){fl.call(this),this.combo=!0};Un(dl,fl);var sd=function(){dl.call(this),this.edit=!0};Un(sd,dl);var Kr=function(){Bi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,15)},set:function(r){r?this.Ff=Or(this.Ff,15):this.Ff=jr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,16)},set:function(r){r?this.Ff=Or(this.Ff,16):this.Ff=jr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,17)},set:function(r){r?this.Ff=Or(this.Ff,17):this.Ff=jr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,26)},set:function(r){r?this.Ff=Or(this.Ff,26):this.Ff=jr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+as(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){qt(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Un(Kr,Bi);var ld=function(){Kr.call(this),this.pushButton=!0};Un(ld,Kr);var hl=function(){Kr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Un(hl,Kr);var Jd=function(){var t,e;Bi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),n)o.push("/"+a+" ("+as(i(n[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){qt(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=et.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Un(Jd,Bi),hl.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},hl.prototype.createOption=function(t){var e=new Jd;return e.Parent=this,e.optionName=t,this.Kids.push(e),jP.call(this.scope,e),e};var ud=function(){Kr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=et.CheckBox.createAppearanceStream()};Un(ud,Kr);var Go=function(){Bi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,13)},set:function(e){e?this.Ff=Or(this.Ff,13):this.Ff=jr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,21)},set:function(e){e?this.Ff=Or(this.Ff,21):this.Ff=jr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,23)},set:function(e){e?this.Ff=Or(this.Ff,23):this.Ff=jr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,24)},set:function(e){e?this.Ff=Or(this.Ff,24):this.Ff=jr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,25)},set:function(e){e?this.Ff=Or(this.Ff,25):this.Ff=jr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,26)},set:function(e){e?this.Ff=Or(this.Ff,26):this.Ff=jr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Un(Go,Bi);var cd=function(){Go.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Er(this.Ff,14)},set:function(t){t?this.Ff=Or(this.Ff,14):this.Ff=jr(this.Ff,14)}}),this.password=!0};Un(cd,Go);var et={CheckBox:{createAppearanceStream:function(){return{N:{On:et.CheckBox.YesNormal},D:{On:et.CheckBox.YesPushDown,Off:et.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Gi(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=B1(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+vt(et.internal.getWidth(t))+" "+vt(et.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+vt(a.fontSize)+" Tf "+i),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Gi(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],a=et.internal.getHeight(t),o=et.internal.getWidth(t),s=B1(t,t.caption);return i.push("1 g"),i.push("0 0 "+vt(o)+" "+vt(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+vt(o-1)+" "+vt(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+vt(s.fontSize)+" Tf "+n),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Gi(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+vt(et.internal.getWidth(t))+" "+vt(et.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:et.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=et.RadioButton.Circle.YesNormal,e.D[t]=et.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Gi(t);e.scope=t.scope;var r=[],n=et.internal.getWidth(t)<=et.internal.getHeight(t)?et.internal.getWidth(t)/4:et.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=et.internal.Bezier_C,a=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Wa(et.internal.getWidth(t)/2)+" "+Wa(et.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Gi(t);e.scope=t.scope;var r=[],n=et.internal.getWidth(t)<=et.internal.getHeight(t)?et.internal.getWidth(t)/4:et.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*et.internal.Bezier_C).toFixed(5)),o=Number((n*et.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wa(et.internal.getWidth(t)/2)+" "+Wa(et.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Wa(et.internal.getWidth(t)/2)+" "+Wa(et.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Gi(t);e.scope=t.scope;var r=[],n=et.internal.getWidth(t)<=et.internal.getHeight(t)?et.internal.getWidth(t)/4:et.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*et.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wa(et.internal.getWidth(t)/2)+" "+Wa(et.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:et.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=et.RadioButton.Cross.YesNormal,e.D[t]=et.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Gi(t);e.scope=t.scope;var r=[],n=et.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+vt(et.internal.getWidth(t)-2)+" "+vt(et.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(vt(n.x1.x)+" "+vt(n.x1.y)+" m"),r.push(vt(n.x2.x)+" "+vt(n.x2.y)+" l"),r.push(vt(n.x4.x)+" "+vt(n.x4.y)+" m"),r.push(vt(n.x3.x)+" "+vt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Gi(t);e.scope=t.scope;var r=et.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+vt(et.internal.getWidth(t))+" "+vt(et.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+vt(et.internal.getWidth(t)-2)+" "+vt(et.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(vt(r.x1.x)+" "+vt(r.x1.y)+" m"),n.push(vt(r.x2.x)+" "+vt(r.x2.y)+" l"),n.push(vt(r.x4.x)+" "+vt(r.x4.y)+" m"),n.push(vt(r.x3.x)+" "+vt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Gi(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+vt(et.internal.getWidth(t))+" "+vt(et.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};et.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=et.internal.getWidth(t),r=et.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},et.internal.getWidth=function(t){var e=0;return qt(t)==="object"&&(e=my(t.Rect[2])),e},et.internal.getHeight=function(t){var e=0;return qt(t)==="object"&&(e=my(t.Rect[3])),e};var jP=yr.addField=function(t){if(OP(this,t),!(t instanceof Bi))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};yr.AcroFormChoiceField=cl,yr.AcroFormListBox=fl,yr.AcroFormComboBox=dl,yr.AcroFormEditBox=sd,yr.AcroFormButton=Kr,yr.AcroFormPushButton=ld,yr.AcroFormRadioButton=hl,yr.AcroFormCheckBox=ud,yr.AcroFormTextField=Go,yr.AcroFormPasswordField=cd,yr.AcroFormAppearance=et,yr.AcroForm={ChoiceField:cl,ListBox:fl,ComboBox:dl,EditBox:sd,Button:Kr,PushButton:ld,RadioButton:hl,CheckBox:ud,TextField:Go,PasswordField:cd,Appearance:et},ft.AcroForm={ChoiceField:cl,ListBox:fl,ComboBox:dl,EditBox:sd,Button:Kr,PushButton:ld,RadioButton:hl,CheckBox:ud,TextField:Go,PasswordField:cd,Appearance:et};ft.AcroForm;function Kx(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(k,E){var C,I,V,ee,te,Q=e;if((E=E||e)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(D(k))for(te in r)for(V=r[te],C=0;C<V.length;C+=1){for(ee=!0,I=0;I<V[C].length;I+=1)if(V[C][I]!==void 0&&V[C][I]!==k[I]){ee=!1;break}if(ee===!0){Q=te;break}}else for(te in r)for(V=r[te],C=0;C<V.length;C+=1){for(ee=!0,I=0;I<V[C].length;I+=1)if(V[C][I]!==void 0&&V[C][I]!==k.charCodeAt(I)){ee=!1;break}if(ee===!0){Q=te;break}}return Q===e&&E!==e&&(Q=E),Q},i=function k(E){for(var C=this.internal.write,I=this.internal.putStream,V=(0,this.internal.getFilters)();V.indexOf("FlateEncode")!==-1;)V.splice(V.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var ee=[];if(ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Image"}),ee.push({key:"Width",value:E.width}),ee.push({key:"Height",value:E.height}),E.colorSpace===b.INDEXED?ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(ee.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===b.DEVICE_CMYK&&ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ee.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&ee.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var te="",Q=0,Y=E.transparency.length;Q<Y;Q++)te+=E.transparency[Q]+" "+E.transparency[Q]+" ";ee.push({key:"Mask",value:"["+te+"]"})}E.sMask!==void 0&&ee.push({key:"SMask",value:E.objectId+1+" 0 R"});var W=E.filter!==void 0?["/"+E.filter]:void 0;if(I({data:E.data,additionalKeyValues:ee,alreadyAppliedFilters:W,objectId:E.objectId}),C("endobj"),"sMask"in E&&E.sMask!==void 0){var q="/Predictor "+E.predictor+" /Colors 1 /BitsPerComponent "+E.bitsPerComponent+" /Columns "+E.width,L={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:q,data:E.sMask};"filter"in E&&(L.filter=E.filter),k.call(this,L)}if(E.colorSpace===b.INDEXED){var M=this.internal.newObject();I({data:j(new Uint8Array(E.palette)),objectId:M}),C("endobj")}},a=function(){var k=this.internal.collections.addImage_images;for(var E in k)i.call(this,k[E])},o=function(){var k,E=this.internal.collections.addImage_images,C=this.internal.write;for(var I in E)C("/I"+(k=E[I]).index,k.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var k=this.internal.collections.addImage_images;return s.call(this),k},c=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(k){return typeof t["process"+k.toUpperCase()]=="function"},d=function(k){return qt(k)==="object"&&k.nodeType===1},f=function(k,E){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var C=""+k.getAttribute("src");if(C.indexOf("data:image/")===0)return Vu(unescape(C).split("base64,").pop());var I=t.loadFile(C,!0);if(I!==void 0)return I}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var V;switch(E){case"PNG":V="image/png";break;case"WEBP":V="image/webp";break;case"JPEG":case"JPG":default:V="image/jpeg"}return Vu(k.toDataURL(V,1).split("base64,").pop())}},u=function(k){var E=this.internal.collections.addImage_images;if(E){for(var C in E)if(k===E[C].alias)return E[C]}},y=function(k,E,C){return k||E||(k=-96,E=-96),k<0&&(k=-1*C.width*72/k/this.internal.scaleFactor),E<0&&(E=-1*C.height*72/E/this.internal.scaleFactor),k===0&&(k=E*C.width/C.height),E===0&&(E=k*C.height/C.width),[k,E]},v=function(k,E,C,I,V,ee){var te=y.call(this,C,I,V),Q=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,W=l.call(this);if(C=te[0],I=te[1],W[V.index]=V,ee){ee*=Math.PI/180;var q=Math.cos(ee),L=Math.sin(ee),M=function(H){return H.toFixed(4)},U=[M(q),M(L),M(-1*L),M(q),0,0,"cm"]}this.internal.write("q"),ee?(this.internal.write([1,"0","0",1,Q(k),Y(E+I),"cm"].join(" ")),this.internal.write(U.join(" ")),this.internal.write([Q(C),"0","0",Q(I),"0","0","cm"].join(" "))):this.internal.write([Q(C),"0","0",Q(I),Q(k),Y(E+I),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+V.index+" Do"),this.internal.write("Q")},b=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},m=t.__addimage__.sHashCode=function(k){var E,C,I=0;if(typeof k=="string")for(C=k.length,E=0;E<C;E++)I=(I<<5)-I+k.charCodeAt(E),I|=0;else if(D(k))for(C=k.byteLength/2,E=0;E<C;E++)I=(I<<5)-I+k[E],I|=0;return I},_=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var E=!0;return k.length===0&&(E=!1),k.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(E=!1),E},x=t.__addimage__.extractImageFromDataUrl=function(k){var E=(k=k||"").split("base64,"),C=null;if(E.length===2){var I=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(E[0]);Array.isArray(I)&&(C={mimeType:I[1],charset:I[2],data:E[1]})}return C},A=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(k){return A()&&k instanceof ArrayBuffer};var D=t.__addimage__.isArrayBufferView=function(k){return A()&&typeof Uint32Array<"u"&&(k instanceof Int8Array||k instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array)},T=t.__addimage__.binaryStringToUint8Array=function(k){for(var E=k.length,C=new Uint8Array(E),I=0;I<E;I++)C[I]=k.charCodeAt(I);return C},j=t.__addimage__.arrayBufferToBinaryString=function(k){for(var E="",C=D(k)?k:new Uint8Array(k),I=0;I<C.length;I+=8192)E+=String.fromCharCode.apply(null,C.subarray(I,I+8192));return E};t.addImage=function(){var k,E,C,I,V,ee,te,Q,Y;if(typeof arguments[1]=="number"?(E=e,C=arguments[1],I=arguments[2],V=arguments[3],ee=arguments[4],te=arguments[5],Q=arguments[6],Y=arguments[7]):(E=arguments[1],C=arguments[2],I=arguments[3],V=arguments[4],ee=arguments[5],te=arguments[6],Q=arguments[7],Y=arguments[8]),qt(k=arguments[0])==="object"&&!d(k)&&"imageData"in k){var W=k;k=W.imageData,E=W.format||E||e,C=W.x||C||0,I=W.y||I||0,V=W.w||W.width||V,ee=W.h||W.height||ee,te=W.alias||te,Q=W.compression||Q,Y=W.rotation||W.angle||Y}var q=this.internal.getFilters();if(Q===void 0&&q.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(C)||isNaN(I))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var L=B.call(this,k,E,te,Q);return v.call(this,C,I,V,ee,L,Y),this};var B=function(k,E,C,I){var V,ee,te;if(typeof k=="string"&&n(k)===e){k=unescape(k);var Q=P(k,!1);(Q!==""||(Q=t.loadFile(k,!0))!==void 0)&&(k=Q)}if(d(k)&&(k=f(k,E)),E=n(k,E),!p(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((te=C)==null||te.length===0)&&(C=function(Y){return typeof Y=="string"||D(Y)?m(Y):D(Y.data)?m(Y.data):null}(k)),(V=u.call(this,C))||(A()&&(k instanceof Uint8Array||E==="RGBA"||(ee=k,k=T(k))),V=this["process"+E.toUpperCase()](k,c.call(this),C,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in t.image_compression?Y:g.NONE}(I),ee)),!V)throw new Error("An unknown error occurred whilst processing the image.");return V},P=t.__addimage__.convertBase64ToBinaryString=function(k,E){var C;E=typeof E!="boolean"||E;var I,V="";if(typeof k=="string"){I=(C=x(k))!==null?C.data:k;try{V=Vu(I)}catch(ee){if(E)throw _(I)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};t.getImageProperties=function(k){var E,C,I="";if(d(k)&&(k=f(k)),typeof k=="string"&&n(k)===e&&((I=P(k,!1))===""&&(I=t.loadFile(k)||""),k=I),C=n(k),!p(C))throw new Error("addImage does not support files of type '"+C+"', please ensure that a plugin for '"+C+"' support is added.");if(!A()||k instanceof Uint8Array||(k=T(k)),!(E=this["process"+C.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=C,E}})(ft.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};ft.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,a,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,p=!1,d=0;d<c.length&&!p;d++)switch((n=c[d]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var f=0;f<c.length;f++){n=c[f];var u=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(v.objId),m=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+u(g(n.contents))+")",a+=" /Popup "+b.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+u(g(m))+") >>",v.content=a;var _=v.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+_,n.open&&(a+=" /Open true"),a+=" >>",b.content=a,this.internal.write(v.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var x=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+u(y(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+x+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var A=this.annotations._nameMap[n.options.name];n.options.pageNumber=A.page,n.options.top=A.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+u(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var D=s(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+D+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,a,o){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(r),y:c(n),w:l(r+i),h:c(n+a)},options:o,type:"link"})},t.textWithLink=function(r,n,i,a){var o,s,l=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var p=this.splitTextToSize(r,s).length;o=Math.ceil(c*p)}else s=l,o=c;return this.text(r,n,i,a),i+=.2*c,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,i-c,s,o,a),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(ft.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(v){return e[v.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},s=t.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&i.indexOf(v.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length>=3};var p=t.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(v){var b=0,g=r,m="",_=0;for(b=0;b<v.length;b+=1)g[v.charCodeAt(b)]!==void 0?(_++,typeof(g=g[v.charCodeAt(b)])=="number"&&(m+=String.fromCharCode(g),g=r,_=0),b===v.length-1&&(g=r,m+=v.charAt(b-(_-1)),b-=_-1,_=0)):(g=r,m+=v.charAt(b-_),b-=_,_=0);return m};t.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var f=t.__arabicParser__.getCorrectForm=function(v,b,g){return o(v)?a(v)===!1?-1:!c(v)||!o(b)&&!o(g)||!o(g)&&s(b)||s(v)&&!o(b)||s(v)&&l(b)||s(v)&&s(b)?0:p(v)&&o(b)&&!s(b)&&o(g)&&c(g)?3:s(v)||!o(g)?1:2:-1},u=function(v){var b=0,g=0,m=0,_="",x="",A="",D=(v=v||"").split("\\s+"),T=[];for(b=0;b<D.length;b+=1){for(T.push(""),g=0;g<D[b].length;g+=1)_=D[b][g],x=D[b][g-1],A=D[b][g+1],o(_)?(m=f(_,x,A),T[b]+=m!==-1?String.fromCharCode(e[_.charCodeAt(0)][m]):_):T[b]+=_;T[b]=d(T[b])}return T.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var v,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,g=[];if(Array.isArray(b)){var m=0;for(g=[],m=0;m<b.length;m+=1)Array.isArray(b[m])?g.push([u(b[m][0]),b[m][1],b[m][2]]):g.push([u(b[m])]);v=g}else v=u(b);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};t.events.push(["preProcessText",y])}(ft.API),ft.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(s){r=s}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(s){n=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ft.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var u=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(v){y=v}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){n.call(this);var p=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),f=c.scaleFactor||this.internal.scaleFactor,u=0,y=0,v=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var g=c.maxWidth;g>0?typeof l=="string"?l=this.splitTextToSize(l,g):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(_,x){return _.concat(b.splitTextToSize(x,g))},[])):l=Array.isArray(l)?l:[l];for(var m=0;m<l.length;m++)u<(v=this.getStringUnitWidth(l[m],{font:d})*p)&&(u=v);return u!==0&&(y=l.length),{w:u/=f,h:Math.max((y*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/f,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,u=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,u&&f&&(this.printHeaderRow(l.lineNumber,!0),l.y+=f[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-p,l.y+p,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+p,{align:"center",baseline:"top",maxWidth:l.width-p-p}):this.text(l.text,l.x+p,l.y+p,{align:"left",baseline:"top",maxWidth:l.width-p-p})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,p,d,f){if(n.call(this),!p)throw new Error("No data for PDF table.");var u,y,v,b,g=[],m=[],_=[],x={},A={},D=[],T=[],j=(f=f||{}).autoSize||!1,B=f.printHeaders!==!1,P=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,k=f.margins||Object.assign({width:this.getPageWidth()},e),E=typeof f.padding=="number"?f.padding:3,C=f.headerBackgroundColor||"#c8c8c8",I=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=P,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=C,this.internal.__cell__.headerTextColor=I,this.setFontSize(P),d==null)m=g=Object.keys(p[0]),_=g.map(function(){return"left"});else if(Array.isArray(d)&&qt(d[0])==="object")for(g=d.map(function(W){return W.name}),m=d.map(function(W){return W.prompt||W.name||""}),_=d.map(function(W){return W.align||"left"}),u=0;u<d.length;u+=1)A[d[u].name]=d[u].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(m=g=d,_=g.map(function(){return"left"}));if(j||Array.isArray(d)&&typeof d[0]=="string")for(u=0;u<g.length;u+=1){for(x[b=g[u]]=p.map(function(W){return W[b]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(m[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=x[b],this.setFont(void 0,"normal"),v=0;v<y.length;v+=1)D.push(this.getTextDimensions(y[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);A[b]=Math.max.apply(null,D)+E+E,D=[]}if(B){var V={};for(u=0;u<g.length;u+=1)V[g[u]]={},V[g[u]].text=m[u],V[g[u]].align=_[u];var ee=s.call(this,V,A);T=g.map(function(W){return new a(l,c,A[W],ee,V[W].text,void 0,V[W].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var te=d.reduce(function(W,q){return W[q.name]=q.align,W},{});for(u=0;u<p.length;u+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:u,data:p[u]},this);var Q=s.call(this,p[u],A);for(v=0;v<g.length;v+=1){var Y=p[u][g[v]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:u,col:v,data:Y},this),o.call(this,new a(l,c,A[g[v]],Q,Y,u+2,te[g[v]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var s=function(l,c){var p=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(l).map(function(u){var y=l[u];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,c[u]-p-p)},this).map(function(u){return this.getLineHeightFactor()*u.length*d/f+p+p},this).reduce(function(u,y){return Math.max(u,y)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],u=0;u<this.internal.__cell__.tableHeaderRow.length;u+=1){p=this.internal.__cell__.tableHeaderRow[u].clone(),c&&(p.y=this.internal.__cell__.margins.top||0,f.push(p)),p.lineNumber=l;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,p),this.setTextColor(y)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),r=!1}}(ft.API);var Yx={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Jx=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],F1=Kx(Jx),Xx=[100,200,300,400,500,600,700,800,900],TP=Kx(Xx);function q1(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return Yx[a=a||"normal"]?a:"normal"}(t.style),n=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(a){return typeof F1[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function vy(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var LP={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},yy={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function wy(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function PP(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",i=Object.assign({},LP,r.genericFontFamilies||{}),a=null,o=null,s=0;s<e.length;++s)if(i[(a=q1(e[s])).family]&&(a.family=i[a.family]),t.hasOwnProperty(a.family)){o=t[a.family];break}if(!(o=o||t[n]))throw new Error("Could not find a font-family for the rule '"+wy(a)+"' and default family '"+n+"'.");if(o=function(l,c){if(c[l])return c[l];var p=F1[l],d=p<=F1.normal?-1:1,f=vy(c,Jx,p,d);if(!f)throw new Error("Could not find a matching font-stretch value for "+l);return f}(a.stretch,o),o=function(l,c){if(c[l])return c[l];for(var p=Yx[l],d=0;d<p.length;++d)if(c[p[d]])return c[p[d]];throw new Error("Could not find a matching font-style for "+l)}(a.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var p=TP[l],d=vy(c,Xx,p,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(a.weight,o)))throw new Error("Failed to resolve a font for the rule '"+wy(a)+"'.");return o}function by(t){return t.trimLeft()}function CP(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function RP(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Hf,xy,_y,d0=["times"];(function(t){var e,r,n,i,a,o,s,l,c,p=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new l,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new o,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new o,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,c=new p}]);var d=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var M=L;Object.defineProperty(this,"pdf",{get:function(){return M}});var U=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return U},set:function(Se){U=!!Se}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(Se){H=!!Se}});var F=0;Object.defineProperty(this,"posX",{get:function(){return F},set:function(Se){isNaN(Se)||(F=Se)}});var J=0;Object.defineProperty(this,"posY",{get:function(){return J},set:function(Se){isNaN(Se)||(J=Se)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Se){var ae;typeof Se=="number"?ae=[Se,Se,Se,Se]:((ae=new Array(4))[0]=Se[0],ae[1]=Se.length>=2?Se[1]:ae[0],ae[2]=Se.length>=3?Se[2]:ae[0],ae[3]=Se.length>=4?Se[3]:ae[1]),c.margin=ae}});var re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return re},set:function(Se){re=Se}});var ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return ne},set:function(Se){ne=Se}});var de=[];Object.defineProperty(this,"pageBreaks",{get:function(){return de},set:function(Se){de=Se}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Se){Se instanceof p&&(c=Se)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Se){c.path=Se}});var xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return xe},set:function(Se){xe=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var ae;ae=f(Se),this.ctx.fillStyle=ae.style,this.ctx.isFillTransparent=ae.a===0,this.ctx.fillOpacity=ae.a,this.pdf.setFillColor(ae.r,ae.g,ae.b,{a:ae.a}),this.pdf.setTextColor(ae.r,ae.g,ae.b,{a:ae.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var ae=f(Se);this.ctx.strokeStyle=ae.style,this.ctx.isStrokeTransparent=ae.a===0,this.ctx.strokeOpacity=ae.a,ae.a===0?this.pdf.setDrawColor(255,255,255):(ae.a,this.pdf.setDrawColor(ae.r,ae.g,ae.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var je=null;function Ee(Se,ae){if(je===null){var Ve=function(pe){var se=[];return Object.keys(pe).forEach(function(he){pe[he].forEach(function(ye){var ge=null;switch(ye){case"bold":ge={family:he,weight:"bold"};break;case"italic":ge={family:he,style:"italic"};break;case"bolditalic":ge={family:he,weight:"bold",style:"italic"};break;case"":case"normal":ge={family:he}}ge!==null&&(ge.ref={name:he,style:ye},se.push(ge))})}),se}(Se.getFontList());je=function(pe){for(var se={},he=0;he<pe.length;++he){var ye=q1(pe[he]),ge=ye.family,Ie=ye.stretch,qe=ye.style,Ue=ye.weight;se[ge]=se[ge]||{},se[ge][Ie]=se[ge][Ie]||{},se[ge][Ie][qe]=se[ge][Ie][qe]||{},se[ge][Ie][qe][Ue]=ye}return se}(Ve.concat(ae))}return je}var Me=null;Object.defineProperty(this,"fontFaces",{get:function(){return Me},set:function(Se){je=null,Me=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var ae;if(this.ctx.font=Se,(ae=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var Ve=ae[1],pe=(ae[2],ae[3]),se=ae[4],he=(ae[5],ae[6]),ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(se)[2];se=Math.floor(ye==="px"?parseFloat(se)*this.pdf.internal.scaleFactor:ye==="em"?parseFloat(se)*this.pdf.getFontSize():parseFloat(se)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(se);var ge=function(ot){var tt,ze,br=[],bt=ot.trim();if(bt==="")return d0;if(bt in yy)return[yy[bt]];for(;bt!=="";){switch(ze=null,tt=(bt=by(bt)).charAt(0)){case'"':case"'":ze=CP(bt.substring(1),tt);break;default:ze=RP(bt)}if(ze===null||(br.push(ze[0]),(bt=by(ze[1]))!==""&&bt.charAt(0)!==","))return d0;bt=bt.replace(/^,/,"")}return br}(he);if(this.fontFaces){var Ie=PP(Ee(this.pdf,this.fontFaces),ge.map(function(ot){return{family:ot,stretch:"normal",weight:pe,style:Ve}}));this.pdf.setFont(Ie.ref.name,Ie.ref.style)}else{var qe="";(pe==="bold"||parseInt(pe,10)>=700||Ve==="bold")&&(qe="bold"),Ve==="italic"&&(qe+="italic"),qe.length===0&&(qe="normal");for(var Ue="",rt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},lt=0;lt<ge.length;lt++){if(this.pdf.internal.getFont(ge[lt],qe,{noFallback:!0,disableWarning:!0})!==void 0){Ue=ge[lt];break}if(qe==="bolditalic"&&this.pdf.internal.getFont(ge[lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ue=ge[lt],qe="bold";else if(this.pdf.internal.getFont(ge[lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ue=ge[lt],qe="normal";break}}if(Ue===""){for(var at=0;at<ge.length;at++)if(rt[ge[at]]){Ue=rt[ge[at]];break}}Ue=Ue===""?"Times":Ue,this.pdf.setFont(Ue,qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};d.prototype.setLineDash=function(L){this.lineDash=L},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){x.call(this,"fill",!1)},d.prototype.stroke=function(){x.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(L,M){if(isNaN(L)||isNaN(M))throw Jt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var U=this.ctx.transform.applyToPoint(new o(L,M));this.path.push({type:"mt",x:U.x,y:U.y}),this.ctx.lastPoint=new o(L,M)},d.prototype.closePath=function(){var L=new o(0,0),M=0;for(M=this.path.length-1;M!==-1;M--)if(this.path[M].type==="begin"&&qt(this.path[M+1])==="object"&&typeof this.path[M+1].x=="number"){L=new o(this.path[M+1].x,this.path[M+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(L.x,L.y)},d.prototype.lineTo=function(L,M){if(isNaN(L)||isNaN(M))throw Jt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var U=this.ctx.transform.applyToPoint(new o(L,M));this.path.push({type:"lt",x:U.x,y:U.y}),this.ctx.lastPoint=new o(U.x,U.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),x.call(this,null,!0)},d.prototype.quadraticCurveTo=function(L,M,U,H){if(isNaN(U)||isNaN(H)||isNaN(L)||isNaN(M))throw Jt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var F=this.ctx.transform.applyToPoint(new o(U,H)),J=this.ctx.transform.applyToPoint(new o(L,M));this.path.push({type:"qct",x1:J.x,y1:J.y,x:F.x,y:F.y}),this.ctx.lastPoint=new o(F.x,F.y)},d.prototype.bezierCurveTo=function(L,M,U,H,F,J){if(isNaN(F)||isNaN(J)||isNaN(L)||isNaN(M)||isNaN(U)||isNaN(H))throw Jt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var re=this.ctx.transform.applyToPoint(new o(F,J)),ne=this.ctx.transform.applyToPoint(new o(L,M)),de=this.ctx.transform.applyToPoint(new o(U,H));this.path.push({type:"bct",x1:ne.x,y1:ne.y,x2:de.x,y2:de.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},d.prototype.arc=function(L,M,U,H,F,J){if(isNaN(L)||isNaN(M)||isNaN(U)||isNaN(H)||isNaN(F))throw Jt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(J=!!J,!this.ctx.transform.isIdentity){var re=this.ctx.transform.applyToPoint(new o(L,M));L=re.x,M=re.y;var ne=this.ctx.transform.applyToPoint(new o(0,U)),de=this.ctx.transform.applyToPoint(new o(0,0));U=Math.sqrt(Math.pow(ne.x-de.x,2)+Math.pow(ne.y-de.y,2))}Math.abs(F-H)>=2*Math.PI&&(H=0,F=2*Math.PI),this.path.push({type:"arc",x:L,y:M,radius:U,startAngle:H,endAngle:F,counterclockwise:J})},d.prototype.arcTo=function(L,M,U,H,F){throw new Error("arcTo not implemented.")},d.prototype.rect=function(L,M,U,H){if(isNaN(L)||isNaN(M)||isNaN(U)||isNaN(H))throw Jt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,M),this.lineTo(L+U,M),this.lineTo(L+U,M+H),this.lineTo(L,M+H),this.lineTo(L,M),this.lineTo(L+U,M),this.lineTo(L,M)},d.prototype.fillRect=function(L,M,U,H){if(isNaN(L)||isNaN(M)||isNaN(U)||isNaN(H))throw Jt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!u.call(this)){var F={};this.lineCap!=="butt"&&(F.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(F.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,M,U,H),this.fill(),F.hasOwnProperty("lineCap")&&(this.lineCap=F.lineCap),F.hasOwnProperty("lineJoin")&&(this.lineJoin=F.lineJoin)}},d.prototype.strokeRect=function(L,M,U,H){if(isNaN(L)||isNaN(M)||isNaN(U)||isNaN(H))throw Jt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(L,M,U,H),this.stroke())},d.prototype.clearRect=function(L,M,U,H){if(isNaN(L)||isNaN(M)||isNaN(U)||isNaN(H))throw Jt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,M,U,H))},d.prototype.save=function(L){L=typeof L!="boolean"||L;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("q");if(this.pdf.setPage(M),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},d.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("Q");this.pdf.setPage(M),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(L){var M,U,H,F;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))M=0,U=0,H=0,F=0;else{var J=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(J!==null)M=parseInt(J[1]),U=parseInt(J[2]),H=parseInt(J[3]),F=1;else if((J=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)M=parseInt(J[1]),U=parseInt(J[2]),H=parseInt(J[3]),F=parseFloat(J[4]);else{if(F=1,typeof L=="string"&&L.charAt(0)!=="#"){var re=new zx(L);L=re.ok?re.toHex():"#000000"}L.length===4?(M=L.substring(1,2),M+=M,U=L.substring(2,3),U+=U,H=L.substring(3,4),H+=H):(M=L.substring(1,3),U=L.substring(3,5),H=L.substring(5,7)),M=parseInt(M,16),U=parseInt(U,16),H=parseInt(H,16)}}return{r:M,g:U,b:H,a:F,style:L}},u=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(L,M,U,H){if(isNaN(M)||isNaN(U)||typeof L!="string")throw Jt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!u.call(this)){var F=Q(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;E.call(this,{text:L,x:M,y:U,scale:J,angle:F,align:this.textAlign,maxWidth:H})}},d.prototype.strokeText=function(L,M,U,H){if(isNaN(M)||isNaN(U)||typeof L!="string")throw Jt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){H=isNaN(H)?void 0:H;var F=Q(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;E.call(this,{text:L,x:M,y:U,scale:J,renderingMode:"stroke",angle:F,align:this.textAlign,maxWidth:H})}},d.prototype.measureText=function(L){if(typeof L!="string")throw Jt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var M=this.pdf,U=this.pdf.internal.scaleFactor,H=M.internal.getFontSize(),F=M.getStringUnitWidth(L)*H/M.internal.scaleFactor,J=function(re){var ne=(re=re||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ne}}),this};return new J({width:F*=Math.round(96*U/72*1e4)/1e4})},d.prototype.scale=function(L,M){if(isNaN(L)||isNaN(M))throw Jt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var U=new l(L,0,0,M,0,0);this.ctx.transform=this.ctx.transform.multiply(U)},d.prototype.rotate=function(L){if(isNaN(L))throw Jt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var M=new l(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(M)},d.prototype.translate=function(L,M){if(isNaN(L)||isNaN(M))throw Jt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var U=new l(1,0,0,1,L,M);this.ctx.transform=this.ctx.transform.multiply(U)},d.prototype.transform=function(L,M,U,H,F,J){if(isNaN(L)||isNaN(M)||isNaN(U)||isNaN(H)||isNaN(F)||isNaN(J))throw Jt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var re=new l(L,M,U,H,F,J);this.ctx.transform=this.ctx.transform.multiply(re)},d.prototype.setTransform=function(L,M,U,H,F,J){L=isNaN(L)?1:L,M=isNaN(M)?0:M,U=isNaN(U)?0:U,H=isNaN(H)?1:H,F=isNaN(F)?0:F,J=isNaN(J)?0:J,this.ctx.transform=new l(L,M,U,H,F,J)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(L,M,U,H,F,J,re,ne,de){var xe=this.pdf.getImageProperties(L),je=1,Ee=1,Me=1,Se=1;H!==void 0&&ne!==void 0&&(Me=ne/H,Se=de/F,je=xe.width/H*ne/H,Ee=xe.height/F*de/F),J===void 0&&(J=M,re=U,M=0,U=0),H!==void 0&&ne===void 0&&(ne=H,de=F),H===void 0&&ne===void 0&&(ne=xe.width,de=xe.height);for(var ae,Ve=this.ctx.transform.decompose(),pe=Q(Ve.rotate.shx),se=new l,he=(se=(se=(se=se.multiply(Ve.translate)).multiply(Ve.skew)).multiply(Ve.scale)).applyToRectangle(new s(J-M*Me,re-U*Se,H*je,F*Ee)),ye=b.call(this,he),ge=[],Ie=0;Ie<ye.length;Ie+=1)ge.indexOf(ye[Ie])===-1&&ge.push(ye[Ie]);if(_(ge),this.autoPaging)for(var qe=ge[0],Ue=ge[ge.length-1],rt=qe;rt<Ue+1;rt++){this.pdf.setPage(rt);var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],at=rt===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=rt===1?0:ot+(rt-2)*tt;if(this.ctx.clip_path.length!==0){var br=this.path;ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(ae,this.posX+this.margin[3],-ze+at+this.ctx.prevPageLastElemOffset),A.call(this,"fill",!0),this.path=br}var bt=JSON.parse(JSON.stringify(he));bt=m([bt],this.posX+this.margin[3],-ze+at+this.ctx.prevPageLastElemOffset)[0];var zr=(rt>qe||rt<Ue)&&v.call(this);zr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,tt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",bt.x,bt.y,bt.w,bt.h,null,null,pe),zr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",he.x,he.y,he.w,he.h,null,null,pe)};var b=function(L,M,U){var H=[];M=M||this.pdf.internal.pageSize.width,U=U||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var F=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":H.push(Math.floor((L.y+F)/U)+1);break;case"arc":H.push(Math.floor((L.y+F-L.radius)/U)+1),H.push(Math.floor((L.y+F+L.radius)/U)+1);break;case"qct":var J=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);H.push(Math.floor((J.y+F)/U)+1),H.push(Math.floor((J.y+J.h+F)/U)+1);break;case"bct":var re=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);H.push(Math.floor((re.y+F)/U)+1),H.push(Math.floor((re.y+re.h+F)/U)+1);break;case"rect":H.push(Math.floor((L.y+F)/U)+1),H.push(Math.floor((L.y+L.h+F)/U)+1)}for(var ne=0;ne<H.length;ne+=1)for(;this.pdf.internal.getNumberOfPages()<H[ne];)g.call(this);return H},g=function(){var L=this.fillStyle,M=this.strokeStyle,U=this.font,H=this.lineCap,F=this.lineWidth,J=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=M,this.font=U,this.lineCap=H,this.lineWidth=F,this.lineJoin=J},m=function(L,M,U){for(var H=0;H<L.length;H++)switch(L[H].type){case"bct":L[H].x2+=M,L[H].y2+=U;case"qct":L[H].x1+=M,L[H].y1+=U;case"mt":case"lt":case"arc":default:L[H].x+=M,L[H].y+=U}return L},_=function(L){return L.sort(function(M,U){return M-U})},x=function(L,M){for(var U,H,F=this.fillStyle,J=this.strokeStyle,re=this.lineCap,ne=this.lineWidth,de=Math.abs(ne*this.ctx.transform.scaleX),xe=this.lineJoin,je=JSON.parse(JSON.stringify(this.path)),Ee=JSON.parse(JSON.stringify(this.path)),Me=[],Se=0;Se<Ee.length;Se++)if(Ee[Se].x!==void 0)for(var ae=b.call(this,Ee[Se]),Ve=0;Ve<ae.length;Ve+=1)Me.indexOf(ae[Ve])===-1&&Me.push(ae[Ve]);for(var pe=0;pe<Me.length;pe++)for(;this.pdf.internal.getNumberOfPages()<Me[pe];)g.call(this);if(_(Me),this.autoPaging)for(var se=Me[0],he=Me[Me.length-1],ye=se;ye<he+1;ye++){this.pdf.setPage(ye),this.fillStyle=F,this.strokeStyle=J,this.lineCap=re,this.lineWidth=de,this.lineJoin=xe;var ge=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ie=ye===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=ye===1?0:qe+(ye-2)*Ue;if(this.ctx.clip_path.length!==0){var lt=this.path;U=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(U,this.posX+this.margin[3],-rt+Ie+this.ctx.prevPageLastElemOffset),A.call(this,L,!0),this.path=lt}if(H=JSON.parse(JSON.stringify(je)),this.path=m(H,this.posX+this.margin[3],-rt+Ie+this.ctx.prevPageLastElemOffset),M===!1||ye===0){var at=(ye>se||ye<he)&&v.call(this);at&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ge,Ue,null).clip().discardPath()),A.call(this,L,M),at&&this.pdf.restoreGraphicsState()}this.lineWidth=ne}else this.lineWidth=de,A.call(this,L,M),this.lineWidth=ne;this.path=je},A=function(L,M){if((L!=="stroke"||M||!y.call(this))&&(L==="stroke"||M||!u.call(this))){for(var U,H,F=[],J=this.path,re=0;re<J.length;re++){var ne=J[re];switch(ne.type){case"begin":F.push({begin:!0});break;case"close":F.push({close:!0});break;case"mt":F.push({start:ne,deltas:[],abs:[]});break;case"lt":var de=F.length;if(J[re-1]&&!isNaN(J[re-1].x)&&(U=[ne.x-J[re-1].x,ne.y-J[re-1].y],de>0)){for(;de>=0;de--)if(F[de-1].close!==!0&&F[de-1].begin!==!0){F[de-1].deltas.push(U),F[de-1].abs.push(ne);break}}break;case"bct":U=[ne.x1-J[re-1].x,ne.y1-J[re-1].y,ne.x2-J[re-1].x,ne.y2-J[re-1].y,ne.x-J[re-1].x,ne.y-J[re-1].y],F[F.length-1].deltas.push(U);break;case"qct":var xe=J[re-1].x+2/3*(ne.x1-J[re-1].x),je=J[re-1].y+2/3*(ne.y1-J[re-1].y),Ee=ne.x+2/3*(ne.x1-ne.x),Me=ne.y+2/3*(ne.y1-ne.y),Se=ne.x,ae=ne.y;U=[xe-J[re-1].x,je-J[re-1].y,Ee-J[re-1].x,Me-J[re-1].y,Se-J[re-1].x,ae-J[re-1].y],F[F.length-1].deltas.push(U);break;case"arc":F.push({deltas:[],abs:[],arc:!0}),Array.isArray(F[F.length-1].abs)&&F[F.length-1].abs.push(ne)}}H=M?null:L==="stroke"?"stroke":"fill";for(var Ve=!1,pe=0;pe<F.length;pe++)if(F[pe].arc)for(var se=F[pe].abs,he=0;he<se.length;he++){var ye=se[he];ye.type==="arc"?j.call(this,ye.x,ye.y,ye.radius,ye.startAngle,ye.endAngle,ye.counterclockwise,void 0,M,!Ve):C.call(this,ye.x,ye.y),Ve=!0}else if(F[pe].close===!0)this.pdf.internal.out("h"),Ve=!1;else if(F[pe].begin!==!0){var ge=F[pe].start.x,Ie=F[pe].start.y;I.call(this,F[pe].deltas,ge,Ie),Ve=!0}H&&B.call(this,H),M&&P.call(this)}},D=function(L){var M=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,U=M*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-U;case"top":return L+M-U;case"hanging":return L+M-2*U;case"middle":return L+M/2-U;case"ideographic":return L;case"alphabetic":default:return L}},T=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(M,U){this.colorStops.push([M,U])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var j=function(L,M,U,H,F,J,re,ne,de){for(var xe=ee.call(this,U,H,F,J),je=0;je<xe.length;je++){var Ee=xe[je];je===0&&(de?k.call(this,Ee.x1+L,Ee.y1+M):C.call(this,Ee.x1+L,Ee.y1+M)),V.call(this,L,M,Ee.x2,Ee.y2,Ee.x3,Ee.y3,Ee.x4,Ee.y4)}ne?P.call(this):B.call(this,re)},B=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},P=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(L,M){this.pdf.internal.out(r(L)+" "+n(M)+" m")},E=function(L){var M;switch(L.align){case"right":case"end":M="right";break;case"center":M="center";break;case"left":case"start":default:M="left"}var U=this.pdf.getTextDimensions(L.text),H=D.call(this,L.y),F=T.call(this,H)-U.h,J=this.ctx.transform.applyToPoint(new o(L.x,H)),re=this.ctx.transform.decompose(),ne=new l;ne=(ne=(ne=ne.multiply(re.translate)).multiply(re.skew)).multiply(re.scale);for(var de,xe,je,Ee=this.ctx.transform.applyToRectangle(new s(L.x,H,U.w,U.h)),Me=ne.applyToRectangle(new s(L.x,F,U.w,U.h)),Se=b.call(this,Me),ae=[],Ve=0;Ve<Se.length;Ve+=1)ae.indexOf(Se[Ve])===-1&&ae.push(Se[Ve]);if(_(ae),this.autoPaging)for(var pe=ae[0],se=ae[ae.length-1],he=pe;he<se+1;he++){this.pdf.setPage(he);var ye=he===1?this.posY+this.margin[0]:this.margin[0],ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ie=this.pdf.internal.pageSize.height-this.margin[2],qe=Ie-this.margin[0],Ue=this.pdf.internal.pageSize.width-this.margin[1],rt=Ue-this.margin[3],lt=he===1?0:ge+(he-2)*qe;if(this.ctx.clip_path.length!==0){var at=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(de,this.posX+this.margin[3],-1*lt+ye),A.call(this,"fill",!0),this.path=at}var ot=m([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-lt+ye+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*L.scale),je=this.lineWidth,this.lineWidth=je*L.scale);var tt=this.autoPaging!=="text";if(tt||ot.y+ot.h<=Ie){if(tt||ot.y>=ye&&ot.x<=Ue){var ze=tt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Ue-ot.x)[0],br=m([JSON.parse(JSON.stringify(Ee))],this.posX+this.margin[3],-lt+ye+this.ctx.prevPageLastElemOffset)[0],bt=tt&&(he>pe||he<se)&&v.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rt,qe,null).clip().discardPath()),this.pdf.text(ze,br.x,br.y,{angle:L.angle,align:M,renderingMode:L.renderingMode}),bt&&this.pdf.restoreGraphicsState()}}else ot.y<Ie&&(this.ctx.prevPageLastElemOffset+=Ie-ot.y);L.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=je)}else L.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*L.scale),je=this.lineWidth,this.lineWidth=je*L.scale),this.pdf.text(L.text,J.x+this.posX,J.y+this.posY,{angle:L.angle,align:M,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=je)},C=function(L,M,U,H){U=U||0,H=H||0,this.pdf.internal.out(r(L+U)+" "+n(M+H)+" l")},I=function(L,M,U){return this.pdf.lines(L,M,U,null,null)},V=function(L,M,U,H,F,J,re,ne){this.pdf.internal.out([e(i(U+L)),e(a(H+M)),e(i(F+L)),e(a(J+M)),e(i(re+L)),e(a(ne+M)),"c"].join(" "))},ee=function(L,M,U,H){for(var F=2*Math.PI,J=Math.PI/2;M>U;)M-=F;var re=Math.abs(U-M);re<F&&H&&(re=F-re);for(var ne=[],de=H?-1:1,xe=M;re>1e-5;){var je=xe+de*Math.min(re,J);ne.push(te.call(this,L,xe,je)),re-=Math.abs(je-xe),xe=je}return ne},te=function(L,M,U){var H=(U-M)/2,F=L*Math.cos(H),J=L*Math.sin(H),re=F,ne=-J,de=re*re+ne*ne,xe=de+re*F+ne*J,je=4/3*(Math.sqrt(2*de*xe)-xe)/(re*J-ne*F),Ee=re-je*ne,Me=ne+je*re,Se=Ee,ae=-Me,Ve=H+M,pe=Math.cos(Ve),se=Math.sin(Ve);return{x1:L*Math.cos(M),y1:L*Math.sin(M),x2:Ee*pe-Me*se,y2:Ee*se+Me*pe,x3:Se*pe-ae*se,y3:Se*se+ae*pe,x4:L*Math.cos(U),y4:L*Math.sin(U)}},Q=function(L){return 180*L/Math.PI},Y=function(L,M,U,H,F,J){var re=L+.5*(U-L),ne=M+.5*(H-M),de=F+.5*(U-F),xe=J+.5*(H-J),je=Math.min(L,F,re,de),Ee=Math.max(L,F,re,de),Me=Math.min(M,J,ne,xe),Se=Math.max(M,J,ne,xe);return new s(je,Me,Ee-je,Se-Me)},W=function(L,M,U,H,F,J,re,ne){var de,xe,je,Ee,Me,Se,ae,Ve,pe,se,he,ye,ge,Ie,qe=U-L,Ue=H-M,rt=F-U,lt=J-H,at=re-F,ot=ne-J;for(xe=0;xe<41;xe++)pe=(ae=(je=L+(de=xe/40)*qe)+de*((Me=U+de*rt)-je))+de*(Me+de*(F+de*at-Me)-ae),se=(Ve=(Ee=M+de*Ue)+de*((Se=H+de*lt)-Ee))+de*(Se+de*(J+de*ot-Se)-Ve),xe==0?(he=pe,ye=se,ge=pe,Ie=se):(he=Math.min(he,pe),ye=Math.min(ye,se),ge=Math.max(ge,pe),Ie=Math.max(Ie,se));return new s(Math.round(he),Math.round(ye),Math.round(ge-he),Math.round(Ie-ye))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,M,U=(L=this.ctx.lineDash,M=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:M}));this.prevLineDash!==U&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=U)}}})(ft.API),function(t){var e=function(a){var o,s,l,c,p,d,f,u,y,v;for(s=[],l=0,c=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;c>l;l+=4)(p=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(d=(p=((p=((p=((p=(p-(v=p%85))/85)-(y=p%85))/85)-(u=p%85))/85)-(f=p%85))/85)%85,s.push(d+33,f+33,u+33,y+33,v+33)):s.push(122);return function(b,g){for(var m=g;m>0;m--)b.pop()}(s,o.length),String.fromCharCode.apply(String,s)+"~>"},r=function(a){var o,s,l,c,p,d=String,f="length",u=255,y="charCodeAt",v="slice",b="replace";for(a[v](-2),a=a[v](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),l=[],c=0,p=(a+=o="uuuuu"[v](a[f]%5||5))[f];p>c;c+=5)s=52200625*(a[y](c)-33)+614125*(a[y](c+1)-33)+7225*(a[y](c+2)-33)+85*(a[y](c+3)-33)+(a[y](c+4)-33),l.push(u&s>>24,u&s>>16,u&s>>8,u&s);return function(g,m){for(var _=m;_>0;_--)g.pop()}(l,o[f]),d.fromCharCode.apply(d,l)},n=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var s="",l=0;l<a.length;l+=2)s+=String.fromCharCode("0x"+(a[l]+a[l+1]));return s},i=function(a){for(var o=new Uint8Array(a.length),s=a.length;s--;)o[s]=a.charCodeAt(s);return a=(o=R1(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(a,o){var s=0,l=a||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),s=0;s<o.length;s+=1)switch(o[s]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[s]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(ft.API),function(t){t.loadFile=function(e,r,n){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(l,c,p){var d=new XMLHttpRequest,f=0,u=function(y){var v=y.length,b=[],g=String.fromCharCode;for(f=0;f<v;f+=1)b.push(g(255&y.charCodeAt(f)));return b.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?p(u(this.responseText)):p(void 0)}),d.send(null),c&&d.status===200)return u(d.responseText)}(i,a,o)}catch{}return s}(e,r,n)},t.loadImageFile=t.loadFile}(ft.API),function(t){function e(){return(ht.html2canvas?Promise.resolve(ht.html2canvas):j1(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(ht.DOMPurify?Promise.resolve(ht.DOMPurify):j1(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var s=qt(o);return s==="undefined"?"undefined":s==="string"||o instanceof String?"string":s==="number"||o instanceof Number?"number":s==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":s==="object"?"object":"unknown"},i=function(o,s){var l=document.createElement(o);for(var c in s.className&&(l.className=s.className),s.innerHTML&&s.dompurify&&(l.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)l.style[c]=s.style[c];return l},a=function o(s){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(s)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,s){return o.__proto__=s||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,s){return this.then(function(){switch(s=s||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function l(c,p){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)p!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,p));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,s(this.prop.container,l)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var l=this.opt.jsPDF,c=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var f=0;f<c.length;++f){var u=c[f],y=u.src.find(function(v){return v.format==="truetype"});y&&l.addFont(y.url,u.ref.name,u.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),s(this.prop.container,d)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,s,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,s):this.outputPdf(o,s)},a.prototype.outputPdf=function(o,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,s)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var s=Object.keys(o||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(s)})},a.prototype.get=function(o,s){return this.then(function(){var l=o in a.template.prop?this.prop[o]:this.opt[o];return s?s(l):l})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function s(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||ft.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:s(o.inner.width,o.k),height:s(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,s,l,c){return o!=null&&(this.progress.val=o),s!=null&&(this.progress.state=s),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,s,l,c){return this.setProgress(o?this.progress.val+o:null,s||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},a.prototype.then=function(o,s){var l=this;return this.thenCore(o,s,function(c,p){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,c),d}).then(c,p).then(function(d){return l.updateProgress(1),d})})},a.prototype.thenCore=function(o,s,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),s&&(s=s.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),p=l.call(c,o,s);return a.convert(p,this.__proto__)},a.prototype.thenExternal=function(o,s){return Promise.prototype.then.call(this,o,s)},a.prototype.thenList=function(o){var s=this;return o.forEach(function(l){s=s.thenCore(l)}),s},a.prototype.catch=function(o){o&&(o=o.bind(this));var s=Promise.prototype.catch.call(this,o);return a.convert(s,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,ft.getPageSize=function(o,s,l){if(qt(o)==="object"){var c=o;o=c.orientation,s=c.unit||s,l=c.format||l}s=s||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var p,d=(""+l).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+s}var u,y=0,v=0;if(f.hasOwnProperty(d))y=f[d][1]/p,v=f[d][0]/p;else try{y=l[1],v=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",v>y&&(u=v,v=y,y=u);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>v&&(u=v,v=y,y=u)}return{width:v,height:y,unit:s,k:p,orientation:o}},t.html=function(o,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(q1):null;var l=new a(s);return s.worker?l:l.from(o).doCallback()}}(ft.API),ft.API.addJS=function(t){return _y=t,this.internal.events.subscribe("postPutResources",function(){Hf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Hf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),xy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+_y+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Hf!==void 0&&xy!==void 0&&this.internal.out("/Names <</JavaScript "+Hf+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],s=n.exec(o);if(s!=null){var l=s[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,p=[];for(a=0;a<c;a++){var d=r.internal.newObject();p.push(d);var f=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var u=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<p.length;a++)r.internal.write("(page_"+(a+1)+")"+p[a]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+u+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,a){var o={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var o=n.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var l=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(ft.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,a,o,s){var l,c=this.decode.DCT_DECODE,p=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(d){for(var f,u=256*d.charCodeAt(4)+d.charCodeAt(5),y=d.length,v={width:0,height:0,numcomponents:1},b=4;b<y;b+=2){if(b+=u,e.indexOf(d.charCodeAt(b+1))!==-1){f=256*d.charCodeAt(b+5)+d.charCodeAt(b+6),v={width:256*d.charCodeAt(b+7)+d.charCodeAt(b+8),height:f,numcomponents:d.charCodeAt(b+9)};break}u=256*d.charCodeAt(b+2)+d.charCodeAt(b+3)}return v}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}p={data:r,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:c,index:n,alias:i}}return p}}(ft.API);var Fs,Wf,Sy,ky,Ny,IP=function(){var t,e,r;function n(a){var o,s,l,c,p,d,f,u,y,v,b,g,m,_;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),y=(function(){var x,A;for(A=[],x=0;x<4;++x)A.push(String.fromCharCode(this.data[this.pos++]));return A}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),c=this.readUInt16()||100,d.delay=1e3*p/c,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),a=(d!=null?d.data:void 0)||this.imgData,g=0;0<=o?g<o:g>o;0<=o?++g:--g)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((v=l-this.transparency.indexed.length)>0)for(m=0;0<=v?m<v:m>v;0<=v?++m:--m)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":f=(b=this.read(o)).indexOf(0),u=String.fromCharCode.apply(String,b.slice(0,f)),this.text[u]=String.fromCharCode.apply(String,b.slice(f+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(a){var o,s;for(s=[],o=0;0<=a?o<a:o>a;0<=a?++o:--o)s.push(this.data[this.pos++]);return s},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(a){var o=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*o),l=0,c=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function p(d,f,u,y){var v,b,g,m,_,x,A,D,T,j,B,P,k,E,C,I,V,ee,te,Q,Y,W=Math.ceil((c.width-d)/u),q=Math.ceil((c.height-f)/y),L=c.width==W&&c.height==q;for(E=o*W,P=L?s:new Uint8Array(E*q),x=a.length,k=0,b=0;k<q&&l<x;){switch(a[l++]){case 0:for(m=V=0;V<E;m=V+=1)P[b++]=a[l++];break;case 1:for(m=ee=0;ee<E;m=ee+=1)v=a[l++],_=m<o?0:P[b-o],P[b++]=(v+_)%256;break;case 2:for(m=te=0;te<E;m=te+=1)v=a[l++],g=(m-m%o)/o,C=k&&P[(k-1)*E+g*o+m%o],P[b++]=(C+v)%256;break;case 3:for(m=Q=0;Q<E;m=Q+=1)v=a[l++],g=(m-m%o)/o,_=m<o?0:P[b-o],C=k&&P[(k-1)*E+g*o+m%o],P[b++]=(v+Math.floor((_+C)/2))%256;break;case 4:for(m=Y=0;Y<E;m=Y+=1)v=a[l++],g=(m-m%o)/o,_=m<o?0:P[b-o],k===0?C=I=0:(C=P[(k-1)*E+g*o+m%o],I=g&&P[(k-1)*E+(g-1)*o+m%o]),A=_+C-I,D=Math.abs(A-_),j=Math.abs(A-C),B=Math.abs(A-I),T=D<=j&&D<=B?_:j<=B?C:I,P[b++]=(v+T)%256;break;default:throw new Error("Invalid filter algorithm: "+a[l-1])}if(!L){var M=((f+k*y)*c.width+d)*o,U=k*E;for(m=0;m<W;m+=1){for(var H=0;H<o;H+=1)s[M++]=P[U++];M+=(u-1)*o}}k++}}return a=hP(a),c.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),s},n.prototype.decodePalette=function(){var a,o,s,l,c,p,d,f,u;for(s=this.palette,p=this.transparency.indexed||[],c=new Uint8Array((p.length||0)+s.length),l=0,a=0,o=d=0,f=s.length;d<f;o=d+=3)c[l++]=s[o],c[l++]=s[o+1],c[l++]=s[o+2],c[l++]=(u=p[a++])!=null?u:255;return c},n.prototype.copyToImageData=function(a,o){var s,l,c,p,d,f,u,y,v,b,g;if(l=this.colors,v=null,s=this.hasAlphaChannel,this.palette.length&&(v=(g=this._decodedPalette)!=null?g:this._decodedPalette=this.decodePalette(),l=4,s=!0),y=(c=a.data||a).length,d=v||o,p=f=0,l===1)for(;p<y;)u=v?4*o[p/4]:f,b=d[u++],c[p++]=b,c[p++]=b,c[p++]=b,c[p++]=s?d[u++]:255,f=u;else for(;p<y;)u=v?4*o[p/4]:f,c[p++]=d[u++],c[p++]=d[u++],c[p++]=d[u++],c[p++]=s?d[u++]:255,f=u},n.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(ht)==="[object Window]"){try{e=ht.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(a){var o;if(i()===!0)return r.width=a.width,r.height=a.height,r.clearRect(0,0,a.width,a.height),r.putImageData(a,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(a){var o,s,l,c,p,d,f,u;if(this.animation){for(u=[],s=p=0,d=(f=this.animation.frames).length;p<d;s=++p)o=f[s],l=a.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,u.push(o.image=t(l));return u}},n.prototype.renderFrame=function(a,o){var s,l,c;return s=(l=this.animation.frames)[o],c=l[o-1],o===0&&a.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?a.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&a.putImageData(c.imageData,c.xOffset,c.yOffset),s.blendOp===0&&a.clearRect(s.xOffset,s.yOffset,s.width,s.height),a.drawImage(s.image,s.xOffset,s.yOffset)},n.prototype.animate=function(a){var o,s,l,c,p,d,f=this;return s=0,d=this.animation,c=d.numFrames,l=d.frames,p=d.numPlays,(o=function(){var u,y;if(u=s++%c,y=l[u],f.renderFrame(a,u),c>1&&s/c<p)return f.animation._timeout=setTimeout(o,y.delay)})()},n.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},n.prototype.render=function(a){var o,s;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,o=a.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(s=o.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),o.putImageData(s,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function DP(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var s=null,l=null;a&&(s=e,l=o,e+=3*o);var c=!0,p=[],d=0,f=null,u=0,y=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var v=t[e++];d=t[e++]|t[e++]<<8,f=t[e++],!(1&v)&&(f=null),u=v>>2&7,e++;break;case 254:for(;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var b=t[e++]|t[e++]<<8,g=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,x=t[e++],A=x>>6&1,D=1<<(7&x)+1,T=s,j=l,B=!1;x>>7&&(B=!0,T=e,j=D,e+=3*D);var P=e;for(e++;;){var k;if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}p.push({x:b,y:g,width:m,height:_,has_local_palette:B,palette_offset:T,palette_size:j,data_offset:P,data_length:e-P,transparent_index:f,interlaced:!!A,delay:d,disposal:u});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return y},this.frameInfo=function(E){if(E<0||E>=p.length)throw new Error("Frame index out of range.");return p[E]},this.decodeAndBlitFrameBGRA=function(E,C){var I=this.frameInfo(E),V=I.width*I.height,ee=new Uint8Array(V);Ay(t,I.data_offset,ee,V);var te=I.palette_offset,Q=I.transparent_index;Q===null&&(Q=256);var Y=I.width,W=r-Y,q=Y,L=4*(I.y*r+I.x),M=4*((I.y+I.height)*r+I.x),U=L,H=4*W;I.interlaced===!0&&(H+=4*r*7);for(var F=8,J=0,re=ee.length;J<re;++J){var ne=ee[J];if(q===0&&(q=Y,(U+=H)>=M&&(H=4*W+4*r*(F-1),U=L+(Y+W)*(F<<1),F>>=1)),ne===Q)U+=4;else{var de=t[te+3*ne],xe=t[te+3*ne+1],je=t[te+3*ne+2];C[U++]=je,C[U++]=xe,C[U++]=de,C[U++]=255}--q}},this.decodeAndBlitFrameRGBA=function(E,C){var I=this.frameInfo(E),V=I.width*I.height,ee=new Uint8Array(V);Ay(t,I.data_offset,ee,V);var te=I.palette_offset,Q=I.transparent_index;Q===null&&(Q=256);var Y=I.width,W=r-Y,q=Y,L=4*(I.y*r+I.x),M=4*((I.y+I.height)*r+I.x),U=L,H=4*W;I.interlaced===!0&&(H+=4*r*7);for(var F=8,J=0,re=ee.length;J<re;++J){var ne=ee[J];if(q===0&&(q=Y,(U+=H)>=M&&(H=4*W+4*r*(F-1),U=L+(Y+W)*(F<<1),F>>=1)),ne===Q)U+=4;else{var de=t[te+3*ne],xe=t[te+3*ne+1],je=t[te+3*ne+2];C[U++]=de,C[U++]=xe,C[U++]=je,C[U++]=255}--q}}}function Ay(t,e,r,n){for(var i=t[e++],a=1<<i,o=a+1,s=o+1,l=i+1,c=(1<<l)-1,p=0,d=0,f=0,u=t[e++],y=new Int32Array(4096),v=null;;){for(;p<16&&u!==0;)d|=t[e++]<<p,p+=8,u===1?u=t[e++]:--u;if(p<l)break;var b=d&c;if(d>>=l,p-=l,b!==a){if(b===o)break;for(var g=b<s?b:v,m=0,_=g;_>a;)_=y[_]>>8,++m;var x=_;if(f+m+(g!==b?1:0)>n)return void Jt.log("Warning, gif stream longer than expected.");r[f++]=x;var A=f+=m;for(g!==b&&(r[f++]=x),_=g;m--;)_=y[_],r[--A]=255&_,_>>=8;v!==null&&s<4096&&(y[s++]=v<<8|x,s>=c+1&&l<12&&(++l,c=c<<1|1)),v=b}else s=o+1,c=(1<<(l=i+1))-1,v=null}return f!==n&&Jt.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function h0(t){var e,r,n,i,a,o=Math.floor,s=new Array(64),l=new Array(64),c=new Array(64),p=new Array(64),d=new Array(65535),f=new Array(65535),u=new Array(64),y=new Array(64),v=[],b=0,g=7,m=new Array(64),_=new Array(64),x=new Array(64),A=new Array(256),D=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],V=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(L,M){for(var U=0,H=0,F=new Array,J=1;J<=16;J++){for(var re=1;re<=L[J];re++)F[M[H]]=[],F[M[H]][0]=U,F[M[H]][1]=J,H++,U++;U*=2}return F}function te(L){for(var M=L[0],U=L[1]-1;U>=0;)M&1<<U&&(b|=1<<g),U--,--g<0&&(b==255?(Q(255),Q(0)):Q(b),g=7,b=0)}function Q(L){v.push(L)}function Y(L){Q(L>>8&255),Q(255&L)}function W(L,M,U,H,F){for(var J,re=F[0],ne=F[240],de=function(se,he){var ye,ge,Ie,qe,Ue,rt,lt,at,ot,tt,ze=0;for(ot=0;ot<8;++ot){ye=se[ze],ge=se[ze+1],Ie=se[ze+2],qe=se[ze+3],Ue=se[ze+4],rt=se[ze+5],lt=se[ze+6];var br=ye+(at=se[ze+7]),bt=ye-at,zr=ge+lt,xt=ge-lt,jt=Ie+rt,rn=Ie-rt,Nt=qe+Ue,yi=qe-Ue,Dt=br+Nt,$r=br-Nt,zn=zr+jt,It=zr-jt;se[ze]=Dt+zn,se[ze+4]=Dt-zn;var dt=.707106781*(It+$r);se[ze+2]=$r+dt,se[ze+6]=$r-dt;var Et=.382683433*((Dt=yi+rn)-(It=xt+bt)),zt=.5411961*Dt+Et,Xt=1.306562965*It+Et,On=.707106781*(zn=rn+xt),nn=bt+On,be=bt-On;se[ze+5]=be+zt,se[ze+3]=be-zt,se[ze+1]=nn+Xt,se[ze+7]=nn-Xt,ze+=8}for(ze=0,ot=0;ot<8;++ot){ye=se[ze],ge=se[ze+8],Ie=se[ze+16],qe=se[ze+24],Ue=se[ze+32],rt=se[ze+40],lt=se[ze+48];var Be=ye+(at=se[ze+56]),Qe=ye-at,Je=ge+lt,nt=ge-lt,pt=Ie+rt,ir=Ie-rt,Mr=qe+Ue,Kt=qe-Ue,_t=Be+Mr,Tt=Be-Mr,$t=Je+pt,Qt=Je-pt;se[ze]=_t+$t,se[ze+32]=_t-$t;var Ht=.707106781*(Qt+Tt);se[ze+16]=Tt+Ht,se[ze+48]=Tt-Ht;var Zt=.382683433*((_t=Kt+ir)-(Qt=nt+Qe)),mn=.5411961*_t+Zt,He=1.306562965*Qt+Zt,le=.707106781*($t=ir+nt),Re=Qe+le,Ge=Qe-le;se[ze+40]=Ge+mn,se[ze+24]=Ge-mn,se[ze+8]=Re+He,se[ze+56]=Re-He,ze++}for(ot=0;ot<64;++ot)tt=se[ot]*he[ot],u[ot]=tt>0?tt+.5|0:tt-.5|0;return u}(L,M),xe=0;xe<64;++xe)y[T[xe]]=de[xe];var je=y[0]-U;U=y[0],je==0?te(H[0]):(te(H[f[J=32767+je]]),te(d[J]));for(var Ee=63;Ee>0&&y[Ee]==0;)Ee--;if(Ee==0)return te(re),U;for(var Me,Se=1;Se<=Ee;){for(var ae=Se;y[Se]==0&&Se<=Ee;)++Se;var Ve=Se-ae;if(Ve>=16){Me=Ve>>4;for(var pe=1;pe<=Me;++pe)te(ne);Ve&=15}J=32767+y[Se],te(F[(Ve<<4)+f[J]]),te(d[J]),Se++}return Ee!=63&&te(re),U}function q(L){L=Math.min(Math.max(L,1),100),a!=L&&(function(M){for(var U=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var F=o((U[H]*M+50)/100);F=Math.min(Math.max(F,1),255),s[T[H]]=F}for(var J=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],re=0;re<64;re++){var ne=o((J[re]*M+50)/100);ne=Math.min(Math.max(ne,1),255),l[T[re]]=ne}for(var de=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],xe=0,je=0;je<8;je++)for(var Ee=0;Ee<8;Ee++)c[xe]=1/(s[T[xe]]*de[je]*de[Ee]*8),p[xe]=1/(l[T[xe]]*de[je]*de[Ee]*8),xe++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),a=L)}this.encode=function(L,M){M&&q(M),v=new Array,b=0,g=7,Y(65496),Y(65504),Y(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),Y(1),Y(1),Q(0),Q(0),function(){Y(65499),Y(132),Q(0);for(var ge=0;ge<64;ge++)Q(s[ge]);Q(1);for(var Ie=0;Ie<64;Ie++)Q(l[Ie])}(),function(ge,Ie){Y(65472),Y(17),Q(8),Y(Ie),Y(ge),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(L.width,L.height),function(){Y(65476),Y(418),Q(0);for(var ge=0;ge<16;ge++)Q(j[ge+1]);for(var Ie=0;Ie<=11;Ie++)Q(B[Ie]);Q(16);for(var qe=0;qe<16;qe++)Q(P[qe+1]);for(var Ue=0;Ue<=161;Ue++)Q(k[Ue]);Q(1);for(var rt=0;rt<16;rt++)Q(E[rt+1]);for(var lt=0;lt<=11;lt++)Q(C[lt]);Q(17);for(var at=0;at<16;at++)Q(I[at+1]);for(var ot=0;ot<=161;ot++)Q(V[ot])}(),Y(65498),Y(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var U=0,H=0,F=0;b=0,g=7,this.encode.displayName="_encode_";for(var J,re,ne,de,xe,je,Ee,Me,Se,ae=L.data,Ve=L.width,pe=L.height,se=4*Ve,he=0;he<pe;){for(J=0;J<se;){for(xe=se*he+J,Ee=-1,Me=0,Se=0;Se<64;Se++)je=xe+(Me=Se>>3)*se+(Ee=4*(7&Se)),he+Me>=pe&&(je-=se*(he+1+Me-pe)),J+Ee>=se&&(je-=J+Ee-se+4),re=ae[je++],ne=ae[je++],de=ae[je++],m[Se]=(D[re]+D[ne+256>>0]+D[de+512>>0]>>16)-128,_[Se]=(D[re+768>>0]+D[ne+1024>>0]+D[de+1280>>0]>>16)-128,x[Se]=(D[re+1280>>0]+D[ne+1536>>0]+D[de+1792>>0]>>16)-128;U=W(m,c,U,e,n),H=W(_,p,H,r,i),F=W(x,p,F,r,i),J+=32}he+=8}if(g>=0){var ye=[];ye[1]=g+1,ye[0]=(1<<g+1)-1,te(ye)}return Y(65497),new Uint8Array(v)},t=t||50,function(){for(var L=String.fromCharCode,M=0;M<256;M++)A[M]=L(M)}(),e=ee(j,B),r=ee(E,C),n=ee(P,k),i=ee(I,V),function(){for(var L=1,M=2,U=1;U<=15;U++){for(var H=L;H<M;H++)f[32767+H]=U,d[32767+H]=[],d[32767+H][1]=U,d[32767+H][0]=H;for(var F=-(M-1);F<=-L;F++)f[32767+F]=U,d[32767+F]=[],d[32767+F][1]=U,d[32767+F][0]=M-1+F;L<<=1,M<<=1}}(),function(){for(var L=0;L<256;L++)D[L]=19595*L,D[L+256>>0]=38470*L,D[L+512>>0]=7471*L+32768,D[L+768>>0]=-11059*L,D[L+1024>>0]=-21709*L,D[L+1280>>0]=32768*L+8421375,D[L+1536>>0]=-27439*L,D[L+1792>>0]=-5329*L}(),q(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ai(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ey(t){function e(j){if(!j)throw Error("assert :P")}function r(j,B,P){for(var k=0;4>k;k++)if(j[B+k]!=P.charCodeAt(k))return!0;return!1}function n(j,B,P,k,E){for(var C=0;C<E;C++)j[B+C]=P[k+C]}function i(j,B,P,k){for(var E=0;E<k;E++)j[B+E]=P}function a(j){return new Int32Array(j)}function o(j,B){for(var P=[],k=0;k<j;k++)P.push(new B);return P}function s(j,B){var P=[];return function k(E,C,I){for(var V=I[C],ee=0;ee<V&&(E.push(I.length>C+1?[]:new B),!(I.length<C+1));ee++)k(E[ee],C+1,I)}(P,0,j),P}var l=function(){var j=this;function B(h,w){for(var O=1<<w-1>>>0;h&O;)O>>>=1;return O?(h&O-1)+O:h}function P(h,w,O,R,z){e(!(R%O));do h[w+(R-=O)]=z;while(0<R)}function k(h,w,O,R,z){if(e(2328>=z),512>=z)var G=a(512);else if((G=a(z))==null)return 0;return function(K,X,Z,ie,ce,ke){var Ne,ve,Pe=X,Ae=1<<Z,fe=a(16),me=a(16);for(e(ce!=0),e(ie!=null),e(K!=null),e(0<Z),ve=0;ve<ce;++ve){if(15<ie[ve])return 0;++fe[ie[ve]]}if(fe[0]==ce)return 0;for(me[1]=0,Ne=1;15>Ne;++Ne){if(fe[Ne]>1<<Ne)return 0;me[Ne+1]=me[Ne]+fe[Ne]}for(ve=0;ve<ce;++ve)Ne=ie[ve],0<ie[ve]&&(ke[me[Ne]++]=ve);if(me[15]==1)return(ie=new E).g=0,ie.value=ke[0],P(K,Pe,1,Ae,ie),Ae;var Te,Ce=-1,Le=Ae-1,Ye=0,$e=1,ut=1,We=1<<Z;for(ve=0,Ne=1,ce=2;Ne<=Z;++Ne,ce<<=1){if($e+=ut<<=1,0>(ut-=fe[Ne]))return 0;for(;0<fe[Ne];--fe[Ne])(ie=new E).g=Ne,ie.value=ke[ve++],P(K,Pe+Ye,ce,We,ie),Ye=B(Ye,Ne)}for(Ne=Z+1,ce=2;15>=Ne;++Ne,ce<<=1){if($e+=ut<<=1,0>(ut-=fe[Ne]))return 0;for(;0<fe[Ne];--fe[Ne]){if(ie=new E,(Ye&Le)!=Ce){for(Pe+=We,Te=1<<(Ce=Ne)-Z;15>Ce&&!(0>=(Te-=fe[Ce]));)++Ce,Te<<=1;Ae+=We=1<<(Te=Ce-Z),K[X+(Ce=Ye&Le)].g=Te+Z,K[X+Ce].value=Pe-X-Ce}ie.g=Ne-Z,ie.value=ke[ve++],P(K,Pe+(Ye>>Z),ce,We,ie),Ye=B(Ye,Ne)}}return $e!=2*me[15]-1?0:Ae}(h,w,O,R,z,G)}function E(){this.value=this.g=0}function C(){this.value=this.g=0}function I(){this.G=o(5,E),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Jr,C)}function V(h,w,O,R){e(h!=null),e(w!=null),e(2147483648>R),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=w,h.pa=O,h.Jd=w,h.Yc=O+R,h.Zc=4<=R?O+R-4+1:O,J(h)}function ee(h,w){for(var O=0;0<w--;)O|=ne(h,128)<<w;return O}function te(h,w){var O=ee(h,w);return re(h)?-O:O}function Q(h,w,O,R){var z,G=0;for(e(h!=null),e(w!=null),e(4294967288>R),h.Sb=R,h.Ra=0,h.u=0,h.h=0,4<R&&(R=4),z=0;z<R;++z)G+=w[O+z]<<8*z;h.Ra=G,h.bb=R,h.oa=w,h.pa=O}function Y(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<bs-8>>>0,++h.bb,h.u-=8;U(h)&&(h.h=1,h.u=0)}function W(h,w){if(e(0<=w),!h.h&&w<=ws){var O=M(h)&ys[w];return h.u+=w,Y(h),O}return h.h=1,h.u=0}function q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function M(h){return h.Ra>>>(h.u&bs-1)>>>0}function U(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>bs}function H(h,w){h.u=w,h.h=U(h)}function F(h){h.u>=Ql&&(e(h.u>=Ql),Y(h))}function J(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function re(h){return ee(h,1)}function ne(h,w){var O=h.Ca;0>h.b&&J(h);var R=h.b,z=O*w>>>8,G=(h.I>>>R>z)+0;for(G?(O-=z,h.I-=z+1<<R>>>0):O=z+1,R=O,z=0;256<=R;)z+=8,R>>=8;return R=7^z+Ln[R],h.b-=R,h.Ca=(O<<R)-1,G}function de(h,w,O){h[w+0]=O>>24&255,h[w+1]=O>>16&255,h[w+2]=O>>8&255,h[w+3]=O>>0&255}function xe(h,w){return h[w+0]<<0|h[w+1]<<8}function je(h,w){return xe(h,w)|h[w+2]<<16}function Ee(h,w){return xe(h,w)|xe(h,w+2)<<16}function Me(h,w){var O=1<<w;return e(h!=null),e(0<w),h.X=a(O),h.X==null?0:(h.Mb=32-w,h.Xa=w,1)}function Se(h,w){e(h!=null),e(w!=null),e(h.Xa==w.Xa),n(w.X,0,h.X,0,1<<w.Xa)}function ae(){this.X=[],this.Xa=this.Mb=0}function Ve(h,w,O,R){e(O!=null),e(R!=null);var z=O[0],G=R[0];return z==0&&(z=(h*G+w/2)/w),G==0&&(G=(w*z+h/2)/h),0>=z||0>=G?0:(O[0]=z,R[0]=G,1)}function pe(h,w){return h+(1<<w)-1>>>w}function se(h,w){return((4278255360&h)+(4278255360&w)>>>0&4278255360)+((16711935&h)+(16711935&w)>>>0&16711935)>>>0}function he(h,w){j[w]=function(O,R,z,G,K,X,Z){var ie;for(ie=0;ie<K;++ie){var ce=j[h](X[Z+ie-1],z,G+ie);X[Z+ie]=se(O[R+ie],ce)}}}function ye(){this.ud=this.hd=this.jd=0}function ge(h,w){return((4278124286&(h^w))>>>1)+(h&w)>>>0}function Ie(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function qe(h,w){return Ie(h+(h-w+.5>>1))}function Ue(h,w,O){return Math.abs(w-O)-Math.abs(h-O)}function rt(h,w,O,R,z,G,K){for(R=G[K-1],O=0;O<z;++O)G[K+O]=R=se(h[w+O],R)}function lt(h,w,O,R,z){var G;for(G=0;G<O;++G){var K=h[w+G],X=K>>8&255,Z=16711935&(Z=(Z=16711935&K)+((X<<16)+X));R[z+G]=(4278255360&K)+Z>>>0}}function at(h,w){w.jd=h>>0&255,w.hd=h>>8&255,w.ud=h>>16&255}function ot(h,w,O,R,z,G){var K;for(K=0;K<R;++K){var X=w[O+K],Z=X>>>8,ie=X,ce=255&(ce=(ce=X>>>16)+((h.jd<<24>>24)*(Z<<24>>24)>>>5));ie=255&(ie=(ie=ie+((h.hd<<24>>24)*(Z<<24>>24)>>>5))+((h.ud<<24>>24)*(ce<<24>>24)>>>5)),z[G+K]=(4278255360&X)+(ce<<16)+ie}}function tt(h,w,O,R,z){j[w]=function(G,K,X,Z,ie,ce,ke,Ne,ve){for(Z=ke;Z<Ne;++Z)for(ke=0;ke<ve;++ke)ie[ce++]=z(X[R(G[K++])])},j[h]=function(G,K,X,Z,ie,ce,ke){var Ne=8>>G.b,ve=G.Ea,Pe=G.K[0],Ae=G.w;if(8>Ne)for(G=(1<<G.b)-1,Ae=(1<<Ne)-1;K<X;++K){var fe,me=0;for(fe=0;fe<ve;++fe)fe&G||(me=R(Z[ie++])),ce[ke++]=z(Pe[me&Ae]),me>>=Ne}else j["VP8LMapColor"+O](Z,ie,Pe,Ae,ce,ke,K,X,ve)}}function ze(h,w,O,R,z){for(O=w+O;w<O;){var G=h[w++];R[z++]=G>>16&255,R[z++]=G>>8&255,R[z++]=G>>0&255}}function br(h,w,O,R,z){for(O=w+O;w<O;){var G=h[w++];R[z++]=G>>16&255,R[z++]=G>>8&255,R[z++]=G>>0&255,R[z++]=G>>24&255}}function bt(h,w,O,R,z){for(O=w+O;w<O;){var G=(K=h[w++])>>16&240|K>>12&15,K=K>>0&240|K>>28&15;R[z++]=G,R[z++]=K}}function zr(h,w,O,R,z){for(O=w+O;w<O;){var G=(K=h[w++])>>16&248|K>>13&7,K=K>>5&224|K>>3&31;R[z++]=G,R[z++]=K}}function xt(h,w,O,R,z){for(O=w+O;w<O;){var G=h[w++];R[z++]=G>>0&255,R[z++]=G>>8&255,R[z++]=G>>16&255}}function jt(h,w,O,R,z,G){if(G==0)for(O=w+O;w<O;)de(R,((G=h[w++])[0]>>24|G[1]>>8&65280|G[2]<<8&16711680|G[3]<<24)>>>0),z+=32;else n(R,z,h,w,O)}function rn(h,w){j[w][0]=j[h+"0"],j[w][1]=j[h+"1"],j[w][2]=j[h+"2"],j[w][3]=j[h+"3"],j[w][4]=j[h+"4"],j[w][5]=j[h+"5"],j[w][6]=j[h+"6"],j[w][7]=j[h+"7"],j[w][8]=j[h+"8"],j[w][9]=j[h+"9"],j[w][10]=j[h+"10"],j[w][11]=j[h+"11"],j[w][12]=j[h+"12"],j[w][13]=j[h+"13"],j[w][14]=j[h+"0"],j[w][15]=j[h+"0"]}function Nt(h){return h==Qh||h==Zh||h==Jc||h==ep}function yi(){this.eb=[],this.size=this.A=this.fb=0}function Dt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $r(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new yi,this.f.kb=new Dt,this.sd=null}function zn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function It(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function dt(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Et(h,w){var O=h.T,R=w.ba.f.RGBA,z=R.eb,G=R.fb+h.ka*R.A,K=ui[w.ba.S],X=h.y,Z=h.O,ie=h.f,ce=h.N,ke=h.ea,Ne=h.W,ve=w.cc,Pe=w.dc,Ae=w.Mc,fe=w.Nc,me=h.ka,Te=h.ka+h.T,Ce=h.U,Le=Ce+1>>1;for(me==0?K(X,Z,null,null,ie,ce,ke,Ne,ie,ce,ke,Ne,z,G,null,null,Ce):(K(w.ec,w.fc,X,Z,ve,Pe,Ae,fe,ie,ce,ke,Ne,z,G-R.A,z,G,Ce),++O);me+2<Te;me+=2)ve=ie,Pe=ce,Ae=ke,fe=Ne,ce+=h.Rc,Ne+=h.Rc,G+=2*R.A,K(X,(Z+=2*h.fa)-h.fa,X,Z,ve,Pe,Ae,fe,ie,ce,ke,Ne,z,G-R.A,z,G,Ce);return Z+=h.fa,h.j+Te<h.o?(n(w.ec,w.fc,X,Z,Ce),n(w.cc,w.dc,ie,ce,Le),n(w.Mc,w.Nc,ke,Ne,Le),O--):1&Te||K(X,Z,null,null,ie,ce,ke,Ne,ie,ce,ke,Ne,z,G+R.A,null,null,Ce),O}function zt(h,w,O){var R=h.F,z=[h.J];if(R!=null){var G=h.U,K=w.ba.S,X=K==Yc||K==Jc;w=w.ba.f.RGBA;var Z=[0],ie=h.ka;Z[0]=h.T,h.Kb&&(ie==0?--Z[0]:(--ie,z[0]-=h.width),h.j+h.ka+h.T==h.o&&(Z[0]=h.o-h.j-ie));var ce=w.eb;ie=w.fb+ie*w.A,h=tr(R,z[0],h.width,G,Z,ce,ie+(X?0:3),w.A),e(O==Z),h&&Nt(K)&&si(ce,ie,X,G,Z,w.A)}return 0}function Xt(h){var w=h.ma,O=w.ba.S,R=11>O,z=O==Gc||O==Kc||O==Yc||O==Xh||O==12||Nt(O);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!Jl(w.Oa,h,z?11:12))return 0;if(z&&Nt(O)&&De(),h.da)alert("todo:use_scaling");else{if(R){if(w.Ib=dt,h.Kb){if(O=h.U+1>>1,w.memory=a(h.U+2*O),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+h.U,w.Mc=w.cc,w.Nc=w.dc+O,w.Ib=Et,De()}}else alert("todo:EmitYUV");z&&(w.Jb=zt,R&&_e())}if(R&&!ym){for(h=0;256>h;++h)j_[h]=89858*(h-128)+Qc>>Xc,P_[h]=-22014*(h-128)+Qc,L_[h]=-45773*(h-128),T_[h]=113618*(h-128)+Qc>>Xc;for(h=au;h<np;++h)w=76283*(h-16)+Qc>>Xc,C_[h-au]=$n(w,255),R_[h-au]=$n(w+8>>4,15);ym=1}return 1}function On(h){var w=h.ma,O=h.U,R=h.T;return e(!(1&h.ka)),0>=O||0>=R?0:(O=w.Ib(h,w),w.Jb!=null&&w.Jb(h,w,O),w.Dc+=O,1)}function nn(h){h.ma.memory=null}function be(h,w,O,R){return W(h,8)!=47?0:(w[0]=W(h,14)+1,O[0]=W(h,14)+1,R[0]=W(h,1),W(h,3)!=0?0:!h.h)}function Be(h,w){if(4>h)return h+1;var O=h-2>>1;return(2+(1&h)<<O)+W(w,O)+1}function Qe(h,w){return 120<w?w-120:1<=(O=((O=g_[w-1])>>4)*h+(8-(15&O)))?O:1;var O}function Je(h,w,O){var R=M(O),z=h[w+=255&R].g-8;return 0<z&&(H(O,O.u+8),R=M(O),w+=h[w].value,w+=R&(1<<z)-1),H(O,O.u+h[w].g),h[w].value}function nt(h,w,O){return O.g+=h.g,O.value+=h.value<<w>>>0,e(8>=O.g),h.g}function pt(h,w,O){var R=h.xc;return e((w=R==0?0:h.vc[h.md*(O>>R)+(w>>R)])<h.Wb),h.Ya[w]}function ir(h,w,O,R){var z=h.ab,G=h.c*w,K=h.C;w=K+w;var X=O,Z=R;for(R=h.Ta,O=h.Ua;0<z--;){var ie=h.gc[z],ce=K,ke=w,Ne=X,ve=Z,Pe=(Z=R,X=O,ie.Ea);switch(e(ce<ke),e(ke<=ie.nc),ie.hc){case 2:qc(Ne,ve,(ke-ce)*Pe,Z,X);break;case 0:var Ae=ce,fe=ke,me=Z,Te=X,Ce=(We=ie).Ea;Ae==0&&(Yh(Ne,ve,null,null,1,me,Te),rt(Ne,ve+1,0,0,Ce-1,me,Te+1),ve+=Ce,Te+=Ce,++Ae);for(var Le=1<<We.b,Ye=Le-1,$e=pe(Ce,We.b),ut=We.K,We=We.w+(Ae>>We.b)*$e;Ae<fe;){var Rt=ut,Mt=We,Lt=1;for(Zl(Ne,ve,me,Te-Ce,1,me,Te);Lt<Ce;){var At=(Lt&~Ye)+Le;At>Ce&&(At=Ce),(0,Ta[Rt[Mt++]>>8&15])(Ne,ve+ +Lt,me,Te+Lt-Ce,At-Lt,me,Te+Lt),Lt=At}ve+=Ce,Te+=Ce,++Ae&Ye||(We+=$e)}ke!=ie.nc&&n(Z,X-Pe,Z,X+(ke-ce-1)*Pe,Pe);break;case 1:for(Pe=Ne,fe=ve,Ce=(Ne=ie.Ea)-(Te=Ne&~(me=(ve=1<<ie.b)-1)),Ae=pe(Ne,ie.b),Le=ie.K,ie=ie.w+(ce>>ie.b)*Ae;ce<ke;){for(Ye=Le,$e=ie,ut=new ye,We=fe+Te,Rt=fe+Ne;fe<We;)at(Ye[$e++],ut),_o(ut,Pe,fe,ve,Z,X),fe+=ve,X+=ve;fe<Rt&&(at(Ye[$e++],ut),_o(ut,Pe,fe,Ce,Z,X),fe+=Ce,X+=Ce),++ce&me||(ie+=Ae)}break;case 3:if(Ne==Z&&ve==X&&0<ie.b){for(fe=Z,Ne=Pe=X+(ke-ce)*Pe-(Te=(ke-ce)*pe(ie.Ea,ie.b)),ve=Z,me=X,Ae=[],Te=(Ce=Te)-1;0<=Te;--Te)Ae[Te]=ve[me+Te];for(Te=Ce-1;0<=Te;--Te)fe[Ne+Te]=Ae[Te];ii(ie,ce,ke,Z,Pe,Z,X)}else ii(ie,ce,ke,Ne,ve,Z,X)}X=R,Z=O}Z!=O&&n(R,O,X,Z,G)}function Mr(h,w){var O=h.V,R=h.Ba+h.c*h.C,z=w-h.C;if(e(w<=h.l.o),e(16>=z),0<z){var G=h.l,K=h.Ta,X=h.Ua,Z=G.width;if(ir(h,z,O,R),z=X=[X],e((O=h.C)<(R=w)),e(G.v<G.va),R>G.o&&(R=G.o),O<G.j){var ie=G.j-O;O=G.j,z[0]+=ie*Z}if(O>=R?O=0:(z[0]+=4*G.v,G.ka=O-G.j,G.U=G.va-G.v,G.T=R-O,O=1),O){if(X=X[0],11>(O=h.ca).S){var ce=O.f.RGBA,ke=(R=O.S,z=G.U,G=G.T,ie=ce.eb,ce.A),Ne=G;for(ce=ce.fb+h.Ma*ce.A;0<Ne--;){var ve=K,Pe=X,Ae=z,fe=ie,me=ce;switch(R){case Vc:Pn(ve,Pe,Ae,fe,me);break;case Gc:vn(ve,Pe,Ae,fe,me);break;case Qh:vn(ve,Pe,Ae,fe,me),si(fe,me,0,Ae,1,0);break;case um:aa(ve,Pe,Ae,fe,me);break;case Kc:jt(ve,Pe,Ae,fe,me,1);break;case Zh:jt(ve,Pe,Ae,fe,me,1),si(fe,me,0,Ae,1,0);break;case Yc:jt(ve,Pe,Ae,fe,me,0);break;case Jc:jt(ve,Pe,Ae,fe,me,0),si(fe,me,1,Ae,1,0);break;case Xh:La(ve,Pe,Ae,fe,me);break;case ep:La(ve,Pe,Ae,fe,me),er(fe,me,Ae,1,0);break;case cm:ia(ve,Pe,Ae,fe,me);break;default:e(0)}X+=Z,ce+=ke}h.Ma+=G}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=O.height)}}h.C=w,e(h.C<=h.i)}function Kt(h){var w;if(0<h.ua)return 0;for(w=0;w<h.Wb;++w){var O=h.Ya[w].G,R=h.Ya[w].H;if(0<O[1][R[1]+0].g||0<O[2][R[2]+0].g||0<O[3][R[3]+0].g)return 0}return 1}function _t(h,w,O,R,z,G){if(h.Z!=0){var K=h.qd,X=h.rd;for(e(Ia[h.Z]!=null);w<O;++w)Ia[h.Z](K,X,R,z,R,z,G),K=R,X=z,z+=G;h.qd=K,h.rd=X}}function Tt(h,w){var O=h.l.ma,R=O.Z==0||O.Z==1?h.l.j:h.C;if(R=h.C<R?R:h.C,e(w<=h.l.o),w>R){var z=h.l.width,G=O.ca,K=O.tb+z*R,X=h.V,Z=h.Ba+h.c*R,ie=h.gc;e(h.ab==1),e(ie[0].hc==3),Uc(ie[0],R,w,X,Z,G,K),_t(O,R,w,G,K,z)}h.C=h.Ma=w}function $t(h,w,O,R,z,G,K){var X=h.$/R,Z=h.$%R,ie=h.m,ce=h.s,ke=O+h.$,Ne=ke;z=O+R*z;var ve=O+R*G,Pe=280+ce.ua,Ae=h.Pb?X:16777216,fe=0<ce.ua?ce.Wa:null,me=ce.wc,Te=ke<ve?pt(ce,Z,X):null;e(h.C<G),e(ve<=z);var Ce=!1;e:for(;;){for(;Ce||ke<ve;){var Le=0;if(X>=Ae){var Ye=ke-O;e((Ae=h).Pb),Ae.wd=Ae.m,Ae.xd=Ye,0<Ae.s.ua&&Se(Ae.s.Wa,Ae.s.vb),Ae=X+v_}if(Z&me||(Te=pt(ce,Z,X)),e(Te!=null),Te.Qb&&(w[ke]=Te.qb,Ce=!0),!Ce)if(F(ie),Te.jc){Le=ie,Ye=w;var $e=ke,ut=Te.pd[M(Le)&Jr-1];e(Te.jc),256>ut.g?(H(Le,Le.u+ut.g),Ye[$e]=ut.value,Le=0):(H(Le,Le.u+ut.g-256),e(256<=ut.value),Le=ut.value),Le==0&&(Ce=!0)}else Le=Je(Te.G[0],Te.H[0],ie);if(ie.h)break;if(Ce||256>Le){if(!Ce)if(Te.nd)w[ke]=(Te.qb|Le<<8)>>>0;else{if(F(ie),Ce=Je(Te.G[1],Te.H[1],ie),F(ie),Ye=Je(Te.G[2],Te.H[2],ie),$e=Je(Te.G[3],Te.H[3],ie),ie.h)break;w[ke]=($e<<24|Ce<<16|Le<<8|Ye)>>>0}if(Ce=!1,++ke,++Z>=R&&(Z=0,++X,K!=null&&X<=G&&!(X%16)&&K(h,X),fe!=null))for(;Ne<ke;)Le=w[Ne++],fe.X[(506832829*Le&4294967295)>>>fe.Mb]=Le}else if(280>Le){if(Le=Be(Le-256,ie),Ye=Je(Te.G[4],Te.H[4],ie),F(ie),Ye=Qe(R,Ye=Be(Ye,ie)),ie.h)break;if(ke-O<Ye||z-ke<Le)break e;for($e=0;$e<Le;++$e)w[ke+$e]=w[ke+$e-Ye];for(ke+=Le,Z+=Le;Z>=R;)Z-=R,++X,K!=null&&X<=G&&!(X%16)&&K(h,X);if(e(ke<=z),Z&me&&(Te=pt(ce,Z,X)),fe!=null)for(;Ne<ke;)Le=w[Ne++],fe.X[(506832829*Le&4294967295)>>>fe.Mb]=Le}else{if(!(Le<Pe))break e;for(Ce=Le-280,e(fe!=null);Ne<ke;)Le=w[Ne++],fe.X[(506832829*Le&4294967295)>>>fe.Mb]=Le;Le=ke,e(!(Ce>>>(Ye=fe).Xa)),w[Le]=Ye.X[Ce],Ce=!0}Ce||e(ie.h==U(ie))}if(h.Pb&&ie.h&&ke<z)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Se(h.s.vb,h.s.Wa);else{if(ie.h)break e;K!=null&&K(h,X>G?G:X),h.a=0,h.$=ke-O}return 1}return h.a=3,0}function Qt(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var w=h.Wa;w!=null&&(w.X=null),h.vb=null,e(h!=null)}function Ht(){var h=new Kh;return h==null?null:(h.a=0,h.xb=hm,rn("Predictor","VP8LPredictors"),rn("Predictor","VP8LPredictors_C"),rn("PredictorAdd","VP8LPredictorsAdd"),rn("PredictorAdd","VP8LPredictorsAdd_C"),qc=lt,_o=ot,Pn=ze,vn=br,La=bt,ia=zr,aa=xt,j.VP8LMapColor32b=xs,j.VP8LMapColor8b=zc,h)}function Zt(h,w,O,R,z){var G=1,K=[h],X=[w],Z=R.m,ie=R.s,ce=null,ke=0;e:for(;;){if(O)for(;G&&W(Z,1);){var Ne=K,ve=X,Pe=R,Ae=1,fe=Pe.m,me=Pe.gc[Pe.ab],Te=W(fe,2);if(Pe.Oc&1<<Te)G=0;else{switch(Pe.Oc|=1<<Te,me.hc=Te,me.Ea=Ne[0],me.nc=ve[0],me.K=[null],++Pe.ab,e(4>=Pe.ab),Te){case 0:case 1:me.b=W(fe,3)+2,Ae=Zt(pe(me.Ea,me.b),pe(me.nc,me.b),0,Pe,me.K),me.K=me.K[0];break;case 3:var Ce,Le=W(fe,8)+1,Ye=16<Le?0:4<Le?1:2<Le?2:3;if(Ne[0]=pe(me.Ea,Ye),me.b=Ye,Ce=Ae=Zt(Le,1,0,Pe,me.K)){var $e,ut=Le,We=me,Rt=1<<(8>>We.b),Mt=a(Rt);if(Mt==null)Ce=0;else{var Lt=We.K[0],At=We.w;for(Mt[0]=We.K[0][0],$e=1;$e<1*ut;++$e)Mt[$e]=se(Lt[At+$e],Mt[$e-1]);for(;$e<4*Rt;++$e)Mt[$e]=0;We.K[0]=null,We.K[0]=Mt,Ce=1}}Ae=Ce;break;case 2:break;default:e(0)}G=Ae}}if(K=K[0],X=X[0],G&&W(Z,1)&&!(G=1<=(ke=W(Z,4))&&11>=ke)){R.a=3;break e}var Yt;if(Yt=G)t:{var Wt,wt,Pr,Cn=R,Cr=K,Rn=X,Bt=ke,Wn=O,Vn=Cn.m,Wr=Cn.s,Xr=[null],wn=1,ci=0,Hi=m_[Bt];r:for(;;){if(Wn&&W(Vn,1)){var Vr=W(Vn,3)+2,ua=pe(Cr,Vr),Eo=pe(Rn,Vr),As=ua*Eo;if(!Zt(ua,Eo,0,Cn,Xr))break r;for(Xr=Xr[0],Wr.xc=Vr,Wt=0;Wt<As;++Wt){var Da=Xr[Wt]>>8&65535;Xr[Wt]=Da,Da>=wn&&(wn=Da+1)}}if(Vn.h)break r;for(wt=0;5>wt;++wt){var vr=fm[wt];!wt&&0<Bt&&(vr+=1<<Bt),ci<vr&&(ci=vr)}var ip=o(wn*Hi,E),xm=wn,_m=o(xm,I);if(_m==null)var ef=null;else e(65536>=xm),ef=_m;var ou=a(ci);if(ef==null||ou==null||ip==null){Cn.a=1;break r}var tf=ip;for(Wt=Pr=0;Wt<wn;++Wt){var Si=ef[Wt],Es=Si.G,Os=Si.H,Sm=0,rf=1,km=0;for(wt=0;5>wt;++wt){vr=fm[wt],Es[wt]=tf,Os[wt]=Pr,!wt&&0<Bt&&(vr+=1<<Bt);i:{var nf,ap=vr,af=Cn,su=ou,M_=tf,B_=Pr,op=0,Ma=af.m,F_=W(Ma,1);if(i(su,0,0,ap),F_){var q_=W(Ma,1)+1,U_=W(Ma,1),Nm=W(Ma,U_==0?1:8);su[Nm]=1,q_==2&&(su[Nm=W(Ma,8)]=1);var of=1}else{var Am=a(19),Em=W(Ma,4)+4;if(19<Em){af.a=3;var sf=0;break i}for(nf=0;nf<Em;++nf)Am[p_[nf]]=W(Ma,3);var sp=void 0,lu=void 0,Om=af,z_=Am,lf=ap,jm=su,lp=0,Ba=Om.m,Tm=8,Lm=o(128,E);n:for(;k(Lm,0,7,z_,19);){if(W(Ba,1)){var $_=2+2*W(Ba,3);if((sp=2+W(Ba,$_))>lf)break n}else sp=lf;for(lu=0;lu<lf&&sp--;){F(Ba);var Pm=Lm[0+(127&M(Ba))];H(Ba,Ba.u+Pm.g);var js=Pm.value;if(16>js)jm[lu++]=js,js!=0&&(Tm=js);else{var H_=js==16,Cm=js-16,W_=d_[Cm],Rm=W(Ba,f_[Cm])+W_;if(lu+Rm>lf)break n;for(var V_=H_?Tm:0;0<Rm--;)jm[lu++]=V_}}lp=1;break n}lp||(Om.a=3),of=lp}(of=of&&!Ma.h)&&(op=k(M_,B_,8,su,ap)),of&&op!=0?sf=op:(af.a=3,sf=0)}if(sf==0)break r;if(rf&&h_[wt]==1&&(rf=tf[Pr].g==0),Sm+=tf[Pr].g,Pr+=sf,3>=wt){var uu,up=ou[0];for(uu=1;uu<vr;++uu)ou[uu]>up&&(up=ou[uu]);km+=up}}if(Si.nd=rf,Si.Qb=0,rf&&(Si.qb=(Es[3][Os[3]+0].value<<24|Es[1][Os[1]+0].value<<16|Es[2][Os[2]+0].value)>>>0,Sm==0&&256>Es[0][Os[0]+0].value&&(Si.Qb=1,Si.qb+=Es[0][Os[0]+0].value<<8)),Si.jc=!Si.Qb&&6>km,Si.jc){var uf,ca=Si;for(uf=0;uf<Jr;++uf){var Fa=uf,qa=ca.pd[Fa],cf=ca.G[0][ca.H[0]+Fa];256<=cf.value?(qa.g=cf.g+256,qa.value=cf.value):(qa.g=0,qa.value=0,Fa>>=nt(cf,8,qa),Fa>>=nt(ca.G[1][ca.H[1]+Fa],16,qa),Fa>>=nt(ca.G[2][ca.H[2]+Fa],0,qa),nt(ca.G[3][ca.H[3]+Fa],24,qa))}}}Wr.vc=Xr,Wr.Wb=wn,Wr.Ya=ef,Wr.yc=ip,Yt=1;break t}Yt=0}if(!(G=Yt)){R.a=3;break e}if(0<ke){if(ie.ua=1<<ke,!Me(ie.Wa,ke)){R.a=1,G=0;break e}}else ie.ua=0;var cp=R,Im=K,G_=X,fp=cp.s,dp=fp.xc;if(cp.c=Im,cp.i=G_,fp.md=pe(Im,dp),fp.wc=dp==0?-1:(1<<dp)-1,O){R.xb=k_;break e}if((ce=a(K*X))==null){R.a=1,G=0;break e}G=(G=$t(R,ce,0,K,X,X,null))&&!Z.h;break e}return G?(z!=null?z[0]=ce:(e(ce==null),e(O)),R.$=0,O||Qt(ie)):Qt(ie),G}function mn(h,w){var O=h.c*h.i,R=O+w+16*w;return e(h.c<=w),h.V=a(R),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+O+w,1)}function He(h,w){var O=h.C,R=w-O,z=h.V,G=h.Ba+h.c*O;for(e(w<=h.l.o);0<R;){var K=16<R?16:R,X=h.l.ma,Z=h.l.width,ie=Z*K,ce=X.ca,ke=X.tb+Z*O,Ne=h.Ta,ve=h.Ua;ir(h,K,z,G),Nr(Ne,ve,ce,ke,ie),_t(X,O,O+K,ce,ke,Z),R-=K,z+=K*h.c,O+=K}e(O==w),h.C=h.Ma=w}function le(){this.ub=this.yd=this.td=this.Rb=0}function Re(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ge(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Ct(){this.Yb=function(){var h=[];return function w(O,R,z){for(var G=z[R],K=0;K<G&&(O.push(z.length>R+1?[]:0),!(z.length<R+1));K++)w(O[K],R+1,z)}(h,0,[3,11]),h}()}function Tr(){this.jb=a(3),this.Wc=s([4,8],Ct),this.Xc=s([4,17],Ct)}function ur(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function xr(){this.ld=this.La=this.dd=this.tc=0}function jn(){this.Na=this.la=0}function qi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ta(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _r(){this.uc=this.M=this.Nb=0,this.wa=Array(new xr),this.Y=0,this.ya=Array(new ta),this.aa=0,this.l=new ss}function vo(){this.y=a(16),this.f=a(8),this.ea=a(8)}function os(){this.cb=this.a=0,this.sc="",this.m=new q,this.Od=new le,this.Kc=new Re,this.ed=new ur,this.Qa=new Ge,this.Ic=this.$c=this.Aa=0,this.D=new _r,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,q),this.ia=0,this.pb=o(4,qi),this.Pa=new Tr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new vo),this.Hd=0,this.rb=Array(new jn),this.sb=0,this.wa=Array(new xr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ta),this.L=this.aa=0,this.gd=s([4,2],xr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ss(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Th(){var h=new os;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,iu||(iu=Nc)),h}function Sr(h,w,O){return h.a==0&&(h.a=w,h.sc=O,h.cb=0),0}function Sc(h,w,O){return 3<=O&&h[w+0]==157&&h[w+1]==1&&h[w+2]==42}function kc(h,w){if(h==null)return 0;if(h.a=0,h.sc="OK",w==null)return Sr(h,2,"null VP8Io passed to VP8GetHeaders()");var O=w.data,R=w.w,z=w.ha;if(4>z)return Sr(h,7,"Truncated header.");var G=O[R+0]|O[R+1]<<8|O[R+2]<<16,K=h.Od;if(K.Rb=!(1&G),K.td=G>>1&7,K.yd=G>>4&1,K.ub=G>>5,3<K.td)return Sr(h,3,"Incorrect keyframe parameters.");if(!K.yd)return Sr(h,4,"Frame not displayable.");R+=3,z-=3;var X=h.Kc;if(K.Rb){if(7>z)return Sr(h,7,"cannot parse picture header");if(!Sc(O,R,z))return Sr(h,3,"Bad code word");X.c=16383&(O[R+4]<<8|O[R+3]),X.Td=O[R+4]>>6,X.i=16383&(O[R+6]<<8|O[R+5]),X.Ud=O[R+6]>>6,R+=7,z-=7,h.za=X.c+15>>4,h.Ub=X.i+15>>4,w.width=X.c,w.height=X.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,i((G=h.Pa).jb,0,255,G.jb.length),e((G=h.Qa)!=null),G.Cb=0,G.Bb=0,G.Fb=1,i(G.Zb,0,0,G.Zb.length),i(G.Lb,0,0,G.Lb)}if(K.ub>z)return Sr(h,7,"bad partition length");V(G=h.m,O,R,K.ub),R+=K.ub,z-=K.ub,K.Rb&&(X.Ld=re(G),X.Kd=re(G)),X=h.Qa;var Z,ie=h.Pa;if(e(G!=null),e(X!=null),X.Cb=re(G),X.Cb){if(X.Bb=re(G),re(G)){for(X.Fb=re(G),Z=0;4>Z;++Z)X.Zb[Z]=re(G)?te(G,7):0;for(Z=0;4>Z;++Z)X.Lb[Z]=re(G)?te(G,6):0}if(X.Bb)for(Z=0;3>Z;++Z)ie.jb[Z]=re(G)?ee(G,8):255}else X.Bb=0;if(G.Ka)return Sr(h,3,"cannot parse segment header");if((X=h.ed).zd=re(G),X.Tb=ee(G,6),X.wb=ee(G,3),X.Pc=re(G),X.Pc&&re(G)){for(ie=0;4>ie;++ie)re(G)&&(X.vd[ie]=te(G,6));for(ie=0;4>ie;++ie)re(G)&&(X.od[ie]=te(G,6))}if(h.L=X.Tb==0?0:X.zd?1:2,G.Ka)return Sr(h,3,"cannot parse filter header");var ce=z;if(z=Z=R,R=Z+ce,X=ce,h.Xb=(1<<ee(h.m,2))-1,ce<3*(ie=h.Xb))O=7;else{for(Z+=3*ie,X-=3*ie,ce=0;ce<ie;++ce){var ke=O[z+0]|O[z+1]<<8|O[z+2]<<16;ke>X&&(ke=X),V(h.Jc[+ce],O,Z,ke),Z+=ke,X-=ke,z+=3}V(h.Jc[+ie],O,Z,X),O=Z<R?0:5}if(O!=0)return Sr(h,O,"cannot parse partitions");for(O=ee(Z=h.m,7),z=re(Z)?te(Z,4):0,R=re(Z)?te(Z,4):0,X=re(Z)?te(Z,4):0,ie=re(Z)?te(Z,4):0,Z=re(Z)?te(Z,4):0,ce=h.Qa,ke=0;4>ke;++ke){if(ce.Cb){var Ne=ce.Zb[ke];ce.Fb||(Ne+=O)}else{if(0<ke){h.pb[ke]=h.pb[0];continue}Ne=O}var ve=h.pb[ke];ve.Sc[0]=tp[$n(Ne+z,127)],ve.Sc[1]=rp[$n(Ne+0,127)],ve.Eb[0]=2*tp[$n(Ne+R,127)],ve.Eb[1]=101581*rp[$n(Ne+X,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=tp[$n(Ne+ie,117)],ve.Qc[1]=rp[$n(Ne+Z,127)],ve.lc=Ne+Z}if(!K.Rb)return Sr(h,4,"Not a key frame.");for(re(G),K=h.Pa,O=0;4>O;++O){for(z=0;8>z;++z)for(R=0;3>R;++R)for(X=0;11>X;++X)ie=ne(G,__[O][z][R][X])?ee(G,8):b_[O][z][R][X],K.Wc[O][z].Yb[R][X]=ie;for(z=0;17>z;++z)K.Xc[O][z]=K.Wc[O][S_[z]]}return h.kc=re(G),h.kc&&(h.Bd=ee(G,8)),h.cb=1}function Nc(h,w,O,R,z,G,K){var X=w[z].Yb[O];for(O=0;16>z;++z){if(!ne(h,X[O+0]))return z;for(;!ne(h,X[O+1]);)if(X=w[++z].Yb[0],O=0,z==16)return 16;var Z=w[z+1].Yb;if(ne(h,X[O+2])){var ie=h,ce=0;if(ne(ie,(Ne=X)[(ke=O)+3]))if(ne(ie,Ne[ke+6])){for(X=0,ke=2*(ce=ne(ie,Ne[ke+8]))+(Ne=ne(ie,Ne[ke+9+ce])),ce=0,Ne=y_[ke];Ne[X];++X)ce+=ce+ne(ie,Ne[X]);ce+=3+(8<<ke)}else ne(ie,Ne[ke+7])?(ce=7+2*ne(ie,165),ce+=ne(ie,145)):ce=5+ne(ie,159);else ce=ne(ie,Ne[ke+4])?3+ne(ie,Ne[ke+5]):2;X=Z[2]}else ce=1,X=Z[1];Z=K+w_[z],0>(ie=h).b&&J(ie);var ke,Ne=ie.b,ve=(ke=ie.Ca>>1)-(ie.I>>Ne)>>31;--ie.b,ie.Ca+=ve,ie.Ca|=1,ie.I-=(ke+1&ve)<<Ne,G[Z]=((ce^ve)-ve)*R[(0<z)+0]}return 16}function Il(h){var w=h.rb[h.sb-1];w.la=0,w.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function Lh(h,w){if(h==null)return 0;if(w==null)return Sr(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!kc(h,w))return 0;if(e(h.cb),w.ac==null||w.ac(w)){w.ob&&(h.L=0);var O=Zc[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=w.v-O>>4,h.zb=w.j-O>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=w.o+15+O>>4,h.Hb=w.va+15+O>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var R=h.ed;for(O=0;4>O;++O){var z;if(h.Qa.Cb){var G=h.Qa.Lb[O];h.Qa.Fb||(G+=R.Tb)}else G=R.Tb;for(z=0;1>=z;++z){var K=h.gd[O][z],X=G;if(R.Pc&&(X+=R.vd[0],z&&(X+=R.od[0])),0<(X=0>X?0:63<X?63:X)){var Z=X;0<R.wb&&(Z=4<R.wb?Z>>2:Z>>1)>9-R.wb&&(Z=9-R.wb),1>Z&&(Z=1),K.dd=Z,K.tc=2*X+Z,K.ld=40<=X?2:15<=X?1:0}else K.tc=0;K.La=z}}}O=0}else Sr(h,6,"Frame setup failed"),O=h.a;if(O=O==0){if(O){h.$c=0,0<h.Aa||(h.Ic=D_);e:{O=h.Ic,R=4*(Z=h.za);var ie=32*Z,ce=Z+1,ke=0<h.L?Z*(0<h.Aa?2:1):0,Ne=(h.Aa==2?2:1)*Z;if((K=R+832+(z=3*(16*O+Zc[h.L])/2*ie)+(G=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=K)O=0;else{if(K>h.Vb){if(h.Vb=0,h.Ec=a(K),h.Fc=0,h.Ec==null){O=Sr(h,1,"no memory during frame initialization.");break e}h.Vb=K}K=h.Ec,X=h.Fc,h.Ac=K,h.Bc=X,X+=R,h.Gd=o(ie,vo),h.Hd=0,h.rb=o(ce+1,jn),h.sb=1,h.wa=ke?o(ke,xr):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=Z),e(!0),h.oc=K,h.pc=X,X+=832,h.ya=o(Ne,ta),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=Z),h.R=16*Z,h.B=8*Z,Z=(ie=Zc[h.L])*h.R,ie=ie/2*h.B,h.sa=K,h.ta=X+Z,h.qa=h.sa,h.ra=h.ta+16*O*h.R+ie,h.Ha=h.qa,h.Ia=h.ra+8*O*h.B+ie,h.$c=0,X+=z,h.mb=G?K:null,h.nb=G?X:null,e(X+G<=h.Fc+h.Vb),Il(h),i(h.Ac,h.Bc,0,R),O=1}}if(O){if(w.ka=0,w.y=h.sa,w.O=h.ta,w.f=h.qa,w.N=h.ra,w.ea=h.Ha,w.Vd=h.Ia,w.fa=h.R,w.Rc=h.B,w.F=null,w.J=0,!Hc){for(O=-255;255>=O;++O)Br[255+O]=0>O?-O:O;for(O=-1020;1020>=O;++O)sa[1020+O]=-128>O?-128:127<O?127:O;for(O=-112;112>=O;++O)nu[112+O]=-16>O?-16:15<O?15:O;for(O=-255;510>=O;++O)Ns[255+O]=0>O?0:255<O?255:O;Hc=1}_s=Rh,oa=Ph,eu=Ec,yn=Ch,ai=Oc,kr=Ac,Ss=Ul,$c=bo,tu=Gh,So=zl,ko=Vh,Pa=hs,No=$l,ks=Mc,Ao=Dc,Ca=zi,ru=na,oi=Wh,_i[0]=Ui,_i[1]=Ih,_i[2]=Fh,_i[3]=qh,_i[4]=Lc,_i[5]=fs,_i[6]=Pc,_i[7]=Bl,_i[8]=zh,_i[9]=Uh,Ra[0]=jc,Ra[1]=Mh,Ra[2]=ra,Ra[3]=us,Ra[4]=an,Ra[5]=Bh,Ra[6]=Tc,la[0]=Ea,la[1]=Dh,la[2]=$h,la[3]=Fl,la[4]=wo,la[5]=Hh,la[6]=ql,O=1}else O=0}O&&(O=function(ve,Pe){for(ve.M=0;ve.M<ve.Va;++ve.M){var Ae,fe=ve.Jc[ve.M&ve.Xb],me=ve.m,Te=ve;for(Ae=0;Ae<Te.za;++Ae){var Ce=me,Le=Te,Ye=Le.Ac,$e=Le.Bc+4*Ae,ut=Le.zc,We=Le.ya[Le.aa+Ae];if(Le.Qa.Bb?We.$b=ne(Ce,Le.Pa.jb[0])?2+ne(Ce,Le.Pa.jb[2]):ne(Ce,Le.Pa.jb[1]):We.$b=0,Le.kc&&(We.Ad=ne(Ce,Le.Bd)),We.Za=!ne(Ce,145)+0,We.Za){var Rt=We.Ob,Mt=0;for(Le=0;4>Le;++Le){var Lt,At=ut[0+Le];for(Lt=0;4>Lt;++Lt){At=x_[Ye[$e+Lt]][At];for(var Yt=dm[ne(Ce,At[0])];0<Yt;)Yt=dm[2*Yt+ne(Ce,At[Yt])];At=-Yt,Ye[$e+Lt]=At}n(Rt,Mt,Ye,$e,4),Mt+=4,ut[0+Le]=At}}else At=ne(Ce,156)?ne(Ce,128)?1:3:ne(Ce,163)?2:0,We.Ob[0]=At,i(Ye,$e,At,4),i(ut,0,At,4);We.Dd=ne(Ce,142)?ne(Ce,114)?ne(Ce,183)?1:3:2:0}if(Te.m.Ka)return Sr(ve,7,"Premature end-of-partition0 encountered.");for(;ve.ja<ve.za;++ve.ja){if(Te=fe,Ce=(me=ve).rb[me.sb-1],Ye=me.rb[me.sb+me.ja],Ae=me.ya[me.aa+me.ja],$e=me.kc?Ae.Ad:0)Ce.la=Ye.la=0,Ae.Za||(Ce.Na=Ye.Na=0),Ae.Hc=0,Ae.Gc=0,Ae.ia=0;else{var Wt,wt;if(Ce=Ye,Ye=Te,$e=me.Pa.Xc,ut=me.ya[me.aa+me.ja],We=me.pb[ut.$b],Le=ut.ad,Rt=0,Mt=me.rb[me.sb-1],At=Lt=0,i(Le,Rt,0,384),ut.Za)var Pr=0,Cn=$e[3];else{Yt=a(16);var Cr=Ce.Na+Mt.Na;if(Cr=iu(Ye,$e[1],Cr,We.Eb,0,Yt,0),Ce.Na=Mt.Na=(0<Cr)+0,1<Cr)_s(Yt,0,Le,Rt);else{var Rn=Yt[0]+3>>3;for(Yt=0;256>Yt;Yt+=16)Le[Rt+Yt]=Rn}Pr=1,Cn=$e[0]}var Bt=15&Ce.la,Wn=15&Mt.la;for(Yt=0;4>Yt;++Yt){var Vn=1&Wn;for(Rn=wt=0;4>Rn;++Rn)Bt=Bt>>1|(Vn=(Cr=iu(Ye,Cn,Cr=Vn+(1&Bt),We.Sc,Pr,Le,Rt))>Pr)<<7,wt=wt<<2|(3<Cr?3:1<Cr?2:Le[Rt+0]!=0),Rt+=16;Bt>>=4,Wn=Wn>>1|Vn<<7,Lt=(Lt<<8|wt)>>>0}for(Cn=Bt,Pr=Wn>>4,Wt=0;4>Wt;Wt+=2){for(wt=0,Bt=Ce.la>>4+Wt,Wn=Mt.la>>4+Wt,Yt=0;2>Yt;++Yt){for(Vn=1&Wn,Rn=0;2>Rn;++Rn)Cr=Vn+(1&Bt),Bt=Bt>>1|(Vn=0<(Cr=iu(Ye,$e[2],Cr,We.Qc,0,Le,Rt)))<<3,wt=wt<<2|(3<Cr?3:1<Cr?2:Le[Rt+0]!=0),Rt+=16;Bt>>=2,Wn=Wn>>1|Vn<<5}At|=wt<<4*Wt,Cn|=Bt<<4<<Wt,Pr|=(240&Wn)<<Wt}Ce.la=Cn,Mt.la=Pr,ut.Hc=Lt,ut.Gc=At,ut.ia=43690&At?0:We.ia,$e=!(Lt|At)}if(0<me.L&&(me.wa[me.Y+me.ja]=me.gd[Ae.$b][Ae.Za],me.wa[me.Y+me.ja].La|=!$e),Te.Ka)return Sr(ve,7,"Premature end-of-file encountered.")}if(Il(ve),me=Pe,Te=1,Ae=(fe=ve).D,Ce=0<fe.L&&fe.M>=fe.zb&&fe.M<=fe.Va,fe.Aa==0)e:{if(Ae.M=fe.M,Ae.uc=Ce,Yl(fe,Ae),Te=1,Ae=(wt=fe.D).Nb,Ce=(At=Zc[fe.L])*fe.R,Ye=At/2*fe.B,Yt=16*Ae*fe.R,Rn=8*Ae*fe.B,$e=fe.sa,ut=fe.ta-Ce+Yt,We=fe.qa,Le=fe.ra-Ye+Rn,Rt=fe.Ha,Mt=fe.Ia-Ye+Rn,Wn=(Bt=wt.M)==0,Lt=Bt>=fe.Va-1,fe.Aa==2&&Yl(fe,wt),wt.uc)for(Vn=(Cr=fe).D.M,e(Cr.D.uc),wt=Cr.yb;wt<Cr.Hb;++wt){Pr=wt,Cn=Vn;var Wr=(Xr=(vr=Cr).D).Nb;Wt=vr.R;var Xr=Xr.wa[Xr.Y+Pr],wn=vr.sa,ci=vr.ta+16*Wr*Wt+16*Pr,Hi=Xr.dd,Vr=Xr.tc;if(Vr!=0)if(e(3<=Vr),vr.L==1)0<Pr&&Ca(wn,ci,Wt,Vr+4),Xr.La&&oi(wn,ci,Wt,Vr),0<Cn&&Ao(wn,ci,Wt,Vr+4),Xr.La&&ru(wn,ci,Wt,Vr);else{var ua=vr.B,Eo=vr.qa,As=vr.ra+8*Wr*ua+8*Pr,Da=vr.Ha,vr=vr.Ia+8*Wr*ua+8*Pr;Wr=Xr.ld,0<Pr&&($c(wn,ci,Wt,Vr+4,Hi,Wr),So(Eo,As,Da,vr,ua,Vr+4,Hi,Wr)),Xr.La&&(Pa(wn,ci,Wt,Vr,Hi,Wr),ks(Eo,As,Da,vr,ua,Vr,Hi,Wr)),0<Cn&&(Ss(wn,ci,Wt,Vr+4,Hi,Wr),tu(Eo,As,Da,vr,ua,Vr+4,Hi,Wr)),Xr.La&&(ko(wn,ci,Wt,Vr,Hi,Wr),No(Eo,As,Da,vr,ua,Vr,Hi,Wr))}}if(fe.ia&&alert("todo:DitherRow"),me.put!=null){if(wt=16*Bt,Bt=16*(Bt+1),Wn?(me.y=fe.sa,me.O=fe.ta+Yt,me.f=fe.qa,me.N=fe.ra+Rn,me.ea=fe.Ha,me.W=fe.Ia+Rn):(wt-=At,me.y=$e,me.O=ut,me.f=We,me.N=Le,me.ea=Rt,me.W=Mt),Lt||(Bt-=At),Bt>me.o&&(Bt=me.o),me.F=null,me.J=null,fe.Fa!=null&&0<fe.Fa.length&&wt<Bt&&(me.J=Gl(fe,me,wt,Bt-wt),me.F=fe.mb,me.F==null&&me.F.length==0)){Te=Sr(fe,3,"Could not decode alpha data.");break e}wt<me.j&&(At=me.j-wt,wt=me.j,e(!(1&At)),me.O+=fe.R*At,me.N+=fe.B*(At>>1),me.W+=fe.B*(At>>1),me.F!=null&&(me.J+=me.width*At)),wt<Bt&&(me.O+=me.v,me.N+=me.v>>1,me.W+=me.v>>1,me.F!=null&&(me.J+=me.v),me.ka=wt-me.j,me.U=me.va-me.v,me.T=Bt-wt,Te=me.put(me))}Ae+1!=fe.Ic||Lt||(n(fe.sa,fe.ta-Ce,$e,ut+16*fe.R,Ce),n(fe.qa,fe.ra-Ye,We,Le+8*fe.B,Ye),n(fe.Ha,fe.Ia-Ye,Rt,Mt+8*fe.B,Ye))}if(!Te)return Sr(ve,6,"Output aborted.")}return 1}(h,w)),w.bc!=null&&w.bc(w),O&=1}return O?(h.cb=0,O):0}function wi(h,w,O,R,z){z=h[w+O+32*R]+(z>>3),h[w+O+32*R]=-256&z?0>z?0:255:z}function ls(h,w,O,R,z,G){wi(h,w,0,O,R+z),wi(h,w,1,O,R+G),wi(h,w,2,O,R-G),wi(h,w,3,O,R-z)}function Tn(h){return(20091*h>>16)+h}function Dl(h,w,O,R){var z,G=0,K=a(16);for(z=0;4>z;++z){var X=h[w+0]+h[w+8],Z=h[w+0]-h[w+8],ie=(35468*h[w+4]>>16)-Tn(h[w+12]),ce=Tn(h[w+4])+(35468*h[w+12]>>16);K[G+0]=X+ce,K[G+1]=Z+ie,K[G+2]=Z-ie,K[G+3]=X-ce,G+=4,w++}for(z=G=0;4>z;++z)X=(h=K[G+0]+4)+K[G+8],Z=h-K[G+8],ie=(35468*K[G+4]>>16)-Tn(K[G+12]),wi(O,R,0,0,X+(ce=Tn(K[G+4])+(35468*K[G+12]>>16))),wi(O,R,1,0,Z+ie),wi(O,R,2,0,Z-ie),wi(O,R,3,0,X-ce),G++,R+=32}function Ac(h,w,O,R){var z=h[w+0]+4,G=35468*h[w+4]>>16,K=Tn(h[w+4]),X=35468*h[w+1]>>16;ls(O,R,0,z+K,h=Tn(h[w+1]),X),ls(O,R,1,z+G,h,X),ls(O,R,2,z-G,h,X),ls(O,R,3,z-K,h,X)}function Ph(h,w,O,R,z){Dl(h,w,O,R),z&&Dl(h,w+16,O,R+4)}function Ec(h,w,O,R){oa(h,w+0,O,R,1),oa(h,w+32,O,R+128,1)}function Ch(h,w,O,R){var z;for(h=h[w+0]+4,z=0;4>z;++z)for(w=0;4>w;++w)wi(O,R,w,z,h)}function Oc(h,w,O,R){h[w+0]&&yn(h,w+0,O,R),h[w+16]&&yn(h,w+16,O,R+4),h[w+32]&&yn(h,w+32,O,R+128),h[w+48]&&yn(h,w+48,O,R+128+4)}function Rh(h,w,O,R){var z,G=a(16);for(z=0;4>z;++z){var K=h[w+0+z]+h[w+12+z],X=h[w+4+z]+h[w+8+z],Z=h[w+4+z]-h[w+8+z],ie=h[w+0+z]-h[w+12+z];G[0+z]=K+X,G[8+z]=K-X,G[4+z]=ie+Z,G[12+z]=ie-Z}for(z=0;4>z;++z)K=(h=G[0+4*z]+3)+G[3+4*z],X=G[1+4*z]+G[2+4*z],Z=G[1+4*z]-G[2+4*z],ie=h-G[3+4*z],O[R+0]=K+X>>3,O[R+16]=ie+Z>>3,O[R+32]=K-X>>3,O[R+48]=ie-Z>>3,R+=64}function Ml(h,w,O){var R,z=w-32,G=Hn,K=255-h[z-1];for(R=0;R<O;++R){var X,Z=G,ie=K+h[w-1];for(X=0;X<O;++X)h[w+X]=Z[ie+h[z+X]];w+=32}}function Ih(h,w){Ml(h,w,4)}function Dh(h,w){Ml(h,w,8)}function Mh(h,w){Ml(h,w,16)}function ra(h,w){var O;for(O=0;16>O;++O)n(h,w+32*O,h,w-32,16)}function us(h,w){var O;for(O=16;0<O;--O)i(h,w,h[w-1],16),w+=32}function cs(h,w,O){var R;for(R=0;16>R;++R)i(w,O+32*R,h,16)}function jc(h,w){var O,R=16;for(O=0;16>O;++O)R+=h[w-1+32*O]+h[w+O-32];cs(R>>5,h,w)}function an(h,w){var O,R=8;for(O=0;16>O;++O)R+=h[w-1+32*O];cs(R>>4,h,w)}function Bh(h,w){var O,R=8;for(O=0;16>O;++O)R+=h[w+O-32];cs(R>>4,h,w)}function Tc(h,w){cs(128,h,w)}function gt(h,w,O){return h+2*w+O+2>>2}function Fh(h,w){var O,R=w-32;for(R=new Uint8Array([gt(h[R-1],h[R+0],h[R+1]),gt(h[R+0],h[R+1],h[R+2]),gt(h[R+1],h[R+2],h[R+3]),gt(h[R+2],h[R+3],h[R+4])]),O=0;4>O;++O)n(h,w+32*O,R,0,R.length)}function qh(h,w){var O=h[w-1],R=h[w-1+32],z=h[w-1+64],G=h[w-1+96];de(h,w+0,16843009*gt(h[w-1-32],O,R)),de(h,w+32,16843009*gt(O,R,z)),de(h,w+64,16843009*gt(R,z,G)),de(h,w+96,16843009*gt(z,G,G))}function Ui(h,w){var O,R=4;for(O=0;4>O;++O)R+=h[w+O-32]+h[w-1+32*O];for(R>>=3,O=0;4>O;++O)i(h,w+32*O,R,4)}function Lc(h,w){var O=h[w-1+0],R=h[w-1+32],z=h[w-1+64],G=h[w-1-32],K=h[w+0-32],X=h[w+1-32],Z=h[w+2-32],ie=h[w+3-32];h[w+0+96]=gt(R,z,h[w-1+96]),h[w+1+96]=h[w+0+64]=gt(O,R,z),h[w+2+96]=h[w+1+64]=h[w+0+32]=gt(G,O,R),h[w+3+96]=h[w+2+64]=h[w+1+32]=h[w+0+0]=gt(K,G,O),h[w+3+64]=h[w+2+32]=h[w+1+0]=gt(X,K,G),h[w+3+32]=h[w+2+0]=gt(Z,X,K),h[w+3+0]=gt(ie,Z,X)}function Pc(h,w){var O=h[w+1-32],R=h[w+2-32],z=h[w+3-32],G=h[w+4-32],K=h[w+5-32],X=h[w+6-32],Z=h[w+7-32];h[w+0+0]=gt(h[w+0-32],O,R),h[w+1+0]=h[w+0+32]=gt(O,R,z),h[w+2+0]=h[w+1+32]=h[w+0+64]=gt(R,z,G),h[w+3+0]=h[w+2+32]=h[w+1+64]=h[w+0+96]=gt(z,G,K),h[w+3+32]=h[w+2+64]=h[w+1+96]=gt(G,K,X),h[w+3+64]=h[w+2+96]=gt(K,X,Z),h[w+3+96]=gt(X,Z,Z)}function fs(h,w){var O=h[w-1+0],R=h[w-1+32],z=h[w-1+64],G=h[w-1-32],K=h[w+0-32],X=h[w+1-32],Z=h[w+2-32],ie=h[w+3-32];h[w+0+0]=h[w+1+64]=G+K+1>>1,h[w+1+0]=h[w+2+64]=K+X+1>>1,h[w+2+0]=h[w+3+64]=X+Z+1>>1,h[w+3+0]=Z+ie+1>>1,h[w+0+96]=gt(z,R,O),h[w+0+64]=gt(R,O,G),h[w+0+32]=h[w+1+96]=gt(O,G,K),h[w+1+32]=h[w+2+96]=gt(G,K,X),h[w+2+32]=h[w+3+96]=gt(K,X,Z),h[w+3+32]=gt(X,Z,ie)}function Bl(h,w){var O=h[w+0-32],R=h[w+1-32],z=h[w+2-32],G=h[w+3-32],K=h[w+4-32],X=h[w+5-32],Z=h[w+6-32],ie=h[w+7-32];h[w+0+0]=O+R+1>>1,h[w+1+0]=h[w+0+64]=R+z+1>>1,h[w+2+0]=h[w+1+64]=z+G+1>>1,h[w+3+0]=h[w+2+64]=G+K+1>>1,h[w+0+32]=gt(O,R,z),h[w+1+32]=h[w+0+96]=gt(R,z,G),h[w+2+32]=h[w+1+96]=gt(z,G,K),h[w+3+32]=h[w+2+96]=gt(G,K,X),h[w+3+64]=gt(K,X,Z),h[w+3+96]=gt(X,Z,ie)}function Uh(h,w){var O=h[w-1+0],R=h[w-1+32],z=h[w-1+64],G=h[w-1+96];h[w+0+0]=O+R+1>>1,h[w+2+0]=h[w+0+32]=R+z+1>>1,h[w+2+32]=h[w+0+64]=z+G+1>>1,h[w+1+0]=gt(O,R,z),h[w+3+0]=h[w+1+32]=gt(R,z,G),h[w+3+32]=h[w+1+64]=gt(z,G,G),h[w+3+64]=h[w+2+64]=h[w+0+96]=h[w+1+96]=h[w+2+96]=h[w+3+96]=G}function zh(h,w){var O=h[w-1+0],R=h[w-1+32],z=h[w-1+64],G=h[w-1+96],K=h[w-1-32],X=h[w+0-32],Z=h[w+1-32],ie=h[w+2-32];h[w+0+0]=h[w+2+32]=O+K+1>>1,h[w+0+32]=h[w+2+64]=R+O+1>>1,h[w+0+64]=h[w+2+96]=z+R+1>>1,h[w+0+96]=G+z+1>>1,h[w+3+0]=gt(X,Z,ie),h[w+2+0]=gt(K,X,Z),h[w+1+0]=h[w+3+32]=gt(O,K,X),h[w+1+32]=h[w+3+64]=gt(R,O,K),h[w+1+64]=h[w+3+96]=gt(z,R,O),h[w+1+96]=gt(G,z,R)}function $h(h,w){var O;for(O=0;8>O;++O)n(h,w+32*O,h,w-32,8)}function Fl(h,w){var O;for(O=0;8>O;++O)i(h,w,h[w-1],8),w+=32}function yo(h,w,O){var R;for(R=0;8>R;++R)i(w,O+32*R,h,8)}function Ea(h,w){var O,R=8;for(O=0;8>O;++O)R+=h[w+O-32]+h[w-1+32*O];yo(R>>4,h,w)}function Hh(h,w){var O,R=4;for(O=0;8>O;++O)R+=h[w+O-32];yo(R>>3,h,w)}function wo(h,w){var O,R=4;for(O=0;8>O;++O)R+=h[w-1+32*O];yo(R>>3,h,w)}function ql(h,w){yo(128,h,w)}function ds(h,w,O){var R=h[w-O],z=h[w+0],G=3*(z-R)+Jh[1020+h[w-2*O]-h[w+O]],K=Wc[112+(G+4>>3)];h[w-O]=Hn[255+R+Wc[112+(G+3>>3)]],h[w+0]=Hn[255+z-K]}function Cc(h,w,O,R){var z=h[w+0],G=h[w+O];return li[255+h[w-2*O]-h[w-O]]>R||li[255+G-z]>R}function Rc(h,w,O,R){return 4*li[255+h[w-O]-h[w+0]]+li[255+h[w-2*O]-h[w+O]]<=R}function Ic(h,w,O,R,z){var G=h[w-3*O],K=h[w-2*O],X=h[w-O],Z=h[w+0],ie=h[w+O],ce=h[w+2*O],ke=h[w+3*O];return 4*li[255+X-Z]+li[255+K-ie]>R?0:li[255+h[w-4*O]-G]<=z&&li[255+G-K]<=z&&li[255+K-X]<=z&&li[255+ke-ce]<=z&&li[255+ce-ie]<=z&&li[255+ie-Z]<=z}function Dc(h,w,O,R){var z=2*R+1;for(R=0;16>R;++R)Rc(h,w+R,O,z)&&ds(h,w+R,O)}function zi(h,w,O,R){var z=2*R+1;for(R=0;16>R;++R)Rc(h,w+R*O,1,z)&&ds(h,w+R*O,1)}function na(h,w,O,R){var z;for(z=3;0<z;--z)Dc(h,w+=4*O,O,R)}function Wh(h,w,O,R){var z;for(z=3;0<z;--z)zi(h,w+=4,O,R)}function Oa(h,w,O,R,z,G,K,X){for(G=2*G+1;0<z--;){if(Ic(h,w,O,G,K))if(Cc(h,w,O,X))ds(h,w,O);else{var Z=h,ie=w,ce=O,ke=Z[ie-2*ce],Ne=Z[ie-ce],ve=Z[ie+0],Pe=Z[ie+ce],Ae=Z[ie+2*ce],fe=27*(Te=Jh[1020+3*(ve-Ne)+Jh[1020+ke-Pe]])+63>>7,me=18*Te+63>>7,Te=9*Te+63>>7;Z[ie-3*ce]=Hn[255+Z[ie-3*ce]+Te],Z[ie-2*ce]=Hn[255+ke+me],Z[ie-ce]=Hn[255+Ne+fe],Z[ie+0]=Hn[255+ve-fe],Z[ie+ce]=Hn[255+Pe-me],Z[ie+2*ce]=Hn[255+Ae-Te]}w+=R}}function bi(h,w,O,R,z,G,K,X){for(G=2*G+1;0<z--;){if(Ic(h,w,O,G,K))if(Cc(h,w,O,X))ds(h,w,O);else{var Z=h,ie=w,ce=O,ke=Z[ie-ce],Ne=Z[ie+0],ve=Z[ie+ce],Pe=Wc[112+((Ae=3*(Ne-ke))+4>>3)],Ae=Wc[112+(Ae+3>>3)],fe=Pe+1>>1;Z[ie-2*ce]=Hn[255+Z[ie-2*ce]+fe],Z[ie-ce]=Hn[255+ke+Ae],Z[ie+0]=Hn[255+Ne-Pe],Z[ie+ce]=Hn[255+ve-fe]}w+=R}}function Ul(h,w,O,R,z,G){Oa(h,w,O,1,16,R,z,G)}function bo(h,w,O,R,z,G){Oa(h,w,1,O,16,R,z,G)}function Vh(h,w,O,R,z,G){var K;for(K=3;0<K;--K)bi(h,w+=4*O,O,1,16,R,z,G)}function hs(h,w,O,R,z,G){var K;for(K=3;0<K;--K)bi(h,w+=4,1,O,16,R,z,G)}function Gh(h,w,O,R,z,G,K,X){Oa(h,w,z,1,8,G,K,X),Oa(O,R,z,1,8,G,K,X)}function zl(h,w,O,R,z,G,K,X){Oa(h,w,1,z,8,G,K,X),Oa(O,R,1,z,8,G,K,X)}function $l(h,w,O,R,z,G,K,X){bi(h,w+4*z,z,1,8,G,K,X),bi(O,R+4*z,z,1,8,G,K,X)}function Mc(h,w,O,R,z,G,K,X){bi(h,w+4,1,z,8,G,K,X),bi(O,R+4,1,z,8,G,K,X)}function ps(){this.ba=new $r,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new It,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Hl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Wl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bc(){this.ua=0,this.Wa=new ae,this.vb=new ae,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new I,this.yc=new E}function Kh(){this.xb=this.a=0,this.l=new ss,this.ca=new $r,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bc,this.ab=0,this.gc=o(4,Wl),this.Oc=0}function gs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ss,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xo(h,w,O,R,z,G,K){for(h=h==null?0:h[w+0],w=0;w<K;++w)z[G+w]=h+O[R+w]&255,h=z[G+w]}function Vl(h,w,O,R,z,G,K){var X;if(h==null)xo(null,null,O,R,z,G,K);else for(X=0;X<K;++X)z[G+X]=h[w+X]+O[R+X]&255}function ja(h,w,O,R,z,G,K){if(h==null)xo(null,null,O,R,z,G,K);else{var X,Z=h[w+0],ie=Z,ce=Z;for(X=0;X<K;++X)ie=ce+(Z=h[w+X])-ie,ce=O[R+X]+(-256&ie?0>ie?0:255:ie)&255,ie=Z,z[G+X]=ce}}function Gl(h,w,O,R){var z=w.width,G=w.o;if(e(h!=null&&w!=null),0>O||0>=R||O+R>G)return null;if(!h.Cc){if(h.ga==null){var K;if(h.ga=new gs,(K=h.ga==null)||(K=w.width*w.o,e(h.Gb.length==0),h.Gb=a(K),h.Uc=0,h.Gb==null?K=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,K=1),K=!K),!K){K=h.ga;var X=h.Fa,Z=h.P,ie=h.qc,ce=h.mb,ke=h.nb,Ne=Z+1,ve=ie-1,Pe=K.l;if(e(X!=null&&ce!=null&&w!=null),Ia[0]=null,Ia[1]=xo,Ia[2]=Vl,Ia[3]=ja,K.ca=ce,K.tb=ke,K.c=w.width,K.i=w.height,e(0<K.c&&0<K.i),1>=ie)w=0;else if(K.$a=X[Z+0]>>0&3,K.Z=X[Z+0]>>2&3,K.Lc=X[Z+0]>>4&3,Z=X[Z+0]>>6&3,0>K.$a||1<K.$a||4<=K.Z||1<K.Lc||Z)w=0;else if(Pe.put=On,Pe.ac=Xt,Pe.bc=nn,Pe.ma=K,Pe.width=w.width,Pe.height=w.height,Pe.Da=w.Da,Pe.v=w.v,Pe.va=w.va,Pe.j=w.j,Pe.o=w.o,K.$a)e:{e(K.$a==1),w=Ht();t:for(;;){if(w==null){w=0;break e}if(e(K!=null),K.mc=w,w.c=K.c,w.i=K.i,w.l=K.l,w.l.ma=K,w.l.width=K.c,w.l.height=K.i,w.a=0,Q(w.m,X,Ne,ve),!Zt(K.c,K.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&Kt(w.s)?(K.ic=1,X=w.c*w.i,w.Ta=null,w.Ua=0,w.V=a(X),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(K.ic=0,w=mn(w,K.c)),!w))break t;w=1;break e}K.mc=null,w=0}else w=ve>=K.c*K.i;K=!w}if(K)return null;h.ga.Lc!=1?h.Ga=0:R=G-O}e(h.ga!=null),e(O+R<=G);e:{if(w=(X=h.ga).c,G=X.l.o,X.$a==0){if(Ne=h.rc,ve=h.Vc,Pe=h.Fa,Z=h.P+1+O*w,ie=h.mb,ce=h.nb+O*w,e(Z<=h.P+h.qc),X.Z!=0)for(e(Ia[X.Z]!=null),K=0;K<R;++K)Ia[X.Z](Ne,ve,Pe,Z,ie,ce,w),Ne=ie,ve=ce,ce+=w,Z+=w;else for(K=0;K<R;++K)n(ie,ce,Pe,Z,w),Ne=ie,ve=ce,ce+=w,Z+=w;h.rc=Ne,h.Vc=ve}else{if(e(X.mc!=null),w=O+R,e((K=X.mc)!=null),e(w<=K.i),K.C>=w)w=1;else if(X.ic||_e(),X.ic){X=K.V,Ne=K.Ba,ve=K.c;var Ae=K.i,fe=(Pe=1,Z=K.$/ve,ie=K.$%ve,ce=K.m,ke=K.s,K.$),me=ve*Ae,Te=ve*w,Ce=ke.wc,Le=fe<Te?pt(ke,ie,Z):null;e(fe<=me),e(w<=Ae),e(Kt(ke));t:for(;;){for(;!ce.h&&fe<Te;){if(ie&Ce||(Le=pt(ke,ie,Z)),e(Le!=null),F(ce),256>(Ae=Je(Le.G[0],Le.H[0],ce)))X[Ne+fe]=Ae,++fe,++ie>=ve&&(ie=0,++Z<=w&&!(Z%16)&&Tt(K,Z));else{if(!(280>Ae)){Pe=0;break t}Ae=Be(Ae-256,ce);var Ye,$e=Je(Le.G[4],Le.H[4],ce);if(F(ce),!(fe>=($e=Qe(ve,$e=Be($e,ce)))&&me-fe>=Ae)){Pe=0;break t}for(Ye=0;Ye<Ae;++Ye)X[Ne+fe+Ye]=X[Ne+fe+Ye-$e];for(fe+=Ae,ie+=Ae;ie>=ve;)ie-=ve,++Z<=w&&!(Z%16)&&Tt(K,Z);fe<Te&&ie&Ce&&(Le=pt(ke,ie,Z))}e(ce.h==U(ce))}Tt(K,Z>w?w:Z);break t}!Pe||ce.h&&fe<me?(Pe=0,K.a=ce.h?5:3):K.$=fe,w=Pe}else w=$t(K,K.V,K.Ba,K.c,K.i,w,He);if(!w){R=0;break e}}O+R>=G&&(h.Cc=1),R=1}if(!R)return null;if(h.Cc&&((R=h.ga)!=null&&(R.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+O*z}function N(h,w,O,R,z,G){for(;0<z--;){var K,X=h,Z=w+(O?1:0),ie=h,ce=w+(O?0:3);for(K=0;K<R;++K){var ke=ie[ce+4*K];ke!=255&&(ke*=32897,X[Z+4*K+0]=X[Z+4*K+0]*ke>>23,X[Z+4*K+1]=X[Z+4*K+1]*ke>>23,X[Z+4*K+2]=X[Z+4*K+2]*ke>>23)}w+=G}}function $(h,w,O,R,z){for(;0<R--;){var G;for(G=0;G<O;++G){var K=h[w+2*G+0],X=15&(ie=h[w+2*G+1]),Z=4369*X,ie=(240&ie|ie>>4)*Z>>16;h[w+2*G+0]=(240&K|K>>4)*Z>>16&240|(15&K|K<<4)*Z>>16>>4&15,h[w+2*G+1]=240&ie|X}w+=z}}function oe(h,w,O,R,z,G,K,X){var Z,ie,ce=255;for(ie=0;ie<z;++ie){for(Z=0;Z<R;++Z){var ke=h[w+Z];G[K+4*Z]=ke,ce&=ke}w+=O,K+=X}return ce!=255}function ue(h,w,O,R,z){var G;for(G=0;G<z;++G)O[R+G]=h[w+G]>>8}function _e(){si=N,er=$,tr=oe,Nr=ue}function Oe(h,w,O){j[h]=function(R,z,G,K,X,Z,ie,ce,ke,Ne,ve,Pe,Ae,fe,me,Te,Ce){var Le,Ye=Ce-1>>1,$e=X[Z+0]|ie[ce+0]<<16,ut=ke[Ne+0]|ve[Pe+0]<<16;e(R!=null);var We=3*$e+ut+131074>>2;for(w(R[z+0],255&We,We>>16,Ae,fe),G!=null&&(We=3*ut+$e+131074>>2,w(G[K+0],255&We,We>>16,me,Te)),Le=1;Le<=Ye;++Le){var Rt=X[Z+Le]|ie[ce+Le]<<16,Mt=ke[Ne+Le]|ve[Pe+Le]<<16,Lt=$e+Rt+ut+Mt+524296,At=Lt+2*(Rt+ut)>>3;We=At+$e>>1,$e=(Lt=Lt+2*($e+Mt)>>3)+Rt>>1,w(R[z+2*Le-1],255&We,We>>16,Ae,fe+(2*Le-1)*O),w(R[z+2*Le-0],255&$e,$e>>16,Ae,fe+(2*Le-0)*O),G!=null&&(We=Lt+ut>>1,$e=At+Mt>>1,w(G[K+2*Le-1],255&We,We>>16,me,Te+(2*Le-1)*O),w(G[K+2*Le+0],255&$e,$e>>16,me,Te+(2*Le+0)*O)),$e=Rt,ut=Mt}1&Ce||(We=3*$e+ut+131074>>2,w(R[z+Ce-1],255&We,We>>16,Ae,fe+(Ce-1)*O),G!=null&&(We=3*ut+$e+131074>>2,w(G[K+Ce-1],255&We,We>>16,me,Te+(Ce-1)*O)))}}function De(){ui[Vc]=N_,ui[Gc]=pm,ui[um]=A_,ui[Kc]=gm,ui[Yc]=mm,ui[Xh]=vm,ui[cm]=E_,ui[Qh]=pm,ui[Zh]=gm,ui[Jc]=mm,ui[ep]=vm}function Ke(h){return h&-16384?0>h?0:255:h>>O_}function st(h,w){return Ke((19077*h>>8)+(26149*w>>8)-14234)}function yt(h,w,O){return Ke((19077*h>>8)-(6419*w>>8)-(13320*O>>8)+8708)}function mt(h,w){return Ke((19077*h>>8)+(33050*w>>8)-17685)}function Ot(h,w,O,R,z){R[z+0]=st(h,O),R[z+1]=yt(h,w,O),R[z+2]=mt(h,w)}function fr(h,w,O,R,z){R[z+0]=mt(h,w),R[z+1]=yt(h,w,O),R[z+2]=st(h,O)}function mr(h,w,O,R,z){var G=yt(h,w,O);w=G<<3&224|mt(h,w)>>3,R[z+0]=248&st(h,O)|G>>5,R[z+1]=w}function Lr(h,w,O,R,z){var G=240&mt(h,w)|15;R[z+0]=240&st(h,O)|yt(h,w,O)>>4,R[z+1]=G}function on(h,w,O,R,z){R[z+0]=255,Ot(h,w,O,R,z+1)}function Hr(h,w,O,R,z){fr(h,w,O,R,z),R[z+3]=255}function xi(h,w,O,R,z){Ot(h,w,O,R,z),R[z+3]=255}function $n(h,w){return 0>h?0:h>w?w:h}function $i(h,w,O){j[h]=function(R,z,G,K,X,Z,ie,ce,ke){for(var Ne=ce+(-2&ke)*O;ce!=Ne;)w(R[z+0],G[K+0],X[Z+0],ie,ce),w(R[z+1],G[K+0],X[Z+0],ie,ce+O),z+=2,++K,++Z,ce+=2*O;1&ke&&w(R[z+0],G[K+0],X[Z+0],ie,ce)}}function Fc(h,w,O){return O==0?h==0?w==0?6:5:w==0?4:0:O}function Kl(h,w,O,R,z){switch(h>>>30){case 3:oa(w,O,R,z,0);break;case 2:kr(w,O,R,z);break;case 1:yn(w,O,R,z)}}function Yl(h,w){var O,R,z=w.M,G=w.Nb,K=h.oc,X=h.pc+40,Z=h.oc,ie=h.pc+584,ce=h.oc,ke=h.pc+600;for(O=0;16>O;++O)K[X+32*O-1]=129;for(O=0;8>O;++O)Z[ie+32*O-1]=129,ce[ke+32*O-1]=129;for(0<z?K[X-1-32]=Z[ie-1-32]=ce[ke-1-32]=129:(i(K,X-32-1,127,21),i(Z,ie-32-1,127,9),i(ce,ke-32-1,127,9)),R=0;R<h.za;++R){var Ne=w.ya[w.aa+R];if(0<R){for(O=-1;16>O;++O)n(K,X+32*O-4,K,X+32*O+12,4);for(O=-1;8>O;++O)n(Z,ie+32*O-4,Z,ie+32*O+4,4),n(ce,ke+32*O-4,ce,ke+32*O+4,4)}var ve=h.Gd,Pe=h.Hd+R,Ae=Ne.ad,fe=Ne.Hc;if(0<z&&(n(K,X-32,ve[Pe].y,0,16),n(Z,ie-32,ve[Pe].f,0,8),n(ce,ke-32,ve[Pe].ea,0,8)),Ne.Za){var me=K,Te=X-32+16;for(0<z&&(R>=h.za-1?i(me,Te,ve[Pe].y[15],4):n(me,Te,ve[Pe+1].y,0,4)),O=0;4>O;O++)me[Te+128+O]=me[Te+256+O]=me[Te+384+O]=me[Te+0+O];for(O=0;16>O;++O,fe<<=2)me=K,Te=X+wm[O],_i[Ne.Ob[O]](me,Te),Kl(fe,Ae,16*+O,me,Te)}else if(me=Fc(R,z,Ne.Ob[0]),Ra[me](K,X),fe!=0)for(O=0;16>O;++O,fe<<=2)Kl(fe,Ae,16*+O,K,X+wm[O]);for(O=Ne.Gc,me=Fc(R,z,Ne.Dd),la[me](Z,ie),la[me](ce,ke),fe=Ae,me=Z,Te=ie,255&(Ne=O>>0)&&(170&Ne?eu(fe,256,me,Te):ai(fe,256,me,Te)),Ne=ce,fe=ke,255&(O>>=8)&&(170&O?eu(Ae,320,Ne,fe):ai(Ae,320,Ne,fe)),z<h.Ub-1&&(n(ve[Pe].y,0,K,X+480,16),n(ve[Pe].f,0,Z,ie+224,8),n(ve[Pe].ea,0,ce,ke+224,8)),O=8*G*h.B,ve=h.sa,Pe=h.ta+16*R+16*G*h.R,Ae=h.qa,Ne=h.ra+8*R+O,fe=h.Ha,me=h.Ia+8*R+O,O=0;16>O;++O)n(ve,Pe+O*h.R,K,X+32*O,16);for(O=0;8>O;++O)n(Ae,Ne+O*h.B,Z,ie+32*O,8),n(fe,me+O*h.B,ce,ke+32*O,8)}}function ms(h,w,O,R,z,G,K,X,Z){var ie=[0],ce=[0],ke=0,Ne=Z!=null?Z.kd:0,ve=Z??new Hl;if(h==null||12>O)return 7;ve.data=h,ve.w=w,ve.ha=O,w=[w],O=[O],ve.gb=[ve.gb];e:{var Pe=w,Ae=O,fe=ve.gb;if(e(h!=null),e(Ae!=null),e(fe!=null),fe[0]=0,12<=Ae[0]&&!r(h,Pe[0],"RIFF")){if(r(h,Pe[0]+8,"WEBP")){fe=3;break e}var me=Ee(h,Pe[0]+4);if(12>me||4294967286<me){fe=3;break e}if(Ne&&me>Ae[0]-8){fe=7;break e}fe[0]=me,Pe[0]+=12,Ae[0]-=12}fe=0}if(fe!=0)return fe;for(me=0<ve.gb[0],O=O[0];;){e:{var Te=h;Ae=w,fe=O;var Ce=ie,Le=ce,Ye=Pe=[0];if((We=ke=[ke])[0]=0,8>fe[0])fe=7;else{if(!r(Te,Ae[0],"VP8X")){if(Ee(Te,Ae[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var $e=Ee(Te,Ae[0]+8),ut=1+je(Te,Ae[0]+12);if(2147483648<=ut*(Te=1+je(Te,Ae[0]+15))){fe=3;break e}Ye!=null&&(Ye[0]=$e),Ce!=null&&(Ce[0]=ut),Le!=null&&(Le[0]=Te),Ae[0]+=18,fe[0]-=18,We[0]=1}fe=0}}if(ke=ke[0],Pe=Pe[0],fe!=0)return fe;if(Ae=!!(2&Pe),!me&&ke)return 3;if(G!=null&&(G[0]=!!(16&Pe)),K!=null&&(K[0]=Ae),X!=null&&(X[0]=0),K=ie[0],Pe=ce[0],ke&&Ae&&Z==null){fe=0;break}if(4>O){fe=7;break}if(me&&ke||!me&&!ke&&!r(h,w[0],"ALPH")){O=[O],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{$e=h,fe=w,me=O;var We=ve.gb;Ce=ve.na,Le=ve.P,Ye=ve.Sa,ut=22,e($e!=null),e(me!=null),Te=fe[0];var Rt=me[0];for(e(Ce!=null),e(Ye!=null),Ce[0]=null,Le[0]=null,Ye[0]=0;;){if(fe[0]=Te,me[0]=Rt,8>Rt){fe=7;break e}var Mt=Ee($e,Te+4);if(4294967286<Mt){fe=3;break e}var Lt=8+Mt+1&-2;if(ut+=Lt,0<We&&ut>We){fe=3;break e}if(!r($e,Te,"VP8 ")||!r($e,Te,"VP8L")){fe=0;break e}if(Rt[0]<Lt){fe=7;break e}r($e,Te,"ALPH")||(Ce[0]=$e,Le[0]=Te+8,Ye[0]=Mt),Te+=Lt,Rt-=Lt}}if(O=O[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],fe!=0)break}O=[O],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(We=h,fe=w,me=O,Ce=ve.gb[0],Le=ve.Ja,Ye=ve.xa,$e=fe[0],Te=!r(We,$e,"VP8 "),ut=!r(We,$e,"VP8L"),e(We!=null),e(me!=null),e(Le!=null),e(Ye!=null),8>me[0])fe=7;else{if(Te||ut){if(We=Ee(We,$e+4),12<=Ce&&We>Ce-12){fe=3;break e}if(Ne&&We>me[0]-8){fe=7;break e}Le[0]=We,fe[0]+=8,me[0]-=8,Ye[0]=ut}else Ye[0]=5<=me[0]&&We[$e+0]==47&&!(We[$e+4]>>5),Le[0]=me[0];fe=0}if(O=O[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],w=w[0],fe!=0)break;if(4294967286<ve.Ja)return 3;if(X==null||Ae||(X[0]=ve.xa?2:1),K=[K],Pe=[Pe],ve.xa){if(5>O){fe=7;break}X=K,Ne=Pe,Ae=G,h==null||5>O?h=0:5<=O&&h[w+0]==47&&!(h[w+4]>>5)?(me=[0],We=[0],Ce=[0],Q(Le=new L,h,w,O),be(Le,me,We,Ce)?(X!=null&&(X[0]=me[0]),Ne!=null&&(Ne[0]=We[0]),Ae!=null&&(Ae[0]=Ce[0]),h=1):h=0):h=0}else{if(10>O){fe=7;break}X=Pe,h==null||10>O||!Sc(h,w+3,O-3)?h=0:(Ne=h[w+0]|h[w+1]<<8|h[w+2]<<16,Ae=16383&(h[w+7]<<8|h[w+6]),h=16383&(h[w+9]<<8|h[w+8]),1&Ne||3<(Ne>>1&7)||!(Ne>>4&1)||Ne>>5>=ve.Ja||!Ae||!h?h=0:(K&&(K[0]=Ae),X&&(X[0]=h),h=1))}if(!h||(K=K[0],Pe=Pe[0],ke&&(ie[0]!=K||ce[0]!=Pe)))return 3;Z!=null&&(Z[0]=ve,Z.offset=w-Z.w,e(4294967286>w-Z.w),e(Z.offset==Z.ha-O));break}return fe==0||fe==7&&ke&&Z==null?(G!=null&&(G[0]|=ve.na!=null&&0<ve.na.length),R!=null&&(R[0]=K),z!=null&&(z[0]=Pe),0):fe}function Jl(h,w,O){var R=w.width,z=w.height,G=0,K=0,X=R,Z=z;if(w.Da=h!=null&&0<h.Da,w.Da&&(X=h.cd,Z=h.bd,G=h.v,K=h.j,11>O||(G&=-2,K&=-2),0>G||0>K||0>=X||0>=Z||G+X>R||K+Z>z))return 0;if(w.v=G,w.j=K,w.va=G+X,w.o=K+Z,w.U=X,w.T=Z,w.da=h!=null&&0<h.da,w.da){if(!Ve(X,Z,O=[h.ib],G=[h.hb]))return 0;w.ib=O[0],w.hb=G[0]}return w.ob=h!=null&&h.ob,w.Kb=h==null||!h.Sd,w.da&&(w.ob=w.ib<3*R/4&&w.hb<3*z/4,w.Kb=0),1}function Xl(h){if(h==null)return 2;if(11>h.S){var w=h.f.RGBA;w.fb+=(h.height-1)*w.A,w.A=-w.A}else w=h.f.kb,h=h.height,w.O+=(h-1)*w.fa,w.fa=-w.fa,w.N+=(h-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(h-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(h-1)*w.lb,w.lb=-w.lb);return 0}function vs(h,w,O,R){if(R==null||0>=h||0>=w)return 2;if(O!=null){if(O.Da){var z=O.cd,G=O.bd,K=-2&O.v,X=-2&O.j;if(0>K||0>X||0>=z||0>=G||K+z>h||X+G>w)return 2;h=z,w=G}if(O.da){if(!Ve(h,w,z=[O.ib],G=[O.hb]))return 2;h=z[0],w=G[0]}}R.width=h,R.height=w;e:{var Z=R.width,ie=R.height;if(h=R.S,0>=Z||0>=ie||!(h>=Vc&&13>h))h=2;else{if(0>=R.Rd&&R.sd==null){K=G=z=w=0;var ce=(X=Z*bm[h])*ie;if(11>h||(G=(ie+1)/2*(w=(Z+1)/2),h==12&&(K=(z=Z)*ie)),(ie=a(ce+2*G+K))==null){h=1;break e}R.sd=ie,11>h?((Z=R.f.RGBA).eb=ie,Z.fb=0,Z.A=X,Z.size=ce):((Z=R.f.kb).y=ie,Z.O=0,Z.fa=X,Z.Fd=ce,Z.f=ie,Z.N=0+ce,Z.Ab=w,Z.Cd=G,Z.ea=ie,Z.W=0+ce+G,Z.Db=w,Z.Ed=G,h==12&&(Z.F=ie,Z.J=0+ce+2*G),Z.Tc=K,Z.lb=z)}if(w=1,z=R.S,G=R.width,K=R.height,z>=Vc&&13>z)if(11>z)h=R.f.RGBA,w&=(X=Math.abs(h.A))*(K-1)+G<=h.size,w&=X>=G*bm[z],w&=h.eb!=null;else{h=R.f.kb,X=(G+1)/2,ce=(K+1)/2,Z=Math.abs(h.fa),ie=Math.abs(h.Ab);var ke=Math.abs(h.Db),Ne=Math.abs(h.lb),ve=Ne*(K-1)+G;w&=Z*(K-1)+G<=h.Fd,w&=ie*(ce-1)+X<=h.Cd,w=(w&=ke*(ce-1)+X<=h.Ed)&Z>=G&ie>=X&ke>=X,w&=h.y!=null,w&=h.f!=null,w&=h.ea!=null,z==12&&(w&=Ne>=G,w&=ve<=h.Tc,w&=h.F!=null)}else w=0;h=w?0:2}}return h!=0||O!=null&&O.fd&&(h=Xl(R)),h}var Jr=64,ys=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ws=24,bs=32,Ql=8,Ln=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];he("Predictor0","PredictorAdd0"),j.Predictor0=function(){return 4278190080},j.Predictor1=function(h){return h},j.Predictor2=function(h,w,O){return w[O+0]},j.Predictor3=function(h,w,O){return w[O+1]},j.Predictor4=function(h,w,O){return w[O-1]},j.Predictor5=function(h,w,O){return ge(ge(h,w[O+1]),w[O+0])},j.Predictor6=function(h,w,O){return ge(h,w[O-1])},j.Predictor7=function(h,w,O){return ge(h,w[O+0])},j.Predictor8=function(h,w,O){return ge(w[O-1],w[O+0])},j.Predictor9=function(h,w,O){return ge(w[O+0],w[O+1])},j.Predictor10=function(h,w,O){return ge(ge(h,w[O-1]),ge(w[O+0],w[O+1]))},j.Predictor11=function(h,w,O){var R=w[O+0];return 0>=Ue(R>>24&255,h>>24&255,(w=w[O-1])>>24&255)+Ue(R>>16&255,h>>16&255,w>>16&255)+Ue(R>>8&255,h>>8&255,w>>8&255)+Ue(255&R,255&h,255&w)?R:h},j.Predictor12=function(h,w,O){var R=w[O+0];return(Ie((h>>24&255)+(R>>24&255)-((w=w[O-1])>>24&255))<<24|Ie((h>>16&255)+(R>>16&255)-(w>>16&255))<<16|Ie((h>>8&255)+(R>>8&255)-(w>>8&255))<<8|Ie((255&h)+(255&R)-(255&w)))>>>0},j.Predictor13=function(h,w,O){var R=w[O-1];return(qe((h=ge(h,w[O+0]))>>24&255,R>>24&255)<<24|qe(h>>16&255,R>>16&255)<<16|qe(h>>8&255,R>>8&255)<<8|qe(h>>0&255,R>>0&255))>>>0};var Yh=j.PredictorAdd0;j.PredictorAdd1=rt,he("Predictor2","PredictorAdd2"),he("Predictor3","PredictorAdd3"),he("Predictor4","PredictorAdd4"),he("Predictor5","PredictorAdd5"),he("Predictor6","PredictorAdd6"),he("Predictor7","PredictorAdd7"),he("Predictor8","PredictorAdd8"),he("Predictor9","PredictorAdd9"),he("Predictor10","PredictorAdd10"),he("Predictor11","PredictorAdd11"),he("Predictor12","PredictorAdd12"),he("Predictor13","PredictorAdd13");var Zl=j.PredictorAdd2;tt("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),tt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var qc,ii=j.ColorIndexInverseTransform,xs=j.MapARGB,Uc=j.VP8LColorIndexInverseTransformAlpha,zc=j.MapAlpha,Ta=j.VP8LPredictorsAdd=[];Ta.length=16,(j.VP8LPredictors=[]).length=16,(j.VP8LPredictorsAdd_C=[]).length=16,(j.VP8LPredictors_C=[]).length=16;var _o,Pn,vn,La,ia,aa,_s,oa,kr,eu,yn,ai,Ss,$c,tu,So,ko,Pa,No,ks,Ao,Ca,ru,oi,si,er,tr,Nr,Br=a(511),sa=a(2041),nu=a(225),Ns=a(767),Hc=0,Jh=sa,Wc=nu,Hn=Ns,li=Br,Vc=0,Gc=1,um=2,Kc=3,Yc=4,Xh=5,cm=6,Qh=7,Zh=8,Jc=9,ep=10,f_=[2,3,7],d_=[3,3,11],fm=[280,256,256,256,40],h_=[0,1,1,1,0],p_=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],g_=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],m_=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],v_=8,tp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],rp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],iu=null,y_=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],w_=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],dm=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],b_=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],x_=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],__=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],S_=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ra=[],_i=[],la=[],k_=1,hm=2,Ia=[],ui=[];Oe("UpsampleRgbLinePair",Ot,3),Oe("UpsampleBgrLinePair",fr,3),Oe("UpsampleRgbaLinePair",xi,4),Oe("UpsampleBgraLinePair",Hr,4),Oe("UpsampleArgbLinePair",on,4),Oe("UpsampleRgba4444LinePair",Lr,2),Oe("UpsampleRgb565LinePair",mr,2);var N_=j.UpsampleRgbLinePair,A_=j.UpsampleBgrLinePair,pm=j.UpsampleRgbaLinePair,gm=j.UpsampleBgraLinePair,mm=j.UpsampleArgbLinePair,vm=j.UpsampleRgba4444LinePair,E_=j.UpsampleRgb565LinePair,Xc=16,Qc=1<<Xc-1,au=-227,np=482,O_=6,ym=0,j_=a(256),T_=a(256),L_=a(256),P_=a(256),C_=a(np-au),R_=a(np-au);$i("YuvToRgbRow",Ot,3),$i("YuvToBgrRow",fr,3),$i("YuvToRgbaRow",xi,4),$i("YuvToBgraRow",Hr,4),$i("YuvToArgbRow",on,4),$i("YuvToRgba4444Row",Lr,2),$i("YuvToRgb565Row",mr,2);var wm=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Zc=[0,2,8],I_=[8,7,6,4,4,2,2,2,1,1,1,1],D_=1;this.WebPDecodeRGBA=function(h,w,O,R,z){var G=Gc,K=new ps,X=new $r;K.ba=X,X.S=G,X.width=[X.width],X.height=[X.height];var Z=X.width,ie=X.height,ce=new zn;if(ce==null||h==null)var ke=2;else e(ce!=null),ke=ms(h,w,O,ce.width,ce.height,ce.Pd,ce.Qd,ce.format,null);if(ke!=0?Z=0:(Z!=null&&(Z[0]=ce.width[0]),ie!=null&&(ie[0]=ce.height[0]),Z=1),Z){X.width=X.width[0],X.height=X.height[0],R!=null&&(R[0]=X.width),z!=null&&(z[0]=X.height);e:{if(R=new ss,(z=new Hl).data=h,z.w=w,z.ha=O,z.kd=1,w=[0],e(z!=null),((h=ms(z.data,z.w,z.ha,null,null,null,w,null,z))==0||h==7)&&w[0]&&(h=4),(w=h)==0){if(e(K!=null),R.data=z.data,R.w=z.w+z.offset,R.ha=z.ha-z.offset,R.put=On,R.ac=Xt,R.bc=nn,R.ma=K,z.xa){if((h=Ht())==null){K=1;break e}if(function(Ne,ve){var Pe=[0],Ae=[0],fe=[0];t:for(;;){if(Ne==null)return 0;if(ve==null)return Ne.a=2,0;if(Ne.l=ve,Ne.a=0,Q(Ne.m,ve.data,ve.w,ve.ha),!be(Ne.m,Pe,Ae,fe)){Ne.a=3;break t}if(Ne.xb=hm,ve.width=Pe[0],ve.height=Ae[0],!Zt(Pe[0],Ae[0],1,Ne,null))break t;return 1}return e(Ne.a!=0),0}(h,R)){if(R=(w=vs(R.width,R.height,K.Oa,K.ba))==0){t:{R=h;r:for(;;){if(R==null){R=0;break t}if(e(R.s.yc!=null),e(R.s.Ya!=null),e(0<R.s.Wb),e((O=R.l)!=null),e((z=O.ma)!=null),R.xb!=0){if(R.ca=z.ba,R.tb=z.tb,e(R.ca!=null),!Jl(z.Oa,O,Kc)){R.a=2;break r}if(!mn(R,O.width)||O.da)break r;if((O.da||Nt(R.ca.S))&&_e(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&_e()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!Me(R.s.vb,R.s.Wa.Xa)){R.a=1;break r}R.xb=0}if(!$t(R,R.V,R.Ba,R.c,R.i,O.o,Mr))break r;z.Dc=R.Ma,R=1;break t}e(R.a!=0),R=0}R=!R}R&&(w=h.a)}else w=h.a}else{if((h=new Th)==null){K=1;break e}if(h.Fa=z.na,h.P=z.P,h.qc=z.Sa,kc(h,R)){if((w=vs(R.width,R.height,K.Oa,K.ba))==0){if(h.Aa=0,O=K.Oa,e((z=h)!=null),O!=null){if(0<(Z=0>(Z=O.Md)?0:100<Z?255:255*Z/100)){for(ie=ce=0;4>ie;++ie)12>(ke=z.pb[ie]).lc&&(ke.ia=Z*I_[0>ke.lc?0:ke.lc]>>3),ce|=ke.ia;ce&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=O.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}Lh(h,R)||(w=h.a)}}else w=h.a}w==0&&K.Oa!=null&&K.Oa.fd&&(w=Xl(K.ba))}K=w}G=K!=0?null:11>G?X.f.RGBA.eb:X.f.kb.y}else G=null;return G};var bm=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(j,B){for(var P="",k=0;k<4;k++)P+=String.fromCharCode(j[B++]);return P}function p(j,B){return(j[B+0]<<0|j[B+1]<<8|j[B+2]<<16)>>>0}function d(j,B){return(j[B+0]<<0|j[B+1]<<8|j[B+2]<<16|j[B+3]<<24)>>>0}new l;var f=[0],u=[0],y=[],v=new l,b=t,g=function(j,B){var P={},k=0,E=!1,C=0,I=0;if(P.frames=[],!function(M,U,H,F){for(var J=0;J<F;J++)if(M[U+J]!=H.charCodeAt(J))return!0;return!1}(j,B,"RIFF",4)){var V,ee;for(d(j,B+=4),B+=8;B<j.length;){var te=c(j,B),Q=d(j,B+=4);B+=4;var Y=Q+(1&Q);switch(te){case"VP8 ":case"VP8L":P.frames[k]===void 0&&(P.frames[k]={}),(L=P.frames[k]).src_off=E?I:B-8,L.src_size=C+Q+8,k++,E&&(E=!1,C=0,I=0);break;case"VP8X":(L=P.header={}).feature_flags=j[B];var W=B+4;L.canvas_width=1+p(j,W),W+=3,L.canvas_height=1+p(j,W),W+=3;break;case"ALPH":E=!0,C=Y+8,I=B-8;break;case"ANIM":(L=P.header).bgcolor=d(j,B),W=B+4,L.loop_count=(V=j)[(ee=W)+0]<<0|V[ee+1]<<8,W+=2;break;case"ANMF":var q,L;(L=P.frames[k]={}).offset_x=2*p(j,B),B+=3,L.offset_y=2*p(j,B),B+=3,L.width=1+p(j,B),B+=3,L.height=1+p(j,B),B+=3,L.duration=p(j,B),B+=3,q=j[B++],L.dispose=1&q,L.blend=q>>1&1}te!="ANMF"&&(B+=Y)}return P}}(b,0);g.response=b,g.rgbaoutput=!0,g.dataurl=!1;var m=g.header?g.header:null,_=g.frames?g.frames:null;if(m){m.loop_counter=m.loop_count,f=[m.canvas_height],u=[m.canvas_width];for(var x=0;x<_.length&&_[x].blend!=0;x++);}var A=_[0],D=v.WebPDecodeRGBA(b,A.src_off,A.src_size,u,f);A.rgba=D,A.imgwidth=u[0],A.imgheight=f[0];for(var T=0;T<u[0]*f[0]*4;T++)y[T]=D[T];return this.width=u,this.height=f,this.data=y,this}(function(t){var e=function(){return typeof R1=="function"},r=function(f,u,y,v){var b=4,g=o;switch(v){case t.image_compression.FAST:b=1,g=a;break;case t.image_compression.MEDIUM:b=6,g=s;break;case t.image_compression.SLOW:b=9,g=l}f=n(f,u,y,g);var m=R1(f,{level:b});return t.__addimage__.arrayBufferToBinaryString(m)},n=function(f,u,y,v){for(var b,g,m,_=f.length/u,x=new Uint8Array(f.length+_),A=p(),D=0;D<_;D+=1){if(m=D*u,b=f.subarray(m,m+u),v)x.set(v(b,y,g),m+D);else{for(var T,j=A.length,B=[];T<j;T+=1)B[T]=A[T](b,y,g);var P=d(B.concat());x.set(B[P],m+D)}g=b}return x},i=function(f){var u=Array.apply([],f);return u.unshift(0),u},a=function(f,u){var y,v=[],b=f.length;v[0]=1;for(var g=0;g<b;g+=1)y=f[g-u]||0,v[g+1]=f[g]-y+256&255;return v},o=function(f,u,y){var v,b=[],g=f.length;b[0]=2;for(var m=0;m<g;m+=1)v=y&&y[m]||0,b[m+1]=f[m]-v+256&255;return b},s=function(f,u,y){var v,b,g=[],m=f.length;g[0]=3;for(var _=0;_<m;_+=1)v=f[_-u]||0,b=y&&y[_]||0,g[_+1]=f[_]+256-(v+b>>>1)&255;return g},l=function(f,u,y){var v,b,g,m,_=[],x=f.length;_[0]=4;for(var A=0;A<x;A+=1)v=f[A-u]||0,b=y&&y[A]||0,g=y&&y[A-u]||0,m=c(v,b,g),_[A+1]=f[A]-m+256&255;return _},c=function(f,u,y){if(f===u&&u===y)return f;var v=Math.abs(u-y),b=Math.abs(f-y),g=Math.abs(f+u-y-y);return v<=b&&v<=g?f:b<=g?u:y},p=function(){return[i,a,o,s,l]},d=function(f){var u=f.map(function(y){return y.reduce(function(v,b){return v+Math.abs(b)},0)});return u.indexOf(Math.min.apply(null,u))};t.processPNG=function(f,u,y,v){var b,g,m,_,x,A,D,T,j,B,P,k,E,C,I,V=this.decode.FLATE_DECODE,ee="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(m=new IP(f)).imgData,g=m.bits,b=m.colorSpace,x=m.colors,[4,6].indexOf(m.colorType)!==-1){if(m.bits===8){j=(T=m.pixelBitlength==32?new Uint32Array(m.decodePixels().buffer):m.pixelBitlength==16?new Uint16Array(m.decodePixels().buffer):new Uint8Array(m.decodePixels().buffer)).length,P=new Uint8Array(j*m.colors),B=new Uint8Array(j);var te,Q=m.pixelBitlength-m.bits;for(C=0,I=0;C<j;C++){for(E=T[C],te=0;te<Q;)P[I++]=E>>>te&255,te+=m.bits;B[C]=E>>>te&255}}if(m.bits===16){j=(T=new Uint32Array(m.decodePixels().buffer)).length,P=new Uint8Array(j*(32/m.pixelBitlength)*m.colors),B=new Uint8Array(j*(32/m.pixelBitlength)),k=m.colors>1,C=0,I=0;for(var Y=0;C<j;)E=T[C++],P[I++]=E>>>0&255,k&&(P[I++]=E>>>16&255,E=T[C++],P[I++]=E>>>0&255),B[Y++]=E>>>16&255;g=8}v!==t.image_compression.NONE&&e()?(f=r(P,m.width*m.colors,m.colors,v),D=r(B,m.width,1,v)):(f=P,D=B,V=void 0)}if(m.colorType===3&&(b=this.color_spaces.INDEXED,A=m.palette,m.transparency.indexed)){var W=m.transparency.indexed,q=0;for(C=0,j=W.length;C<j;++C)q+=W[C];if((q/=255)===j-1&&W.indexOf(0)!==-1)_=[W.indexOf(0)];else if(q!==j){for(T=m.decodePixels(),B=new Uint8Array(T.length),C=0,j=T.length;C<j;C++)B[C]=W[T[C]];D=r(B,m.width,1)}}var L=function(M){var U;switch(M){case t.image_compression.FAST:U=11;break;case t.image_compression.MEDIUM:U=13;break;case t.image_compression.SLOW:U=14;break;default:U=12}return U}(v);return V===this.decode.FLATE_DECODE&&(ee="/Predictor "+L+" "),ee+="/Colors "+x+" /BitsPerComponent "+g+" /Columns "+m.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:y,data:f,index:u,filter:V,decodeParameters:ee,transparency:_,palette:A,sMask:D,predictor:L,width:m.width,height:m.height,bitsPerComponent:g,colorSpace:b}}}})(ft.API),function(t){t.processGIF89A=function(e,r,n,i){var a=new DP(e),o=a.width,s=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:s},p=new h0(100).encode(c,100);return t.processJPEG.call(this,p,r,n,i)},t.processGIF87A=t.processGIF89A}(ft.API),Ai.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ai.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Jt.log("bit decode error:"+r)}},Ai.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[a>>7-s&1];this.data[o+4*s]=l.blue,this.data[o+4*s+1]=l.green,this.data[o+4*s+2]=l.red,this.data[o+4*s+3]=255}r!==0&&(this.pos+=4-r)}},Ai.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*i*4,s=a>>4,l=15&a,c=this.palette[s];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Ai.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Ai.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,s=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,c=a>>15?255:0,p=n*this.width*4+4*i;this.data[p]=l,this.data[p+1]=s,this.data[p+2]=o,this.data[p+3]=c}this.pos+=t}},Ai.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,l=(o>>5&r)/r*255|0,c=(o>>11)/e*255|0,p=i*this.width*4+4*a;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=s,this.data[p+3]=255}this.pos+=t}},Ai.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Ai.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*r;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=o}},Ai.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,i){var a=new Ai(e,!1),o=a.width,s=a.height,l={data:a.getData(),width:o,height:s},c=new h0(100).encode(l,100);return t.processJPEG.call(this,c,r,n,i)}}(ft.API),Ey.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,i){var a=new Ey(e),o=a.width,s=a.height,l={data:a.getData(),width:o,height:s},c=new h0(100).encode(l,100);return t.processJPEG.call(this,c,r,n,i)}}(ft.API),ft.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,l=0,c=0;c<i;c+=4){var p=n[c],d=n[c+1],f=n[c+2],u=n[c+3];a[s++]=p,a[s++]=d,a[s++]=f,o[l++]=u}var y=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ft.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Fs=ft.API,Wf=Fs.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,p=c.fof?c.fof:1,d=e.doKerning!==!1,f=0,u=t.length,y=0,v=s[0]||l,b=[];for(r=0;r<u;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+o*(1e3/a)||0)/1e3):(f=d&&qt(c[n])==="object"&&!isNaN(parseInt(c[n][y],10))?c[n][y]/p:0,b.push((s[n]||v)/l+f)),y=n;return b},Sy=Fs.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Fs.processArabic&&(t=Fs.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:Wf.apply(this,arguments).reduce(function(a,o){return a+o},0)},ky=function(t,e,r,n){for(var i=[],a=0,o=t.length,s=0;a!==o&&s+e[a]<r;)s+=e[a],a++;i.push(t.slice(0,a));var l=a;for(s=0;a!==o;)s+e[a]>n&&(i.push(t.slice(l,a)),s=0,l=a),s+=e[a],a++;return l!==a&&i.push(t.slice(l,a)),i},Ny=function(t,e,r){r||(r={});var n,i,a,o,s,l,c,p=[],d=[p],f=r.textIndent||0,u=0,y=0,v=t.split(" "),b=Wf.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var g=Array(l).join(" "),m=[];v.map(function(x){(x=x.split(/\s*\n/)).length>1?m=m.concat(x.map(function(A,D){return(D&&A.length?`
`:"")+A})):m.push(x[0])}),v=m,l=Sy.apply(this,[g,r])}for(a=0,o=v.length;a<o;a++){var _=0;if(n=v[a],l&&n[0]==`
`&&(n=n.substr(1),_=1),f+u+(y=(i=Wf.apply(this,[n,r])).reduce(function(x,A){return x+A},0))>e||_){if(y>e){for(s=ky.apply(this,[n,i,e-(f+u),e]),p.push(s.shift()),p=[s.pop()];s.length;)d.push([s.shift()]);y=i.slice(n.length-(p[0]?p[0].length:0)).reduce(function(x,A){return x+A},0)}else p=[n];d.push(p),f=y+l,u=b}else p.push(n),f+=u+y,u=b}return c=l?function(x,A){return(A?g:"")+x.join(" ")}:function(x){return x.join(" ")},d.map(c)},Fs.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var d=this.internal.getFont(p.fontName,p.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=r.lineIndent;var s,l,c=[];for(s=0,l=n.length;s<l;s++)c=c.concat(Ny.apply(this,[n[s],o,a]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},i=0;i<e.length;i++)r[e[i]]="0123456789abcdef"[i],n["0123456789abcdef"[i]]=e[i];var a=function(d){return"0x"+parseInt(d,10).toString(16)},o=t.__fontmetrics__.compress=function(d){var f,u,y,v,b=["{"];for(var g in d){if(f=d[g],isNaN(parseInt(g,10))?u="'"+g+"'":(g=parseInt(g,10),u=(u=a(g).slice(2)).slice(0,-1)+n[u.slice(-1)]),typeof f=="number")f<0?(y=a(f).slice(3),v="-"):(y=a(f).slice(2),v=""),y=v+y.slice(0,-1)+n[y.slice(-1)];else{if(qt(f)!=="object")throw new Error("Don't know what to do with value type "+qt(f)+".");y=o(f)}b.push(u+y)}return b.push("}"),b.join("")},s=t.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,u,y,v,b={},g=1,m=b,_=[],x="",A="",D=d.length-1,T=1;T<D;T+=1)(v=d[T])=="'"?f?(y=f.join(""),f=void 0):f=[]:f?f.push(v):v=="{"?(_.push([m,y]),m={},y=void 0):v=="}"?((u=_.pop())[0][u[1]]=m,y=void 0,m=u[0]):v=="-"?g=-1:y===void 0?r.hasOwnProperty(v)?(x+=r[v],y=parseInt(x,16)*g,g=1,x=""):x+=v:r.hasOwnProperty(v)?(A+=r[v],m[y]=parseInt(A,16)*g,g=1,y=void 0,A=""):A+=v;return b},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},p={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(d){var f=d.font,u=p.Unicode[f.postScriptName];u&&(f.metadata.Unicode={},f.metadata.Unicode.widths=u.widths,f.metadata.Unicode.kerning=u.kerning);var y=c.Unicode[f.postScriptName];y&&(f.metadata.Unicode.encoding=y,f.encoding=y.codePages[0])}])}(ft.API),function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=r.charCodeAt(a);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,a=r.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e(Vu(s)),o.metadata=t.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,n)}}])}(ft),function(t){function e(){return(ht.canvg?Promise.resolve(ht.canvg):j1(()=>import("./index.es-BiJelEL1.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}ft.API.addSvgAsImage=function(r,n,i,a,o,s,l,c){if(isNaN(n)||isNaN(i))throw Jt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw Jt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=a,p.height=o;var d=p.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,p.width,p.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},u=this;return e().then(function(y){return y.fromString(d,r,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(f)}).then(function(){u.addImage(p.toDataURL("image/jpeg",1),n,i,a,o,l,c)})}}(),ft.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},ft.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),l=[],c=0,p=0,d=0;function f(y,v){var b,g=!1;for(b=0;b<y.length;b+=1)y[b]===v&&(g=!0);return g}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var u=s.length;for(d=0;d<u;d+=1)r[s[d]].value=r[s[d]].defaultValue,r[s[d]].explicitSet=!1}if(qt(t)==="object"){for(i in t)if(a=t[i],f(s,i)&&a!==void 0){if(r[i].type==="boolean"&&typeof a=="boolean")r[i].value=a;else if(r[i].type==="name"&&f(r[i].valueSet,a))r[i].value=a;else if(r[i].type==="integer"&&Number.isInteger(a))r[i].value=a;else if(r[i].type==="array"){for(c=0;c<a.length;c+=1)if(n=!0,a[c].length===1&&typeof a[c][0]=="number")l.push(String(a[c]-1));else if(a[c].length>1){for(p=0;p<a[c].length;p+=1)typeof a[c][p]!="number"&&(n=!1);n===!0&&l.push([a[c][0]-1,a[c][1]-1].join(" "))}r[i].value="["+l.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,v=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?v.push("/"+y+" /"+r[y].value):v.push("/"+y+" "+r[y].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=a.length+o.length+s.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+s+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(ft.API),function(t){var e=t.API,r=e.pdfEscape16=function(a,o){for(var s,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],p=[""],d=0,f=a.length;d<f;++d){if(s=o.metadata.characterToGlyph(a.charCodeAt(d)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=a.charCodeAt(d),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return p.join("");s=s.toString(16),p.push(c[4-s.length],s)}return p.join("")},n=function(a){var o,s,l,c,p,d,f;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,f=(s=Object.keys(a).sort(function(u,y){return u-y})).length;d<f;d++)o=s[d],l.length>=100&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(c=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var s=o.font,l=o.out,c=o.newObject,p=o.putStream;if(s.metadata instanceof t.API.TTFFont&&s.encoding==="Identity-H"){for(var d=s.metadata.Unicode.widths,f=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),u="",y=0;y<f.length;y++)u+=String.fromCharCode(f[y]);var v=c();p({data:u,addLength1:!0,objectId:v}),l("endobj");var b=c();p({data:n(s.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var g=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+$s(s.fontName)),l("/FontFile2 "+v+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var m=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+$s(s.fontName)),l("/FontDescriptor "+g+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+$s(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+m+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var s=o.font,l=o.out,c=o.newObject,p=o.putStream;if(s.metadata instanceof t.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var d=s.metadata.rawData,f="",u=0;u<d.length;u++)f+=String.fromCharCode(d[u]);var y=c();p({data:f,addLength1:!0,objectId:y}),l("endobj");var v=c();p({data:n(s.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var b=c();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+y+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+$s(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=c();for(var g=0;g<s.metadata.hmtx.widths.length;g++)s.metadata.hmtx.widths[g]=parseInt(s.metadata.hmtx.widths[g]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+$s(s.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,s=a.text||"",l=a.x,c=a.y,p=a.options||{},d=a.mutex||{},f=d.pdfEscape,u=d.activeFontKey,y=d.fonts,v=u,b="",g=0,m="",_=y[v].encoding;if(y[v].encoding!=="Identity-H")return{text:s,x:l,y:c,options:p,mutex:d};for(m=s,v=u,Array.isArray(s)&&(m=s[0]),g=0;g<m.length;g+=1)y[v].metadata.hasOwnProperty("cmap")&&(o=y[v].metadata.cmap.unicode.codeMap[m[g].charCodeAt(0)]),o||m[g].charCodeAt(0)<256&&y[v].metadata.hasOwnProperty("Unicode")?b+=m[g]:b+="";var x="";return parseInt(v.slice(1))<14||_==="WinAnsiEncoding"?x=f(b,v).split("").map(function(A){return A.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(x=r(b,y[v])),d.isHex=!0,{text:x,x:l,y:c,options:p,mutex:d}};e.events.push(["postProcessText",function(a){var o=a.text||"",s=[],l={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?s.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):s.push(i(Object.assign({},l,{text:o[c]})).text);a.text=s}else a.text=i(Object.assign({},l,{text:o})).text}])}(ft),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ft.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,a,o,s,l,c,p,d=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,_=0;this.__bidiEngine__={};var x=function(k){var E=k.charCodeAt(),C=E>>8,I=v[C];return I!==void 0?d[256*I+(255&E)]:C===252||C===253?"AL":g.test(C)?"L":C===8?"R":"N"},A=function(k){for(var E,C=0;C<k.length;C++){if((E=x(k.charAt(C)))==="L")return!1;if(E==="R")return!0}return!1},D=function(k,E,C,I){var V,ee,te,Q,Y=E[I];switch(Y){case"L":case"R":m=!1;break;case"N":case"AN":break;case"EN":m&&(Y="AN");break;case"AL":m=!0,Y="R";break;case"WS":Y="N";break;case"CS":I<1||I+1>=E.length||(V=C[I-1])!=="EN"&&V!=="AN"||(ee=E[I+1])!=="EN"&&ee!=="AN"?Y="N":m&&(ee="AN"),Y=ee===V?ee:"N";break;case"ES":Y=(V=I>0?C[I-1]:"B")==="EN"&&I+1<E.length&&E[I+1]==="EN"?"EN":"N";break;case"ET":if(I>0&&C[I-1]==="EN"){Y="EN";break}if(m){Y="N";break}for(te=I+1,Q=E.length;te<Q&&E[te]==="ET";)te++;Y=te<Q&&E[te]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(Q=E.length,te=I+1;te<Q&&E[te]==="NSM";)te++;if(te<Q){var W=k[I],q=W>=1425&&W<=2303||W===64286;if(V=E[te],q&&(V==="R"||V==="AL")){Y="R";break}}}Y=I<1||(V=E[I-1])==="B"?"N":C[I-1];break;case"B":m=!1,i=!0,Y=_;break;case"S":a=!0,Y="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"BN":Y="N"}return Y},T=function(k,E,C){var I=k.split("");return C&&j(I,C,{hiLevel:_}),I.reverse(),E&&E.reverse(),I.join("")},j=function(k,E,C){var I,V,ee,te,Q,Y=-1,W=k.length,q=0,L=[],M=_?u:f,U=[];for(m=!1,i=!1,a=!1,V=0;V<W;V++)U[V]=x(k[V]);for(ee=0;ee<W;ee++){if(Q=q,L[ee]=D(k,U,L,ee),I=240&(q=M[Q][y[L[ee]]]),q&=15,E[ee]=te=M[q][5],I>0)if(I===16){for(V=Y;V<ee;V++)E[V]=1;Y=-1}else Y=-1;if(M[q][6])Y===-1&&(Y=ee);else if(Y>-1){for(V=Y;V<ee;V++)E[V]=te;Y=-1}U[ee]==="B"&&(E[ee]=0),C.hiLevel|=te}a&&function(H,F,J){for(var re=0;re<J;re++)if(H[re]==="S"){F[re]=_;for(var ne=re-1;ne>=0&&H[ne]==="WS";ne--)F[ne]=_}}(U,E,W)},B=function(k,E,C,I,V){if(!(V.hiLevel<k)){if(k===1&&_===1&&!i)return E.reverse(),void(C&&C.reverse());for(var ee,te,Q,Y,W=E.length,q=0;q<W;){if(I[q]>=k){for(Q=q+1;Q<W&&I[Q]>=k;)Q++;for(Y=q,te=Q-1;Y<te;Y++,te--)ee=E[Y],E[Y]=E[te],E[te]=ee,C&&(ee=C[Y],C[Y]=C[te],C[te]=ee);q=Q}q++}}},P=function(k,E,C){var I=k.split(""),V={hiLevel:_};return C||(C=[]),j(I,C,V),function(ee,te,Q){if(Q.hiLevel!==0&&p)for(var Y,W=0;W<ee.length;W++)te[W]===1&&(Y=b.indexOf(ee[W]))>=0&&(ee[W]=b[Y+1])}(I,C,V),B(2,I,E,C,V),B(1,I,E,C,V),I.join("")};return this.__bidiEngine__.doBidiReorder=function(k,E,C){if(function(V,ee){if(ee)for(var te=0;te<V.length;te++)ee[te]=te;s===void 0&&(s=A(V)),c===void 0&&(c=A(V))}(k,E),o||!l||c)if(o&&l&&s^c)_=s?1:0,k=T(k,E,C);else if(!o&&l&&c)_=s?1:0,k=P(k,E,C),k=T(k,E);else if(!o||s||l||c){if(o&&!l&&s^c)k=T(k,E),s?(_=0,k=P(k,E,C)):(_=1,k=P(k,E,C),k=T(k,E));else if(o&&s&&!l&&c)_=1,k=P(k,E,C),k=T(k,E);else if(!o&&!l&&s^c){var I=p;s?(_=1,k=P(k,E,C),_=0,p=!1,k=P(k,E,C),p=I):(_=0,k=P(k,E,C),k=T(k,E),_=1,p=!1,k=P(k,E,C),p=I,k=T(k,E))}}else _=0,k=P(k,E,C);else _=s?1:0,k=P(k,E,C);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,l=k.isOutputVisual,s=k.isInputRtl,c=k.isOutputRtl,p=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text,a=(n.x,n.y,n.options||{}),o=(n.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(o=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?o.push([r.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):o.push([r.doBidiReorder(i[s])]);n.text=o}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(ft),ft.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new fo(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new XP(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new MP(this.contents),this.head=new FP(this),this.name=new HP(this),this.cmap=new Qx(this),this.toUnicode={},this.hhea=new qP(this),this.maxp=new WP(this),this.hmtx=new VP(this),this.post=new zP(this),this.os2=new UP(this),this.loca=new JP(this),this.glyf=new GP(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,l,c;for(c=[],o=0,s=(l=this.bbox).length;o<s;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,a,o,s;for(o=0,a=0,s=(e=""+e).length;0<=s?a<s:a>s;a=0<=s?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Fi,fo=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,a,o,s,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^s)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*a+65536*o+256*s+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,a;for(a=[],n=0,i=e.length;n<i;n++)r=e[n],a.push(this.writeByte(r));return a},t}(),MP=function(){var t;function e(r){var n,i,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,a,o,s,l,c,p,d,f,u,y,v;for(v in u=Object.keys(r).length,l=Math.log(2),d=16*Math.floor(Math.log(u)/l),o=Math.floor(d/l),p=16*u-d,(i=new fo).writeInt(this.scalarType),i.writeShort(u),i.writeShort(d),i.writeShort(o),i.writeShort(p),a=16*u,c=i.pos+a,s=null,y=[],r)for(f=r[v],i.writeString(v),i.writeInt(t(f)),i.writeInt(c),i.writeInt(f.length),y=y.concat(f),v==="head"&&(s=c),c+=f.length;c%4;)y.push(0),c++;return i.write(y),n=2981146554-t(i.data),i.pos=s+8,i.writeUInt32(n),i.data},t=function(r){var n,i,a,o;for(r=Zx.call(r);r.length%4;)r.push(0);for(a=new fo(r),i=0,n=0,o=r.length;n<o;n=n+=4)i+=a.readUInt32();return 4294967295&i},e}(),BP={}.hasOwnProperty,ea=function(t,e){for(var r in e)BP.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Fi=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var FP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Fi),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new fo).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),Oy=function(){function t(e,r){var n,i,a,o,s,l,c,p,d,f,u,y,v,b,g,m,_;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(u=e.readUInt16(),f=u/2,e.pos+=6,a=function(){var x,A;for(A=[],l=x=0;0<=f?x<f:x>f;l=0<=f?++x:--x)A.push(e.readUInt16());return A}(),e.pos+=2,v=function(){var x,A;for(A=[],l=x=0;0<=f?x<f:x>f;l=0<=f?++x:--x)A.push(e.readUInt16());return A}(),c=function(){var x,A;for(A=[],l=x=0;0<=f?x<f:x>f;l=0<=f?++x:--x)A.push(e.readUInt16());return A}(),p=function(){var x,A;for(A=[],l=x=0;0<=f?x<f:x>f;l=0<=f?++x:--x)A.push(e.readUInt16());return A}(),i=(this.length-e.pos+this.offset)/2,s=function(){var x,A;for(A=[],l=x=0;0<=i?x<i:x>i;l=0<=i?++x:--x)A.push(e.readUInt16());return A}(),l=g=0,_=a.length;g<_;l=++g)for(b=a[l],n=m=y=v[l];y<=b?m<=b:m>=b;n=y<=b?++m:--m)p[l]===0?o=n+c[l]:(o=s[p[l]/2+(n-y)-(f-l)]||0)!==0&&(o+=c[l]),this.codeMap[n]=65535&o}e.pos=d}return t.encode=function(e,r){var n,i,a,o,s,l,c,p,d,f,u,y,v,b,g,m,_,x,A,D,T,j,B,P,k,E,C,I,V,ee,te,Q,Y,W,q,L,M,U,H,F,J,re,ne,de,xe,je;switch(I=new fo,o=Object.keys(e).sort(function(Ee,Me){return Ee-Me}),r){case"macroman":for(v=0,b=function(){var Ee=[];for(y=0;y<256;++y)Ee.push(0);return Ee}(),m={0:0},a={},V=0,Y=o.length;V<Y;V++)m[ne=e[i=o[V]]]==null&&(m[ne]=++v),a[i]={old:e[i],new:m[e[i]]},b[i]=m[e[i]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(b),{charMap:a,subtable:I.data,maxGlyphID:v+1};case"unicode":for(E=[],d=[],_=0,m={},n={},g=c=null,ee=0,W=o.length;ee<W;ee++)m[A=e[i=o[ee]]]==null&&(m[A]=++_),n[i]={old:A,new:m[A]},s=m[A]-i,g!=null&&s===c||(g&&d.push(g),E.push(i),c=s),g=i;for(g&&d.push(g),d.push(65535),E.push(65535),P=2*(B=E.length),j=2*Math.pow(Math.log(B)/Math.LN2,2),f=Math.log(j/2)/Math.LN2,T=2*B-j,l=[],D=[],u=[],y=te=0,q=E.length;te<q;y=++te){if(k=E[y],p=d[y],k===65535){l.push(0),D.push(0);break}if(k-(C=n[k].new)>=32768)for(l.push(0),D.push(2*(u.length+B-y)),i=Q=k;k<=p?Q<=p:Q>=p;i=k<=p?++Q:--Q)u.push(n[i].new);else l.push(C-k),D.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*B+2*u.length),I.writeUInt16(0),I.writeUInt16(P),I.writeUInt16(j),I.writeUInt16(f),I.writeUInt16(T),J=0,L=d.length;J<L;J++)i=d[J],I.writeUInt16(i);for(I.writeUInt16(0),re=0,M=E.length;re<M;re++)i=E[re],I.writeUInt16(i);for(de=0,U=l.length;de<U;de++)s=l[de],I.writeUInt16(s);for(xe=0,H=D.length;xe<H;xe++)x=D[xe],I.writeUInt16(x);for(je=0,F=u.length;je<F;je++)v=u[je],I.writeUInt16(v);return{charMap:n,subtable:I.data,maxGlyphID:_+1}}},t}(),Qx=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Fi),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,i,a;for(r.pos=this.offset,this.version=r.readUInt16(),a=r.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)n=new Oy(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var i,a;return n==null&&(n="macroman"),i=Oy.encode(r,n),(a=new fo).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},e}(),qP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Fi),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),UP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Fi),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,i;for(i=[],n=0;n<10;++n)i.push(r.readByte());return i}(),this.charRange=function(){var n,i;for(i=[],n=0;n<4;++n)i.push(r.readInt());return i}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(r.readInt());return i}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),zP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Fi),e.prototype.tag="post",e.prototype.parse=function(r){var n,i,a;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(i=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],a=[];r.pos<this.offset+this.length;)n=r.readByte(),a.push(this.names.push(r.readString(n)));return a;case 151552:return i=r.readUInt16(),this.offsets=r.read(i);case 196608:break;case 262144:return this.map=(function(){var s,l,c;for(c=[],o=s=0,l=this.file.maxp.numGlyphs;0<=l?s<l:s>l;o=0<=l?++s:--s)c.push(r.readUInt32());return c}).call(this)}},e}(),$P=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},HP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Fi),e.prototype.tag="name",e.prototype.parse=function(r){var n,i,a,o,s,l,c,p,d,f,u;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),i=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)i.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(c={},o=d=0,f=i.length;d<f;o=++d)a=i[o],r.pos=a.offset,p=r.readString(a.length),s=new $P(p,a),c[u=a.nameID]==null&&(c[u]=[]),c[a.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),WP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Fi),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),VP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Fi),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,i,a,o,s,l,c;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,d;for(d=[],n=p=0;0<=a?p<a:p>a;n=0<=a?++p:--p)d.push(r.readInt16());return d}(),this.widths=(function(){var p,d,f,u;for(u=[],p=0,d=(f=this.metrics).length;p<d;p++)o=f[p],u.push(o.advance);return u}).call(this),i=this.widths[this.widths.length-1],c=[],n=s=0;0<=a?s<a:s>a;n=0<=a?++s:--s)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),Zx=[].slice,GP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Fi),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,i,a,o,s,l,c,p,d,f;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,i=o.indexOf(r),(a=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+i,s=(l=new fo(n.read(a))).readShort(),p=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[r]=s===-1?new YP(l,p,f,c,d):new KP(l,s,p,f,c,d),this.cache[r]))},e.prototype.encode=function(r,n,i){var a,o,s,l,c;for(s=[],o=[],l=0,c=n.length;l<c;l++)a=r[n[l]],o.push(s.length),a&&(s=s.concat(a.encode(i)));return o.push(s.length),{table:s,offsets:o}},e}(),KP=function(){function t(e,r,n,i,a,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),YP=function(){function t(e,r,n,i,a){var o,s;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new fo(Zx.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),JP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Fi),e.prototype.tag="loca",e.prototype.parse=function(r){var n,i;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(r.readUInt32());return o}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,s=0;s<i.length;++s)if(i[s]=a,o<n.length&&n[o]==s){++o,i[s]=a;var l=this.offsets[s],c=this.offsets[s+1]-l;c>0&&(a+=c)}for(var p=new Array(4*i.length),d=0;d<i.length;++d)p[4*d+3]=255&i[d],p[4*d+2]=(65280&i[d])>>8,p[4*d+1]=(16711680&i[d])>>16,p[4*d]=(4278190080&i[d])>>24;return p},e}(),XP=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,a;for(r in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,a,o,s,l;for(i={},o=0,s=e.length;o<s;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in r=[],i)(n=i[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in l=this.glyphsFor(r))n=l[a],i[a]=n;return i},t.prototype.encode=function(e,r){var n,i,a,o,s,l,c,p,d,f,u,y,v,b,g;for(i in n=Qx.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),u={0:0},g=n.charMap)u[(l=g[i]).old]=l.new;for(y in f=n.maxGlyphID,o)y in u||(u[y]=f++);return p=function(m){var _,x;for(_ in x={},m)x[m[_]]=_;return x}(u),d=Object.keys(p).sort(function(m,_){return m-_}),v=function(){var m,_,x;for(x=[],m=0,_=d.length;m<_;m++)s=d[m],x.push(p[s]);return x}(),a=this.font.glyf.encode(o,v,u),c=this.font.loca.encode(a.offsets,v),b={cmap:this.font.cmap.raw(),glyf:a.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},t}();ft.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,a,o;if(Array.isArray(r))return"["+function(){var s,l,c;for(c=[],s=0,l=r.length;s<l;s++)n=r[s],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in a=["<<"],r)o=r[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+r},e}();const e_=t=>{const e=new ft,r=e.internal.pageSize.getWidth(),n=20,i="#4F46E5",a="#334155",o="#0F172A";e.setFont("helvetica","bold"),e.setFontSize(22),e.setTextColor(i),e.text("Diary Recovery Kit",n,30),e.setFontSize(10),e.setTextColor("#64748B"),e.text(`Generated on: ${new Date().toLocaleDateString()}`,n,38),e.setDrawColor(239,68,68),e.setLineWidth(.5),e.rect(n,50,r-n*2,25),e.setFont("helvetica","bold"),e.setFontSize(12),e.setTextColor(220,38,38),e.text(" EXTREMELY SENSITIVE DOCUMENT",n+5,60),e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor(a),e.text("This document contains your Master Password and Encryption Keys.",n+5,68),e.text("Keep it safe. If you lose your password, this is the ONLY way to restore your data.",n+5,73);let s=95;e.setFont("helvetica","bold"),e.setFontSize(14),e.setTextColor(o),e.text("1. Login Credentials",n,s),s+=10,e.setFontSize(10),e.setTextColor("#64748B"),e.text("Email Address:",n,s),e.setFont("courier","bold"),e.setFontSize(12),e.setTextColor(o),e.text(t.email,n+40,s),s+=10,e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor("#64748B"),e.text("Master Password:",n,s),e.setFillColor(241,245,249),e.rect(n,s+5,r-n*2,15,"F"),e.setFont("courier","bold"),e.setFontSize(14),e.setTextColor(o),e.text(t.password,n+5,s+14),s+=40,e.setFont("helvetica","bold"),e.setFontSize(14),e.setTextColor(o),e.text("2. Emergency Technical Keys",n,s),s+=8,e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor(a),e.text("If the password mechanism ever changes or fails, these raw keys can mathematically",n,s),e.text("decrypt your data using standard AES-GCM algorithms.",n,s+5),s+=15,e.setFontSize(10),e.setTextColor("#64748B"),e.text("Encryption Salt:",n,s),e.setFont("courier","normal"),e.setFontSize(9),e.setTextColor(o),e.text(t.salt,n,s+6),s+=20,e.setFont("helvetica","normal"),e.setFontSize(10),e.setTextColor("#64748B"),e.text("Raw Encryption Key (AES-GCM):",n,s),e.setFont("courier","normal"),e.setFontSize(9),e.setTextColor(o),e.text(t.rawKey,n,s+6),e.setFont("helvetica","italic"),e.setFontSize(8),e.setTextColor("#94A3B8"),e.text("Diary App - Zero Knowledge Architecture",r/2,280,{align:"center"}),e.save("Diary-Recovery-Kit.pdf")},QP=({onSuccess:t,session:e})=>{const[r,n]=we.useState(""),[i,a]=we.useState(!1),[o,s]=we.useState(!1),[l,c]=we.useState(null),[p,d]=we.useState(!1),[f,u]=we.useState(!1),[y,v]=we.useState(null),[b,g]=we.useState(!1),m=async A=>{var D,T,j;if(A.preventDefault(),r.length<6){c("Password must be at least 6 characters long.");return}s(!0),c(null);try{const B=e.user;if(!B)throw new Error("User not available.");const k=`v1:600000:${aN()}`,E=await nx(r,k),{iv:C,data:I}=await em(E,tx),V=(D=B.user_metadata)==null?void 0:D.full_name,ee=((T=B.user_metadata)==null?void 0:T.avatar_url)||((j=B.user_metadata)==null?void 0:j.picture),{error:te}=await Vt.from("profiles").insert({id:B.id,salt:k,key_check_value:I,key_check_iv:C,full_name:V,avatar_url:ee});if(te)throw te;const Q=await rm(E);v({key:E,rawKey:Q,salt:k,password:r,email:B.email||"Unknown Email"})}catch(B){c(B.error_description||B.message||"An unknown error occurred during setup."),console.error("Encryption initialization failed:",B)}finally{s(!1)}},_=()=>{y&&(e_({email:y.email,password:y.password,salt:y.salt,rawKey:y.rawKey}),g(!0))},x=()=>{y&&t(y.key)};return y?S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900",children:S.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md border-t-4 border-green-500 animate-fade-in",children:[S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900 mb-4",children:S.jsx("svg",{className:"h-6 w-6 text-green-600 dark:text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),S.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Setup Complete!"}),S.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Your secure diary is ready."})]}),S.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-md p-4",children:[S.jsxs("h3",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-200 flex items-center gap-2",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Important: Backup Required"]}),S.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-2",children:["Because we can't reset your password, you ",S.jsx("strong",{children:"must"})," download your Recovery Kit. It contains your password and raw encryption keys."]})]}),S.jsxs("button",{onClick:_,className:"w-full flex items-center justify-center gap-2 px-4 py-3 font-semibold text-white bg-slate-800 hover:bg-slate-700 dark:bg-slate-700 dark:hover:bg-slate-600 rounded-md transition-all shadow-lg",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Recovery Kit"]}),S.jsx("button",{onClick:x,disabled:!b,className:"w-full px-4 py-2 font-semibold text-indigo-600 bg-indigo-50 rounded-md hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-400 transition-colors dark:bg-transparent dark:text-indigo-400 dark:hover:text-indigo-300 dark:disabled:text-slate-600",children:b?"Continue to App":"Download Kit to Continue"})]})}):S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900",children:S.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[S.jsxs("div",{className:"text-center",children:[S.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Final Security Step"}),S.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"To complete your secure setup, please create your password."})]}),S.jsx("p",{className:"text-xs text-center text-slate-600 dark:text-slate-300 bg-slate-50 dark:bg-slate-900/50 p-3 rounded-md border dark:border-slate-700",children:"This is required to create your unique encryption key. Your password is never stored, and this one-time step ensures your diary remains private and end-to-end encrypted."}),l&&S.jsx("p",{className:"text-center text-red-500 bg-red-50 p-3 rounded-md",children:l}),S.jsxs("form",{className:"space-y-6",onSubmit:m,children:[S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:i?"text":"password",placeholder:"Your password",value:r,required:!0,minLength:6,onChange:A=>n(A.target.value),className:"w-full px-4 py-2 pr-10 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200",autoComplete:"new-password"}),S.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute inset-y-0 right-0 flex items-center px-3 text-slate-500 dark:text-slate-400","aria-label":i?"Hide password":"Show password",children:i?S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),S.jsx("path",{fillRule:"evenodd",d:"M.458 10C3.732 4.943 9.522 3 10 3s6.268 1.943 9.542 7c-3.274 5.057-9.042 7-9.542 7S3.732 15.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.27 8.138 15.522 6 10 6c-1.55 0-2.998.48-4.257 1.254l-1.74-1.741zM10 12a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"}),S.jsx("path",{d:"M2.042 10c.832 2.345 3.16 4 5.918 4 1.55 0 2.998-.48 4.257-1.254l-1.473-1.473A3.999 3.999 0 0110 14c-2.209 0-4-1.791-4-4a3.999 3.999 0 011.21-2.828L5.293 5.293A10.014 10.014 0 00.458 10c1.274 1.862 4.022 4 9.542 4 1.105 0 2.158-.149 3.168-.43L10.373 12.16A4.003 4.003 0 0110 12z"})]})})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("label",{className:"flex items-start gap-3 cursor-pointer text-sm text-slate-600 dark:text-slate-400",children:[S.jsx("input",{type:"checkbox",checked:p,onChange:A=>d(A.target.checked),className:"mt-1 h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-slate-300 dark:border-slate-600 dark:bg-slate-900 dark:checked:bg-indigo-500",required:!0}),S.jsxs("span",{children:["I have read and agree to the ",S.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-indigo-600 hover:underline dark:text-indigo-400",children:"Privacy Policy"}),"."]})]}),S.jsxs("label",{className:"flex items-start gap-3 cursor-pointer text-sm text-slate-600 dark:text-slate-400",children:[S.jsx("input",{type:"checkbox",checked:f,onChange:A=>u(A.target.checked),className:"mt-1 h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-slate-300 dark:border-slate-600 dark:bg-slate-900 dark:checked:bg-indigo-500",required:!0}),S.jsxs("span",{children:["I have read and agree to the ",S.jsx("a",{href:"/terms.html",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-indigo-600 hover:underline dark:text-indigo-400",children:"Terms of Use"}),"."]})]})]}),S.jsx("button",{type:"submit",disabled:o||!p||!f,className:"w-full px-4 py-2 font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 disabled:bg-indigo-300 disabled:cursor-not-allowed transition-colors",children:o?"Securing...":"Initialize Diary"})]})]})})},t_=typeof PublicKeyCredential<"u"&&typeof PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable=="function",r_=async()=>{if(!t_)return!1;try{return await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()}catch{return!1}},ZP=t=>Uint8Array.from(t,e=>e.charCodeAt(0)),eC=async(t,e)=>{var v,b,g,m;if(!t_)throw new Error("WebAuthn not supported");const r=window.crypto.getRandomValues(new Uint8Array(32)),n=Zo(r.buffer),i=window.crypto.getRandomValues(new Uint8Array(32)),a=ZP(e),o={publicKey:{challenge:i,rp:{name:"Diary App",id:window.location.hostname},user:{id:a,name:"diary-user",displayName:"Diary Owner"},pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required",residentKey:"required",requireResidentKey:!0},timeout:6e4,extensions:{prf:{eval:{first:r}}}}},s=await navigator.credentials.create(o);if(!s)throw new Error("Failed to create credential");const l=Zo(s.rawId);let c=null;const p=s.getClientExtensionResults();if((b=(v=p==null?void 0:p.prf)==null?void 0:v.results)!=null&&b.first)c=new Uint8Array(p.prf.results.first);else{const _={publicKey:{challenge:window.crypto.getRandomValues(new Uint8Array(32)),rpId:window.location.hostname,allowCredentials:[{type:"public-key",id:s.rawId}],userVerification:"required",extensions:{prf:{eval:{first:r}}}}},x=await navigator.credentials.get(_),A=x==null?void 0:x.getClientExtensionResults();(m=(g=A==null?void 0:A.prf)==null?void 0:g.results)!=null&&m.first&&(c=new Uint8Array(A.prf.results.first))}if(!c)throw new Error("Authenticator does not support PRF extension. Please ensure your device and browser support WebAuthn PRF.");const d=await window.crypto.subtle.importKey("raw",c,"AES-GCM",!1,["encrypt","decrypt"]),f=await rm(t),{iv:u,data:y}=await em(d,f);return{credentialId:l,salt:n,encryptedKey:y,iv:u}},tC=async t=>{var c;const e=es(t.salt),r=es(t.credentialId),n={publicKey:{challenge:window.crypto.getRandomValues(new Uint8Array(32)),rpId:window.location.hostname,allowCredentials:[{type:"public-key",id:r}],userVerification:"required",extensions:{prf:{eval:{first:e}}}}},i=await navigator.credentials.get(n);if(!i)throw new Error("Authentication failed");const a=(c=i==null?void 0:i.getClientExtensionResults())==null?void 0:c.prf;if(!a||!a.results||!a.results.first)throw new Error("Could not retrieve PRF key from authenticator.");const o=new Uint8Array(a.results.first),s=await window.crypto.subtle.importKey("raw",o,"AES-GCM",!1,["encrypt","decrypt"]),l=await tm(s,t.encryptedKey,t.iv);return uN(l)},rC=({onSuccess:t,session:e})=>{const[r,n]=we.useState(""),[i,a]=we.useState(!1),[o,s]=we.useState(!1),[l,c]=we.useState(null),{deriveAndVerifyKey:p}=is(),[d,f]=we.useState(!1),[u,y]=we.useState(!1);we.useEffect(()=>{(async()=>{const m=await r_();y(m),localStorage.getItem(`diary_bio_${e.user.id}`)&&f(!0)})()},[e.user.id]);const v=async g=>{g.preventDefault(),s(!0),c(null);try{const m=e.user;if(!m)throw new Error("User not available.");const _=await p(r,m.id);_?t(_):c("Incorrect password. Please try again.")}catch(m){c(m.error_description||m.message||"An unknown error occurred."),console.error("Key derivation failed:",m)}finally{s(!1)}},b=async()=>{s(!0),c(null);try{const g=localStorage.getItem(`diary_bio_${e.user.id}`);if(!g)throw new Error("No biometric data found.");const m=JSON.parse(g),_=await tC(m);t(_)}catch(g){console.error("Biometric unlock failed:",g),c("Biometric unlock failed. Please use your password.")}finally{s(!1)}};return S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900",children:S.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[S.jsxs("div",{className:"text-center",children:[S.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Unlock Your Diary"}),S.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"For your security, please enter your password to continue."})]}),S.jsx("p",{className:"text-xs text-center text-slate-600 dark:text-slate-300 bg-slate-50 dark:bg-slate-900/50 p-3 rounded-md border dark:border-slate-700",children:"Your diary is end-to-end encrypted. We need your password to securely decrypt your entries."}),l&&S.jsx("p",{className:"text-center text-red-500 bg-red-50 p-3 rounded-md",children:l}),S.jsxs("form",{className:"space-y-6",onSubmit:v,children:[S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:i?"text":"password",placeholder:"Your password",value:r,required:!0,onChange:g=>n(g.target.value),className:"w-full px-4 py-2 pr-10 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200","aria-label":"Password for decryption",autoComplete:"current-password"}),S.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute inset-y-0 right-0 flex items-center px-3 text-slate-500 dark:text-slate-400","aria-label":i?"Hide password":"Show password",children:i?S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),S.jsx("path",{fillRule:"evenodd",d:"M.458 10C3.732 4.943 9.522 3 10 3s6.268 1.943 9.542 7c-3.274 5.057-9.042 7-9.542 7S3.732 15.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.27 8.138 15.522 6 10 6c-1.55 0-2.998.48-4.257 1.254l-1.74-1.741zM10 12a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"}),S.jsx("path",{d:"M2.042 10c.832 2.345 3.16 4 5.918 4 1.55 0 2.998-.48 4.257-1.254l-1.473-1.473A3.999 3.999 0 0110 14c-2.209 0-4-1.791-4-4a3.999 3.999 0 011.21-2.828L5.293 5.293A10.014 10.014 0 00.458 10c1.274 1.862 4.022 4 9.542 4 1.105 0 2.158-.149 3.168-.43L10.373 12.16A4.003 4.003 0 0110 12z"})]})})]}),S.jsx("button",{type:"submit",disabled:o,className:"w-full px-4 py-2 font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 disabled:bg-indigo-300",children:o?"Unlocking...":"Unlock with Password"})]}),u&&d&&S.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700 text-center",children:S.jsxs("button",{type:"button",onClick:b,disabled:o,className:"flex flex-col items-center justify-center gap-2 w-full p-4 rounded-lg border-2 border-dashed border-indigo-300 hover:border-indigo-500 hover:bg-indigo-50 dark:border-slate-600 dark:hover:border-indigo-400 dark:hover:bg-indigo-900/20 transition-all group",children:[S.jsx("div",{className:"h-12 w-12 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 group-hover:scale-110 transition-transform",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})})}),S.jsx("span",{className:"font-semibold text-indigo-600 dark:text-indigo-300",children:"Unlock with Biometrics"})]})})]})})};var jy=!1,qo,U1,z1,fd,dd,n_,hd,$1,H1,W1,i_,V1,G1,a_,o_;function In(){if(!jy){jy=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),r=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(V1=/\b(iPhone|iP[ao]d)/.exec(t),G1=/\b(iP[ao]d)/.exec(t),W1=/Android/i.exec(t),a_=/FBAN\/\w+;/i.exec(t),o_=/Mobile/i.exec(t),i_=!!/Win64/.exec(t),e){qo=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,qo&&document&&document.documentMode&&(qo=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(t);n_=n?parseFloat(n[1])+4:qo,U1=e[2]?parseFloat(e[2]):NaN,z1=e[3]?parseFloat(e[3]):NaN,fd=e[4]?parseFloat(e[4]):NaN,fd?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),dd=e&&e[1]?parseFloat(e[1]):NaN):dd=NaN}else qo=U1=z1=dd=fd=NaN;if(r){if(r[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);hd=i?parseFloat(i[1].replace("_",".")):!0}else hd=!1;$1=!!r[2],H1=!!r[3]}else hd=$1=H1=!1}}var K1={ie:function(){return In()||qo},ieCompatibilityMode:function(){return In()||n_>qo},ie64:function(){return K1.ie()&&i_},firefox:function(){return In()||U1},opera:function(){return In()||z1},webkit:function(){return In()||fd},safari:function(){return K1.webkit()},chrome:function(){return In()||dd},windows:function(){return In()||$1},osx:function(){return In()||hd},linux:function(){return In()||H1},iphone:function(){return In()||V1},mobile:function(){return In()||V1||G1||W1||o_},nativeApp:function(){return In()||a_},android:function(){return In()||W1},ipad:function(){return In()||G1}},nC=K1,iC=!!(typeof window<"u"&&window.document&&window.document.createElement),aC={canUseDOM:iC},oC=aC,s_=oC,l_;s_.canUseDOM&&(l_=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function sC(t,e){if(!s_.canUseDOM||e&&!("addEventListener"in document))return!1;var r="on"+t,n=r in document;if(!n){var i=document.createElement("div");i.setAttribute(r,"return;"),n=typeof i[r]=="function"}return!n&&l_&&t==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var lC=sC,uC=nC,cC=lC,Ty=10,Ly=40,Py=800;function u_(t){var e=0,r=0,n=0,i=0;return"detail"in t&&(r=t.detail),"wheelDelta"in t&&(r=-t.wheelDelta/120),"wheelDeltaY"in t&&(r=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=r,r=0),n=e*Ty,i=r*Ty,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||i)&&t.deltaMode&&(t.deltaMode==1?(n*=Ly,i*=Ly):(n*=Py,i*=Py)),n&&!e&&(e=n<1?-1:1),i&&!r&&(r=i<1?-1:1),{spinX:e,spinY:r,pixelX:n,pixelY:i}}u_.getEventType=function(){return uC.firefox()?"DOMMouseScroll":cC("wheel")?"wheel":"mousewheel"};var fC=u_,dC=fC;const hC=Xd(dC);function pC(t,e,r,n,i,a){a===void 0&&(a=0);var o=_l(t,e,a),s=o.width,l=o.height,c=Math.min(s,r),p=Math.min(l,n);return c>p*i?{width:p*i,height:p}:{width:c,height:c/i}}function gC(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function ju(t,e,r,n,i){i===void 0&&(i=0);var a=_l(e.width,e.height,i),o=a.width,s=a.height;return{x:Cy(t.x,o,r.width,n),y:Cy(t.y,s,r.height,n)}}function Cy(t,e,r,n){var i=e*n/2-r/2;return jh(t,-i,i)}function Ry(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function Iy(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function mC(t,e,r,n,i,a,o){a===void 0&&(a=0),o===void 0&&(o=!0);var s=o?vC:yC,l=_l(e.width,e.height,a),c=_l(e.naturalWidth,e.naturalHeight,a),p={x:s(100,((l.width-r.width/i)/2-t.x/i)/l.width*100),y:s(100,((l.height-r.height/i)/2-t.y/i)/l.height*100),width:s(100,r.width/l.width*100/i),height:s(100,r.height/l.height*100/i)},d=Math.round(s(c.width,p.width*c.width/100)),f=Math.round(s(c.height,p.height*c.height/100)),u=c.width>=c.height*n,y=u?{width:Math.round(f*n),height:f}:{width:d,height:Math.round(d/n)},v=Rr(Rr({},y),{x:Math.round(s(c.width-y.width,p.x*c.width/100)),y:Math.round(s(c.height-y.height,p.y*c.height/100))});return{croppedAreaPercentages:p,croppedAreaPixels:v}}function vC(t,e){return Math.min(t,Math.max(0,e))}function yC(t,e){return e}function wC(t,e,r,n,i,a){var o=_l(e.width,e.height,r),s=jh(n.width/o.width*(100/t.width),i,a),l={x:s*o.width/2-n.width/2-o.width*s*(t.x/100),y:s*o.height/2-n.height/2-o.height*s*(t.y/100)};return{crop:l,zoom:s}}function bC(t,e,r){var n=gC(e);return r.height>r.width?r.height/(t.height*n):r.width/(t.width*n)}function xC(t,e,r,n,i,a){r===void 0&&(r=0);var o=_l(e.naturalWidth,e.naturalHeight,r),s=jh(bC(t,e,n),i,a),l=n.height>n.width?n.height/t.height:n.width/t.width,c={x:((o.width-t.width)/2-t.x)*l,y:((o.height-t.height)/2-t.y)*l};return{crop:c,zoom:s}}function Dy(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function _C(t){return t*Math.PI/180}function _l(t,e,r){var n=_C(r);return{width:Math.abs(Math.cos(n)*t)+Math.abs(Math.sin(n)*e),height:Math.abs(Math.sin(n)*t)+Math.abs(Math.cos(n)*e)}}function jh(t,e,r){return Math.min(Math.max(t,e),r)}function Vf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(r){return typeof r=="string"&&r.length>0}).join(" ").trim()}var SC=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,kC=1,NC=3,AC=1,EC=function(t){Wg(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.cropperRef=we.createRef(),r.imageRef=we.createRef(),r.videoRef=we.createRef(),r.containerPosition={x:0,y:0},r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc=typeof document<"u"?document:null,r.currentWindow=typeof window<"u"?window:null,r.resizeObserver=null,r.previousCropSize=null,r.isInitialized=!1,r.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},r.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!r.containerRef)){var n=!0;r.resizeObserver=new window.ResizeObserver(function(i){if(n){n=!1;return}r.computeSizes()}),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(n){return n.preventDefault()},r.cleanEvents=function(){r.currentDoc&&(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturechange",r.onGestureChange),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd),r.currentDoc.removeEventListener("scroll",r.onScroll))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var n=r.computeSizes();n&&(r.previousCropSize=n,r.emitCropData(),r.setInitialCrop(n),r.isInitialized=!0),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(n){if(r.props.initialCroppedAreaPercentages){var i=wC(r.props.initialCroppedAreaPercentages,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),a=i.crop,o=i.zoom;r.props.onCropChange(a),r.props.onZoomChange&&r.props.onZoomChange(o)}else if(r.props.initialCroppedAreaPixels){var s=xC(r.props.initialCroppedAreaPixels,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),a=s.crop,o=s.zoom;r.props.onCropChange(a),r.props.onZoomChange&&r.props.onZoomChange(o)}},r.computeSizes=function(){var n,i,a,o,s,l,c=r.imageRef.current||r.videoRef.current;if(c&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect(),r.saveContainerPosition();var p=r.containerRect.width/r.containerRect.height,d=((n=r.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((i=r.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,f=((a=r.imageRef.current)===null||a===void 0?void 0:a.naturalHeight)||((o=r.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,u=c.offsetWidth<d||c.offsetHeight<f,y=d/f,v=void 0;if(u)switch(r.state.mediaObjectFit){default:case"contain":v=p>y?{width:r.containerRect.height*y,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/y};break;case"horizontal-cover":v={width:r.containerRect.width,height:r.containerRect.width/y};break;case"vertical-cover":v={width:r.containerRect.height*y,height:r.containerRect.height};break}else v={width:c.offsetWidth,height:c.offsetHeight};r.mediaSize=Rr(Rr({},v),{naturalWidth:d,naturalHeight:f}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var b=r.props.cropSize?r.props.cropSize:pC(r.mediaSize.width,r.mediaSize.height,r.containerRect.width,r.containerRect.height,r.props.aspect,r.props.rotation);return(((s=r.state.cropSize)===null||s===void 0?void 0:s.height)!==b.height||((l=r.state.cropSize)===null||l===void 0?void 0:l.width)!==b.width)&&r.props.onCropSizeChange&&r.props.onCropSizeChange(b),r.setState({cropSize:b},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(b),b}},r.saveContainerPosition=function(){if(r.containerRef){var n=r.containerRef.getBoundingClientRect();r.containerPosition={x:n.left,y:n.top}}},r.onMouseDown=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.saveContainerPosition(),r.onDragStart(e.getMousePoint(n)))},r.onMouseMove=function(n){return r.onDrag(e.getMousePoint(n))},r.onScroll=function(n){r.currentDoc&&(n.preventDefault(),r.saveContainerPosition())},r.onTouchStart=function(n){r.currentDoc&&(r.isTouching=!0,!(r.props.onTouchRequest&&!r.props.onTouchRequest(n))&&(r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),r.saveContainerPosition(),n.touches.length===2?r.onPinchStart(n):n.touches.length===1&&r.onDragStart(e.getTouchPoint(n.touches[0]))))},r.onTouchMove=function(n){n.preventDefault(),n.touches.length===2?r.onPinchMove(n):n.touches.length===1&&r.onDrag(e.getTouchPoint(n.touches[0]))},r.onGestureStart=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureChange),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureChange=function(n){if(n.preventDefault(),!r.isTouching){var i=e.getMousePoint(n),a=r.gestureZoomStart-1+n.scale;if(r.setNewZoom(a,i,{shouldUpdatePosition:!0}),r.props.onRotationChange){var o=r.gestureRotationStart+n.rotation;r.props.onRotationChange(o)}}},r.onGestureEnd=function(n){r.cleanEvents()},r.onDragStart=function(n){var i,a,o=n.x,s=n.y;r.dragStartPosition={x:o,y:s},r.dragStartCrop=Rr({},r.props.crop),(a=(i=r.props).onInteractionStart)===null||a===void 0||a.call(i)},r.onDrag=function(n){var i=n.x,a=n.y;r.currentWindow&&(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame(function(){if(r.state.cropSize&&!(i===void 0||a===void 0)){var o=i-r.dragStartPosition.x,s=a-r.dragStartPosition.y,l={x:r.dragStartCrop.x+o,y:r.dragStartCrop.y+s},c=r.props.restrictPosition?ju(l,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):l;r.props.onCropChange(c)}}))},r.onDragStopped=function(){var n,i;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),(i=(n=r.props).onInteractionEnd)===null||i===void 0||i.call(n)},r.onWheel=function(n){if(r.currentWindow&&!(r.props.onWheelRequest&&!r.props.onWheelRequest(n))){n.preventDefault();var i=e.getMousePoint(n),a=hC(n).pixelY,o=r.props.zoom-a*r.props.zoomSpeed/200;r.setNewZoom(o,i,{shouldUpdatePosition:!0}),r.state.hasWheelJustStarted||r.setState({hasWheelJustStarted:!0},function(){var s,l;return(l=(s=r.props).onInteractionStart)===null||l===void 0?void 0:l.call(s)}),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout(function(){return r.setState({hasWheelJustStarted:!1},function(){var s,l;return(l=(s=r.props).onInteractionEnd)===null||l===void 0?void 0:l.call(s)})},250)}},r.getPointOnContainer=function(n,i){var a=n.x,o=n.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(a-i.x),y:r.containerRect.height/2-(o-i.y)}},r.getPointOnMedia=function(n){var i=n.x,a=n.y,o=r.props,s=o.crop,l=o.zoom;return{x:(i+s.x)/l,y:(a+s.y)/l}},r.setNewZoom=function(n,i,a){var o=a===void 0?{}:a,s=o.shouldUpdatePosition,l=s===void 0?!0:s;if(!(!r.state.cropSize||!r.props.onZoomChange)){var c=jh(n,r.props.minZoom,r.props.maxZoom);if(l){var p=r.getPointOnContainer(i,r.containerPosition),d=r.getPointOnMedia(p),f={x:d.x*c-p.x,y:d.y*c-p.y},u=r.props.restrictPosition?ju(f,r.mediaSize,r.state.cropSize,c,r.props.rotation):f;r.props.onCropChange(u)}r.props.onZoomChange(c)}},r.getCropData=function(){if(!r.state.cropSize)return null;var n=r.props.restrictPosition?ju(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;return mC(n,r.mediaSize,r.state.cropSize,r.getAspect(),r.props.zoom,r.props.rotation,r.props.restrictPosition)},r.emitCropData=function(){var n=r.getCropData();if(n){var i=n.croppedAreaPercentages,a=n.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(i,a),r.props.onCropAreaChange&&r.props.onCropAreaChange(i,a)}},r.emitCropAreaChange=function(){var n=r.getCropData();if(n){var i=n.croppedAreaPercentages,a=n.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(i,a)}},r.recomputeCropPosition=function(){var n,i;if(r.state.cropSize){var a=r.props.crop;if(r.isInitialized&&(!((n=r.previousCropSize)===null||n===void 0)&&n.width)&&(!((i=r.previousCropSize)===null||i===void 0)&&i.height)){var o=Math.abs(r.previousCropSize.width-r.state.cropSize.width)>1e-6||Math.abs(r.previousCropSize.height-r.state.cropSize.height)>1e-6;if(o){var s=r.state.cropSize.width/r.previousCropSize.width,l=r.state.cropSize.height/r.previousCropSize.height;a={x:r.props.crop.x*s,y:r.props.crop.y*l}}}var c=r.props.restrictPosition?ju(a,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):a;r.previousCropSize=r.state.cropSize,r.props.onCropChange(c),r.emitCropData()}},r.onKeyDown=function(n){var i,a,o=r.props,s=o.crop,l=o.onCropChange,c=o.keyboardStep,p=o.zoom,d=o.rotation,f=c;if(r.state.cropSize){n.shiftKey&&(f*=.2);var u=Rr({},s);switch(n.key){case"ArrowUp":u.y-=f,n.preventDefault();break;case"ArrowDown":u.y+=f,n.preventDefault();break;case"ArrowLeft":u.x-=f,n.preventDefault();break;case"ArrowRight":u.x+=f,n.preventDefault();break;default:return}r.props.restrictPosition&&(u=ju(u,r.mediaSize,r.state.cropSize,p,d)),n.repeat||(a=(i=r.props).onInteractionStart)===null||a===void 0||a.call(i),l(u)}},r.onKeyUp=function(n){var i,a;switch(n.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":n.preventDefault();break;default:return}r.emitCropData(),(a=(i=r.props).onInteractionEnd)===null||a===void 0||a.call(i)},r}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=SC,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var r,n;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(r=this.resizeObserver)===null||r===void 0||r.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((n=this.styleRef.parentNode)===null||n===void 0||n.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(r){var n,i,a,o,s,l,c,p,d;r.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):r.aspect!==this.props.aspect?this.computeSizes():r.objectFit!==this.props.objectFit?this.computeSizes():r.zoom!==this.props.zoom?this.recomputeCropPosition():((n=r.cropSize)===null||n===void 0?void 0:n.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((a=r.cropSize)===null||a===void 0?void 0:a.width)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.width)?this.computeSizes():(((s=r.crop)===null||s===void 0?void 0:s.x)!==((l=this.props.crop)===null||l===void 0?void 0:l.x)||((c=r.crop)===null||c===void 0?void 0:c.y)!==((p=this.props.crop)===null||p===void 0?void 0:p.y))&&this.emitCropAreaChange(),r.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),r.video!==this.props.video&&((d=this.videoRef.current)===null||d===void 0||d.load());var f=this.getObjectFit();f!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:f},this.computeSizes)},e.prototype.getAspect=function(){var r=this.props,n=r.cropSize,i=r.aspect;return n?n.width/n.height:i},e.prototype.getObjectFit=function(){var r,n,i,a;if(this.props.objectFit==="cover"){var o=this.imageRef.current||this.videoRef.current;if(o&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var s=this.containerRect.width/this.containerRect.height,l=((r=this.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((n=this.videoRef.current)===null||n===void 0?void 0:n.videoWidth)||0,c=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((a=this.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,p=l/c;return p<s?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(r){var n=e.getTouchPoint(r.touches[0]),i=e.getTouchPoint(r.touches[1]);this.lastPinchDistance=Ry(n,i),this.lastPinchRotation=Iy(n,i),this.onDragStart(Dy(n,i))},e.prototype.onPinchMove=function(r){var n=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(r.touches[0]),a=e.getTouchPoint(r.touches[1]),o=Dy(i,a);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var s=Ry(i,a),l=n.props.zoom*(s/n.lastPinchDistance);n.setNewZoom(l,o,{shouldUpdatePosition:!1}),n.lastPinchDistance=s;var c=Iy(i,a),p=n.props.rotation+(c-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(p),n.lastPinchRotation=c})}},e.prototype.render=function(){var r=this,n,i=this.props,a=i.image,o=i.video,s=i.mediaProps,l=i.cropperProps,c=i.transform,p=i.crop,d=p.x,f=p.y,u=i.rotation,y=i.zoom,v=i.cropShape,b=i.showGrid,g=i.roundCropAreaPixels,m=i.style,_=m.containerStyle,x=m.cropAreaStyle,A=m.mediaStyle,D=i.classes,T=D.containerClassName,j=D.cropAreaClassName,B=D.mediaClassName,P=(n=this.state.mediaObjectFit)!==null&&n!==void 0?n:this.getObjectFit();return we.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(E){return r.containerRef=E},"data-testid":"container",style:_,className:Vf("reactEasyCrop_Container",T)},a?we.createElement("img",Rr({alt:"",className:Vf("reactEasyCrop_Image",P==="contain"&&"reactEasyCrop_Contain",P==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",P==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",B)},s,{src:a,ref:this.imageRef,style:Rr(Rr({},A),{transform:c||"translate(".concat(d,"px, ").concat(f,"px) rotate(").concat(u,"deg) scale(").concat(y,")")}),onLoad:this.onMediaLoad})):o&&we.createElement("video",Rr({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Vf("reactEasyCrop_Video",P==="contain"&&"reactEasyCrop_Contain",P==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",P==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",B)},s,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Rr(Rr({},A),{transform:c||"translate(".concat(d,"px, ").concat(f,"px) rotate(").concat(u,"deg) scale(").concat(y,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map(function(k){return we.createElement("source",Rr({key:k.src},k))})),this.state.cropSize&&we.createElement("div",Rr({ref:this.cropperRef,style:Rr(Rr({},x),{width:g?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:g?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Vf("reactEasyCrop_CropArea",v==="round"&&"reactEasyCrop_CropAreaRound",b&&"reactEasyCrop_CropAreaGrid",j)},l)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:NC,minZoom:kC,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:AC},e.getMousePoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},e.getTouchPoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},e}(we.Component);const OC=t=>new Promise((e,r)=>{const n=new Image;n.addEventListener("load",()=>e(n)),n.addEventListener("error",i=>r(i)),n.setAttribute("crossOrigin","anonymous"),n.src=t});async function jC(t,e,r="image/jpeg"){const n=await OC(t),i=document.createElement("canvas"),a=i.getContext("2d");if(!a)throw new Error("No 2d context");return i.width=e.width,i.height=e.height,a.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height),new Promise((o,s)=>{i.toBlob(l=>{if(!l){s(new Error("Canvas is empty"));return}o(l)},r)})}const TC=({session:t,profile:e,onUpdateProfile:r,onAvatarUpload:n,onExportData:i,onSignOut:a,theme:o,onToggleTheme:s})=>{const[l,c]=we.useState(""),[p,d]=we.useState(!1),[f,u]=we.useState(!1),[y,v]=we.useState(!1),[b,g]=we.useState(!1),[m,_]=we.useState(""),[x,A]=we.useState(!1),[D,T]=we.useState(""),[j,B]=we.useState(null),[P,k]=we.useState(!1),[E,C]=we.useState(!1),[I,V]=we.useState(!1),[ee,te]=we.useState(!1),[Q,Y]=we.useState(null),[W,q]=we.useState(null),[L,M]=we.useState({x:0,y:0}),[U,H]=we.useState(1),[F,J]=we.useState(null),re=we.useRef(null),{deriveAndVerifyKey:ne,key:de}=is(),{addToast:xe}=vh();we.useEffect(()=>{c((e==null?void 0:e.full_name)||"")},[e==null?void 0:e.full_name]),we.useEffect(()=>{(async()=>{const ye=await r_();C(ye);const ge=localStorage.getItem(`diary_bio_${t.user.id}`);V(!!ge)})()},[t.user.id]),we.useEffect(()=>{let he=!0;return(async()=>{if(!(e!=null&&e.avatar_url)){he&&Y(null);return}if(e.avatar_url.startsWith("http"))he&&Y(e.avatar_url);else try{const{data:ge,error:Ie}=await Vt.storage.from("avatars").createSignedUrl(e.avatar_url,3600);if(Ie)throw Ie;he&&(ge!=null&&ge.signedUrl)&&Y(ge.signedUrl)}catch(ge){console.error("Error resolving avatar URL. Check RLS policies.",ge),he&&Y(null)}})(),()=>{he=!1}},[e==null?void 0:e.avatar_url]);const je=async he=>{he.preventDefault(),l.trim()!==(e==null?void 0:e.full_name)&&(v(!0),await r({full_name:l.trim()}),v(!1)),d(!1)},Ee=he=>{if(he.target.files&&he.target.files.length>0){const ye=he.target.files[0],ge=URL.createObjectURL(ye);q(ge),H(1),M({x:0,y:0}),he.target.value=""}},Me=(he,ye)=>{J(ye)},Se=async()=>{if(!(!W||!F))try{u(!0);const he=await jC(W,F),ye=new File([he],"avatar.jpg",{type:"image/jpeg"});await n(ye),q(null),xe("Profile picture updated successfully","success")}catch(he){console.error(he),xe(he.message||"Failed to update profile picture","error")}finally{u(!1)}},ae=()=>{q(null),u(!1)},Ve=async()=>{g(!0),_("Preparing...");try{await i(he=>_(he))}catch(he){console.error("Export failed",he)}finally{g(!1),_("")}},pe=async he=>{he.preventDefault(),B(null),k(!0);try{const ye=await ne(D,t.user.id);if(!ye){B("Incorrect password."),k(!1);return}if(!e){B("Profile data unavailable."),k(!1);return}const ge=await rm(ye);e_({email:t.user.email||"Unknown",password:D,salt:e.salt,rawKey:ge}),T(""),A(!1)}catch(ye){console.error("Error generating kit:",ye),B("An error occurred. Please try again.")}finally{k(!1)}},se=async()=>{if(!de){xe("Encryption key not available. Please re-login.","error");return}if(te(!0),I)localStorage.removeItem(`diary_bio_${t.user.id}`),V(!1),xe("Biometric unlock disabled.","info");else try{const he=await eC(de,t.user.id);localStorage.setItem(`diary_bio_${t.user.id}`,JSON.stringify(he)),V(!0),xe("Biometric unlock enabled successfully!","success")}catch(he){console.error("Bio enable failed",he),xe(he.message||"Failed to enable biometrics.","error")}te(!1)};return S.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 animate-fade-in pb-24",children:[S.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-8",children:"Profile & Settings"}),S.jsx("div",{className:"bg-white/50 dark:bg-slate-800/50 p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:S.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[S.jsxs("div",{className:"relative flex-shrink-0",children:[S.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden flex items-center justify-center",children:Q?S.jsx("img",{src:Q,alt:"User avatar",className:"w-full h-full object-cover"}):S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-slate-500 dark:text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),S.jsx("input",{ref:re,type:"file",id:"avatar-upload",className:"hidden",onChange:Ee,accept:"image/*"}),S.jsx("label",{htmlFor:"avatar-upload",className:"absolute -bottom-1 -right-1 bg-white dark:bg-slate-600 rounded-full p-1.5 cursor-pointer shadow-md hover:bg-slate-100 dark:hover:bg-slate-500 transition-colors",children:f?S.jsxs("svg",{className:"animate-spin h-5 w-5 text-slate-600 dark:text-slate-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-600 dark:text-slate-200",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),S.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]})})]}),S.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[p?S.jsxs("form",{onSubmit:je,className:"flex items-center gap-2",children:[S.jsx("input",{type:"text",value:l,onChange:he=>c(he.target.value),className:"w-full px-3 py-2 text-xl font-bold border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 disabled:opacity-75",autoFocus:!0,disabled:y}),S.jsx("button",{type:"submit",className:"px-3 py-2 text-sm font-semibold text-white bg-indigo-500 rounded-md hover:bg-indigo-600 disabled:bg-indigo-400",disabled:y,children:y?"Saving...":"Save"})]}):S.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[S.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:(e==null?void 0:e.full_name)||"Your Name"}),S.jsx("button",{onClick:()=>d(!0),className:"p-1.5 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 flex-shrink-0 text-slate-500",children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),S.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]})})]}),S.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:t.user.email})]})]})}),S.jsxs("div",{className:"mt-8 space-y-4",children:[S.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Dark Mode"}),S.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Toggle between light and dark themes."})]}),S.jsx("button",{onClick:s,className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${o==="dark"?"bg-indigo-500":"bg-slate-300"}`,children:S.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${o==="dark"?"translate-x-6":"translate-x-1"}`})})]}),E&&S.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Biometric Unlock"}),S.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Use FaceID or TouchID to unlock your diary."})]}),S.jsx("button",{onClick:se,disabled:ee,className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${I?"bg-green-500":"bg-slate-300"}`,children:S.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${I?"translate-x-6":"translate-x-1"}`})})]}),S.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Export Data (ZIP)"}),S.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Download entries as monthly JSON files."})]}),S.jsx("button",{onClick:Ve,disabled:b,className:"px-4 py-2 text-sm font-semibold bg-slate-100 text-slate-700 rounded-md hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 min-w-[100px] justify-center",children:b?S.jsxs(S.Fragment,{children:[S.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("span",{children:m})]}):"Export"})]}),S.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Recovery Kit"}),S.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Download a backup of your encryption keys."})]}),S.jsxs("button",{onClick:()=>A(!0),className:"px-4 py-2 text-sm font-semibold bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-200 dark:hover:bg-yellow-900/50 flex items-center gap-2",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Backup Keys"]})]})]}),S.jsx("div",{className:"mt-12",children:S.jsx("button",{onClick:a,className:"w-full sm:w-auto px-6 py-2 font-semibold text-red-600 bg-red-100 rounded-md hover:bg-red-200 dark:bg-red-900/50 dark:text-red-300 dark:hover:bg-red-900/80 transition-colors",children:"Sign Out"})}),W&&S.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/90 p-4 animate-fade-in",children:[S.jsx("div",{className:"relative w-full max-w-lg h-[400px] bg-slate-800 rounded-lg overflow-hidden mb-4",children:S.jsx(EC,{image:W,crop:L,zoom:U,aspect:1,onCropChange:M,onCropComplete:Me,onZoomChange:H,cropShape:"round",showGrid:!1})}),S.jsxs("div",{className:"w-full max-w-xs px-4 mb-6",children:[S.jsx("label",{className:"block text-xs text-slate-400 mb-1 text-center",children:"Zoom"}),S.jsx("input",{type:"range",value:U,min:1,max:3,step:.1,"aria-labelledby":"Zoom",onChange:he=>H(Number(he.target.value)),className:"w-full h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]}),S.jsxs("div",{className:"flex gap-4",children:[S.jsx("button",{onClick:ae,disabled:f,className:"px-6 py-2 text-sm font-semibold text-slate-300 bg-slate-700 hover:bg-slate-600 rounded-md",children:"Cancel"}),S.jsx("button",{onClick:Se,disabled:f,className:"px-6 py-2 text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 rounded-md flex items-center gap-2",children:f?"Saving...":"Save Avatar"})]})]}),x&&S.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:S.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 animate-fade-in-down",children:[S.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 mb-2",children:"Verify Identity"}),S.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Please enter your master password to authenticate and generate your Recovery Kit. This will contain your raw encryption keys."}),S.jsxs("form",{onSubmit:pe,children:[S.jsx("input",{type:"password",placeholder:"Your Password",value:D,onChange:he=>T(he.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 mb-2",autoFocus:!0,autoComplete:"current-password"}),j&&S.jsx("p",{className:"text-red-500 text-sm mb-4",children:j}),S.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[S.jsx("button",{type:"button",onClick:()=>{A(!1),T(""),B(null)},className:"px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100 rounded-md dark:text-slate-300 dark:hover:bg-slate-700",children:"Cancel"}),S.jsx("button",{type:"submit",disabled:P||!D,className:"px-4 py-2 text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 rounded-md disabled:bg-indigo-400",children:P?"Generating...":"Download Kit"})]})]})]})})]})},LC=({onClick:t})=>S.jsx("button",{onClick:t,className:"fixed top-3 left-4 z-40 p-2 rounded-md bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm hover:bg-slate-200/50 dark:hover:bg-slate-700/50","aria-label":"Open navigation menu",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),PC=({isOpen:t,onClose:e,onConfirm:r,title:n,message:i,isProcessing:a})=>{if(!t)return null;Ky.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const o=()=>{r()},s=document.getElementById("portal-root");return s?Hg.createPortal(S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center animate-fade-in","aria-modal":"true",role:"dialog",onClick:e,children:S.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl p-6 w-full max-w-sm m-4",role:"document",onClick:l=>l.stopPropagation(),children:[S.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:n}),S.jsx("p",{className:"mt-2 text-slate-600 dark:text-slate-300",children:i}),S.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[S.jsx("button",{onClick:e,disabled:a,className:"px-4 py-2 text-sm font-semibold bg-slate-100 text-slate-700 rounded-md hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Cancel deletion",children:"Cancel"}),S.jsx("button",{onClick:o,disabled:a,className:"px-4 py-2 text-sm font-semibold text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors disabled:bg-red-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[140px]","aria-label":"Confirm deletion",children:a?S.jsxs(S.Fragment,{children:[S.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("span",{children:"Deleting..."})]}):"Confirm Delete"})]})]})}),s):null},CC=({isOpen:t,existingTags:e,suggestedTags:r,onConfirm:n,onCancel:i})=>{const[a,o]=we.useState([]);if(we.useEffect(()=>{if(t){const c=Array.from(new Set([...e,...r]));o(c)}},[t,e,r]),!t)return null;const s=c=>{o(p=>p.filter(d=>d!==c))},l=document.getElementById("portal-root");return l?Hg.createPortal(S.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",role:"dialog","aria-modal":"true",children:S.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md border border-slate-200 dark:border-slate-700 overflow-hidden",children:[S.jsxs("div",{className:"p-6",children:[S.jsx("div",{className:"flex items-start justify-between mb-4",children:S.jsxs("div",{children:[S.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})}),"Smart Tags"]}),S.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"We found some keywords in your entry. Review them before saving."})]})}),S.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-lg p-4 min-h-[100px] border border-slate-100 dark:border-slate-700",children:a.length>0?S.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(c=>{const p=!e.includes(c);return S.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium transition-colors group ${p?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/60 dark:text-indigo-200 border border-indigo-200 dark:border-indigo-800":"bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 border border-transparent"}`,children:[c,S.jsx("button",{onClick:()=>s(c),className:"hover:text-red-500 dark:hover:text-red-400 focus:outline-none opacity-60 group-hover:opacity-100 transition-opacity","aria-label":`Remove tag ${c}`,children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},c)})}):S.jsx("p",{className:"text-sm text-slate-400 italic text-center mt-4",children:"No tags selected."})}),S.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md border border-blue-100 dark:border-blue-800 flex gap-3",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),S.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-300",children:[S.jsx("p",{className:"font-semibold mb-1",children:"Privacy Check:"}),S.jsxs("p",{children:["1. Analysis happens ",S.jsx("strong",{children:"offline"})," on your device."]}),S.jsxs("p",{children:["2. Tags are saved as ",S.jsx("strong",{children:"unencrypted metadata"})," (for search)."]}),S.jsxs("p",{children:["3. Your diary body remains ",S.jsx("strong",{children:"fully encrypted"}),"."]})]})]})]}),S.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/80 px-6 py-4 flex justify-end gap-3 border-t border-slate-100 dark:border-slate-700",children:[S.jsx("button",{onClick:i,className:"px-4 py-2 text-sm font-semibold text-slate-600 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 transition-colors",children:"Save without suggestions"}),S.jsx("button",{onClick:()=>n(a),className:"px-6 py-2 text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg shadow-sm shadow-indigo-200 dark:shadow-none transition-all transform active:scale-95",children:"Confirm & Save"})]})]})}),l):null},p0=()=>new Promise(t=>setTimeout(t,0)),My="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",RC=({session:t,theme:e,onToggleTheme:r})=>{const[n,i]=we.useState([]),[a,o]=we.useState(!0),[s,l]=we.useState("timeline"),[c,p]=we.useState(null),[d,f]=we.useState(null),[u,y]=we.useState(null),{key:v,setKey:b,encrypt:g,decrypt:m,encryptBinary:_,lock:x}=is(),[A,D]=we.useState("checking"),[T,j]=we.useState(null),[B,P]=we.useState(()=>window.innerWidth>=768),[k,E]=we.useState(!0),[C,I]=we.useState("synced"),[V,ee]=we.useState(null),[te,Q]=we.useState(0),[Y,W]=we.useState(0),q=we.useRef(null),[L,M]=we.useState("serif"),[U,H]=we.useState(null),[F,J]=we.useState(null),[re,ne]=we.useState(!1),[de,xe]=we.useState(!1),[je,Ee]=we.useState(null),[Me,Se]=we.useState(!1),[ae,Ve]=we.useState(null),[pe,se]=we.useState([]),he=we.useRef(new Set),{addToast:ye}=vh();we.useEffect(()=>{navigator.geolocation.getCurrentPosition(async be=>{try{const Be=await dN(be.coords.latitude,be.coords.longitude);ee(Be)}catch(Be){console.error("Failed to fetch weather:",Be)}},be=>{console.warn("Geolocation permission denied. Weather feature disabled.",be.message)},{enableHighAccuracy:!1,timeout:1e4,maximumAge:1e3*60*60})},[]),we.useEffect(()=>{(async()=>{if(v){D("ready");return}try{const{data:Be}=await Vt.from("profiles").select("id").eq("id",t.user.id).maybeSingle();D(Be?"reauth":"needed")}catch(Be){console.error("Error checking profile:",Be),ye("Error accessing profile. Please log out and in again.","error"),await Vt.auth.signOut()}})()},[v,t.user.id,ye]);const ge=be=>{b(be),D("ready")};we.useEffect(()=>{const be=()=>{if(document.visibilityState==="hidden")localStorage.setItem("diary_last_active",Date.now().toString());else if(document.visibilityState==="visible"){const Be=localStorage.getItem("diary_last_active");Be&&(Date.now()-parseInt(Be,10)>12e4&&v&&(console.log("Auto-locking due to inactivity"),x(),ye("Diary locked for security.","info")),localStorage.removeItem("diary_last_active"))}};return document.addEventListener("visibilitychange",be),()=>document.removeEventListener("visibilitychange",be)},[v,x,ye]);const Ie=we.useCallback(async()=>{try{const{data:be,error:Be}=await Vt.from("profiles").select("*").eq("id",t.user.id).single();if(Be)throw Be;j(be)}catch(be){console.error("Error fetching profile:",be)}},[t.user.id]),qe=we.useCallback(async()=>{if(v){o(!0);try{const{data:be,error:Be}=await Vt.from("diaries").select("id, created_at, mood, tags, owner_id, journal").order("created_at",{ascending:!1});if(Be)throw Be;const Qe=(be||[]).map(Je=>({id:Je.id,created_at:Je.created_at,mood:Je.mood,tags:Je.tags,owner_id:Je.owner_id,journal:Je.journal||"Personal",title:"",content:"",isDecrypted:!1,isLoading:!1}));i(Qe)}catch(be){console.error("Error fetching entries:",be),ye("Could not fetch entries.","error")}finally{o(!1)}}},[v,ye]),Ue=we.useCallback(async be=>{if(he.current.has(be)||!v)return;const Be=n.findIndex(Qe=>Qe.id===be);if(Be!==-1&&!n[Be].isDecrypted){he.current.add(be),i(Qe=>Qe.map(Je=>Je.id===be?{...Je,isLoading:!0}:Je));try{const{data:Qe,error:Je}=await Vt.from("diaries").select("encrypted_entry, iv").eq("id",be).single();if(Je)throw Je;const nt=await m(v,Qe.encrypted_entry,Qe.iv),{title:pt,content:ir,audio:Mr}=JSON.parse(nt);i(Kt=>Kt.map(_t=>_t.id===be?{..._t,title:pt,content:ir,audio:Mr,isDecrypted:!0,isLoading:!1}:_t))}catch(Qe){console.error(`Error decrypting entry ${be}:`,Qe),i(Je=>Je.map(nt=>nt.id===be?{...nt,isLoading:!1}:nt))}finally{he.current.delete(be)}}},[n,v,m]);we.useEffect(()=>{A==="ready"&&(qe(),Ie())},[qe,Ie,A]),we.useEffect(()=>{u&&!u.isDecrypted&&!u.isLoading&&Ue(u.id)},[u,Ue]),we.useEffect(()=>{if(u){const be=n.find(Be=>Be.id===u.id);be&&(be.isDecrypted!==u.isDecrypted||be.isLoading!==u.isLoading)&&y(be)}},[n,u]),we.useEffect(()=>{if(!q.current||!d)return;const be=q.current.getEditor();if(!be)return;const Be=Qe=>{if(Qe&&Qe.length===0){const[Je]=be.getLeaf(Qe.index);if(Je&&Je.statics.blotName==="image"){const nt=be.getFormat(Qe.index,1),pt=be.getFormat(Qe.index-1,1);Ee({width:nt.width,align:pt.align,float:nt.float})}else Ee(null)}else Qe||Ee(null)};return be.on("selection-change",Be),()=>{be.off("selection-change",Be)}},[d]);const rt=we.useMemo(()=>{const be=new Date,Be=be.getMonth(),Qe=be.getDate();return n.filter(Je=>{const nt=new Date(Je.created_at);return nt.getMonth()===Be&&nt.getDate()===Qe&&nt.getFullYear()<be.getFullYear()}).sort((Je,nt)=>new Date(nt.created_at).getTime()-new Date(Je.created_at).getTime())},[n]),lt=we.useMemo(()=>{const be=new Set;return n.forEach(Be=>{Be.journal?be.add(Be.journal):be.add("Personal")}),Array.from(be).sort()},[n]),at=be=>{const Qe=new DOMParser().parseFromString(be,"text/html");return Qe.querySelectorAll("img.secure-diary-image").forEach(nt=>{var pt;(pt=nt.getAttribute("src"))!=null&&pt.startsWith("blob:")&&nt.setAttribute("src",My)}),Qe.body.innerHTML},ot=we.useCallback(async be=>{if(!v){ye("Security session expired.","error");return}if(!d){ye("Cannot save: no entry is currently being edited.","error");return}I("encrypting");try{let Be=null;const Qe=d==="new"?{}:d;if(be.tempAudioBlob)try{const _t=await be.tempAudioBlob.arrayBuffer(),{iv:Tt,data:$t}=await _(v,_t),Qt=new Blob([$t],{type:"application/octet-stream"}),Ht=`${t.user.id}/${Date.now()}-audio.bin`,{error:Zt}=await Vt.storage.from("diary-audio").upload(Ht,Qt,{upsert:!0});if(Zt)throw Zt;Be={path:Ht,iv:Tt,type:be.tempAudioBlob.type}}catch(_t){console.error("Audio upload failed",_t),ye("Failed to secure audio. Saving text only.","error")}else"audio"in Qe&&(Be=Qe.audio);const Je=at(be.content),nt=JSON.stringify({title:be.title,content:Je,audio:Be}),{iv:pt,data:ir}=await g(v,nt),Mr=typeof d=="object"&&"id"in d&&d.id!=="",Kt={encrypted_entry:ir,iv:pt,mood:be.mood,tags:be.tags,journal:be.journal||"Personal",created_at:be.created_at};if(Mr){const{error:_t}=await Vt.from("diaries").update(Kt).eq("id",d.id);if(_t)throw _t;i(Tt=>Tt.map($t=>$t.id===d.id?{...$t,...be,audio:Be,isDecrypted:!0}:$t))}else{const{data:_t,error:Tt}=await Vt.from("diaries").insert({...Kt,owner_id:t.user.id}).select("id, created_at, mood, tags, owner_id, journal").single();if(Tt)throw Tt;const $t={..._t,...be,audio:Be,id:_t.id,isDecrypted:!0,isLoading:!1};i(Qt=>[$t,...Qt].sort((Ht,Zt)=>new Date(Zt.created_at).getTime()-new Date(Ht.created_at).getTime()))}ye("Entry saved!","success"),f(null),l("timeline"),P(!0),I("synced"),Se(!1),Ve(null)}catch(Be){console.error("Error saving entry:",Be),ye("Failed to save entry.","error"),I("error")}},[v,d,t.user.id,g,_,ye]),tt=we.useCallback(be=>{const Be=be.tags||[],Je=hN(be.content).filter(nt=>!Be.some(pt=>pt.toLowerCase()===nt.toLowerCase()));Je.length>0?(Ve(be),se(Je),Se(!0)):ot(be)},[ot]),ze=be=>{ae&&ot({...ae,tags:be})},br=()=>{ae&&ot(ae)},bt=be=>{H(be)},zr=async()=>{if(!(!U||re)){ne(!0);try{const{error:be}=await Vt.from("diaries").delete().eq("id",U.id);if(be)throw be;i(Be=>Be.filter(Qe=>Qe.id!==U.id)),ye("Entry deleted successfully.","success"),y(null),H(null)}catch(be){console.error("Error deleting entry:",be),ye("Failed to delete entry.","error"),H(null)}finally{ne(!1)}}},xt=be=>{J(be),y(null),l("timeline")},jt=be=>{p(be),l("timeline"),y(null),J(null)},rn=()=>{y(null)},Nt=async()=>{await Vt.auth.signOut()},yi=async be=>{try{const{data:Be,error:Qe}=await Vt.from("profiles").update(be).eq("id",t.user.id).select().single();if(Qe)throw Qe;j(Be),ye("Profile updated successfully!","success")}catch(Be){ye("Failed to update profile.","error"),console.error("Error updating profile:",Be)}},Dt=async be=>{try{const Be=be.name.split(".").pop(),Qe=`${t.user.id}/${Date.now()}.${Be}`,{error:Je}=await Vt.storage.from("avatars").upload(Qe,be,{upsert:!0});if(Je)throw Je;const{error:nt}=await Vt.from("profiles").update({avatar_url:Qe}).eq("id",t.user.id);if(nt)throw nt;j(pt=>pt?{...pt,avatar_url:Qe}:null)}catch(Be){throw console.error("Error uploading avatar:",Be),Be}},$r=async be=>{if(v)try{const{count:Be,error:Qe}=await Vt.from("diaries").select("*",{count:"exact",head:!0});if(Qe)throw Qe;const Je=Be||0;if(Je===0){ye("No entries to export.","info");return}const nt=new K_("application/zip"),pt=new Y_(nt),ir=50;let Mr=0,Kt=[],_t="";for(let Ht=0;Ht<Je;Ht+=ir){be(`Processing ${Mr} / ${Je}`),await p0();const{data:Zt,error:mn}=await Vt.from("diaries").select("*").order("created_at",{ascending:!1}).range(Ht,Ht+ir-1);if(mn)throw mn;if(Zt)for(const He of Zt){try{const le=await m(v,He.encrypted_entry,He.iv),Re=JSON.parse(le),Ge=new Date(He.created_at),Ct=`${Ge.getFullYear()}-${String(Ge.getMonth()+1).padStart(2,"0")}`;_t&&Ct!==_t&&Kt.length>0&&(await pt.add(`${_t}.json`,new Mm(JSON.stringify(Kt,null,2))),Kt=[],await p0()),_t=Ct,Kt.push({id:He.id,created_at:He.created_at,title:Re.title,content:Re.content,tags:He.tags,mood:He.mood,journal:He.journal,audio:Re.audio?"Audio file attached (encrypted, not exported)":void 0})}catch(le){console.error(`Failed to export entry ${He.id}`,le)}Mr++}}Kt.length>0&&await pt.add(`${_t}.json`,new Mm(JSON.stringify(Kt,null,2))),be("Finalizing ZIP..."),await p0();const Tt=await pt.close(),$t=URL.createObjectURL(Tt),Qt=document.createElement("a");Qt.href=$t,Qt.download=`diary_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(Qt),Qt.click(),document.body.removeChild(Qt),URL.revokeObjectURL($t),ye("Export complete!","success")}catch(Be){console.error("Export failed:",Be),ye("Export failed. Please check console.","error")}},zn=async be=>{var Qe;const Be=(Qe=q.current)==null?void 0:Qe.getEditor();if(!(!Be||!v)){xe(!0);try{const{blob:Je}=await pN(be),nt=await Je.arrayBuffer(),{iv:pt,data:ir}=await _(v,nt),Mr=`${t.user.id}/${Date.now()}.bin`,Kt=new Blob([ir],{type:"application/octet-stream"}),{error:_t}=await Vt.storage.from("diary-images").upload(Mr,Kt,{contentType:"application/octet-stream",upsert:!1});if(_t)throw _t;const Tt=Be.getSelection(!0)||{index:Be.getLength(),length:0},$t=JSON.stringify({path:Mr,iv:pt});Be.insertEmbed(Tt.index,"image",{src:My,alt:"Secure Image",className:"secure-diary-image",dataset:{secureMetadata:$t}},"user"),Be.setSelection(Tt.index+1,0,"user"),setTimeout(()=>{var Qt,Ht;try{const Zt=(Ht=(Qt=q.current)==null?void 0:Qt.getEditor())==null?void 0:Ht.root;if(!Zt)return;const mn=Zt.querySelectorAll("img.secure-diary-image");let He=null;for(let le=0;le<mn.length;le++){const Re=mn[le];if(Re.getAttribute("data-secure-metadata")===$t){He=Re;break}}if(He){const le=URL.createObjectURL(Je);He.src=le,He.style.opacity="1"}}catch(Zt){console.error("Preview error:",Zt)}},50)}catch(Je){ye("Failed to upload image.","error"),console.error("Error uploading image:",Je)}finally{xe(!1)}}},It=be=>{var Qe;const Be=(Qe=q.current)==null?void 0:Qe.getEditor();Be&&(Object.keys(be).forEach(Je=>{Be.format(Je,be[Je],"user")}),setTimeout(()=>{const Je=Be.getSelection();Je&&Be.emitter.emit("selection-change",Je,Je,"user")},0))},dt=be=>{y(null),f(be),P(!1)},Et=()=>{y(null),f("new"),l("timeline"),P(!1)},zt=()=>{f(null),P(!0)},Xt=()=>{var be;(be=q.current)==null||be.save()};if(A!=="ready"){let be;switch(A){case"checking":be=S.jsx("p",{children:"Initializing Secure Session..."});break;case"needed":be=S.jsx(QP,{onSuccess:ge,session:t});break;case"reauth":be=S.jsx(rC,{onSuccess:ge,session:t});break;default:be=S.jsx("p",{children:"An unexpected error occurred."})}return S.jsx("main",{className:"flex items-center justify-center h-screen",children:be})}const On=()=>{switch(s){case"calendar":return S.jsx(JL,{entries:n,onSelectDate:xt,onBack:()=>l("timeline")});case"search":return S.jsx(QL,{entries:n,onSelectEntry:Be=>dt(n.find(Qe=>Qe.id===Be)),onBack:()=>l("timeline")});case"profile":return S.jsx(TC,{session:t,profile:T,onUpdateProfile:yi,onAvatarUpload:Dt,onExportData:$r,onSignOut:Nt,theme:e,onToggleTheme:r});case"timeline":default:if(u)return S.jsx(pE,{entry:u,onEdit:()=>dt(u),onDelete:()=>bt(u),onBack:rn});let be=n;if(F){const Be=new Date(F.getTime()-F.getTimezoneOffset()*6e4).toISOString().split("T")[0];be=be.filter(Qe=>{const Je=new Date(Qe.created_at);return new Date(Je.getTime()-Je.getTimezoneOffset()*6e4).toISOString().split("T")[0]===Be})}return c&&(be=be.filter(Be=>(Be.journal||"Personal")===c)),S.jsx(WA,{entries:be,onThisDayEntries:rt,onSelectEntry:Be=>y(n.find(Qe=>Qe.id===Be)||null),onLoadContent:Ue,profile:T,filteredDate:F,onClearFilter:()=>J(null)})}},nn=be=>{y(null),f(null),J(null),l(be)};return S.jsxs("div",{className:"h-screen w-screen flex flex-col font-sans bg-[#FBF8F3] dark:bg-slate-900",children:[S.jsx(DA,{isEditing:!!d,onSave:Xt,onCancel:zt,currentDate:d&&typeof d=="object"?new Date(d.created_at):u?new Date(u.created_at):new Date,weather:V,theme:e,onToggleTheme:r,saveStatus:C,profile:T,onShowProfile:()=>nn("profile"),isToolsPanelVisible:k,onToggleToolsPanel:()=>E(be=>!be),isLeftSidebarVisible:B}),!B&&S.jsx(LC,{onClick:()=>P(!0)}),B&&S.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-20 md:hidden",onClick:()=>P(!1),"aria-hidden":"true"}),S.jsxs("div",{className:`flex flex-1 overflow-hidden transition-all duration-300 ${B?"md:pl-64":"pl-0"} relative`,children:[S.jsx(gN,{isVisible:B,onClose:()=>P(!1),activeView:s,onChangeView:nn,onNewEntry:Et,journals:lt,activeJournal:c,onSelectJournal:jt}),S.jsx("main",{className:"flex-1 p-4 sm:p-6 md:p-8 overflow-y-auto min-w-0 w-full",children:d?S.jsx(YL,{ref:q,entry:typeof d=="object"?d:void 0,onSave:tt,onWordCountChange:Q,onCharacterCountChange:W,editorFont:L},typeof d=="object"&&d.id?d.id:"draft_session"):a?S.jsx("div",{className:"flex items-center justify-center h-full",children:S.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 text-slate-500 dark:text-slate-400",children:[S.jsxs("svg",{className:"animate-spin h-12 w-12",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"text-sm",children:"Loading your encrypted diary..."})]})}):On()}),d&&k&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-20 md:hidden",onClick:()=>E(!1),"aria-hidden":"true"}),S.jsx("div",{className:"fixed inset-y-0 right-0 z-30 h-full w-64 shadow-2xl md:relative md:shadow-none md:z-auto animate-slide-in-right md:animate-none",children:S.jsx(qA,{entry:d,onUpdateEntry:be=>{f(d==="new"?Be=>({id:"",owner_id:"",title:"",content:"",created_at:new Date().toISOString(),...typeof Be=="object"?Be:{},...be}):Be=>({...Be,...be}))},editorFont:L,onFontChange:M,onImageUpload:zn,isUploadingImage:de,selectedImageFormat:je,onImageFormatChange:It,availableJournals:lt})})]})]}),d&&S.jsx(MA,{wordCount:te,characterCount:Y,saveStatus:C}),S.jsx(PC,{isOpen:!!U,isProcessing:re,onClose:()=>H(null),onConfirm:zr,title:"Delete Entry?",message:"Are you sure you want to permanently delete this entry? This action cannot be undone."}),S.jsx(CC,{isOpen:Me,existingTags:(ae==null?void 0:ae.tags)||[],suggestedTags:pe,onConfirm:ze,onCancel:br})]})},IC=({onGetStarted:t})=>{const[e,r]=we.useState(0),n=["Thoughts","Secrets","Memories","Dreams"],[i,a]=we.useState(0),[o,s]=we.useState(""),[l,c]=we.useState(!1);return we.useEffect(()=>{const p=n[i],f=setTimeout(()=>{if(!l&&o===p)setTimeout(()=>c(!0),2e3);else if(l&&o==="")c(!1),a(u=>(u+1)%n.length);else{const u=l?p.substring(0,o.length-1):p.substring(0,o.length+1);s(u)}},l?50:100);return()=>clearTimeout(f)},[o,l,i]),we.useEffect(()=>{const p=()=>{r(0),setTimeout(()=>r(1),2500),setTimeout(()=>r(2),4e3),setTimeout(()=>r(0),6e3)};p();const d=setInterval(p,6e3);return()=>clearInterval(d)},[]),S.jsxs("div",{className:"min-h-screen bg-[#FBF8F3] text-slate-800 font-sans overflow-x-hidden selection:bg-indigo-200",children:[S.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none overflow-hidden",children:[S.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] rounded-full bg-indigo-200/30 blur-[100px]"}),S.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] rounded-full bg-orange-100/50 blur-[100px]"})]}),S.jsxs("nav",{className:"relative z-20 flex items-center justify-between px-6 py-6 max-w-6xl mx-auto",children:[S.jsxs("div",{className:"text-2xl font-bold font-serif tracking-tight flex items-center gap-2 text-slate-800",children:[S.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-lg shadow-indigo-900/5 border border-slate-100",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-indigo-600",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),S.jsx("span",{children:"Diary"})]}),S.jsx("button",{onClick:t,className:"px-8 py-2.5 rounded-full text-white font-semibold bg-gradient-to-br from-indigo-400 to-purple-600 shadow-[inset_0_2px_4px_rgba(255,255,255,0.3),inset_0_-2px_4px_rgba(0,0,0,0.2),0_8px_20px_-6px_rgba(124,58,237,0.5)] hover:scale-105 transition-transform border border-indigo-300/50",children:"Log In"})]}),S.jsxs("main",{className:"relative z-10 w-full flex flex-col items-center",children:[S.jsxs("section",{className:"max-w-6xl mx-auto px-6 pb-20 pt-10 w-full flex flex-col items-center",children:[S.jsxs("div",{className:"w-full flex justify-center perspective-1000 py-12 sm:py-16 relative",children:[S.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 w-56 h-8 bg-black/20 blur-2xl rounded-[100%]"}),S.jsxs("div",{className:"relative w-[280px] h-[580px] bg-slate-900 rounded-[3.5rem] border-[6px] border-slate-950 shadow-[0_0_0_1.5px_rgba(255,255,255,0.15),0_50px_100px_-20px_rgba(0,0,0,0.5)] animate-float-phone preserve-3d",children:[S.jsx("div",{className:"absolute inset-0 rounded-[3.2rem] bg-gradient-to-tr from-white/10 via-transparent to-transparent pointer-events-none z-20"}),S.jsx("div",{className:"absolute top-24 -right-[7px] w-[7px] h-16 bg-slate-800 rounded-r-md border-l border-slate-950 shadow-sm"}),S.jsx("div",{className:"absolute top-24 -left-[7px] w-[7px] h-10 bg-slate-800 rounded-l-md border-r border-slate-950 shadow-sm"}),S.jsx("div",{className:"absolute top-36 -left-[7px] w-[7px] h-10 bg-slate-800 rounded-l-md border-r border-slate-950 shadow-sm"}),S.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1/3 h-7 bg-black rounded-b-2xl z-30 flex justify-center items-center",children:S.jsx("div",{className:"w-12 h-1.5 bg-slate-800/50 rounded-full"})}),S.jsxs("div",{className:"absolute inset-[6px] bg-[#FBF8F3] rounded-[3.1rem] overflow-hidden flex flex-col shadow-inner",children:[S.jsxs("div",{className:"h-20 bg-white flex items-end pb-4 px-6 justify-between border-b border-slate-100",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 animate-pulse"}),S.jsx("div",{className:"h-4 w-24 bg-slate-100 rounded"})]}),S.jsxs("div",{className:"flex-1 p-5 space-y-6",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsx("div",{className:"h-6 w-3/4 bg-slate-200/50 rounded"}),S.jsx("div",{className:"h-3 w-1/2 bg-slate-200/30 rounded"})]}),S.jsxs("div",{className:"p-5 rounded-2xl bg-white shadow-sm border border-slate-100 min-h-[220px] font-serif text-lg relative overflow-hidden flex flex-col",children:[S.jsx("div",{className:"text-xs font-sans uppercase tracking-wider text-slate-300 mb-4",children:"Nov 18, 2025"}),e===0&&S.jsxs("div",{className:"text-slate-700 leading-relaxed",children:["My deepest secret is",S.jsx("span",{className:"typing-cursor border-indigo-500",children:"|"})]}),e===1&&S.jsx("div",{className:"break-all animate-matrix text-emerald-600 font-mono text-xs leading-relaxed opacity-80",children:"0x9F3a2B1c8D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e5F6a7B8c9D0e1F2a3B4c5D6e7F8a9B0c1D2e3F4a5B6c7D8e9F0a1B2c3D4e"}),e===2&&S.jsxs("div",{className:"flex flex-1 items-center justify-center flex-col gap-3",children:[S.jsx("div",{className:"w-16 h-16 bg-indigo-50 rounded-full flex items-center justify-center",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-indigo-500",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),S.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:"Secure"})]})]})]}),S.jsx("div",{className:"h-6 w-full flex justify-center items-start pt-1",children:S.jsx("div",{className:"w-1/3 h-1 bg-slate-300 rounded-full"})})]})]})]}),S.jsxs("div",{className:"text-center space-y-8 max-w-2xl",children:[S.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-bold font-serif leading-[1.1] tracking-tight text-slate-900",children:["Your ",S.jsx("span",{className:"text-indigo-600 inline-block min-w-[200px] border-b-4 border-indigo-200",children:o}),S.jsx("br",{}),"Encrypted. Forever."]}),S.jsxs("p",{className:"text-lg sm:text-xl text-slate-500 leading-relaxed max-w-lg mx-auto",children:["Write freely in a beautiful, private space. Secured with military-grade encryption that only ",S.jsx("strong",{children:"you"})," hold the keys to."]}),S.jsx("div",{className:"flex flex-col sm:flex-row items-center gap-4 justify-center pt-4",children:S.jsxs("button",{onClick:t,className:"px-8 py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-bold text-lg transition-all hover:scale-105 hover:-translate-y-1 shadow-xl shadow-indigo-200 flex items-center gap-2",children:["Get Started for Free",S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})}),S.jsxs("div",{className:"pt-10 flex flex-wrap justify-center gap-x-8 gap-y-4 opacity-60 text-slate-400 font-medium text-sm",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"End-to-End Encrypted"]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),"Biometric Lock"]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Local First"]})]})]})]}),S.jsx("section",{className:"w-full bg-white py-24 border-y border-slate-100",children:S.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[S.jsxs("div",{className:"text-center mb-16",children:[S.jsx("h2",{className:"text-3xl font-bold font-serif text-slate-900 mb-4",children:"How Your Privacy is Guaranteed"}),S.jsx("p",{className:"text-slate-500 max-w-lg mx-auto",children:"We don't rely on trust. We rely on math. Here is the lifecycle of your diary data."})]}),S.jsxs("div",{className:"relative border-l-2 border-indigo-100 ml-6 md:ml-12 space-y-16",children:[S.jsxs("div",{className:"relative pl-8 md:pl-12",children:[S.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-indigo-500 shadow-lg shadow-indigo-200 ring-4 ring-white"}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-8",children:[S.jsx("div",{className:"w-16 h-16 rounded-2xl bg-orange-50 flex items-center justify-center text-orange-500 flex-shrink-0",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"1. Local Key Generation"}),S.jsx("p",{className:"text-slate-600 leading-relaxed",children:"When you create your account, your browser generates a unique 256-bit encryption key. This process happens entirely on your device. We never see this key."})]})]})]}),S.jsxs("div",{className:"relative pl-8 md:pl-12",children:[S.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-white border-2 border-indigo-300"}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-8",children:[S.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-500 flex-shrink-0",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})})}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"2. The Biometric Vault"}),S.jsx("p",{className:"text-slate-600 leading-relaxed",children:"Your key is wrapped using your device's secure hardware (FaceID or TouchID). This allows you to unlock your diary instantly without typing a password, while keeping the key mathematically secure."})]})]})]}),S.jsxs("div",{className:"relative pl-8 md:pl-12",children:[S.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-white border-2 border-indigo-300"}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-8",children:[S.jsx("div",{className:"w-16 h-16 rounded-2xl bg-emerald-50 flex items-center justify-center text-emerald-500 flex-shrink-0",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"3. Zero-Knowledge Sync"}),S.jsxs("p",{className:"text-slate-600 leading-relaxed",children:["When you save an entry, it is encrypted ",S.jsx("i",{children:"before"}),' it leaves your browser. Our servers only receive a scrambled "blob" of data. We cannot decrypt it even if compelled by law.']})]})]})]})]})]})}),S.jsxs("section",{className:"max-w-6xl mx-auto px-6 py-24",children:[S.jsxs("div",{className:"text-center mb-16",children:[S.jsx("h2",{className:"text-3xl font-bold font-serif text-slate-900 mb-4",children:"More Than Just Text"}),S.jsx("p",{className:"text-slate-500",children:"A complete suite of tools to capture your life in high fidelity."})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[S.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[S.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-2xl flex items-center justify-center text-indigo-600 mb-6",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),S.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Rich Editor"}),S.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Format your thoughts with a beautiful, distraction-free editor. Supports custom fonts, lists, and dynamic layouts."})]}),S.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[S.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-2xl flex items-center justify-center text-pink-600 mb-6",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),S.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Secure Media"}),S.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Attach photos and images. They are encrypted with the same military-grade key as your text."})]}),S.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[S.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-2xl flex items-center justify-center text-purple-600 mb-6",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),S.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Voice Memos"}),S.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Record encrypted audio notes for when typing feels like too much work. Stored securely in the cloud."})]}),S.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[S.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-2xl flex items-center justify-center text-yellow-600 mb-6",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),S.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Mood Tracking"}),S.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Track your emotional journey over time. Filter entries by mood to see patterns in your life."})]}),S.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[S.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-2xl flex items-center justify-center text-blue-600 mb-6",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),S.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Smart Organization"}),S.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Organize entries with tags, journals, and location data (weather). Find any memory instantly."})]}),S.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100",children:[S.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center text-slate-600 mb-6",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),S.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Total Ownership"}),S.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Your data is yours. Export your entire diary history to JSON or ZIP at any time. No lock-in."})]})]})]}),S.jsxs("section",{className:"w-full bg-indigo-900 text-white py-20 mt-12 relative overflow-hidden",children:[S.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"}),S.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 bg-indigo-500/30 rounded-full blur-3xl translate-x-1/2 translate-y-1/2"}),S.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center relative z-10",children:[S.jsx("h2",{className:"text-4xl font-bold font-serif mb-6",children:"Ready to start writing?"}),S.jsx("p",{className:"text-indigo-200 text-lg mb-10 max-w-xl mx-auto",children:"Join thousands of others who have reclaimed their privacy. No credit card required."}),S.jsx("button",{onClick:t,className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:bg-indigo-50 transition-all hover:scale-105 shadow-xl",children:"Create Your Sanctuary"})]})]})]})]})},DC=()=>{const[t,e]=we.useState(null),[r,n]=we.useState(!0),[i,a]=we.useState(()=>localStorage.getItem("theme")||"light"),[o,s]=we.useState(!0);we.useEffect(()=>{Vt.auth.getSession().then(({data:{session:p}})=>{e(p),n(!1)});const{data:{subscription:c}}=Vt.auth.onAuthStateChange((p,d)=>{e(d)});return()=>c==null?void 0:c.unsubscribe()},[]),we.useEffect(()=>{const c=window.document.documentElement;i==="dark"?c.classList.add("dark"):c.classList.remove("dark"),localStorage.setItem("theme",i)},[i]),we.useEffect(()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/diary/sw.js",{scope:"/diary/"}).then(c=>{console.log("ServiceWorker registration successful with scope: ",c.scope)}).catch(c=>{console.log("ServiceWorker registration failed: ",c)})})},[]);const l=()=>{a(c=>c==="light"?"dark":"light")};return r?S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:S.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Loading..."})}):S.jsx(tN,{children:S.jsx(cN,{children:S.jsx("div",{className:"min-h-screen bg-[#FBF8F3] dark:bg-slate-900 font-sans",children:t?S.jsx(RC,{session:t,theme:i,onToggleTheme:l},t.user.id):o?S.jsx(IC,{onGetStarted:()=>s(!1)}):S.jsx(nN,{onBackToHome:()=>s(!0)})})})})},c_=document.getElementById("root");if(!c_)throw new Error("Could not find root element to mount to");const MC=g0.createRoot(c_);MC.render(S.jsx(Ky.StrictMode,{children:S.jsx(DC,{})}));export{qt as _,Xn as c,Xd as g};
